!(function(){var ZS=Object.defineProperty,KS=Object.defineProperties;var $S=Object.getOwnPropertyDescriptors;var Ah=Object.getOwnPropertySymbols;var V0=Object.prototype.hasOwnProperty,H0=Object.prototype.propertyIsEnumerable;var Rv=Math.pow,j0=(He,z,C)=>z in He?ZS(He,z,{enumerable:!0,configurable:!0,writable:!0,value:C}):He[z]=C,Da=(He,z)=>{for(var C in z||(z={}))V0.call(z,C)&&j0(He,C,z[C]);if(Ah)for(var C of Ah(z))H0.call(z,C)&&j0(He,C,z[C]);return He},yo=(He,z)=>KS(He,$S(z));var Ih=(He,z)=>{var C={};for(var x in He)V0.call(He,x)&&z.indexOf(x)<0&&(C[x]=He[x]);if(He!=null&&Ah)for(var x of Ah(He))z.indexOf(x)<0&&H0.call(He,x)&&(C[x]=He[x]);return C};var Z0=(He,z,C)=>new Promise((x,k)=>{var w=P=>{try{L(C.next(P))}catch(p){k(p)}},T=P=>{try{L(C.throw(P))}catch(p){k(p)}},L=P=>P.done?x(P.value):Promise.resolve(P.value).then(w,T);L((C=C.apply(He,z)).next())});(self.webpackChunkantd=self.webpackChunkantd||[]).push([[9533],{62238:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var C=function(w,T){var L=w.nodes,P=w.edges,p=[],m={};if(!L)throw new Error("invalid nodes data!");return L&&L.forEach(function(S,y){m[S.id]=y;var g=[];p.push(g)}),P&&P.forEach(function(S){var y=S.source,g=S.target,O=m[y],E=m[g];!O&&O!==0||!E&&E!==0||(p[O][E]=1,T||(p[E][O]=1))}),p},x=C;z.default=x},810369:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"GADDIAsync",{enumerable:!0,get:function(){return x.GADDIAsync}}),Object.defineProperty(z,"connectedComponentAsync",{enumerable:!0,get:function(){return x.connectedComponentAsync}}),z.default=void 0,Object.defineProperty(z,"detectAllCyclesAsync",{enumerable:!0,get:function(){return x.detectAllCyclesAsync}}),Object.defineProperty(z,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return x.detectAllDirectedCycleAsync}}),Object.defineProperty(z,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return x.detectAllUndirectedCycleAsync}}),Object.defineProperty(z,"detectCycleAsync",{enumerable:!0,get:function(){return x.detectCycleAsync}}),z.detectDirectedCycleAsync=void 0,Object.defineProperty(z,"dijkstraAsync",{enumerable:!0,get:function(){return x.dijkstraAsync}}),Object.defineProperty(z,"findAllPathAsync",{enumerable:!0,get:function(){return x.findAllPathAsync}}),Object.defineProperty(z,"findShortestPathAsync",{enumerable:!0,get:function(){return x.findShortestPathAsync}}),Object.defineProperty(z,"floydWarshallAsync",{enumerable:!0,get:function(){return x.floydWarshallAsync}}),Object.defineProperty(z,"getAdjMatrixAsync",{enumerable:!0,get:function(){return x.getAdjMatrixAsync}}),Object.defineProperty(z,"getDegreeAsync",{enumerable:!0,get:function(){return x.getDegreeAsync}}),Object.defineProperty(z,"getInDegreeAsync",{enumerable:!0,get:function(){return x.getInDegreeAsync}}),Object.defineProperty(z,"getNeighborsAsync",{enumerable:!0,get:function(){return x.getNeighborsAsync}}),Object.defineProperty(z,"getOutDegreeAsync",{enumerable:!0,get:function(){return x.getOutDegreeAsync}}),Object.defineProperty(z,"labelPropagationAsync",{enumerable:!0,get:function(){return x.labelPropagationAsync}}),Object.defineProperty(z,"louvainAsync",{enumerable:!0,get:function(){return x.louvainAsync}}),Object.defineProperty(z,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return x.minimumSpanningTreeAsync}}),Object.defineProperty(z,"pageRankAsync",{enumerable:!0,get:function(){return x.pageRankAsync}});var x=C(430485),k=x.detectCycleAsync;z.detectDirectedCycleAsync=k;var w={getAdjMatrixAsync:x.getAdjMatrixAsync,connectedComponentAsync:x.connectedComponentAsync,getDegreeAsync:x.getDegreeAsync,getInDegreeAsync:x.getInDegreeAsync,getOutDegreeAsync:x.getOutDegreeAsync,detectCycleAsync:x.detectCycleAsync,detectDirectedCycleAsync:k,detectAllCyclesAsync:x.detectAllCyclesAsync,detectAllDirectedCycleAsync:x.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:x.detectAllUndirectedCycleAsync,dijkstraAsync:x.dijkstraAsync,findAllPathAsync:x.findAllPathAsync,findShortestPathAsync:x.findShortestPathAsync,floydWarshallAsync:x.floydWarshallAsync,labelPropagationAsync:x.labelPropagationAsync,louvainAsync:x.louvainAsync,minimumSpanningTreeAsync:x.minimumSpanningTreeAsync,pageRankAsync:x.pageRankAsync,getNeighborsAsync:x.getNeighborsAsync,GADDIAsync:x.GADDIAsync};z.default=w},683764:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=w(C(893026)),k=C(770643);function w(p){return p&&p.__esModule?p:{default:p}}function T(p){p===void 0&&(p={});var m=p,S=function(){},y=function(){var g={};return function(O){var E=O.next,D=E;return g[D]?!1:(g[D]=!0,!0)}}();return m.allowTraversal=p.allowTraversal||y,m.enter=p.enter||S,m.leave=p.leave||S,m}var L=function(m,S,y,g){g===void 0&&(g=!0);var O=T(y),E=new x.default,D=m.edges,F=D===void 0?[]:D;E.enqueue(S);for(var W="",b=function(){var K=E.dequeue();O.enter({current:K,previous:W}),(0,k.getNeighbors)(K,F,g?"target":void 0).forEach(function(U){O.allowTraversal({previous:W,current:K,next:U})&&E.enqueue(U)}),O.leave({current:K,previous:W}),W=K};!E.isEmpty();)b()},P=L;z.default=P},759527:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=T,z.detectStrongConnectComponents=z.detectConnectedComponents=void 0;var x=C(770643),k=function(P){for(var p=P.nodes,m=p===void 0?[]:p,S=P.edges,y=S===void 0?[]:S,g=[],O={},E=[],D=function h(K){E.push(K),O[K.id]=!0;for(var U=(0,x.getNeighbors)(K.id,y),Y=function(q){var Q=U[q];if(!O[Q]){var J=m.filter(function(ft){return ft.id===Q});J.length>0&&h(J[0])}},Z=0;Z<U.length;++Z)Y(Z)},F=0;F<m.length;F++){var W=m[F];if(!O[W.id]){D(W);for(var b=[];E.length>0;)b.push(E.pop());g.push(b)}}return g};z.detectConnectedComponents=k;var w=function(P){for(var p=P.nodes,m=p===void 0?[]:p,S=P.edges,y=S===void 0?[]:S,g=[],O={},E={},D={},F=[],W=0,b=function Y(Z){E[Z.id]=W,D[Z.id]=W,W+=1,g.push(Z),O[Z.id]=!0;for(var H=(0,x.getNeighbors)(Z.id,y,"target").filter(function(nt){return m.map(function(yt){return yt.id}).indexOf(nt)>-1}),q=function(yt){var gt=H[yt];if(!E[gt]&&E[gt]!==0){var zt=m.filter(function(Mt){return Mt.id===gt});zt.length>0&&Y(zt[0]),D[Z.id]=Math.min(D[Z.id],D[gt])}else O[gt]&&(D[Z.id]=Math.min(D[Z.id],E[gt]))},Q=0;Q<H.length;Q++)q(Q);if(D[Z.id]===E[Z.id]){for(var J=[];g.length>0;){var ft=g.pop();if(O[ft.id]=!1,J.push(ft),ft===Z)break}J.length>0&&F.push(J)}},h=0,K=m;h<K.length;h++){var U=K[h];!E[U.id]&&E[U.id]!==0&&b(U)}return F};z.detectStrongConnectComponents=w;function T(L,P){return P?w(L):k(L)}},592935:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.secondReg=z.dateReg=void 0;var C=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;z.secondReg=C;var x=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;z.dateReg=x},182556:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getOutDegree=z.getInDegree=z.default=void 0;var C=function(L){var P={},p=L.nodes,m=p===void 0?[]:p,S=L.edges,y=S===void 0?[]:S;return m.forEach(function(g){P[g.id]={degree:0,inDegree:0,outDegree:0}}),y.forEach(function(g){P[g.source].degree++,P[g.source].outDegree++,P[g.target].degree++,P[g.target].inDegree++}),P},x=C;z.default=x;var k=function(L,P){var p=C(L);return p[P]?C(L)[P].inDegree:0};z.getInDegree=k;var w=function(L,P){var p=C(L);return p[P]?C(L)[P].outDegree:0};z.getOutDegree=w},994282:function(He,z,C){"use strict";function x(E){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},x(E)}Object.defineProperty(z,"__esModule",{value:!0}),z.detectAllUndirectedCycle=z.detectAllDirectedCycle=z.detectAllCycles=z.default=void 0;var k=p(C(45891)),w=P(C(759527)),T=C(770643);function L(E){if(typeof WeakMap!="function")return null;var D=new WeakMap,F=new WeakMap;return(L=function(b){return b?F:D})(E)}function P(E,D){if(!D&&E&&E.__esModule)return E;if(E===null||x(E)!=="object"&&typeof E!="function")return{default:E};var F=L(D);if(F&&F.has(E))return F.get(E);var W={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in E)if(h!=="default"&&Object.prototype.hasOwnProperty.call(E,h)){var K=b?Object.getOwnPropertyDescriptor(E,h):null;K&&(K.get||K.set)?Object.defineProperty(W,h,K):W[h]=E[h]}return W.default=E,F&&F.set(E,W),W}function p(E){return E&&E.__esModule?E:{default:E}}var m=function(D){var F=null,W=D.nodes,b=W===void 0?[]:W,h={},K={},U={},Y={};b.forEach(function(q){K[q.id]=q});for(var Z={enter:function(Q){var J=Q.current,ft=Q.previous;if(U[J]){F={};for(var nt=J,yt=ft;yt!==J;)F[nt]=yt,nt=yt,yt=h[yt];F[nt]=yt}else U[J]=J,delete K[J],h[J]=ft},leave:function(Q){var J=Q.current;Y[J]=J,delete U[J]},allowTraversal:function(Q){var J=Q.next;return F?!1:!Y[J]}};Object.keys(K).length;){var H=Object.keys(K)[0];(0,k.default)(D,H,Z)}return F},S=function(D,F,W){var b,h;W===void 0&&(W=!0);for(var K=[],U=(0,w.default)(D,!1),Y=0,Z=U;Y<Z.length;Y++){var H=Z[Y];if(H.length)for(var q=H[0],Q=q.id,J=[q],ft=(b={},b[Q]=q,b),nt=(h={},h[Q]=new Set,h);J.length>0;)for(var yt=J.pop(),gt=yt.id,zt=(0,T.getNeighbors)(gt,D.edges),Mt=function(ot){var Tt,Rt=zt[ot],st=D.nodes.find(function(ee){return ee.id===Rt});if(Rt===gt)K.push((Tt={},Tt[Rt]=yt,Tt));else if(!(Rt in nt))ft[Rt]=yt,J.push(st),nt[Rt]=new Set([yt]);else if(!nt[gt].has(st)){for(var bt=!0,Ft=[st,yt],Ht=ft[gt];nt[Rt].size&&!nt[Rt].has(Ht)&&(Ft.push(Ht),Ht!==ft[Ht.id]);)Ht=ft[Ht.id];if(Ft.push(Ht),F&&W?(bt=!1,Ft.findIndex(function(ee){return F.indexOf(ee.id)>-1})>-1&&(bt=!0)):F&&!W&&Ft.findIndex(function(ee){return F.indexOf(ee.id)>-1})>-1&&(bt=!1),bt){for(var _t={},Xt=1;Xt<Ft.length;Xt+=1)_t[Ft[Xt-1].id]=Ft[Xt];Ft.length&&(_t[Ft[Ft.length-1].id]=Ft[0]),K.push(_t)}nt[Rt].add(yt)}},Ct=0;Ct<zt.length;Ct+=1)Mt(Ct)}return K};z.detectAllUndirectedCycle=S;var y=function(D,F,W){W===void 0&&(W=!0);for(var b=[],h=new Set,K=[],U=[],Y={},Z={},H=function(Ht){for(var _t=[Ht];_t.length>0;){var Xt=_t.pop();h.has(Xt)&&(h.delete(Xt),K[Xt.id].forEach(function(ee){_t.push(ee)}),K[Xt.id].clear())}},q=function Ft(Ht,_t,Xt){var ee=!1;if(F&&W===!1&&F.indexOf(Ht.id)>-1)return ee;b.push(Ht),h.add(Ht);for(var se=Xt[Ht.id],ue=0;ue<se.length;ue+=1){var Ut=Y[se[ue]];if(Ut===_t){for(var oe={},Pe=1;Pe<b.length;Pe+=1)oe[b[Pe-1].id]=b[Pe];b.length&&(oe[b[b.length-1].id]=b[0]),U.push(oe),ee=!0}else h.has(Ut)||Ft(Ut,_t,Xt)&&(ee=!0)}if(ee)H(Ht);else for(var ue=0;ue<se.length;ue+=1){var Ut=Y[se[ue]];K[Ut.id].has(Ht)||K[Ut.id].add(Ht)}return b.pop(),ee},Q=D.nodes,J=Q===void 0?[]:Q,ft=0;ft<J.length;ft+=1){var nt=J[ft],yt=nt.id;Z[yt]=ft,Y[ft]=nt}if(F&&W)for(var gt=function(Ht){var _t=F[Ht];Z[J[Ht].id]=Z[_t],Z[_t]=0,Y[0]=J.find(function(Xt){return Xt.id===_t}),Y[Z[J[Ht].id]]=J[Ht]},ft=0;ft<F.length;ft++)gt(ft);for(var zt=function(Ht){for(var _t,Xt,ee=1/0,se=0;se<Ht.length;se+=1)for(var ue=Ht[se],Ut=0;Ut<ue.length;Ut++){var oe=Z[ue[Ut].id];oe<ee&&(ee=oe,Xt=se)}for(var Pe=Ht[Xt],te=[],se=0;se<Pe.length;se+=1){var ve=Pe[se];te[ve.id]=[];for(var Ue=0,xe=(0,T.getNeighbors)(ve.id,D.edges,"target").filter(function(ht){return Pe.map(function(ae){return ae.id}).indexOf(ht)>-1});Ue<xe.length;Ue++){var Re=xe[Ue];Re===ve.id&&!(W===!1&&F.indexOf(ve.id)>-1)?U.push((_t={},_t[ve.id]=ve,_t)):te[ve.id].push(Z[Re])}}return{component:Pe,adjList:te,minIdx:ee}},Mt=0;Mt<J.length;){var Ct=J.filter(function(Ft){return Z[Ft.id]>=Mt}),rt=(0,w.detectStrongConnectComponents)({nodes:Ct,edges:D.edges}).filter(function(Ft){return Ft.length>1});if(rt.length===0)break;var ot=zt(rt),Tt=ot.minIdx,Rt=ot.adjList,st=ot.component;if(st.length>1){st.forEach(function(Ft){K[Ft.id]=new Set});var bt=Y[Tt];if(F&&W&&F.indexOf(bt.id)===-1)return U;q(bt,bt,Rt),Mt=Tt+1}else break}return U};z.detectAllDirectedCycle=y;var g=function(D,F,W,b){return b===void 0&&(b=!0),F?y(D,W,b):S(D,W,b)};z.detectAllCycles=g;var O=m;z.default=O},45891:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=T;var x=C(770643);function k(L){L===void 0&&(L={});var P=L,p=function(){},m=function(){var S={};return function(y){var g=y.next;return S[g]?!1:(S[g]=!0,!0)}}();return P.allowTraversal=L.allowTraversal||m,P.enter=L.enter||p,P.leave=L.leave||p,P}function w(L,P,p,m){m.enter({current:P,previous:p});var S=L.edges,y=S===void 0?[]:S;(0,x.getNeighbors)(P,y,"target").forEach(function(g){m.allowTraversal({previous:p,current:P,next:g})&&w(L,g,P,m)}),m.leave({current:P,previous:p})}function T(L,P,p){w(L,P,"",k(p))}},878089:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(197582),k=C(413810),w=C(770643),T=function(S,y,g){for(var O=1/0,E,D=0;D<y.length;D++){var F=y[D].id;!g[F]&&S[F]<=O&&(O=S[F],E=y[D])}return E},L=function(S,y,g,O){var E=S.nodes,D=E===void 0?[]:E,F=S.edges,W=F===void 0?[]:F,b=[],h={},K={},U={};D.forEach(function(ft,nt){var yt=ft.id;b.push(yt),K[yt]=1/0,yt===y&&(K[yt]=0)});for(var Y=D.length,Z=function(nt){var yt=T(K,D,h),gt=yt.id;if(h[gt]=!0,K[gt]===1/0)return"continue";var zt=[];g?zt=(0,w.getOutEdgesNodeId)(gt,W):zt=(0,w.getEdgesByNodeId)(gt,W),zt.forEach(function(Mt){var Ct=Mt.target,rt=Mt.source,ot=Ct===gt?rt:Ct,Tt=O&&Mt[O]?Mt[O]:1;K[ot]>K[yt.id]+Tt?(K[ot]=K[yt.id]+Tt,U[ot]=[yt.id]):K[ot]===K[yt.id]+Tt&&U[ot].push(yt.id)})},H=0;H<Y;H++)Z(H);U[y]=[y];var q={};for(var Q in K)K[Q]!==1/0&&p(y,Q,U,q);var J={};for(var Q in q)J[Q]=q[Q][0];return{length:K,path:J,allPath:q}},P=L;z.default=P;function p(m,S,y,g){if(m===S)return[m];if(g[S])return g[S];for(var O=[],E=0,D=y[S];E<D.length;E++){var F=D[E],W=p(m,F,y,g);if(!W)return;for(var b=0,h=W;b<h.length;b++){var K=h[b];(0,k.isArray)(K)?O.push((0,x.__spreadArray)((0,x.__spreadArray)([],K,!0),[S],!1)):O.push([K,S])}}return g[S]=O,g[S]}},241727:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.findShortestPath=z.findAllPath=void 0;var x=w(C(878089)),k=C(770643);function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p,m,S,y,g){var O=(0,x.default)(p,m,y,g),E=O.length,D=O.path,F=O.allPath;return{length:E[S],path:D[S],allPath:F[S]}};z.findShortestPath=T;var L=function(p,m,S,y){var g;if(m===S)return[[m]];var O=p.edges,E=O===void 0?[]:O,D=[m],F=(g={},g[m]=!0,g),W=[],b=[],h=y?(0,k.getNeighbors)(m,E,"target"):(0,k.getNeighbors)(m,E);for(W.push(h);D.length>0&&W.length>0;){var K=W[W.length-1];if(K.length){var U=K.shift();U&&(D.push(U),F[U]=!0,h=y?(0,k.getNeighbors)(U,E,"target"):(0,k.getNeighbors)(U,E),W.push(h.filter(function(H){return!F[H]})))}else{var Y=D.pop();F[Y]=!1,W.pop();continue}if(D[D.length-1]===S){var Z=D.map(function(q){return q});b.push(Z);var Y=D.pop();F[Y]=!1,W.pop()}}return b};z.findAllPath=L},975033:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=k(C(62238));function k(L){return L&&L.__esModule?L:{default:L}}var w=function(P,p){for(var m=(0,x.default)(P,p),S=[],y=m.length,g=0;g<y;g+=1){S[g]=[];for(var O=0;O<y;O+=1)g===O?S[g][O]=0:m[g][O]===0||!m[g][O]?S[g][O]=1/0:S[g][O]=m[g][O]}for(var E=0;E<y;E+=1)for(var g=0;g<y;g+=1)for(var O=0;O<y;O+=1)S[g][O]>S[g][E]+S[E][O]&&(S[g][O]=S[g][E]+S[E][O]);return S},T=w;z.default=T},821146:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(413810),k=C(368575),w=function(){function O(E,D,F,W,b){this.fromNode=E,this.toNode=D,this.nodeEdgeNodeLabel={nodeLabel1:F||k.VACANT_NODE_LABEL,edgeLabel:W||k.VACANT_EDGE_LABEL,nodeLabel2:b||k.VACANT_NODE_LABEL}}return O.prototype.equalTo=function(E){return this.fromNode===E.formNode&&this.toNode===E.toNode&&this.nodeEdgeNodeLabel===E.nodeEdgeNodeLabel},O.prototype.notEqualTo=function(E){return!this.equalTo(E)},O}(),T=function(){function O(){this.rmpath=[],this.dfsEdgeList=[]}return O.prototype.equalTo=function(E){var D=this.dfsEdgeList.length,F=E.length;if(D!==F)return!1;for(var W=0;W<D;W++)if(this.dfsEdgeList[W]!==E[W])return!1;return!0},O.prototype.notEqualTo=function(E){return!this.equalTo(E)},O.prototype.pushBack=function(E,D,F,W,b){return this.dfsEdgeList.push(new w(E,D,F,W,b)),this.dfsEdgeList},O.prototype.toGraph=function(E,D){E===void 0&&(E=k.VACANT_GRAPH_ID),D===void 0&&(D=!1);var F=new k.Graph(E,!0,D);return this.dfsEdgeList.forEach(function(W){var b=W.fromNode,h=W.toNode,K=W.nodeEdgeNodeLabel,U=K.nodeLabel1,Y=K.edgeLabel,Z=K.nodeLabel2;U!==k.VACANT_NODE_LABEL&&F.addNode(b,U),Z!==k.VACANT_NODE_LABEL&&F.addNode(h,Z),U!==k.VACANT_NODE_LABEL&&Z!==U&&F.addEdge(void 0,b,h,Y)}),F},O.prototype.buildRmpath=function(){this.rmpath=[];for(var E=void 0,D=this.dfsEdgeList.length,F=D-1;F>=0;F--){var W=this.dfsEdgeList[F],b=W.fromNode,h=W.toNode;b<h&&(E===void 0||h===E)&&(this.rmpath.push(F),E=b)}return this.rmpath},O.prototype.getNodeNum=function(){var E={};return this.dfsEdgeList.forEach(function(D){E[D.fromNode]||(E[D.fromNode]=!0),E[D.toNode]||(E[D.toNode]=!0)}),Object.keys(E).length},O}(),L=function(){function O(E){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!E){for(;E;){var D=E.edge;this.edges.push(D),this.nodesUsed[D.from]=1,this.nodesUsed[D.to]=1,this.edgesUsed[D.id]=1,E=E.preNode}this.edges=this.edges.reverse()}}return O.prototype.hasNode=function(E){return this.nodesUsed[E.id]===1},O.prototype.hasEdge=function(E){return this.edgesUsed[E.id]===1},O}(),P=function(){function O(E){var D=E.graphs,F=E.minSupport,W=F===void 0?2:F,b=E.minNodeNum,h=b===void 0?1:b,K=E.maxNodeNum,U=K===void 0?4:K,Y=E.top,Z=Y===void 0?10:Y,H=E.directed,q=H===void 0?!1:H,Q=E.verbose,J=Q===void 0?!1:Q;this.graphs=D,this.dfsCode=new T,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=W,this.top=Z,this.directed=q,this.counter=0,this.maxNodeNum=U,this.minNodeNum=h,this.verbose=J,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return O.prototype.findForwardRootEdges=function(E,D){var F=this,W=[],b=E.nodeMap;return D.edges.forEach(function(h){(F.directed||D.label<=b[h.to].label)&&W.push(h)}),W},O.prototype.findBackwardEdge=function(E,D,F,W){if(!this.directed&&D===F)return null;for(var b=E.nodeMap,h=b[F.to],K=h.edges,U=K.length,Y=0;Y<U;Y++){var Z=K[Y];if(!(W.hasEdge(Z)||Z.to!==D.from)){if(this.directed){if(b[D.from].label<b[F.to].label||b[D.from].label===b[F.to].label&&D.label<=Z.label)return Z}else if(D.label<Z.label||D.label===Z.label&&b[D.to].label<=b[F.to].label)return Z}}return null},O.prototype.findForwardPureEdges=function(E,D,F,W){for(var b=[],h=D.to,K=E.nodeMap[h].edges,U=K.length,Y=0;Y<U;Y++){var Z=K[Y],H=E.nodeMap[Z.to];F<=H.label&&!W.hasNode(H)&&b.push(Z)}return b},O.prototype.findForwardRmpathEdges=function(E,D,F,W){for(var b=[],h=E.nodeMap,K=h[D.to].label,U=h[D.from],Y=U.edges,Z=Y.length,H=0;H<Z;H++){var q=Y[H],Q=h[q.to].label;D.to===q.to||F>Q||W.hasNode(h[q.to])||(D.label<q.label||D.label===q.label&&K<=Q)&&b.push(q)}return b},O.prototype.getSupport=function(E){var D={};return E.forEach(function(F){D[F.graphId]||(D[F.graphId]=!0)}),Object.keys(D).length},O.prototype.findMinLabel=function(E){var D=void 0;return Object.keys(E).forEach(function(F){var W=E[F],b=W.nodeLabel1,h=W.edgeLabel,K=W.nodeLabel2;if(!D){D={nodeLabel1:b,edgeLabel:h,nodeLabel2:K};return}(b<D.nodeLabel1||b===D.nodeLabel1&&h<D.edgeLabel||b===D.nodeLabel1&&h===D.edgeLabel&&K<D.nodeLabel2)&&(D={nodeLabel1:b,edgeLabel:h,nodeLabel2:K})}),D},O.prototype.isMin=function(){var E=this,D=this.dfsCode;if(this.verbose&&console.log("isMin checking",D),D.dfsEdgeList.length===1)return!0;var F=this.directed,W=D.toGraph(k.VACANT_GRAPH_ID,F),b=W.nodeMap,h=new T,K={};W.nodes.forEach(function(H){var q=E.findForwardRootEdges(W,H);q.forEach(function(Q){var J=b[Q.to],ft="".concat(H.label,"-").concat(Q.label,"-").concat(J.label);K[ft]||(K[ft]={projected:[],nodeLabel1:H.label,edgeLabel:Q.label,nodeLabel2:J.label});var nt={graphId:W.id,edge:Q,preNode:null};K[ft].projected.push(nt)})});var U=this.findMinLabel(K);if(U){h.dfsEdgeList.push(new w(0,1,U.nodeLabel1,U.edgeLabel,U.nodeLabel2));var Y=function H(q){for(var Q=h.buildRmpath(),J=h.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ft=h.dfsEdgeList[Q[0]].toNode,nt={},yt=!1,gt=0,zt=F?-1:0,Mt=function(se){if(yt)return"break";q.forEach(function(ue){var Ut=new L(ue),oe=E.findBackwardEdge(W,Ut.edges[Q[se]],Ut.edges[Q[0]],Ut);oe&&(nt[oe.label]||(nt[oe.label]={projected:[],edgeLabel:oe.label}),nt[oe.label].projected.push({graphId:W.id,edge:nt,preNode:ue}),gt=h.dfsEdgeList[Q[se]].fromNode,yt=!0)})},Ct=Q.length-1;Ct>zt;Ct--){var rt=Mt(Ct);if(rt==="break")break}if(yt){var ot=E.findMinLabel(nt);h.dfsEdgeList.push(new w(ft,gt,k.VACANT_NODE_LABEL,ot.edgeLabel,k.VACANT_NODE_LABEL));var Tt=h.dfsEdgeList.length-1;return E.dfsCode.dfsEdgeList[Tt]!==h.dfsEdgeList[Tt]?!1:H(nt[ot.edgeLabel].projected)}var Rt={};yt=!1;var st=0;q.forEach(function(ee){var se=new L(ee),ue=E.findForwardPureEdges(W,se.edges[Q[0]],J,se);ue.length>0&&(yt=!0,st=ft,ue.forEach(function(Ut){var oe="".concat(Ut.label,"-").concat(b[Ut.to].label);Rt[oe]||(Rt[oe]={projected:[],edgeLabel:Ut.label,nodeLabel2:b[Ut.to].label}),Rt[oe].projected.push({graphId:W.id,edge:Ut,preNode:ee})}))});for(var bt=Q.length,Ft=function(se){if(yt)return"break";var ue=Q[se];q.forEach(function(Ut){var oe=new L(Ut),Pe=E.findForwardRmpathEdges(W,oe.edges[ue],J,oe);Pe.length>0&&(yt=!0,st=h.dfsEdgeList[ue].fromNode,Pe.forEach(function(te){var ve="".concat(te.label,"-").concat(b[te.to].label);Rt[ve]||(Rt[ve]={projected:[],edgeLabel:te.label,nodeLabel2:b[te.to].label}),Rt[ve].projected.push({graphId:W.id,edge:te,preNode:Ut})}))})},Ct=0;Ct<bt;Ct++){var Ht=Ft(Ct);if(Ht==="break")break}if(!yt)return!0;var _t=E.findMinLabel(Rt);h.dfsEdgeList.push(new w(st,ft+1,k.VACANT_NODE_LABEL,_t.edgeLabel,_t.nodeLabel2));var Xt=h.dfsEdgeList.length-1;return D.dfsEdgeList[Xt]!==h.dfsEdgeList[Xt]?!1:H(Rt["".concat(_t.edgeLabel,"-").concat(_t.nodeLabel2)].projected)},Z="".concat(U.nodeLabel1,"-").concat(U.edgeLabel,"-").concat(U.nodeLabel2);return Y(K[Z].projected)}},O.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var E=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,x.clone)(E))}},O.prototype.subGraphMining=function(E){var D=this,F=this.getSupport(E);if(!(F<this.minSupport)&&this.isMin()){this.report();var W=this.dfsCode.getNodeNum(),b=this.dfsCode.buildRmpath(),h=this.dfsCode.dfsEdgeList[b[0]].toNode,K=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,U={},Y={};E.forEach(function(Z){for(var H=D.graphs[Z.graphId],q=H.nodeMap,Q=new L(Z),J=b.length-1;J>=0;J--){var ft=D.findBackwardEdge(H,Q.edges[b[J]],Q.edges[b[0]],Q);if(ft){var nt="".concat(D.dfsCode.dfsEdgeList[b[J]].fromNode,"-").concat(ft.label);Y[nt]||(Y[nt]={projected:[],toNodeId:D.dfsCode.dfsEdgeList[b[J]].fromNode,edgeLabel:ft.label}),Y[nt].projected.push({graphId:Z.graphId,edge:ft,preNode:Z})}}if(!(W>=D.maxNodeNum)){var yt=D.findForwardPureEdges(H,Q.edges[b[0]],K,Q);yt.forEach(function(zt){var Mt="".concat(h,"-").concat(zt.label,"-").concat(q[zt.to].label);U[Mt]||(U[Mt]={projected:[],fromNodeId:h,edgeLabel:zt.label,nodeLabel2:q[zt.to].label}),U[Mt].projected.push({graphId:Z.graphId,edge:zt,preNode:Z})});for(var gt=function(Mt){var Ct=D.findForwardRmpathEdges(H,Q.edges[b[Mt]],K,Q);Ct.forEach(function(rt){var ot="".concat(D.dfsCode.dfsEdgeList[b[Mt]].fromNode,"-").concat(rt.label,"-").concat(q[rt.to].label);U[ot]||(U[ot]={projected:[],fromNodeId:D.dfsCode.dfsEdgeList[b[Mt]].fromNode,edgeLabel:rt.label,nodeLabel2:q[rt.to].label}),U[ot].projected.push({graphId:Z.graphId,edge:rt,preNode:Z})})},J=0;J<b.length;J++)gt(J)}}),Object.keys(Y).forEach(function(Z){var H=Y[Z],q=H.toNodeId,Q=H.edgeLabel;D.dfsCode.dfsEdgeList.push(new w(h,q,"-1",Q,"-1")),D.subGraphMining(Y[Z].projected),D.dfsCode.dfsEdgeList.pop()}),Object.keys(U).forEach(function(Z){var H=U[Z],q=H.fromNodeId,Q=H.edgeLabel,J=H.nodeLabel2;D.dfsCode.dfsEdgeList.push(new w(q,h+1,k.VACANT_NODE_LABEL,Q,J)),D.subGraphMining(U[Z].projected),D.dfsCode.dfsEdgeList.pop()})}},O.prototype.generate1EdgeFrequentSubGraphs=function(){var E=this.graphs,D=this.directed,F=this.minSupport,W=this.frequentSize1Subgraphs,b={},h={},K={},U={};return Object.keys(E).forEach(function(Y){var Z=E[Y],H=Z.nodeMap;Z.nodes.forEach(function(q,Q){var J=q.label,ft="".concat(Y,"-").concat(J);if(!K[ft]){var nt=b[J]||0;nt++,b[J]=nt}K[ft]={graphKey:Y,label:J},q.edges.forEach(function(yt){var gt=J,zt=H[yt.to].label;if(!D&&gt>zt){var Mt=zt;zt=gt,gt=Mt}var Ct=yt.label,rt="".concat(Y,"-").concat(gt,"-").concat(Ct,"-").concat(zt),ot="".concat(gt,"-").concat(Ct,"-").concat(zt);if(!h[ot]){var Tt=h[ot]||0;Tt++,h[ot]=Tt}U[rt]={graphId:Y,nodeLabel1:gt,edgeLabel:Ct,nodeLabel2:zt}})})}),Object.keys(b).forEach(function(Y){var Z=b[Y];if(!(Z<F)){var H={nodes:[],edges:[]};H.nodes.push({id:"0",label:Y}),W.push(H)}}),W},O.prototype.run=function(){var E=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var D=this.graphs,F=this.directed,W={};Object.keys(D).forEach(function(b){var h=D[b],K=h.nodeMap;h.nodes.forEach(function(U){var Y=E.findForwardRootEdges(h,U);Y.forEach(function(Z){var H=K[Z.to],q="".concat(U.label,"-").concat(Z.label,"-").concat(H.label);W[q]||(W[q]={projected:[],nodeLabel1:U.label,edgeLabel:Z.label,nodeLabel2:H.label});var Q={graphId:b,edge:Z,preNode:null};W[q].projected.push(Q)})})}),Object.keys(W).forEach(function(b){var h=W[b],K=h.projected,U=h.nodeLabel1,Y=h.edgeLabel,Z=h.nodeLabel2;E.dfsCode.dfsEdgeList.push(new w(0,1,U,Y,Z)),E.subGraphMining(K),E.dfsCode.dfsEdgeList.pop()})}},O}(),p=function(E,D,F,W){var b={};return Object.keys(E).forEach(function(h,K){var U=E[h],Y=new k.Graph(K,!0,D),Z={};U.nodes.forEach(function(H,q){Y.addNode(q,H[F]),Z[H.id]=q}),U.edges.forEach(function(H,q){var Q=Z[H.source],J=Z[H.target];Y.addEdge(-1,Q,J,H[W])}),Y&&Y.getNodeNum()&&(b[Y.id]=Y)}),b},m=function(E,D,F){var W=[];return E.forEach(function(b){var h={nodes:[],edges:[]};b.nodes.forEach(function(K){var U;h.nodes.push((U={id:"".concat(K.id)},U[D]=K.label,U))}),b.edges.forEach(function(K){var U;h.edges.push((U={source:"".concat(K.from),target:"".concat(K.to)},U[F]=K.label,U))}),W.push(h)}),W},S="cluster",y=function(E){var D=E.graphs,F=E.directed,W=F===void 0?!1:F,b=E.nodeLabelProp,h=b===void 0?S:b,K=E.edgeLabelProp,U=K===void 0?S:K,Y=p(D,W,h,U),Z=E.minSupport,H=E.maxNodeNum,q=E.minNodeNum,Q=E.verbose,J=E.top,ft={graphs:Y,minSupport:Z,maxNodeNum:H,minNodeNum:q,top:J,verbose:Q,directed:W},nt=new P(ft);nt.run();var yt=m(nt.frequentSubgraphs,h,U);return yt},g=y;z.default=g},368575:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.VACANT_NODE_LABEL=z.VACANT_NODE_ID=z.VACANT_GRAPH_ID=z.VACANT_EDGE_LABEL=z.VACANT_EDGE_ID=z.Node=z.Graph=z.Edge=z.AUTO_EDGE_ID=void 0;var C=-1;z.VACANT_EDGE_ID=C;var x=-1;z.VACANT_NODE_ID=x;var k="-1";z.VACANT_EDGE_LABEL=k;var w="-1";z.VACANT_NODE_LABEL=w;var T=-1;z.VACANT_GRAPH_ID=T;var L="-1";z.AUTO_EDGE_ID=L;var P=function(){function S(y,g,O,E){y===void 0&&(y=C),g===void 0&&(g=x),O===void 0&&(O=x),E===void 0&&(E=k),this.id=y,this.from=g,this.to=O,this.label=E}return S}();z.Edge=P;var p=function(){function S(y,g){y===void 0&&(y=x),g===void 0&&(g=w),this.id=y,this.label=g,this.edges=[],this.edgeMap={}}return S.prototype.addEdge=function(y){this.edges.push(y),this.edgeMap[y.id]=y},S}();z.Node=p;var m=function(){function S(y,g,O){y===void 0&&(y=x),g===void 0&&(g=!0),O===void 0&&(O=!1),this.id=y,this.edgeIdAutoIncrease=g,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=O}return S.prototype.getNodeNum=function(){return this.nodes.length},S.prototype.addNode=function(y,g){if(!this.nodeMap[y]){var O=new p(y,g);this.nodes.push(O),this.nodeMap[y]=O,this.nodeLabelMap[g]||(this.nodeLabelMap[g]=[]),this.nodeLabelMap[g].push(y)}},S.prototype.addEdge=function(y,g,O,E){if((this.edgeIdAutoIncrease||y===void 0)&&(y=this.counter++),!(this.nodeMap[g]&&this.nodeMap[O]&&this.nodeMap[O].edgeMap[y])){var D=new P(y,g,O,E);if(this.edges.push(D),this.edgeMap[y]=D,this.nodeMap[g].addEdge(D),this.edgeLabelMap[E]||(this.edgeLabelMap[E]=[]),this.edgeLabelMap[E].push(D),!this.directed){var F=new P(y,O,g,E);this.nodeMap[O].addEdge(F),this.edgeLabelMap[E].push(F)}}},S}();z.Graph=m},882812:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(197582),k=P(C(975033)),w=P(C(821146)),T=P(C(878089)),L=C(770643);function P(U){return U&&U.__esModule?U:{default:U}}var p=function(Y,Z,H,q){H===void 0&&(H="cluster"),q===void 0&&(q=2);var Q=[],J=Y.nodes;return Z.forEach(function(ft,nt){Q.push(m(J,ft,nt,H,q))}),Q},m=function(Y,Z,H,q,Q){var J=[H],ft=[],nt={};return Z.forEach(function(yt,gt){if(yt<=Q&&H!==gt){J.push(gt),ft.push(Y[gt]);var zt=Y[gt][q];nt[zt]?(nt[zt].count++,nt[zt].dists.push(yt)):nt[zt]={count:1,dists:[yt]}}}),Object.keys(nt).forEach(function(yt){nt[yt].dists=nt[yt].dists.sort(function(gt,zt){return gt-zt})}),{nodeIdx:H,nodeId:Y[H].id,nodeIdxs:J,neighbors:ft,neighborNum:J.length-1,nodeLabelCountMap:nt}},S=function(Y,Z,H,q,Q){var J=Math.ceil(H/Z),ft={},nt=0;return q.forEach(function(yt,gt){for(var zt=0,Mt=0,Ct=yt.nodeIdxs,rt=yt.neighborNum-1;zt<J;){for(var ot=Ct[1+Math.floor(Math.random()*rt)],Tt=0;(ft["".concat(gt,"-").concat(ot)]||ft["".concat(ot,"-").concat(gt)])&&(ot=Math.floor(Math.random()*Z),Tt++,!(Tt>2*Z)););if(Tt<2*Z&&(ft["".concat(gt,"-").concat(ot)]={start:gt,end:ot,distance:Q[gt][ot]},zt++,nt++,nt>=H))return ft;if(Mt++,Mt>2*Z)break}if(zt<J){var Rt=J-zt;J=(J+Rt)/(Z-gt-1)}}),ft},y=function(Y,Z,H,q){var Q=H.nodes;return q||(q={}),Object.keys(Y).forEach(function(J){var ft,nt;if(!(q&&q[J])){q[J]={nodes:[],edges:[]};var yt=Y[J],gt=(ft=Z[yt.start])===null||ft===void 0?void 0:ft.nodeIdxs,zt=(nt=Z[yt.end])===null||nt===void 0?void 0:nt.nodeIdxs;if(!(!gt||!zt)){var Mt=new Set(zt),Ct=gt.filter(function(st){return Mt.has(st)});if(!(!Ct||!Ct.length)){for(var rt={},ot=Ct.length,Tt=0;Tt<ot;Tt++){var Rt=Q[Ct[Tt]];q[J].nodes.push(Rt),rt[Rt.id]=!0}H.edges.forEach(function(st){rt[st.source]&&rt[st.target]&&q[J].edges.push(st)})}}}}),q},g=function(Y,Z,H,q){var Q,J,ft={};Y.nodes.forEach(function(yt){ft[yt.id]=yt});var nt=0;return!(!((Q=Z==null?void 0:Z.edges)===null||Q===void 0)&&Q.length)||((J=Z==null?void 0:Z.nodes)===null||J===void 0?void 0:J.length)<2?0:(Y.edges.forEach(function(yt){var gt=ft[yt.source][H],zt=ft[yt.target][H],Mt=Z==null?void 0:Z.nodes[0][H],Ct=Z==null?void 0:Z.nodes[1][H],rt=Z==null?void 0:Z.edges[0][q];yt[q]===rt&&(gt===Mt&&zt===Ct||gt===Ct&&zt===Mt)&&nt++}),nt)},O=function(Y,Z,H){for(var q=1/0,Q=0,J=function(yt){var gt=Y[yt],zt=Object.keys(gt).sort(function(st,bt){return gt[st]-gt[bt]}),Mt=10,Ct=[];zt.forEach(function(st,bt){Ct[bt%Mt]||(Ct[bt%Mt]={graphs:[],totalCount:0,aveCount:0}),Ct[bt%Mt].graphs.push(st),Ct[bt%Mt].totalCount+=gt[st]});var rt=0,ot=[];Ct.forEach(function(st){var bt=st.totalCount/st.graphs.length;st.aveCount=bt,ot.push(bt);var Ft=0,Ht=st.length;st.graphs.forEach(function(_t,Xt){var ee=gt[_t];st.graphs.forEach(function(se,ue){Xt!==ue&&(Ft+=Math.abs(ee-gt[se]))})}),Ft/=Ht*(Ht-1)/2,rt+=Ft}),rt/=Ct.length;var Tt=0;ot.forEach(function(st,bt){ot.forEach(function(Ft,Ht){bt!==Ht&&(Tt+=Math.abs(st-Ft))}),Tt/=ot.length*(ot.length-1)/2});var Rt=Tt-rt;q<Rt&&(q=Rt,Q=yt)},ft=0;ft<Z;ft++)J(ft);return{structure:H[Q],structureCountMap:Y[Q]}},E=function(Y,Z){var H={},q={};return Y.forEach(function(Q,J){H[Q.id]={idx:J,node:Q,degree:0,inDegree:0,outDegree:0};var ft=Q[Z];q[ft]||(q[ft]=[]),q[ft].push(Q)}),{nodeMap:H,nodeLabelMap:q}},D=function(Y,Z,H){var q={},Q={};return Y.forEach(function(J,ft){q["".concat(L.uniqueId)]={idx:ft,edge:J};var nt=J[Z];Q[nt]||(Q[nt]=[]),Q[nt].push(J);var yt=H[J.source];yt&&(yt.degree++,yt.outDegree++);var gt=H[J.target];gt&&(gt.degree++,gt.inDegree++)}),{edgeMap:q,edgeLabelMap:Q}},F=function(Y,Z,H){var q=Z.length,Q={};return Z.forEach(function(J,ft){for(var nt=H?0:ft+1,yt=Y[ft].id,gt=nt;gt<q;gt++)if(ft!==gt){var zt=Y[gt].id,Mt=J[gt];Q["".concat(yt,"-").concat(zt)]=Mt,H||(Q["".concat(zt,"-").concat(yt)]=Mt)}}),Q},W=function(Y,Z,H,q,Q,J,ft,nt,yt,gt,zt){var Mt,Ct="".concat(Z.id,"-").concat(H.id);if(gt&&gt[Ct])return gt[Ct];var rt=zt?zt[Ct]:void 0;if(!rt){var ot=(Mt={},Mt[Ct]={start:q[Z.id].idx,end:q[H.id].idx,distance:Q},Mt);zt=y(ot,J,Y,zt),rt=zt[Ct]}return g(rt,ft,nt,yt)},b=function(Y,Z,H,q){var Q,J,ft,nt=(Q=Y[Z])===null||Q===void 0?void 0:Q.degree,yt=(J=Y[Z])===null||J===void 0?void 0:J.inDegree,gt=(ft=Y[Z])===null||ft===void 0?void 0:ft.outDegree;return Y[Z]===void 0&&(nt=1/0,yt=1/0,gt=1/0,q[Z].forEach(function(zt){var Mt=H[zt.id].degree;nt>Mt&&(nt=Mt);var Ct=H[zt.id].inDegree;yt>Ct&&(yt=Ct);var rt=H[zt.id].outDegree;gt>rt&&(gt=rt)}),Y[Z]={degree:nt,inDegree:yt,outDegree:gt}),{minPatternNodeLabelDegree:nt,minPatternNodeLabelInDegree:yt,minPatternNodeLabelOutDegree:gt}},h=function(Y,Z,H,q,Q,J,ft){var nt;if(H===void 0&&(H=!1),J===void 0&&(J="cluster"),ft===void 0&&(ft="cluster"),!(!Y||!Y.nodes)){var yt=Y.nodes.length;if(yt){var gt=(0,k.default)(Y,H),zt=(0,k.default)(Z,H),Mt=F(Y.nodes,gt,H),Ct=F(Z.nodes,zt,H),rt=E(Y.nodes,J),ot=rt.nodeMap,Tt=rt.nodeLabelMap,Rt=E(Z.nodes,J),st=Rt.nodeMap,bt=Rt.nodeLabelMap;D(Y.edges,ft,ot);var Ft=D(Z.edges,ft,st).edgeLabelMap,Ht=[];zt==null||zt.forEach(function(Br){Ht=Ht.concat(Br)}),Q||(Q=Math.max.apply(Math,(0,x.__spreadArray)((0,x.__spreadArray)([],Ht,!1),[2],!1))),q||(q=Q);var _t=p(Y,gt,J,q),Xt=p(Z,zt,J,q),ee=Math.min(100,yt*(yt-1)/2),se=S(q,yt,ee,_t,gt),ue=y(se,_t,Y),Ut=10,oe=1,Pe=1,te=4,ve={graphs:ue,nodeLabelProp:J,edgeLabelProp:ft,minSupport:oe,minNodeNum:Pe,maxNodeNum:te,directed:H},Ue=(0,w.default)(ve).slice(0,Ut),xe=Ue.length,Re=[];Ue.forEach(function(Br,en){Re[en]={},Object.keys(ue).forEach(function(hn){var xn=ue[hn],_n=g(xn,Br,J,ft);Re[en][hn]=_n})});var de=O(Re,xe,Ue),ht=de.structure,ae=de.structureCountMap,Le=Z.nodes[0],Ze=[],qe=(nt=Z.nodes[0])===null||nt===void 0?void 0:nt[J],fr=-1/0;Z.nodes.forEach(function(Br){var en=Br[J],hn=Tt[en];(hn==null?void 0:hn.length)>fr&&(fr=hn.length,Ze=hn,qe=en,Le=Br)});var ur={},kr={},yn={},un={},Vr={},$e={};Object.keys(bt).forEach(function(Br,en){Vr[Br]=[],H&&($e[Br]=[]);var hn=-1/0,xn=bt[Br],_n={};xn.forEach(function(Et){var we=Ct["".concat(Le.id,"-").concat(Et.id)];if(we&&Vr[Br].push(we),hn<we&&(hn=we),_n["".concat(Le.id,"-").concat(Et.id)]={start:0,end:st[Et.id].idx,distance:we},H){var Ot=Ct["".concat(Et.id,"-").concat(Le.id)];Ot&&$e[Br].push(Ot)}}),Vr[Br]=Vr[Br].sort(function(Et,we){return Et-we}),H&&($e[Br]=$e[Br].sort(function(Et,we){return Et-we})),kr=y(_n,Xt,Z,kr);var tt=[];if(Object.keys(_n).forEach(function(Et){if(yn[Et]){tt.push(yn[Et]);return}var we=kr[Et];yn[Et]=g(we,ht,J,ft),tt.push(yn[Et])}),tt=tt.sort(function(Et,we){return we-Et}),un["".concat(Le.id,"-").concat(Br)]=tt,Br!==qe)for(var ir=(Ze==null?void 0:Ze.length)||0,jt=function(we){var Ot=Ze[we],Kt=_t[ot[Ot.id].idx],dt=Kt.nodeLabelCountMap[Br],Bt=bt[Br].length;if(!dt||dt.count<Bt)return Ze.splice(we,1),"continue";for(var $=!1,at=0;at<Bt;at++)if(dt.dists[at]>Vr[Br][at]){$=!0;break}if($)return Ze.splice(we,1),"continue";var R={};Kt.neighbors.forEach(function(X){var mt=Mt["".concat(Ot.id,"-").concat(X.id)];R["".concat(Ot.id,"-").concat(X.id)]={start:ot[Ot.id].idx,end:ot[X.id].idx,distance:mt}}),ue=y(R,_t,Y,ue);var M=[];Object.keys(R).forEach(function(X){if(ae[X]){M.push(ae[X]);return}var mt=ue[X];ae[X]=g(mt,ht,J,ft),M.push(ae[X])}),M=M.sort(function(X,mt){return mt-X});for(var A=!1,at=0;at<Bt;at++)if(M[at]<tt[at]){A=!0;break}if(A)return Ze.splice(we,1),"continue"},Qt=ir-1;Qt>=0;Qt--)jt(Qt)});var dr=[];Ze==null||Ze.forEach(function(Br){for(var en=ot[Br.id].idx,hn=m(Y.nodes,gt[en],en,J,Q),xn=hn.neighbors,_n=xn.length,tt=!1,ir=_n-1;ir>=0;ir--){if(xn.length+1<Z.nodes.length){tt=!0;return}var jt=xn[ir],Qt=jt[J];if(!bt[Qt]||!bt[Qt].length){xn.splice(ir,1);continue}if(!Vr[Qt]||!Vr[Qt].length){xn.splice(ir,1);continue}var Et="".concat(Br.id,"-").concat(jt.id),we=Mt[Et],Ot=Vr[Qt].length-1,Kt=Vr[Qt][Ot];if(we>Kt){xn.splice(ir,1);continue}if(H){var dt="".concat(jt.id,"-").concat(Br.id),Bt=Mt[dt];Ot=$e[Qt].length-1;var $=$e[Qt][Ot];if(Bt>$){xn.splice(ir,1);continue}}var at=ae[Et]?ae[Et]:W(Y,Br,jt,ot,we,_t,ht,J,ft,ae,ue),R="".concat(Le.id,"-").concat(Qt),M=un[R][un[R].length-1];if(at<M){xn.splice(ir,1);continue}var A=b(ur,Qt,st,bt),X=A.minPatternNodeLabelDegree,mt=A.minPatternNodeLabelInDegree,Lt=A.minPatternNodeLabelOutDegree;if(ot[jt.id].degree<X){xn.splice(ir,1);continue}}tt||dr.push({nodes:[Br].concat(xn)})});var ar=(0,T.default)(Z,Le.id,!1).length,Qe={};H?(Object.keys(ar).forEach(function(Br){var en=st[Br].node[J];Qe[en]?Qe[en].push(ar[Br]):Qe[en]=[ar[Br]]}),Object.keys(Qe).forEach(function(Br){Qe[Br].sort(function(en,hn){return en-hn})})):Qe=Vr;for(var Pr=dr.length,Zr=function(en){var hn=dr[en],xn=hn.nodes[0],_n={},tt={};hn.nodes.forEach(function(Nr,fe){tt[Nr.id]={idx:fe,node:Nr,degree:0,inDegree:0,outDegree:0};var Wt=Nr[J];_n[Wt]?_n[Wt]++:_n[Wt]=1});var ir=[],jt={};Y.edges.forEach(function(Nr){tt[Nr.source]&&tt[Nr.target]&&(ir.push(Nr),jt[Nr[ft]]?jt[Nr[ft]]++:jt[Nr[ft]]=1,tt[Nr.source].degree++,tt[Nr.target].degree++,tt[Nr.source].outDegree++,tt[Nr.target].inDegree++)});for(var Qt=Object.keys(Ft).length,Et=!1,we=0;we<Qt;we++){var Ot=Object.keys(Ft)[we];if(!jt[Ot]||jt[Ot]<Ft[Ot].length){Et=!0;break}}if(Et)return dr.splice(en,1),"continue";var Kt=ir.length;if(Kt<Z.edges.length)return dr.splice(en,1),"break";for(var dt=!1,Bt=function(fe){var Wt=ir[fe],ge=Wt[ft],Ae=Ft[ge];if(!Ae||!Ae.length)return jt[ge]--,Ae&&jt[ge]<Ae.length?(dt=!0,"break"):(ir.splice(fe,1),tt[Wt.source].degree--,tt[Wt.target].degree--,tt[Wt.source].outDegree--,tt[Wt.target].inDegree--,"continue");var Se=tt[Wt.source].node[J],Be=tt[Wt.target].node[J],vr=!1;if(Ae.forEach(function(Mr){var fn=st[Mr.source].node,Xn=st[Mr.target].node;fn[J]===Se&&Xn[J]===Be&&(vr=!0),!H&&fn[J]===Be&&Xn[J]===Se&&(vr=!0)}),!vr)return jt[ge]--,Ae&&jt[ge]<Ae.length?(dt=!0,"break"):(ir.splice(fe,1),tt[Wt.source].degree--,tt[Wt.target].degree--,tt[Wt.source].outDegree--,tt[Wt.target].inDegree--,"continue")},we=Kt-1;we>=0;we--){var $=Bt(we);if($==="break")break}if(dt)return dr.splice(en,1),"continue";hn.edges=ir;var at=(0,T.default)(hn,hn.nodes[0].id,!1).length;if(Object.keys(at).reverse().forEach(function(Nr){if(!(Nr===hn.nodes[0].id||dt)){if(at[Nr]===1/0){var fe=tt[Nr].node[J];if(_n[fe]--,_n[fe]<bt[fe].length){dt=!0;return}var Wt=hn.nodes.indexOf(tt[Nr].node);hn.nodes.splice(Wt,1),tt[Nr]=void 0;return}var ge=ot[Nr].node[J];if(!Qe[ge]||!Qe[ge].length||at[Nr]>Qe[ge][Qe[ge].length-1]){var fe=tt[Nr].node[J];if(_n[fe]--,_n[fe]<bt[fe].length){dt=!0;return}var Wt=hn.nodes.indexOf(tt[Nr].node);hn.nodes.splice(Wt,1),tt[Nr]=void 0}}}),dt)return dr.splice(en,1),"continue";for(var R=!0,M=0;R&&!dt;){R=!1;var A=H?tt[xn.id].degree<st[Le.id].degree||tt[xn.id].inDegree<st[Le.id].inDegree||tt[xn.id].outDegree<st[Le.id].outDegree:tt[xn.id].degree<st[Le.id].degree;if(A){dt=!0;break}if(_n[xn[J]]<bt[xn[J]].length){dt=!0;break}for(var X=hn.nodes.length,mt=X-1;mt>=0;mt--){var Lt=hn.nodes[mt],Pt=tt[Lt.id].degree,Jt=tt[Lt.id].inDegree,Ie=tt[Lt.id].outDegree,pe=Lt[J],je=b(ur,pe,st,bt),br=je.minPatternNodeLabelDegree,Je=je.minPatternNodeLabelInDegree,zr=je.minPatternNodeLabelOutDegree,gn=H?Pt<br||Jt<Je||Ie<zr:Pt<br;if(gn){if(_n[Lt[J]]--,_n[Lt[J]]<bt[Lt[J]].length){dt=!0;break}hn.nodes.splice(mt,1),tt[Lt.id]=void 0,R=!0}}if(dt||!R&&M!==0)break;Kt=ir.length;for(var tr=Kt-1;tr>=0;tr--){var xr=ir[tr];if(!tt[xr.source]||!tt[xr.target]){ir.splice(tr,1);var Ur=xr[ft];if(jt[Ur]--,tt[xr.source]&&(tt[xr.source].degree--,tt[xr.source].outDegree--),tt[xr.target]&&(tt[xr.target].degree--,tt[xr.target].inDegree--),Ft[Ur]&&jt[Ur]<Ft[Ur].length){dt=!0;break}R=!0}}M++}if(dt||dt||hn.nodes.length<Z.nodes.length||ir.length<Z.edges.length)return dr.splice(en,1),"continue"},qr=Pr-1;qr>=0;qr--){var Sn=Zr(qr);if(Sn==="break")break}for(var Yn=dr.length,Ir=function(en){var hn=dr[en],xn={};hn.edges.forEach(function(ir){var jt="".concat(ir.source,"-").concat(ir.target,"-").concat(ir.label);xn[jt]?xn[jt]++:xn[jt]=1});for(var _n=function(jt){var Qt=dr[jt],Et={};Qt.edges.forEach(function(Ot){var Kt="".concat(Ot.source,"-").concat(Ot.target,"-").concat(Ot.label);Et[Kt]?Et[Kt]++:Et[Kt]=1});var we=!0;Object.keys(Et).length!==Object.keys(xn).length?we=!1:Object.keys(xn).forEach(function(Ot){Et[Ot]!==xn[Ot]&&(we=!1)}),we&&dr.splice(jt,1)},tt=Yn-1;tt>en;tt--)_n(tt);Yn=dr.length},qr=0;qr<=Yn-1;qr++)Ir(qr);return dr}}},K=h;z.default=K},505170:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=w(C(62238)),k=C(770643);function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p,m,S,y){m===void 0&&(m=!1),S===void 0&&(S="weight"),y===void 0&&(y=1e3);var g=p.nodes,O=g===void 0?[]:g,E=p.edges,D=E===void 0?[]:E,F={},W={};O.forEach(function(J,ft){var nt=(0,k.uniqueId)();J.clusterId=nt,F[nt]={id:nt,nodes:[J]},W[J.id]={node:J,idx:ft}});var b=(0,x.default)(p,m),h=[],K={};b.forEach(function(J,ft){var nt=0,yt=O[ft].id;K[yt]={},J.forEach(function(gt,zt){if(gt){nt+=gt;var Mt=O[zt].id;K[yt][Mt]=gt}}),h.push(nt)});for(var U=0,Y=function(){var ft=!1;if(O.forEach(function(nt){var yt={};Object.keys(K[nt.id]).forEach(function(Rt){var st=K[nt.id][Rt],bt=W[Rt].node,Ft=bt.clusterId;yt[Ft]||(yt[Ft]=0),yt[Ft]+=st});var gt=-1/0,zt=[];if(Object.keys(yt).forEach(function(Rt){gt<yt[Rt]?(gt=yt[Rt],zt=[Rt]):gt===yt[Rt]&&zt.push(Rt)}),!(zt.length===1&&zt[0]===nt.clusterId)){var Mt=zt.indexOf(nt.clusterId);if(Mt>=0&&zt.splice(Mt,1),zt&&zt.length){ft=!0;var Ct=F[nt.clusterId],rt=Ct.nodes.indexOf(nt);Ct.nodes.splice(rt,1);var ot=Math.floor(Math.random()*zt.length),Tt=F[zt[ot]];Tt.nodes.push(nt),nt.clusterId=Tt.id}}}),!ft)return"break";U++};U<y;){var Z=Y();if(Z==="break")break}Object.keys(F).forEach(function(J){var ft=F[J];(!ft.nodes||!ft.nodes.length)&&delete F[J]});var H=[],q={};D.forEach(function(J){var ft=J.source,nt=J.target,yt=J[S]||1,gt=W[ft].node.clusterId,zt=W[nt].node.clusterId,Mt="".concat(gt,"---").concat(zt);if(q[Mt])q[Mt].weight+=yt,q[Mt].count++;else{var Ct={source:gt,target:zt,weight:yt,count:1};q[Mt]=Ct,H.push(Ct)}});var Q=[];return Object.keys(F).forEach(function(J){Q.push(F[J])}),{clusters:Q,clusterEdges:H}},L=T;z.default=L},135179:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(413810),k=P(C(62238)),w=P(C(29741)),T=C(103665),L=C(526838);function P(g){return g&&g.__esModule?g:{default:g}}var p=function(O,E,D,F){for(var W=E.length,b=2*F,h=0,K=0;K<W;K++)for(var U=O[K].clusterId,Y=0;Y<W;Y++){var Z=O[Y].clusterId;if(U===Z){var H=E[K][Y]||0,q=D[K]||0,Q=D[Y]||0;h+=H-q*Q/b}}return h*=1/b,h},m=function(O,E){O===void 0&&(O=[]);for(var D=O.length,F=new w.default([]),W=0;W<D;W++)F=F.add(new w.default(E[W]));var b=F.avg(D);b.normalize();for(var h=0,W=0;W<D;W++){var K=new w.default(E[W]),U=K.squareEuclideanDistance(b);h+=U}var Y=[];O.forEach(function(){Y.push([])});for(var W=0;W<D;W++){var K=new w.default(E[W]);O[W].clusterInertial=0;for(var Z=0;Z<D;Z++){if(W===Z){Y[W][Z]=0;continue}var H=new w.default(E[Z]);Y[W][Z]=K.squareEuclideanDistance(H),O[W].clusterInertial+=Y[W][Z]}}for(var q=0,Q=2*D*h,W=0;W<D;W++)for(var J=O[W].clusterId,Z=0;Z<D;Z++){var ft=O[Z].clusterId;if(!(W===Z||J!==ft)){var nt=O[W].clusterInertial*O[Z].clusterInertial/Math.pow(Q,2)-Y[W][Z]/Q;q+=nt}}return Number(q.toFixed(4))},S=function(O,E,D,F,W,b,h,K,U){E===void 0&&(E=!1),D===void 0&&(D="weight"),F===void 0&&(F=1e-4),W===void 0&&(W=!1),b===void 0&&(b=void 0),h===void 0&&(h=[]),K===void 0&&(K=["id"]),U===void 0&&(U=1);var Y=O.nodes,Z=Y===void 0?[]:Y,H=O.edges,q=H===void 0?[]:H,Q=[];if(W){Z.forEach(function(ue,Ut){ue.properties=ue.properties||{},ue.originIndex=Ut});var J=[];Z.every(function(ue){return ue.hasOwnProperty("nodeType")})&&(J=Array.from(new Set(Z.map(function(ue){return ue.nodeType}))),Z.forEach(function(ue){ue.properties.nodeType=J.findIndex(function(Ut){return Ut===ue.nodeType})}));var ft=(0,T.getAllProperties)(Z,b);Q=(0,L.oneHot)(ft,h,K)}var nt=1,yt={},gt={};Z.forEach(function(ue,Ut){var oe=String(nt++);ue.clusterId=oe,yt[oe]={id:oe,nodes:[ue]},gt[ue.id]={node:ue,idx:Ut}});var zt=(0,k.default)(O,E),Mt=[],Ct={},rt=0;zt.forEach(function(ue,Ut){var oe=0,Pe=Z[Ut].id;Ct[Pe]={},ue.forEach(function(te,ve){if(te){oe+=te;var Ue=Z[ve].id;Ct[Pe][Ue]=te,rt+=te}}),Mt.push(oe)}),rt/=2;for(var ot=1/0,Tt=1/0,Rt=0,st=[],bt={};;){W&&Z.every(function(ue){return ue.hasOwnProperty("properties")})?ot=p(Z,zt,Mt,rt)+m(Z,Q)*U:ot=p(Z,zt,Mt,rt),Rt===0&&(Tt=ot,st=Z,bt=yt);var Ft=ot>0&&ot>Tt&&ot-Tt<F;if(ot>Tt&&(st=Z.map(function(ue){return{node:ue,clusterId:ue.clusterId}}),bt=(0,x.clone)(yt),Tt=ot),Ft||Rt>100)break;Rt++,Object.keys(yt).forEach(function(ue){var Ut=0;q.forEach(function(oe){var Pe=oe.source,te=oe.target,ve=gt[Pe].node.clusterId,Ue=gt[te].node.clusterId;(ve===ue&&Ue!==ue||Ue===ue&&ve!==ue)&&(Ut=Ut+(oe[D]||1))}),yt[ue].sumTot=Ut}),Z.forEach(function(ue,Ut){var oe=yt[ue.clusterId],Pe=0,te,ve=Mt[Ut]/(2*rt),Ue=0,xe=oe.nodes;xe.forEach(function(kr){var yn=gt[kr.id].idx;Ue+=zt[Ut][yn]||0});var Re=Ue-oe.sumTot*ve,de=xe.filter(function(kr){return kr.id!==ue.id}),ht=[];de.forEach(function(kr,yn){ht[yn]=Q[kr.originIndex]});var ae=m(de,Q)*U,Le=Ct[ue.id];if(Object.keys(Le).forEach(function(kr){var yn=gt[kr].node,un=yn.clusterId;if(un!==ue.clusterId){var Vr=yt[un],$e=Vr.nodes;if(!(!$e||!$e.length)){var dr=0;$e.forEach(function(Sn){var Yn=gt[Sn.id].idx;dr+=zt[Ut][Yn]||0});var ar=dr-Vr.sumTot*ve,Qe=$e.concat([ue]),Pr=[];Qe.forEach(function(Sn,Yn){Pr[Yn]=Q[Sn.originIndex]});var Zr=m(Qe,Q)*U,qr=ar-Re;W&&(qr=ar+Zr-(Re+ae)),qr>Pe&&(Pe=qr,te=Vr)}}}),Pe>0){te.nodes.push(ue);var Ze=ue.clusterId;ue.clusterId=te.id;var qe=oe.nodes.indexOf(ue);oe.nodes.splice(qe,1);var fr=0,ur=0;q.forEach(function(kr){var yn=kr.source,un=kr.target,Vr=gt[yn].node.clusterId,$e=gt[un].node.clusterId;(Vr===te.id&&$e!==te.id||$e===te.id&&Vr!==te.id)&&(fr=fr+(kr[D]||1)),(Vr===Ze&&$e!==Ze||$e===Ze&&Vr!==Ze)&&(ur=ur+(kr[D]||1))}),te.sumTot=fr,oe.sumTot=ur}})}var Ht={},_t=0;Object.keys(bt).forEach(function(ue){var Ut=bt[ue];if(!Ut.nodes||!Ut.nodes.length){delete bt[ue];return}var oe=String(_t+1);oe!==ue&&(Ut.id=oe,Ut.nodes=Ut.nodes.map(function(Pe){return{id:Pe.id,clusterId:oe}}),bt[oe]=Ut,Ht[ue]=oe,delete bt[ue],_t++)}),st.forEach(function(ue){var Ut=ue.node,oe=ue.clusterId;Ut&&(Ut.clusterId=oe,Ut.clusterId&&Ht[Ut.clusterId]&&(Ut.clusterId=Ht[Ut.clusterId]))});var Xt=[],ee={};q.forEach(function(ue){var Ut=ue.source,oe=ue.target,Pe=ue[D]||1,te=gt[Ut].node.clusterId,ve=gt[oe].node.clusterId;if(!(!te||!ve)){var Ue="".concat(te,"---").concat(ve);if(ee[Ue])ee[Ue].weight+=Pe,ee[Ue].count++;else{var xe={source:te,target:ve,weight:Pe,count:1};ee[Ue]=xe,Xt.push(xe)}}});var se=[];return Object.keys(bt).forEach(function(ue){se.push(bt[ue])}),{clusters:se,clusterEdges:Xt}},y=S;z.default=y},689454:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=T(C(838823)),k=T(C(257085)),w=C(770643);function T(S){return S&&S.__esModule?S:{default:S}}var L=function(y,g){var O=[],E=y.nodes,D=E===void 0?[]:E,F=y.edges,W=F===void 0?[]:F;if(D.length===0)return O;var b=D[0],h=new Set;h.add(b);var K=function(Q,J){return g?Q.weight-J.weight:0},U=new k.default(K);for((0,w.getEdgesByNodeId)(b.id,W).forEach(function(q){U.insert(q)});!U.isEmpty();){var Y=U.delMin(),Z=Y.source,H=Y.target;h.has(Z)&&h.has(H)||(O.push(Y),h.has(Z)||(h.add(Z),(0,w.getEdgesByNodeId)(Z,W).forEach(function(q){U.insert(q)})),h.has(H)||(h.add(H),(0,w.getEdgesByNodeId)(H,W).forEach(function(q){U.insert(q)})))}return O},P=function(y,g){var O=[],E=y.nodes,D=E===void 0?[]:E,F=y.edges,W=F===void 0?[]:F;if(D.length===0)return O;var b=W.map(function(Z){return Z});g&&b.sort(function(Z,H){return Z.weight-H.weight});for(var h=new x.default(D.map(function(Z){return Z.id}));b.length>0;){var K=b.shift(),U=K.source,Y=K.target;h.connected(U,Y)||(O.push(K),h.union(U,Y))}return O},p=function(y,g,O){var E={prim:L,kruskal:P};return O?E[O](y,g):P(y,g)},m=p;z.default=m},274926:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=w(C(182556)),k=C(770643);function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p,m,S){typeof m!="number"&&(m=1e-6),typeof S!="number"&&(S=.85);for(var y=1,g=0,O=1e3,E=p.nodes,D=E===void 0?[]:E,F=p.edges,W=F===void 0?[]:F,b=D.length,h,K={},U={},Y=0;Y<b;++Y){var Z=D[Y],H=Z.id;K[H]=1/b,U[H]=1/b}for(var q=(0,x.default)(p);O>0&&y>m;){g=0;for(var Y=0;Y<b;++Y){var Z=D[Y],H=Z.id;if(h=0,q[Z.id].inDegree===0)K[H]=0;else{for(var Q=(0,k.getNeighbors)(H,W,"source"),J=0;J<Q.length;++J){var ft=Q[J],nt=q[ft].outDegree;nt>0&&(h+=U[ft]/nt)}K[H]=S*h,g+=K[H]}}g=(1-g)/b,y=0;for(var Y=0;Y<b;++Y){var Z=D[Y],H=Z.id;h=K[H]+g,y+=Math.abs(h-U[H]),U[H]=h}O-=1}return U},L=T;z.default=L},257085:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var C=function(T,L){return T-L},x=function(){function w(T){T===void 0&&(T=C),this.compareFn=T,this.list=[]}return w.prototype.getLeft=function(T){return 2*T+1},w.prototype.getRight=function(T){return 2*T+2},w.prototype.getParent=function(T){return T===0?null:Math.floor((T-1)/2)},w.prototype.isEmpty=function(){return this.list.length<=0},w.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},w.prototype.delMin=function(){var T=this.top(),L=this.list.pop();return this.list.length>0&&(this.list[0]=L,this.moveDown(0)),T},w.prototype.insert=function(T){if(T!==null){this.list.push(T);var L=this.list.length-1;return this.moveUp(L),!0}return!1},w.prototype.moveUp=function(T){for(var L=this.getParent(T);T&&T>0&&this.compareFn(this.list[L],this.list[T])>0;){var P=this.list[L];this.list[L]=this.list[T],this.list[T]=P,T=L,L=this.getParent(T)}},w.prototype.moveDown=function(T){var L,P=T,p=this.getLeft(T),m=this.getRight(T),S=this.list.length;p!==null&&p<S&&this.compareFn(this.list[P],this.list[p])>0?P=p:m!==null&&m<S&&this.compareFn(this.list[P],this.list[m])>0&&(P=m),T!==P&&(L=[this.list[P],this.list[T]],this.list[T]=L[0],this.list[P]=L[1],this.moveDown(P))},w}(),k=x;z.default=k},488481:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=z.LinkedListNode=void 0;var C=function(L,P){return L===P},x=function(){function T(L,P){P===void 0&&(P=null),this.value=L,this.next=P}return T.prototype.toString=function(L){return L?L(this.value):"".concat(this.value)},T}();z.LinkedListNode=x;var k=function(){function T(L){L===void 0&&(L=C),this.head=null,this.tail=null,this.compare=L}return T.prototype.prepend=function(L){var P=new x(L,this.head);return this.head=P,this.tail||(this.tail=P),this},T.prototype.append=function(L){var P=new x(L);return this.head?(this.tail.next=P,this.tail=P,this):(this.head=P,this.tail=P,this)},T.prototype.delete=function(L){if(!this.head)return null;for(var P=null;this.head&&this.compare(this.head.value,L);)P=this.head,this.head=this.head.next;var p=this.head;if(p!==null)for(;p.next;)this.compare(p.next.value,L)?(P=p.next,p.next=p.next.next):p=p.next;return this.compare(this.tail.value,L)&&(this.tail=p),P},T.prototype.find=function(L){var P=L.value,p=P===void 0?void 0:P,m=L.callback,S=m===void 0?void 0:m;if(!this.head)return null;for(var y=this.head;y;){if(S&&S(y.value)||p!==void 0&&this.compare(y.value,p))return y;y=y.next}return null},T.prototype.deleteTail=function(){var L=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,L;for(var P=this.head;P.next;)P.next.next?P=P.next:P.next=null;return this.tail=P,L},T.prototype.deleteHead=function(){if(!this.head)return null;var L=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),L},T.prototype.fromArray=function(L){var P=this;return L.forEach(function(p){return P.append(p)}),this},T.prototype.toArray=function(){for(var L=[],P=this.head;P;)L.push(P),P=P.next;return L},T.prototype.reverse=function(){for(var L=this.head,P=null,p=null;L;)p=L.next,L.next=P,P=L,L=p;this.tail=this.head,this.head=P},T.prototype.toString=function(L){return L===void 0&&(L=void 0),this.toArray().map(function(P){return P.toString(L)}).toString()},T}(),w=k;z.default=w},893026:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=k(C(488481));function k(L){return L&&L.__esModule?L:{default:L}}var w=function(){function L(){this.linkedList=new x.default}return L.prototype.isEmpty=function(){return!this.linkedList.head},L.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},L.prototype.enqueue=function(P){this.linkedList.append(P)},L.prototype.dequeue=function(){var P=this.linkedList.deleteHead();return P?P.value:null},L.prototype.toString=function(P){return this.linkedList.toString(P)},L}(),T=w;z.default=T},838823:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var C=function(){function k(w){this.count=w.length,this.parent={};for(var T=0,L=w;T<L.length;T++){var P=L[T];this.parent[P]=P}}return k.prototype.find=function(w){for(;this.parent[w]!==w;)w=this.parent[w];return w},k.prototype.union=function(w,T){var L=this.find(w),P=this.find(T);L!==P&&(L<P?(this.parent[T]!==T&&this.union(this.parent[T],w),this.parent[T]=this.parent[w]):(this.parent[w]!==w&&this.union(this.parent[w],T),this.parent[w]=this.parent[T]))},k.prototype.connected=function(w,T){return this.find(w)===this.find(T)},k}(),x=C;z.default=x},317892:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.DistanceType=void 0;var C;z.DistanceType=C,function(x){x.EuclideanDistance="euclideanDistance"}(C||(z.DistanceType=C={}))},770643:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.uniqueId=z.getOutEdgesNodeId=z.getNeighbors=z.getEdgesByNodeId=void 0;var C=function(L,P,p){P===void 0&&(P=[]);var m=P.filter(function(O){return O.source===L||O.target===L});if(p==="target"){var S=function(E){return E.source===L};return m.filter(S).map(function(O){return O.target})}if(p==="source"){var y=function(E){return E.target===L};return m.filter(y).map(function(O){return O.source})}var g=function(E){return E.source===L?E.target:E.source};return m.map(g)};z.getNeighbors=C;var x=function(L,P){return P.filter(function(p){return p.source===L})};z.getOutEdgesNodeId=x;var k=function(L,P){return P.filter(function(p){return p.source===L||p.target===L})};z.getEdgesByNodeId=k;var w=function(L){L===void 0&&(L=0);var P="".concat(Math.random()).split(".")[1].substr(0,5),p="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(L,"-").concat(P).concat(p)};z.uniqueId=w},526838:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.oneHot=z.getDistance=z.getAllKeyValueMap=z.default=void 0;var x=C(413810),k=C(317892),w=T(C(29741));function T(S){return S&&S.__esModule?S:{default:S}}var L=function(y,g,O){var E=[];g!=null&&g.length?E=g:(y.forEach(function(F){E=E.concat(Object.keys(F))}),E=(0,x.uniq)(E));var D={};return E.forEach(function(F){var W=[];y.forEach(function(b){b[F]!==void 0&&b[F]!==""&&W.push(b[F])}),W.length&&!(O!=null&&O.includes(F))&&(D[F]=(0,x.uniq)(W))}),D};z.getAllKeyValueMap=L;var P=function(y,g,O){var E=L(y,g,O),D=[];if(!Object.keys(E).length)return D;var F=Object.values(E),W=F.every(function(b){return b.every(function(h){return typeof h=="number"})});return y.forEach(function(b,h){var K=[];Object.keys(E).forEach(function(U){var Y=b[U],Z=E[U],H=Z.findIndex(function(J){return Y===J}),q=[];if(W)q.push(Y);else for(var Q=0;Q<Z.length;Q++)Q===H?q.push(1):q.push(0);K=K.concat(q)}),D[h]=K}),D};z.oneHot=P;var p=function(y,g,O,E){O===void 0&&(O=k.DistanceType.EuclideanDistance);var D=0;switch(O){case k.DistanceType.EuclideanDistance:D=new w.default(y).euclideanDistance(new w.default(g));break;default:break}return D};z.getDistance=p;var m={getAllKeyValueMap:L,oneHot:P,getDistance:p};z.default=m},103665:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getPropertyWeight=z.getAllSortProperties=z.getAllProperties=z.default=void 0;var x=C(592935),k=function(m,S){m===void 0&&(m=[]),S===void 0&&(S=100);var y={};m.forEach(function(O){O.properties&&Object.keys(O.properties).forEach(function(E){if(E==="id"||!"".concat(O.properties[E]).match(x.secondReg)&&!"".concat(O.properties[E]).match(x.dateReg)&&isNaN(Number(O.properties[E]))){y.hasOwnProperty(E)&&delete y[E];return}y.hasOwnProperty(E)?y[E]+=1:y[E]=1})});var g=Object.keys(y).sort(function(O,E){return y[E]-y[O]});return g.length<S?g:g.slice(0,S)};z.getAllSortProperties=k;var w=function(m,S){return S.map(function(y){return m.hasOwnProperty(y)?m[y]:0})},T=function(m){for(var S=k(m),y=[],g=0;g<m.length;g++)y[g]=w(m[g].properties,S);return y};z.getPropertyWeight=T;var L=function(m,S){S===void 0&&(S=void 0);var y=[];return m.forEach(function(g){S===void 0&&y.push(g),g[S]!==void 0&&y.push(g[S])}),y};z.getAllProperties=L;var P={getAllSortProperties:k,getPropertyWeight:T,getAllProperties:L};z.default=P},29741:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(413810),k=function(){function T(L){this.arr=L}return T.prototype.getArr=function(){return this.arr||[]},T.prototype.add=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length))return new T(p);if(!(p!=null&&p.length))return new T(this.arr);if(this.arr.length===p.length){var m=[];for(var S in this.arr)m[S]=this.arr[S]+p[S];return new T(m)}},T.prototype.subtract=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length))return new T(p);if(!(p!=null&&p.length))return new T(this.arr);if(this.arr.length===p.length){var m=[];for(var S in this.arr)m[S]=this.arr[S]-p[S];return new T(m)}},T.prototype.avg=function(L){var P=[];if(L!==0)for(var p in this.arr)P[p]=this.arr[p]/L;return new T(P)},T.prototype.negate=function(){var L=[];for(var P in this.arr)L[P]=-this.arr[P];return new T(L)},T.prototype.squareEuclideanDistance=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var m=0;for(var S in this.arr)m+=Math.pow(this.arr[S]-L.arr[S],2);return m}},T.prototype.euclideanDistance=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var m=0;for(var S in this.arr)m+=Math.pow(this.arr[S]-L.arr[S],2);return Math.sqrt(m)}else console.error("The two vectors are unequal in length.")},T.prototype.normalize=function(){var L=[],P=(0,x.clone)(this.arr);P.sort(function(y,g){return y-g});var p=P[P.length-1],m=P[0];for(var S in this.arr)L[S]=(this.arr[S]-m)/(p-m);return new T(L)},T.prototype.norm2=function(){var L;if(!(!((L=this.arr)===null||L===void 0)&&L.length))return 0;var P=0;for(var p in this.arr)P+=Math.pow(this.arr[p],2);return Math.sqrt(P)},T.prototype.dot=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var m=0;for(var S in this.arr)m+=this.arr[S]*L.arr[S];return m}else console.error("The two vectors are unequal in length.")},T.prototype.equal=function(L){var P,p=L.arr;if(((P=this.arr)===null||P===void 0?void 0:P.length)!==(p==null?void 0:p.length))return!1;for(var m in this.arr)if(this.arr[m]!==p[m])return!1;return!0},T}(),w=k;z.default=w},831656:function(He,z,C){"use strict";function x(U){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},x(U)}Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"GADDI",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(z,"breadthFirstSearch",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(z,"connectedComponent",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(z,"depthFirstSearch",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(z,"detectCycle",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(z,"dijkstra",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(z,"findAllPath",{enumerable:!0,get:function(){return S.findAllPath}}),Object.defineProperty(z,"findShortestPath",{enumerable:!0,get:function(){return S.findShortestPath}}),Object.defineProperty(z,"floydWarshall",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(z,"getAdjMatrix",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(z,"getDegree",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(z,"getInDegree",{enumerable:!0,get:function(){return L.getInDegree}}),Object.defineProperty(z,"getNeighbors",{enumerable:!0,get:function(){return W.getNeighbors}}),Object.defineProperty(z,"getOutDegree",{enumerable:!0,get:function(){return L.getOutDegree}}),Object.defineProperty(z,"labelPropagation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(z,"louvain",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(z,"minimumSpanningTree",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(z,"pageRank",{enumerable:!0,get:function(){return D.default}});var k=K(C(62238)),w=K(C(683764)),T=K(C(759527)),L=h(C(182556)),P=K(C(994282)),p=K(C(45891)),m=K(C(878089)),S=C(241727),y=K(C(975033)),g=K(C(505170)),O=K(C(135179)),E=K(C(689454)),D=K(C(274926)),F=K(C(882812)),W=C(770643);function b(U){if(typeof WeakMap!="function")return null;var Y=new WeakMap,Z=new WeakMap;return(b=function(q){return q?Z:Y})(U)}function h(U,Y){if(!Y&&U&&U.__esModule)return U;if(U===null||x(U)!=="object"&&typeof U!="function")return{default:U};var Z=b(Y);if(Z&&Z.has(U))return Z.get(U);var H={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in U)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(U,Q)){var J=q?Object.getOwnPropertyDescriptor(U,Q):null;J&&(J.get||J.set)?Object.defineProperty(H,Q,J):H[Q]=U[Q]}return H.default=U,Z&&Z.set(U,H),H}function K(U){return U&&U.__esModule?U:{default:U}}},66044:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.MESSAGE=z.ALGORITHM=void 0;var C={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};z.ALGORITHM=C;var x={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};z.MESSAGE=x},70585:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var x=C(66044),k=w(C(612067));function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p){return function(){for(var m=[],S=0;S<arguments.length;S++)m[S]=arguments[S];return new Promise(function(y,g){var O=new k.default;O.postMessage({_algorithmType:p,data:m}),O.onmessage=function(E){var D=E.data,F=D.data,W=D._algorithmType;x.MESSAGE.SUCCESS===W?y(F):g(),O.terminate()}})}},L=T;z.default=L},430485:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.pageRankAsync=z.minimumSpanningTreeAsync=z.louvainAsync=z.labelPropagationAsync=z.getOutDegreeAsync=z.getNeighborsAsync=z.getInDegreeAsync=z.getDegreeAsync=z.getAdjMatrixAsync=z.floydWarshallAsync=z.findShortestPathAsync=z.findAllPathAsync=z.dijkstraAsync=z.detectCycleAsync=z.detectAllUndirectedCycleAsync=z.detectAllDirectedCycleAsync=z.detectAllCyclesAsync=z.connectedComponentAsync=z.GADDIAsync=void 0;var x=w(C(70585)),k=C(66044);function w(H){return H&&H.__esModule?H:{default:H}}var T=function(q,Q){return(0,x.default)(k.ALGORITHM.getAdjMatrix).apply(void 0,[q,Q])};z.getAdjMatrixAsync=T;var L=function(q,Q){return(0,x.default)(k.ALGORITHM.connectedComponent).apply(void 0,[q,Q])};z.connectedComponentAsync=L;var P=function(q){return(0,x.default)(k.ALGORITHM.getDegree)(q)};z.getDegreeAsync=P;var p=function(q,Q){return(0,x.default)(k.ALGORITHM.getInDegree)(q,Q)};z.getInDegreeAsync=p;var m=function(q,Q){return(0,x.default)(k.ALGORITHM.getOutDegree)(q,Q)};z.getOutDegreeAsync=m;var S=function(q){return(0,x.default)(k.ALGORITHM.detectCycle)(q)};z.detectCycleAsync=S;var y=function(q){return(0,x.default)(k.ALGORITHM.detectAllCycles)(q)};z.detectAllCyclesAsync=y;var g=function(q){return(0,x.default)(k.ALGORITHM.detectAllDirectedCycle)(q)};z.detectAllDirectedCycleAsync=g;var O=function(q){return(0,x.default)(k.ALGORITHM.detectAllUndirectedCycle)(q)};z.detectAllUndirectedCycleAsync=O;var E=function(q,Q,J,ft){return(0,x.default)(k.ALGORITHM.dijkstra).apply(void 0,[q,Q,J,ft])};z.dijkstraAsync=E;var D=function(q,Q,J,ft){return(0,x.default)(k.ALGORITHM.findAllPath).apply(void 0,[q,Q,J,ft])};z.findAllPathAsync=D;var F=function(q,Q,J,ft,nt){return(0,x.default)(k.ALGORITHM.findShortestPath).apply(void 0,[q,Q,J,ft,nt])};z.findShortestPathAsync=F;var W=function(q,Q){return(0,x.default)(k.ALGORITHM.floydWarshall).apply(void 0,[q,Q])};z.floydWarshallAsync=W;var b=function(q,Q,J,ft){return ft===void 0&&(ft=1e3),(0,x.default)(k.ALGORITHM.labelPropagation)(q,Q,J,ft)};z.labelPropagationAsync=b;var h=function(q,Q,J,ft){return(0,x.default)(k.ALGORITHM.louvain)(q,Q,J,ft)};z.louvainAsync=h;var K=function(q,Q,J){return(0,x.default)(k.ALGORITHM.minimumSpanningTree).apply(void 0,[q,Q,J])};z.minimumSpanningTreeAsync=K;var U=function(q,Q,J){return(0,x.default)(k.ALGORITHM.pageRank).apply(void 0,[q,Q,J])};z.pageRankAsync=U;var Y=function(q,Q,J){return(0,x.default)(k.ALGORITHM.getNeighbors).apply(void 0,[q,Q,J])};z.getNeighborsAsync=Y;var Z=function(q,Q,J,ft,nt,yt,gt){return J===void 0&&(J=!1),yt===void 0&&(yt="cluster"),gt===void 0&&(gt="cluster"),(0,x.default)(k.ALGORITHM.GADDI).apply(void 0,[q,Q,J,ft,nt,yt,gt])};z.GADDIAsync=Z},612067:function(He,z,C){"use strict";function x(m){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},x(m)}Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var k=L(C(831656)),w=C(66044);function T(m){if(typeof WeakMap!="function")return null;var S=new WeakMap,y=new WeakMap;return(T=function(O){return O?y:S})(m)}function L(m,S){if(!S&&m&&m.__esModule)return m;if(m===null||x(m)!=="object"&&typeof m!="function")return{default:m};var y=T(S);if(y&&y.has(m))return y.get(m);var g={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in m)if(E!=="default"&&Object.prototype.hasOwnProperty.call(m,E)){var D=O?Object.getOwnPropertyDescriptor(m,E):null;D&&(D.get||D.set)?Object.defineProperty(g,E,D):g[E]=m[E]}return g.default=m,y&&y.set(m,g),g}var P=typeof self!="undefined"?self:{};P.onmessage=function(m){var S=m.data,y=S._algorithmType,g=S.data;if(y){if(typeof k[y]=="function"){var O=k[y].apply(k,g);P.postMessage({_algorithmType:w.MESSAGE.SUCCESS,data:O});return}P.postMessage({_algorithmType:w.MESSAGE.FAILURE})}};var p=null;z.default=p},901029:function(He,z,C){"use strict";C.r(z),C.d(z,{Kernel:function(){return yt},World:function(){return _n}});var x=C(115861),k=C(204942),w=C(215671),T=C(143144),L=C(936719),P=C.n(L),p=C(281763),m=C.n(p),S=C(701469),y=C.n(S),g=C(364687),O=C.n(g),E=null,D=1;function F(){return D++}var W=null,b=null,h;(function(tt){tt[tt.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",tt[tt.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",tt[tt.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",tt[tt.POINTS=0]="POINTS",tt[tt.LINES=1]="LINES",tt[tt.LINE_LOOP=2]="LINE_LOOP",tt[tt.LINE_STRIP=3]="LINE_STRIP",tt[tt.TRIANGLES=4]="TRIANGLES",tt[tt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",tt[tt.TRIANGLE_FAN=6]="TRIANGLE_FAN",tt[tt.ZERO=0]="ZERO",tt[tt.ONE=1]="ONE",tt[tt.SRC_COLOR=768]="SRC_COLOR",tt[tt.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",tt[tt.SRC_ALPHA=770]="SRC_ALPHA",tt[tt.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",tt[tt.DST_ALPHA=772]="DST_ALPHA",tt[tt.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",tt[tt.DST_COLOR=774]="DST_COLOR",tt[tt.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",tt[tt.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",tt[tt.FUNC_ADD=32774]="FUNC_ADD",tt[tt.BLEND_EQUATION=32777]="BLEND_EQUATION",tt[tt.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",tt[tt.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",tt[tt.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",tt[tt.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",tt[tt.MAX_EXT=32776]="MAX_EXT",tt[tt.MIN_EXT=32775]="MIN_EXT",tt[tt.BLEND_DST_RGB=32968]="BLEND_DST_RGB",tt[tt.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",tt[tt.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",tt[tt.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",tt[tt.CONSTANT_COLOR=32769]="CONSTANT_COLOR",tt[tt.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",tt[tt.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",tt[tt.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",tt[tt.BLEND_COLOR=32773]="BLEND_COLOR",tt[tt.ARRAY_BUFFER=34962]="ARRAY_BUFFER",tt[tt.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",tt[tt.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",tt[tt.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",tt[tt.STREAM_DRAW=35040]="STREAM_DRAW",tt[tt.STATIC_DRAW=35044]="STATIC_DRAW",tt[tt.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",tt[tt.BUFFER_SIZE=34660]="BUFFER_SIZE",tt[tt.BUFFER_USAGE=34661]="BUFFER_USAGE",tt[tt.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",tt[tt.FRONT=1028]="FRONT",tt[tt.BACK=1029]="BACK",tt[tt.FRONT_AND_BACK=1032]="FRONT_AND_BACK",tt[tt.CULL_FACE=2884]="CULL_FACE",tt[tt.BLEND=3042]="BLEND",tt[tt.DITHER=3024]="DITHER",tt[tt.STENCIL_TEST=2960]="STENCIL_TEST",tt[tt.DEPTH_TEST=2929]="DEPTH_TEST",tt[tt.SCISSOR_TEST=3089]="SCISSOR_TEST",tt[tt.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",tt[tt.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",tt[tt.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",tt[tt.NO_ERROR=0]="NO_ERROR",tt[tt.INVALID_ENUM=1280]="INVALID_ENUM",tt[tt.INVALID_VALUE=1281]="INVALID_VALUE",tt[tt.INVALID_OPERATION=1282]="INVALID_OPERATION",tt[tt.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",tt[tt.CW=2304]="CW",tt[tt.CCW=2305]="CCW",tt[tt.LINE_WIDTH=2849]="LINE_WIDTH",tt[tt.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",tt[tt.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",tt[tt.CULL_FACE_MODE=2885]="CULL_FACE_MODE",tt[tt.FRONT_FACE=2886]="FRONT_FACE",tt[tt.DEPTH_RANGE=2928]="DEPTH_RANGE",tt[tt.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",tt[tt.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",tt[tt.DEPTH_FUNC=2932]="DEPTH_FUNC",tt[tt.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",tt[tt.STENCIL_FUNC=2962]="STENCIL_FUNC",tt[tt.STENCIL_FAIL=2964]="STENCIL_FAIL",tt[tt.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",tt[tt.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",tt[tt.STENCIL_REF=2967]="STENCIL_REF",tt[tt.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",tt[tt.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",tt[tt.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",tt[tt.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",tt[tt.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",tt[tt.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",tt[tt.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",tt[tt.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",tt[tt.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",tt[tt.VIEWPORT=2978]="VIEWPORT",tt[tt.SCISSOR_BOX=3088]="SCISSOR_BOX",tt[tt.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",tt[tt.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",tt[tt.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",tt[tt.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",tt[tt.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",tt[tt.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",tt[tt.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",tt[tt.RED_BITS=3410]="RED_BITS",tt[tt.GREEN_BITS=3411]="GREEN_BITS",tt[tt.BLUE_BITS=3412]="BLUE_BITS",tt[tt.ALPHA_BITS=3413]="ALPHA_BITS",tt[tt.DEPTH_BITS=3414]="DEPTH_BITS",tt[tt.STENCIL_BITS=3415]="STENCIL_BITS",tt[tt.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",tt[tt.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",tt[tt.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",tt[tt.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",tt[tt.SAMPLES=32937]="SAMPLES",tt[tt.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",tt[tt.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",tt[tt.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",tt[tt.DONT_CARE=4352]="DONT_CARE",tt[tt.FASTEST=4353]="FASTEST",tt[tt.NICEST=4354]="NICEST",tt[tt.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",tt[tt.BYTE=5120]="BYTE",tt[tt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",tt[tt.SHORT=5122]="SHORT",tt[tt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",tt[tt.INT=5124]="INT",tt[tt.UNSIGNED_INT=5125]="UNSIGNED_INT",tt[tt.FLOAT=5126]="FLOAT",tt[tt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",tt[tt.ALPHA=6406]="ALPHA",tt[tt.RGB=6407]="RGB",tt[tt.RGBA=6408]="RGBA",tt[tt.LUMINANCE=6409]="LUMINANCE",tt[tt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",tt[tt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",tt[tt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",tt[tt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",tt[tt.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",tt[tt.VERTEX_SHADER=35633]="VERTEX_SHADER",tt[tt.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",tt[tt.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",tt[tt.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",tt[tt.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",tt[tt.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",tt[tt.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",tt[tt.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",tt[tt.SHADER_TYPE=35663]="SHADER_TYPE",tt[tt.DELETE_STATUS=35712]="DELETE_STATUS",tt[tt.LINK_STATUS=35714]="LINK_STATUS",tt[tt.VALIDATE_STATUS=35715]="VALIDATE_STATUS",tt[tt.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",tt[tt.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",tt[tt.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",tt[tt.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",tt[tt.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",tt[tt.NEVER=512]="NEVER",tt[tt.LESS=513]="LESS",tt[tt.EQUAL=514]="EQUAL",tt[tt.LEQUAL=515]="LEQUAL",tt[tt.GREATER=516]="GREATER",tt[tt.NOTEQUAL=517]="NOTEQUAL",tt[tt.GEQUAL=518]="GEQUAL",tt[tt.ALWAYS=519]="ALWAYS",tt[tt.KEEP=7680]="KEEP",tt[tt.REPLACE=7681]="REPLACE",tt[tt.INCR=7682]="INCR",tt[tt.DECR=7683]="DECR",tt[tt.INVERT=5386]="INVERT",tt[tt.INCR_WRAP=34055]="INCR_WRAP",tt[tt.DECR_WRAP=34056]="DECR_WRAP",tt[tt.VENDOR=7936]="VENDOR",tt[tt.RENDERER=7937]="RENDERER",tt[tt.VERSION=7938]="VERSION",tt[tt.NEAREST=9728]="NEAREST",tt[tt.LINEAR=9729]="LINEAR",tt[tt.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",tt[tt.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",tt[tt.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",tt[tt.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",tt[tt.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",tt[tt.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",tt[tt.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",tt[tt.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",tt[tt.TEXTURE_2D=3553]="TEXTURE_2D",tt[tt.TEXTURE=5890]="TEXTURE",tt[tt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",tt[tt.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",tt[tt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",tt[tt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",tt[tt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",tt[tt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",tt[tt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",tt[tt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",tt[tt.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",tt[tt.TEXTURE0=33984]="TEXTURE0",tt[tt.TEXTURE1=33985]="TEXTURE1",tt[tt.TEXTURE2=33986]="TEXTURE2",tt[tt.TEXTURE3=33987]="TEXTURE3",tt[tt.TEXTURE4=33988]="TEXTURE4",tt[tt.TEXTURE5=33989]="TEXTURE5",tt[tt.TEXTURE6=33990]="TEXTURE6",tt[tt.TEXTURE7=33991]="TEXTURE7",tt[tt.TEXTURE8=33992]="TEXTURE8",tt[tt.TEXTURE9=33993]="TEXTURE9",tt[tt.TEXTURE10=33994]="TEXTURE10",tt[tt.TEXTURE11=33995]="TEXTURE11",tt[tt.TEXTURE12=33996]="TEXTURE12",tt[tt.TEXTURE13=33997]="TEXTURE13",tt[tt.TEXTURE14=33998]="TEXTURE14",tt[tt.TEXTURE15=33999]="TEXTURE15",tt[tt.TEXTURE16=34e3]="TEXTURE16",tt[tt.TEXTURE17=34001]="TEXTURE17",tt[tt.TEXTURE18=34002]="TEXTURE18",tt[tt.TEXTURE19=34003]="TEXTURE19",tt[tt.TEXTURE20=34004]="TEXTURE20",tt[tt.TEXTURE21=34005]="TEXTURE21",tt[tt.TEXTURE22=34006]="TEXTURE22",tt[tt.TEXTURE23=34007]="TEXTURE23",tt[tt.TEXTURE24=34008]="TEXTURE24",tt[tt.TEXTURE25=34009]="TEXTURE25",tt[tt.TEXTURE26=34010]="TEXTURE26",tt[tt.TEXTURE27=34011]="TEXTURE27",tt[tt.TEXTURE28=34012]="TEXTURE28",tt[tt.TEXTURE29=34013]="TEXTURE29",tt[tt.TEXTURE30=34014]="TEXTURE30",tt[tt.TEXTURE31=34015]="TEXTURE31",tt[tt.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",tt[tt.REPEAT=10497]="REPEAT",tt[tt.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",tt[tt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",tt[tt.FLOAT_VEC2=35664]="FLOAT_VEC2",tt[tt.FLOAT_VEC3=35665]="FLOAT_VEC3",tt[tt.FLOAT_VEC4=35666]="FLOAT_VEC4",tt[tt.INT_VEC2=35667]="INT_VEC2",tt[tt.INT_VEC3=35668]="INT_VEC3",tt[tt.INT_VEC4=35669]="INT_VEC4",tt[tt.BOOL=35670]="BOOL",tt[tt.BOOL_VEC2=35671]="BOOL_VEC2",tt[tt.BOOL_VEC3=35672]="BOOL_VEC3",tt[tt.BOOL_VEC4=35673]="BOOL_VEC4",tt[tt.FLOAT_MAT2=35674]="FLOAT_MAT2",tt[tt.FLOAT_MAT3=35675]="FLOAT_MAT3",tt[tt.FLOAT_MAT4=35676]="FLOAT_MAT4",tt[tt.SAMPLER_2D=35678]="SAMPLER_2D",tt[tt.SAMPLER_CUBE=35680]="SAMPLER_CUBE",tt[tt.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",tt[tt.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",tt[tt.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",tt[tt.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",tt[tt.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",tt[tt.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",tt[tt.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",tt[tt.COMPILE_STATUS=35713]="COMPILE_STATUS",tt[tt.LOW_FLOAT=36336]="LOW_FLOAT",tt[tt.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",tt[tt.HIGH_FLOAT=36338]="HIGH_FLOAT",tt[tt.LOW_INT=36339]="LOW_INT",tt[tt.MEDIUM_INT=36340]="MEDIUM_INT",tt[tt.HIGH_INT=36341]="HIGH_INT",tt[tt.FRAMEBUFFER=36160]="FRAMEBUFFER",tt[tt.RENDERBUFFER=36161]="RENDERBUFFER",tt[tt.RGBA4=32854]="RGBA4",tt[tt.RGB5_A1=32855]="RGB5_A1",tt[tt.RGB565=36194]="RGB565",tt[tt.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",tt[tt.STENCIL_INDEX=6401]="STENCIL_INDEX",tt[tt.STENCIL_INDEX8=36168]="STENCIL_INDEX8",tt[tt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",tt[tt.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",tt[tt.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",tt[tt.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",tt[tt.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",tt[tt.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",tt[tt.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",tt[tt.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",tt[tt.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",tt[tt.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",tt[tt.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",tt[tt.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",tt[tt.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",tt[tt.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",tt[tt.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",tt[tt.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",tt[tt.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",tt[tt.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",tt[tt.NONE=0]="NONE",tt[tt.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",tt[tt.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",tt[tt.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",tt[tt.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",tt[tt.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",tt[tt.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",tt[tt.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",tt[tt.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",tt[tt.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",tt[tt.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",tt[tt.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",tt[tt.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",tt[tt.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",tt[tt.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",tt[tt.COPY_SRC=1]="COPY_SRC",tt[tt.COPY_DST=2]="COPY_DST",tt[tt.SAMPLED=4]="SAMPLED",tt[tt.STORAGE=8]="STORAGE",tt[tt.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(h||(h={}));var K=function(){function tt(){(0,w.Z)(this,tt),this.config=void 0}return(0,T.Z)(tt,[{key:"get",value:function(){return this.config}},{key:"set",value:function(jt){this.config=jt}}]),tt}(),U=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Y;(function(tt){tt.Void="Void",tt.Boolean="Boolean",tt.Float="Float",tt.Uint32="Uint32",tt.Int32="Int32",tt.Vector="Vector",tt.Vector2Float="vec2<f32>",tt.Vector3Float="vec3<f32>",tt.Vector4Float="vec4<f32>",tt.Vector2Boolean="vec2<bool>",tt.Vector3Boolean="vec3<bool>",tt.Vector4Boolean="vec4<bool>",tt.Vector2Uint="vec2<u32>",tt.Vector3Uint="vec3<u32>",tt.Vector4Uint="vec4<u32>",tt.Vector2Int="vec2<i32>",tt.Vector3Int="vec3<i32>",tt.Vector4Int="vec4<i32>",tt.Matrix="Matrix",tt.Matrix3x3Float="mat3x3<f32>",tt.Matrix4x4Float="mat4x4<i32>",tt.Struct="Struct",tt.FloatArray="Float[]",tt.Vector4FloatArray="vec4<f32>[]"})(Y||(Y={}));var Z;(function(tt){tt.Program="Program",tt.Identifier="Identifier",tt.VariableDeclaration="VariableDeclaration",tt.BlockStatement="BlockStatement",tt.ReturnStatement="ReturnStatement",tt.FunctionDeclaration="FunctionDeclaration",tt.VariableDeclarator="VariableDeclarator",tt.AssignmentExpression="AssignmentExpression",tt.LogicalExpression="LogicalExpression",tt.BinaryExpression="BinaryExpression",tt.ArrayExpression="ArrayExpression",tt.UnaryExpression="UnaryExpression",tt.UpdateExpression="UpdateExpression",tt.FunctionExpression="FunctionExpression",tt.MemberExpression="MemberExpression",tt.ConditionalExpression="ConditionalExpression",tt.ExpressionStatement="ExpressionStatement",tt.CallExpression="CallExpression",tt.NumThreadStatement="NumThreadStatement",tt.StorageStatement="StorageStatement",tt.DoWhileStatement="DoWhileStatement",tt.WhileStatement="WhileStatement",tt.ForStatement="ForStatement",tt.BreakStatement="BreakStatement",tt.ContinueStatement="ContinueStatement",tt.IfStatement="IfStatement",tt.ImportedFunctionStatement="ImportedFunctionStatement"})(Z||(Z={}));var H;(function(tt){tt.Input="Input",tt.Output="Output",tt.Uniform="Uniform",tt.Workgroup="Workgroup",tt.UniformConstant="UniformConstant",tt.Image="Image",tt.StorageBuffer="StorageBuffer",tt.Private="Private",tt.Function="Function"})(H||(H={}));var q;(function(tt){tt.GLSL100="GLSL100",tt.GLSL450="GLSL450",tt.WGSL="WGSL"})(q||(q={}));var Q="__DefineValuePlaceholder__";function J(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ft(tt,ir){var jt=Object.keys(tt);if(Object.getOwnPropertySymbols){var Qt=Object.getOwnPropertySymbols(tt);ir&&(Qt=Qt.filter(function(Et){return Object.getOwnPropertyDescriptor(tt,Et).enumerable})),jt.push.apply(jt,Qt)}return jt}function nt(tt){for(var ir=1;ir<arguments.length;ir++){var jt=arguments[ir]!=null?arguments[ir]:{};ir%2?ft(Object(jt),!0).forEach(function(Qt){(0,k.Z)(tt,Qt,jt[Qt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(jt)):ft(Object(jt)).forEach(function(Qt){Object.defineProperty(tt,Qt,Object.getOwnPropertyDescriptor(jt,Qt))})}return tt}var yt=function(){function tt(ir,jt){(0,w.Z)(this,tt),this.engine=ir,this.configService=jt,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,T.Z)(tt,[{key:"init",value:function(){var jt=this.configService.get(),Qt=jt.canvas,Et=jt.engineOptions;this.initPromise=this.engine.init(nt({canvas:Qt||J(),antialiasing:!1},Et))}},{key:"setBundle",value:function(jt){this.compiledBundle=JSON.parse(JSON.stringify(jt))}},{key:"setDispatch",value:function(jt){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=jt),this}},{key:"setMaxIteration",value:function(jt){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=jt),this}},{key:"setBinding",value:function(jt,Qt){var Et=this;if(typeof jt=="string"){var we=m()(Qt)||P()(Qt)||y()(Qt);if(this.compiledBundle&&this.compiledBundle.context){var Ot=this.compiledBundle.context.defines.find(function(dt){return dt.name===jt});if(Ot)return Ot.value=Qt,this;var Kt=this.compiledBundle.context.uniforms.find(function(dt){return dt.name===jt});Kt&&(we?(Kt.data=Qt,Kt.isReferer=!1,Kt.storageClass===H.Uniform?this.model&&this.model.updateUniform(jt,Qt):this.model&&this.model.updateBuffer(jt,Qt)):(Kt.isReferer=!0,Kt.data=Qt))}}else Object.keys(jt).forEach(function(dt){Et.setBinding(dt,jt[dt])});return this}},{key:"execute",value:function(){var ir=(0,x.Z)(O().mark(function Qt(){var Et=this,we,Ot,Kt=arguments;return O().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:if(we=Kt.length>0&&Kt[0]!==void 0?Kt[0]:1,!this.dirty){Bt.next=6;break}return this.compiledBundle.context&&(we>1?this.compiledBundle.context.maxIteration=we:this.compiledBundle.context.maxIteration++),Bt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function($){var at=$.isReferer;return at}).forEach(function($){var at=$.data,R=$.name;Et.model.confirmInput(at.model,R)}),Ot=0;Ot<we;Ot++)this.model.run();return this.engine.endFrame(),Bt.abrupt("return",this);case 12:case"end":return Bt.stop()}},Qt,this)}));function jt(){return ir.apply(this,arguments)}return jt}()},{key:"getOutput",value:function(){var ir=(0,x.Z)(O().mark(function Qt(){return O().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",this.model.readData());case 1:case"end":return we.stop()}},Qt,this)}));function jt(){return ir.apply(this,arguments)}return jt}()},{key:"compile",value:function(){var ir=(0,x.Z)(O().mark(function Qt(){var Et,we,Ot;return O().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.next=2,this.initPromise;case 2:return Et=nt({},this.compiledBundle.context),we=this.engine.supportWebGPU?this.engine.useWGSL?q.WGSL:q.GLSL450:q.GLSL100,Ot=this.compiledBundle.shaders[we],Et.defines.filter(function(Bt){return Bt.runtime}).forEach(function(Bt){var $="".concat(Q).concat(Bt.name);Ot=Ot.replace($,"".concat(Bt.value))}),Et.shader=Ot,Et.uniforms.forEach(function(Bt){if(!Bt.data&&Bt.storageClass===H.StorageBuffer){var $=1;Bt.type===Y.FloatArray?$=1:Bt.type===Y.Vector4FloatArray&&($=4),Bt.data=new Float32Array(Et.output.length*$).fill(0)}}),this.compiledBundle.context=Et,dt.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=dt.sent;case 12:case"end":return dt.stop()}},Qt,this)}));function jt(){return ir.apply(this,arguments)}return jt}()}]),tt}(),gt=C(481550),zt=C.n(gt),Mt=function(){function tt(ir,jt){(0,w.Z)(this,tt),this.attribute=void 0,this.buffer=void 0;var Qt=jt.buffer,Et=jt.offset,we=jt.stride,Ot=jt.normalized,Kt=jt.size,dt=jt.divisor;this.buffer=Qt,this.attribute={buffer:Qt.get(),offset:Et||0,stride:we||0,normalized:Ot||!1,divisor:dt||0},Kt&&(this.attribute.size=Kt)}return(0,T.Z)(tt,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(jt){this.buffer.subData(jt)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),tt}(),Ct,rt,ot,Tt,Rt,st,bt,Ft,Ht,_t,Xt,ee,se,ue,Ut=(Ct={},(0,k.Z)(Ct,h.POINTS,"points"),(0,k.Z)(Ct,h.LINES,"lines"),(0,k.Z)(Ct,h.LINE_LOOP,"line loop"),(0,k.Z)(Ct,h.LINE_STRIP,"line strip"),(0,k.Z)(Ct,h.TRIANGLES,"triangles"),(0,k.Z)(Ct,h.TRIANGLE_FAN,"triangle fan"),(0,k.Z)(Ct,h.TRIANGLE_STRIP,"triangle strip"),Ct),oe=(rt={},(0,k.Z)(rt,h.STATIC_DRAW,"static"),(0,k.Z)(rt,h.DYNAMIC_DRAW,"dynamic"),(0,k.Z)(rt,h.STREAM_DRAW,"stream"),rt),Pe=(ot={},(0,k.Z)(ot,h.BYTE,"int8"),(0,k.Z)(ot,h.UNSIGNED_INT,"int16"),(0,k.Z)(ot,h.INT,"int32"),(0,k.Z)(ot,h.UNSIGNED_BYTE,"uint8"),(0,k.Z)(ot,h.UNSIGNED_SHORT,"uint16"),(0,k.Z)(ot,h.UNSIGNED_INT,"uint32"),(0,k.Z)(ot,h.FLOAT,"float"),ot),te=(Tt={},(0,k.Z)(Tt,h.ALPHA,"alpha"),(0,k.Z)(Tt,h.LUMINANCE,"luminance"),(0,k.Z)(Tt,h.LUMINANCE_ALPHA,"luminance alpha"),(0,k.Z)(Tt,h.RGB,"rgb"),(0,k.Z)(Tt,h.RGBA,"rgba"),(0,k.Z)(Tt,h.RGBA4,"rgba4"),(0,k.Z)(Tt,h.RGB5_A1,"rgb5 a1"),(0,k.Z)(Tt,h.RGB565,"rgb565"),(0,k.Z)(Tt,h.DEPTH_COMPONENT,"depth"),(0,k.Z)(Tt,h.DEPTH_STENCIL,"depth stencil"),Tt),ve=(Rt={},(0,k.Z)(Rt,h.DONT_CARE,"dont care"),(0,k.Z)(Rt,h.NICEST,"nice"),(0,k.Z)(Rt,h.FASTEST,"fast"),Rt),Ue=(st={},(0,k.Z)(st,h.NEAREST,"nearest"),(0,k.Z)(st,h.LINEAR,"linear"),(0,k.Z)(st,h.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,k.Z)(st,h.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,k.Z)(st,h.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,k.Z)(st,h.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),st),xe=(bt={},(0,k.Z)(bt,h.REPEAT,"repeat"),(0,k.Z)(bt,h.CLAMP_TO_EDGE,"clamp"),(0,k.Z)(bt,h.MIRRORED_REPEAT,"mirror"),bt),Re=(Ft={},(0,k.Z)(Ft,h.NONE,"none"),(0,k.Z)(Ft,h.BROWSER_DEFAULT_WEBGL,"browser"),Ft),de=(Ht={},(0,k.Z)(Ht,h.NEVER,"never"),(0,k.Z)(Ht,h.ALWAYS,"always"),(0,k.Z)(Ht,h.LESS,"less"),(0,k.Z)(Ht,h.LEQUAL,"lequal"),(0,k.Z)(Ht,h.GREATER,"greater"),(0,k.Z)(Ht,h.GEQUAL,"gequal"),(0,k.Z)(Ht,h.EQUAL,"equal"),(0,k.Z)(Ht,h.NOTEQUAL,"notequal"),Ht),ht=(_t={},(0,k.Z)(_t,h.FUNC_ADD,"add"),(0,k.Z)(_t,h.MIN_EXT,"min"),(0,k.Z)(_t,h.MAX_EXT,"max"),(0,k.Z)(_t,h.FUNC_SUBTRACT,"subtract"),(0,k.Z)(_t,h.FUNC_REVERSE_SUBTRACT,"reverse subtract"),_t),ae=(Xt={},(0,k.Z)(Xt,h.ZERO,"zero"),(0,k.Z)(Xt,h.ONE,"one"),(0,k.Z)(Xt,h.SRC_COLOR,"src color"),(0,k.Z)(Xt,h.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,k.Z)(Xt,h.SRC_ALPHA,"src alpha"),(0,k.Z)(Xt,h.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,k.Z)(Xt,h.DST_COLOR,"dst color"),(0,k.Z)(Xt,h.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,k.Z)(Xt,h.DST_ALPHA,"dst alpha"),(0,k.Z)(Xt,h.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,k.Z)(Xt,h.CONSTANT_COLOR,"constant color"),(0,k.Z)(Xt,h.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,k.Z)(Xt,h.CONSTANT_ALPHA,"constant alpha"),(0,k.Z)(Xt,h.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,k.Z)(Xt,h.SRC_ALPHA_SATURATE,"src alpha saturate"),Xt),Le=(ee={},(0,k.Z)(ee,h.NEVER,"never"),(0,k.Z)(ee,h.ALWAYS,"always"),(0,k.Z)(ee,h.LESS,"less"),(0,k.Z)(ee,h.LEQUAL,"lequal"),(0,k.Z)(ee,h.GREATER,"greater"),(0,k.Z)(ee,h.GEQUAL,"gequal"),(0,k.Z)(ee,h.EQUAL,"equal"),(0,k.Z)(ee,h.NOTEQUAL,"notequal"),ee),Ze=(se={},(0,k.Z)(se,h.ZERO,"zero"),(0,k.Z)(se,h.KEEP,"keep"),(0,k.Z)(se,h.REPLACE,"replace"),(0,k.Z)(se,h.INVERT,"invert"),(0,k.Z)(se,h.INCR,"increment"),(0,k.Z)(se,h.DECR,"decrement"),(0,k.Z)(se,h.INCR_WRAP,"increment wrap"),(0,k.Z)(se,h.DECR_WRAP,"decrement wrap"),se),qe=(ue={},(0,k.Z)(ue,h.FRONT,"front"),(0,k.Z)(ue,h.BACK,"back"),ue),fr=function(){function tt(ir,jt){(0,w.Z)(this,tt),this.buffer=void 0;var Qt=jt.data,Et=jt.usage,we=jt.type;this.buffer=ir.buffer({data:Qt,usage:oe[Et||h.STATIC_DRAW],type:Pe[we||h.UNSIGNED_BYTE]})}return(0,T.Z)(tt,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(jt){var Qt=jt.data,Et=jt.offset;this.buffer.subdata(Qt,Et)}}]),tt}(),ur=C(974902);function kr(tt,ir){var jt=Object.keys(tt);if(Object.getOwnPropertySymbols){var Qt=Object.getOwnPropertySymbols(tt);ir&&(Qt=Qt.filter(function(Et){return Object.getOwnPropertyDescriptor(tt,Et).enumerable})),jt.push.apply(jt,Qt)}return jt}function yn(tt){for(var ir=1;ir<arguments.length;ir++){var jt=arguments[ir]!=null?arguments[ir]:{};ir%2?kr(Object(jt),!0).forEach(function(Qt){(0,k.Z)(tt,Qt,jt[Qt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(jt)):kr(Object(jt)).forEach(function(Qt){Object.defineProperty(tt,Qt,Object.getOwnPropertyDescriptor(jt,Qt))})}return tt}var un=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Vr=0,$e=!1,dr=function(){function tt(ir,jt){var Qt=this;(0,w.Z)(this,tt),this.reGl=ir,this.context=jt,this.entity=F(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var Et={};this.context.uniforms.forEach(function(Bt){var $=Bt.name,at=Bt.type,R=Bt.data,M=Bt.isReferer,A=Bt.storageClass;if(A===H.StorageBuffer){if(M)Qt.textureCache[$]={data:void 0},Et["".concat($,"Size")]=function(){return R.compiledBundle.context.output.textureSize};else{Qt.textureCache[$]=Qt.calcDataTexture($,at,R);var X=Qt.textureCache[$],mt=X.textureWidth,Lt=X.isOutput;Et["".concat($,"Size")]=[mt,mt],Lt&&(Qt.outputTextureName=$,Qt.context.needPingpong&&(Qt.outputTextureName="".concat($,"Output"),Qt.textureCache[Qt.outputTextureName]=Qt.calcDataTexture($,at,R)))}Et[$]=function(){return $e&&console.log("[".concat(Qt.entity,"]: ").concat($," ").concat(Qt.textureCache[$].id)),Qt.textureCache[$].texture}}else if(A===H.Uniform){if(R&&(Array.isArray(R)||P()(R))&&R.length>16)throw new Error("invalid data type ".concat(at));Et[$]=function(){return Bt.data}}});var we=this.getOuputDataTexture(),Ot=we.textureWidth,Kt=we.texelCount;Et.u_OutputTextureSize=[Ot,Ot],Et.u_OutputTexelCount=Kt,this.context.output.textureSize=[Ot,Ot];var dt={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:Et,vert:un,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(dt)}return(0,T.Z)(tt,[{key:"run",value:function(){var jt=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){jt.computeCommand()}),$e&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var ir=(0,x.Z)(O().mark(function Qt(){var Et=this,we,Ot,Kt,dt,Bt,$,at,R;return O().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){we=Et.reGl.read()}),!we){A.next=6;break}if(Ot=this.getOuputDataTexture(),Kt=Ot.originalDataLength,dt=Ot.elementsPerTexel,Bt=Ot.typedArrayConstructor,$=Bt===void 0?Float32Array:Bt,at=[],dt!==4)for(R=0;R<we.length;R+=4)dt===1?at.push(we[R]):dt===2?at.push(we[R],we[R+1]):at.push(we[R],we[R+1],we[R+2]);else at=we;return A.abrupt("return",new $(at.slice(0,Kt)));case 6:return A.abrupt("return",new Float32Array);case 7:case"end":return A.stop()}},Qt,this)}));function jt(){return ir.apply(this,arguments)}return jt}()},{key:"confirmInput",value:function(jt,Qt){var Et;this.entity===jt.entity?(this.dynamicPingpong=!0,Et=this):Et=jt,this.textureCache[Qt].id=Et.getOuputDataTexture().id,this.textureCache[Qt].texture=Et.getOuputDataTexture().texture,$e&&console.log("[".concat(this.entity,"]: confirm input ").concat(Qt," from model ").concat(Et.entity,", ").concat(Et.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(jt,Qt){var Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,we=this.context.uniforms.find(function(Bt){var $=Bt.name;return $===jt});if(we){var Ot=this.calcDataTexture(jt,we.type,Qt),Kt=Ot.texture,dt=Ot.data;this.textureCache[jt].data=dt,this.textureCache[jt].texture=Kt}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var jt=this.context.output.name;this.textureCache[jt].id=this.getOuputDataTexture().id,this.textureCache[jt].texture=this.getOuputDataTexture().texture}var Qt=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=Qt,$e&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var jt=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=jt}},{key:"cloneDataTexture",value:function(jt){var Qt=jt.data,Et=jt.textureWidth;return yn(yn({},jt),{},{id:Vr++,texture:this.reGl.texture({width:Et,height:Et,data:Qt,type:"float"})})}},{key:"calcDataTexture",value:function(jt,Qt,Et){var we=1;Qt===Y.Vector4FloatArray&&(we=4);for(var Ot=[],Kt=0;Kt<Et.length;Kt+=we)we===1?Ot.push(Et[Kt],0,0,0):we===2?Ot.push(Et[Kt],Et[Kt+1],0,0):we===3?Ot.push(Et[Kt],Et[Kt+1],Et[Kt+2],0):we===4&&Ot.push(Et[Kt],Et[Kt+1],Et[Kt+2],Et[Kt+3]);var dt=Et.length,Bt=Math.ceil(dt/we),$=Math.ceil(Math.sqrt(Bt)),at=$*$;Bt<at&&Ot.push.apply(Ot,(0,ur.Z)(new Array((at-Bt)*4).fill(0)));var R=this.reGl.texture({width:$,height:$,data:Ot,type:"float"});return{id:Vr++,data:Ot,originalDataLength:dt,typedArrayConstructor:P()(Et)?Et.constructor:void 0,textureWidth:$,texture:R,texelCount:Bt,elementsPerTexel:we,isOutput:jt===this.context.output.name}}}]),tt}(),ar=function(){function tt(ir,jt){(0,w.Z)(this,tt),this.elements=void 0;var Qt=jt.data,Et=jt.usage,we=jt.type,Ot=jt.count;this.elements=ir.elements({data:Qt,usage:oe[Et||h.STATIC_DRAW],type:Pe[we||h.UNSIGNED_BYTE],count:Ot})}return(0,T.Z)(tt,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(jt){var Qt=jt.data;this.elements.subdata(Qt)}},{key:"destroy",value:function(){this.elements.destroy()}}]),tt}(),Qe=function(){function tt(ir,jt){(0,w.Z)(this,tt),this.framebuffer=void 0;var Qt=jt.width,Et=jt.height,we=jt.color,Ot=jt.colors,Kt=jt.depth,dt=jt.stencil,Bt={width:Qt,height:Et};Array.isArray(Ot)&&(Bt.colors=Ot.map(function($){return $.get()})),we&&typeof we!="boolean"&&(Bt.color=we.get()),this.framebuffer=ir.framebuffer(Bt)}return(0,T.Z)(tt,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(jt){var Qt=jt.width,Et=jt.height;this.framebuffer.resize(Qt,Et)}}]),tt}(),Pr=C(671002),Zr=C(968630),qr=C.n(Zr);function Sn(tt){var ir={};return Object.keys(tt).forEach(function(jt){Yn(jt,tt[jt],ir,"")}),ir}function Yn(tt,ir,jt,Qt){if(ir===null||typeof ir=="number"||typeof ir=="boolean"||Array.isArray(ir)&&typeof ir[0]=="number"||P()(ir)||ir===""||ir.resize!==void 0){jt["".concat(Qt&&Qt+".").concat(tt)]=ir;return}qr()(ir)&&Object.keys(ir).forEach(function(Et){Yn(Et,ir[Et],jt,"".concat(Qt&&Qt+".").concat(tt))}),Array.isArray(ir)&&ir.forEach(function(Et,we){Object.keys(Et).forEach(function(Ot){Yn(Ot,Et[Ot],jt,"".concat(Qt&&Qt+".").concat(tt,"[").concat(we,"]"))})})}function Ir(tt,ir){var jt=Object.keys(tt);if(Object.getOwnPropertySymbols){var Qt=Object.getOwnPropertySymbols(tt);ir&&(Qt=Qt.filter(function(Et){return Object.getOwnPropertyDescriptor(tt,Et).enumerable})),jt.push.apply(jt,Qt)}return jt}function Br(tt){for(var ir=1;ir<arguments.length;ir++){var jt=arguments[ir]!=null?arguments[ir]:{};ir%2?Ir(Object(jt),!0).forEach(function(Qt){(0,k.Z)(tt,Qt,jt[Qt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(jt)):Ir(Object(jt)).forEach(function(Qt){Object.defineProperty(tt,Qt,Object.getOwnPropertyDescriptor(jt,Qt))})}return tt}var en=function(){function tt(ir,jt){(0,w.Z)(this,tt),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=ir;var Qt=jt.vs,Et=jt.fs,we=jt.defines,Ot=jt.attributes,Kt=jt.uniforms,dt=jt.primitive,Bt=jt.count,$=jt.elements,at=jt.depth,R=jt.blend,M=jt.stencil,A=jt.cull,X=jt.instances,mt=jt.scissor,Lt=jt.viewport,Pt={};Kt&&(this.uniforms=Sn(Kt),Object.keys(Kt).forEach(function(je){Pt[je]=ir.prop(je)}));var Jt={};Object.keys(Ot).forEach(function(je){Jt[je]=Ot[je].get()});var Ie=we&&this.generateDefines(we)||"",pe={attributes:Jt,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Ie,`
`).concat(Et),uniforms:Pt,vert:`
`.concat(Ie,`
`).concat(Qt),primitive:Ut[dt===void 0?h.TRIANGLES:dt]};X&&(pe.instances=X),Bt&&(pe.count=Bt),$&&(pe.elements=$.get()),mt&&(pe.scissor=mt),Lt&&(pe.viewport=Lt),this.initDepthDrawParams({depth:at},pe),this.initBlendDrawParams({blend:R},pe),this.initStencilDrawParams({stencil:M},pe),this.initCullDrawParams({cull:A},pe),this.drawCommand=ir(pe)}return(0,T.Z)(tt,[{key:"addUniforms",value:function(jt){this.uniforms=Br(Br({},this.uniforms),Sn(jt))}},{key:"draw",value:function(jt){var Qt=Br(Br({},this.uniforms),Sn(jt.uniforms||{})),Et={};Object.keys(Qt).forEach(function(we){var Ot=(0,Pr.Z)(Qt[we]);Ot==="boolean"||Ot==="number"||Array.isArray(Qt[we])||Qt[we].BYTES_PER_ELEMENT?Et[we]=Qt[we]:Ot==="string"||(Et[we]=Qt[we].get())}),this.drawCommand(Et)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(jt,Qt){var Et=jt.depth;Et&&(Qt.depth={enable:Et.enable===void 0?!0:!!Et.enable,mask:Et.mask===void 0?!0:!!Et.mask,func:de[Et.func||h.LESS],range:Et.range||[0,1]})}},{key:"initBlendDrawParams",value:function(jt,Qt){var Et=jt.blend;if(Et){var we=Et.enable,Ot=Et.func,Kt=Et.equation,dt=Et.color,Bt=dt===void 0?[0,0,0,0]:dt;Qt.blend={enable:!!we,func:{srcRGB:ae[Ot&&Ot.srcRGB||h.SRC_ALPHA],srcAlpha:ae[Ot&&Ot.srcAlpha||h.SRC_ALPHA],dstRGB:ae[Ot&&Ot.dstRGB||h.ONE_MINUS_SRC_ALPHA],dstAlpha:ae[Ot&&Ot.dstAlpha||h.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ht[Kt&&Kt.rgb||h.FUNC_ADD],alpha:ht[Kt&&Kt.alpha||h.FUNC_ADD]},color:Bt}}}},{key:"initStencilDrawParams",value:function(jt,Qt){var Et=jt.stencil;if(Et){var we=Et.enable,Ot=Et.mask,Kt=Ot===void 0?-1:Ot,dt=Et.func,Bt=dt===void 0?{cmp:h.ALWAYS,ref:0,mask:-1}:dt,$=Et.opFront,at=$===void 0?{fail:h.KEEP,zfail:h.KEEP,zpass:h.KEEP}:$,R=Et.opBack,M=R===void 0?{fail:h.KEEP,zfail:h.KEEP,zpass:h.KEEP}:R;Qt.stencil={enable:!!we,mask:Kt,func:Br(Br({},Bt),{},{cmp:Le[Bt.cmp]}),opFront:{fail:Ze[at.fail],zfail:Ze[at.zfail],zpass:Ze[at.zpass]},opBack:{fail:Ze[M.fail],zfail:Ze[M.zfail],zpass:Ze[M.zpass]}}}}},{key:"initCullDrawParams",value:function(jt,Qt){var Et=jt.cull;if(Et){var we=Et.enable,Ot=Et.face,Kt=Ot===void 0?h.BACK:Ot;Qt.cull={enable:!!we,face:qe[Kt]}}}},{key:"generateDefines",value:function(jt){return Object.keys(jt).map(function(Qt){return"#define ".concat(Qt," ").concat(Number(jt[Qt]))}).join(`
`)}}]),tt}(),hn=function(){function tt(ir,jt){(0,w.Z)(this,tt),this.texture=void 0,this.width=void 0,this.height=void 0;var Qt=jt.data,Et=jt.type,we=Et===void 0?h.UNSIGNED_BYTE:Et,Ot=jt.width,Kt=jt.height,dt=jt.flipY,Bt=dt===void 0?!1:dt,$=jt.format,at=$===void 0?h.RGBA:$,R=jt.mipmap,M=R===void 0?!1:R,A=jt.wrapS,X=A===void 0?h.CLAMP_TO_EDGE:A,mt=jt.wrapT,Lt=mt===void 0?h.CLAMP_TO_EDGE:mt,Pt=jt.aniso,Jt=Pt===void 0?0:Pt,Ie=jt.alignment,pe=Ie===void 0?1:Ie,je=jt.premultiplyAlpha,br=je===void 0?!1:je,Je=jt.mag,zr=Je===void 0?h.NEAREST:Je,gn=jt.min,tr=gn===void 0?h.NEAREST:gn,xr=jt.colorSpace,Ur=xr===void 0?h.BROWSER_DEFAULT_WEBGL:xr;this.width=Ot,this.height=Kt;var Nr={width:Ot,height:Kt,type:Pe[we],format:te[at],wrapS:xe[X],wrapT:xe[Lt],mag:Ue[zr],min:Ue[tr],alignment:pe,flipY:Bt,colorSpace:Re[Ur],premultiplyAlpha:br,aniso:Jt};Qt&&(Nr.data=Qt),typeof M=="number"?Nr.mipmap=ve[M]:typeof M=="boolean"&&(Nr.mipmap=M),this.texture=ir.texture(Nr)}return(0,T.Z)(tt,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(jt){var Qt=jt.width,Et=jt.height;this.texture.resize(Qt,Et),this.width=Qt,this.height=Et}},{key:"destroy",value:function(){this.texture.destroy()}}]),tt}(),xn=function(){function tt(){var ir=this;(0,w.Z)(this,tt),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var jt=(0,x.Z)(O().mark(function Qt(Et){return O().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:if(!Et.uniforms){Ot.next=3;break}return Ot.next=3,Promise.all(Object.keys(Et.uniforms).map(function(){var Kt=(0,x.Z)(O().mark(function dt(Bt){var $;return O().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!(Et.uniforms[Bt]&&Et.uniforms[Bt].load!==void 0)){R.next=5;break}return R.next=3,Et.uniforms[Bt].load();case 3:$=R.sent,Et.uniforms[Bt]=$;case 5:case"end":return R.stop()}},dt)}));return function(dt){return Kt.apply(this,arguments)}}()));case 3:return Ot.abrupt("return",new en(ir.gl,Et));case 4:case"end":return Ot.stop()}},Qt)}));return function(Qt){return jt.apply(this,arguments)}}(),this.createAttribute=function(jt){return new Mt(ir.gl,jt)},this.createBuffer=function(jt){return new fr(ir.gl,jt)},this.createElements=function(jt){return new ar(ir.gl,jt)},this.createTexture2D=function(jt){return new hn(ir.gl,jt)},this.createFramebuffer=function(jt){return new Qe(ir.gl,jt)},this.useFramebuffer=function(jt,Qt){ir.gl({framebuffer:jt?jt.get():null})(Qt)},this.createComputeModel=function(){var jt=(0,x.Z)(O().mark(function Qt(Et){return O().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:return Ot.abrupt("return",new dr(ir.gl,Et));case 1:case"end":return Ot.stop()}},Qt)}));return function(Qt){return jt.apply(this,arguments)}}(),this.clear=function(jt){var Qt=jt.color,Et=jt.depth,we=jt.stencil,Ot=jt.framebuffer,Kt=Ot===void 0?null:Ot,dt={color:Qt,depth:Et,stencil:we};dt.framebuffer=Kt===null?Kt:Kt.get(),ir.gl.clear(dt)},this.setScissor=function(jt){ir.gl&&ir.gl._gl&&(jt.enable&&jt.box?(ir.gl._gl.enable(h.SCISSOR_TEST),ir.gl._gl.scissor(jt.box.x,jt.box.y,jt.box.width,jt.box.height)):ir.gl._gl.disable(h.SCISSOR_TEST),ir.gl._refresh())},this.viewport=function(jt){var Qt=jt.x,Et=jt.y,we=jt.width,Ot=jt.height;ir.gl&&ir.gl._gl&&(ir.gl._gl.viewport(Qt,Et,we,Ot),ir.gl._refresh())},this.readPixels=function(jt){var Qt=jt.framebuffer,Et=jt.x,we=jt.y,Ot=jt.width,Kt=jt.height,dt={x:Et,y:we,width:Ot,height:Kt};return Qt&&(dt.framebuffer=Qt.get()),ir.gl.read(dt)},this.getCanvas=function(){return ir.$canvas},this.getGLContext=function(){return ir.gl._gl},this.destroy=function(){ir.gl&&(ir.gl.destroy(),ir.inited=!1)}}return(0,T.Z)(tt,[{key:"init",value:function(){var ir=(0,x.Z)(O().mark(function Qt(Et){return O().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:if(!this.inited){Ot.next=2;break}return Ot.abrupt("return");case 2:return this.$canvas=Et.canvas,Ot.next=5,new Promise(function(Kt,dt){zt()({canvas:Et.canvas,attributes:{alpha:!0,antialias:Et.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function($,at){($||!at)&&dt($),Kt(at)}})});case 5:this.gl=Ot.sent,this.inited=!0;case 7:case"end":return Ot.stop()}},Qt,this)}));function jt(Qt){return ir.apply(this,arguments)}return jt}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),tt}(),_n=function(){function tt(){(0,w.Z)(this,tt),this.engine=void 0,this.configService=new K}return(0,T.Z)(tt,[{key:"setConfig",value:function(jt){this.configService.set(jt)}},{key:"setEngine",value:function(jt){this.engine=jt}},{key:"createEntity",value:function(){return F()}},{key:"createKernel",value:function(jt){var Qt=new yt(this.engine,this.configService);return typeof jt=="string"?Qt.setBundle(JSON.parse(jt)):Qt.setBundle(jt),Qt.init(),Qt}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Qt=new tt;return Qt.setConfig(jt),Qt.setEngine(new xn),Qt}}]),tt}()},448976:function(He,z,C){"use strict";C.d(z,{ZP:function(){return US}});var x={};C.r(x),C.d(x,{GADDI:function(){return ao},Stack:function(){return lo},breadthFirstSearch:function(){return Pe},connectedComponent:function(){return Ue},cosineSimilarity:function(){return Jt},default:function(){return io},depthFirstSearch:function(){return Ze},detectAllCycles:function(){return kr},detectAllDirectedCycle:function(){return ur},detectAllUndirectedCycle:function(){return fr},detectCycle:function(){return yn},detectDirectedCycle:function(){return _i},dijkstra:function(){return $e},findAllPath:function(){return Qe},findShortestPath:function(){return ar},floydWarshall:function(){return Zr},getAdjMatrix:function(){return Tt},getDegree:function(){return Re},getInDegree:function(){return de},getNeighbors:function(){return Xt},getOutDegree:function(){return ht},iLouvain:function(){return R},kCore:function(){return A},kMeans:function(){return Lt},labelPropagation:function(){return Sn},louvain:function(){return $},minimumSpanningTree:function(){return Nr},nodesCosineSimilarity:function(){return pe},pageRank:function(){return Wt}});var k={};C.r(k),C.d(k,{Line:function(){return bi},applyMatrix:function(){return mn},compare:function(){return Ge},distance:function(){return Zn},floydWarshall:function(){return ya},fractionToLine:function(){return Wi},getAdjMatrix:function(){return vi},getBBoxBoundLine:function(){return xi},getCircleCenterByPoints:function(){return sa},getCircleIntersectByPoint:function(){return Or},getDegree:function(){return za},getEllipseIntersectByPoint:function(){return cn},getLineIntersect:function(){return Fr},getPointsCenter:function(){return Io},getRectIntersectByPoint:function(){return Gr},intersectBBox:function(){return La},invertMatrix:function(){return Bn},isPointInPolygon:function(){return di},isPointsOverlap:function(){return $i},isPolygonsIntersect:function(){return Ga},itemIntersectByLine:function(){return ho},lerp:function(){return oo},lerpArray:function(){return Qa},move:function(){return oa},pointLineDistance:function(){return Yi},pointLineSquareDist:function(){return is},pointRectSquareDist:function(){return qa},rotate:function(){return $a},scale:function(){return oi},scaleMatrix:function(){return va},squareDist:function(){return Xo},translate:function(){return Ma}});var w={};C.r(w),C.d(w,{cloneBesidesImg:function(){return Bs},getAnimateCfgWithCallback:function(){return ms},getBBox:function(){return Ai},getComboBBox:function(){return Ws},getLabelPosition:function(){return Go},getLetterWidth:function(){return ks},getLoopCfgs:function(){return Oo},getTextSize:function(){return ls},plainCombosToTrees:function(){return Qs},reconstructTree:function(){return Js},shouldRefreshEdge:function(){return Ds},traverseTree:function(){return ji},traverseTreeUp:function(){return bo},truncateLabelByLength:function(){return qs}});var T={};C.r(T),C.d(T,{catmullRomToBezier:function(){return wt},fillPath:function(){return Mo},fillPathByDiff:function(){return Bi},formatPath:function(){return ds},intersection:function(){return Do},parsePathArray:function(){return gr},parsePathString:function(){return G},pathToAbsolute:function(){return qt},pathToCurve:function(){return Fe},rectPath:function(){return sn}});var L={};C.r(L),C.d(L,{easeBack:function(){return Zl},easeBackIn:function(){return kc},easeBackInOut:function(){return Zl},easeBackOut:function(){return hd},easeBounce:function(){return bu},easeBounceIn:function(){return Hl},easeBounceInOut:function(){return nf},easeBounceOut:function(){return bu},easeCircle:function(){return Kf},easeCircleIn:function(){return gl},easeCircleInOut:function(){return Kf},easeCircleOut:function(){return Dc},easeCubic:function(){return dl},easeCubicIn:function(){return dd},easeCubicInOut:function(){return dl},easeCubicOut:function(){return Ul},easeElastic:function(){return yl},easeElasticIn:function(){return Kl},easeElasticInOut:function(){return vd},easeElasticOut:function(){return yl},easeExp:function(){return Zf},easeExpIn:function(){return Ic},easeExpInOut:function(){return Zf},easeExpOut:function(){return Oc},easeLinear:function(){return zl},easePoly:function(){return Xl},easePolyIn:function(){return Wl},easePolyInOut:function(){return Xl},easePolyOut:function(){return Yl},easeQuad:function(){return ll},easeQuadIn:function(){return ef},easeQuadInOut:function(){return ll},easeQuadOut:function(){return Gl},easeSin:function(){return Ac},easeSinIn:function(){return jl},easeSinInOut:function(){return Ac},easeSinOut:function(){return Vl}});var P={};C.r(P),C.d(P,{calculationItemsBBox:function(){return Uv},cloneEvent:function(){return nm},formatPadding:function(){return Nh},isNaN:function(){return Tf},isViewportChanged:function(){return am},processParallelEdges:function(){return im},uniqueId:function(){return Ph}});var p={};C.r(p),C.d(p,{getClosedSpline:function(){return Yh},getControlPoint:function(){return Kd},getSpline:function(){return np},getStarPath:function(){return _m},paddedHull:function(){return sp},pathToPoints:function(){return Wh},pointsToPolygon:function(){return Mm},roundedHull:function(){return Xh}});var m={};C.r(m),C.d(m,{defaultSubjectColors:function(){return Vm}});var S={};C.r(S),C.d(S,{isForce:function(){return yp}});var y={};C.r(y),C.d(y,{Base:function(){return af},Circle:function(){return my},Ellipse:function(){return xy},Image:function(){return Ey},Line:function(){return Sy},Marker:function(){return Cy},Path:function(){return nv},Polygon:function(){return Ry},Polyline:function(){return By},Rect:function(){return Uy},Text:function(){return Yy}});var g={};C.r(g),C.d(g,{Base:function(){return Xu},Circle:function(){return qy},Dom:function(){return Jy},Ellipse:function(){return e1},Image:function(){return n1},Line:function(){return i1},Marker:function(){return s1},Path:function(){return f1},Polygon:function(){return l1},Polyline:function(){return h1},Rect:function(){return y1},Text:function(){return S1}});var O={};C.r(O),C.d(O,{getColorSetsBySubjectColors:function(){return q1},getColorsWithSubjectColor:function(){return sv},mixColor:function(){return Is}});var E={};C.r(E),C.d(E,{arrayToTextureData:function(){return cx},attributesToTextureData:function(){return fx},buildTextureData:function(){return ox},buildTextureDataWithOneEdgeAttr:function(){return sx},buildTextureDataWithTwoEdgeAttr:function(){return ux},proccessToFunc:function(){return ix},radialLayout:function(){return lx}});var D={};C.r(D),C.d(D,{gpuDetector:function(){return sg}});var F={};C.r(F),C.d(F,{getBrowserName:function(){return ug}});var W={};C.r(W),C.d(W,{assign:function(){return Hc},default:function(){return Xg},defaultI18n:function(){return yv},format:function(){return Wg},parse:function(){return Yg},setGlobalDateI18n:function(){return Ng},setGlobalDateMasks:function(){return Ug}});var b=C(197582),h=C(413810),K={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,h.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,h.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},U=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,h.clone)(K);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,h.each)(u,function(c,l){f[l]=(0,h.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),Y=U,Z=Y,H="*",q=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[H]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var l=u[c],_=l.callback,I=l.once;I&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),_.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),Q=q,J=C(935600);function ft(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return J.fromTranslation(r,t),J.multiply(i,r,e)}function nt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return J.fromRotation(r,t),J.multiply(i,r,e)}function yt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return J.fromScaling(r,t),J.multiply(i,r,e)}function gt(i,e,t){return J.multiply(i,t,e)}function zt(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":ft(t,t,[a[1],a[2]]);break;case"s":yt(t,t,[a[1],a[2]]);break;case"r":nt(t,t,a[1]);break;case"m":gt(t,t,a[1]);break;default:break}}return t}function Mt(i,e){return i[0]*e[1]-e[0]*i[1]}function Ct(i,e,t){var r=vec2.angle(i,e),n=Mt(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function rt(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var ot=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];!c&&c!==0||!l&&l!==0||(a[c][l]=1,t||(a[l][c]=1))}),a},Tt=ot,Rt=function(e,t){return e===t},st=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),bt=function(){function i(e){e===void 0&&(e=Rt),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new st(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new st(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),Ft=bt,Ht=function(){function i(){this.linkedList=new Ft}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),_t=Ht,Xt=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},ee=function(e,t){return t.filter(function(r){return r.source===e})},se=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},ue=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function Ut(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var oe=function(e,t,r,n){n===void 0&&(n=!0);var a=Ut(r),o=new _t,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var _=o.dequeue();a.enter({current:_,previous:f}),Xt(_,u,n?"target":void 0).forEach(function(I){a.allowTraversal({previous:f,current:_,next:I})&&o.enqueue(I)}),a.leave({current:_,previous:f}),f=_};!o.isEmpty();)c()},Pe=oe,te=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function I(B){u.push(B),s[B.id]=!0;for(var j=Xt(B.id,a),et=function(pt){var St=j[pt];if(!s[St]){var Vt=r.filter(function(ne){return ne.id===St});Vt.length>0&&I(Vt[0])}},ut=0;ut<j.length;++ut)et(ut)},c=0;c<r.length;c++){var l=r[c];if(!s[l.id]){f(l);for(var _=[];u.length>0;)_.push(u.pop());o.push(_)}}return o},ve=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],l=0,_=function et(ut){u[ut.id]=l,f[ut.id]=l,l+=1,o.push(ut),s[ut.id]=!0;for(var ct=Xt(ut.id,a,"target").filter(function(re){return r.map(function(Ce){return Ce.id}).indexOf(re)>-1}),pt=function(Ce){var We=ct[Ce];if(!u[We]&&u[We]!==0){var Ne=r.filter(function(rr){return rr.id===We});Ne.length>0&&et(Ne[0]),f[ut.id]=Math.min(f[ut.id],f[We])}else s[We]&&(f[ut.id]=Math.min(f[ut.id],u[We]))},St=0;St<ct.length;St++)pt(St);if(f[ut.id]===u[ut.id]){for(var Vt=[];o.length>0;){var ne=o.pop();if(s[ne.id]=!1,Vt.push(ne),ne===ut)break}Vt.length>0&&c.push(Vt)}},I=0,B=r;I<B.length;I++){var j=B[I];!u[j.id]&&u[j.id]!==0&&_(j)}return c};function Ue(i,e){return e?ve(i):te(i)}var xe=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},Re=xe,de=function(e,t){var r=xe(e);return r[t]?xe(e)[t].inDegree:0},ht=function(e,t){var r=xe(e);return r[t]?xe(e)[t].outDegree:0};function ae(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function Le(i,e,t,r){r.enter({current:e,previous:t});var n=i.edges,a=n===void 0?[]:n;Xt(e,a,"target").forEach(function(o){r.allowTraversal({previous:t,current:e,next:o})&&Le(i,o,e,r)}),r.leave({current:e,previous:t})}function Ze(i,e,t){Le(i,e,"",ae(t))}var qe=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var f={enter:function(_){var I=_.current,B=_.previous;if(s[I]){t={};for(var j=I,et=B;et!==I;)t[j]=et,j=et,et=a[et];t[j]=et}else s[I]=I,delete o[I],a[I]=B},leave:function(_){var I=_.current;u[I]=I,delete s[I]},allowTraversal:function(_){var I=_.next;return t?!1:!u[I]}};Object.keys(o).length;){var c=Object.keys(o)[0];Ze(e,c,f)}return t},fr=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=Ue(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var l=c[0],_=l.id,I=[l],B=(n={},n[_]=l,n),j=(a={},a[_]=new Set,a);I.length>0;)for(var et=I.pop(),ut=et.id,ct=Xt(ut,e.edges),pt=function(ne){var re,Ce=ct[ne],We=e.nodes.find(function(In){return In.id===Ce});if(Ce===ut)o.push((re={},re[Ce]=et,re));else if(!(Ce in j))B[Ce]=et,I.push(We),j[Ce]=new Set([et]);else if(!j[ut].has(We)){for(var Ne=!0,rr=[We,et],wr=B[ut];j[Ce].size&&!j[Ce].has(wr)&&(rr.push(wr),wr!==B[wr.id]);)wr=B[wr.id];if(rr.push(wr),t&&r?(Ne=!1,rr.findIndex(function(In){return t.indexOf(In.id)>-1})>-1&&(Ne=!0)):t&&!r&&rr.findIndex(function(In){return t.indexOf(In.id)>-1})>-1&&(Ne=!1),Ne){for(var dn={},Gn=1;Gn<rr.length;Gn+=1)dn[rr[Gn-1].id]=rr[Gn];rr.length&&(dn[rr[rr.length-1].id]=rr[0]),o.push(dn)}j[Ce].add(et)}},St=0;St<ct.length;St+=1)pt(St)}return o},ur=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function(wr){for(var dn=[wr];dn.length>0;){var Gn=dn.pop();a.has(Gn)&&(a.delete(Gn),o[Gn.id].forEach(function(In){dn.push(In)}),o[Gn.id].clear())}},l=function rr(wr,dn,Gn){var In=!1;if(t&&r===!1&&t.indexOf(wr.id)>-1)return In;n.push(wr),a.add(wr);for(var an=Gn[wr.id],ta=0;ta<an.length;ta+=1){var $n=u[an[ta]];if($n===dn){for(var on={},Tn=1;Tn<n.length;Tn+=1)on[n[Tn-1].id]=n[Tn];n.length&&(on[n[n.length-1].id]=n[0]),s.push(on),In=!0}else a.has($n)||rr($n,dn,Gn)&&(In=!0)}if(In)c(wr);else for(var ta=0;ta<an.length;ta+=1){var $n=u[an[ta]];o[$n.id].has(wr)||o[$n.id].add(wr)}return n.pop(),In},_=e.nodes,I=_===void 0?[]:_,B=0;B<I.length;B+=1){var j=I[B],et=j.id;f[et]=B,u[B]=j}if(t&&r)for(var ut=function(wr){var dn=t[wr];f[I[wr].id]=f[dn],f[dn]=0,u[0]=I.find(function(Gn){return Gn.id===dn}),u[f[I[wr].id]]=I[wr]},B=0;B<t.length;B++)ut(B);for(var ct=function(wr){for(var dn,Gn,In=1/0,an=0;an<wr.length;an+=1)for(var ta=wr[an],$n=0;$n<ta.length;$n++){var on=f[ta[$n].id];on<In&&(In=on,Gn=an)}for(var Tn=wr[Gn],Un=[],an=0;an<Tn.length;an+=1){var Wn=Tn[an];Un[Wn.id]=[];for(var ia=0,da=Xt(Wn.id,e.edges,"target").filter(function(Ji){return Tn.map(function(Di){return Di.id}).indexOf(Ji)>-1});ia<da.length;ia++){var Wa=da[ia];Wa===Wn.id&&!(r===!1&&t.indexOf(Wn.id)>-1)?s.push((dn={},dn[Wn.id]=Wn,dn)):Un[Wn.id].push(f[Wa])}}return{component:Tn,adjList:Un,minIdx:In}},pt=0;pt<I.length;){var St=I.filter(function(rr){return f[rr.id]>=pt}),Vt=ve({nodes:St,edges:e.edges}).filter(function(rr){return rr.length>1});if(Vt.length===0)break;var ne=ct(Vt),re=ne.minIdx,Ce=ne.adjList,We=ne.component;if(We.length>1){We.forEach(function(rr){o[rr.id]=new Set});var Ne=u[re];if(t&&r&&t.indexOf(Ne.id)===-1)return s;l(Ne,Ne,Ce),pt=re+1}else break}return s},kr=function(e,t,r,n){return n===void 0&&(n=!0),t?ur(e,r,n):fr(e,r,n)},yn=qe,un=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},Vr=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},l={},_={};o.forEach(function(pt,St){var Vt=pt.id;f.push(Vt),l[Vt]=1/0,Vt===t&&(l[Vt]=0)});for(var I=o.length,B=function(St){var Vt=un(l,o,c),ne=Vt.id;if(c[ne]=!0,l[ne]===1/0)return"continue";var re=[];r?re=ee(ne,u):re=se(ne,u),re.forEach(function(Ce){var We=Ce.target,Ne=Ce.source,rr=We===ne?Ne:We,wr=n&&Ce[n]?Ce[n]:1;l[rr]>l[Vt.id]+wr?(l[rr]=l[Vt.id]+wr,_[rr]=[Vt.id]):l[rr]===l[Vt.id]+wr&&_[rr].push(Vt.id)})},j=0;j<I;j++)B(j);_[t]=[t];var et={};for(var ut in l)l[ut]!==1/0&&dr(t,ut,_,et);var ct={};for(var ut in et)ct[ut]=et[ut][0];return{length:l,path:ct,allPath:et}},$e=Vr;function dr(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=dr(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var l=c[f];(0,h.isArray)(l)?n.push((0,b.__spreadArray)((0,b.__spreadArray)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var ar=function(e,t,r,n,a){var o=$e(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},Qe=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],l=[],_=n?Xt(t,s,"target"):Xt(t,s);for(c.push(_);u.length>0&&c.length>0;){var I=c[c.length-1];if(I.length){var B=I.shift();B&&(u.push(B),f[B]=!0,_=n?Xt(B,s,"target"):Xt(B,s),c.push(_.filter(function(ut){return!f[ut]})))}else{var j=u.pop();f[j]=!1,c.pop();continue}if(u[u.length-1]===r){var et=u.map(function(ct){return ct});l.push(et);var j=u.pop();f[j]=!1,c.pop()}}return l},Pr=function(e,t){for(var r=Tt(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},Zr=Pr,qr=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(St,Vt){var ne=ue();St.clusterId=ne,f[ne]={id:ne,nodes:[St]},c[St.id]={node:St,idx:Vt}});var l=Tt(e,t),_=[],I={};l.forEach(function(St,Vt){var ne=0,re=o[Vt].id;I[re]={},St.forEach(function(Ce,We){if(Ce){ne+=Ce;var Ne=o[We].id;I[re][Ne]=Ce}}),_.push(ne)});for(var B=0,j=function(){var Vt=!1;if(o.forEach(function(ne){var re={};Object.keys(I[ne.id]).forEach(function(In){var an=I[ne.id][In],ta=c[In].node,$n=ta.clusterId;re[$n]||(re[$n]=0),re[$n]+=an});var Ce=-1/0,We=[];if(Object.keys(re).forEach(function(In){Ce<re[In]?(Ce=re[In],We=[In]):Ce===re[In]&&We.push(In)}),!(We.length===1&&We[0]===ne.clusterId)){var Ne=We.indexOf(ne.clusterId);if(Ne>=0&&We.splice(Ne,1),We&&We.length){Vt=!0;var rr=f[ne.clusterId],wr=rr.nodes.indexOf(ne);rr.nodes.splice(wr,1);var dn=Math.floor(Math.random()*We.length),Gn=f[We[dn]];Gn.nodes.push(ne),ne.clusterId=Gn.id}}}),!Vt)return"break";B++};B<n;){var et=j();if(et==="break")break}Object.keys(f).forEach(function(St){var Vt=f[St];(!Vt.nodes||!Vt.nodes.length)&&delete f[St]});var ut=[],ct={};u.forEach(function(St){var Vt=St.source,ne=St.target,re=St[r]||1,Ce=c[Vt].node.clusterId,We=c[ne].node.clusterId,Ne="".concat(Ce,"---").concat(We);if(ct[Ne])ct[Ne].weight+=re,ct[Ne].count++;else{var rr={source:Ce,target:We,weight:re,count:1};ct[Ne]=rr,ut.push(rr)}});var pt=[];return Object.keys(f).forEach(function(St){pt.push(f[St])}),{clusters:pt,clusterEdges:ut}},Sn=qr,Yn=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,h.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),Ir=Yn,Br=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,en=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,hn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(Br)&&!"".concat(a.properties[o]).match(en)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},xn=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},_n=function(e){for(var t=hn(e),r=[],n=0;n<e.length;n++)r[n]=xn(e[n].properties,t);return r},tt=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},ir={getAllSortProperties:hn,getPropertyWeight:_n,getAllProperties:tt},jt;(function(i){i.EuclideanDistance="euclideanDistance"})(jt||(jt={}));var Qt=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,h.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,h.uniq)(s))}),a},Et=function(e,t,r){var n=Qt(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(l){var _=u[l],I=n[l],B=I.findIndex(function(ut){return _===ut}),j=[];if(s)j.push(_);else for(var et=0;et<I.length;et++)et===B?j.push(1):j.push(0);c=c.concat(j)}),a[f]=c}),a},we=function(e,t,r,n){r===void 0&&(r=jt.EuclideanDistance);var a=0;switch(r){case jt.EuclideanDistance:a=new Ir(e).euclideanDistance(new Ir(t));break;default:break}return a},Ot={getAllKeyValueMap:Qt,oneHot:Et,getDistance:we},Kt=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var l=e[c].clusterId;if(f===l){var _=t[u][c]||0,I=r[u]||0,B=r[c]||0;s+=_-I*B/o}}return s*=1/o,s},dt=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new Ir([]),a=0;a<r;a++)n=n.add(new Ir(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new Ir(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new Ir(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){c[a][l]=0;continue}var _=new Ir(t[l]);c[a][l]=u.squareEuclideanDistance(_),e[a].clusterInertial+=c[a][l]}}for(var I=0,B=2*r*s,a=0;a<r;a++)for(var j=e[a].clusterId,l=0;l<r;l++){var et=e[l].clusterId;if(!(a===l||j!==et)){var ut=e[a].clusterInertial*e[l].clusterInertial/Math.pow(B,2)-c[a][l]/B;I+=ut}}return Number(I.toFixed(4))},Bt=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,l=c===void 0?[]:c,_=e.edges,I=_===void 0?[]:_,B=[];if(a){l.forEach(function(on,Tn){on.properties=on.properties||{},on.originIndex=Tn});var j=[];l.every(function(on){return on.hasOwnProperty("nodeType")})&&(j=Array.from(new Set(l.map(function(on){return on.nodeType}))),l.forEach(function(on){on.properties.nodeType=j.findIndex(function(Tn){return Tn===on.nodeType})}));var et=tt(l,o);B=Et(et,s,u)}var ut=1,ct={},pt={};l.forEach(function(on,Tn){var Un=String(ut++);on.clusterId=Un,ct[Un]={id:Un,nodes:[on]},pt[on.id]={node:on,idx:Tn}});var St=Tt(e,t),Vt=[],ne={},re=0;St.forEach(function(on,Tn){var Un=0,Wn=l[Tn].id;ne[Wn]={},on.forEach(function(ia,da){if(ia){Un+=ia;var Wa=l[da].id;ne[Wn][Wa]=ia,re+=ia}}),Vt.push(Un)}),re/=2;for(var Ce=1/0,We=1/0,Ne=0,rr=[],wr={};;){a&&l.every(function(on){return on.hasOwnProperty("properties")})?Ce=Kt(l,St,Vt,re)+dt(l,B)*f:Ce=Kt(l,St,Vt,re),Ne===0&&(We=Ce,rr=l,wr=ct);var dn=Ce>0&&Ce>We&&Ce-We<n;if(Ce>We&&(rr=l.map(function(on){return{node:on,clusterId:on.clusterId}}),wr=(0,h.clone)(ct),We=Ce),dn||Ne>100)break;Ne++,Object.keys(ct).forEach(function(on){var Tn=0;I.forEach(function(Un){var Wn=Un.source,ia=Un.target,da=pt[Wn].node.clusterId,Wa=pt[ia].node.clusterId;(da===on&&Wa!==on||Wa===on&&da!==on)&&(Tn=Tn+(Un[r]||1))}),ct[on].sumTot=Tn}),l.forEach(function(on,Tn){var Un=ct[on.clusterId],Wn=0,ia,da=Vt[Tn]/(2*re),Wa=0,ai=Un.nodes;ai.forEach(function(Ss){var Ms=pt[Ss.id].idx;Wa+=St[Tn][Ms]||0});var Ji=Wa-Un.sumTot*da,Di=ai.filter(function(Ss){return Ss.id!==on.id}),to=[];Di.forEach(function(Ss,Ms){to[Ms]=B[Ss.originIndex]});var uo=dt(Di,B)*f,Yo=ne[on.id];if(Object.keys(Yo).forEach(function(Ss){var Ms=pt[Ss].node,Mu=Ms.clusterId;if(Mu!==on.clusterId){var Us=ct[Mu],iu=Us.nodes;if(!(!iu||!iu.length)){var yi=0;iu.forEach(function(Si){var Ti=pt[Si.id].idx;yi+=St[Tn][Ti]||0});var Zi=yi-Us.sumTot*da,pi=iu.concat([on]),Ki=[];pi.forEach(function(Si,Ti){Ki[Ti]=B[Si.originIndex]});var _o=dt(pi,B)*f,Ia=Zi-Ji;a&&(Ia=Zi+_o-(Ji+uo)),Ia>Wn&&(Wn=Ia,ia=Us)}}}),Wn>0){ia.nodes.push(on);var Lo=on.clusterId;on.clusterId=ia.id;var Hu=Un.nodes.indexOf(on);Un.nodes.splice(Hu,1);var ws=0,Zu=0;I.forEach(function(Ss){var Ms=Ss.source,Mu=Ss.target,Us=pt[Ms].node.clusterId,iu=pt[Mu].node.clusterId;(Us===ia.id&&iu!==ia.id||iu===ia.id&&Us!==ia.id)&&(ws=ws+(Ss[r]||1)),(Us===Lo&&iu!==Lo||iu===Lo&&Us!==Lo)&&(Zu=Zu+(Ss[r]||1))}),ia.sumTot=ws,Un.sumTot=Zu}})}var Gn={},In=0;Object.keys(wr).forEach(function(on){var Tn=wr[on];if(!Tn.nodes||!Tn.nodes.length){delete wr[on];return}var Un=String(In+1);Un!==on&&(Tn.id=Un,Tn.nodes=Tn.nodes.map(function(Wn){return{id:Wn.id,clusterId:Un}}),wr[Un]=Tn,Gn[on]=Un,delete wr[on],In++)}),rr.forEach(function(on){var Tn=on.node,Un=on.clusterId;Tn&&(Tn.clusterId=Un,Tn.clusterId&&Gn[Tn.clusterId]&&(Tn.clusterId=Gn[Tn.clusterId]))});var an=[],ta={};I.forEach(function(on){var Tn=on.source,Un=on.target,Wn=on[r]||1,ia=pt[Tn].node.clusterId,da=pt[Un].node.clusterId;if(!(!ia||!da)){var Wa="".concat(ia,"---").concat(da);if(ta[Wa])ta[Wa].weight+=Wn,ta[Wa].count++;else{var ai={source:ia,target:da,weight:Wn,count:1};ta[Wa]=ai,an.push(ai)}}});var $n=[];return Object.keys(wr).forEach(function(on){$n.push(wr[on])}),{clusters:$n,clusterEdges:an}},$=Bt,at=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),$(e,t,r,n,!0,a,o,s,u)},R=at,M=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,h.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var _=Re({nodes:o,edges:u}),I=Object.keys(_);I.sort(function(et,ut){var ct,pt;return((ct=_[et])===null||ct===void 0?void 0:ct.degree)-((pt=_[ut])===null||pt===void 0?void 0:pt.degree)});var B=I[0];if(!o.length||((r=_[B])===null||r===void 0?void 0:r.degree)>=t)return"break";var j=o.findIndex(function(et){return et.id===B});o.splice(j,1),u=u.filter(function(et){return!(et.source===B||et.target===B)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},A=M,X=function(e,t,r){var n=[];switch(e){case jt.EuclideanDistance:n=t[r];break;default:n=[];break}return n},mt=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=jt.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===jt.EuclideanDistance&&!u.every(function(Un){return Un.hasOwnProperty(r)}))return l;var _=[],I=[];if(o===jt.EuclideanDistance&&(_=tt(u,r),I=Et(_,n,a)),!I.length)return l;for(var B=(0,h.uniq)(I.map(function(Un){return Un.join("")})),j=Math.min(t,u.length,B.length),et=0;et<u.length;et++)u[et].originIndex=et;for(var ut=[],ct=[],pt=[],et=0;et<j;et++)if(et===0){var St=Math.floor(Math.random()*u.length);switch(o){case jt.EuclideanDistance:ut[et]=I[St];break;default:ut[et]=[];break}ct.push(St),pt[et]=[u[St]],u[St].clusterId=String(et)}else{for(var Vt=-1/0,ne=0,re=function(ia){if(!ct.includes(ia)){for(var da=0,Wa=0;Wa<ut.length;Wa++){var ai=0;switch(o){case jt.EuclideanDistance:ai=we(I[u[ia].originIndex],ut[Wa],o);break;default:break}da+=ai}var Ji=da/ut.length;Ji>Vt&&!ut.find(function(Di){return(0,h.isEqual)(Di,X(o,I,u[ia].originIndex))})&&(Vt=Ji,ne=ia)}},Ce=0;Ce<u.length;Ce++)re(Ce);ut[et]=X(o,I,ne),ct.push(ne),pt[et]=[u[ne]],u[ne].clusterId=String(et)}for(var We=0;;){for(var et=0;et<u.length;et++){var Ne=0,rr=1/0;if(!(We===0&&ct.includes(et))){for(var wr=0;wr<ut.length;wr++){var dn=0;switch(o){case jt.EuclideanDistance:dn=we(I[et],ut[wr],o);break;default:break}dn<rr&&(rr=dn,Ne=wr)}if(u[et].clusterId!==void 0)for(var Gn=pt[Number(u[et].clusterId)].length-1;Gn>=0;Gn--)pt[Number(u[et].clusterId)][Gn].id===u[et].id&&pt[Number(u[et].clusterId)].splice(Gn,1);u[et].clusterId=String(Ne),pt[Ne].push(u[et])}}for(var In=!1,et=0;et<pt.length;et++){for(var an=pt[et],ta=new Ir([]),wr=0;wr<an.length;wr++)ta=ta.add(new Ir(I[an[wr].originIndex]));var $n=ta.avg(an.length);$n.equal(new Ir(ut[et]))||(In=!0,ut[et]=$n.getArr())}if(We++,u.every(function(Un){return Un.clusterId!==void 0})&&In||We>=1e3)break}var on=[],Tn={};return c.forEach(function(Un){var Wn,ia,da=Un.source,Wa=Un.target,ai=(Wn=u.find(function(uo){return uo.id===da}))===null||Wn===void 0?void 0:Wn.clusterId,Ji=(ia=u.find(function(uo){return uo.id===Wa}))===null||ia===void 0?void 0:ia.clusterId,Di="".concat(ai,"---").concat(Ji);if(Tn[Di])Tn[Di].count++;else{var to={source:ai,target:Ji,count:1};Tn[Di]=to,on.push(to)}}),{clusters:pt,clusterEdges:on}},Lt=mt,Pt=function(e,t){var r=new Ir(t),n=r.norm2(),a=new Ir(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},Jt=Pt,Ie=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,h.clone)(e.filter(function(_){return _.id!==t.id})),s=e.findIndex(function(_){return _.id===t.id}),u=tt(e,r),f=Et(u,n,a),c=f[s],l=[];return o.forEach(function(_,I){if(_.id!==t.id){var B=f[I],j=Jt(B,c);l.push(j),_.cosineSimilarity=j}}),o.sort(function(_,I){return I.cosineSimilarity-_.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},pe=Ie,je=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),br=je,Je=function(e,t){return e-t},zr=function(){function i(e){e===void 0&&(e=Je),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),gn=zr,tr=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function(et,ut){return t?et.weight-ut.weight:0},l=new gn(c);for(se(u.id,s).forEach(function(j){l.insert(j)});!l.isEmpty();){var _=l.delMin(),I=_.source,B=_.target;f.has(I)&&f.has(B)||(r.push(_),f.has(I)||(f.add(I),se(I,s).forEach(function(j){l.insert(j)})),f.has(B)||(f.add(B),se(B,s).forEach(function(j){l.insert(j)})))}return r},xr=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(I){return I});t&&u.sort(function(I,B){return I.weight-B.weight});for(var f=new br(a.map(function(I){return I.id}));u.length>0;){var c=u.shift(),l=c.source,_=c.target;f.connected(l,_)||(r.push(c),f.union(l,_))}return r},Ur=function(e,t,r){var n={prim:tr,kruskal:xr};return r?n[r](e,t):xr(e,t)},Nr=Ur,fe=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l=u.length,_,I={},B={},j=0;j<l;++j){var et=u[j],ut=et.id;I[ut]=1/l,B[ut]=1/l}for(var ct=Re(e);o>0&&n>t;){a=0;for(var j=0;j<l;++j){var et=u[j],ut=et.id;if(_=0,ct[et.id].inDegree===0)I[ut]=0;else{for(var pt=Xt(ut,c,"source"),St=0;St<pt.length;++St){var Vt=pt[St],ne=ct[Vt].outDegree;ne>0&&(_+=B[Vt]/ne)}I[ut]=r*_,a+=I[ut]}}a=(1-a)/l,n=0;for(var j=0;j<l;++j){var et=u[j],ut=et.id;_=I[ut]+a,n+=Math.abs(_-B[ut]),B[ut]=_}o-=1}return B},Wt=fe,ge=-1,Ae=-1,Se="-1",Be="-1",vr=-1,Mr="-1",fn=function(){function i(e,t,r,n){e===void 0&&(e=ge),t===void 0&&(t=Ae),r===void 0&&(r=Ae),n===void 0&&(n=Se),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),Xn=function(){function i(e,t){e===void 0&&(e=Ae),t===void 0&&(t=Be),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),Mn=function(){function i(e,t,r){e===void 0&&(e=Ae),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new Xn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new fn(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new fn(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),qn=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||Be,edgeLabel:n||Se,nodeLabel2:a||Be}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),bn=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new qn(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=vr),t===void 0&&(t=!1);var r=new Mn(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==Be&&r.addNode(a,u),c!==Be&&r.addNode(o,c),u!==Be&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),Vn=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),ca=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,l=e.directed,_=l===void 0?!1:l,I=e.verbose,B=I===void 0?!1:I;this.graphs=t,this.dfsCode=new bn,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=_,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=B,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],l=e.nodeMap[c.to];r<=l.label&&!n.hasNode(l)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,l=0;l<c;l++){var _=f[l],I=o[_.to].label;t.to===_.to||r>I||n.hasNode(o[_.to])||(t.label<_.label||t.label===_.label&&s<=I)&&a.push(_)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(vr,r),a=n.nodeMap,o=new bn,s={};n.nodes.forEach(function(l){var _=e.findForwardRootEdges(n,l);_.forEach(function(I){var B=a[I.to],j="".concat(l.label,"-").concat(I.label,"-").concat(B.label);s[j]||(s[j]={projected:[],nodeLabel1:l.label,edgeLabel:I.label,nodeLabel2:B.label});var et={graphId:n.id,edge:I,preNode:null};s[j].projected.push(et)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new qn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function l(_){for(var I=o.buildRmpath(),B=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,j=o.dfsEdgeList[I[0]].toNode,et={},ut=!1,ct=0,pt=r?-1:0,St=function(ta){if(ut)return"break";_.forEach(function($n){var on=new Vn($n),Tn=e.findBackwardEdge(n,on.edges[I[ta]],on.edges[I[0]],on);Tn&&(et[Tn.label]||(et[Tn.label]={projected:[],edgeLabel:Tn.label}),et[Tn.label].projected.push({graphId:n.id,edge:et,preNode:$n}),ct=o.dfsEdgeList[I[ta]].fromNode,ut=!0)})},Vt=I.length-1;Vt>pt;Vt--){var ne=St(Vt);if(ne==="break")break}if(ut){var re=e.findMinLabel(et);o.dfsEdgeList.push(new qn(j,ct,Be,re.edgeLabel,Be));var Ce=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[Ce]!==o.dfsEdgeList[Ce]?!1:l(et[re.edgeLabel].projected)}var We={};ut=!1;var Ne=0;_.forEach(function(an){var ta=new Vn(an),$n=e.findForwardPureEdges(n,ta.edges[I[0]],B,ta);$n.length>0&&(ut=!0,Ne=j,$n.forEach(function(on){var Tn="".concat(on.label,"-").concat(a[on.to].label);We[Tn]||(We[Tn]={projected:[],edgeLabel:on.label,nodeLabel2:a[on.to].label}),We[Tn].projected.push({graphId:n.id,edge:on,preNode:an})}))});for(var rr=I.length,wr=function(ta){if(ut)return"break";var $n=I[ta];_.forEach(function(on){var Tn=new Vn(on),Un=e.findForwardRmpathEdges(n,Tn.edges[$n],B,Tn);Un.length>0&&(ut=!0,Ne=o.dfsEdgeList[$n].fromNode,Un.forEach(function(Wn){var ia="".concat(Wn.label,"-").concat(a[Wn.to].label);We[ia]||(We[ia]={projected:[],edgeLabel:Wn.label,nodeLabel2:a[Wn.to].label}),We[ia].projected.push({graphId:n.id,edge:Wn,preNode:on})}))})},Vt=0;Vt<rr;Vt++){var dn=wr(Vt);if(dn==="break")break}if(!ut)return!0;var Gn=e.findMinLabel(We);o.dfsEdgeList.push(new qn(Ne,j+1,Be,Gn.edgeLabel,Gn.nodeLabel2));var In=o.dfsEdgeList.length-1;return t.dfsEdgeList[In]!==o.dfsEdgeList[In]?!1:l(We["".concat(Gn.edgeLabel,"-").concat(Gn.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,h.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var l=t.graphs[c.graphId],_=l.nodeMap,I=new Vn(c),B=a.length-1;B>=0;B--){var j=t.findBackwardEdge(l,I.edges[a[B]],I.edges[a[0]],I);if(j){var et="".concat(t.dfsCode.dfsEdgeList[a[B]].fromNode,"-").concat(j.label);f[et]||(f[et]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[B]].fromNode,edgeLabel:j.label}),f[et].projected.push({graphId:c.graphId,edge:j,preNode:c})}}if(!(n>=t.maxNodeNum)){var ut=t.findForwardPureEdges(l,I.edges[a[0]],s,I);ut.forEach(function(pt){var St="".concat(o,"-").concat(pt.label,"-").concat(_[pt.to].label);u[St]||(u[St]={projected:[],fromNodeId:o,edgeLabel:pt.label,nodeLabel2:_[pt.to].label}),u[St].projected.push({graphId:c.graphId,edge:pt,preNode:c})});for(var ct=function(St){var Vt=t.findForwardRmpathEdges(l,I.edges[a[St]],s,I);Vt.forEach(function(ne){var re="".concat(t.dfsCode.dfsEdgeList[a[St]].fromNode,"-").concat(ne.label,"-").concat(_[ne.to].label);u[re]||(u[re]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[St]].fromNode,edgeLabel:ne.label,nodeLabel2:_[ne.to].label}),u[re].projected.push({graphId:c.graphId,edge:ne,preNode:c})})},B=0;B<a.length;B++)ct(B)}}),Object.keys(f).forEach(function(c){var l=f[c],_=l.toNodeId,I=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new qn(o,_,"-1",I,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var l=u[c],_=l.fromNodeId,I=l.edgeLabel,B=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new qn(_,o+1,Be,I,B)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],l=c.nodeMap;c.nodes.forEach(function(_,I){var B=_.label,j="".concat(f,"-").concat(B);if(!s[j]){var et=a[B]||0;et++,a[B]=et}s[j]={graphKey:f,label:B},_.edges.forEach(function(ut){var ct=B,pt=l[ut.to].label;if(!t&&ct>pt){var St=pt;pt=ct,ct=St}var Vt=ut.label,ne="".concat(f,"-").concat(ct,"-").concat(Vt,"-").concat(pt),re="".concat(ct,"-").concat(Vt,"-").concat(pt);if(!o[re]){var Ce=o[re]||0;Ce++,o[re]=Ce}u[ne]={graphId:f,nodeLabel1:ct,edgeLabel:Vt,nodeLabel2:pt}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:f}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var l=s[c.to],_="".concat(u.label,"-").concat(c.label,"-").concat(l.label);n[_]||(n[_]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:l.label});var I={graphId:a,edge:c,preNode:null};n[_].projected.push(I)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new qn(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),xa=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new Mn(s,!0,t),c={};u.nodes.forEach(function(l,_){f.addNode(_,l[r]),c[l.id]=_}),u.edges.forEach(function(l,_){var I=c[l.source],B=c[l.target];f.addEdge(-1,I,B,l[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},Ea=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},Ni="cluster",ti=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?Ni:a,s=e.edgeLabelProp,u=s===void 0?Ni:s,f=xa(t,n,o,u),c=e.minSupport,l=e.maxNodeNum,_=e.minNodeNum,I=e.verbose,B=e.top,j={graphs:f,minSupport:c,maxNodeNum:l,minNodeNum:_,top:B,verbose:I,directed:n},et=new ca(j);et.run();var ut=Ea(et.frequentSubgraphs,o,u);return ut},ei=ti,Mi=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(Gi(o,s,u,r,n))}),a},Gi=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var l=e[c][n];u[l]?(u[l].count++,u[l].dists.push(f)):u[l]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,l){return c-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},To=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var l=0,_=0,I=f.nodeIdxs,B=f.neighborNum-1;l<o;){for(var j=I[1+Math.floor(Math.random()*B)],et=0;(s["".concat(c,"-").concat(j)]||s["".concat(j,"-").concat(c)])&&(j=Math.floor(Math.random()*t),et++,!(et>2*t)););if(et<2*t&&(s["".concat(c,"-").concat(j)]={start:c,end:j,distance:a[c][j]},l++,u++,u>=r))return s;if(_++,_>2*t)break}if(l<o){var ut=o-l;o=(o+ut)/(t-c-1)}}),s},ro=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!l)){var _=new Set(l),I=c.filter(function(ct){return _.has(ct)});if(!(!I||!I.length)){for(var B={},j=I.length,et=0;et<j;et++){var ut=a[I[et]];n[o].nodes.push(ut),B[ut.id]=!0}r.edges.forEach(function(ct){B[ct.source]&&B[ct.target]&&n[o].edges.push(ct)})}}}}),n},ga=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],l=s[f.target][r],_=t==null?void 0:t.nodes[0][r],I=t==null?void 0:t.nodes[1][r],B=t==null?void 0:t.edges[0][n];f[n]===B&&(c===_&&l===I||c===I&&l===_)&&u++}),u)},fo=function(e,t,r){for(var n=1/0,a=0,o=function(f){var c=e[f],l=Object.keys(c).sort(function(ct,pt){return c[ct]-c[pt]}),_=10,I=[];l.forEach(function(ct,pt){I[pt%_]||(I[pt%_]={graphs:[],totalCount:0,aveCount:0}),I[pt%_].graphs.push(ct),I[pt%_].totalCount+=c[ct]});var B=0,j=[];I.forEach(function(ct){var pt=ct.totalCount/ct.graphs.length;ct.aveCount=pt,j.push(pt);var St=0,Vt=ct.length;ct.graphs.forEach(function(ne,re){var Ce=c[ne];ct.graphs.forEach(function(We,Ne){re!==Ne&&(St+=Math.abs(Ce-c[We]))})}),St/=Vt*(Vt-1)/2,B+=St}),B/=I.length;var et=0;j.forEach(function(ct,pt){j.forEach(function(St,Vt){pt!==Vt&&(et+=Math.abs(ct-St))}),et/=j.length*(j.length-1)/2});var ut=et-B;n<ut&&(n=ut,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},Ao=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},ni=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(ue)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},Ri=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var l=e[c].id,_=o[c];a["".concat(f,"-").concat(l)]=_,r||(a["".concat(l,"-").concat(f)]=_)}}),a},co=function(e,t,r,n,a,o,s,u,f,c,l){var _,I="".concat(t.id,"-").concat(r.id);if(c&&c[I])return c[I];var B=l?l[I]:void 0;if(!B){var j=(_={},_[I]={start:n[t.id].idx,end:n[r.id].idx,distance:a},_);l=ro(j,o,e,l),B=l[I]}return ga(B,s,u,f)},Po=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(l){var _=r[l.id].degree;u>_&&(u=_);var I=r[l.id].inDegree;f>I&&(f=I);var B=r[l.id].outDegree;c>B&&(c=B)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},no=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=Zr(e,r),l=Zr(t,r),_=Ri(e.nodes,c,r),I=Ri(t.nodes,l,r),B=Ao(e.nodes,o),j=B.nodeMap,et=B.nodeLabelMap,ut=Ao(t.nodes,o),ct=ut.nodeMap,pt=ut.nodeLabelMap;ni(e.edges,s,j);var St=ni(t.edges,s,ct).edgeLabelMap,Vt=[];l==null||l.forEach(function(yi){Vt=Vt.concat(yi)}),a||(a=Math.max.apply(Math,(0,b.__spreadArray)((0,b.__spreadArray)([],Vt,!1),[2],!1))),n||(n=a);var ne=Mi(e,c,o,n),re=Mi(t,l,o,n),Ce=Math.min(100,f*(f-1)/2),We=To(n,f,Ce,ne,c),Ne=ro(We,ne,e),rr=10,wr=1,dn=1,Gn=4,In={graphs:Ne,nodeLabelProp:o,edgeLabelProp:s,minSupport:wr,minNodeNum:dn,maxNodeNum:Gn,directed:r},an=ei(In).slice(0,rr),ta=an.length,$n=[];an.forEach(function(yi,Zi){$n[Zi]={},Object.keys(Ne).forEach(function(pi){var Ki=Ne[pi],_o=ga(Ki,yi,o,s);$n[Zi][pi]=_o})});var on=fo($n,ta,an),Tn=on.structure,Un=on.structureCountMap,Wn=t.nodes[0],ia=[],da=(u=t.nodes[0])===null||u===void 0?void 0:u[o],Wa=-1/0;t.nodes.forEach(function(yi){var Zi=yi[o],pi=et[Zi];(pi==null?void 0:pi.length)>Wa&&(Wa=pi.length,ia=pi,da=Zi,Wn=yi)});var ai={},Ji={},Di={},to={},uo={},Yo={};Object.keys(pt).forEach(function(yi,Zi){uo[yi]=[],r&&(Yo[yi]=[]);var pi=-1/0,Ki=pt[yi],_o={};Ki.forEach(function(Ii){var zi=I["".concat(Wn.id,"-").concat(Ii.id)];if(zi&&uo[yi].push(zi),pi<zi&&(pi=zi),_o["".concat(Wn.id,"-").concat(Ii.id)]={start:0,end:ct[Ii.id].idx,distance:zi},r){var Qo=I["".concat(Ii.id,"-").concat(Wn.id)];Qo&&Yo[yi].push(Qo)}}),uo[yi]=uo[yi].sort(function(Ii,zi){return Ii-zi}),r&&(Yo[yi]=Yo[yi].sort(function(Ii,zi){return Ii-zi})),Ji=ro(_o,re,t,Ji);var Ia=[];if(Object.keys(_o).forEach(function(Ii){if(Di[Ii]){Ia.push(Di[Ii]);return}var zi=Ji[Ii];Di[Ii]=ga(zi,Tn,o,s),Ia.push(Di[Ii])}),Ia=Ia.sort(function(Ii,zi){return zi-Ii}),to["".concat(Wn.id,"-").concat(yi)]=Ia,yi!==da)for(var Si=(ia==null?void 0:ia.length)||0,Ti=function(zi){var Qo=ia[zi],_u=ne[j[Qo.id].idx],ps=_u.nodeLabelCountMap[yi],Pl=pt[yi].length;if(!ps||ps.count<Pl)return ia.splice(zi,1),"continue";for(var ld=!1,ou=0;ou<Pl;ou++)if(ps.dists[ou]>uo[yi][ou]){ld=!0;break}if(ld)return ia.splice(zi,1),"continue";var Ku={};_u.neighbors.forEach(function(su){var sf=_["".concat(Qo.id,"-").concat(su.id)];Ku["".concat(Qo.id,"-").concat(su.id)]={start:j[Qo.id].idx,end:j[su.id].idx,distance:sf}}),Ne=ro(Ku,ne,e,Ne);var Nf=[];Object.keys(Ku).forEach(function(su){if(Un[su]){Nf.push(Un[su]);return}var sf=Ne[su];Un[su]=ga(sf,Tn,o,s),Nf.push(Un[su])}),Nf=Nf.sort(function(su,sf){return sf-su});for(var Kc=!1,ou=0;ou<Pl;ou++)if(Nf[ou]<Ia[ou]){Kc=!0;break}if(Kc)return ia.splice(zi,1),"continue"},Co=Si-1;Co>=0;Co--)Ti(Co)});var Lo=[];ia==null||ia.forEach(function(yi){for(var Zi=j[yi.id].idx,pi=Gi(e.nodes,c[Zi],Zi,o,a),Ki=pi.neighbors,_o=Ki.length,Ia=!1,Si=_o-1;Si>=0;Si--){if(Ki.length+1<t.nodes.length){Ia=!0;return}var Ti=Ki[Si],Co=Ti[o];if(!pt[Co]||!pt[Co].length){Ki.splice(Si,1);continue}if(!uo[Co]||!uo[Co].length){Ki.splice(Si,1);continue}var Ii="".concat(yi.id,"-").concat(Ti.id),zi=_[Ii],Qo=uo[Co].length-1,_u=uo[Co][Qo];if(zi>_u){Ki.splice(Si,1);continue}if(r){var ps="".concat(Ti.id,"-").concat(yi.id),Pl=_[ps];Qo=Yo[Co].length-1;var ld=Yo[Co][Qo];if(Pl>ld){Ki.splice(Si,1);continue}}var ou=Un[Ii]?Un[Ii]:co(e,yi,Ti,j,zi,ne,Tn,o,s,Un,Ne),Ku="".concat(Wn.id,"-").concat(Co),Nf=to[Ku][to[Ku].length-1];if(ou<Nf){Ki.splice(Si,1);continue}var Kc=Po(ai,Co,ct,pt),su=Kc.minPatternNodeLabelDegree,sf=Kc.minPatternNodeLabelInDegree,uc=Kc.minPatternNodeLabelOutDegree;if(j[Ti.id].degree<su){Ki.splice(Si,1);continue}}Ia||Lo.push({nodes:[yi].concat(Ki)})});var Hu=$e(t,Wn.id,!1).length,ws={};r?(Object.keys(Hu).forEach(function(yi){var Zi=ct[yi].node[o];ws[Zi]?ws[Zi].push(Hu[yi]):ws[Zi]=[Hu[yi]]}),Object.keys(ws).forEach(function(yi){ws[yi].sort(function(Zi,pi){return Zi-pi})})):ws=uo;for(var Zu=Lo.length,Ss=function(Zi){var pi=Lo[Zi],Ki=pi.nodes[0],_o={},Ia={};pi.nodes.forEach(function(Ko,Cu){Ia[Ko.id]={idx:Cu,node:Ko,degree:0,inDegree:0,outDegree:0};var Os=Ko[o];_o[Os]?_o[Os]++:_o[Os]=1});var Si=[],Ti={};e.edges.forEach(function(Ko){Ia[Ko.source]&&Ia[Ko.target]&&(Si.push(Ko),Ti[Ko[s]]?Ti[Ko[s]]++:Ti[Ko[s]]=1,Ia[Ko.source].degree++,Ia[Ko.target].degree++,Ia[Ko.source].outDegree++,Ia[Ko.target].inDegree++)});for(var Co=Object.keys(St).length,Ii=!1,zi=0;zi<Co;zi++){var Qo=Object.keys(St)[zi];if(!Ti[Qo]||Ti[Qo]<St[Qo].length){Ii=!0;break}}if(Ii)return Lo.splice(Zi,1),"continue";var _u=Si.length;if(_u<t.edges.length)return Lo.splice(Zi,1),"break";for(var ps=!1,Pl=function(Cu){var Os=Si[Cu],Rf=Os[s],Nl=St[Rf];if(!Nl||!Nl.length)return Ti[Rf]--,Nl&&Ti[Rf]<Nl.length?(ps=!0,"break"):(Si.splice(Cu,1),Ia[Os.source].degree--,Ia[Os.target].degree--,Ia[Os.source].outDegree--,Ia[Os.target].inDegree--,"continue");var G0=Ia[Os.source].node[o],U0=Ia[Os.target].node[o],Nv=!1;if(Nl.forEach(function(W0){var Y0=ct[W0.source].node,X0=ct[W0.target].node;Y0[o]===G0&&X0[o]===U0&&(Nv=!0),!r&&Y0[o]===U0&&X0[o]===G0&&(Nv=!0)}),!Nv)return Ti[Rf]--,Nl&&Ti[Rf]<Nl.length?(ps=!0,"break"):(Si.splice(Cu,1),Ia[Os.source].degree--,Ia[Os.target].degree--,Ia[Os.source].outDegree--,Ia[Os.target].inDegree--,"continue")},zi=_u-1;zi>=0;zi--){var ld=Pl(zi);if(ld==="break")break}if(ps)return Lo.splice(Zi,1),"continue";pi.edges=Si;var ou=$e(pi,pi.nodes[0].id,!1).length;if(Object.keys(ou).reverse().forEach(function(Ko){if(!(Ko===pi.nodes[0].id||ps)){if(ou[Ko]===1/0){var Cu=Ia[Ko].node[o];if(_o[Cu]--,_o[Cu]<pt[Cu].length){ps=!0;return}var Os=pi.nodes.indexOf(Ia[Ko].node);pi.nodes.splice(Os,1),Ia[Ko]=void 0;return}var Rf=j[Ko].node[o];if(!ws[Rf]||!ws[Rf].length||ou[Ko]>ws[Rf][ws[Rf].length-1]){var Cu=Ia[Ko].node[o];if(_o[Cu]--,_o[Cu]<pt[Cu].length){ps=!0;return}var Os=pi.nodes.indexOf(Ia[Ko].node);pi.nodes.splice(Os,1),Ia[Ko]=void 0}}}),ps)return Lo.splice(Zi,1),"continue";for(var Ku=!0,Nf=0;Ku&&!ps;){Ku=!1;var Kc=r?Ia[Ki.id].degree<ct[Wn.id].degree||Ia[Ki.id].inDegree<ct[Wn.id].inDegree||Ia[Ki.id].outDegree<ct[Wn.id].outDegree:Ia[Ki.id].degree<ct[Wn.id].degree;if(Kc){ps=!0;break}if(_o[Ki[o]]<pt[Ki[o]].length){ps=!0;break}for(var su=pi.nodes.length,sf=su-1;sf>=0;sf--){var uc=pi.nodes[sf],F0=Ia[uc.id].degree,WS=Ia[uc.id].inDegree,YS=Ia[uc.id].outDegree,XS=uc[o],Pv=Po(ai,XS,ct,pt),z0=Pv.minPatternNodeLabelDegree,jS=Pv.minPatternNodeLabelInDegree,VS=Pv.minPatternNodeLabelOutDegree,HS=r?F0<z0||WS<jS||YS<VS:F0<z0;if(HS){if(_o[uc[o]]--,_o[uc[o]]<pt[uc[o]].length){ps=!0;break}pi.nodes.splice(sf,1),Ia[uc.id]=void 0,Ku=!0}}if(ps||!Ku&&Nf!==0)break;_u=Si.length;for(var Ch=_u-1;Ch>=0;Ch--){var fc=Si[Ch];if(!Ia[fc.source]||!Ia[fc.target]){Si.splice(Ch,1);var Th=fc[s];if(Ti[Th]--,Ia[fc.source]&&(Ia[fc.source].degree--,Ia[fc.source].outDegree--),Ia[fc.target]&&(Ia[fc.target].degree--,Ia[fc.target].inDegree--),St[Th]&&Ti[Th]<St[Th].length){ps=!0;break}Ku=!0}}Nf++}if(ps||ps||pi.nodes.length<t.nodes.length||Si.length<t.edges.length)return Lo.splice(Zi,1),"continue"},Ms=Zu-1;Ms>=0;Ms--){var Mu=Ss(Ms);if(Mu==="break")break}for(var Us=Lo.length,iu=function(Zi){var pi=Lo[Zi],Ki={};pi.edges.forEach(function(Si){var Ti="".concat(Si.source,"-").concat(Si.target,"-").concat(Si.label);Ki[Ti]?Ki[Ti]++:Ki[Ti]=1});for(var _o=function(Ti){var Co=Lo[Ti],Ii={};Co.edges.forEach(function(Qo){var _u="".concat(Qo.source,"-").concat(Qo.target,"-").concat(Qo.label);Ii[_u]?Ii[_u]++:Ii[_u]=1});var zi=!0;Object.keys(Ii).length!==Object.keys(Ki).length?zi=!1:Object.keys(Ki).forEach(function(Qo){Ii[Qo]!==Ki[Qo]&&(zi=!1)}),zi&&Lo.splice(Ti,1)},Ia=Us-1;Ia>Zi;Ia--)_o(Ia);Us=Lo.length},Ms=0;Ms<=Us-1;Ms++)iu(Ms);return Lo}}},ao=no,Jo=function(){function i(e){e===void 0&&(e=10),this.linkedList=new Ft,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),lo=Jo,_i=yn,io={getAdjMatrix:Tt,breadthFirstSearch:Pe,connectedComponent:Ue,getDegree:Re,getInDegree:de,getOutDegree:ht,detectCycle:yn,detectDirectedCycle:_i,detectAllCycles:kr,detectAllDirectedCycle:ur,detectAllUndirectedCycle:fr,depthFirstSearch:Ze,dijkstra:$e,findAllPath:Qe,findShortestPath:ar,floydWarshall:Zr,labelPropagation:Sn,louvain:$,iLouvain:R,kCore:A,kMeans:Lt,cosineSimilarity:Jt,nodesCosineSimilarity:pe,minimumSpanningTree:Nr,pageRank:Wt,getNeighbors:Xt,Stack:lo,GADDI:ao},$o=C(277160),Gt=C(631437),le=zt,Ge=function(e){return function(t,r){return t[e]-r[e]}},pr=function(e,t,r){return e>=t&&e<=r},Fr=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,l=1/f,_=s.x*s.x+s.y*s.y,I=u.x*u.x+u.y*u.y;if(c>a*_*I){var B=(o.x*u.y-o.y*u.x)*l,j=(o.x*s.y-o.y*s.x)*l;return!pr(B,0,1)||!pr(j,0,1)?null:{x:e.x+B*s.x,y:e.y+B*s.y}}return null},Gr=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var l=null,_=1;_<f.length&&(l=Fr(f[_-1],f[_],c,t),!l);_++);return l},Or=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},cn=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},mn=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),$o.transformMat3(n,n,t),{x:n[0],y:n[1]}},Bn=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=J.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return $o.transformMat3(a,a,n),{x:a[0],y:a[1]}},sa=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},Zn=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},va=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},ya=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},vi=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];a[c][l]=1,t||(a[l][c]=1)}),a},Ma=function(e,t){e.translate(t.x,t.y)},oa=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],l=0,_=0,I=0,B=0;e.animate(function(et){return I=f*et,B=c*et,a=le(a,[["t",I-l,B-_]]),l=I,_=B,{matrix:a}},n)}else{var j=le(a,[["t",s,u]]);e.setMatrix(j)}},oi=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,h.isArray)(t)||(n=[t,t]),(0,h.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=le(r,[["s",n[0],n[1]]]),e.setMatrix(r)},$a=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=le(r,[["r",t]]),e.setMatrix(r)},za=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function Ui(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var di=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(Ui(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},La=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},ja=function(e,t){var r=!1;return(0,h.each)(e,function(n){if(Fr(n.from,n.to,t.from,t.to))return r=!0,!1}),r},Ga=function(e,t){var r=function(_){var I=_.map(function(j){return j[0]}),B=_.map(function(j){return j[1]});return{minX:Math.min.apply(null,I),maxX:Math.max.apply(null,I),minY:Math.min.apply(null,B),maxY:Math.max.apply(null,B)}},n=function(_){for(var I=[],B=_.length,j=0;j<B-1;j++){var et=_[j],ut=_[j+1];I.push({from:{x:et[0],y:et[1]},to:{x:ut[0],y:ut[1]}})}if(I.length>1){var ct=_[0],pt=_[B-1];I.push({from:{x:pt[0],y:pt[1]},to:{x:ct[0],y:ct[1]}})}return I};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!La(a,o))return!1;var s=!1;if((0,h.each)(t,function(l){if(di(e,l[0],l[1]))return s=!0,!1}),s||((0,h.each)(e,function(l){if(di(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,h.each)(f,function(l){if(ja(u,l))return c=!0,!1}),c},bi=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),xi=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},ki=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},ho=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=xi(n,r[s]),f=u[0],c=u[1],l=u[2],_=u[3];o[s]=Fr({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:l,y:_}),o[s]&&(a+=1)}return[o,a]},Wi=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=xi(n,r[s]),f=u[0],c=u[1],l=u[2],_=u[3],I=ki(t,new bi(f,c,l,_));I=Math.abs(I-.5),I>=0&&I<=1&&(o+=1,a=I<a?I:a)}return o===0?-1:a},Io=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},Xo=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},is=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var l=s*s+u*u-c;return l<0&&(l=0),l},$i=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},qa=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},Yi=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(Gt.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];Gt.normalize(c,c);var l=[s-r,u-n];return Math.abs(Gt.dot(l,c))},oo=function(e,t,r){return e+(t-e)*r},Qa=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=oo(e[o],t[o],r);return a},Li="rgb(95, 149, 255)",zo="rgb(255, 255, 255)",qi="rgb(0, 0, 0)",ts="rgb(247, 250, 255)",Xi="rgb(239, 244, 255)",xo="rgb(253, 253, 253)",gs="rgb(250, 250, 250)",fs="rgb(224, 224, 224)",so="rgb(234, 234, 234)",ss="rgb(245, 245, 245)",cs="rgb(191, 213, 255)",_s="#4572d9",jo="rgb(223, 234, 255)",$t={mainStroke:Li,mainFill:Xi,activeStroke:Li,activeFill:ts,inactiveStroke:cs,inactiveFill:ts,selectedStroke:Li,selectedFill:zo,highlightStroke:_s,highlightFill:jo,disableStroke:fs,disableFill:gs,edgeMainStroke:fs,edgeActiveStroke:Li,edgeInactiveStroke:so,edgeSelectedStroke:Li,edgeHighlightStroke:Li,edgeDisableStroke:ss,comboMainStroke:fs,comboMainFill:xo,comboActiveStroke:Li,comboActiveFill:ts,comboInactiveStroke:fs,comboInactiveFill:xo,comboSelectedStroke:Li,comboSelectedFill:xo,comboHighlightStroke:_s,comboHighlightFill:xo,comboDisableStroke:so,comboDisableFill:gs},ye={version:"0.8.20",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:$t.mainStroke,fill:Xi},size:20,color:$t.mainStroke,linkPoints:{size:8,lineWidth:1,fill:$t.activeFill,stroke:$t.activeStroke}},nodeStateStyles:{active:{fill:$t.activeFill,stroke:$t.activeStroke,lineWidth:2,shadowColor:$t.mainStroke,shadowBlur:10},selected:{fill:$t.selectedFill,stroke:$t.selectedStroke,lineWidth:4,shadowColor:$t.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:$t.highlightFill,stroke:$t.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:$t.inactiveFill,stroke:$t.inactiveStroke,lineWidth:1},disable:{fill:$t.disableFill,stroke:$t.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:qi,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:$t.edgeMainStroke,lineAppendWidth:2},color:$t.edgeMainStroke},edgeStateStyles:{active:{stroke:$t.edgeActiveStroke,lineWidth:1},selected:{stroke:$t.edgeSelectedStroke,lineWidth:2,shadowColor:$t.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:$t.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:$t.edgeInactiveStroke,lineWidth:1},disable:{stroke:$t.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:qi,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:$t.comboMainFill,lineWidth:1,stroke:$t.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:$t.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:$t.comboActiveStroke,lineWidth:1,fill:$t.comboActiveFill},selected:{stroke:$t.comboSelectedStroke,lineWidth:2,fill:$t.comboSelectedFill,shadowColor:$t.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:$t.comboHighlightStroke,lineWidth:2,fill:$t.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:$t.comboInactiveStroke,fill:$t.comboInactiveFill,lineWidth:1},disable:{stroke:$t.comboDisableStroke,fill:$t.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},hr={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Er=Math.PI,nn=Math.sin,kn=Math.cos,Qn=nn(Er/8),wa=kn(Er/8),Ai=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=mn(n,o),a=mn(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},Oo=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||ye.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],l=[e.startPoint.x,e.startPoint.y],_=[e.endPoint.x,e.endPoint.y],I=o.height/2,B=o.width/2,j=I,et=I,ut=j*Qn,ct=j*wa,pt=et*Qn,St=et*wa,Vt=a.get("type"),ne=Math.min(I/2,B/2),re=Math.min(I,B),Ce=s!=null&&s.pointPadding?Math.min(re,s==null?void 0:s.pointPadding):ne;if(l[0]===_[0]&&l[1]===_[1]){switch(f){case"top":Vt==="circle"?(l=[c[0]-ut,c[1]-ct],_=[c[0]+pt,c[1]-St]):(l=[c[0]-Ce,c[1]-I],_=[c[0]+Ce,c[1]-I]);break;case"top-right":j=I,et=B,Vt==="circle"?(ut=j*Qn,ct=j*wa,pt=et*Qn,St=et*wa,l=[c[0]+ut,c[1]-ct],_=[c[0]+St,c[1]-pt]):(l=[c[0]+B-Ce,c[1]-I],_=[c[0]+B,c[1]-I+Ce]);break;case"right":j=B,et=B,Vt==="circle"?(ut=j*Qn,ct=j*wa,pt=et*Qn,St=et*wa,l=[c[0]+ct,c[1]-ut],_=[c[0]+St,c[1]+pt]):(l=[c[0]+B,c[1]-Ce],_=[c[0]+B,c[1]+Ce]);break;case"bottom-right":j=B,et=I,Vt==="circle"?(ut=j*Qn,ct=j*wa,pt=et*Qn,St=et*wa,l=[c[0]+ct,c[1]+ut],_=[c[0]+pt,c[1]+St]):(l=[c[0]+B,c[1]+I-Ce],_=[c[0]+B-Ce,c[1]+I]);break;case"bottom":j=I,et=I,Vt==="circle"?(ut=j*Qn,ct=j*wa,pt=et*Qn,St=et*wa,l=[c[0]+ut,c[1]+ct],_=[c[0]-pt,c[1]+St]):(l=[c[0]-Ce,c[1]+I],_=[c[0]+Ce,c[1]+I]);break;case"bottom-left":j=I,et=B,Vt==="circle"?(ut=j*Qn,ct=j*wa,pt=et*Qn,St=et*wa,l=[c[0]-ut,c[1]+ct],_=[c[0]-St,c[1]+pt]):(l=[c[0]-B,c[1]+I-Ce],_=[c[0]-B+Ce,c[1]+I]);break;case"left":j=B,et=B,Vt==="circle"?(ut=j*Qn,ct=j*wa,pt=et*Qn,St=et*wa,l=[c[0]-ct,c[1]+ut],_=[c[0]-St,c[1]-pt]):(l=[c[0]-B,c[1]-Ce],_=[c[0]-B,c[1]+Ce]);break;case"top-left":j=B,et=I,Vt==="circle"?(ut=j*Qn,ct=j*wa,pt=et*Qn,St=et*wa,l=[c[0]-ct,c[1]-ut],_=[c[0]-pt,c[1]-St]):(l=[c[0]-B+Ce,c[1]-I],_=[c[0]-B,c[1]-I+Ce]);break;default:j=B,et=B,ut=j*Qn,ct=j*wa,pt=et*Qn,St=et*wa,l=[c[0]-ut,c[1]-ct],_=[c[0]+pt,c[1]-St]}if(s.clockwise===!1){var We=[l[0],l[1]];l=[_[0],_[1]],_=[We[0],We[1]]}}var Ne=[l[0]-c[0],l[1]-c[1]],rr=(j+u)/j,wr=(et+u)/et;s.clockwise===!1&&(rr=(et+u)/et,wr=(j+u)/j);var dn=Gt.scale([0,0],Ne,rr),Gn=[c[0]+dn[0],c[1]+dn[1]],In=[_[0]-c[0],_[1]-c[1]],an=Gt.scale([0,0],In,wr),ta=[c[0]+an[0],c[1]+an[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:_[0],y:_[1]},e.controlPoints=[{x:Gn[0],y:Gn[1]},{x:ta[0],y:ta[1]}],e},Go=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Er*2),r&&(u.x+=kn(c)*r,u.y+=nn(c)*r),n){var l=c-Er/2;c>1/2*Er&&c<3*1/2*Er&&(l-=Er),u.x+=kn(l)*n,u.y+=nn(l)*n}var _={x:u.x,y:u.y,angle:c};return a?(c>.5*Er&&c<1.5*Er&&(c-=Er),(0,b.__assign)({rotate:c},_)):_},Rs=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},Cs=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},ji=function(e,t){typeof t=="function"&&Rs(e,null,-1,t)},bo=function(e,t){typeof t=="function"&&Cs(e,null,-1,t)},ks=function(e,t){return t*(hr[e]||1)},ls=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=ks(a,t)}),[r,t]},qs=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},Qs=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,h.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var l=n[c.id];if(l){if(c.children=l.children,n[c.id]=c,l=c,!l.parentId){r.push(l);return}var _=n[l.parentId];if(_)_.children?_.children.push(c):_.children=[c];else{var I={id:l.parentId,children:[l]};n[l.parentId]=I,n[c.id]=c}return}if((0,h.isString)(u.parentId)){var B=n[u.parentId];if(B)B.children?B.children.push(c):B.children=[c],n[c.id]=c;else{var j={id:u.parentId,children:[c]};n[j.id]=j,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,ji(u,function(f){var c,l=n[f.id].itemType;l==="node"?c=n[f.comboId]:c=n[f.parentId],c&&l==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var _=o[f.id];return _&&(_.depth=f.depth),!0})}),r},Js=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(B){if(!u){if(B.id===t){o=B,B.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}ji(B,function(j){var et;return s[j.id]={children:(j==null?void 0:j.children)||[]},a=(et=s[j.parentId||j.comboId||"root"])===null||et===void 0?void 0:et.children,j&&(j.removed||t===j.id)&&a?(f=j.parentId||j.comboId||"root",o=j,j.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var _=0;(e||[]).forEach(function(B){l||ji(B,function(j){return r===j.id?(l=!0,j.children?j.children.push(o):j.children=[o],_=j.depth,o.itemType==="node"?o.depth=_+2:o.depth=_+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var I=o.depth;ji(o,function(B){return B.itemType==="node"?I+=2:I+=1,B.depth=I,!0})}return e},Ws=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,l=o.fixCollapseSize,_=c?l:f,I=(0,h.isArray)(_)?_:[_,_],B=I[0],j=I[1],et=[B/2,j/2];return{minX:s-et[0],minY:u-et[1],maxX:s+et[0],maxY:u+et[1],x:s,y:u,width:B,height:j}}return e.forEach(function(ut){var ct=t.findById(ut.id);if(!(!ct||!ct.isVisible())){ct.set("bboxCanvasCache",void 0);var pt=ct.getCanvasBBox();pt.x&&n.minX>pt.minX&&(n.minX=pt.minX),pt.y&&n.minY>pt.minY&&(n.minY=pt.minY),pt.x&&n.maxX<pt.maxX&&(n.maxX=pt.maxX),pt.y&&n.maxY<pt.maxY&&(n.maxY=pt.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(ut){(n[ut]===1/0||n[ut]===-1/0)&&(n[ut]=void 0)}),n},Ds=function(e){var t=(0,h.isNumber)(e.x)||(0,h.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,h.isNumber)(e.style.r)||(0,h.isNumber)(e.style.width)||(0,h.isNumber)(e.style.height)||(0,h.isNumber)(e.style.rx)||(0,h.isNumber)(e.style.ry)),t},Bs=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(!(r==="img"&&!(0,h.isString)(n)))if((0,h.isObject)(n)&&!(0,h.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,h.isString)(s)||(a[o]=(0,h.clone)(s))}),t[r]=a}else t[r]=(0,h.clone)(n)}),t},ms=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,h.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},es=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return ji(e,function(_){return(0,h.isString)(_.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(_){return!(0,h.isString)(_.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(_){return _.id}),f=a==null?void 0:a.map(function(_){return _.id}),c=(0,b.__spreadArray)((0,b.__spreadArray)([],u,!0),f,!0),l=(r||[]).find(function(_){return!c.includes(_.source)||!c.includes(_.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},Tu=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,h.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Au=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,h.each)(e,function(t){(0,h.each)(t,function(r,n){(0,h.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,h.each)(r||[],function(o){var s=Y.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,h.each)(t,function(r){e.indexOf(r)<0&&((0,h.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,h.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,h.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,h.isArray)(e)?a=e:a=[e],(0,h.isArray)(t))return(0,h.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,h.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),Uo=Au,Eo=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,os=new RegExp("([a-z])["+Eo+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Eo+"]*,?["+Eo+"]*)+)","ig"),d=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Eo+"]*,?["+Eo+"]*","ig"),G=function(i){if(!i)return null;if((0,h.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(os,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(d,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},wt=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},kt=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},qt=function(i){if(i=G(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,l=void 0,_=o,I=i.length;_<I;_++){if(e.push(c=[]),l=i[_],s=l[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+t,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var B=2,j=u.length;B<j;B++)u[B]=+u[B]+t,u[++B]=+u[B]+r;e.pop(),e=e.concat(wt(u,f));break;case"O":e.pop(),u=kt(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(kt(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var B=1,j=l.length;B<j;B++)c[B]=+l[B]+(B%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(wt(u,f)),c=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=kt(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(kt(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var et=0,ut=l.length;et<ut;et++)c[et]=l[et];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},he=function(i,e,t,r){return[i,e,t,r,t,r]},me=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},Oe=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,l=Math.PI/180*(+n||0),_=[],I,B,j,et,ut,ct=function(Ji,Di,to){var uo=Ji*Math.cos(to)-Di*Math.sin(to),Yo=Ji*Math.sin(to)+Di*Math.cos(to);return{x:uo,y:Yo}};if(f)B=f[0],j=f[1],et=f[2],ut=f[3];else{I=ct(i,e,-l),i=I.x,e=I.y,I=ct(s,u,-l),s=I.x,u=I.y,i===s&&e===u&&(s+=1,u+=1);var pt=(i-s)/2,St=(e-u)/2,Vt=pt*pt/(t*t)+St*St/(r*r);Vt>1&&(Vt=Math.sqrt(Vt),t=Vt*t,r=Vt*r);var ne=t*t,re=r*r,Ce=(a===o?-1:1)*Math.sqrt(Math.abs((ne*re-ne*St*St-re*pt*pt)/(ne*St*St+re*pt*pt)));et=Ce*t*St/r+(i+s)/2,ut=Ce*-r*pt/t+(e+u)/2,B=Math.asin(((e-ut)/r).toFixed(9)),j=Math.asin(((u-ut)/r).toFixed(9)),B=i<et?Math.PI-B:B,j=s<et?Math.PI-j:j,B<0&&(B=Math.PI*2+B),j<0&&(j=Math.PI*2+j),o&&B>j&&(B=B-Math.PI*2),!o&&j>B&&(j=j-Math.PI*2)}var We=j-B;if(Math.abs(We)>c){var Ne=j,rr=s,wr=u;j=B+c*(o&&j>B?1:-1),s=et+t*Math.cos(j),u=ut+r*Math.sin(j),_=Oe(s,u,t,r,n,0,o,rr,wr,[j,Ne,et,ut])}We=j-B;var dn=Math.cos(B),Gn=Math.sin(B),In=Math.cos(j),an=Math.sin(j),ta=Math.tan(We/4),$n=4/3*t*ta,on=4/3*r*ta,Tn=[i,e],Un=[i+$n*Gn,e-on*dn],Wn=[s+$n*an,u-on*In],ia=[s,u];if(Un[0]=2*Tn[0]-Un[0],Un[1]=2*Tn[1]-Un[1],f)return[Un,Wn,ia].concat(_);_=[Un,Wn,ia].concat(_).join().split(",");for(var da=[],Wa=0,ai=_.length;Wa<ai;Wa++)da[Wa]=Wa%2?ct(_[Wa-1],_[Wa],l).y:ct(_[Wa],_[Wa+1],l).x;return da},Fe=function(i,e){var t=qt(i),r=e&&qt(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,l=function(pt,St,Vt){var ne,re;if(!pt)return["C",St.x,St.y,St.x,St.y,St.x,St.y];switch(!(pt[0]in{T:1,Q:1})&&(St.qx=St.qy=null),pt[0]){case"M":St.X=pt[1],St.Y=pt[2];break;case"A":pt=["C"].concat(Oe.apply(0,[St.x,St.y].concat(pt.slice(1))));break;case"S":Vt==="C"||Vt==="S"?(ne=St.x*2-St.bx,re=St.y*2-St.by):(ne=St.x,re=St.y),pt=["C",ne,re].concat(pt.slice(1));break;case"T":Vt==="Q"||Vt==="T"?(St.qx=St.x*2-St.qx,St.qy=St.y*2-St.qy):(St.qx=St.x,St.qy=St.y),pt=["C"].concat(me(St.x,St.y,St.qx,St.qy,pt[1],pt[2]));break;case"Q":St.qx=pt[1],St.qy=pt[2],pt=["C"].concat(me(St.x,St.y,pt[1],pt[2],pt[3],pt[4]));break;case"L":pt=["C"].concat(he(St.x,St.y,pt[1],pt[2]));break;case"H":pt=["C"].concat(he(St.x,St.y,pt[1],St.y));break;case"V":pt=["C"].concat(he(St.x,St.y,St.x,pt[1]));break;case"Z":pt=["C"].concat(he(St.x,St.y,St.X,St.Y));break;default:break}return pt},_=function(pt,St){if(pt[St].length>7){pt[St].shift();for(var Vt=pt[St];Vt.length;)o[St]="A",r&&(s[St]="A"),pt.splice(St++,0,["C"].concat(Vt.splice(0,6)));pt.splice(St,1),c=Math.max(t.length,r&&r.length||0)}},I=function(pt,St,Vt,ne,re){pt&&St&&pt[re][0]==="M"&&St[re][0]!=="M"&&(St.splice(re,0,["M",ne.x,ne.y]),Vt.bx=0,Vt.by=0,Vt.x=pt[re][1],Vt.y=pt[re][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var B=0;B<c;B++){t[B]&&(u=t[B][0]),u!=="C"&&(o[B]=u,B&&(f=o[B-1])),t[B]=l(t[B],n,f),o[B]!=="A"&&u==="C"&&(o[B]="C"),_(t,B),r&&(r[B]&&(u=r[B][0]),u!=="C"&&(s[B]=u,B&&(f=s[B-1])),r[B]=l(r[B],a,f),s[B]!=="A"&&u==="C"&&(s[B]="C"),_(r,B)),I(t,r,n,a,B),I(r,t,a,n,B);var j=t[B],et=r&&r[B],ut=j.length,ct=r&&et.length;n.x=j[ut-2],n.y=j[ut-1],n.bx=parseFloat(j[ut-4])||n.x,n.by=parseFloat(j[ut-3])||n.y,a.bx=r&&(parseFloat(et[ct-4])||a.x),a.by=r&&(parseFloat(et[ct-3])||a.y),a.x=r&&et[ct-2],a.y=r&&et[ct-1]}return r?[t,r]:t},Ke=/,?([a-z]),?/gi,gr=function(i){return i.join(",").replace(Ke,"$1")},Kr=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},Jr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],_=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],I=0,B=0;B<c;B++){var j=f*l[B]+f,et=Kr(j,i,t,n,o),ut=Kr(j,e,r,a,s),ct=et*et+ut*ut;I+=_[B]*Math.sqrt(ct)}return f*I},Qr=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,_,I,B=0;B<2;++B){if(B===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,_=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,_=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;I=-_/l,I>0&&I<1&&u.push(I);continue}var j=l*l-4*_*c,et=Math.sqrt(j);if(!(j<0)){var ut=(-l+et)/(2*c);ut>0&&ut<1&&u.push(ut);var ct=(-l-et)/(2*c);ct>0&&ct<1&&u.push(ct)}}for(var pt=u.length,St=pt,Vt;pt--;)I=u[pt],Vt=1-I,f[0][pt]=Vt*Vt*Vt*i+3*Vt*Vt*I*t+3*Vt*I*I*n+I*I*I*o,f[1][pt]=Vt*Vt*Vt*e+3*Vt*Vt*I*r+3*Vt*I*I*a+I*I*I*s;return f[0][St]=i,f[1][St]=e,f[0][St+1]=o,f[1][St+1]=s,f[0].length=f[1].length=St+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Ln=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,_=f/c,I=+l.toFixed(2),B=+_.toFixed(2);if(!(I<+Math.min(i,t).toFixed(2)||I>+Math.max(i,t).toFixed(2)||I<+Math.min(n,o).toFixed(2)||I>+Math.max(n,o).toFixed(2)||B<+Math.min(e,r).toFixed(2)||B>+Math.max(e,r).toFixed(2)||B<+Math.min(a,s).toFixed(2)||B>+Math.max(a,s).toFixed(2)))return{x:l,y:_}}}},Nn=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},sn=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=gr,a},ra=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:sn(i,e,t,r),vb:[i,e,t,r].join(" ")}},Ha=function(i,e){return i=ra(i),e=ra(e),Nn(e,i.x,i.y)||Nn(e,i.x2,i.y)||Nn(e,i.x,i.y2)||Nn(e,i.x2,i.y2)||Nn(i,e.x,e.y)||Nn(i,e.x2,e.y)||Nn(i,e.x,e.y2)||Nn(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},Va=function(i,e,t,r,n,a,o,s){(0,h.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=Qr.apply(null,i);return ra(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},ka=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),_=u*u,I=_*u,B=c*i+l*3*u*t+f*3*u*u*n+I*o,j=c*e+l*3*u*r+f*3*u*u*a+I*s,et=i+2*u*(t-i)+_*(n-2*t+i),ut=e+2*u*(r-e)+_*(a-2*r+e),ct=t+2*u*(n-t)+_*(o-2*n+t),pt=r+2*u*(a-r)+_*(s-2*a+r),St=f*i+u*t,Vt=f*e+u*r,ne=f*n+u*o,re=f*a+u*s,Ce=90-Math.atan2(et-ct,ut-pt)*180/Math.PI;return{x:B,y:j,m:{x:et,y:ut},n:{x:ct,y:pt},start:{x:St,y:Vt},end:{x:ne,y:re},alpha:Ce}},_a=function(i,e,t){var r=Va(i),n=Va(e);if(!Ha(r,n))return t?0:[];for(var a=Jr.apply(0,i),o=Jr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},_=t?0:[],I=0;I<s+1;I++){var B=ka.apply(0,i.concat(I/s));f.push({x:B.x,y:B.y,t:I/s})}for(var I=0;I<u+1;I++){var B=ka.apply(0,e.concat(I/u));c.push({x:B.x,y:B.y,t:I/u})}for(var I=0;I<s;I++)for(var j=0;j<u;j++){var et=f[I],ut=f[I+1],ct=c[j],pt=c[j+1],St=Math.abs(ut.x-et.x)<.001?"y":"x",Vt=Math.abs(pt.x-ct.x)<.001?"y":"x",ne=Ln(et.x,et.y,ut.x,ut.y,ct.x,ct.y,pt.x,pt.y);if(ne){if(l[ne.x.toFixed(4)]===ne.y.toFixed(4))continue;l[ne.x.toFixed(4)]=ne.y.toFixed(4);var re=et.t+Math.abs((ne[St]-et[St])/(ut[St]-et[St]))*(ut.t-et.t),Ce=ct.t+Math.abs((ne[Vt]-ct[Vt])/(pt[Vt]-ct[Vt]))*(pt.t-ct.t);re>=0&&re<=1&&Ce>=0&&Ce<=1&&(t?_+=1:_.push({x:ne.x,y:ne.y,t1:re,t2:Ce}))}}return _},Pa=function(i,e,t){i=Fe(i),e=Fe(e);for(var r,n,a,o,s,u,f,c,l,_,I=t?0:[],B=0,j=i.length;B<j;B++){var et=i[B];if(et[0]==="M")r=s=et[1],n=u=et[2];else{et[0]==="C"?(l=[r,n].concat(et.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ut=0,ct=e.length;ut<ct;ut++){var pt=e[ut];if(pt[0]==="M")a=f=pt[1],o=c=pt[2];else{pt[0]==="C"?(_=[a,o].concat(pt.slice(1)),a=_[6],o=_[7]):(_=[a,o,a,o,f,c,f,c],a=f,o=c);var St=_a(l,_,t);if(t)I+=St;else{for(var Vt=0,ne=St.length;Vt<ne;Vt++)St[Vt].segment1=B,St[Vt].segment2=ut,St[Vt].bez1=l,St[Vt].bez2=_;I=I.concat(St)}}}}}return I},Do=function(i,e){return Pa(i,e)};function wo(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function vo(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=wo(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(l){var _=[];return l.length===4&&(_.push("C"),_=_.concat(l[2])),l.length>=3&&(l.length===3&&_.push("Q"),_=_.concat(l[1])),l.length===2&&_.push("L"),_=_.concat(l[l.length-1]),_});return c}var So=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(vo(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},Mo=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,l){return l===t?f.concat(i[t]):f.concat(So(i[l],i[l+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},No=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,h.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function Ro(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var hi=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],No(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,_=s[u-1][f-1].min+o;s[u][f]=Ro(c,l,_)}}return s},Bi=function(i,e){var t=hi(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function Ys(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=Xs(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function Xs(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var ds=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=Xs(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=Ys(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=Ys(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=Ys(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},Iu=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),kf=Iu;function cc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var lc=typeof window!="undefined"&&typeof window.document!="undefined";function dc(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function Bf(i){return i.cfg.visible&&i.cfg.capture}var Ff=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,h.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Q),hc=Ff,hu=C(734155),uf=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},vc=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),$c=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=hu.platform}return i}(),vu=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),pc=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),ea=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Ou=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,si=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ff=3,$u=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Ou]],uu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function zf(i){return i?cf(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new ea:typeof navigator!="undefined"?cf(navigator.userAgent):Fs()}function Du(i){return i!==""&&$u.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function gc(i){var e=Du(i);return e?e[0]:null}function cf(i){var e=Du(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new pc;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<ff&&(n=uf(uf([],n,!0),lt(ff-n.length),!0)):n=[];var a=n.join("."),o=mc(i),s=si.exec(i);return s&&s[1]?new vu(t,a,o,s[1]):new vc(t,a,o)}function mc(i){for(var e=0,t=uu.length;e<t;e++){var r=uu[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function Fs(){var i=typeof hu!="undefined"&&hu.version;return i?new $c(hu.version.slice(1)):null}function lt(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function It(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],l=i[8],_=e[0],I=e[1],B=e[2],j=e[3],et=e[4],ut=e[5],ct=e[6],pt=e[7],St=e[8];return t[0]=_*r+I*o+B*f,t[1]=_*n+I*s+B*c,t[2]=_*a+I*u+B*l,t[3]=j*r+et*o+ut*f,t[4]=j*n+et*s+ut*c,t[5]=j*a+et*u+ut*l,t[6]=ct*r+pt*o+St*f,t[7]=ct*n+pt*s+St*c,t[8]=ct*a+pt*u+St*l,t}function Yt(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function ce(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],l=c*o-s*f,_=-c*a+s*u,I=f*a-o*u,B=t*l+r*_+n*I;return B?(B=1/B,e[0]=l*B,e[1]=(-c*r+n*f)*B,e[2]=(s*r-n*o)*B,e[3]=_*B,e[4]=(c*t-n*u)*B,e[5]=(-s*t+n*a)*B,e[6]=I*B,e[7]=(-f*t+r*u)*B,e[8]=(o*t-r*a)*B,e):null}var Te=zt,cr="matrix",mr=["zIndex","capture","visible","type"],Hr=["repeat"],wn=":",Cn="*";function Hn(i){for(var e=[],t=0;t<i.length;t++)(0,h.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function aa(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function Kn(i,e){var t={},r=e.attr();return(0,h.each)(i,function(n,a){Hr.indexOf(a)===-1&&!(0,h.isEqual)(r[a],n)&&(t[a]=n)}),t}function Oa(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,h.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,h.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var Ja=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,h.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,h.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(cc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(cr,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(cr)},e.prototype.setMatrix=function(t){this.attr(cr,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=It(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=It(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?Yt(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=ce(r);if(n)return Yt(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,h.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,h.each)(r,function(s,u){(0,h.isArray)(r[u])?n[u]=Hn(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,h.each)(mr,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],l=c===void 0?h.noop:c,_=t[4],I=_===void 0?0:_,B,j,et,ut,ct;(0,h.isFunction)(o)?(B=o,o={}):(0,h.isObject)(o)&&o.onFrame&&(B=o.onFrame,j=o.repeat),(0,h.isObject)(s)?(ct=s,s=ct.duration,f=ct.easing||"easeLinear",I=ct.delay||0,j=ct.repeat||j||!1,l=ct.callback||h.noop,et=ct.pauseCallback||h.noop,ut=ct.resumeCallback||h.noop):((0,h.isNumber)(l)&&(I=l,l=null),(0,h.isFunction)(f)?(l=f,f="easeLinear"):f=f||"easeLinear");var pt=Kn(o,this),St={fromAttrs:aa(pt,this),toAttrs:pt,duration:s,easing:f,repeat:j,callback:l,pauseCallback:et,resumeCallback:ut,delay:I,startTime:n.getTime(),id:(0,h.uniqueId)(),onFrame:B,pathFormatted:!1};a.length>0?a=Oa(a,St):n.addAnimator(this),a.push(St),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,h.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,h.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,h.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(_){var I=a[_],B=I.get("name");if(B){if((I.isGroup()||I.isCanvas&&I.isCanvas())&&s&&dc(I,s))return"break";(0,h.isArray)(B)?(0,h.each)(B,function(j){n.emitDelegateEvent(I,j,r)}):f.emitDelegateEvent(I,B,r)}},f=this,c=0;c<a.length;c++){var l=u(c);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+wn+n.type;(a[o]||a[Cn])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=Te(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=Te(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=Te(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=Te(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=Te(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(hc),Na=Ja,Ta={},Ba="_INDEX";function ha(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){ha(r,e)})}}function Ya(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){Ya(r,e)})}}function Ua(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function ma(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),cc(i.getChildren(),e)}function ri(i){return function(e,t){var r=i(e,t);return r===0?e[Ba]-t[Ba]:r}}var Ei=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,h.each)(o,function(u){var f=u.getBBox(),c=f.minX,l=f.maxX,_=f.minY,I=f.maxY;c<t&&(t=c),l>r&&(r=l),_<n&&(n=_),I>a&&(a=I)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,h.each)(o,function(u){var f=u.getCanvasBBox(),c=f.minX,l=f.maxX,_=f.minY,I=f.maxY;c<t&&(t=c),l>r&&(r=l),_<n&&(n=_),I>a&&(a=I)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,h.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,h.isObject)(n)?a=n:a.type=n;var o=Ta[a.type];o||(o=(0,h.upperFirst)(a.type),Ta[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,h.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!Bf(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(Bf(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&ma(o,t,!1),t.set("parent",this),r&&ha(t,r),a&&Ya(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,h.each)(t,function(r,n){return r[Ba]=n,r}),t.sort(ri(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,h.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,h.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(Na),Vi=Ei,gi=0,ui=0,Hi=0,ko=1e3,po,Ls,Lu=0,ys=0,pu=0,tu=typeof performance=="object"&&performance.now?performance:Date,js=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function lf(){return ys||(js(qc),ys=tu.now()+pu)}function qc(){ys=0}function gu(){this._call=this._time=this._next=null}gu.prototype=qu.prototype={constructor:gu,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?lf():+t)+(e==null?0:+e),!this._next&&Ls!==this&&(Ls?Ls._next=this:po=this,Ls=this),this._call=i,this._time=t,Qu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qu())}};function qu(i,e,t){var r=new gu;return r.restart(i,e,t),r}function yc(){lf(),++gi;for(var i=po,e;i;)(e=ys-i._time)>=0&&i._call.call(null,e),i=i._next;--gi}function Pu(){ys=(Lu=tu.now())+pu,gi=ui=0;try{yc()}finally{gi=0,xc(),ys=0}}function Nu(){var i=tu.now(),e=i-Lu;e>ko&&(pu-=e,Lu=i)}function xc(){for(var i,e=po,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:po=t);Ls=i,Qu(r)}function Qu(i){if(!gi){ui&&(ui=clearTimeout(ui));var e=i-ys;e>24?(i<1/0&&(ui=setTimeout(Pu,i-tu.now()-pu)),Hi&&(Hi=clearInterval(Hi))):(Hi||(Lu=tu.now(),Hi=setInterval(Nu,ko)),gi=1,js(Pu))}}var df=C(952677);function Vs(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function Ru(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function Ju(){}var ku=.7,bc=1/ku,eu="\\s*([+-]?\\d+)\\s*",fu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ru="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hf=/^#([0-9a-f]{3,8})$/,Rl=new RegExp("^rgb\\(".concat(eu,",").concat(eu,",").concat(eu,"\\)$")),vf=new RegExp("^rgb\\(".concat(ru,",").concat(ru,",").concat(ru,"\\)$")),Qc=new RegExp("^rgba\\(".concat(eu,",").concat(eu,",").concat(eu,",").concat(fu,"\\)$")),Jc=new RegExp("^rgba\\(".concat(ru,",").concat(ru,",").concat(ru,",").concat(fu,"\\)$")),tl=new RegExp("^hsl\\(".concat(fu,",").concat(ru,",").concat(ru,"\\)$")),el=new RegExp("^hsla\\(".concat(fu,",").concat(ru,",").concat(ru,",").concat(fu,"\\)$")),Ec={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vs(Ju,pf,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Gf,formatHex:Gf,formatHex8:kl,formatHsl:Bl,formatRgb:rl,toString:rl});function Gf(){return this.rgb().formatHex()}function kl(){return this.rgb().formatHex8()}function Bl(){return ol(this).formatHsl()}function rl(){return this.rgb().formatRgb()}function pf(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=hf.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?nl(e):t===3?new Ts(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?gf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?gf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Rl.exec(i))?new Ts(e[1],e[2],e[3],1):(e=vf.exec(i))?new Ts(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Qc.exec(i))?gf(e[1],e[2],e[3],e[4]):(e=Jc.exec(i))?gf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=tl.exec(i))?Yf(e[1],e[2]/100,e[3]/100,1):(e=el.exec(i))?Yf(e[1],e[2]/100,e[3]/100,e[4]):Ec.hasOwnProperty(i)?nl(Ec[i]):i==="transparent"?new Ts(NaN,NaN,NaN,0):null}function nl(i){return new Ts(i>>16&255,i>>8&255,i&255,1)}function gf(i,e,t,r){return r<=0&&(i=e=t=NaN),new Ts(i,e,t,r)}function al(i){return i instanceof Ju||(i=pf(i)),i?(i=i.rgb(),new Ts(i.r,i.g,i.b,i.opacity)):new Ts}function Uf(i,e,t,r){return arguments.length===1?al(i):new Ts(i,e,t,r==null?1:r)}function Ts(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}Vs(Ts,Uf,Ru(Ju,{brighter:function(e){return e=e==null?bc:Math.pow(bc,e),new Ts(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?ku:Math.pow(ku,e),new Ts(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Ts(Bu(this.r),Bu(this.g),Bu(this.b),nr(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:il,formatHex:il,formatHex8:Wf,formatRgb:wc,toString:wc}));function il(){return"#".concat(Hs(this.r)).concat(Hs(this.g)).concat(Hs(this.b))}function Wf(){return"#".concat(Hs(this.r)).concat(Hs(this.g)).concat(Hs(this.b)).concat(Hs((isNaN(this.opacity)?1:this.opacity)*255))}function wc(){var i=nr(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(Bu(this.r),", ").concat(Bu(this.g),", ").concat(Bu(this.b)).concat(i===1?")":", ".concat(i,")"))}function nr(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Bu(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Hs(i){return i=Bu(i),(i<16?"0":"")+i.toString(16)}function Yf(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Zs(i,e,t,r)}function ol(i){if(i instanceof Zs)return new Zs(i.h,i.s,i.l,i.opacity);if(i instanceof Ju||(i=pf(i)),!i)return new Zs;if(i instanceof Zs)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new Zs(o,s,u,i.opacity)}function sl(i,e,t,r){return arguments.length===1?ol(i):new Zs(i,e,t,r==null?1:r)}function Zs(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}Vs(Zs,sl,Ru(Ju,{brighter:function(e){return e=e==null?bc:Math.pow(bc,e),new Zs(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ku:Math.pow(ku,e),new Zs(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ts(mf(e>=240?e-240:e+120,a,n),mf(e,a,n),mf(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new Zs(ul(this.h),Fu(this.s),Fu(this.l),nr(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=nr(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(ul(this.h),", ").concat(Fu(this.s)*100,"%, ").concat(Fu(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function ul(i){return i=(i||0)%360,i<0?i+360:i}function Fu(i){return Math.max(0,Math.min(1,i||0))}function mf(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function Sc(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function Mc(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return Sc((t-r/e)*e,o,n,a,s)}}function rs(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return Sc((t-r/e)*e,n,a,o,s)}}var zu=function(i){return function(){return i}};function _c(i,e){return function(t){return i+t*e}}function Xf(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function mu(i,e){var t=e-i;return t?_c(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function yf(i){return(i=+i)==1?Gu:function(e,t){return t-e?Xf(e,t,i):zu(isNaN(e)?t:e)}}function Gu(i,e){var t=e-i;return t?_c(i,t):zu(isNaN(i)?e:i)}var yu=function i(e){var t=yf(e);function r(n,a){var o=t((n=Uf(n)).r,(a=Uf(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),f=Gu(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=i,r}(1);function tf(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=Uf(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var xf=tf(Mc),bf=tf(rs);function Uu(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function jf(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Cc(i,e){return(jf(e)?Uu:Ef)(i,e)}function Ef(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=Sf(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function fl(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function Vf(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function wf(i,e){var t={},r={},n;(i===null||df(i)!=="object")&&(i={}),(e===null||df(e)!=="object")&&(e={});for(n in e)n in i?t[n]=Sf(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var Ps=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hf=new RegExp(Ps.source,"g");function Fl(i){return function(){return i}}function Tc(i){return function(e){return i(e)+""}}function cl(i,e){var t=Ps.lastIndex=Hf.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=Ps.exec(i))&&(n=Hf.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:Vf(r,n)})),t=Hf.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Tc(u[0].x):Fl(e):(e=u.length,function(f){for(var c=0,l;c<e;++c)s[(l=u[c]).i]=l.x(f);return s.join("")})}function Sf(i,e){var t=df(e),r;return e==null||t==="boolean"?zu(e):(t==="number"?Vf:t==="string"?(r=pf(e))?(e=r,yu):cl:e instanceof pf?yu:e instanceof Date?fl:jf(e)?Uu:Array.isArray(e)?Ef:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?wf:Vf)(i,e)}function zl(i){return+i}function ef(i){return i*i}function Gl(i){return i*(2-i)}function ll(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function dd(i){return i*i*i}function Ul(i){return--i*i*i+1}function dl(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var hl=3,Wl=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(hl),Yl=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(hl),Xl=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(hl),vl=Math.PI,pl=vl/2;function jl(i){return+i==1?1:1-Math.cos(i*pl)}function Vl(i){return Math.sin(i*pl)}function Ac(i){return(1-Math.cos(vl*i))/2}function Ks(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function Ic(i){return Ks(1-+i)}function Oc(i){return 1-Ks(i)}function Zf(i){return((i*=2)<=1?Ks(1-i):2-Ks(i-1))/2}function gl(i){return 1-Math.sqrt(1-i*i)}function Dc(i){return Math.sqrt(1- --i*i)}function Kf(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var rf=4/11,ml=6/11,Lc=8/11,Pc=3/4,Nc=9/11,$f=10/11,qf=15/16,Mf=21/22,Qf=63/64,xu=1/rf/rf;function Hl(i){return 1-bu(1-i)}function bu(i){return(i=+i)<rf?xu*i*i:i<Lc?xu*(i-=ml)*i+Pc:i<$f?xu*(i-=Nc)*i+qf:xu*(i-=Mf)*i+Qf}function nf(i){return((i*=2)<=1?1-bu(1-i):bu(i-1)+1)/2}var Rc=1.70158,kc=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(Rc),hd=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(Rc),Zl=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(Rc),_f=2*Math.PI,cu=1,Bc=.3,Kl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=_f);function n(a){return e*Ks(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*_f)},n.period=function(a){return i(e,a)},n}(cu,Bc),yl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=_f);function n(a){return 1-e*Ks(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*_f)},n.period=function(a){return i(e,a)},n}(cu,Bc),vd=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=_f);function n(a){return((a=a*2-1)<0?e*Ks(-a)*Math.sin((r-a)/t):2-e*Ks(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*_f)},n.period=function(a){return i(e,a)},n}(cu,Bc),xl={};function pd(i){return xl[i.toLowerCase()]||L[i]}function xs(i,e){xl[i.toLowerCase()]=e}var $l=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},Cf=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},Eu=[1,0,0,0,1,0,0,0,1];function ql(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,h.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=G(a[s]),f=G(n[s]),f=Bi(f,u),f=ds(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=G(a[s]),f=G(n[s]),f=ds(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var l=u[c],_=f[c],I=[],B=0;B<l.length;B++)(0,h.isNumber)(l[B])&&_&&(0,h.isNumber)(_[B])?(o=Sf(_[B],l[B]),I.push(o(t))):I.push(l[B]);r[s].push(I)}}else if(s==="matrix"){var j=Cc(n[s]||Eu,a[s]||Eu),et=j(t);r[s]=et}else $l(s)&&Cf(a[s])?r[s]=a[s]:(0,h.isFunction)(a[s])||(o=Sf(n[s],a[s]),r[s]=o(t));i.attr(r)}}function bl(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=pd(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else ql(i,e,a);return!1}var Fc=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=qu(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=bl(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),Ql=Fc,As=40,wu=0,Vo=":",hs=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function El(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(Vo+e)>=0)return!0;return!1}function Jl(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function td(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&dc(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var gd=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,h.each)(hs,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,h.each)(hs,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new kf(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===wu&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===wu){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,l=s.clientX-e.clientX,_=s.clientY-e.clientY,I=l*l+_*_;c>120||I>As?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,Jl(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||td(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;Jl(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),md=gd,wl="px",ed=zf(),yd=ed&&ed.name==="firefox",xd=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,h.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new md({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Ql(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");lc&&(n.style.width=t+wl,n.style.height=r+wl)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");lc&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(yd&&!(0,h.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,h.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(Vi),rd=xd,nd=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(Vi),zc=nd,Gc=function(i){(0,b.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=Yt(r,[t.minX,t.minY]),f=Yt(r,[t.maxX,t.minY]),c=Yt(r,[t.minX,t.maxY]),l=Yt(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],l[0]),o=Math.max(u[0],f[0],c[0],l[0]),a=Math.min(u[1],f[1],c[1],l[1]),s=Math.max(u[1],f[1],c[1],l[1])}var _=this.attrs;if(_.shadowColor){var I=_.shadowBlur,B=I===void 0?0:I,j=_.shadowOffsetX,et=j===void 0?0:j,ut=_.shadowOffsetY,ct=ut===void 0?0:ut,pt=n-B+et,St=o+B+et,Vt=a-B+ct,ne=s+B+ct;n=Math.min(n,pt),o=Math.max(o,St),a=Math.min(a,Vt),s=Math.max(s,ne)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(Na),Sl=Gc,ad=new Map;function nu(i,e){ad.set(i,e)}function Ml(i){return ad.get(i)}function Jf(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function Dt(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function Me(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Ve(i,e){return Math.abs(i-e)<.001}function Yr(i,e){var t=(0,h.min)(i),r=(0,h.min)(e),n=(0,h.max)(i),a=(0,h.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function vn(i,e,t,r){return{minX:(0,h.min)([i,t]),maxX:(0,h.max)([i,t]),minY:(0,h.min)([e,r]),maxY:(0,h.max)([e,r])}}function Xr(i){return(i+Math.PI*2)%(Math.PI*2)}var jr={box:function(i,e,t,r){return Yr([i,t],[e,r])},length:function(i,e,t,r){return Me(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return Me(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?Me(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(Gt.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];Gt.normalize(s,s);var u=[n-i,a-e];return Math.abs(Gt.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},An=1e-4;function On(i,e,t,r,n,a){var o,s=1/0,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,l=c/10,_=0;_<=f;_++){var I=_*c,B=[n.apply(null,i.concat([I])),n.apply(null,e.concat([I]))],j=Me(u[0],u[1],B[0],B[1]);j<s&&(o=I,s=j)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var et=i.length;return{x:i[et-1],y:e[et-1]}}s=1/0;for(var _=0;_<32&&!(l<An);_++){var ut=o-l,ct=o+l,B=[n.apply(null,i.concat([ut])),n.apply(null,e.concat([ut]))],j=Me(u[0],u[1],B[0],B[1]);if(ut>=0&&j<s)o=ut,s=j;else{var pt=[n.apply(null,i.concat([ct])),n.apply(null,e.concat([ct]))],St=Me(u[0],u[1],pt[0],pt[1]);ct<=1&&St<s?(o=ct,s=St):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function Pn(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=Me(a,o,s,u)}return t/2}function En(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function zn(i,e,t){var r=i+t-2*e;if(Ve(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function v(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function N(i,e,t,r,n,a,o){var s=En(i,t,n,o),u=En(e,r,a,o),f=jr.pointAt(i,e,t,r,o),c=jr.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function V(i,e,t,r,n,a,o){if(o===0)return(Me(i,e,t,r)+Me(t,r,n,a)+Me(i,e,n,a))/2;var s=N(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),V.apply(null,u)+V.apply(null,f)}var it={box:function(i,e,t,r,n,a){var o=zn(i,t,n)[0],s=zn(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(En(i,t,n,o)),s!==void 0&&f.push(En(e,r,a,s)),Yr(u,f)},length:function(i,e,t,r,n,a){return V(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return On([i,t,n],[e,r,a],o,s,En)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return Me(u.x,u.y,o,s)},interpolationAt:En,pointAt:function(i,e,t,r,n,a,o){return{x:En(i,t,n,o),y:En(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return N(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=v(i,t,n,o),u=v(e,r,a,o),f=Math.atan2(u,s);return Xr(f)}};function vt(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function xt(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function At(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(Ve(n,0))Ve(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;Ve(l,0)?s.push(-a/(2*n)):l>0&&(c=Math.sqrt(l),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function Nt(i,e,t,r,n,a,o,s,u){var f=vt(i,t,n,o,u),c=vt(e,r,a,s,u),l=jr.pointAt(i,e,t,r,u),_=jr.pointAt(t,r,n,a,u),I=jr.pointAt(n,a,o,s,u),B=jr.pointAt(l.x,l.y,_.x,_.y,u),j=jr.pointAt(_.x,_.y,I.x,I.y,u);return[[i,e,l.x,l.y,B.x,B.y,f,c],[f,c,j.x,j.y,I.x,I.y,o,s]]}function Zt(i,e,t,r,n,a,o,s,u){if(u===0)return Pn([i,t,n,o],[e,r,a,s]);var f=Nt(i,e,t,r,n,a,o,s,.5),c=f[0],l=f[1];return c.push(u-1),l.push(u-1),Zt.apply(null,c)+Zt.apply(null,l)}var ie={extrema:At,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=At(i,t,n,o),l=At(e,r,a,s),_=0;_<c.length;_++)u.push(vt(i,t,n,o,c[_]));for(var _=0;_<l.length;_++)f.push(vt(e,r,a,s,l[_]));return Yr(u,f)},length:function(i,e,t,r,n,a,o,s){return Zt(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return On([i,t,n,o],[e,r,a,s],u,f,vt,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return Me(l.x,l.y,u,f)},interpolationAt:vt,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:vt(i,t,n,o,u),y:vt(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return Nt(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=xt(i,t,n,o,u),c=xt(e,r,a,s,u);return Xr(Math.atan2(c,f))}};function _e(i,e){var t=Math.abs(i);return e>0?t:t*-1}var Ee={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),l=Math.abs(f),_=o*o,I=s*s,B=Math.PI/4,j,et,ut=0;ut<4;ut++){j=o*Math.cos(B),et=s*Math.sin(B);var ct=(_-I)*Math.pow(Math.cos(B),3)/o,pt=(I-_)*Math.pow(Math.sin(B),3)/s,St=j-ct,Vt=et-pt,ne=c-ct,re=l-pt,Ce=Math.hypot(Vt,St),We=Math.hypot(re,ne),Ne=Ce*Math.asin((St*re-Vt*ne)/(Ce*We)),rr=Ne/Math.sqrt(_+I-j*j-et*et);B+=rr,B=Math.min(Math.PI/2,Math.max(0,B))}return{x:i+_e(j,u),y:e+_e(et,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return Me(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return Xr(o)}};function Xe(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function yr(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function tn(i,e,t){return Math.atan(-e/i*Math.tan(t))}function _r(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function Ar(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function Tr(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function Dn(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function jn(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function Fn(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var la={box:function(i,e,t,r,n,a,o){for(var s=tn(t,r,n),u=1/0,f=-1/0,c=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var _=s+l;a<o?a<_&&_<o&&c.push(_):o<_&&_<a&&c.push(_)}for(var l=0;l<c.length;l++){var I=Ar(i,e,t,r,n,c[l]);I<u&&(u=I),I>f&&(f=I)}for(var B=_r(t,r,n),j=1/0,et=-1/0,ut=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var ct=B+l;a<o?a<ct&&ct<o&&ut.push(ct):o<ct&&ct<a&&ut.push(ct)}for(var l=0;l<ut.length;l++){var pt=Tr(i,e,t,r,n,ut[l]);pt<j&&(j=pt),pt>et&&(et=pt)}return{x:u,y:j,width:f-u,height:et-j}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=Fn(s-i,u-e,-n),c=f[0],l=f[1],_=Ee.nearestPoint(0,0,t,r,c,l),I=Dn(t,r,_.x,_.y);I<a?_=jn(t,r,a):I>o&&(_=jn(t,r,o));var B=Fn(_.x,_.y,n);return{x:B[0]+i,y:B[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return Me(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:Ar(i,e,t,r,n,u),y:Tr(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=Xe(i,e,t,r,n,a,o,u),c=yr(i,e,t,r,n,a,o,u);return Xr(Math.atan2(c,f))}};function ua(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=Me(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function ba(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=Me(r[0],r[1],n[0],n[1])}return e}function Ra(i,e){if(e>1||e<0||i.length<2)return null;var t=ua(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){var _=(e-a)/l;o=jr.pointAt(f[0],f[1],c[0],c[1],_);break}a+=l}return o}function Aa(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=ua(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=l}return o}function eo(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=jr.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var Fa={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return Yr(e,t)},length:function(i){return ba(i)},pointAt:function(i,e){return Ra(i,e)},pointDistance:function(i,e,t){return eo(i,e,t)},tangentAngle:function(i,e){return Aa(i,e)}};function go(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var Qi={box:function(i){return Fa.box(i)},length:function(i){return ba(go(i))},pointAt:function(i,e){return Ra(go(i),e)},pointDistance:function(i,e,t){return eo(go(i),e,t)},tangentAngle:function(i,e){return Aa(go(i),e)}};function fi(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function mo(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=fi(e,n)),r&&(a=r.getCanvasBBox(),e=fi(e,a)),e}function Bo(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=Yr(r,n),u=s.x,f=s.y,c=s.width,l=s.height,_={minX:u,minY:f,maxX:u+c,maxY:f+l};return _=mo(i,_),{x:_.minX,y:_.minY,width:_.maxX-_.minX,height:_.maxY-_.minY}}function ns(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return Yr(r,n)}var us=null;function Ho(){if(!us){var i=document.createElement("canvas");i.width=1,i.height=1,us=i.getContext("2d")}return us}function Za(i,e,t){var r=1;if((0,h.isString)(i)&&(r=i.split(`
`).length),r>1){var n=bs(e,t);return e*r+n*(r-1)}return e}function bs(i,e){return e?e-i:i*.14}function Pi(i,e){var t=Ho(),r=0;if((0,h.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,h.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,h.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function Sa(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function ci(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Sa(e));var u=Pi(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,l=e.textBaseline,_=Za(n,a,o),I={x:t,y:r-_};c&&(c==="end"||c==="right"?I.x-=u:c==="center"&&(I.x-=u/2)),l&&(l==="top"?I.y+=_:l==="middle"&&(I.y+=_/2)),f={x:I.x,y:I.y,width:u,height:_}}return f}var wi=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,qo=/[^\s\,]+/ig;function Wu(i){var e=i||[];if((0,h.isArray)(e))return e;if((0,h.isString)(e))return e=e.match(wi),(0,h.each)(e,function(t,r){if(t=t.match(qo),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,h.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var tc=Wu;function Ye(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,l,_;if(a){u=r[0],f=r[1];for(var I=0,B=i.length;I<B;I+=1){var j=i[I];u=Gt.min([0,0],u,j),f=Gt.max([0,0],f,j)}}for(var I=0,et=i.length;I<et;I+=1){var j=i[I];if(I===0&&!t)_=j;else if(I===et-1&&!t)l=j,n.push(_),n.push(l);else{var ut=[I?I-1:et-1,I-1][t?0:1];o=i[ut],s=i[t?(I+1)%et:I+1];var ct=[0,0];ct=Gt.sub(ct,s,o),ct=Gt.scale(ct,ct,e);var pt=Gt.distance(j,o),St=Gt.distance(j,s),Vt=pt+St;Vt!==0&&(pt/=Vt,St/=Vt);var ne=Gt.scale([0,0],ct,-pt),re=Gt.scale([0,0],ct,St);l=Gt.add([0,0],j,ne),c=Gt.add([0,0],j,re),c=Gt.min([0,0],c,Gt.max([0,0],s,j)),c=Gt.max([0,0],c,Gt.min([0,0],s,j)),ne=Gt.sub([0,0],c,j),ne=Gt.scale([0,0],ne,-pt/St),l=Gt.add([0,0],j,ne),l=Gt.min([0,0],l,Gt.max([0,0],o,j)),l=Gt.max([0,0],l,Gt.min([0,0],o,j)),re=Gt.sub([0,0],j,l),re=Gt.scale([0,0],re,St/pt),c=Gt.add([0,0],j,re),a&&(l=Gt.max([0,0],l,u),l=Gt.min([0,0],l,f),c=Gt.max([0,0],c,u),c=Gt.min([0,0],c,f)),n.push(_),n.push(l),_=c}}return t&&n.push(n.shift()),n}function $r(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=Ye(n,.4,r,t),u=n.length,f=[],c,l,_,a=0;a<u-1;a+=1)c=s[a*2],l=s[a*2+1],_=n[a+1],f.push(["C",c[0],c[1],l[0],l[1],_[0],_[1]]);return r&&(c=s[u],l=s[u+1],_=n[0],f.push(["C",c[0],c[1],l[0],l[1],_[0],_[1]])),f}var Wr=$r;function na(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var ii=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,_=s[u-1][f-1].min+o;s[u][f]=na(c,l,_)}}return s};function ze(i,e){var t=ii(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var be=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,or=new RegExp("([a-z])["+be+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+be+"]*,?["+be+"]*)+)","ig"),Dr=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+be+"]*,?["+be+"]*","ig");function Lr(i){if(!i)return null;if((0,h.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(or,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(Dr,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var lr=/[a-z]/;function sr(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Sr(i){var e=Lr(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(lr.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,l,_,I=e[0];(I[0]==="M"||I[0]==="m")&&(o=+I[1],s=+I[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,B=e.length;r<B;r++){var j=e[r],et=a[r-1],ut=[],n=j[0],ct=n.toUpperCase();if(n!==ct)switch(ut[0]=ct,ct){case"A":ut[1]=j[1],ut[2]=j[2],ut[3]=j[3],ut[4]=j[4],ut[5]=j[5],ut[6]=+j[6]+o,ut[7]=+j[7]+s;break;case"V":ut[1]=+j[1]+s;break;case"H":ut[1]=+j[1]+o;break;case"M":u=+j[1]+o,f=+j[2]+s,ut[1]=u,ut[2]=f;break;default:for(var pt=1,St=j.length;pt<St;pt++)ut[pt]=+j[pt]+(pt%2?o:s)}else ut=e[r];switch(ct){case"Z":o=+u,s=+f;break;case"H":o=ut[1],ut=["L",o,s];break;case"V":s=ut[1],ut=["L",o,s];break;case"T":o=ut[1],s=ut[2];var Vt=sr([et[1],et[2]],[et[3],et[4]]);ut=["Q",Vt[0],Vt[1],o,s];break;case"S":o=ut[ut.length-2],s=ut[ut.length-1];var ne=et.length,re=sr([et[ne-4],et[ne-3]],[et[ne-2],et[ne-1]]);ut=["C",re[0],re[1],ut[1],ut[2],o,s];break;case"M":u=ut[ut.length-2],f=ut[ut.length-1];break;default:o=ut[ut.length-2],s=ut[ut.length-1]}a.push(ut)}return a}var ke=Math.PI*2,er=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},De=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},Cr=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},Rr=function(i,e,t,r,n,a,o,s,u,f,c,l){var _=Math.pow(n,2),I=Math.pow(a,2),B=Math.pow(c,2),j=Math.pow(l,2),et=_*I-_*j-I*B;et<0&&(et=0),et/=_*j+I*B,et=Math.sqrt(et)*(o===s?-1:1);var ut=et*n/a*l,ct=et*-a/n*c,pt=f*ut-u*ct+(i+t)/2,St=u*ut+f*ct+(e+r)/2,Vt=(c-ut)/n,ne=(l-ct)/a,re=(-c-ut)/n,Ce=(-l-ct)/a,We=Cr(1,0,Vt,ne),Ne=Cr(Vt,ne,re,Ce);return s===0&&Ne>0&&(Ne-=ke),s===1&&Ne<0&&(Ne+=ke),[pt,St,We,Ne]},ln=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,l=i.sweepFlag,_=l===void 0?0:l,I=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var B=Math.sin(u*ke/360),j=Math.cos(u*ke/360),et=j*(e-r)/2+B*(t-n)/2,ut=-B*(e-r)/2+j*(t-n)/2;if(et===0&&ut===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var ct=Math.pow(et,2)/Math.pow(a,2)+Math.pow(ut,2)/Math.pow(o,2);ct>1&&(a*=Math.sqrt(ct),o*=Math.sqrt(ct));var pt=Rr(e,t,r,n,a,o,c,_,B,j,et,ut),St=pt[0],Vt=pt[1],ne=pt[2],re=pt[3],Ce=Math.abs(re)/(ke/4);Math.abs(1-Ce)<1e-7&&(Ce=1);var We=Math.max(Math.ceil(Ce),1);re/=We;for(var Ne=0;Ne<We;Ne++)I.push(De(ne,re)),ne+=re;return I.map(function(rr){var wr=er(rr[0],a,o,j,B,St,Vt),dn=wr.x,Gn=wr.y,In=er(rr[1],a,o,j,B,St,Vt),an=In.x,ta=In.y,$n=er(rr[2],a,o,j,B,St,Vt),on=$n.x,Tn=$n.y;return{x1:dn,y1:Gn,x2:an,y2:ta,x:on,y:Tn}})};function pn(i,e,t,r,n,a,o,s,u){var f=ln({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,l){var _=l.x1,I=l.y1,B=l.x2,j=l.y2,et=l.x,ut=l.y;return c.push(_,I,B,j,et,ut),c},[])}function rn(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function Rn(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),pa(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function pa(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var Ka=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},fa=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],_=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],I=0,B=0;B<c;B++){var j=f*l[B]+f,et=Ka(j,i,t,n,o),ut=Ka(j,e,r,a,s),ct=et*et+ut*ut;I+=_[B]*Math.sqrt(ct)}return f*I},Ca=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,_,I,B=0;B<2;++B){if(B===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,_=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,_=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;I=-_/l,I>0&&I<1&&u.push(I);continue}var j=l*l-4*_*c,et=Math.sqrt(j);if(!(j<0)){var ut=(-l+et)/(2*c);ut>0&&ut<1&&u.push(ut);var ct=(-l-et)/(2*c);ct>0&&ct<1&&u.push(ct)}}for(var pt=u.length,St=pt,Vt;pt--;)I=u[pt],Vt=1-I,f[0][pt]=Vt*Vt*Vt*i+3*Vt*Vt*I*t+3*Vt*I*I*n+I*I*I*o,f[1][pt]=Vt*Vt*Vt*e+3*Vt*Vt*I*r+3*Vt*I*I*a+I*I*I*s;return f[0][St]=i,f[1][St]=e,f[0][St+1]=o,f[1][St+1]=s,f[0].length=f[1].length=St+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Xa=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,_=f/c,I=+l.toFixed(2),B=+_.toFixed(2);if(!(I<+Math.min(i,t).toFixed(2)||I>+Math.max(i,t).toFixed(2)||I<+Math.min(n,o).toFixed(2)||I>+Math.max(n,o).toFixed(2)||B<+Math.min(e,r).toFixed(2)||B>+Math.max(e,r).toFixed(2)||B<+Math.min(a,s).toFixed(2)||B>+Math.max(a,s).toFixed(2)))return{x:l,y:_}}}},li=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Fo=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},zs=function(i,e){return i=Fo(i),e=Fo(e),li(e,i.x,i.y)||li(e,i.x2,i.y)||li(e,i.x,i.y2)||li(e,i.x2,i.y2)||li(i,e.x,e.y)||li(i,e.x2,e.y)||li(i,e.x,e.y2)||li(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},id=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=Ca.apply(null,i);return Fo(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},au=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),_=u*u,I=_*u,B=c*i+l*3*u*t+f*3*u*u*n+I*o,j=c*e+l*3*u*r+f*3*u*u*a+I*s,et=i+2*u*(t-i)+_*(n-2*t+i),ut=e+2*u*(r-e)+_*(a-2*r+e),ct=t+2*u*(n-t)+_*(o-2*n+t),pt=r+2*u*(a-r)+_*(s-2*a+r),St=f*i+u*t,Vt=f*e+u*r,ne=f*n+u*o,re=f*a+u*s,Ce=90-Math.atan2(et-ct,ut-pt)*180/Math.PI;return{x:B,y:j,m:{x:et,y:ut},n:{x:ct,y:pt},start:{x:St,y:Vt},end:{x:ne,y:re},alpha:Ce}},Ud=function(i,e,t){var r=id(i),n=id(e);if(!zs(r,n))return t?0:[];for(var a=fa.apply(0,i),o=fa.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},_=t?0:[],I=0;I<s+1;I++){var B=au.apply(0,i.concat(I/s));f.push({x:B.x,y:B.y,t:I/s})}for(var I=0;I<u+1;I++){var B=au.apply(0,e.concat(I/u));c.push({x:B.x,y:B.y,t:I/u})}for(var I=0;I<s;I++)for(var j=0;j<u;j++){var et=f[I],ut=f[I+1],ct=c[j],pt=c[j+1],St=Math.abs(ut.x-et.x)<.001?"y":"x",Vt=Math.abs(pt.x-ct.x)<.001?"y":"x",ne=Xa(et.x,et.y,ut.x,ut.y,ct.x,ct.y,pt.x,pt.y);if(ne){if(l[ne.x.toFixed(4)]===ne.y.toFixed(4))continue;l[ne.x.toFixed(4)]=ne.y.toFixed(4);var re=et.t+Math.abs((ne[St]-et[St])/(ut[St]-et[St]))*(ut.t-et.t),Ce=ct.t+Math.abs((ne[Vt]-ct[Vt])/(pt[Vt]-ct[Vt]))*(pt.t-ct.t);re>=0&&re<=1&&Ce>=0&&Ce<=1&&(t?_++:_.push({x:ne.x,y:ne.y,t1:re,t2:Ce}))}}return _},Su=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,l,_,I=t?0:[],B=0,j=i.length;B<j;B++){var et=i[B];if(et[0]==="M")r=s=et[1],n=u=et[2];else{et[0]==="C"?(l=[r,n].concat(et.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ut=0,ct=e.length;ut<ct;ut++){var pt=e[ut];if(pt[0]==="M")a=f=pt[1],o=c=pt[2];else{pt[0]==="C"?(_=[a,o].concat(pt.slice(1)),a=_[6],o=_[7]):(_=[a,o,a,o,f,c,f,c],a=f,o=c);var St=Ud(l,_,t);if(t)I+=St;else{for(var Vt=0,ne=St.length;Vt<ne;Vt++)St[Vt].segment1=B,St[Vt].segment2=ut,St[Vt].bez1=l,St[Vt].bez2=_;I=I.concat(St)}}}}}return I};function Oh(i,e){return Su(i,e)}function Wd(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Dh(i,e){return Wd(i)*Wd(e)?(i[0]*e[0]+i[1]*e[1])/(Wd(i)*Wd(e)):1}function kv(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Dh(i,e))}function Lh(i,e){return i[0]===e[0]&&i[1]===e[1]}function K0(i,e){var t=e[1],r=e[2],n=(0,h.mod)((0,h.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,_=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,I=l*l/(t*t)+_*_/(r*r);I>1&&(t*=Math.sqrt(I),r*=Math.sqrt(I));var B=t*t*(_*_)+r*r*(l*l),j=B?Math.sqrt((t*t*(r*r)-B)/B):1;a===o&&(j*=-1),isNaN(j)&&(j=0);var et=r?j*t*_/r:0,ut=t?j*-r*l/t:0,ct=(s+f)/2+Math.cos(n)*et-Math.sin(n)*ut,pt=(u+c)/2+Math.sin(n)*et+Math.cos(n)*ut,St=[(l-et)/t,(_-ut)/r],Vt=[(-1*l-et)/t,(-1*_-ut)/r],ne=kv([1,0],St),re=kv(St,Vt);return Dh(St,Vt)<=-1&&(re=Math.PI),Dh(St,Vt)>=1&&(re=0),o===0&&re>0&&(re=re-2*Math.PI),o===1&&re<0&&(re=re+2*Math.PI),{cx:ct,cy:pt,rx:Lh(i,[f,c])?0:t,ry:Lh(i,[f,c])?0:r,startAngle:ne,endAngle:ne+re,xRotation:n,arcFlag:a,sweepFlag:o}}function Bv(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Fv(i){i=tc(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=K0(t,u);c.arcParams=l;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var _=u.length;t=[u[_-2],u[_-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&Lh(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var I=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=I;var B=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[B[0]-t[0],B[1]-t[1]],c.endTangent=[t[0]-B[0],t[1]-B[1]];else if(f==="Q"){var j=[u[1],u[2]];c.startTangent=[B[0]-j[0],B[1]-j[1]],c.endTangent=[t[0]-j[0],t[1]-j[1]]}else if(f==="T"){var et=e[s-1],j=Bv(et.currentPoint,B);et.command==="Q"?(c.command="Q",c.startTangent=[B[0]-j[0],B[1]-j[1]],c.endTangent=[t[0]-j[0],t[1]-j[1]]):(c.command="TL",c.startTangent=[B[0]-t[0],B[1]-t[1]],c.endTangent=[t[0]-B[0],t[1]-B[1]])}else if(f==="C"){var ut=[u[1],u[2]],ct=[u[3],u[4]];c.startTangent=[B[0]-ut[0],B[1]-ut[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[ut[0]-ct[0],ut[1]-ct[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[ct[0]-ut[0],ct[1]-ut[1]])}else if(f==="S"){var et=e[s-1],ut=Bv(et.currentPoint,B),ct=[u[1],u[2]];et.command==="C"?(c.command="C",c.startTangent=[B[0]-ut[0],B[1]-ut[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]]):(c.command="SQ",c.startTangent=[B[0]-ct[0],B[1]-ct[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]])}else if(f==="A"){var pt=.001,St=c.arcParams||{},Vt=St.cx,ne=Vt===void 0?0:Vt,re=St.cy,Ce=re===void 0?0:re,We=St.rx,Ne=We===void 0?0:We,rr=St.ry,wr=rr===void 0?0:rr,dn=St.sweepFlag,Gn=dn===void 0?0:dn,In=St.startAngle,an=In===void 0?0:In,ta=St.endAngle,$n=ta===void 0?0:ta;Gn===0&&(pt*=-1);var on=Ne*Math.cos(an-pt)+ne,Tn=wr*Math.sin(an-pt)+Ce;c.startTangent=[on-n[0],Tn-n[1]];var Un=Ne*Math.cos(an+$n+pt)+ne,Wn=wr*Math.sin(an+$n-pt)+Ce;c.endTangent=[B[0]-Un,B[1]-Wn]}e.push(c)}return e}function zv(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function $0(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function Gv(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function q0(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function qS(i,e){if(i.length<2||e.length<2)return!1;var t=Gv(i),r=Gv(e);if(!q0(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=zv(i),o=zv(e),s=!1;return each(o,function(u){if($0(a,u))return s=!0,!1}),s}function Q0(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=it.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=ie.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;c=la.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(ut){return!Number.isNaN(ut)&&ut!==1/0&&ut!==-1/0}),r=r.filter(function(ut){return!Number.isNaN(ut)&&ut!==1/0&&ut!==-1/0});var _=(0,h.min)(t),I=(0,h.min)(r),B=(0,h.max)(t),j=(0,h.max)(r);if(n.length===0)return{x:_,y:I,width:B-_,height:j-I};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,et=void 0;s[0]===_?(et=Yd(o,e),_=_-et.xExtra):s[0]===B&&(et=Yd(o,e),B=B+et.xExtra),s[1]===I?(et=Yd(o,e),I=I-et.yExtra):s[1]===j&&(et=Yd(o,e),j=j+et.yExtra)}return{x:_,y:I,width:B-_,height:j-I}}function Yd(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,h.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var l={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function J0(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||Fv(t),o=Q0(a,n),s=o.x,u=o.y,f=o.width,c=o.height,l={minX:s,minY:u,maxX:s+f,maxY:u+c};return l=mo(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function tm(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=mo(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function em(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}nu("rect",Jf),nu("image",Jf),nu("circle",Dt),nu("marker",Dt),nu("polyline",Bo),nu("polygon",ns),nu("text",ci),nu("path",J0),nu("line",tm),nu("ellipse",em);var QS="0.5.11",rm=function(i){(0,b.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(kf),Ph=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},Nh=function(e){if((0,h.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,h.isNumber)(e))return[e,e,e,e];if((0,h.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},nm=function(e){var t=new rm(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},am=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Tf=function(e){return Number.isNaN(Number(e))},Uv=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,l=u.maxX,_=u.maxY;f<t&&(t=f),c<n&&(n=c),l>r&&(r=l),_>a&&(a=_)}var I=Math.floor(t),B=Math.floor(n),j=Math.ceil(r)-Math.floor(t),et=Math.ceil(a)-Math.floor(n);return{x:I,y:B,width:j,height:et,minX:t,minY:n,maxX:r,maxY:a}},im=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],l={},_=0;_<o;_++){var I=e[_],B=I.source,j=I.target,et="".concat(B,"-").concat(j);if(!c[_]){f[et]||(f[et]=[]),c[_]=!0,f[et].push(I);for(var ut=0;ut<o;ut++)if(_!==ut){var ct=e[ut],pt=ct.source,St=ct.target;c[ut]||(B===St&&j===pt?(f[et].push(ct),c[ut]=!0,l["".concat(pt,"|").concat(St,"|").concat(f[et].length-1)]=!0):B===pt&&j===St&&(f[et].push(ct),c[ut]=!0))}}}for(var Vt in f)for(var ne=f[Vt],re=ne.length,Ce=0;Ce<re;Ce++){var We=ne[Ce];if(We.source===We.target){a&&(We.type=a),We.loopCfg={position:u[Ce%8],dist:Math.floor(Ce/8)*20+50};continue}if(re===1&&n&&We.source!==We.target){We.type=n;continue}We.type=r;var Ne=(Ce%2===0?1:-1)*(l["".concat(We.source,"|").concat(We.target,"|").concat(Ce)]?-1:1);re%2===1?We.curveOffset=Ne*Math.ceil(Ce/2)*s:We.curveOffset=Ne*(Math.floor(Ce/2)*s+t)}return e},Wv=C(731278),om=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(St){var Vt=St.getModel(),ne=Vt.x,re=Vt.y;s>ne&&(s=ne),u>re&&(u=re),f<ne&&(f=ne),c<re&&(c=re)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],_=mn({x:s,y:u},l),I=_.x,B=_.y,j=mn({x:f,y:c},l),et=j.x,ut=j.y;a={minX:I,maxX:et,minY:B,maxY:ut,width:et-I,height:ut-B,x:I,y:B}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var ct=this.getViewCenter(),pt={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(ct.x-pt.x,ct.y-pt.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,_=n.y+a.y-o.y-n.minY;if(!(Tf(l)||Tf(_))){var I=(0,Wv.vs)(c,[["t",l,_]]);if(!u){var B=ms({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:I})}});e.animate(function(St){return{matrix:Qa(t,I,St)}},B);return}var j=f.get("minZoom"),et=f.get("maxZoom"),ut=s;j&&s<j?(ut=j,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):et&&s>et&&(ut=et,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var ct=(0,Wv.vs)(I,[["t",-a.x,-a.y],["s",ut,ut],["t",a.x,a.y]]),pt=ms({animateCfg:r,callback:function(){e.setMatrix(ct),f.emit("viewportchange",{action:"translate",matrix:I}),f.emit("viewportchange",{action:"zoom",matrix:ct})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(St){return{matrix:Qa(t,ct,St)}},pt)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=1/0,_=1/0,I=-1/0,B=-1/0;c.forEach(function(ne){var re=ne.getModel(),Ce=re.x,We=re.y;l>Ce&&(l=Ce),_>We&&(_=We),I<Ce&&(I=Ce),B<We&&(B=We)}),f={minX:l,maxX:I,minY:_,maxY:B,width:I-l,height:B-_,x:l,y:_}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var j=this.getViewCenter(),et={x:f.x+f.width/2,y:f.y+f.height/2},ut=(a-n[1]-n[3])/f.width,ct=(o-n[0]-n[2])/f.height,pt=ut;if(ut>ct&&(pt=ct),e)this.animatedFitView(s,u,t,f,j,et,pt,!0);else{var St=j.x-et.x,Vt=j.y-et.y;if(Tf(St)||Tf(Vt))return;r.translate(St,Vt),r.zoom(pt,j)||console.warn("zoom failed, ratio out of range, ratio: %f",pt)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,l=this.getFormatPadding(),_=c.get("width"),I=c.get("height"),B=c.get("group"),j=B.getMatrix()||[1,0,0,0,1,0,0,0,1];B.resetMatrix();var et,ut=c.getNodes();if(ut.length>c.get("optimizeThreshold")){var ct=1/0,pt=1/0,St=-1/0,Vt=-1/0;ut.forEach(function(Gn){var In=Gn.getModel(),an=In.x,ta=In.y;ct>an&&(ct=an),pt>ta&&(pt=ta),St<an&&(St=an),Vt<ta&&(Vt=ta)}),et={minX:ct,maxX:St,minY:pt,maxY:Vt,width:St-ct,height:Vt-pt,x:ct,y:pt}}else et=B.getCanvasBBox();if(!(et.width===0||et.height===0)){var ne=this.getViewCenter(),re={x:et.x+et.width/2,y:et.y+et.height/2},Ce=(_-l[1]-l[3])/et.width,We=(I-l[0]-l[2])/et.height,Ne;if(s==="x"?Ne=Ce:s==="y"?Ne=We:Ne=f==="max"?Math.max(Ce,We):Math.min(Ce,We),a&&(Ne=Ne<1?Ne:1),t)this.animatedFitView(B,j,r,et,ne,re,Ne,!0);else{var rr=c.getZoom(),wr=rr*Ne,dn=c.get("minZoom");wr<dn&&(wr=dn,console.warn("fitview failed, ratio out of range, ratio: %f",Ne,"graph minzoom has been used instead")),c.translate(ne.x-re.x,ne.y-re.y),c.zoomTo(wr,ne)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Nh(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,l=0,_=0,I=0;this.graph.get("canvas").animate(function(B){_=u*B,I=f*B,n.graph.translate(_-c,I-l),c=_,l=I},(0,b.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=Bn({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),mn({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,h.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},_=0,I=e;_<I.length;_++){var B=I[_],j=B.getBBox();j.minX<l.minX&&(l.minX=j.minX),j.minY<l.minY&&(l.minY=j.minY),j.maxX>l.maxX&&(l.maxX=j.maxX),j.maxY>l.maxY&&(l.maxY=j.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var et=this.getViewCenter(),ut={x:l.x+l.width/2,y:l.y+l.height/2},ct=(s-o[1]-o[3])/l.width,pt=(u-o[0]-o[2])/l.height,St=ct;ct>pt&&(St=pt),r?this.animatedFitView(f,c,n,l,et,ut,St,t):(a.translate(et.x-ut.x,et.y-ut.y),t&&!a.zoom(St,et)&&console.warn("zoom failed, ratio out of range, ratio: %f",St))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,h.isNumber)(e)||!(0,h.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),sm=om;function Rh(i){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(i)}function Yv(i){if(typeof i!="string")return i;var e=function(re){if(typeof re!="string")return re;try{return JSON.parse(re.trim())}catch(Ce){return re.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(re){return re[re.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var re=[],Ce=0;Ce<arguments.length;Ce++)re[Ce]=arguments[Ce];return re.some(function(We){return r(o)===We})},u=function(){return r(a)},f=null,c=0,l="";c<n.length;){var _=n[c],I=s('"',"'");if(!I&&!_.trim()){c+=1;continue}var B=n[c-1]==="\\",j=s("}"),et=s("]"),ut=s(","),ct=u();if(I)if(r(o)===_&&!B){o.pop();var pt=e(l);ct.push(pt),f=pt,l=""}else l+=_;else if(et&&_===",")l&&(ct.push(e(l)),l="");else if(j&&_===":")o.push(","),l&&(ct.push(l),l="");else if(ut&&_===",")l&&(ct.push(e(l)),l=""),o.pop();else if(_==="}"&&(j||ut)){l&&(ct.push(e(l)),l=""),ut&&o.pop();for(var St={},Vt=1;Vt<ct.length;Vt+=2)St[ct[Vt-1]]=ct[Vt];a.pop(),a.length&&r(a).push(St),o.pop(),f=St}else _==="]"&&et?(l&&(ct.push(e(l)),l=""),a.pop(),a.length&&r(a).push(ct),o.pop(),f=ct):_==="{"?(a.push([]),o.push("}")):_==="["?(a.push([]),o.push("]")):_==='"'?o.push('"'):_==="'"?o.push("'"):l+=_;c+=1}return f||l}var um=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},fm=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,h.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Xv(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Xv(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=um(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=Yv(f);t=(0,b.__assign)((0,b.__assign)({},t),c)}else a[u]=Yv(f)}catch(l){if(u==="style")throw l;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&Rh(e.style[a.name])==="object"&&(a.attrs=(0,b.__assign)((0,b.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,b.__assign)((0,b.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function cm(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=ls(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,b.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function jv(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,b.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,b.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=jv(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=cm(i,e,r),i.attrs=(0,b.__assign)((0,b.__assign)({},i.attrs),i.bbox),i}function Vv(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],l=i.children||[],_=0;_<f;_+=1)u.push(Vv(l[_],c[_]));var I=Object.keys(e.attrs),B=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:I.filter(function(j){return j!=="children"}).some(function(j){return i.attrs[j]!==e.attrs[j]||!B.includes(j)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Hv(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=fm(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=jv(Xv(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var l=c.attrs,_=l===void 0?{}:l,I=c.bbox,B=c.type,j=c.children,et=(0,b.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var ut=a.addShape(c.type,(0,b.__assign)({attrs:_,origin:{bbox:I,type:B,children:j}},et));c.keyshape&&(s=ut)}c.children&&c.children.forEach(function(ct){return f(ct)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=Vv(u,f),l=function B(j){var et;j.type!=="group"&&o.addShape(j.type,{attrs:j.attrs}),!((et=j.children)===null||et===void 0)&&et.length&&j.children.map(function(ut){return B(ut)})},_=function B(j){var et,ut=s.find(function(ct){return ct.attrs.key===j.attrs.key});ut&&o.removeChild(ut),!((et=j.children)===null||et===void 0)&&et.length&&j.children.map(function(ct){return B(ct)})},I=function B(j){var et=j.key;if(j.type!=="group"){var ut=s.find(function(pt){return pt.attrs.key===et});switch(j.action){case"change":if(ut){var ct=j.val.keyshape?a.getOriginStyle():{};ut.attr((0,b.__assign)((0,b.__assign)({},ct),j.val.attrs))}break;case"add":l(j.val);break;case"delete":_(j.val);break;case"restructure":_(j.formerTarget),l(j.nowTarget);break;default:break}}j.children&&j.children.forEach(function(pt){return B(pt)})};I(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var kh={};function Zv(i){return kh[i]||(kh[i]=(0,h.upperFirst)(i)),kh[i]}var lm={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Bh={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Xd=function(){function i(){}return i.registerFactory=function(e,t){var r=Zv(e),n=lm,a=(0,b.__assign)((0,b.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=Zv(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Hv(t);a=(0,b.__assign)((0,b.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Hv(s);a=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Bh;a=(0,b.__assign)((0,b.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Bh,o=(0,b.__assign)((0,b.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Bh,o=(0,b.__assign)((0,b.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),Ns=Xd;Xd.registerFactory("node",{defaultShapeType:"circle"}),Xd.registerFactory("edge",{defaultShapeType:"line"}),Xd.registerFactory("combo",{defaultShapeType:"circle"});var Fh="bboxCache",zh="bboxCanvasCache",JS=null,dm=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Ph(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,h.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=Ai(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=Ai(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var I=this.get("originStyle");a&&!I[a]&&(I[a]={});for(var B=this.getCurrentStatesStyle(),j=function(ut){var ct=t[ut],pt=ct.get("name"),St=ct.attr();if(pt&&pt!==a){var Vt=B[pt];I[pt]||(I[pt]={}),Vt?Object.keys(St).forEach(function(Ce){var We=St[Ce];We!==Vt[Ce]&&(I[pt][Ce]=We)}):I[pt]=ct.get("type")!=="image"?(0,h.clone)(St):n.getShapeStyleByName(pt)}else{var ne=ct.attr(),re={};Object.keys(B).forEach(function(Ce){var We=B[Ce];(Ce===a||!(0,h.isPlainObject)(We))&&(re[Ce]=We)}),Object.keys(ne).forEach(function(Ce){var We=ne[Ce];re[Ce]!==We&&(a?I[a][Ce]=We:I[Ce]=We)})}},s=0;s<t.length;s++)j(s);delete I.path,delete I.matrix,delete I.x,delete I.y,I[a]&&(delete I[a].x,delete I[a].y,delete I[a].matrix,delete I[a].path),n.set("originStyle",I)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,h.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(c)o[a]=l;else{var _=Ph("shape");u.set("name",_),e.shapeMap[_]=u,o[_]=f!=="image"?(0,h.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,h.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=Ns.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,h.isPlainObject)(e)?this._cfg=(0,b.__assign)((0,b.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Fh,null),this.set(zh,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]||t.find(function(a){return a.get("name")===e}):r=this.getKeyShape(),r){var n={};return(0,h.each)(r.attr(),function(a,o){(o!=="img"||(0,h.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,b.__assign)((0,b.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,h.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,h.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,h.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,h.isString)(t)){var f=r.filter(function(_){return _.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(_){return!_.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),l=c.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,h.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,h.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),Ma(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(Fh);return e||(e=this.calculateBBox(),this.set(Fh,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(zh);return e||(e=this.calculateCanvasBBox(),this.set(zh,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),Kv=dm,jd={source:"start",target:"end"},Af="Node",od="Point",hm="Anchor",vm=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=jd[t]+od,a=t+Af,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,h.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=jd[t]+od,o=t+Af,s=this.get(a);if(!s){var u=this.get(o),f=t+hm,c=this.getPrePoint(t,n),l=r[f];(0,h.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(c),(0,h.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+Af,n=jd[t]+od,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+Af,n=jd[t]+od,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(Af)),n=this.get("target".concat(Af));return r?delete t["source".concat(Af)]:t.source=this.get("start".concat(od)),n?delete t["target".concat(Af)]:t.target=this.get("end".concat(od)),!(0,h.isString)(t.source)&&!(0,h.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,h.isString)(t.target)&&!(0,h.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,h.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Af)),r=this.get("target".concat(Af));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(Kv),$v=vm,Gh="anchorPointsCache",pm="bboxCache",gm=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=Zn(t[0],r),s=0;s<t.length;s++){var u=t[s],f=Zn(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=Or({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=cn({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=Gr(u,t)}var l=c;return f.length&&(l||(l=t),l=this.getNearestPoint(f,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(Gh);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,h.each)(u,function(f,c){var l={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(l)}),this.set(Gh,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(pm,null),this.set(Gh,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,h.isNil)(t.x),f=!(0,h.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,h.isNumber)(t.x)||(0,h.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var l=c.includes("label")||c.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(Kv),Uh=gm,qv="bboxCache",Qv="bboxCanvasCache",Vd="sizeCache",Jv="anchorPointsCache",mm=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,h.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,h.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||ye.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,b.__assign)((0,b.__assign)((0,b.__assign)({},r),t.style),f);var c=t.padding||ye.defaultCombo.padding;return(0,h.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set(Vd,f),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=this.get(qv)||{},a=n.x,o=n.x,s=this.get(Vd),u=Ai(t,r);if(u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2,s){s.width=Math.max(s.width,u.width),s.height=Math.max(s.height,u.height),this.set(Vd,s);var f=t.get("type");f==="circle"?(u.width=s.r*2,u.height=s.r*2):(u.width=s.width,u.height=s.height),u.minX=u.centerX-u.width/2,u.minY=u.centerY-u.height/2,u.maxX=u.centerX+u.width/2,u.maxY=u.centerY+u.height/2}else u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2;return u.x=u.minX,u.y=u.minY,(u.x!==a||u.y!==o)&&this.set(Jv,null),u}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Qv,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(qv,null),this.set(Qv,null),this.set(Jv,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Vd,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(Uh),tp=mm,Hd="node",Zd="edge",ep="vedge",bd="combo",ym="default",rp="Mapper",ec="stateStyles",xm=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,h.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===ep?Zd:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,h.upperFirst)(n),s=null,u=r.get(n+(0,h.upperFirst)(ec))||{},f=r.get(ym+o);t[ec]&&(u=t[ec]),f&&(0,h.each)(f,function(ne,re){(0,h.isObject)(ne)&&!(0,h.isArray)(ne)?t[re]=(0,h.deepMix)({},ne,t[re]):(0,h.isArray)(ne)?t[re]=t[re]||(0,h.clone)(f[re]):t[re]=t[re]||f[re]});var c=r.get(n+rp);if(c){var l=c(t);l[ec]&&(u=l[ec],delete l[ec]),(0,h.each)(l,function(ne,re){(0,h.isObject)(ne)&&!(0,h.isArray)(ne)?t[re]=(0,h.deepMix)({},t[re],ne):t[re]=l[re]||t[re]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Zd||e===ep){var _=void 0,I=void 0;if(_=t.source,I=t.target,_&&(0,h.isString)(_)&&(_=r.findById(_)),I&&(0,h.isString)(I)&&(I=r.findById(I)),!_||!I){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}_.getType&&_.getType()==="combo"&&(t.isComboEdge=!0),I.getType&&I.getType()==="combo"&&(t.isComboEdge=!0),s=new $v({model:t,source:_,target:I,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===Hd)s=new Uh({model:t,styles:u,group:a.addGroup()});else if(e===bd){var B=t.children,j=Ws(B,r),et=void 0,ut=void 0;if(isNaN(j.x)?isNaN(t.x)&&(et=Math.random()*100):et=j.x,isNaN(j.y)?isNaN(t.y)&&(ut=Math.random()*100):ut=j.y,isNaN(t.x)||isNaN(t.y))t.x=et,t.y=ut;else{var ct=t.x-et,pt=t.y-ut;this.updateComboSucceeds(t.id,ct,pt,B)}var St=a.addGroup();St.setZIndex(t.depth),s=new tp({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?Ws([],r):j,group:St}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(j.width=Math.hypot(j.height,j.width),j.height=j.width,s.set("bbox",j),s.refresh());var Vt=s.getModel();(B||[]).forEach(function(ne){var re=r.findById(ne.id);s.addChild(re),ne.depth=Vt.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,h.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+rp),f=e.getModel(),c=f.x,l=f.y,_=e.getUpdateType(t);if(u){var I=(0,h.deepMix)({},f,t),B=u(I),j=(0,h.deepMix)({},f,B,t);B[ec]&&(e.set("styles",j[ec]),delete j[ec]),(0,h.each)(j,function(Ne,rr){t[rr]=Ne})}else(0,h.each)(t,function(Ne,rr){f[rr]&&(0,h.isObject)(Ne)&&!(0,h.isArray)(Ne)&&(t[rr]=(0,b.__assign)((0,b.__assign)({},f[rr]),t[rr]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Zd){if(t.source){var et=t.source;(0,h.isString)(et)&&(et=o.findById(et)),e.setSource(et)}if(t.target){var ut=t.target;(0,h.isString)(ut)&&(ut=o.findById(ut)),e.setTarget(ut)}e.update(t)}else if(s===Hd){e.update(t,_);var ct=e.getEdges();_==="move"?(0,h.each)(ct,function(Ne){r.edgeToBeUpdateMap[Ne.getID()]={edge:Ne,updateType:_},r.throttleRefresh()}):_!=null&&_.includes("bbox")&&(0,h.each)(ct,function(Ne){Ne.refresh(_)})}else if(s===bd){if(e.update(t,_),!isNaN(t.x)||!isNaN(t.y)){var pt=t.x-c||0,St=t.y-l||0;this.updateComboSucceeds(f.id,pt,St)}var Vt=e.getEdges(),ne=(_==null?void 0:_.includes("bbox"))||_==="move";if(ne&&s===bd){var re=e.get("shapeFactory"),Ce=f.type||"circle",We=f.animate===void 0||t.animate===void 0?(a=(n=re[Ce])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;We?setTimeout(function(){if(!(!e||e.destroyed)){var Ne=e.getKeyShape();!Ne||Ne.destroyed||(0,h.each)(Vt,function(rr){rr&&!rr.destroyed&&rr.refresh()})}},201):(0,h.each)(Vt,function(Ne){Ne.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,h.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=Ws(t,s,e),c=f.x,l=f.y;e.set("bbox",f);var _=c,I=l;r?(_=isNaN(u.x)?c:u.x,I=isNaN(u.y)?l:u.y):(_=isNaN(c)?u.x:c,I=isNaN(l)?u.y:l),e.update({x:_,y:I});var B=e.get("shapeFactory"),j=u.type||"circle",et=u.animate===void 0?(o=(a=B[j])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;et?setTimeout(function(){if(!(!e||e.destroyed)){var ut=e.getKeyShape();!ut||ut.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,h.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){ji(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var l=c.getModel();a.updateItem(f.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,h.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,h.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,h.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Zd){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),l=r.get("itemMap");delete l[c];var _=r.get("comboTrees"),I=e.get("id");if(a===Hd){var B=e.getModel().comboId;if(_&&B){var j=_,et=!1;_.forEach(function(ne){et||ji(ne,function(re){if(re.id===I&&j){var Ce=j.indexOf(re);return j.splice(Ce,1),et=!0,!1}return j=re.children,!0})})}for(var ut=e.getEdges(),ct=ut.length-1;ct>=0;ct--)r.removeItem(ut[ct],!1);B&&r.updateCombo(B)}else if(a===bd){var pt=e.getModel().parentId,St,Vt=!1;(_||[]).forEach(function(re){Vt||ji(re,function(Ce){return Ce.id===I?(St=Ce,Vt=!0,!1):!0})}),St.removed=!0,St&&St.children&&St.children.forEach(function(re){t.removeItem(re.id)});for(var ut=e.getEdges(),ct=ut.length;ct>=0;ct--)r.removeItem(ut[ct],!1);pt&&r.updateCombo(pt)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,h.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,h.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,h.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,h.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,h.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){bo(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,h.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Hd){var a=e.getEdges();(0,h.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===bd){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(l){f||!l.children||l.children.length===0||ji(l,function(_){return _.id===s?(u=_.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var _=n.findById(l.id);r.changeItemVisibility(_,t)});var a=e.getEdges();(0,h.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),bm=xm,Em=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,h.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,h.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,h.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),wm=Em,Sm=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},np=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=Wr(t);return u.unshift(["M",e[0].x,e[0].y]),u},Kd=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];Gt.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},Mm=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=Sm(a,s)}return t&&(n+="Z"),n},Wh=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Yh=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,l=e[s].y,_=e[s+1].x,I=e[s+1].y,B=s!==e.length-2?e[s+2].x:_,j=s!==e.length-2?e[s+2].y:I,et=c+(_-u)/6,ut=l+(I-f)/6,ct=_-(B-c)/6,pt=I-(j-l)/6;o.push(["C",et,ut,ct,pt,_,I])}return o.unshift(["M",n.x,n.y]),o},ap=function(e,t){return Gt.scale([0,0],Gt.normalize([0,0],e),t)},ip=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},op=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function Xh(i,e){var t=function(l){var _=[l[0][0],l[0][1]-e],I=[l[0][0],l[0][1]+e];return"M ".concat(_," A ").concat(e,",").concat(e,",0,0,0,").concat(I," A ").concat(e,",").concat(e,",0,0,0,").concat(_)},r=function(l){var _=Gt.scale([0,0],ip(l[0],l[1]),e),I=Gt.scale([0,0],_,-1),B=Gt.add([0,0],l[0],_),j=Gt.add([0,0],l[1],_),et=Gt.add([0,0],l[1],I),ut=Gt.add([0,0],l[0],I);return"M ".concat(B," L ").concat(j," A ").concat([e,e,"0,0,0",et].join(",")," L ").concat(ut," A ").concat([e,e,"0,0,0",B].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=Gt.scale([0,0],ip(o,s),e);n[a]=[Gt.add([0,0],o,u),Gt.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,l){var _="";return l===0&&(_="M ".concat(n[n.length-1][1]," ")),_+="".concat(f+c[0]," L ").concat(c[1]),_}),n.join(" ")}function sp(i,e){var t=i.length,r=function(c){var l=[c[0][0],c[0][1]-e],_=[c[0][0],c[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",_].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(c){var l=op(c[0],c[1]),_=ap(l,e),I=Gt.add([0,0],c[0],Gt.scale([0,0],_,-1)),B=Gt.add([0,0],c[1],_),j=1.2*e,et=ap(Gt.normalize([0,0],l),j),ut=Gt.scale([0,0],et,-1),ct=Gt.add([0,0],I,ut),pt=Gt.add([0,0],B,ut),St=Gt.add([0,0],I,et);return"M ".concat(I," C ").concat([ct,pt,B].join(",")," S ").concat([St,I].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var l=i[(c+1)%t];return{p:f,v:Gt.normalize([0,0],op(f,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=Gt.normalize([0,0],Gt.add([0,0],a[s].v,Gt.scale([0,0],a[o].v,-1)));a[o].p=Gt.add([0,0],a[o].p,Gt.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var _m=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},up=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},fp=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,_){return l.x===_.x?l.y-_.y:l.x-_.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&up(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&up(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},Cm={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Tm(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,l=f,_,I,B=0;B<e.width*e.height;B++){if(_=c,I=l,i.findIndex(function(et){return et.x===c&&et.y===l})>-1){if(!(i[0].x!==c||i[0].y!==l))return!0}else i.push({x:c,y:l});var j=a(c,l);switch(j){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:_===0&&(I===-1?c-=1:c+=1);break;case 1:case 13:case 5:l--;break;case 9:_===1&&(I===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(j)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var Am=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},Im=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=Xo(s,u),c=new bi(s.x,s.y,u.x,u.y),l=r.reduce(function(_,I){return Wi(I,c)>0?_+1:_},0);f*Math.pow(l+1,2)<a&&(n=o,a=f*Math.pow(l+1,2))}),n},cp=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=Wi(a,t);o>=0&&o<r&&(n=a,r=o)}),n},Om=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(I,B){var j=!1;return B.forEach(function(et){j||($i(I,{x:et.x1,y:et.y1})||$i(I,{x:et.x2,y:et.y2}))&&(j=!0)}),j},c=function(I,B){for(var j=0,et=B;j<et.length;j++){var ut=et[j],ct=ut.getBBox(),pt=[[ct.x,ct.y],[ct.x+ct.width,ct.y],[ct.x,ct.y+ct.height],[ct.x+ct.width,ct.y+ct.height]];if(di(pt,I.x,I.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var I=o.pop(),B=cp(t,I);if(B){var j=ho(B,I),et=j[0],ut=j[1];if(ut===2){var ct=function(St){for(var Vt=n,ne=lp(B,Vt,et,St),re=f(ne,o)||f(ne,a),Ce=c(ne,t);!re&&Ce&&Vt>=1;)Vt/=1.5,ne=lp(B,Vt,et,St),re=f(ne,o)||f(ne,a),Ce=c(ne,t);ne&&!re&&(!St||!Ce)&&(o.push(new bi(I.x1,I.y1,ne.x,ne.y)),o.push(new bi(ne.x,ne.y,I.x2,I.y2)),s=!0)};ct(!0),s||ct(!1)}}s||a.push(I),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function Dm(i,e,t,r,n){var a=Im(i,t,e);if(a===null)return[];var o=function(l){for(var _=[];l.length>0;){var I=l.pop();if(l.length===0){_.push(I);break}var B=l.pop(),j=new bi(I.x1,I.y1,B.x2,B.y2),et=cp(e,j);et?(_.push(I),l.push(B)):l.push(j)}return _},s=new bi(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=Om(s,e,r,n),f=o(u);return f}var Lm=function(e,t,r){var n=Object.assign(Cm,r),a=Io(e.map(function(ct){return{x:ct.getModel().x,y:ct.getModel().y}}));e=e.sort(function(ct,pt){return Xo({x:ct.getModel().x,y:ct.getModel().y},a)-Xo({x:pt.getModel().x,y:pt.getModel().y},a)});var o=[],s=[];e.forEach(function(ct){var pt=Dm(ct,t,o,n.maxRoutingIterations,n.morphBuffer);pt.forEach(function(St){s.push(St)}),o.push(ct)});for(var u=Pm(e,s,n.nodeR0),f=Am(u.width,u.height,n.pixelGroupSize),c=[],l=[],_=0;_<n.maxMarchingIterations;_++)if(Nm(e,t,s,u,f,n),c=[],l=[],!!new Tm(c,f,n.threshold).march()){var I=c.map(function(ct){return{x:Math.round(ct.x*n.pixelGroupSize+u.minX),y:Math.round(ct.y*n.pixelGroupSize+u.minY)}});if(I){var B=I.length;if(n.skip>1)for(B=Math.floor(I.length/n.skip);B<3&&n.skip>1;)n.skip-=1,B=Math.floor(I.length/n.skip);for(var j=0,et=0;et<B;et+=1,j+=n.skip)l.push({x:I[j].x,y:I[j].y})}var ut=function(){for(var pt=0,St=e;pt<St.length;pt++){var Vt=St[pt],ne=l.map(function(re){return[re.x,re.y]});if(!di(ne,Vt.getBBox().centerX,Vt.getBBox().centerY))return!1}return!0};if(l&&ut())return l;if(n.threshold*=.9,_<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function Pm(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function Nm(i,e,t,r,n,a){function o(I,B){var j=Math.floor((I-B)/a.pixelGroupSize);return j<0?0:j}function s(I,B){return I*a.pixelGroupSize+B}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(B,j){var et=Math.min(o(B.minX,j+r.minX),n.width),ut=Math.min(o(B.minY,j+r.minY),n.height),ct=Math.min(o(B.maxX,-j+r.minX),n.width),pt=Math.min(o(B.maxY,-j+r.minY),n.height);return[et,ut,ct,pt]},l=function(B,j){for(var et=B.getBBox(),ut=c(et,a.nodeR1),ct=ut[0],pt=ut[1],St=ut[2],Vt=ut[3],ne=pt;ne<Vt;ne+=1)for(var re=ct;re<St;re+=1)if(!(j<0&&n[re+ne*n.width]<=0)){var Ce=s(re,r.minX),We=s(ne,r.minY),Ne=qa({x:Ce,y:We},{x:et.minX,y:et.minY,width:et.width,height:et.height});if(Ne<Math.pow(a.nodeR1,2)){var rr=Math.sqrt(Ne)-a.nodeR1;n.cells[re+ne*n.width]+=j*rr*rr}}},_=function(B,j){for(var et=B.getBBox(),ut=c(et,a.edgeR1),ct=ut[0],pt=ut[1],St=ut[2],Vt=ut[3],ne=pt;ne<Vt;ne+=1)for(var re=ct;re<St;re+=1)if(!(j<0&&n.cells[re+ne*n.width]<=0)){var Ce=s(re,r.minX),We=s(ne,r.minY),Ne=is({x:Ce,y:We},B);if(Ne<Math.pow(a.edgeR1,2)){var rr=Math.sqrt(Ne)-a.edgeR1;n.cells[re+ne*n.width]+=j*rr*rr}}};a.nodeInfluenceFactor&&i.forEach(function(I){l(I,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(I){_(I,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(I){l(I,a.negativeNodeInfluenceFactor/u)})}function lp(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function l(B,j){return n.width*((B.y-n.minY+(j.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var _=l(o,u);return _<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var I=l(a,s);return I<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var Rm=function(){function i(e,t){this.cfg=(0,h.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,h.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,h.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=fp(e),a=Xh(r.map(function(o){return[o.x,o.y]}),this.padding),n=Lr(a);break;case"smooth-convex":r=fp(e),r.length===2?(a=Xh(r.map(function(o){return[o.x,o.y]}),this.padding),n=Lr(a)):r.length>2&&(a=sp(r.map(function(o){return[o.x,o.y]}),this.padding),n=Yh(a));break;case"bubble":r=Lm(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Yh(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,b.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,h.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,h.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,b.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,h.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,h.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,h.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,h.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=Wh(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),Ga(n,Wh(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),dp=Rm,Ed=zt,km="node",Bm=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,h.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){ji(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),l=o[c.source]||0,_=o[c.target]||0,I=Math.max(l,_);a[I]?a[I].push(c.id):a[I]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var l=r.findById(f[c]);l&&l.toFront()}})}},500,!1),r.cfg=(0,h.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new lo(r.cfg.maxStep),r.redoStack=new lo(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new sm(this),r=new Uo(this),n=new bm(this),a=new wm(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:ye.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:ye.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:ye.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:ye.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:ye.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,h.isPlainObject)(t)?this.cfg=(0,b.__assign)((0,b.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new lo(this.cfg.maxStep),this.redoStack=new lo(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,h.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,h.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,h.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,h.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=ms({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});oa(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=Ed(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");oa(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,h.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),l=this.getZoom()||1,_=l*t,I=t,B=!1;if(f&&_<f?(I=f/l,B=!0):c&&_>c&&(I=c/l,B=!0),r?u=Ed(u,[["t",-r.x,-r.y],["s",I,I],["t",r.x,r.y]]):u=Ed(u,[["s",I,I]]),n){var j=(0,h.clone)(s.getMatrix());j||(j=[1,0,0,0,1,0,0,0,1]);var et=j[0],ut=et*I,ct=ms({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(pt){if(pt===1)j=u;else{var St=oo(et,ut,pt)/j[0];r?j=Ed(j,[["t",-r.x,-r.y],["s",St,St],["t",r.x,r.y]]):j=Ed(j,[["s",St,St]])}return{matrix:j}},ct)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!B},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,h.isString)(t)&&(n=this.findById(t)),!n&&(0,h.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,b.__assign)((0,b.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,b.__assign)((0,b.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var _=Js(this.get("comboTrees"));this.set("comboTrees",_)}}},e.prototype.innerAddItem=function(t,r,n){if(!Tu(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(B){u||bo(B,function(j){if(r.parentId===j.id){u=!0;var et=(0,b.__assign)({id:r.id,depth:j.depth+2},r);j.children?j.children.push(et):j.children=[et],r.depth=et.depth,a=n.addItem(t,r)}var ut=s[j.id];return u&&ut&&ut.getType&&ut.getType()==="combo"&&n.updateCombo(ut,j.children),!0})}),!u){var f=(0,b.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,h.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),_=!1,I=!1;o.forEach(function(B){I||_||bo(B,function(j){if(j.id===r.id)return I=!0,!1;if(r.comboId===j.id&&!I){_=!0;var et=(0,h.clone)(r);et.itemType="node",j.children?j.children.push(et):j.children=[et],et.depth=j.depth+1}return _&&l[j.id].getType&&l[j.id].getType()==="combo"&&n.updateCombo(l[j.id],j.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,b.__assign)((0,b.__assign)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[c];break;case"edge":l.edges=[c];break;case"combo":l.combos=[c];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var _=t[u].type,I=s[u];if(I&&I!==!0){var B=(0,b.__assign)((0,b.__assign)({},I.getModel()),{itemType:_});switch(_){case"node":l.nodes.push(B);break;case"edge":l.edges.push(B);break;case"combo":l.combos.push(B);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,h.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,h.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var l=(0,b.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,h.each)(l,function(j){return a.setItemState(s,j,!1)}),o.updateItem(s,r),c==="combo"&&(0,h.each)(l,function(j){return a.setItemState(s,j,!0)}),u){var _={nodes:[],edges:[],combos:[]},I={nodes:[],edges:[],combos:[]},B=(0,b.__assign)({id:f.id},r);switch(c){case"node":_.nodes.push(f),I.nodes.push(B);break;case"edge":_.edges.push(f),I.edges.push(B);break;case"combo":_.combos.push(f),I.combos.push(B);break;default:break}this.pushStack("update",{before:_,after:I})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,h.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){es(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(et){return{type:"node",model:et}}),!1,!1),(f==null?void 0:f.length)!==0){var c=Qs(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function(et){return{type:"edge",model:et}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var _=t.get("layoutController");if(_){if(_.layout(I),this.destroyed)return}else I();function I(){(t.get("comboTrees")||[]).forEach(function(et){bo(et,function(ut){var ct=t.findById(ut.id);return ct.getType()==="combo"&&ut.collapsed&&(t.collapseCombo(ut.id,!1),t.updateCombo(ct)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var et;(et=t.getCombos())===null||et===void 0||et.forEach(function(ut){ut.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var B=this.getNodes();B.forEach(function(et){et.toFront()})}else{var j=this.getEdges();j.forEach(function(et){et.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,h.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===km){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!es(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(ct){return o.clearItemStates(ct)}),this.getEdges().map(function(ct){return o.clearItemStates(ct)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),l={nodes:[],edges:[]},_=s.combos;if(_){var I=Qs(_,s.nodes);this.set("comboTrees",I)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,h.each)(c,function(ct,pt){c[pt].getModel().depth=0,!(ct.getType&&ct.getType()==="edge")&&(ct.getType&&ct.getType()==="combo"?(delete c[pt],ct.destroy()):l.nodes.indexOf(ct)<0&&(delete c[pt],o.remove(ct,!1)))});for(var B=this.getCombos(),j=B.length,et=j-1;et>=0;et--)B[et].destroyed&&B.splice(et,1);_&&(o.addCombos(_),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,h.each)(c,function(ct,pt){ct.getType&&(ct.getType()==="node"||ct.getType()==="combo")||l.edges.indexOf(ct)<0&&(delete c[pt],o.remove(ct,!1))}),(this.get("comboTrees")||[]).forEach(function(ct){bo(ct,function(pt){var St=n.findById(pt.id);return St.getType()==="combo"&&pt.collapsed&&n.collapseCombo(pt.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var ut=this.get("layoutController");return ut&&(ut.changeData(function(){setTimeout(function(){var ct;(ct=o.getCombos())===null||ct===void 0||ct.forEach(function(pt){pt.set("animate",!0)})},0)}),o.get("animate")&&!ut.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(ct){return ct.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,h.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function(ut){var ct=a.findById(ut),pt=ct.getType();if(!(pt!=="node"&&pt!=="combo")){var St=ct.getModel();c["".concat(pt,"s")].push({id:ut,parentId:pt==="node"?St.comboId:St.parentId})}});var l=this.get("comboTrees"),_=new Set(r),I=new Map;l&&(l.forEach(function(ut){bo(ut,function(ct,pt,St){if(_.has(ct.id)){if(pt){var Vt=a.findById(pt.id),ne=a.findById(ct.id);pt.children.splice(St,1),Vt.removeChild(ne),o.updateCombo(Vt,pt.children)}ct.itemType==="combo"&&I.set(ct.id,ct)}return!0})}),l=l.filter(function(ut){return!_.has(ut.id)}),this.set("comboTrees",l));var B={nodes:[],combos:[]},j=r.map(function(ut){var ct=a.findById(ut),pt=ct.getModel(),St="";ct.getType&&(St=ct.getType());var Vt=I.get(ut)||{id:ct.getID(),itemType:St};return St==="combo"?(Vt.parentId=s,pt.parentId=s):St==="node"&&(Vt.comboId=s,pt.comboId=s),f&&B["".concat(St,"s")].push({id:pt.id,parentId:s}),Vt});u.children=j,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function(ut){ji(ut,function(ct){return ct.id===s?(ct.itemType="combo",ct.children=j,!1):!0})}),this.sortCombos()),f&&(B.combos.push(u),this.pushStack("createCombo",{before:c,after:B}));var et=this.findById(s);!et.getModel().parentId&&et.getChildren().combos.length&&this.updateComboTree(et,void 0,!1),setTimeout(function(){et.set("animate",!0)},0)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,h.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var _=this.get("itemMap"),I=u.get("id"),B,j=[],et=this.get("combos"),ut=this.findById(c),ct=r&&this.get("enabledStack"),pt={};if(ct&&(pt=(0,h.clone)(f),pt.children=[]),l.forEach(function(re){B||bo(re,function(Ce){var We;if(Ce.id===I){B=Ce;var Ne=u.getEdges().map(function(dn){return dn.getID()});Ne.forEach(function(dn){n.removeItem(dn,!1)});var rr=et.indexOf(u);et.splice(rr,1),delete _[I];var wr=(0,h.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:wr,type:"combo"})}if(c&&B&&Ce.id===c){ut.removeCombo(u),j=Ce.children;var rr=j.indexOf(B);return rr!==-1&&j.splice(rr,1),(We=B.children)===null||We===void 0||We.forEach(function(Gn){var In=n.findById(Gn.id),an=In.getModel();In.getType&&In.getType()==="combo"?(Gn.parentId=c,delete Gn.comboId,an.parentId=c,delete an.comboId):In.getType&&In.getType()==="node"&&(Gn.comboId=c,an.comboId=c),ut.addChild(In),j.push(Gn)}),n.updateCombo(ut),!1}return!0})}),!c&&B){var St=l.indexOf(B);l.splice(St,1),(a=B.children)===null||a===void 0||a.forEach(function(re){re.parentId=void 0;var Ce=n.findById(re.id).getModel();delete Ce.parentId,delete Ce.comboId,re.itemType!=="node"&&l.push(re)})}if(ct){var Vt={nodes:[],combos:[]},ne={nodes:[],combos:[]};(o=B.children)===null||o===void 0||o.forEach(function(re){var Ce=n.findById(re.id),We=Ce.getType();We!=="node"&&We!=="combo"||(Vt["".concat(We,"s")].push({id:re.id,parentId:I}),ne["".concat(We,"s")].push({id:re.id,parentId:c}))}),Vt.combos.push(pt),this.pushStack("uncombo",{before:Vt,after:ne})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){bo(u,function(f){var c;if(!f)return!0;var l=s[f.id];if(((c=l==null?void 0:l.getType)===null||c===void 0?void 0:c.call(l))==="combo"){var _=(0,b.__spreadArray)([],l.getStates(),!0);(0,h.each)(_,function(I){return r.setItemState(l,I,!1)}),o.updateCombo(l,f.children,t),(0,h.each)(_,function(I){return r.setItemState(l,I,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,h.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){bo(c,function(l){if(!l)return!0;var _=f[l.id];if(o===l.id&&_&&_.getType&&_.getType()==="combo"){var I=(0,b.__spreadArray)([],_.getStates(),!0);(0,h.each)(I,function(B){_.getStateStyle(B)&&r.setItemState(_,B,!1)}),u.updateCombo(_,l.children),(0,h.each)(I,function(B){_.getStateStyle(B)&&r.setItemState(_,B,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,h.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),l=!0,_;if((c||[]).forEach(function(ct){_||ji(ct,function(pt){if(!_)return pt.id===o.getID()&&(_=pt),!0})}),ji(_,function(ct){return ct.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var I={},B={};f==="combo"?(I.combos=[{id:s.id,parentId:s.parentId}],B.combos=[{id:s.id,parentId:r}]):f==="node"&&(I.nodes=[{id:s.id,parentId:s.comboId}],B.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:I,after:B})}if(s.parentId||s.comboId){var j=this.findById(s.parentId||s.comboId);j&&j.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var et=this.findById(r);et&&et.addChild(o)}if(u){var et=this.findById(u);et&&et.removeChild(o)}var ut=Js(this.get("comboTrees"),s.id,r);this.set("comboTrees",ut),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,h.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,h.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,h.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,h.each)(r,function(o){o.refresh()}),(0,h.each)(n,function(o){o.refresh()}),(0,h.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,h.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(f){(0,h.each)(s,function(c){var l=r.findById(c.id);if(!(!l||l.destroyed)){var _=l.get("originAttrs"),I=l.get("model"),B=l.getContainer().getMatrix();if(_==null&&(B&&(_={x:B[6],y:B[7]}),l.set("originAttrs",_||0)),a){var j=a(l,f,c,_||{x:0,y:0});l.set("model",Object.assign(I,j))}else _?(I.x=_.x+(c.x-_.x)*f,I.y=_.y+(c.y-_.y)*f):(I.x=c.x,I.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,h.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(_){(0,h.each)(_,function(I){u=I.getModel();var B=I.get("originAttrs");if(!(B&&u.x===B.x&&u.y===B.y)){var j=I.updatePosition({x:u.x,y:u.y});f[u.id]=j,u.comboId&&(f[u.comboId]=f[u.comboId]||j),u.parentId&&(f[u.parentId]=f[u.parentId]||j)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,h.each)(a,function(l){var _=l.getSource().getModel(),I=l.getTarget();if(!(0,h.isPlainObject)(I)){var B=I.getModel();(f[_.id]||f[B.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,h.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,h.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(_){var I=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*I[0]+I[6],u.y=u.y*I[0]+I[7];var B=o.getGroup().getCanvasBBox(),j=B.minX,et=B.maxX,ut=B.minY,ct=B.maxY,pt={x:(j+et)/2,y:(ut+ct)/2};r==="begin"&&(pt.x=j,pt.y=ut),o.translate(u.x-pt.x,u.y-pt.y)})}var c=(0,b.__assign)({},this.get("layout")),l={};Object.assign(l,c,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,h.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(_){c||ji(_,function(I){if(c&&I.depth<=a.depth)return!1;if(a.id===I.id&&(c=!0),c){var B=n.findById(I.id);B&&B.getType&&B.getType()==="combo"&&(u=u.concat(B.getNodes()),u=u.concat(B.getCombos()))}return!0})});var l={};s.forEach(function(_){var I=_.getModel(),B=I.isVEdge,j=I.size,et=j===void 0?1:j;if(!(_.isVisible()&&!B)){var ut=_.getSource(),ct=_.getTarget(),pt=null,St;if(ut.getModel().id===a.id||u.includes(ut)&&!u.includes(ct)?(pt=ct,St=!1):(ct.getModel().id===a.id||!u.includes(ut)&&u.includes(ct))&&(pt=ut,St=!0),pt){if(B){n.removeItem(_,!1);return}for(var Vt=pt.getModel();!pt.isVisible();){var ne=Vt.parentId,re=Vt.comboId,Ce=ne||re;if(pt=n.findById(Ce),!pt||!Ce)return;Vt=pt.getModel()}var We=Vt.id,Ne=St?{source:We,target:a.id,size:et,isVEdge:!0}:{source:a.id,target:We,size:et,isVEdge:!0},rr="".concat(Ne.source,"-").concat(Ne.target);if(l[rr]){l[rr].size+=et;return}l[rr]=Ne}}}),this.addItems(Object.values(l).map(function(_){return{type:"vedge",model:_}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,h.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(_){c||ji(_,function(I){if(c&&I.depth<=a.depth)return!1;if(a.id===I.id&&(c=!0),c){var B=n.findById(I.id);B&&B.getType&&B.getType()==="combo"&&(u=u.concat(B.getNodes()),u=u.concat(B.getCombos()))}return!0})});var l={};s.forEach(function(_){if(!(_.isVisible()&&!_.getModel().isVEdge)){var I=_.getSource(),B=_.getTarget(),j=I.get("id"),et=B.get("id"),ut=null,ct;if(j===a.id||u.includes(I)&&!u.includes(B)?(ut=B,ct=!1):et===a.id||!u.includes(I)&&u.includes(B)?(ut=I,ct=!0):u.includes(I)&&u.includes(B)&&I.isVisible()&&B.isVisible()&&_.show(),ut){var pt=_.getModel(),St=pt.isVEdge,Vt=pt.size,ne=Vt===void 0?1:Vt;if(St){n.removeItem(_,!1);return}for(var re=ut.getModel();!ut.isVisible();){var Ce=re.parentId,We=re.comboId,Ne=Ce||We;if(ut=n.findById(Ne),!ut||!Ne)return;re=ut.getModel()}for(var rr=re.id,wr=ct?B:I,dn=wr.getModel();!wr.isVisible();){var Gn=dn.parentId,In=dn.comboId,an=Gn||In;if(wr=n.findById(an),!wr||!an)return;if(dn.comboId===a.id||dn.parentId===a.id)break;dn=wr.getModel()}var ta=dn.id;if(rr){var $n=ct?{source:rr,target:ta,isVEdge:!0,size:ne}:{source:ta,target:rr,isVEdge:!0,size:ne},on="".concat($n.source,"-").concat($n.target);if(l[on]){l[on].size+=ne;return}l[on]=$n}}}}),this.addItems(Object.values(l).map(function(_){return{type:"vedge",model:_}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,h.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,h.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,h.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=Re(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,h.clone)(r):{before:{},after:(0,h.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=Tt(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=Tt(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=Zr(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new dp(this,(0,b.__assign)((0,b.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,h.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(Q),hp=Bm;function jh(i){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(i)}var sd=zt,vp="-shape",Vh="-label",$d=["startArrow","endArrow"],pp={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Fm={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},qd={edge:Fm,node:pp,combo:pp},Hh="-label-bg",Zh={options:{labelCfg:{style:{fontFamily:ye.windowFontFamily}},descriptionCfg:{style:{fontFamily:ye.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,h.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+vp),t.shapeMap[this.itemType+vp]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+Vh),t.shapeMap[this.itemType+Vh]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=sd(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=sd(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=sd(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=sd(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=sd(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),l=this.itemType+Hh;c.set("classname",l),t.shapeMap[l]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,h.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=ye[a]?ye[a].style:null;return(0,b.__assign)((0,b.__assign)((0,b.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,h.mix)({},o.attr(),e.style),u=function(l){var _,I=s[l];if((0,h.isPlainObject)(I)){var B=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(j){return j.get("name")===l});B==null||B.attr(I)}else o.attr((_={},_[l]=I,_))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+Vh,c=o.shapeMap[f]||o.find(function(St){return St.get("className")===f}),l=this.itemType+Hh,_=o.shapeMap[l]||o.find(function(St){return St.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[f],_&&(o.removeChild(_),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,h.deepMix)(u,e.labelCfg));var B=this.getLabelStyleByPosition(e,u,o),j=(n=e.labelCfg)===null||n===void 0?void 0:n.style,et=(0,b.__assign)((0,b.__assign)({},B),j),ut=et.rotate;if(delete et.rotate,!isNaN(ut)&&ut!==""){var ct=[1,0,0,0,1,0,0,0,1];ct=sd(ct,[["t",-et.x,-et.y],["r",ut],["t",et.x,et.y]]),et.matrix=ct,c.attr(et)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(et);if(!_)et.background&&(_=this.drawLabelBg(e,o,c),_.set("classname",l),o.shapeMap[l]=_,c.toFront());else if(et.background){var pt=this.getLabelBgStyleByPosition(c,u);_.attr(pt)}else o.removeChild(_)}else{var I=this.drawLabel(e,o);I.set("className",f),o.shapeMap[f]=I}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,h.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),l=r.getStateStyle(f);if(!(!l&&!c)){var _=(0,h.mix)({},l||c),I=r.getContainer(),B={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(B.r=1,B.width=1,B.height=1),t){var j=function(an){var ta,$n=_[an];if((0,h.isPlainObject)($n)&&!$d.includes(an)){var on=((o=I.shapeMap)===null||o===void 0?void 0:o[an])||I.find(function(Tn){return Tn.get("name")===an});on==null||on.attr($n)}else s.attr((ta={},ta[an]=$n,ta))};for(var et in _)j(et)}else{var ut=Bs(r.getCurrentStatesStyle()),ct=r.getModel(),pt=(0,h.mix)({},ct.style,Bs(r.getOriginStyle())),St=s.get("name"),Vt=s.attr(),ne={};Object.keys(Vt).forEach(function(In){if(In!=="img"){var an=Vt[In];an&&jh(an)==="object"?ne[In]=(0,h.clone)(an):ne[In]=an}});var re={},Ce=function(an){var ta=_[an];if((0,h.isPlainObject)(ta)&&!$d.includes(an)){var $n=I.shapeMap[an]||I.find(function(Un){return Un.get("name")===an});if($n){var on=Bs($n.attr());(0,h.each)(ta,function(Un,Wn){if(an===St&&ne[Wn]&&!B[Wn]){delete ne[Wn];var ia=pt[an][Wn]||qd[u][Wn];s.attr(Wn,ia)}else if(on[Wn]||on[Wn]===0){delete on[Wn];var da=pt[an][Wn]||qd[u][Wn];$n.attr(Wn,da)}}),re[an]=on}}else if(ne[an]&&!B[an]){delete ne[an];var Tn=pt[an]||(pt[St]?pt[St][an]:void 0)||qd[u][an];s.attr(an,Tn)}};for(var We in _)Ce(We);St?re[St]=ne:(0,h.mix)(re,ne);for(var et in ut)if(!B[et]){var Ne=ut[et];(!(0,h.isPlainObject)(Ne)||$d.includes(et))&&(St?((0,h.mix)(pt[St],(a={},a[et]=Ne,a)),delete pt[et]):(0,h.mix)(pt,(n={},n[et]=Ne,n)),delete ut[et])}var rr={};(0,h.deepMix)(rr,pt,re,ut);var wr=!1,dn=function(an){var ta,$n,on=rr[an];if((0,h.isPlainObject)(on)&&!$d.includes(an)){var Tn=I.shapeMap[an]||I.find(function(Wn){return Wn.get("name")===an});Tn&&((Tn.get("type")==="text"||Tn.get("labelRelated"))&&(delete on.x,delete on.y,delete on.matrix),an===St&&(u==="combo"&&(delete on.r,delete on.width,delete on.height),wr=!0),Tn.attr(on))}else if(!wr){var Un=on||qd[u][an];u==="combo"?St||s.attr((ta={},ta[an]=Un,ta)):s.attr(($n={},$n[an]=Un,$n))}};for(var Gn in rr)dn(Gn)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,h.clone)(f):(0,h.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},zm={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:ye.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||ye.defaultNode.size;return(0,h.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,h.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=qs(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,h.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=Nh(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,b.__assign)((0,b.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(rr){return rr.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(rr){return rr.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(rr){return rr.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(rr){return rr.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,h.mix)({},u,e.linkPoints),c=f.fill,l=f.stroke,_=f.lineWidth,I=f.size/2;I||(I=f.r);var B=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},j=B.left,et=B.right,ut=B.top,ct=B.bottom,pt=this.getSize(e),St=pt[0],Vt=pt[1],ne={r:I,fill:c,stroke:l,lineWidth:_};if(n)!j&&j!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,b.__assign)((0,b.__assign)({},ne),{x:-St/2,y:0}));else if(j){var re="link-point-left";t.shapeMap[re]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},ne),{x:-St/2,y:0}),className:re,name:re,isAnchorPoint:!0})}if(a)!et&&et!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,b.__assign)((0,b.__assign)({},ne),{x:St/2,y:0}));else if(et){var Ce="link-point-right";t.shapeMap[Ce]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},ne),{x:St/2,y:0}),className:Ce,name:Ce,isAnchorPoint:!0})}if(o)!ut&&ut!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,b.__assign)((0,b.__assign)({},ne),{x:0,y:-Vt/2}));else if(ut){var We="link-point-top";t.shapeMap[We]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},ne),{x:0,y:-Vt/2}),className:We,name:We,isAnchorPoint:!0})}if(s)!ct&&ct!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,b.__assign)((0,b.__assign)({},ne),{x:0,y:Vt/2}));else if(ct){var Ne="link-point-bottom";t.shapeMap[Ne]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},ne),{x:0,y:Vt/2}),className:Ne,name:Ne,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,b.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(ut){return ut.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,h.mix)({},f.attr(),a),l=c.width,_=l===void 0?20:l,I=c.height,B=I===void 0?20:I;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(_=0,B=0),f.attr((0,b.__assign)((0,b.__assign)({},c),{x:-_/2,y:-B/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var j="".concat(this.type,"-icon");if(u)n.shapeMap[j]=n.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:j,name:j});else{var _=a.width,B=a.height;n.shapeMap[j]=n.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},a),{x:-_/2,y:-B/2}),className:j,name:j})}var et=n.shapeMap["node-label"]||n.find(function(ut){return ut.get("name")==="node-label"});et&&et.toFront()}}},Gm=(0,b.__assign)((0,b.__assign)({},Zh),zm);Ns.registerNode("single-node",Gm);var Qd="edge-shape";function Um(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Wm={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:ye.defaultEdge.size,style:{x:0,y:0,stroke:ye.defaultEdge.style.stroke,lineAppendWidth:ye.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:ye.edgeLabel.style.fill,fontSize:ye.edgeLabel.style.fontSize,fontFamily:ye.windowFontFamily}},stateStyles:(0,b.__assign)({},ye.edgeStateStyles)},getPath:function(e){var t=[];return(0,h.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,h.mix)({},t,r,e.style),a=e.size||ye.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),l=(0,h.mix)({},ye.defaultEdge.style,{stroke:ye.defaultEdge.color,lineWidth:a,path:c},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),l=[u];c&&(l=l.concat(c)),l.push(f);var _=o.attr(),I=e.style||{};I.stroke===void 0&&(I.stroke=e.color);var B=e.sourceNode,j=e.targetNode,et={radius:I.radius};c||(et={source:B,target:j,offset:I.offset,radius:I.radius});var ut=this.getPath(l,et),ct={};r==="move"?ct={path:ut}:(_.endArrow&&I.endArrow===!1&&(e.style.endArrow={path:""}),_.startArrow&&I.startArrow===!1&&(e.style.startArrow={path:""}),ct=(0,b.__assign)({},e.style),ct.lineWidth===void 0&&(ct.lineWdith=((0,h.isNumber)(s)?s:s==null?void 0:s[0])||_.lineWidth),ct.path===void 0&&(ct.path=ut),ct.stroke===void 0&&(ct.stroke=_.stroke||e.color)),o&&o.attr(ct)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[Qd],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,h.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var l=Go(o,s,u,f,c);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,b.__assign)((0,b.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,h.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=Um(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:Qd,name:Qd,attrs:r});return t.shapeMap[Qd]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,h.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+Hh;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,h.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},Ym=(0,b.__assign)((0,b.__assign)({},Zh),Wm);Ns.registerEdge("single-edge",Ym),Ns.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Ns.registerEdge("spline",{getPath:function(e){var t=np(e);return t}},"single-edge"),Ns.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=sa(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,h.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=sa(t,o,r)}var f=Zn(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Ns.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,h.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,h.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Kd(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Ns.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=Kd(r,n,e.curvePosition[0],e.curveOffset[0]),o=Kd(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Ns.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),Ns.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),Ns.registerEdge("loop",{getPathPoints:function(e){return Oo(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var Xm={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:ye.comboLabel.refX,refY:ye.comboLabel.refY,options:{style:{stroke:ye.defaultCombo.style.stroke,fill:ye.defaultCombo.style.fill,lineWidth:ye.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ye.comboLabel.style.fill,fontSize:ye.comboLabel.style.fontSize,fontFamily:ye.windowFontFamily}},stateStyles:(0,b.__assign)({},ye.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,h.clone)(e.size||this.options.size||ye.defaultCombo.size);return(0,h.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,h.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,h.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,h.isNil)(o)&&(o=this.refX),(0,h.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,l;switch(r){case"top":l={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-c+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:c+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,l=s.height,_=t.getContainer(),I=_.find(function(ut){return ut.get("name")==="combo-collapsed-substitute-icon"}),B=I&&!I.destroyed,j=t.get("keyShape");if(n&&u){if(B)I.show();else{var et={width:c||r.r*2||r.width,height:l||r.r*2||r.height};I=_.addShape("image",{attrs:(0,b.__assign)({img:f,x:-et.width/2,y:-et.height/2},et),name:"combo-collapsed-substitute-icon",draggable:!0})}j.hide()}else B&&(I.hide(),j.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,b.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},jm=(0,b.__assign)((0,b.__assign)({},Zh),Xm);Ns.registerCombo("single-combo",jm),Ns.registerCombo("circle",{options:{size:[ye.defaultCombo.size[0],ye.defaultCombo.size[0]],padding:Math.max.apply(Math,ye.defaultCombo.padding),animate:!0,style:{stroke:ye.defaultCombo.style.stroke,fill:ye.defaultCombo.style.fill,lineWidth:ye.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ye.comboLabel.style.fill,fontSize:ye.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,b.__assign)({},ye.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,h.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,h.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,h.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,h.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||ye.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,b.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,h.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,h.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,h.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),l=(0,h.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),Ns.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:ye.defaultCombo.style.stroke,fill:ye.defaultCombo.style.fill,lineWidth:ye.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ye.comboLabel.style.fill,fontSize:ye.comboLabel.style.fontSize,fontFamily:ye.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},ye.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,h.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,h.isNil)(o)&&(o=this.refX),(0,h.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],l=n.height/2+a[2],_;switch(r){case"top":_={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":_={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":_={x:u+s,y:0,textAlign:"left"};break;case"center":_={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":_={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:_={x:f+o,y:0,textAlign:"right"};break}return _.text=e.label,_},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,h.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,h.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,h.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,h.isNumber)(a.width)||isNaN(a.width)?s=o[0]||ye.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,h.isNumber)(a.height)||isNaN(a.height)?u=o[1]||ye.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var _=(0,b.__assign)({x:c,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},_},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,h.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,h.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,h.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},l=t.get("keyShape"),_=(0,h.mix)({},l.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,_,!1)}},"single-combo"),Ns.registerNode("simple-circle",{options:{size:ye.defaultNode.size,style:{x:0,y:0,stroke:ye.defaultNode.style.stroke,fill:ye.defaultNode.style.fill,lineWidth:ye.defaultNode.style.lineWidth},labelCfg:{style:{fill:ye.nodeLabel.style.fill,fontSize:ye.nodeLabel.style.fontSize,fontFamily:ye.windowFontFamily}},stateStyles:(0,b.__assign)({},ye.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,b.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,h.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),Ns.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:ye.defaultNode.style.stroke,fill:ye.defaultNode.style.fill,lineWidth:ye.defaultNode.style.lineWidth},labelCfg:{style:{fill:ye.nodeLabel.style.fill,fontSize:ye.nodeLabel.style.fontSize,fontFamily:ye.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},ye.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,h.mix)({},a,s.attr(),u);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),Ns.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:ye.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,b.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,l=a-f/2,_=o-c/2;t.setClip({type:"rect",attrs:(0,b.__assign)({x:l,y:_,width:f,height:c},s)})}else if(n==="ellipse"){var I=r.rx,B=r.ry;t.setClip({type:"ellipse",attrs:(0,b.__assign)({x:a,y:o,rx:I,ry:B},s)})}else if(n==="polygon"){var j=r.points;t.setClip({type:"polygon",attrs:(0,b.__assign)({points:j},s)})}else if(n==="path"){var et=r.path;t.setClip({type:"path",attrs:(0,b.__assign)({path:et},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var gp={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},mp={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},Uc=Ns,Vm=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],yp=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},Hm=zt,Zm=(0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)({},P),w),p),k),m),S),{transform:Hm,mat3:J}),Gs=Zm,Km=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=yp(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,b.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),_=f.length,I=0;I<_;I++){var B=f[I];if(!(!B||B.destroyed)){var j=B.getModel();if(!B.isVisible()){r.push(j);continue}t.push(j)}}for(var et=c.length,I=0;I<et;I++){var ut=c[I];if(!(!ut||ut.destroyed)){var j=ut.getModel();if(!ut.isVisible()){a.push(j);continue}j.isComboEdge?o.push(j):n.push(j)}}for(var ct=l.length,I=0;I<ct;I++){var pt=l[I];if(!pt.destroyed){var j=pt.getModel();if(!pt.isVisible()){u.push(j);continue}s.push(j)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(St){return St.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(f,c){var l=o[c]||o;s=s.then(function(){var _,I=t.execLayoutMethod(l,c);return c===a.length-1&&((_=o.onAllLayoutEnd)===null||_===void 0||_.call(o)),I})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,b.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,h.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,h.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,l){return c[l.id]=!0,c},{});s=function(l){return f[l.source]&&f[l.target]}}return(0,b.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,h.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Uv(o);return s.size=[s.width,s.height],s}),a=Object.values((0,h.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Tf(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,b.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,b.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Tf(u.x)||Tf(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),l=Math.ceil(o/c),_=u/(c-1),I=f/(l-1);(!isFinite(_)||!_)&&(_=0),(!isFinite(I)||!_)&&(I=0);for(var B=e[0]-u/2,j=e[1]-f/2,et=!0,ut=0;ut<o;ut++){var ct=a[ut];Tf(+ct.x)&&(et=!1,ct.x=ut%c*_+B),Tf(+ct.y)&&(et=!1,ct.y=Math.floor(ut/c)*I+j)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),xp=Km,$m=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),bp=$m,rc=Uc.registerNode,Ep=Uc.registerEdge,qm=Uc.registerCombo,wp=Z.registerBehavior,Jn=ye,tM={version:ye.version,AbstractGraph:hp,BaseGlobal:Jn,Util:Gs,Shape:Uc,Node:Uh,Edge:$v,Combo:tp,Hull:dp,registerNode:Uc.registerNode,registerEdge:Uc.registerEdge,registerCombo:Uc.registerCombo,registerBehavior:Z.registerBehavior,Arrow:gp,Marker:mp,AbstractLayout:xp,AbstractEvent:bp},Qm=C(810369);function Jm(){return window?window.devicePixelRatio:1}function Sp(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function _l(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function wd(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function ty(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function Mp(i,e){return i[0]===e[0]&&i[1]===e[1]}var ey=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,ry=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ny=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,_p=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Cp(i,e){var t=i.match(_p);(0,h.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function ay(i,e,t){var r=ey.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,l=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,_=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,I=i.createLinearGradient(s.x,s.y,l,_);return Cp(a,I),I}function iy(i,e,t){var r=ry.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(_p);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,l=f.maxY-f.minY,_=Math.sqrt(c*c+l*l)/2,I=i.createRadialGradient(f.minX+c*n,f.minY+l*a,0,f.minX+c/2,f.minY+l/2,o*_);return Cp(s,I),I}function oy(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=ny.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function sy(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,h.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return ay(i,e,t);if(t[0]==="r")return iy(i,e,t);if(t[0]==="p")return oy(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function uy(i){var e=0,t=0,r=0,n=0;return(0,h.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function Jd(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Kh(i,e){return Jd(i)*Jd(e)?(i[0]*e[0]+i[1]*e[1])/(Jd(i)*Jd(e)):1}function Tp(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Kh(i,e))}function Ap(i,e){var t=e[1],r=e[2],n=(0,h.mod)((0,h.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,_=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,I=l*l/(t*t)+_*_/(r*r);I>1&&(t*=Math.sqrt(I),r*=Math.sqrt(I));var B=t*t*(_*_)+r*r*(l*l),j=B?Math.sqrt((t*t*(r*r)-B)/B):1;a===o&&(j*=-1),isNaN(j)&&(j=0);var et=r?j*t*_/r:0,ut=t?j*-r*l/t:0,ct=(s+f)/2+Math.cos(n)*et-Math.sin(n)*ut,pt=(u+c)/2+Math.sin(n)*et+Math.cos(n)*ut,St=[(l-et)/t,(_-ut)/r],Vt=[(-1*l-et)/t,(-1*_-ut)/r],ne=Tp([1,0],St),re=Tp(St,Vt);return Kh(St,Vt)<=-1&&(re=Math.PI),Kh(St,Vt)>=1&&(re=0),o===0&&re>0&&(re=re-2*Math.PI),o===1&&re<0&&(re=re+2*Math.PI),{cx:ct,cy:pt,rx:Mp(i,[f,c])?0:t,ry:Mp(i,[f,c])?0:r,startAngle:ne,endAngle:ne+re,xRotation:n,arcFlag:a,sweepFlag:o}}var th=Math.sin,eh=Math.cos,$h=Math.atan2,rh=Math.PI;function Ip(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,l=$h(c,f),_=new nv({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*eh(rh/6)+","+10*th(rh/6)+" L0,0 L"+10*eh(rh/6)+",-"+10*th(rh/6),stroke:s,lineWidth:u}});_.translate(n,a),_.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",_)}function Op(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,l=o?s:u,_=l.d,I=l.fill,B=l.stroke,j=l.lineWidth,et=(0,b.__rest)(l,["d","fill","stroke","lineWidth"]),ut=t-n,ct=r-a,pt=$h(ct,ut);_&&(n=n-eh(pt)*_,a=a-th(pt)*_);var St=new nv({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,b.__assign)((0,b.__assign)({},et),{stroke:B||f,lineWidth:j||c,fill:I})});St.translate(n,a),St.rotateAtPoint(n,a,pt),i.set(o?"startArrowShape":"endArrowShape",St)}function Cl(i,e,t,r,n){var a=$h(r-e,t-i);return{dx:eh(a)*n,dy:th(a)*n}}function qh(i,e,t,r,n,a){typeof e.startArrow=="object"?Op(i,e,t,r,n,a,!0):e.startArrow?Ip(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function Qh(i,e,t,r,n,a){typeof e.endArrow=="object"?Op(i,e,t,r,n,a,!1):e.endArrow?Ip(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var Dp={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function ud(i,e){var t=e.attr();for(var r in t){var n=t[r],a=Dp[r]?Dp[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,h.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=sy(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function Jh(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function fy(i,e,t){var r=i.get("refreshElements");(0,h.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?ev(e,t):tv(e,t)}function tv(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&ev(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&tv(r.cfg.children,e);else{var n=cy(r,e);r.cfg.refresh=n,n&&r.isGroup()&&tv(r.cfg.children,e)}}}function Lp(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Lp(t.cfg.children)}}function ev(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&ev(r.get("children"),e))}}function cy(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&wd(t,e);return r}function Pp(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var l=n[c],_=l[0];if(c===0&&a&&a.d){var I=i.getStartTangent();f=Cl(I[0][0],I[0][1],I[1][0],I[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var B=n[c+1];if(B[0]==="Z"){var I=i.getEndTangent();f=Cl(I[0][0],I[0][1],I[1][0],I[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var I=i.getEndTangent();f=Cl(I[0][0],I[0][1],I[1][0],I[1][1],o.d)}var j=f.dx,et=f.dy;switch(_){case"M":e.moveTo(l[1]-j,l[2]-et),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-j,l[2]-et);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-j,l[4]-et);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-j,l[6]-et);break;case"A":{var ut=void 0;r?(ut=r[c],ut||(ut=Ap(s,l),r[c]=ut)):ut=Ap(s,l);var ct=ut.cx,pt=ut.cy,St=ut.rx,Vt=ut.ry,ne=ut.startAngle,re=ut.endAngle,Ce=ut.xRotation,We=ut.sweepFlag;if(e.ellipse)e.ellipse(ct,pt,St,Vt,Ce,ne,re,1-We);else{var Ne=St>Vt?St:Vt,rr=St>Vt?1:St/Vt,wr=St>Vt?Vt/St:1;e.translate(ct,pt),e.rotate(Ce),e.scale(rr,wr),e.arc(0,0,Ne,ne,re,1-We),e.scale(1/rr,1/wr),e.rotate(-Ce),e.translate(-ct,-pt)}break}case"Z":e.closePath();break;default:break}if(_==="Z")s=u;else{var dn=l.length;s=[l[dn-2],l[dn-1]]}}}}function Np(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function ly(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=ty(t,n):r?e=t:a&&(e=n)}return e}function dy(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,h.each)(i,function(a){var o=ly(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,h.min)(e),minY:(0,h.min)(t),maxX:(0,h.max)(r),maxY:(0,h.max)(n)}}function hy(i,e){return!i||!e||!wd(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var vy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){Np(this,t)},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),ud(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,h.each)(t,function(_){var I=_.cfg.cacheCanvasBBox;I&&_.cfg.isInView&&(r.push(I.minX,I.maxX),n.push(I.minY,I.maxY))});var a=null;if(r.length){var o=(0,h.min)(r),s=(0,h.max)(r),u=(0,h.min)(n),f=(0,h.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set("isInView",wd(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),ud(t,this),this._applyClip(t,this.getClip()),Jh(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(zc),Rp=vy,py=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return Rp},e.prototype.onCanvasChange=function(t){Np(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=Ml(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),ud(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!wd(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),ud(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=wd(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,h.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,h.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Sl),af=py,gy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,l=o/2,_=Sp(u,f,t,r);return a&&n?_<=c+l:a?_<=c:n?_>=c-l&&_<=c+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(af),my=gy;function nh(i,e,t,r){return i/(t*t)+e/(r*r)}var yy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,l=s.rx,_=s.ry,I=(t-f)*(t-f),B=(r-c)*(r-c);return a&&n?nh(I,B,l+u,_+u)<=1:a?nh(I,B,l,_)<=1:n?nh(I,B,l-u,_-u)>=1&&nh(I,B,l+u,_+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(af),xy=yy;function kp(i){return i instanceof HTMLElement&&(0,h.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var by=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,h.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):kp(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,l=r.sheight,_=r.img;(_ instanceof Image||kp(_))&&(!(0,h.isNil)(u)&&!(0,h.isNil)(f)&&!(0,h.isNil)(c)&&!(0,h.isNil)(l)?t.drawImage(_,u,f,c,l,n,a,o,s):t.drawImage(_,n,a,o,s))},e}(af),Ey=by;function Wc(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=f-l&&o<=c+l?jr.pointToLine(i,e,t,r,a,o)<=n/2:!1}var wy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&qh(this,t,a,o,r,n),u&&Qh(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,l=s.y2;return Wc(u,f,c,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(c=Cl(n,a,o,s,r.startArrow.d)),f&&f.d&&(l=Cl(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return jr.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return jr.pointAt(n,a,o,s,t)},e}(af),Sy=wy,My={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},_y=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,h.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,h.isFunction)(a))s=a,u=s(r,n,o),u=Sr(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");Pp(this,t,{path:r},n)},e.Symbols=My,e}(af),Cy=_y;function Bp(i,e,t){var r=Ho();return i.createPath(r),r.isPointInPath(e,t)}var Ty=1e-6;function rv(i){return Math.abs(i)<Ty?0:i<0?-1:1}function Ay(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function Fp(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(Ay(o,s,[e,t]))return!0;rv(o[1]-t)>0!=rv(s[1]-t)>0&&rv(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Sd(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return Sp(f.x,f.y,o,s)<=a/2}var Iy=zt;function Oy(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function Dy(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,l=u.prePoint,_=u.box;if(!(_&&!_l(_.x-o,_.y-o,_.width+e,_.height+e,t,r))){switch(u.command){case"L":case"Z":a=Wc(l[0],l[1],f[0],f[1],e,t,r);break;case"Q":var I=it.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],t,r);a=I<=e/2;break;case"C":var B=ie.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=B<=e/2;break;case"A":var j=u.arcParams,et=j.cx,ut=j.cy,ct=j.rx,pt=j.ry,St=j.startAngle,Vt=j.endAngle,ne=j.xRotation,re=[t,r,1],Ce=ct>pt?ct:pt,We=ct>pt?1:ct/pt,Ne=ct>pt?pt/ct:1,rr=Iy(null,[["t",-et,-ut],["r",-ne],["s",1/We,1/Ne]]);$o.transformMat3(re,re,rr),a=Sd(0,0,Ce,St,Vt,e,re[0],re[1]);break;default:break}if(a)break}}return a}function Ly(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var ah=(0,b.__assign)({hasArc:Oy,extractPolygons:Ly,isPointInStroke:Dy},T);function zp(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=Fp(a,e,t),r)break}return r}var Py=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Sr(t);var r=ah.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Fv(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();qh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();Qh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=ah.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=Bp(this,t,r);else{var l=this.attr("path"),_=ah.extractPolygons(l);f=zp(_.polygons,t,r)||zp(_.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");Pp(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,h.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,h.each)(r,function(c,l){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=l)});var s=o[a];if((0,h.isNil)(s)||(0,h.isNil)(a))return null;var u=s.length,f=o[a+1];return ie.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",ah.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(f){if((0,h.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(t+=ie.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,h.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(a=[],a[0]=r/t,o=ie.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(af),nv=Py;function Gp(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if(Wc(s,u,f,c,e,t,r))return!0}if(n){var l=i[0],_=i[a-1];if(Wc(l[0],l[1],_[0],_[1],e,t,r))return!0}return!1}var Ny=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=Gp(s,o,t,r,!0)),!u&&a&&(u=Fp(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(af),Ry=Ny,ky=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];a&&qh(this,t,n[1][0],n[1][1],u,f),o&&Qh(this,t,n[s-2][0],n[s-2][1],c,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return Gp(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];if(a&&a.d){var _=Cl(u,f,n[1][0],n[1][1],a.d);u+=_.dx,f+=_.dy}if(o&&o.d){var _=Cl(n[s-2][0],n[s-2][1],c,l,o.d);c-=_.dx,l-=_.dy}t.beginPath(),t.moveTo(u,f);for(var I=0;I<s-1;I++){var B=n[I];t.lineTo(B[0],B[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,h.isNil)(r)?(this.set("totalLength",Fa.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,h.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),jr.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,h.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=jr.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(af),By=ky;function Fy(i,e,t,r,n,a,o){var s=n/2;return _l(i-s,e-s,t,n,a,o)||_l(i+t-s,e-s,n,r,a,o)||_l(i+s,e+r-s,t,n,a,o)||_l(i-s,e+s,n,r,a,o)}function zy(i,e,t,r,n,a,o,s){var u=a/2;return Wc(i+n,e,i+t-n,e,a,o,s)||Wc(i+t,e+n,i+t,e+r-n,a,o,s)||Wc(i+t-n,e+r,i+n,e+r,a,o,s)||Wc(i,e+r-n,i,e+n,a,o,s)||Sd(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||Sd(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||Sd(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||Sd(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var Gy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,l=s.height,_=s.radius;if(_){var B=!1;return n&&(B=zy(u,f,c,l,_,o,t,r)),!B&&a&&(B=Bp(this,t,r)),B}else{var I=o/2;if(a&&n)return _l(u-I,f-I,c+I,l+I,t,r);if(a)return _l(u,f,c,l,t,r);if(n)return Fy(u,f,c,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=uy(u),c=f[0],l=f[1],_=f[2],I=f[3];t.moveTo(n+c,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-_),_!==0&&t.arc(n+o-_,a+s-_,_,0,Math.PI/2),t.lineTo(n+I,a+s),I!==0&&t.arc(n+I,a+s-I,I,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(af),Uy=Gy,Wy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Sa(t)},e.prototype._setText=function(t){var r=null;(0,h.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),l=Za(a.text,a.fontSize,a.lineHeight),_;(0,h.each)(r,function(I,B){_=u+B*(c+f)-l+f,o==="middle"&&(_+=l-f-(l-f)/2),o==="top"&&(_+=l-f),(0,h.isNil)(I)||(n?t.fillText(I,s,_):t.strokeText(I,s,_))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,h.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,h.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,h.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(af),Yy=Wy;function Xy(i,e){if(e){var t=ce(e);return Yt(t,i)}return i}function Up(i,e,t){var r=i.getTotalMatrix();if(r){var n=Xy([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function Wp(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!Bf(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=Up(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function Yp(i,e,t){if(!Wp(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=Yp(s,e,t);else if(Wp(s,e,t)){var u=s,f=Up(s,e,t),c=f[0],l=f[1];u.isInShape(c,l)&&(r=s)}if(r)break}return r}var jy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return Rp},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Jm();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=Yp(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=dy(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=hy(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,h.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),ud(t,this),Jh(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),ud(t,this),fy(this,n,a),Jh(t,n,a),t.restore()):r.length&&Lp(r),(0,h.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,h.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(rd),nc=jy,eM="0.5.12",av={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Fi={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},rM=null;function Yu(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Xp(i){var e=av[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=Yu(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function jp(i,e){var t=i.get("el"),r=(0,h.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function Vy(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function Hy(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Md(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function _d(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){Xp(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Vp(i,e){e.forEach(function(t){t.draw(i)})}function Hp(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")Vy(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&jp(i,function(l,_){return c.indexOf(l)-c.indexOf(_)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Md(i):e==="clip"?_d(i,r):e==="attr"||e==="add"&&i.draw(r)}}var Zy=function(i){(0,b.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Yu("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){Hp(this,t)},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),_d(this,t),this.createPath(t),r.length&&Vp(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){Fi[s]&&a.setAttribute(Fi[s],o)}),Md(this)},e}(zc),Zp=Zy,Ky=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return Zp},e.prototype.onCanvasChange=function(t){Hp(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=Ml(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,l=a-c,_=o-c,I=a+s+c,B=o+u+c;return{x:l,y:_,minX:l,minY:_,maxX:I,maxY:B,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Xp(this),_d(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,_=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&_.setAttribute(Fi.fillOpacity,f)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&_.setAttribute(Fi.strokeOpacity,c),l&&_.setAttribute(Fi.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(Fi[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(Fi[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(Fi[r],"url(#"+o+")")}else a.setAttribute(Fi[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&Hy(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Md(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(Sl),Xu=Ky,$y=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Fi[s]&&a.setAttribute(Fi[s],o)})},e}(Xu),qy=$y,Qy=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,h.each)(r||n,function(f,c){Fi[c]&&a.setAttribute(Fi[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(Xu),Jy=Qy,t1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Fi[s]&&a.setAttribute(Fi[s],o)})},e}(Xu),e1=t1,r1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,h.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):Fi[u]&&o.setAttribute(Fi[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,h.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,h.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(Xu),n1=r1,a1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,h.isObject)(o)?t.addArrow(n,Fi[s]):t.getDefaultArrow(n,Fi[s]);a.setAttribute(Fi[s],"url(#"+u+")")}else a.removeAttribute(Fi[s]);else Fi[s]&&a.setAttribute(Fi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return jr.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return jr.pointAt(n,a,o,s,t)},e}(Xu),i1=a1,ih={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},Kp={get:function(i){return ih[i]},register:function(i,e){ih[i]=e},remove:function(i){delete ih[i]},getAll:function(){return ih}},o1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,h.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,h.isFunction)(o)?s=o:s=Kp.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=Kp,e}(Xu),s1=o1,u1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,h.each)(r||a,function(s,u){if(u==="path"&&(0,h.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,h.isObject)(s)?t.addArrow(a,Fi[u]):t.getDefaultArrow(a,Fi[u]);o.setAttribute(Fi[u],"url(#"+f+")")}else o.removeAttribute(Fi[u]);else Fi[u]&&o.setAttribute(Fi[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(Xu),f1=u1,c1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="points"&&(0,h.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Fi[s]&&a.setAttribute(Fi[s],o)})},e}(Xu),l1=c1,d1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="points"&&(0,h.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Fi[s]&&a.setAttribute(Fi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,h.isNil)(r)?(this.set("totalLength",Fa.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,h.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),jr.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,h.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=jr.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Xu),h1=d1,v1=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,p1=/[^\s,]+/gi;function g1(i){var e=0,t=0,r=0,n=0;return(0,h.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function nM(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(v1),each(i,function(e,t){if(e=e.match(p1),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var m1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,h.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&Fi[c]&&o.setAttribute(Fi[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=g1(s);(0,h.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(Xu),y1=m1,$p=.3,x1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},b1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},E1={left:"left",start:"left",center:"middle",right:"end",end:"end"},w1=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,b.__assign)((0,b.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,h.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Md(n):Fi[u]&&o.setAttribute(Fi[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=zf();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",b1[n]||"alphabetic"):t.setAttribute("alignment-baseline",x1[n]||"baseline"),t.setAttribute("text-anchor",E1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,h.each)(u,function(l,_){_===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+l+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+l+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+$p)+'em">'+l+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-$p)+'em">'+l+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(Xu),S1=w1,M1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,_1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,C1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function qp(i){var e=i.match(C1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,h.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function T1(i,e){var t=M1.exec(i),r=(0,h.mod)((0,h.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=qp(n)}function A1(i,e){var t=_1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=qp(o)}var I1=function(){function i(e){this.cfg={};var t=null,r=(0,h.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=Yu("linearGradient"),T1(e,t)):(t=Yu("radialGradient"),A1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),O1=I1,D1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},L1={x:"-40%",y:"-40%",width:"200%",height:"200%"},P1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=Yu("filter");return(0,h.each)(L1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,h.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,h.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[D1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),N1=P1,R1=function(){function i(e,t){this.cfg={};var r=Yu("marker"),n=(0,h.uniqueId)("marker_");r.setAttribute("id",n);var a=Yu("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,h.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),Qp=R1,k1=function(){function i(e){this.type="clip",this.cfg={};var t=Yu("clipPath");this.el=t,this.id=(0,h.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),B1=k1,F1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,z1=function(){function i(e){this.cfg={};var t=Yu("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=Yu("image");t.appendChild(r);var n=(0,h.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=F1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),G1=z1,U1=function(){function i(e){var t=Yu("defs"),r=(0,h.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new Qp(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new O1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new Qp(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new N1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new G1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new B1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),W1=U1,Y1=function(i){(0,b.__extends)(e,i);function e(t){return i.call(this,(0,b.__assign)((0,b.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return Zp},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!av[a.tagName]){for(var o=a.parentNode;o&&!av[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Yu("svg"),r=new W1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&jp(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Md(this):t==="clip"?_d(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();_d(this,t),r.length&&Vp(t,r)},e}(rd),Cd=Y1,aM="0.5.6",X1=C(6767),Td=C.n(X1),oh=C(697234),sh=2,Jp=.16,j1=.05,V1=.05,H1=.15,tg=5,eg=4,Z1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function rg(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-sh*e:Math.round(i.h)+sh*e:r=t?Math.round(i.h)+sh*e:Math.round(i.h)-sh*e,r<0?r+=360:r>=360&&(r-=360),r}function ng(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-Jp*e:e===eg?r=i.s+Jp:r=i.s+j1*e,r>1&&(r=1),t&&e===tg&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function ag(i,e,t){var r;return t?r=i.v+V1*e:r=i.v-H1*e,r>1&&(r=1),Number(r.toFixed(2))}function uh(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=(0,oh.Z)(i),n=tg;n>0;n-=1){var a=r.toHsv(),o=(0,oh.Z)({h:rg(a,n,!0),s:ng(a,n,!0),v:ag(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=eg;s+=1){var u=r.toHsv(),f=(0,oh.Z)({h:rg(u,s),s:ng(u,s),v:ag(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?Z1.map(function(c){var l=c.index,_=c.opacity,I=oh.Z.mix(e.backgroundColor||"#141414",t[l],_*100).toHexString();return I}):t}var iv={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},$s={},ov={};Object.keys(iv).forEach(function(i){$s[i]=uh(iv[i]),$s[i].primary=$s[i][5],ov[i]=uh(iv[i],{theme:"dark",backgroundColor:"#141414"}),ov[i].primary=ov[i][5]});var iM=$s.red,oM=$s.volcano,sM=$s.gold,uM=$s.orange,fM=$s.yellow,cM=$s.lime,lM=$s.green,dM=$s.cyan,hM=$s.blue,vM=$s.geekblue,pM=$s.purple,gM=$s.magenta,mM=$s.grey,Is=function(e,t,r){var n=Td()(e),a=Td()(t);return Td()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},K1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=Is(t,e,.05).rgb().toString(),a=Is(t,e,.1).rgb().toString(),o=Is(t,e,.2).rgb().toString(),s=Is(t,e,.4).rgb().toString(),u=Is(t,r,.02).rgb().toString(),f=Is(t,r,.05).rgb().toString(),c=Is(t,r,.1).rgb().toString(),l=Is(t,r,.2).rgb().toString(),_=Is(t,r,.3).rgb().toString(),I=uh(e,{theme:"default",backgroundColor:t}),B=Td()(e).hex().toLowerCase(),j=I.indexOf(B),et=e;return j!==-1&&(et=I[j+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:et,highlightFill:o,disableStroke:_,disableFill:f,edgeMainStroke:_,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:_,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:_,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:et,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:f}},$1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=Is(t,e,.2).rgb().toString(),a=Is(t,e,.3).rgb().toString(),o=Is(t,e,.6).rgb().toString(),s=Is(t,e,.8).rgb().toString(),u=Is(t,r,.2).rgb().toString(),f=Is(t,r,.25).rgb().toString(),c=Is(t,r,.3).rgb().toString(),l=Is(t,r,.4).rgb().toString(),_=Is(t,r,.5).rgb().toString(),I=uh(e,{theme:"dark",backgroundColor:t}),B=Td()(e).hex().toLowerCase(),j=I.indexOf(B),et=e;return j!==-1&&(et=I[j+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:_,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:et,comboHighlightFill:f,comboDisableStroke:l,comboDisableFill:u}},sv=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?K1(e,t,"rgb(150, 150, 150)"):$1(e,t,"#777")},q1=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(sv(o,t,r,n))}),a},Q1="rgb(95, 149, 255)",J1="rgb(255, 255, 255)",ig="rgb(0, 0, 0)",Oi=sv(Q1,J1),Tl={version:"0.8.20",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Oi.mainStroke,fill:Oi.mainFill},size:20,color:Oi.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Oi.activeFill,stroke:Oi.activeStroke}},nodeStateStyles:{active:{fill:Oi.activeFill,stroke:Oi.activeStroke,lineWidth:2,shadowColor:Oi.mainStroke,shadowBlur:10},selected:{fill:Oi.selectedFill,stroke:Oi.selectedStroke,lineWidth:4,shadowColor:Oi.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Oi.highlightFill,stroke:Oi.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Oi.inactiveFill,stroke:Oi.inactiveStroke,lineWidth:1},disable:{fill:Oi.disableFill,stroke:Oi.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:ig,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Oi.edgeMainStroke,lineAppendWidth:2},color:Oi.edgeMainStroke},edgeStateStyles:{active:{stroke:Oi.edgeActiveStroke,lineWidth:1},selected:{stroke:Oi.edgeSelectedStroke,lineWidth:2,shadowColor:Oi.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Oi.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Oi.edgeInactiveStroke,lineWidth:1},disable:{stroke:Oi.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:ig,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Oi.comboMainFill,lineWidth:1,stroke:Oi.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Oi.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Oi.comboActiveStroke,lineWidth:1,fill:Oi.comboActiveFill},selected:{stroke:Oi.comboSelectedStroke,lineWidth:2,fill:Oi.comboSelectedFill,shadowColor:Oi.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Oi.comboHighlightStroke,lineWidth:2,fill:Oi.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Oi.comboInactiveStroke,fill:Oi.comboInactiveFill,lineWidth:1},disable:{stroke:Oi.comboDisableStroke,fill:Oi.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function fh(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var tx=Gs.cloneEvent,ex=Gs.isViewportChanged,rx=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,h.wrapBehavior)(this,"onCanvasEvents"),f=(0,h.wrapBehavior)(this,"onExtendEvents"),c=(0,h.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(fh(s,"wheel",c)),typeof window!="undefined"&&(a.push(fh(window,"keydown",f)),a.push(fh(window,"keyup",f)),a.push(fh(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,h.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),ex(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var _=l.get("item");if(!_.destroyed){var I=_.getType();if(t.target=o,t.item=_,t.canvasX===t.x&&t.canvasY===t.y){var B=n.getCanvasByPoint(t.x,t.y);t.canvasX=B.x,t.canvasY=B.y}t.name&&!t.name.includes(":")?(n.emit("".concat(I,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,I)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,h.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=tx(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,h.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(bp),nx=rx,Ci=C(483360),ax=C(981746),ch=C.n(ax),og=Gs.traverseTree,ix=function(e,t){var r;return e?(0,h.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},ox=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,l=n[o],_=l.length;r[o*4+2]=c,r[o*4+3]=l.length,f=Math.max(f,l.length);for(var I=0;I<_;++I){var B=l[I];r.push(+B)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},sx=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var l=n.length,_=a[s],I=_.length;n[s*4+2]=l,n[s*4+3]=I/2,c=Math.max(c,I/2);for(var B=0;B<I;++B){var j=_[B];n.push(+j)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},ux=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var _=a.length,I=o[u],B=I.length;a[u*4+2]=_+1048576*B/4,a[u*4+3]=0,l=Math.max(l,B/4);for(var j=0;j<B;++j){var et=I[j];a.push(+et)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},fx=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},cx=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},lx=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;og(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||og(e,function(l){var _=(l[s]-n[s])/c*(Math.PI*2-f)+f,I=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=I*Math.cos(_),l.y=I*Math.sin(_),!0}),e},sg=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},ug=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"},dx=(0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)((0,b.__assign)({},Gs),O),E),D),F),ac=dx,hx=ac.radialLayout,vx=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=ch()[t.type](r,t.config);return hx(n),n};return}this.layoutMethod=function(r){return ch()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),px=vx;(0,Ci.registerLayout)("grid",Ci.GridLayout),(0,Ci.registerLayout)("random",Ci.RandomLayout),(0,Ci.registerLayout)("force",Ci.ForceLayout),(0,Ci.registerLayout)("circular",Ci.CircularLayout),(0,Ci.registerLayout)("dagre",Ci.DagreLayout),(0,Ci.registerLayout)("dagreCompound",Ci.DagreCompoundLayout),(0,Ci.registerLayout)("radial",Ci.RadialLayout),(0,Ci.registerLayout)("concentric",Ci.ConcentricLayout),(0,Ci.registerLayout)("mds",Ci.MDSLayout),(0,Ci.registerLayout)("fruchterman",Ci.FruchtermanLayout),(0,Ci.registerLayout)("fruchterman-gpu",Ci.FruchtermanGPULayout),(0,Ci.registerLayout)("gForce",Ci.GForceLayout),(0,Ci.registerLayout)("force2",Ci.Force2Layout),(0,Ci.registerLayout)("gForce-gpu",Ci.GForceGPULayout),(0,Ci.registerLayout)("comboForce",Ci.ComboForceLayout),(0,Ci.registerLayout)("comboCombined",Ci.ComboCombinedLayout),(0,Ci.registerLayout)("forceAtlas2",Ci.ForceAtlas2Layout);var gx=function(e,t){t.isCustomLayout=!0,Ci.Layouts[e]=(0,Ci.registerLayout)(e,t)},mx=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),yx=mx,xx=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,l=c.nodes,_=c.edges,I=c.layoutCfg,B=I===void 0?{}:I,j=B.type,et=layout.getLayoutByName(j);if(!et){this.postMessage({type:n.ERROR,message:"layout ".concat(j," not found")});break}var ut;B.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),ut==null||ut.destroy()},ut=new et(B),ut.init({nodes:l,edges:_}),ut.execute();break}case n.GPURUN:{var ct=s.data,pt=ct.nodes,_=ct.edges,St=ct.layoutCfg,B=St===void 0?{}:St,Vt=ct.canvas,j=B.type,et=layout.getLayoutByName(j);if(!et){this.postMessage({type:n.ERROR,message:"layout ".concat(j," not found")});break}if(j.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(j," does not support GPU")});break}var ne=new et(B);ne.init({nodes:pt,edges:_}),ne.executeWithWorker(Vt,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new yx(t,e);return r},fd={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function uv(i){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uv(i)}var fg=function(e){return setTimeout(e,16)},cg=function(e){return clearTimeout(e)},lh={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||fg;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||cg;return t(e)}},bx=["fruchterman","gForce"],Ex=["force","grid","circular"],wx=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=xx(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(lh.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(lh.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,b.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,j,_,I,B,j,et;return(0,b.__generator)(this,function(ut){switch(ut.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(lg(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),Gs.isForce(u)?(f=t.onTick,c=t.animate,l=c===void 0&&(u==="force"||u==="force2"),j=function(){f&&f(),(c||l)&&s.refreshPositions()},t.tick=j):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),_=!1;try{I=new Ci.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=I}catch(ct){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return _=I.enableTick,_&&(B=t.onTick,j=function(){B&&B(),s.refreshPositions()},I.tick=j),et=this.filterLayoutData(this.data,t),Cx(et,r),I.init(et),s.emit("beforesublayout",{type:u}),[4,I.execute()];case 1:return ut.sent(),I.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,b.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,_,I;return(0,b.__generator)(this,function(B){switch(B.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},Gs.isForce(u)&&(f=r.onTick,c=r.animate,l=c===void 0&&(u==="force"||u==="force2"),_=function(){f==null||f(),(c||l)&&s.refreshPositions()},r.tick=_),I=this.filterLayoutData(this.data,r),t.init(I),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return B.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=a.get("width"),c=a.get("height"),l={};Object.assign(l,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=l;var _=l.type,I=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(Vt){var ne;return I=!!(!((ne=Vt.nodes)===null||ne===void 0)&&ne.length)||I});var B=this.destoryLayoutMethods();a.emit("beforelayout");var j=Promise.resolve();I&&_&&(B==null?void 0:B.length)===1&&B[0]===_?this.tweakInit():j=this.initPositions(l.center,s);var et=this.initPositions(l.center,u);et.then(),this.isGPU=dg(l,_);var ut=l.onLayoutEnd,ct=l.layoutEndFormatted,pt=l.adjust;if(ct||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(Vt){switch(Vt.label){case 0:return ut&&ut(s),this.refreshLayout(),pt&&l.pipes?[4,this.adjustPipesBox(this.data,pt)]:[3,2];case 1:Vt.sent(),this.refreshLayout(),Vt.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var St=!1;return l.type?(St=!0,j=j.then(function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(Vt){switch(Vt.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,Vt.sent()]}})})})):l.pipes&&(St=!0,l.pipes.forEach(function(Vt,ne){j=j.then(function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(re){switch(re.label){case 0:return[4,this.execLayoutMethod(Vt,ne)];case 1:return[2,re.sent()]}})})})})),St?j.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(Vt){console.warn("graph layout failed,",Vt)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var l=c.x,_=c.y;!isNaN(l)&&!isNaN(_)&&(s[c.id]={x:l,y:_},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,_=c.target,I=s[l],B=s[_];!I&&B?s[l]={x:B.x+(Math.random()-.5)*80,y:B.y+(Math.random()-.5)*80}:!B&&I&&(s[_]={x:I.x+(Math.random()-.5)*80,y:I.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var l=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=l.x,c.y=l.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,b.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,_,I;return(0,b.__generator)(this,function(B){switch(B.label){case 0:return s=this,u=s.layoutCfg,f=s.data,c=u.preset,!(c!=null&&c.type)||!Ci.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(l=dg(c,c.type),_=l?"".concat(c.type,"-gpu"):c.type,I=new Ci.Layouts[_](c),delete u.preset,I.init(f),[4,I.execute()]);case 1:return B.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var _=function(ut){c=c.then(function(){return n.runWebworker(u,t,ut)})},I=0,B=o.pipes;I<B.length;I++){var j=B[I];_(j)}}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(et){console.error("layout failed",et)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,_=Mx(n,function(B){return typeof B!="function"});if(!l)t.postMessage({type:fd.RUN,nodes:u,edges:f,layoutCfg:_});else{var I=c.transferControlToOffscreen();_.type="".concat(_.type,"-gpu"),t.postMessage({type:fd.GPURUN,nodes:u,edges:f,layoutCfg:_,canvas:I},[I])}return new Promise(function(B,j){t.onmessage=function(et){a.handleWorkerMessage(B,j,et,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,l=c.type,_=function(){o.onTick&&o.onTick()};switch(l){case fd.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=lh.requestAnimationFrame(function(){fv(a,c),u.refreshPositions(),_(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=lh.requestAnimationFrame(function(){fv(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,_(),t()})),f.requestId=null}));break;case fd.END:f.currentTick==null&&(fv(a,c),t());break;case fd.GPUEND:f.currentTick==null&&(_x(a,c),t());break;case fd.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,b.__rest)(t,["disableTriggerLayout"]),f=(0,h.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(_){switch(_.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,_.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(_,I){var B=f.pipes[I];c=c.then(function(){return(0,b.__awaiter)(r,void 0,void 0,function(){return(0,b.__generator)(this,function(j){switch(j.label){case 0:return[4,this.updateLayoutMethod(_,B)];case 1:return[2,j.sent()]}})})})})),l&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(_){console.warn("layout failed",_)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),Ex.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(B){return Math.max(B.height,B.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,l=(0,h.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(I,B){var j,et,ut,ct=I.x-((j=l[B])===null||j===void 0?void 0:j.x),pt=I.y-((et=l[B])===null||et===void 0?void 0:et.y);(ut=f[B])===null||ut===void 0||ut.forEach(function(St){St.x+=ct,St.y+=pt})}),a()};var _=new Ci.Layouts[r](s);_.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(xp),Sx=wx;function fv(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function Mx(i,e){var t={};return i&&uv(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function _x(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function Cx(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function lg(i){return bx.includes(i)}function dg(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,sg().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!lg(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var Ad,cv,hg,lv;function Tx(){Ad=document.createElement("table"),cv=document.createElement("tr"),hg=/^\s*<(\w+|!)[^>]*>/,lv={tr:document.createElement("tbody"),tbody:Ad,thead:Ad,tfoot:Ad,td:cv,th:cv,"*":document.createElement("div")}}function Zo(i){Ad||Tx();var e=hg.test(i)&&RegExp.$1;(!e||!(e in lv))&&(e="*");var t=lv[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var Ax=function(e){var t=e.clone();return Ix(e,t),t},Ix=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];i(s,f)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},vg=zt,Ox="svg",Dx=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new Sx(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new nx(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===Ox)u=new Cd({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new nc(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,h.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,b.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,b.__generator)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),l=c.getRenderer(),_=s||c.get("el"),I="";t||(t="image/png"),setTimeout(function(){return(0,b.__awaiter)(u,void 0,void 0,function(){var B,j,et,ut,ct,pt,St,Vt,ne,re;return(0,b.__generator)(this,function(Ce){switch(Ce.label){case 0:return l!=="svg"?[3,1]:(B=_.cloneNode(!0),j=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),et=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",j),et.replaceChild(B,et.documentElement),ut=new XMLSerializer().serializeToString(et),I="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(ut)),[3,4]);case 1:return ct=void 0,pt=_.getContext("2d"),St=a||this.get("width"),Vt=o||this.get("height"),ne=void 0,f?[4,this.downloadImageWatermark(f,pt,St,Vt)]:[3,3];case 2:Ce.sent(),Ce.label=3;case 3:if(r){re=typeof window!="undefined"?window.devicePixelRatio:1;try{ct=pt.getImageData(0,0,St*re,Vt*re),ne=pt.globalCompositeOperation,pt.globalCompositeOperation="destination-over",pt.fillStyle=r,pt.fillRect(0,0,St,Vt)}catch(We){console.error("Download image failed. Out of memory at ImageData creation")}}I=_.toDataURL(t),r&&(pt.clearRect(0,0,St,Vt),pt.putImageData(ct,0,0),pt.globalCompositeOperation=ne),Ce.label=4;case 4:return n&&n(I),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var l=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var _=void 0,I=o.getContext("2d"),B=Math.max(this.get("width"),500),j=Math.max(this.get("height"),500),et=void 0;if(r){var ut=typeof window!="undefined"&&window.devicePixelRatio||1;try{_=I.getImageData(0,0,B*ut,j*ut),et=I.globalCompositeOperation,I.globalCompositeOperation="destination-over",I.fillStyle=r,I.fillRect(0,0,B,j)}catch(ct){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(I.clearRect(0,0,B,j),I.putImageData(_,0,0),I.globalCompositeOperation=et)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=Zo('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,h.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var _=o+l[0]+l[2],I=s+l[1]+l[3],B={container:f,height:_,width:I,quickHit:!0},j=u==="svg"?new Cd(B):new nc(B),et=this.get("group"),ut=et.clone(),ct=(0,h.clone)(ut.getMatrix());ct||(ct=[1,0,0,0,1,0,0,0,1]);var pt=(a.maxX+a.minX)/2,St=(a.maxY+a.minY)/2;ct=vg(ct,[["t",-pt,-St],["t",s/2+l[3],o/2+l[0]]]),ut.resetMatrix(),ut.setMatrix(ct),j.add(ut);var Vt=j.get("el"),ne="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var re=Vt.cloneNode(!0),Ce=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),We=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ce);We.replaceChild(re,We.documentElement);var Ne=new XMLSerializer().serializeToString(We);ne="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(Ne))}else{var rr=void 0,wr=Vt.getContext("2d"),dn=void 0;if(c){var Gn=typeof window!="undefined"?window.devicePixelRatio:1;try{rr=wr.getImageData(0,0,I*Gn,_*Gn),dn=wr.globalCompositeOperation,wr.globalCompositeOperation="destination-over",wr.fillStyle=c,wr.fillRect(0,0,I,_)}catch(In){console.error("Download image failed. Out of memory at ImageData creation")}}ne=Vt.toDataURL(r),c&&(wr.clearRect(0,0,I,_),wr.putImageData(rr,0,0),wr.globalCompositeOperation=dn)}t&&t(ne)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=Zo('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),_=n?n.backgroundColor:void 0,I=n?n.padding:void 0;I?(0,h.isNumber)(I)&&(I=[I,I,I,I]):I=[0,0,0,0];var B=s+I[0]+I[2],j=u+I[1]+I[3];if(l){var et=this.get("graphWaterMarker").cfg||{},ut=et.width,ct=et.height;B=Math.ceil(B/ct)*ct,j=Math.ceil(j/ut)*ut}var pt={container:c,height:B,width:j},St=f==="svg"?new Cd(pt):new nc(pt),Vt=this.get("group"),ne=Ax(Vt),re=(0,h.clone)(ne.getMatrix());re||(re=[1,0,0,0,1,0,0,0,1]);var Ce=(o.maxX+o.minX)/2,We=(o.maxY+o.minY)/2;re=vg(re,[["t",-Ce,-We],["t",u/2+I[3],s/2+I[0]]]),ne.resetMatrix(),ne.setMatrix(re),St.add(ne);var Ne=St.get("el");r||(r="image/png"),this.asyncToDataUrl(r,_,function(rr){var wr=document.createElement("a"),dn=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(rr,f,wr,dn);var Gn=document.createEvent("MouseEvents");Gn.initEvent("click",!1,!1),wr.dispatchEvent(Gn)},j,B,Ne)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":r.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,c,f);var _=document.createEvent("MouseEvents");_.initEvent("click",!1,!1),c.dispatchEvent(_)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,l=new Uint8Array(c);c--;)l[c]=f.charCodeAt(c);var _=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(_,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(_)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=Tl.waterMarkerImage);var n=this.get("container");(0,h.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,h.deepMix)({},Tl.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var _={container:n,width:s,height:u,capture:!1},I=this.get("pixelRatio");I&&(_.pixelRatio=I,window.devicePixelRatio=I),a=new nc(_),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var B=a.get("context"),j=c.rotate,et=c.x,ut=c.y;B.rotate(-j*Math.PI/180);var ct=new Image;ct.crossOrigin="anonymous",ct.src=t,ct.onload=function(){if(B.drawImage(ct,et,ut,c.width,c.height),B.rotate(j*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var pt=document.querySelector(".g6-graph-watermarker");pt||(pt=document.createElement("div"),pt.className="g6-graph-watermarker"),pt.className="g6-graph-watermarker",a.destroyed||(pt.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(pt))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,h.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,h.deepMix)({},Tl.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var _={container:n,width:s,height:u,capture:!1},I=this.get("pixelRatio");I&&(_.pixelRatio=I,window.devicePixelRatio=I),a=new nc(_),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var B=a.get("context"),j=c.rotate,et=c.fill,ut=c.fontFamily,ct=c.fontSize,pt=c.baseline,St=c.x,Vt=c.y,ne=c.lineHeight;B.rotate(-j*Math.PI/180),B.font="".concat(ct,"px ").concat(ut),B.fillStyle=et,B.textBaseline=pt;for(var re=(0,h.isString)(t)?[t]:t,Ce=re.length-1;Ce>=0;Ce--)B.fillText(re[Ce],St,Vt+Ce*ne);if(B.rotate(j*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var We=document.querySelector(".g6-graph-watermarker");We||(We=document.createElement("div"),We.className="g6-graph-watermarker"),We.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(We)}},e.prototype.destroy=function(){var t,r,n,a;(0,h.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(hp),pg=Dx,Lx=ac.radialLayout,dv=ac.traverseTree,Px=function(i){(0,b.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=ch()[t.type](r,t);return Lx(n),n}:function(r){return ch()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,h.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,h.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,h.each)(t.children||[],function(B){a.innerUpdateChild(B,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var l,_;o.get("originAttrs")&&(l=o.get("originAttrs").x,_=o.get("originAttrs").y);var I=o.getModel();n&&o.set("originAttrs",{x:I.x,y:I.y}),o.set("model",Object.assign(I,t.data)),(l!==t.x||_!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,h.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var f=this.getGroup().getCanvasBBox(),c=f.minX,l=f.maxX,_=f.minY,I=f.maxY,B={x:(c+l)/2,y:(_+I)/2};r==="begin"&&(B.x=c,B.y=_),this.translate(s.x-B.x,s.y-B.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,h.clone)(n.get("data"));var f={};dv(a,function(_){var I=_.children;if(!(I!=null&&I.length))return!0;for(var B=I.length-1;B>=0;B--){var j=r.findById(I[B].id),et=j?!j.isVisible():I[B].visible===!1;et&&(f[_.id]=f[_.id]||[],f[_.id].push({idx:B,child:I.splice(B,1)[0]}))}}),u=o?o(a,n.get("layout")):a,dv(u,function(_){var I=f[_.id];if(I!=null&&I.length)for(var B=I.length-1;B>=0;B--){var j=I[B],et=j.idx,ut=j.child;_.children.splice(et,0,ut)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var l=n.get("viewController");l.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,h.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=a.findById(r);f==null||f.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(l){var _=l.getModel().children||[];return!!_.find(function(I){return I.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,h.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){dv(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var l=r(u,o,f,t);u.set("model",Object.assign(c,l))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,h.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,h.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,h.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,h.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},e}(pg),Nx=Px;function mi(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var Rx=function(){function i(e){this._cfgs=(0,h.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,h.each)(r,function(a,o){var s=(0,h.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,h.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),lu=Rx,kx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gg="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Bx=function(i){kx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:gg,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||gg;a.includes("url(")||(a='url("'.concat(a,'")'));var o=Zo(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Zo(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");mi(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;mi(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");mi(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(lu),Fx=Bx,zx=C(738186),dh=C.n(zx),Gx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&dh()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Ux=function(i){Gx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=Zo("<div class=".concat(t||"g6-component-contextmenu","></div>"));mi(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,h.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,h.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(Ce){c(Ce.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var _=u.get("width"),I=u.get("height"),B=o.getBoundingClientRect(),j=this.get("offsetX")||0,et=this.get("offsetY")||0,ut=u.getContainer().offsetTop,ct=u.getContainer().offsetLeft,pt=t.canvasX+ct+j,St=t.canvasY+ut+et;pt+B.width>_&&(pt=t.canvasX-B.width-j+ct),St+B.height>I&&(St=t.canvasY-B.height-et+ut),mi(o,{top:"".concat(St,"px"),left:"".concat(pt,"px"),visibility:"visible"});var Vt=this.get("trigger")==="click",ne=function(Ce){if(Vt){Vt=!1;return}r.onMenuHide()};document.body.addEventListener("click",ne),this.set("handler",ne)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&mi(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,h.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(lu),Wx=Ux,Yx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hv=function(){return hv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},hv.apply(this,arguments)},mg=Math.max,Xx=zt,jx="default",Vx="keyShape",Hx="delegate",yg="svg",Zx=function(i){Yx(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,h.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=Zo(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),l=0,_=0,I=!1,B=0,j=0,et=0,ut=0,ct=0,pt=0,St=f||u?"mousedown":"dragstart";c.addEventListener(St,function(Ce){var We,Ne;if(Ce.dataTransfer){var rr=new Image;rr.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(Ne=(We=Ce.dataTransfer).setDragImage)===null||Ne===void 0||Ne.call(We,rr,0,0);try{Ce.dataTransfer.setData("text/html","view-port-minimap")}catch(dn){Ce.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,Ce.target===c){var wr=c.style;B=parseInt(wr.left,10),j=parseInt(wr.top,10),et=parseInt(wr.width,10),ut=parseInt(wr.height,10),!(et>n[0]||ut>n[1])&&(pt=a.getZoom(),ct=t.get("ratio"),I=!0,l=Ce.clientX,_=Ce.clientY)}},!1);var Vt=function(We){if(!(!I||(0,h.isNil)(We.clientX)||(0,h.isNil)(We.clientY))){var Ne=l-We.clientX,rr=_-We.clientY;(B-Ne<0||B-Ne+et>=n[0])&&(Ne=0),(j-rr<0||j-rr+ut>=n[1])&&(rr=0),B-=Ne,j-=rr,mi(c,{left:"".concat(B,"px"),top:"".concat(j,"px")}),a.translate(Ne*pt/ct,rr*pt/ct),l=We.clientX,_=We.clientY}};!f&&!u&&c.addEventListener("drag",Vt,!1);var ne=function(){I=!1,r.refresh=!0},re=f||u?"mouseup":"dragend";c.addEventListener(re,ne,!1),s.addEventListener("mouseleave",ne),s.addEventListener("mouseup",ne),(f||u)&&s.addEventListener("mousemove",Vt,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,f=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),l=a.getPointByCanvas(u,f),_=this.get("viewport");_||this.initViewport();var I=(l.x-c.x)*t,B=(l.y-c.y)*t,j=c.x*t+r,et=c.y*t+n,ut=j+I,ct=et+B;j<0&&(I+=j,j=0),ut>o[0]&&(I=I-(ut-o[0])),et<0&&(B+=et,et=0),ct>o[1]&&(B=B-(ct-o[1])),this.set("ratio",t);var pt="".concat(j,"px"),St="".concat(et,"px");mi(_,{left:pt,top:St,width:"".concat(I,"px"),height:"".concat(B,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===yg&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,h.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,h.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,h.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,h.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,h.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,h.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:hv({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=Zo("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,h.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=Zo('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var f,c=r.get("renderer");c===yg?f=new Cd({container:u,width:n[0],height:n[1]}):f=new nc({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case jx:this.updateGraphShapes();break;case Vx:this.updateKeyShapes();break;case Hx:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,_=c.width/l,I=c.height/l;Number.isFinite(f.width)&&(_=mg(f.width,_),I=mg(f.height,I)),_+=2*s,I+=2*s;var B=Math.min(n[0]/_,n[1]/I),j=[1,0,0,0,1,0,0,0,1],et=0,ut=0;Number.isFinite(f.minX)&&(et=-f.minX),Number.isFinite(f.minY)&&(ut=-f.minY);var ct=(n[0]-(_-2*s)*B)/2,pt=(n[1]-(I-2*s)*B)/2;j=Xx(j,[["t",et,ut],["s",B,B],["t",ct,pt]]),u.setMatrix(j),this.set("ratio",B),this.set("totaldx",ct+et*B),this.set("totaldy",pt+ut*B),this.set("dx",ct),this.set("dy",pt),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(lu),Kx=Zx,$x=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function If(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function qx(i,e){return i.x*e.x+i.y*e.y}function xg(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Qx=function(i){$x(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(St){(St.x===null||!St.y===null||St.x===void 0||!St.y===void 0)&&(s=!0),o[St.id]=St}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var _=r.get("cycles"),I=r.get("iterations"),B=r.get("iterRate"),j=r.get("lambda"),et=0;et<_;et++){for(var ut=function(Vt){var ne=[];n.forEach(function(re,Ce){if(re.source!==re.target){var We=o[re.source],Ne=o[re.target];ne[Ce]=r.getEdgeForces({source:We,target:Ne},Ce,u,j);for(var rr=0;rr<u+1;rr++)c[Ce][rr].x+=ne[Ce][rr].x,c[Ce][rr].y+=ne[Ce][rr].y}})},ct=0;ct<I;ct++)ut(ct);j=j/2,u*=f,I*=B,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(St,Vt){St.source!==St.target&&(St.type="polyline",St.controlPoints=c[Vt].slice(1,c[Vt].length-1))});var pt=r.get("graph");pt.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],l=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+l.x),y:.5*(c.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var _=0;!((f=o[u])===null||f===void 0)&&f.length?_=r.getEdgeLength(o[u]):_=If({x:c.x,y:c.y},{x:l.x,y:l.y});var I=_/(t+1),B=I,j=[{x:c.x,y:c.y}];o[u].forEach(function(et,ut){if(ut!==0){for(var ct=If(et,o[u][ut-1]);ct>B;){var pt=B/ct,St={x:o[u][ut-1].x,y:o[u][ut-1].y};St.x+=pt*(et.x-o[u][ut-1].x),St.y+=pt*(et.y-o[u][ut-1].y),j.push(St),ct-=B,B=I}B-=ct}}),j.push({x:l.x,y:l.y}),o[u]=j}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=If(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],l=o[u.target];n.forEach(function(_,I){if(!(I<=f)){var B=o[_.source],j=o[_.target],et=t.getBundleScore({source:c,target:l},{source:B,target:j});et>=a&&(s[f].push(I),s[I].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=If({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=If({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=qx({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=If(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=xg(r.source,t),a=xg(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*If(o,s)/If(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(If(t.source,t.target)*(n+1)),c=[{x:0,y:0}],l=1;l<n;l++){var _={x:0,y:0},I=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},f),B=o.getElectrostaticForce(l,r);_.x=a*(I.x+B.x),_.y=a*(I.y+B.y),c.push(_)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var l={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var _=If(s[c][t],s[r][t]),I=1/_;f.x+=l.x*I,f.y+=l.y*I}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(lu),Jx=Qx,tb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vv=function(){return vv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},vv.apply(this,arguments)},hh=.05,bg={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},eb=function(i){tb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,h.clone)(bg),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-hh:a=1/(1-hh);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var _=r.get("d");r.set("molecularParam",(_+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-hh:o=1/(1-hh);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var l=r.get("d");r.set("molecularParam",(l+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),l=n.get("d"),_=n.get("molecularParam"),I=a.getNodes(),B=I.length,j=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(j=n.get("cacheCenter"));var et=n.get("delegateCenterDiff");et&&(j.x+=et.x,j.y+=et.y),n.updateDelegate(j,f);for(var ut=0;ut<B;ut++){var ct=I[ut].getModel(),pt=ct.x,St=ct.y;if(!(isNaN(pt)||isNaN(St))){var Vt=(pt-j.x)*(pt-j.x)+(St-j.y)*(St-j.y);if(!isNaN(Vt)&&Vt<c&&Vt!==0){var ne=Math.sqrt(Vt),re=_*ne/(l*ne+f),Ce=(pt-j.x)/ne,We=(St-j.y)/ne;if(ct.x=Ce*re+j.x,ct.y=We*re+j.y,s[ct.id]||(s[ct.id]={x:pt,y:St,texts:[]}),o.push(ct),u&&2*ne<f)for(var Ne=I[ut],rr=Ne.getContainer(),wr=rr.getChildren(),dn=wr.length,Gn=0;Gn<dn;Gn++){var In=wr[Gn];In.get("type")==="text"&&(s[ct.id].texts.push({visible:In.get("visible"),shape:In}),In.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,l=0;l<c;l++){var _=f.texts[l];_.shape.set("visible",_.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,l=t.scaleDBy,_=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var I=r.get("d"),B=r.get("r");if(r.set("molecularParam",(I+1)*B),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var j=r.get("dPercentText");j&&(j.remove(),j.destroy())}if(_==="drag"||_==="wheel"||_==="unset"){r.set("scaleRBy",_),r.get("delegate").remove(),r.get("delegate").destroy();var j=r.get("dPercentText");j&&(j.remove(),j.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||bg;s=u.addShape("circle",{attrs:vv({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(B){a.scaleRByWheel(B)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(B){a.set("dragging",!0),a.set("cacheCenter",{x:B.x,y:B.y}),a.set("dragPrePos",{x:B.x,y:B.y})}),s.on("drag",function(B){a.scaleRByDrag(B)}),s.on("dragend",function(B){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(B){n.scaleDByWheel(B)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(B){a.set("dragging",!0),a.set("cacheCenter",{x:B.x,y:B.y}),a.set("dragPrePos",{x:B.x,y:B.y})}),s.on("drag",function(B){n.scaleDByDrag(B)}),s.on("dragend",function(B){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),_=t.y+r/1.5+16;if(!l||l.destroyed){var I=o.get("group");l=I.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:_,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(c,"%"),x:t.x,y:_})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(lu),rb=eb,nb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Eg=.05;typeof document!="undefined"&&dh()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var ab=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},ib=function(i){nb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,h.isString)(a)&&(o=Zo(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,h.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(l){var _=ab(l).filter(function(B){return B.nodeName==="LI"});if(_.length!==0){var I=_[0].getAttribute("code");I&&(f?f(I,r):t.handleDefaultOperator(I))}});var c=this.get("position");c&&mi(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,l=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,h.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){var B=t.findById(I.id);I.visible?t.showItem(B,!1):t.hideItem(B,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){var B=t.findById(I.id);delete I.id,t.updateItem(B,I,!1),B.getType()==="combo"&&t.updateCombo(B)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){var B=I.itemType;delete I.itemType,t.addItem(B,I,!1)})});break}case"add":Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){t.removeItem(I.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){t.updateComboTree(I.id,I.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){t.updateComboTree(I.id,I.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,h.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(_){var I=t.findById(_.id);_.visible?t.showItem(I,!1):t.hideItem(I,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(_){var I=t.findById(_.id);delete _.id,t.updateItem(I,_,!1),I.getType()==="combo"&&t.updateCombo(I)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(_){var I=_.itemType;delete _.itemType,t.addItem(I,_,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(_){t.updateComboTree(_.id,_.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-Eg*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-Eg*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,h.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(lu),ob=ib,sb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&dh()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var ub=function(i){sb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=Zo("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,h.isString)(a)&&(a=document.getElementById(a)),mi(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){mi(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,h.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&mi(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){mi(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),_=t.item;if(_.getType&&_.getType()==="node"&&l&&(0,h.isArray)(l)&&l.length>=2){var I=_.getBBox();c={x:I.minX+I.width*l[0],y:I.minY+I.height*l[1]}}var B=a.getCanvasByPoint(c.x,c.y),j=B.x,et=B.y,ut=a.getContainer(),ct={x:j+ut.offsetLeft+u,y:et+ut.offsetTop+f};mi(n,{visibility:"visible",display:"unset"});var pt=n.getBoundingClientRect();j+pt.width+u>o&&(ct.x-=pt.width+u),et+pt.height+f>s&&(ct.y-=pt.height+f,ct.y<0&&(ct.y=0)),mi(n,{left:"".concat(ct.x,"px"),top:"".concat(ct.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,h.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(lu),fb=ub,wg="timebarstartplay",Sg="timebarendplay",Of="valuechange",Al="timebarConfigChanged",Yc="playPauseBtn",Id="nextStepBtn",Od="preStepBtn",yM={opacity:.5,fill:"#000"},xM={opacity:.5,fill:"#000",r:5},bM={fill:"#fff",fontSize:12},cb=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,l=c===void 0?"g6-component-timebar-tooltip":c,_=e.backgroundColor,I=_===void 0?"#000":_,B=e.textColor,j=B===void 0?"#fff":B,et=e.opacity,ut=et===void 0?.8:et,ct=e.fontSize,pt=ct===void 0?12:ct;this.container=o,this.className=l,this.backgroundColor=I,this.textColor=j,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=ut,this.fontSize=pt,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,l=e.container,_=Zo("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,h.isString)(l)&&(l=document.getElementById(l)),l.appendChild(_),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,mi(_,{visibility:"hidden",top:0,left:0});var I=Zo(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));I.innerHTML=s,_.appendChild(I),e.backgroundDOM=I;var B=Zo("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));_.appendChild(B),e.arrowDOM=B,e.container=_},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;mi(t.container,{top:"".concat(-f-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),mi(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),mi(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var _=n-u/2,I=n+u/2;_<0?mi(t.backgroundDOM,{marginLeft:"".concat(-u/2-_,"px")}):I>t.parentWidth&&mi(t.backgroundDOM,{marginLeft:"".concat(-u/2-I+t.parentWidth+12,"px")})},i.prototype.hide=function(){mi(this.container,{top:0,left:0,visibility:"hidden"})},i}(),lb=cb,pv=function(){return pv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},pv.apply(this,arguments)},db=function(){function i(e){this.config=(0,h.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,h.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,l=this.config.y+f,_=t.addGroup({name:Yc});this.startMarkerGroup=_.addGroup({name:Yc}),this.circle=t.addShape("circle",{attrs:pv({x:c,y:l,r:this.config.r*a},r),name:Yc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=_.addGroup({name:Yc});var I=.25*this.config.r*a,B=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:l-B/2,width:I,height:B,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:l-B/2,width:I,height:B,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),hb=db,vs=function(){return vs=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},vs.apply(this,arguments)},Dd=zt,vb="#aaa",pb="green",gb={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},mb={fill:"#fff"},yb={fill:"green"},Mg={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},_g={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},xb={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Mg,timeTypeControllerStyle:_g},gv=110,Xc=50,Df={SINGLE:"single",RANGE:"range"},bb=function(){function i(e){this.controllerCfg=(0,h.deepMix)({},xb,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Df.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?vb:s,f=e.stroke,c=f===void 0?pb:f,l=e.containerStyle,_=l===void 0?{}:l,I=vs(vs({},gb),e.playBtnStyle||{}),B=vs(vs({},mb),e.preBtnStyle||{}),j=vs(vs({},yb),e.nextBtnStyle||{}),et=r/2-5,ut=a+10,ct=this.controllerGroup.addShape("rect",{attrs:vs({x:n,y:ut,width:t,height:r,stroke:c,fill:u},_),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:ut,r:et}):this.playButton=new hb({group:this.controllerGroup,x:t/2,y:ut+et+5,r:et,isPlay:this.isPlay,style:I});var pt=B.offsetX||0,St=B.offsetY||0,Vt=(B.scale||1)*et;this.controllerGroup.addShape("path",{attrs:vs({path:this.getPreMarkerPath(t/2-5*et+pt,ut+et+5+St,Vt*.5)},B),name:Od});var ne=j.offsetX||0,re=j.offsetY||0,Ce=(j.scale||1)*et;this.controllerGroup.addShape("path",{attrs:vs({path:this.getNextMarkerPath(t/2+5*et+ne,ut+et+5+re,Ce*.5)},j),name:Id}),ct.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var We=this.controllerCfg.scale,Ne=We===void 0?1:We,rr=this.controllerGroup.getCanvasBBox(),wr=(rr.maxX+rr.minX)/2,dn=(rr.maxY+rr.minY)/2,Gn=Dd([1,0,0,0,1,0,0,0,1],[["t",-wr,-dn],["s",Ne,Ne],["t",wr,dn]]);this.controllerGroup.setMatrix(Gn)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=vs(vs({},Mg),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,l=c===void 0?{}:c,_=a.scale,I=_===void 0?1:_,B=a.offsetX,j=B===void 0?0:B,et=a.offsetY,ut=et===void 0?0:et,ct=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=ct;var pt=[],St=5;this.speedAxisY=[19,22,26,32,39];for(var Vt=0;Vt<5;Vt++){var ne=t+this.speedAxisY[Vt],re=r-(n?Xc:gv);ct.addShape("line",{attrs:vs({x1:re,x2:re+15,y1:ne,y2:ne},s),speed:St,name:"speed-rect"}),this.speedAxisY[Vt]=ne,pt.push(St),St=St-1}this.speedText=ct.addShape("text",{attrs:vs({x:r-(n?Xc:gv)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=ct.addShape("path",{attrs:vs({path:this.getPointerPath(r-(n?Xc:gv),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var Ce=this.speedGroup.getCanvasBBox(),We=(Ce.maxX+Ce.minX)/2,Ne=(Ce.maxY+Ce.minY)/2,rr=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];rr=Dd(rr,[["t",-We,-Ne],["s",I,I],["t",We+j*I,Ne+ut*I]]),this.speedGroup.setMatrix(rr)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=vs(vs({},_g),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,l=o.offsetY,_=l===void 0?0:l,I=o.box,B=I===void 0?{}:I,j=o.check,et=j===void 0?{}:j,ut=o.text,ct=ut===void 0?{}:ut;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var pt=a===Df.SINGLE;this.toggleGroup.addShape("rect",{attrs:vs({x:n-Xc,y:this.speedAxisY[0]+3.5},B),isChecked:pt,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:vs({path:[["M",n-Xc+3,this.speedAxisY[1]+6],["L",n-Xc+7,this.speedAxisY[1]+10],["L",n-Xc+12,this.speedAxisY[1]+4]]},et),capture:!1,name:"check-icon"}),pt||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:vs({text:pt?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-Xc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ct),name:"checked-text"});var St=this.toggleGroup.getCanvasBBox(),Vt=(St.maxX+St.minX)/2,ne=(St.maxY+St.minY)/2,re=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];re=Dd(re,[["t",-Vt,-ne],["s",u,u],["t",Vt+c*u,ne+_*u]]),this.toggleGroup.setMatrix(re)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Dd(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Al,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Dd(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Al,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Df.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Df.SINGLE),t.target.set("isChecked",!a),e.group.emit(Al,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),Cg=bb,Ld=function(){return Ld=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ld.apply(this,arguments)},Eb=zt,wb={fill:"#5B8FF9"},Sb={fill:"#e6e8e9"},Mb=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,l=e.x,_=l===void 0?0:l,I=e.y,B=I===void 0?0:I,j=e.tickLabelFormatter,et=e.selectedTickStyle,ut=et===void 0?wb:et,ct=e.unselectedTickStyle,pt=ct===void 0?Sb:ct,St=e.tooltipBackgroundColor,Vt=e.tooltipFomatter,ne=e.tickLabelStyle,re=e.controllerCfg,Ce=re===void 0?{speed:1}:re;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=j,this.tickLabelStyle=ne||{},this.selectedTickStyle=ut,this.unselectedTickStyle=pt,this.controllerCfg=Ce,this.currentSpeed=Ce.speed||1,this.x=_,this.y=B,this.tooltipBackgroundColor=St,this.tooltipFomatter=Vt,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,l=t.unselectedTickStyle,_=t.tickLabelStyle,I=r-2*a,B=10,j=4,et=3*a+j+B,ut=n-et-2*a,ct=2,pt=o.length,St=(I-ct*(pt-1))/pt;this.tickWidth=St;var Vt=this.sliceGroup,ne=[],re=[],Ce=Math.round(pt*s),We=Math.round(pt*u);this.startTickRectId=Ce,this.endTickRectId=We;var Ne=_.rotate;delete _.rotate,o.forEach(function(wr,dn){var Gn=dn>=Ce&&dn<=We,In=Gn?c:l,an=Vt.addShape("rect",{attrs:Ld({x:a+dn*(St+ct),y:a,width:St,height:ut},In),draggable:!0,name:"tick-rect-".concat(dn)}),ta=Vt.addShape("rect",{attrs:{x:a+dn*St+ct*(2*dn-1)/2,y:a,width:dn===0||dn===pt-1?St+ct/2:St+ct,height:ut,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(dn)});ta.toFront();var $n=an.getBBox(),on=($n.minX+$n.maxX)/2;ne.push({rect:an,pickRect:ta,value:wr.date,x:on,y:$n.minY});var Tn;if(f?(Tn=f(wr),!(0,h.isString)(Tn)&&Tn&&(Tn=wr.date)):dn%Math.round(pt/10)===0&&(Tn=wr.date),Tn){re.push(Tn);var Un=$n.maxY+a*2;Vt.addShape("line",{attrs:{stroke:"#BFBFBF",x1:on,y1:Un,x2:on,y2:Un+j},name:"tick-line"});var Wn=Un+j+a,ia=Vt.addShape("text",{attrs:Ld({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:on,y:Wn,textAlign:"center",text:Tn,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},_),capture:!1,name:"tick-label"}),da=ia.getBBox();if(da.maxX>r?ia.attr("textAlign","right"):da.minX<0&&ia.attr("textAlign","left"),(0,h.isNumber)(Ne)&&re.length!==10){var Wa=Eb([1,0,0,0,1,0,0,0,1],[["t",-on,-Wn],["r",Ne],["t",on-5,Wn+2]]);ia.attr({textAlign:"left",matrix:Wa})}re.length===1?ia.attr({textAlign:"left"}):re.length===10&&ia.attr({textAlign:"right"})}}),this.tickRects=ne;var rr=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Cg(Ld({group:rr,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var l=c.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var _=parseInt(l.get("name").split("-")[2],10);if(!isNaN(_)){var I=e.tickRects,B=e.unselectedTickStyle;I.forEach(function(ct){ct.rect.attr(B)});var j=e.selectedTickStyle;I[_].rect.attr(j),e.startTickRectId=_,e.endTickRectId=_;var et=I.length,ut=_/et;e.graph.emit(Of,{value:[ut,ut]})}}}),t.on("dragstart",function(c){var l=e.tickRects,_=e.unselectedTickStyle;l.forEach(function(ct){ct.rect.attr(_)});var I=c.target,B=parseInt(I.get("name").split("-")[2],10),j=e.selectedTickStyle;l[B].rect.attr(j),e.startTickRectId=B;var et=l.length,ut=B/et;e.graph.emit(Of,{value:[ut,ut]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var l=parseInt(c.target.get("name").split("-")[2],10),_=e.startTickRectId,I=e.tickRects,B=e.selectedTickStyle,j=e.unselectedTickStyle,et=0;et<I.length;et++){var ut=et>=_&&et<=l?B:j;I[et].rect.attr(ut)}var ct=I.length;e.endTickRectId=l;var pt=_/ct,St=l/ct;e.graph.emit(Of,{value:[pt,St]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var l=e.startTickRectId,_=parseInt(c.target.get("name").split("-")[2],10);if(!(_<l)){var I=e.selectedTickStyle,B=e.tickRects;B[_].rect.attr(I),e.endTickRectId=_;var j=B.length,et=l/j,ut=_/j;e.graph.emit(Of,{value:[et,ut]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new lb({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var l=c.pickRect;l.on("mouseenter",function(_){var I=_.target;if(I.get("type")==="rect"){var B=parseInt(I.get("name").split("-")[2],10),j=o.getClientByPoint(u[B].x,u[B].y);s.show({x:u[B].x,y:u[B].y,clientX:j.x,clientY:j.y,text:a?a(u[B].value):u[B].value})}}),l.on("mouseleave",function(_){s.hide()})});var f=this.group;f.on("".concat(Yc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Id,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(Od,":click"),function(){e.updateStartEnd(-1)}),f.on(Al,function(c){var l=c.type,_=c.speed;e.currentSpeed=_})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(wg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Sg,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(Of,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Yc,":click")),e.off("".concat(Id,":click")),e.off("".concat(Od,":click")),e.off(Al),this.sliceGroup.destroy()},i}(),_b=Mb,Tg={};function Cb(i){return Tg[i]}function Lf(i,e){Tg[i]=e}var Tb=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,h.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,h.map)(this.ticks,function(t,r){return(0,h.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,h.isNil)(n)||!(0,h.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,h.assign)(this,this.__cfg__),this.setDomain(),(0,h.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,h.isString)(e)){var r=Cb(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,h.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,h.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),mv=Tb,Ab=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,h.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,h.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,b.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,h.isNil)(this.getConfig("min"))&&(this.min=0),(0,h.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(mv),Pd=Ab,Ag=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,jc="\\d\\d?",Vc="\\d\\d",Ib="\\d{3}",Ob="\\d{4}",Nd="[^\\s]+",Ig=/\[([^]*?)\]/gm;function Og(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var Dg=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function Hc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var Lg=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Pg=["January","February","March","April","May","June","July","August","September","October","November","December"],Db=Og(Pg,3),Lb=Og(Lg,3),yv={dayNamesShort:Lb,dayNames:Lg,monthNamesShort:Db,monthNames:Pg,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},vh=Hc({},yv),Ng=function(i){return vh=Hc(vh,i)},Rg=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},du=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},Pb={D:function(i){return String(i.getDate())},DD:function(i){return du(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return du(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return du(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return du(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return du(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return du(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return du(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return du(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return du(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return du(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return du(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+du(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+du(Math.floor(Math.abs(e)/60),2)+":"+du(Math.abs(e)%60,2)}},kg=function(i){return+i-1},Bg=[null,jc],Fg=[null,Nd],zg=["isPm",Nd,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],Gg=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],Nb={D:["day",jc],DD:["day",Vc],Do:["day",jc+Nd,function(i){return parseInt(i,10)}],M:["month",jc,kg],MM:["month",Vc,kg],YY:["year",Vc,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",jc,void 0,"isPm"],hh:["hour",Vc,void 0,"isPm"],H:["hour",jc],HH:["hour",Vc],m:["minute",jc],mm:["minute",Vc],s:["second",jc],ss:["second",Vc],YYYY:["year",Ob],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",Vc,function(i){return+i*10}],SSS:["millisecond",Ib],d:Bg,dd:Bg,ddd:Fg,dddd:Fg,MMM:["month",Nd,Dg("monthNamesShort")],MMMM:["month",Nd,Dg("monthNames")],a:zg,A:zg,ZZ:Gg,Z:Gg},ph={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Ug=function(i){return Hc(ph,i)},Wg=function(i,e,t){if(e===void 0&&(e=ph.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=ph[e]||e;var r=[];e=e.replace(Ig,function(a,o){return r.push(o),"@@@"});var n=Hc(Hc({},vh),t);return e=e.replace(Ag,function(a){return Pb[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function Yg(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=ph[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(Ig,function(St,Vt){return o.push(Rg(Vt)),"@@@"}),u={},f={};s=Rg(s).replace(Ag,function(St){var Vt=Nb[St],ne=Vt[0],re=Vt[1],Ce=Vt[3];if(u[ne])throw new Error("Invalid format. "+ne+" specified twice in format");return u[ne]=!0,Ce&&(f[Ce]=!0),a.push(Vt),"("+re+")"}),Object.keys(f).forEach(function(St){if(!u[St])throw new Error("Invalid format. "+St+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var l=Hc(Hc({},vh),t),_=1;_<c.length;_++){var I=a[_-1],B=I[0],j=I[2],et=j?j(c[_],l):+c[_];if(et==null)return null;n[B]=et}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var ut;if(n.timezoneOffset==null){ut=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var ct=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],_=0,pt=ct.length;_<pt;_++)if(u[ct[_][0]]&&n[ct[_][0]]!==ut[ct[_][1]]())return null}else if(ut=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return ut}var Rb={format:Wg,parse:Yg,defaultI18n:yv,setGlobalDateI18n:Ng,setGlobalDateMasks:Ug},Xg=Rb;function kb(i){return function(e,t,r,n){for(var a=(0,h.isNil)(r)?0:r,o=(0,h.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var jg="format";function Vg(i,e){var t=W[jg]||Xg[jg];return t(i,e)}function gh(i){return(0,h.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,h.isDate)(i)&&(i=i.getTime()),i}var of=1e3,Il=60*of,Ol=60*Il,ic=24*Ol,Rd=ic*31,Hg=ic*365,kd=[["HH:mm:ss",of],["HH:mm:ss",of*10],["HH:mm:ss",of*30],["HH:mm",Il],["HH:mm",Il*10],["HH:mm",Il*30],["HH",Ol],["HH",Ol*6],["HH",Ol*12],["YYYY-MM-DD",ic],["YYYY-MM-DD",ic*4],["YYYY-WW",ic*7],["YYYY-MM",Rd],["YYYY-MM",Rd*4],["YYYY-MM",Rd*6],["YYYY",ic*380]];function Bb(i,e,t){var r=(e-i)/t,n=kb(function(o){return o[1]})(kd,r)-1,a=kd[n];return n<0?a=kd[0]:n>=kd.length&&(a=(0,h.last)(kd)),a}var Fb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=gh(t);var r=this.values.indexOf(t);return r===-1&&((0,h.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):Vg(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,h.each)(t,function(r,n){t[n]=gh(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Pd),zb=Fb,Gb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,h.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,h.head)(t),n=(0,h.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,h.isNil)(this.minLimit)||(this.min=r),(0,h.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,h.getRange)(this.values),r=t.min,n=t.max;(0,h.isNil)(this.min)&&(this.min=r),(0,h.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,h.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(mv),mh=Gb,Ub=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(mh),Bd=Ub;function Zc(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function ju(i,e){return i===1?1:Math.log(e)/Math.log(i)}function Zg(i,e,t){(0,h.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,h.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function Kg(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function EM(i,e){var t=Kg(i),r=Kg(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var Wb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=ju(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=ju(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=ju(r,this.min);var c=(t-a)/o,l=c*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=Zg(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(ju(a,r)-ju(a,n)):s=(ju(a,t)-ju(a,n))/(ju(a,r)-ju(a,n)),s},e}(mh),Yb=Wb,Xb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=Zc(n,this.max),o=Zc(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(Zc(a,t)-Zc(a,n))/(Zc(a,r)-Zc(a,n));return o},e}(mh),jb=Xb,Vb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):Vg(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,h.isString)(r)||(0,h.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return gh(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,h.isNil)(r)||!(0,h.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,h.isNil)(n)||!(0,h.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,h.each)(t,function(f){var c=gh(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,h.isNil)(r)&&(this.min=o),(0,h.isNil)(n)&&(this.max=u)}},e}(Bd),Hb=Vb,Zb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,h.last)(r);if(o<0)return(0,h.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,h.last)(t)!==this.max&&t.push(this.max),(0,h.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,h.head)(r))return 0;if(t>(0,h.last)(r))return 1;var n=0;return(0,h.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(mh),$g=Zb,Kb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}($g),$b=Kb,qg={};function qb(i){return qg[i]}function Pf(i,e){if(qb(i))throw new Error("type '"+i+"' existed.");qg[i]=e}var Qb=function(i){(0,b.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,h.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(mv),Jb=Qb;function Qg(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,h.isNumber)(t)){var a=(0,h.filter)(e,function(B,j){return j%t===0}),o=(0,h.last)(e);return n&&(0,h.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,h.isNil)(u)&&(u=0),(0,h.isNil)(f)&&(f=e.length-1),!(0,h.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),l=[],_=u,I=0;I<r&&!(_>=f);I++)_=Math.min(u+I*c,f),I===r-1&&n?l.push(e[f]):l.push(e[_]);return l}function tE(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new eE;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var xv=5,Jg=Math.sqrt(50),t0=Math.sqrt(10),e0=Math.sqrt(2),eE=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=xv);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=yh(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=yh(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=yh(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=xv),rE(this._domain[0],this._domain[this._domain.length-1],e||xv)},i}();function rE(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=yh(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function yh(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=Jg?10:a>=t0?5:a>=e0?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=Jg?10:a>=t0?5:a>=e0?2:1)}function r0(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function bv(i,e,t){var r=r0(i,t,"floor"),n=r0(e,t,"ceil");r=(0,h.fixedBase)(r,t),n=(0,h.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,h.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function Ev(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,h.isNil)(n)?(0,h.isNil)(e)?o:e:n,l=(0,h.isNil)(a)?(0,h.isNil)(t)?s:t:a;if(c>l&&(r=[c,l],l=r[0],c=r[1]),f<=2)return[c,l];for(var _=(l-c)/(f-1),I=[],B=0;B<f;B++)I.push(c+_*B);return I}function nE(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=tE(i);return!(0,h.isNil)(n)||!(0,h.isNil)(a)?Ev(i,(0,h.head)(o),(0,h.last)(o)):r?bv(e,t,r).ticks:o}function Dl(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var aE=[1,5,2,2.5,4,3],wM=null,n0=Number.EPSILON*100;function iE(i,e){return(i%e+e)%e}function oE(i){return Math.round(i*1e12)/1e12}function sE(i,e,t,r,n,a){var o=(0,h.size)(e),s=(0,h.indexOf)(e,i),u=0,f=iE(r,a);return(f<n0||a-f<n0)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function uE(i,e,t){var r=(0,h.size)(e),n=(0,h.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function fE(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function cE(i,e){return i>=e?2-(i-1)/(e-1):1}function lE(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function dE(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function hE(){return 1}function vE(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=aE),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(Un,Wn){return Dl(i+u*Wn)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<n.length;l+=1){var _=n[l],I=uE(_,n,c);if(a[0]*I+a[1]+a[2]+a[3]<f.score){c=1/0;break}for(var B=2;B<1/0;){var j=cE(B,o);if(a[0]*I+a[1]+a[2]*j+a[3]<f.score)break;for(var et=(e-i)/(B+1)/c/_,ut=Math.ceil(Math.log10(et));ut<1/0;){var ct=c*_*Math.pow(10,ut),pt=dE(i,e,ct*(B-1));if(a[0]*I+a[1]*pt+a[2]*j+a[3]<f.score)break;var St=Math.floor(e/ct)*c-(B-1)*c,Vt=Math.ceil(i/ct)*c;if(St<=Vt)for(var s=Vt-St,ne=0;ne<=s;ne+=1){var re=St+ne,Ce=re*(ct/c),We=Ce+ct*(B-1),Ne=ct,rr=sE(_,n,c,Ce,We,Ne),wr=lE(i,e,Ce,We),dn=fE(B,o,i,e,Ce,We),Gn=hE(),In=a[0]*rr+a[1]*wr+a[2]*dn+a[3]*Gn;In>f.score&&(!r||Ce<=i&&We>=e)&&(f.lmin=Ce,f.lmax=We,f.lstep=Ne,f.score=In)}ut+=1}B+=1}}c+=1}var an=Dl(f.lmax),ta=Dl(f.lmin),$n=Dl(f.lstep),on=Math.floor(oE((an-ta)/$n))+1,Tn=new Array(on);Tn[0]=Dl(ta);for(var l=1;l<on;l++)Tn[l]=Dl(Tn[l-1]+$n);return{min:Math.min(i,(0,h.head)(Tn)),max:Math.max(e,(0,h.last)(Tn)),ticks:Tn}}function pE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=vE(e,t,r,n).ticks;return!(0,h.isNil)(o)||!(0,h.isNil)(s)?Ev(i,(0,h.head)(u),(0,h.last)(u)):a?bv(e,t,a).ticks:u}function gE(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=ju(e,n);if(r>0)o=Math.floor(ju(e,r));else{var u=Zg(a,e,n);o=Math.floor(ju(e,u))}for(var f=s-o,c=Math.ceil(f/t),l=[],_=o;_<s+c;_=_+c)l.push(Math.pow(e,_));return r<=0&&l.unshift(0),l}function a0(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),l=Math.floor(i/f),_=Math.max(c*f,e),I=Math.min(l*f,i),B=Math.floor((_-I)/f)+1,j=new Array(B),et=0;et<B;et++)j[et]=Dl(I+et*f);return{min:I,max:_,ticks:j}}function mE(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(Zc(e,i.max)),n=Math.floor(Zc(e,i.min)),a=a0(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function yE(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function xE(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(yE(r,o))}return n}function bE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=a0(e,t,r).ticks;return!(0,h.isNil)(a)||!(0,h.isNil)(o)?Ev(i,(0,h.head)(s),(0,h.last)(s)):n?bv(e,t,n).ticks:s}function EE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=Bb(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function wE(i){var e=Qg((0,b.__assign)({showLast:!0},i));return e}function xh(i){return new Date(i).getFullYear()}function SE(i){return new Date(i,0,1).getTime()}function wv(i){return new Date(i).getMonth()}function ME(i,e){var t=xh(i),r=xh(e),n=wv(i),a=wv(e);return(r-t)*12+(a-n)%12}function _E(i,e){return new Date(i,e,1).getTime()}function CE(i,e){return Math.ceil((e-i)/ic)}function TE(i,e){return Math.ceil((e-i)/Ol)}function AE(i,e){return Math.ceil((e-i)/(60*1e3))}function IE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=xh(e);if(a>Hg)for(var u=xh(t),f=Math.ceil(a/Hg),c=s;c<=u+f;c=c+f)o.push(SE(c));else if(a>Rd)for(var l=Math.ceil(a/Rd),_=wv(e),I=ME(e,t),c=0;c<=I+l;c=c+l)o.push(_E(s,c+_));else if(a>ic)for(var B=new Date(e),j=B.getFullYear(),et=B.getMonth(),ut=B.getDate(),ct=Math.ceil(a/ic),pt=CE(e,t),c=0;c<pt+ct;c=c+ct)o.push(new Date(j,et,ut+c).getTime());else if(a>Ol)for(var B=new Date(e),j=B.getFullYear(),et=B.getMonth(),ct=B.getDate(),St=B.getHours(),Vt=Math.ceil(a/Ol),ne=TE(e,t),c=0;c<=ne+Vt;c=c+Vt)o.push(new Date(j,et,ct,St+c).getTime());else if(a>Il)for(var re=AE(e,t),Ce=Math.ceil(a/Il),c=0;c<=re+Ce;c=c+Ce)o.push(e+c*Il);else{var We=a;We<of&&(We=of);for(var Ne=Math.floor(e/of)*of,rr=Math.ceil((t-e)/of),wr=Math.ceil(We/of),c=0;c<rr+wr;c=c+wr)o.push(Ne+c*of)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Lf("cat",Qg),Lf("time-cat",wE),Lf("wilkinson-extended",pE),Lf("r-pretty",bE),Lf("time",EE),Lf("time-pretty",IE),Lf("log",gE),Lf("pow",mE),Lf("quantile",xE),Lf("d3-linear",nE),Pf("cat",Pd),Pf("category",Pd),Pf("identity",Jb),Pf("linear",Bd),Pf("log",Yb),Pf("pow",jb),Pf("time",Hb),Pf("timeCat",zb),Pf("quantize",$g),Pf("quantile",$b);var OE=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function DE(i){return(0,h.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function i0(i){return DE(i)}function LE(i){if(i.length<=2)return i0(i);var e=[];(0,h.each)(i,function(o){(0,h.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=Wr(e,!1),r=(0,h.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function PE(i,e,t,r){r===void 0&&(r=!0);var n=new Bd({values:i}),a=new Pd({values:(0,h.map)(i,function(s,u){return u})}),o=(0,h.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?LE(o):i0(o)}function NE(i,e,t,r){r===void 0&&(r=5);for(var n=new Bd({values:i}),a=new Pd({values:(0,h.map)(i,function(_,I){return I})}),o=(0,h.map)(i,function(_,I){return[a.scale(I)*e,t-n.scale(_)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},l=BE(c);s.push.apply(s,l)}return FE(s)}function RE(i,e){var t=new Bd({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function kE(i,e,t,r){var n=OE([],i,!0),a=RE(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function BE(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,h.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,h.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function FE(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Fd=function(){return Fd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Fd.apply(this,arguments)},zE={stroke:"#C5C5C5",strokeOpacity:.85},GE={fill:"#CACED4",opacity:.85},UE=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,l=c===void 0?!0:c,_=e.isArea,I=_===void 0?!1:_,B=e.data,j=B===void 0?[]:B,et=e.lineStyle,ut=e.areaStyle,ct=e.group,pt=e.interval,St=pt===void 0?null:pt;this.group=ct,this.x=r,this.y=a,this.width=s,this.height=f,this.data=j,this.smooth=l,this.isArea=I,this.lineStyle=Object.assign({},zE,et),this.areaStyle=Object.assign({},GE,ut),this.intervalConfig=St,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,l=e.areaStyle,_=this.group.addGroup({name:"trend-group"});if(s){var I=PE(s,n,a,u);if(_.addShape("path",{attrs:Fd({path:I},c),name:"trend-line"}),f){var B=kE(I,n,a,s);_.addShape("path",{attrs:Fd({path:B},l),name:"trend-area"})}}this.intervalConfig&&_.addShape("path",{attrs:Fd({path:NE(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),_.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),WE=UE,cd=function(){return cd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},cd.apply(this,arguments)},YE={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},XE={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},jE=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,l=e.height,_=l===void 0?24:l,I=e.style,B=I===void 0?{}:I;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=_,n==="trend"?this.style=cd(cd({},YE),B):n==="simple"&&(this.style=cd(cd({},XE),B)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,h.isNumber)(e)&&(this.x=e),(0,h.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),o0=jE,Wo=function(){return Wo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Wo.apply(this,arguments)},VE=zt,HE={fill:"#416180",opacity:.05},ZE={fill:"#416180",opacity:.15,radius:5},KE={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Sv=2,$E={width:Sv,height:24},qE={textBaseline:"middle",fill:"#000",opacity:.45},QE={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},JE={lineWidth:1,stroke:"#ccc"},tw=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(Un){return function(Wn){t.currentHandler=Un;var ia=Wn.originalEvent;ia.stopPropagation(),ia.preventDefault(),t.prevX=(0,h.get)(ia,"touches.0.pageX",ia.pageX);var da=t.canvas.get("container");da.addEventListener("mousemove",t.onMouseMove),da.addEventListener("mouseup",t.onMouseUp),da.addEventListener("mouseleave",t.onMouseUp),da.addEventListener("touchmove",t.onMouseMove),da.addEventListener("touchend",t.onMouseUp),da.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(Un){Un.stopPropagation(),Un.preventDefault();var Wn=(0,h.get)(Un,"touches.0.pageX",Un.pageX),ia=Wn-t.prevX,da=t.adjustOffsetRange(ia/t.width);t.updateStartEnd(da),t.updateUI(),t.prevX=Wn},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var Un=t.canvas.get("container");Un&&(Un.removeEventListener("mousemove",t.onMouseMove),Un.removeEventListener("mouseup",t.onMouseUp),Un.removeEventListener("mouseleave",t.onMouseUp),Un.removeEventListener("touchmove",t.onMouseMove),Un.removeEventListener("touchend",t.onMouseUp),Un.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,l=c===void 0?10:c,_=e.trendCfg,I=e.controllerCfg,B=I===void 0?{speed:1}:I,j=e.backgroundStyle,et=j===void 0?{}:j,ut=e.foregroundStyle,ct=ut===void 0?{}:ut,pt=e.handlerStyle,St=pt===void 0?{}:pt,Vt=e.textStyle,ne=Vt===void 0?{}:Vt,re=e.start,Ce=re===void 0?0:re,We=e.end,Ne=We===void 0?1:We,rr=e.minText,wr=rr===void 0?"":rr,dn=e.maxText,Gn=dn===void 0?"":dn,In=e.group,an=e.graph,ta=e.canvas,$n=e.tick,on=$n===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Wn){return Wn},ticks:[]}:$n,Tn=e.type;this.graph=an,this.canvas=ta,this.group=In,this.timeBarType=Tn,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=l,this.ticks=on.ticks,this.trendCfg=_,this.controllerCfg=B,this.currentSpeed=B.speed||1,this.tickLabelFormatter=on.tickLabelFormatter,Tn==="trend"?this.backgroundStyle=Wo(Wo({},HE),et):Tn==="simple"&&(this.backgroundStyle=Wo(Wo({},ZE),et)),this.foregroundStyle=Wo(Wo({},KE),ct),this.handlerStyle=Wo(Wo({},$E),St),this.textStyle=Wo(Wo({},qE),ne),this.tickLabelStyle=Wo(Wo({},QE),on.tickLabelStyle),this.tickLineStyle=Wo(Wo({},JE),on.tickLineStyle),this.currentMode=B.defaultTimeType||Df.RANGE,this.start=Ce,this.end=Ne,this.minText=wr,this.maxText=Gn,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,h.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,h.size)((0,h.get)(this.trendCfg,"data"))){var o=new WE(Wo(Wo({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Wo({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:Wo({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Wo({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Wo({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Wo({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Wo({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(ut){ut.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(ut){ut.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,h.get)(this.handlerStyle,"width",2),c=(0,h.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new o0({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var _=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new o0({name:"maxHandlerShape",group:_,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var I=this.ticks,B=r/(I.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(ut){ut.destroy()});var j=-1/0,et=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=I.map(function(ut,ct){e.tickPosList.push(e.x+ct*B);var pt;e.tickLabelFormatter?(pt=e.tickLabelFormatter(ut),!(0,h.isString)(pt)&&pt&&(pt=ut.date)):pt=ut.date;var St=e.x+ct*B,Vt=e.y+n+5,ne=e.group.addShape("text",{attrs:Wo({x:St,y:Vt,text:pt,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,h.isNumber)(et)&&ct!==I.length-1){var re=VE([1,0,0,0,1,0,0,0,1],[["t",-St,-Vt],["r",et],["t",St-5,Vt+2]]);ne.attr({textAlign:"left",matrix:re})}ct===0?ne.attr({textAlign:"left"}):ct!==I.length-1&&ne.attr({textAlign:"right"});var Ce=e.group.addShape("line",{attrs:Wo({x1:e.x+ct*B,y1:e.y+n+2,x2:e.x+ct*B,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});Ce.toBack();var We=ne.getBBox();return We.minX>j?(ne.show(),Ce.show(),j=We.minX+We.width+10):(ne.hide(),Ce.hide()),ne}),this.controllerBtnGroup=new Cg(Wo({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Df.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Yc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Id,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Od,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Al,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===Df.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Df.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,h.get)(this.handlerStyle,"width",Sv);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,h.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,h.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===Df.RANGE?this.graph.emit(Of,{value:[this.start,this.end].sort()}):this.currentMode===Df.SINGLE&&this.graph.emit(Of,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,h.get)(this.handlerStyle,"width",Sv),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var l=o.getBBox(),_=s.getBBox(),I=null,B=null;return this.timeBarType==="trend"?(I=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},B=f+_.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(I=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},B=s.attr("x")>this.width-_.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[B,I]:[I,B]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(wg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Sg,null))},i.prototype.destory=function(){this.graph.off(Of,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Yc,":click")),e.off("".concat(Id,":click")),e.off("".concat(Od,":click")),e.off(Al),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),ew=tw,rw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oc=function(){return oc=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},oc.apply(this,arguments)},nw=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},aw=4,iw=26,ow=function(i){rw(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,h.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),f;if(u?((0,h.isString)(u)&&(u=document.getElementById(u)),f=u):(f=Zo("<div class='".concat(s,"'></div>")),mi(f,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(f)}this.set("timeBarContainer",f);var l,_=t.get("renderer");_==="SVG"?l=new Cd({container:f,width:n,height:a}):l=new nc({container:f,width:n,height:a}),this.get("containerCSS")&&mi(f,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,l=r.controllerCfg,_=r.textStyle,I=r.tick,B=r.backgroundStyle,j=r.foregroundStyle,et=f.data,ut=nw(f,["data"]),ct=n-2*s,pt=u==="trend"?iw:aw,St=this.get("graph"),Vt=this.get("timeBarGroup"),ne=this.get("canvas"),re=null;if(u==="trend"||u==="simple"){var Ce=this.get("getValue");re=new ew(oc(oc({graph:St,canvas:ne,group:Vt,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:ct,height:pt,padding:s,backgroundStyle:B,foregroundStyle:j,trendCfg:oc(oc({},ut),{data:et.map(function(Ne){return(Ce==null?void 0:Ce(Ne))||Ne.value})})},c),{tick:{ticks:et,tickLabelFormatter:I.tickLabelFormatter,tickLabelStyle:I.tickLabelStyle,tickLineStyle:I.tickLineStyle},handlerStyle:oc(oc({},c.handlerStyle),{height:c.height||pt}),controllerCfg:l,textStyle:_}))}else u==="tick"&&(re=new _b(oc({graph:St,canvas:ne,group:Vt,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},I)));var We=function Ne(){var rr=t.get("timebar");rr.draggingHandler=!1,rr.isPlay&&(rr.isPlay=!1,rr.currentHandler=rr.maxHandlerShape,rr.changePlayStatus()),document.removeEventListener("mouseup",Ne)};ne.on("mousedown",function(Ne){(Ne.target.get("name")==="maxHandlerShape-handler"||Ne.target.get("name")==="minHandlerShape-handler"||Ne.target===re.foregroundShape)&&document.addEventListener("mouseup",We)}),this.set("timebar",re)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,c=c>=o.length?o.length-1:c;var _=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,I=_?_(o[c]):o[c].date,B=_?_(o[l]):o[l].date;if(s!=="tick"){var j=this.get("timebar");j.setText(I,B)}if(u)u(f,I,B);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var et=this.get("filterItemTypes"),ut=this.get("changeData"),ct=this.get("getDate"),pt=this.get("shouldIgnore"),St=o[c].date,Vt=o[l].date;if(ut||ut===void 0){var ne=this.cacheGraphData.nodes,re=this.cacheGraphData.edges,Ce={},We={};f.getNodes().forEach(function(Ne){return Ce[Ne.getID()]=!0}),f.getEdges().forEach(function(Ne){return We[Ne.getID()]=!0}),et.includes("node")&&(ne==null||ne.forEach(function(Ne){var rr=+((ct==null?void 0:ct(Ne))||Ne.date),wr=rr>=St&&rr<=Vt||(pt==null?void 0:pt("node",Ne,{min:St,max:Vt})),dn=Ce[Ne.id];dn&&!wr?(f.removeItem(Ne.id),Ce[Ne.id]=!1):!dn&&wr&&(f.addItem("node",Ne),Ce[Ne.id]=!0)}),re==null||re.forEach(function(Ne){var rr=Ce[Ne.source]&&Ce[Ne.target]||(pt==null?void 0:pt("edge",Ne,{min:St,max:Vt})),wr=!!f.findById(Ne.id);wr&&!rr?(f.removeItem(Ne.id),We[Ne.id]=!1):!wr&&rr?(f.addItem("edge",Ne),We[Ne.id]=!0):wr||(We[Ne.id]=!1)})),(this.get("filterEdge")||et.includes("edge"))&&(re==null||re.filter(function(Ne){var rr=+((ct==null?void 0:ct(Ne))||Ne.date),wr=rr>=St&&rr<=Vt||(pt==null?void 0:pt("edge",Ne,{min:St,max:Vt})),dn=Ce[Ne.source]&&Ce[Ne.target],Gn=wr&&dn,In=We[Ne.id];In&&!Gn?(We[Ne.id]=!1,f.removeItem(Ne.id)):!In&&Gn&&(We[Ne.id]=!0,f.addItem("edge",Ne))}))}else et.includes("node")&&f.getNodes().forEach(function(Ne){var rr=Ne.getModel();if(!(pt!=null&&pt("node",rr,{min:St,max:Vt}))){var wr=+((ct==null?void 0:ct(rr))||rr.date);wr<St||wr>Vt?f.hideItem(Ne):f.showItem(Ne)}}),(this.get("filterEdge")||et.includes("edge"))&&f.getEdges().forEach(function(Ne){var rr=Ne.getModel();if(!(pt!=null&&pt("edge",rr,{min:o[c].date,max:o[l].date}))){var wr=+((ct==null?void 0:ct(rr))||rr.date);if(wr<o[c].date||wr>o[l].date)f.hideItem(Ne);else{var dn=Ne.getSource().isVisible(),Gn=Ne.getTarget().isVisible();dn&&Gn&&f.showItem(Ne)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Of,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Of,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,h.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(lu),sw=ow,uw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fw=Gs.applyMatrix;function cw(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var lw=function(i){uw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,h.isString)(a)&&(a=document.getElementById(a));var o=Zo("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,l=0,_=0,I=0,B=0,j=0;a.addEventListener("mousedown",function(et){if(r.refresh=!1,et.target===o){var ut=o.style;_=parseInt(ut.width,10),I=parseInt(ut.height,10);var ct=t.get("width"),pt=t.get("height");_>ct||I>pt||(j=n.getZoom(),B=t.get("ratio"),f=!0,s=et.clientX,u=et.clientY)}},!1),a.addEventListener("mousemove",function(et){if(!(!f||(0,h.isNil)(et.clientX)||(0,h.isNil)(et.clientY))){var ut=t.get("width"),ct=t.get("height"),pt=o.style;c=parseInt(pt.left,10),l=parseInt(pt.top,10),_=parseInt(pt.width,10),I=parseInt(pt.height,10);var St=s-et.clientX,Vt=u-et.clientY;c-St<0?St=c:c-St+_>=ut&&(St=0),l-Vt<0?Vt=l:l-Vt+I>=ct&&(Vt=0),c-=St,l-=Vt,mi(o,{left:"".concat(c,"px"),top:"".concat(l,"px")}),n.translate(St*j/B,Vt*j/B),s=et.clientX,u=et.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],_=[c.maxX-c.minX,c.maxY-c.minY],I={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(I.width=_[0],I.height=I.width/u):(I.height=_[1],I.width=I.height*u),I.minX=l[0]-I.width/2,I.minY=l[1]-I.height/2;var B=f.getMatrix();B||(B=[1,0,0,0,1,0,0,0,1]);var j=J.invert([1,0,0,0,1,0,0,0,1],B),et=fw({x:I.minX,y:I.minY},j),ut=a.getCanvasByPoint(et.x,et.y),ct=this.get("viewport");ct||this.initViewport();var pt=o/I.width,St=pt*r,Vt=pt*n,ne=r*-ut.x/I.width,re=n*-ut.y/I.height,Ce=ne+St,We=re+Vt;ne<0&&(St+=ne,ne=0),Ce>r&&(St=St-(Ce-r)),re<0&&(Vt+=re,re=0),We>n&&(Vt=Vt-(We-n)),this.set("ratio",t);var Ne="".concat(ne,"px"),rr="".concat(re,"px");mi(ct,{left:Ne,top:rr,width:"".concat(St,"px"),height:"".concat(Vt,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var l=Zo("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,h.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var _=Zo('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(_);var I=Zo('<span style="display: table-cell; vertical-align: middle; "></span>');_.appendChild(I),t.set("containerDOM",_),t.set("containerSpan",I);var B=Zo('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",B),t.updateImgSize(),I.appendChild(B),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=cw(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=Zo('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(lu),dw=lw,hw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mv=function(){return Mv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Mv.apply(this,arguments)},vw=Gs.distance,s0=.05,u0={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},pw=function(i){hw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,h.clone)(u0),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-s0:a=1/(1-s0);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function(ut){ut.remove(),ut.destroy()}),l=[],a.forEach(function(ut){var ct=ut.getModel(),pt=ct.x,St=ct.y;vw({x:pt,y:St},f)<s&&(o[ct.id]=ut)});var _=n.getEdges(),I=[];_.forEach(function(ut){var ct=ut.getModel(),pt=ct.source,St=ct.target;c(ct)&&(u==="only-source"||u==="one"?o[pt]&&!o[St]&&I.push(ut):u==="only-target"||u==="one"?o[St]&&!o[pt]&&I.push(ut):u==="both"&&o[pt]&&o[St]&&I.push(ut))});var B=r.get("showNodeLabel"),j=r.get("showEdgelabel"),et=n.get("group");I.forEach(function(ut){var ct=ut.get("group").get("children");ct.forEach(function(pt){var St=pt.get("type"),Vt=et.addShape(St,{attrs:pt.attr()});l.push(Vt),B&&St==="text"&&Vt.set("visible",!0)})}),Object.keys(o).forEach(function(ut){var ct=o[ut],pt=ct.get("group").clone();if(et.add(pt),l.push(pt),j)for(var St=pt.get("children"),Vt=0;Vt<St.length;Vt++){var ne=St[Vt];ne.get("type")==="text"&&ne.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||u0;o=s.addShape("circle",{attrs:Mv({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(lu),gw=pw,mw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yw=Gs.pointLineDistance,xw={stroke:"#FA8C16",lineWidth:1},bw=function(i){mw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:xw,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,h.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},_={x:n.x+r.width/2,y:n.y+r.height},I={x:n.x,y:n.y+r.height/2},B={x:n.x+r.width,y:n.y+r.height/2},j=[],et=[],ut=null;if(this.clearAlignLine(),(0,h.each)(s,function(pt){pt[4].isVisible&&(j.push(a.getLineDisObject(pt,c)),j.push(a.getLineDisObject(pt,l)),j.push(a.getLineDisObject(pt,_)))}),(0,h.each)(u,function(pt){pt[4].isVisible&&(et.push(a.getLineDisObject(pt,I)),et.push(a.getLineDisObject(pt,l)),et.push(a.getLineDisObject(pt,B)))}),j.sort(function(pt,St){return pt.dis-St.dis}),et.sort(function(pt,St){return pt.dis-St.dis}),j.length!==0&&j[0].dis<f){t.y=j[0].line[1]-j[0].point.y+n.y,ut={type:"item",horizontals:[j[0]]};for(var ct=1;ct<3;ct++)j[0].dis===j[ct].dis&&ut.horizontals.push(j[ct])}if(et.length!==0&&et[0].dis<f){t.x=et[0].line[0]-et[0].point.x+n.x,ut?ut.verticals=[et[0]]:ut={type:"item",verticals:[et[0]]};for(var ct=1;ct<3;ct++)et[0].dis===et[ct].dis&&ut.verticals.push(et[ct])}ut&&(ut.bbox=r,this.addAlignLine(ut))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),l=c.get("group");n==="item"&&(a&&(0,h.each)(a,function(_){var I=_.line,B=_.point,j=(I[0]+I[2])/2,et,ut;B.x<j?(et=B.x-r.width/2,ut=Math.max(I[0],I[2])):(et=B.x+r.width/2,ut=Math.min(I[0],I[2]));var ct=(0,h.mix)({x1:et,y1:I[1],x2:ut,y2:I[1]},u),pt=l.addShape("line",{attrs:ct,capture:!1});f.push(pt)}),o&&(0,h.each)(o,function(_){var I=_.line,B=_.point,j=(I[1]+I[3])/2,et,ut;B.y<j?(et=B.y-r.height/2,ut=Math.max(I[1],I[3])):(et=B.y+r.height/2,ut=Math.min(I[1],I[3]));var ct=(0,h.mix)({x1:I[0],y1:et,x2:I[0],y2:ut},u),pt=l.addShape("line",{attrs:ct,capture:!1});f.push(pt)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:yw(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,h.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(lu),Ew=bw,ww=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),as=function(){return as=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},as.apply(this,arguments)},Sw=["click","mouseenter"],Mw=function(i){ww(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=Zo(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();mi(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,l=0,_={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(I){var B=s[f[I]],j=I;switch(I){case"top":B+=l;break;case"left":B+=c;break;case"bottom":B=n.getHeight()-t[1]-B+l,j="top";break;default:B=n.getWidth()-t[0]-B+c,j="left";break}_[j]=B}),_.top+=o+n.getContainer().offsetTop,_.left+=a+n.getContainer().offsetLeft,Object.keys(_).forEach(function(I){_[I]="".concat(_[I],"px")}),_},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";Sw.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();mi(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var _=l.get("children"),I=_[0],B=_[1];I.attr(as(as({},I.get("oriAttrs")),s)),B.attr(as(as({},B.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var _=l.get("children"),I=_[0],B=_[1];I.attr(as(as({},I.get("oriAttrs")),f)),B.attr(as(as({},B.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(ut){return ut.get("name")==="root"}),l=c.find(function(ut){return ut.get("name")==="node-group"}),_=c.find(function(ut){return ut.get("name")==="edge-group"}),I=l.get("children").filter(function(ut){return ut.get("active")}),B=_.get("children").filter(function(ut){return ut.get("active")}),j=0,et=["getNodes","getEdges"];et.forEach(function(ut){o[ut]().forEach(function(ct){var pt=!1,St=ut==="getNodes"?I:B;St.forEach(function(Vt){var ne=n[Vt.get("id")];pt=pt||ne(ct.getModel())}),pt?(o.setItemState(ct,u,!1),o.setItemState(ct,s,!0),j++):(o.setItemState(ct,s,!1),o.setItemState(ct,u,!0))})}),j||et.forEach(function(ut){o[ut]().forEach(function(ct){o.clearItemStates(ct,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new nc({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(an,ta){s[an].forEach(function($n){var on,Tn=f[ta].addGroup({id:$n.id,name:"node-container"}),Un,Wn=$n.type,ia=t.getShapeSize($n),da=ia.width,Wa=ia.height,ai=ia.r,Ji=t.getStyle(an.substr(0,4),$n);switch($n.type){case"circle":Un={r:ai,x:0,y:0};break;case"rect":Un={width:da,height:Wa,x:-da/2,y:-Wa/2};break;case"ellipse":Un={rx:da,ry:Wa,x:0,y:0},Wn="ellipse";break;case"line":Un={x1:-da/2,y1:0,x2:da/2,y2:0},Wn="line";break;case"quadratic":Un={path:[["M",-da/2,0],["Q",0,da/2,da/2,0]]},Wn="path";break;case"cubic":Un={path:[["M",-da/2,0],["C",-da/6,da/2,da/6,-da/2,da/2,0]]},Wn="path";break;case"diamond":Un={path:[["M",0,-Wa],["L",da,0],["L",0,Wa],["L",-da,0],["Z"]]},Wn="path";break;case"triangle":Un={path:[["M",-da,Wa],["L",0,-Wa],["L",da,Wa],["Z"]]},Wn="path";break;case"star":Un={path:Gs.getStarPath(ai*3,ai*1.2)},Wn="path";break;default:Un={r:ai,x:0,y:0};break}var Di=Tn.addShape(Wn,{attrs:as(as({},Un),Ji),name:"".concat($n.type,"-node-keyShape"),oriAttrs:as({opacity:1},Ji)});if($n.label){var to=Di.getBBox(),uo=((on=$n.labelCfg)===null||on===void 0?void 0:on.style)||{},Yo=as({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},uo);Tn.addShape("text",{attrs:as({x:to.maxX+4,y:0,text:$n.label},Yo),className:"legend-label",name:"".concat($n.type,"-node-text"),oriAttrs:Yo})}})});var c=this.get("padding"),l,_=n.find(function(an){return an.get("name")==="title-container"}),I={height:0,maxY:0,width:0};if(this.get("title")){_||(_=n.addGroup({name:"title-container"}));var B={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},j=this.get("titleConfig")||{},et=Object.assign(B,j.style||{});l=_.addShape("text",{attrs:as({text:this.get("title")},et)}),I=_.getCanvasBBox(),_.setMatrix([1,0,0,0,1,0,j.offsetX,j.offsetY,1])}this.layoutItems();var ut=n.getCanvasBBox(),ct=a.getCanvasBBox(),pt=ct.minX<0?Math.abs(ct.minX)+c[3]:c[3],St=I.maxY<ct.minY?Math.abs(I.maxY-ct.minY)+c[0]:I.maxY+c[0],Vt=[1,0,0,0,1,0,pt,St,1];a.setMatrix(Vt),ut=n.getCanvasBBox();var ne=[ut.minX+ut.width+c[1],ut.minY+ut.height+c[2]];if(l){var j=as({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));I=_.getCanvasBBox();var re=_.getMatrix()||[1,0,0,0,1,0,0,0,1];j.position==="center"?re[6]=ne[0]/2+j.offsetX:j.position==="right"?(re[6]=ne[0]-c[3]+j.offsetX,l.attr({textAlign:"right"})):(re[6]=c[3]+j.offsetX,l.attr({textAlign:"left"})),_.setMatrix(re),I=_.getCanvasBBox(),pt=ct.minX<0?Math.abs(ct.minX)+c[3]:c[3],St=ct.minY<I.maxY?Math.abs(I.maxY-ct.minY)+c[0]:I.maxY+c[0],Vt=[1,0,0,0,1,0,pt,St,1],a.setMatrix(Vt);var Ce=[1,0,0,0,1,0,pt,St,1];this.get("layout")==="vertical"?Ce[6]+=ct.maxX+this.get("horiSep"):Ce[7]+=ct.maxY+this.get("vertiSep"),o.setMatrix(Ce)}else{ct=a.getCanvasBBox();var We=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?We[6]+=Vt[6]+ct.maxX+this.get("horiSep"):We[7]+=Vt[7]+ct.maxY+this.get("vertiSep"),o.setMatrix(We)}ut=n.getCanvasBBox(),ct=a.getCanvasBBox(),Vt=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var Ne=o.getMatrix()||[1,0,0,0,1,0,0,0,1],rr=o.getCanvasBBox();ne=[Math.max(ct.width+Vt[6],rr.width+Ne[6])+c[1],Math.max(ct.height+Vt[7],rr.height+Ne[7])+c[2]],r.changeSize(ne[0],ne[1]);var wr=this.get("containerStyle"),dn=n.getMatrix()||[1,0,0,0,1,0,0,0,1],Gn=Gs.invertMatrix({x:0,y:0},dn),In=n.addShape("rect",{attrs:as({x:Gn.x+(wr.lineWidth||1),y:Gn.y+(wr.lineWidth||1),width:ne[0]-2*(wr.lineWidth||1),height:ne[1]-2*(wr.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},wr),name:"legend-back-rect",capture:!1});return In.toBack(),ne},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(St){return St.get("name")==="root"}),f=u.find(function(St){return St.get("name")==="node-group"}),c=u.find(function(St){return St.get("name")==="edge-group"}),l={min:0,max:-1/0},_=-1/0;f.get("children").forEach(function(St,Vt){Vt===0&&(l.min=s[0]);var ne=St.get("children")[0],re=St.getCanvasBBox(),Ce=ne.getBBox(),We=Ce.width,Ne=Ce.height,rr=0,wr=0,dn=0;a==="vertical"?(wr=s[1],dn=s[0]+We/2,s[0]=dn+re.height+n,rr=re.maxX+wr+We/2):(wr=s[0]+We/2,dn=s[1],s[0]=wr+re.width+r,rr=re.maxY+dn+Ne/2),s[0]>l.max&&(l.max=s[0]),rr>_&&(_=rr),St.setMatrix([1,0,0,0,1,0,wr,dn,1])});var I=l.max-l.min,B={min:0,max:-1/0},j=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?j.maxX+r:j.maxY+n,c.get("children").forEach(function(St,Vt){Vt===0&&(B.min=s[0]);var ne=St.get("children")[0],re=St.getCanvasBBox(),Ce=ne.getBBox(),We=Ce.width,Ne=Ce.height,rr=0,wr=0;a==="vertical"?(rr=s[1],wr=s[0],s[0]=wr+re.height+n,St.setMatrix([1,0,0,0,1,0,0,wr+Ne/2,1])):(rr=s[0],wr=s[1],s[0]=rr+re.width+r,St.setMatrix([1,0,0,0,1,0,rr+We/2,0,1])),s[0]>B.max&&(B.max=s[0])});var et=B.max-B.min;if(o&&o!==""&&o!=="left"){var ut=I-et,ct=o==="center"?Math.abs(ut)/2:Math.abs(ut),pt=ut<0?f:c;pt.get("children").forEach(function(St){var Vt=St.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?Vt[7]+=ct:Vt[6]+=ct,St.setMatrix(Vt)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,h.uniqueId)(),type:n.type||"circle",style:as({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:as({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,h.uniqueId)(),type:s,size:f,style:as({lineWidth:(0,h.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:as({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,h.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,h.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,h.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,h.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return as(as({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(lu),_w=Mw,Cw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vu=function(){return Vu=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Vu.apply(this,arguments)},f0=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&dh()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var c0="canvas-annotation",Tw=function(i){Cw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Vu(Vu({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",_=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),I="<p class='g6-annotation-close'>x</p>",B=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(B,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(I,`
        </div>
        `).concat(_,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new nc({container:n,width:s.right-s.left,height:s.bottom-s.top});mi(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,h.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var _,I=((_=l==null?void 0:l.getModel)===null||_===void 0?void 0:_.call(l))||{},B=I.label,j=I.id;return B||j||"-"}),t.get("getContent")||t.set("getContent",function(l){var _,I;if(!l)return"-";var B=((_=l.getModel)===null||_===void 0?void 0:_.call(l))||{},j=B.label,et=B.id,ut=(I=l.getType)===null||I===void 0?void 0:I.call(l),ct=ut?"".concat(ut,": "):"";return"".concat(ct).concat(j||et||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,l=c-f,_=u-s,I=r.position,B=I===void 0?"top":I,j=r.offsetX,et=j===void 0?0:j,ut=r.offsetY,ct=ut===void 0?0:ut,pt=f0(r,["position","offsetX","offsetY"]),St=r.height,Vt=St===void 0?"fit-content":St,ne=r.width,re=ne===void 0?n.getWidth():ne;Vt==="100%"&&(Vt=l),re==="100%"&&(re=_);var Ce="unset",We="unset",Ne={};switch(B){case"right":Ce="".concat(l,"px"),Ne={top:0,right:0},Ne.right+=s+et,Ne.top+=f+ct;break;case"bottom":We="".concat(_,"px"),Ne={bottom:0,left:0},Ne.left+=s+et,Ne.bottom+=f+ct;break;case"top":We="".concat(_,"px");case"left":Ce="".concat(l,"px");default:Ne={top:0,left:0},Ne.left+=s+et,Ne.top+=f+ct;break}Object.keys(Ne).forEach(function(wr){Ne[wr]="".concat(Ne[wr],"px")});var rr=Zo("<div class='".concat(r.className," g6-annotation-container'></div>"));return mi(rr,Vu(Vu({position:"absolute",display:B==="top"||B==="bottom"?"inline-flex":"unset",width:(0,h.isNumber)(re)?"".concat(re,"px"):re,height:(0,h.isNumber)(Vt)?"".concat(Vt,"px"):Vt,maxHeight:Ce,maxWidth:We,overflow:"scroll"},Ne),pt)),a.appendChild(rr),rr.addEventListener("scroll",function(wr){t.updateLinks()}),rr}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,l=a.getClientByPoint(s.x,s.y),_=l.x,I=l.y;Object.values(n).forEach(function(B){var j=B.card;if(j){var et=j.style,ut=Ll(et.left),ct=Ll(et.top),pt=j.getBoundingClientRect(),St=pt.width,Vt=pt.height,ne=ut,re=ct;ut+St>_-f&&(ne=_-f-St),ut<0&&(ne=0),ct+Vt>I-c&&(re=I-c-Vt),ct<0&&(re=0),mi(j,{left:"".concat(ne,"px"),top:"".concat(re,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),_=l.minHeight,I=l.minWidth,B=l.width,j=l.height,et=l.collapsed,ut=et===void 0?!1:et,ct=l.x,pt=l.y,St=l.title,Vt=l.content,ne=l.maxTitleLength,re=l.defaultBegin,Ce=f0(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),We=o.get("linkGroup"),Ne=this.get("rows")||[[]],rr=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),wr=rr?c0:t.getID(),dn=s[wr]||{},Gn=dn.card,In=dn.link,an=dn.x,ta=dn.y,$n=dn.title,on=dn.content,Tn=this.get("getTitle"),Un=this.get("getContent"),Wn=this.get("getContentPlaceholder")||function(){return""},ia=this.get("getTitlePlaceHolder")||function(){return""},da=Wn(t),Wa=ia(t),ai=Zo(this.getDOMContent(Vu({itemId:wr,collapsed:ut,title:((a=$n||St||(Tn==null?void 0:Tn(t)))===null||a===void 0?void 0:a.substr(0,ne))||Wa,content:on||Vt||(Un==null?void 0:Un(t))||da},Ce))),Ji=(0,h.isNumber)(_)?"".concat(_,"px"):_;mi(ai,{minHeight:ut?"unset":Ji,minWidth:(0,h.isNumber)(I)?"".concat(I,"px"):I,height:j,width:B});var Di=!!Gn;Di?(In==null||In.remove(!0),f.replaceChild(ai,Gn)):f.appendChild(ai);var to;if(!c){if(to=f.getBoundingClientRect()||{},ct!==void 0&&pt!==void 0)an=ct,ta=pt;else if(!Di&&!rr){var uo=to.top,Yo=re||{},Lo=Yo.left,Hu=Yo.right,ws=Hu===void 0?16:Hu,Zu=Yo.top,Ss=Zu===void 0?8:Zu,Ms=Yo.bottom,Mu=ws,Us=Ss;isNaN(Lo)||(Mu=f.scrollWidth-Lo),isNaN(Ms)||(Us=f.scrollHeight-Ms);var iu=(0,h.isNumber)(I)?I:100;an=f.scrollWidth-ai.scrollWidth-(Ne.length-1)*iu-Mu;var yi=Ne[Ne.length-1],Zi=(yi[yi.length-1]||{}).bbox;ta=(Zi==null?void 0:Zi.bottom)-uo||Us}mi(ai,{position:"absolute",left:"".concat(an,"px"),top:"".concat(ta,"px"),cusor:c?"unset":"move"})}this.bindListener(ai,wr);var pi=ai.getBoundingClientRect();if(!rr){var Ki=_v(t,pi,u,this.get("canvas")),_o=this.get("linkStyle");In=We.addShape("path",{attrs:Vu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:Ki},_o)})}if(s[wr]=Vu(Vu({},s[wr]||{}),{id:wr,collapsed:ut,card:ai,link:In,x:an,y:ta,cardBBox:pi,content:on||Vt,title:$n||St,contentPlaceholder:da,titlePlaceholder:Wa,isCanvas:rr}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Ia=!isNaN(ct)&&!isNaN(pt);if(!Di&&!rr&&!Ia){var Si=to.bottom,Ti=Si===void 0?0:Si,uo=to.top;Ne[Ne.length-1].push({id:wr,bbox:pi}),pi.top>Ti-uo-pi.height-16&&Ne.push([]),this.set("rows",Ne)}}this.updateCardSize(wr);var Co=this.get("onAnnotationChange");Co==null||Co(s[wr],Di?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=Ll(o.paddingLeft)+Ll(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":mi(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":mi(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Vu(Vu({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;mi(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var _=n.get("itemHighlightState");c.setItemState(l,_,!0)}var I=f[r].link;if(I){var B=n.get("linkHighlightStyle")||{};I.attr(B)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var _=n.get("itemHighlightState");c.setItemState(l,_,!1)}var I=f[r].link;if(I){var B=n.get("linkHighlightStyle")||{};Object.keys(B).forEach(function(et){I.attr(et,void 0),I.attr(et,void 0)});var j=n.get("linkStyle");I.attr(j)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,l=c===void 0?20:c;if(f){var _=u.target,I=_.className;if(!(I!=="g6-annotation-title"&&I!=="g6-annotation-content")){var B=I==="g6-annotation-title"?_.getBoundingClientRect():_.parentNode.getBoundingClientRect(),j=B.width,et=B.height,ut=getComputedStyle(_),ct=I==="g6-annotation-title"?"input":"textarea",pt=Zo("<".concat(ct,' class="').concat(I,'-input" type="textarea" style="width:').concat(j,"px; height: ").concat(et,'px; min-width: 16px;"/>')),St=Zo('<div class="'.concat(I,'-input-wrapper" style="width: ').concat(j,"px; height: ").concat(et,"px; min-width: 16px; margin-right: ").concat(ut.marginRight,'" />'));St.appendChild(pt),_.parentNode.replaceChild(St,_);var Vt=f[r],ne=Vt.contentPlaceholder,re=Vt.titlePlaceholder,Ce=Vt.content,We=Vt.title,Ne=Ce;I==="g6-annotation-title"?(pt.name="title",pt.maxLength=l,Ne=We):pt.name="content",Ne?(pt.innerHTML=_.innerHTML,pt.value=_.innerHTML):pt.placeholder=I==="g6-annotation-title"?re:ne,pt.focus(),pt.addEventListener("blur",function(rr){pt.value&&(_.innerHTML=pt.value,Vt[pt.name||"title"]=pt.value),St.parentNode.replaceChild(_,St),n.updateCardSize(r);var wr=n.get("onAnnotationChange");wr==null||wr(Vt,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:Ll(c.left),top:Ll(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,l=u.clientY,_=n.get("dragging");if(!(isNaN(c)||isNaN(l)||!_)){var I=_.x,B=_.y,j=_.left,et=_.top,ut=_.card,ct=c-I,pt=l-B;j+=ct,et+=pt;var St=n.get("graph"),Vt=St.getPointByCanvas(0,0),ne=St.getPointByCanvas(St.getWidth(),St.getHeight()),re=St.getClientByPoint(Vt.x,Vt.y),Ce=re.x,We=re.y,Ne=St.getClientByPoint(ne.x,ne.y),rr=Ne.x,wr=Ne.y,dn=ut.getBoundingClientRect(),Gn=dn.right-dn.left,In=dn.bottom-dn.top;(j>rr-Ce-Gn&&ct>0||j<0&&ct<0)&&(j-=ct),(et>wr-We-In&&pt>0||et<0&&pt<0)&&(et-=pt),mi(ut,{left:"".concat(j,"px"),top:"".concat(et,"px"),visibility:"hidden"}),I=c,B=l;var an=(f[r]||{}).link;if(an){var ta=St.findById(r);an.attr("path",_v(ta,dn,St,n.get("canvas")))}n.set("dragging",{x:I,y:B,left:j,top:et,card:ut})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var l=n.get("dragging");if(l){var _=l.left,I=l.top,B=l.card;c[r].x=_,c[r].y=I,mi(B,{visibility:"visible"}),n.set("dragging",!1);var j=n.get("rows");j==null||j.forEach(function(ut){for(var ct=ut.length-1;ct>=0;ct--)ut[ct].id===r&&ut.splice(ct,1)});var et=n.get("onAnnotationChange");et==null||et(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=Ll(s.marginLeft),f=o.getBoundingClientRect().width;mi(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var l=_v(r,c.getBoundingClientRect(),o,a);f.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,l=u.x,_=u.y,I=u.id,B=u.collapsed,j=u.card;if(!(j&&j.style.display==="none"&&!t)){var et=n.findById(I)||n.get("canvas");s.push({id:I,x:l,y:_,collapsed:B,title:f||(a==null?void 0:a(et)),content:c||(o==null?void 0:o(et)),visible:j&&j.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,l=a.collapsed,_=a.visible,I=n.findById(o);if(!I&&o===c0&&(I=n.get("canvas")),!I){var B=r.get("cardInfoMap")||{};B[o]=a,r.set("cardInfoMap",B);return}r.toggleAnnotation(I,{x:s,y:u,title:f,content:c,collapsed:l}),_||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(lu),Aw=Tw,Iw=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(l){var _=t[l],I=c.x-_.x,B=c.y-_.y,j=I*I+B*B;o>j&&(o=j,r=c,n=_,a=[f,l])})});var s=20,u=Gs.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},_v=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,l=u.maxX,_=u.maxY,I=e.getModel(),B=I.x,j=I.y;f+=B,c+=j,l+=B,_+=j,o={left:{x:f,y:(c+_)/2},right:{x:l,y:(c+_)/2},top:{x:(f+l)/2,y:c},bottom:{x:(f+l)/2,y:_}}}Object.keys(o).forEach(function(We){var Ne=o[We],rr=Ne.x,wr=Ne.y,dn=r.getClientByPoint(rr,wr);o[We]=n.getPointByClient(dn.x,dn.y)});var et=t.top,ut=et===void 0?0:et,ct=t.left,pt=ct===void 0?0:ct,St=t.right,Vt=St===void 0?0:St,ne=t.bottom,re=ne===void 0?0:ne,Ce={left:n.getPointByClient(pt,(ut+re)/2),right:n.getPointByClient(Vt,(ut+re)/2),top:n.getPointByClient((pt+Vt)/2,ut),bottom:n.getPointByClient((pt+Vt)/2,re)};return Iw(o,Ce)},Ll=function(e){return Number(e.replace(/\s+|px/gi,""))||0},Ow={PluginBase:lu,Menu:Wx,Grid:Fx,Minimap:Kx,Bundling:Jx,ToolBar:ob,Tooltip:fb,Fisheye:rb,TimeBar:sw,ImageMinimap:dw,EdgeFilterLens:gw,SnapLine:Ew,Legend:_w,Annotation:Aw},Dw=Ow,Es=Dw;rc("circle",{options:{size:Jn.defaultNode.size,style:{x:0,y:0,stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,h.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,l=o.show,_=o.text;if(l){var I="".concat(this.type,"-icon");_?t.shapeMap[I]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:I,name:I,draggable:!0}):t.shapeMap[I]=t.addShape("image",{attrs:(0,b.__assign)({x:-f/2,y:-c/2},o),className:I,name:I,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,b.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0]/2;if(o){var B="link-point-left";t.shapeMap[B]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:-I,y:0,r:f/2||c||5}),className:B,name:B,isAnchorPoint:!0})}if(s){var j="link-point-right";t.shapeMap[j]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:I,y:0,r:f/2||c||5}),className:j,name:j,isAnchorPoint:!0})}if(a){var et="link-point-top";t.shapeMap[et]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:-I,r:f/2||c||5}),className:et,name:et,isAnchorPoint:!0})}if(u){var ut="link-point-bottom";t.shapeMap[ut]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:I,r:f/2||c||5}),className:ut,name:ut,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,b.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,b.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),rc("rect",{options:{size:[100,30],style:{radius:0,stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,b.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0],B=_[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:-I/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:I/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,h.mix)({},a,s.attr(),u);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),rc("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,b.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0]/2,B=_[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:-I,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:I,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:-B,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:B,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,b.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,h.mix)({},a,u.attr(),s);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),rc("diamond",{options:{size:[80,80],style:{stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,b.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0],B=_[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:-I/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:I/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getPath(e),o=(0,b.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,h.mix)({},a,u.attr(),s);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),rc("triangle",{options:{size:40,direction:"up",style:{stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,l=a.height,_=a.show,I=a.offset,B=a.text;if(_)if(B)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var j=-c/2,et=-l/2;(u==="up"||u==="down")&&(et+=I),(u==="left"||u==="right")&&(j+=I),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.__assign)({x:j,y:et},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,l=a.bottom,_=a.size,I=a.r,B=(0,b.__rest)(a,["top","left","right","bottom","size","r"]),j=this.getSize(e),et=j[0];if(f){var ut=null,ct=et*Math.sin(1/3*Math.PI),pt=et*Math.sin(1/3*Math.PI);s==="up"?ut=[-pt,ct]:s==="down"?ut=[-pt,-ct]:s==="left"&&(ut=[-pt,pt-ct]),ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},B),{x:ut[0],y:ut[1],r:_/2||I||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var St=null,ct=et*Math.sin(1/3*Math.PI),pt=et*Math.sin(1/3*Math.PI);s==="up"?St=[pt,ct]:s==="down"?St=[pt,-ct]:s==="right"&&(St=[pt,pt-ct]),St&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},B),{x:St[0],y:St[1],r:_/2||I||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var Vt=null,ct=et*Math.sin(1/3*Math.PI),pt=et*Math.sin(1/3*Math.PI);s==="up"?Vt=[pt-ct,-ct]:s==="left"?Vt=[pt,-ct]:s==="right"&&(Vt=[-pt,-ct]),Vt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},B),{x:Vt[0],y:Vt[1],r:_/2||I||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var ne=null,ct=et*Math.sin(1/3*Math.PI),pt=et*Math.sin(1/3*Math.PI);s==="down"?ne=[-pt+ct,ct]:s==="left"?ne=[pt,ct]:s==="right"&&(ne=[-pt,ct]),ne&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},B),{x:ne[0],y:ne[1],r:_/2||I||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getPath(e),o=(0,b.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,h.mix)({},a,u.attr(),s);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(an){return an.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(an){return an.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(an){return an.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(an){return an.get("className")==="link-point-bottom"}),l=n,_=s||u||f||c;_&&(l=_.attr());var I=(0,h.mix)({},l,e.linkPoints),B=I.fill,j=I.stroke,et=I.lineWidth,ut=I.size/2;ut||(ut=I.r);var ct=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},pt=ct.left,St=ct.right,Vt=ct.top,ne=ct.bottom,re=this.getSize(e),Ce=re[0],We={r:ut,fill:B,stroke:j,lineWidth:et},Ne=null,rr=Ce*Math.sin(1/3*Math.PI),wr=Ce*Math.sin(1/3*Math.PI);o==="up"?Ne=[-wr,rr]:o==="down"?Ne=[-wr,-rr]:o==="left"&&(Ne=[-wr,wr-rr]),Ne&&(s?!pt&&pt!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,b.__assign)((0,b.__assign)({},We),{x:Ne[0],y:Ne[1]})):pt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},We),{x:Ne[0],y:Ne[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var dn=null;o==="up"?dn=[wr,rr]:o==="down"?dn=[wr,-rr]:o==="right"&&(dn=[wr,wr-rr]),dn&&(u?!St&&St!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,b.__assign)((0,b.__assign)({},We),{x:dn[0],y:dn[1]})):St&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},We),{x:dn[0],y:dn[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var Gn=null;o==="up"?Gn=[wr-rr,-rr]:o==="left"?Gn=[wr,-rr]:o==="right"&&(Gn=[-wr,-rr]),Gn&&(f?!Vt&&Vt!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,b.__assign)((0,b.__assign)({},We),{x:Gn[0],y:Gn[1]})):Vt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},We),{x:Gn[0],y:Gn[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var In=null;o==="down"?In=[-wr+rr,rr]:o==="left"?In=[wr,rr]:o==="right"&&(In=[-wr,rr]),In&&(c?!ne&&ne!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,b.__assign)((0,b.__assign)({},We),{x:In[0],y:In[1]})):ne&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},We),{x:In[0],y:In[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),rc("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Jn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Jn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Jn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,l=(0,b.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,b.__assign)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,_=n.text,I=(0,b.__rest)(n,["width","height","x","y","offset","text"]);_?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},I),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},I),{x:f||-o/2+s+l,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,_=n.text,I=(0,b.__rest)(n,["width","height","x","y","offset","text"]);_?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},I),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,b.__assign)((0,b.__assign)({},I),{x:f||o/2-s+l,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,b.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0],B=_[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:-I/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:I/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},l),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],_=null,I=s.show,B=s.width,j=-l/2+a.offset;I&&(j=-l/2+B+a.offset);var et=a.style,ut=f.style,ct=f.paddingTop;return(0,h.isString)(e.description)?(_=t.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},et),{x:j,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=_,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},ut),{x:j,y:17+(ct||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(_=t.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},et),{x:j,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=_),_},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,b.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],_=c[1],I=t.get("keyShape");I.attr((0,b.__assign)((0,b.__assign)({},a),{x:-l/2,y:-_/2,width:l,height:_}));var B=t.getContainer(),j=B.shapeMap["rect-logo-icon"]||B.find(function(ai){return ai.get("className")==="rect-logo-icon"}),et=j?j.attr():{},ut=(0,h.mix)({},et,e.logoIcon),ct=ut.width;ct===void 0&&(ct=this.options.logoIcon.width);var pt=e.logoIcon?e.logoIcon.show:void 0,St=s.offset,Vt=-l/2+ct+St;!pt&&pt!==void 0&&(Vt=-l/2+St);var ne=B.shapeMap["node-label"]||B.find(function(ai){return ai.get("className")==="node-label"}),re=B.shapeMap["rect-description"]||B.find(function(ai){return ai.get("className")==="rect-description"});if(e.label)if(!ne)B.shapeMap["node-label"]=B.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},s.style),{x:Vt,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var Ce=e.labelCfg?e.labelCfg.style:{},We=(0,h.mix)({},ne.attr(),Ce);e.label&&(We.text=e.label),We.x=Vt,(0,h.isString)(e.description)&&(We.y=-5),re&&(re.resetMatrix(),re.attr({x:Vt})),ne.resetMatrix(),ne.attr(We)}if((0,h.isString)(e.description)){var Ne=f.paddingTop;if(!re)B.shapeMap["rect-description"]=B.addShape("text",{attrs:(0,b.__assign)((0,b.__assign)({},f.style),{x:Vt,y:17+(Ne||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var Ce=e.descriptionCfg?e.descriptionCfg.style:{},rr=(0,h.mix)({},re.attr(),Ce);(0,h.isString)(e.description)&&(rr.text=e.description),rr.x=Vt,re.resetMatrix(),re.attr((0,b.__assign)((0,b.__assign)({},rr),{y:17+(Ne||0)}))}}var wr=B.shapeMap["pre-rect"]||B.find(function(ai){return ai.get("className")==="pre-rect"});if(wr&&!wr.destroyed){var dn=(0,h.mix)({},wr.attr(),e.preRect);wr.attr((0,b.__assign)((0,b.__assign)({},dn),{x:-l/2,y:-_/2,height:_}))}if(j&&!j.destroyed)if(!pt&&pt!==void 0)j.remove(),delete B.shapeMap["pre-rect"];else{var Gn=ut.width,In=ut.height,an=ut.x,ta=ut.y,$n=ut.offset,on=(0,b.__rest)(ut,["width","height","x","y","offset"]);j.attr((0,b.__assign)((0,b.__assign)({},on),{x:an||-l/2+Gn+$n,y:ta||-In/2,width:Gn,height:In}))}else pt&&this.drawLogoIcon(e,B);var Tn=B.shapeMap["rect-state-icon"]||B.find(function(ai){return ai.get("className")==="rect-state-icon"}),Un=Tn?Tn.attr():{},Wn=(0,h.mix)({},Un,e.stateIcon);if(Tn){!Wn.show&&Wn.show!==void 0&&(Tn.remove(),delete B.shapeMap["rect-state-icon"]);var ia=Wn.width,In=Wn.height,an=Wn.x,ta=Wn.y,da=Wn.offset,Wa=(0,b.__rest)(Wn,["width","height","x","y","offset"]);Tn.attr((0,b.__assign)((0,b.__assign)({},Wa),{x:an||l/2-ia+da,y:ta||-In/2,width:ia,height:In}))}else Wn.show&&this.drawStateIcon(e,B);this.updateLinkPoints(e,B)},getOptions:function(e,t){return t==="move"?e:(0,h.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),rc("star",{options:{size:60,style:{stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,l=n.r,_=(0,b.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),I=this.getSize(e),B=I[0];if(s){var j=Math.cos(.1*Math.PI)*B,et=Math.sin((18+72*0)/180*Math.PI)*B;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:j,y:-et,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var j=Math.cos(.5*Math.PI)*B,et=Math.sin((18+72*1)/180*Math.PI)*B;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:j,y:-et,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var j=Math.cos(.9*Math.PI)*B,et=Math.sin((18+72*2)/180*Math.PI)*B;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:j,y:-et,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var j=Math.cos(1.3*Math.PI)*B,et=Math.sin((18+72*3)/180*Math.PI)*B;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:j,y:-et,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var j=Math.cos(1.7*Math.PI)*B,et=Math.sin((18+72*4)/180*Math.PI)*B;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},_),{x:j,y:-et,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return Gs.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getPath(e),o=(0,b.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,h.mix)({},a,u.attr(),s);f=(0,h.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(rr){return rr.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(rr){return rr.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(rr){return rr.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(rr){return rr.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(rr){return rr.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var l=(0,h.mix)({},f,e.linkPoints),_=l.fill,I=l.stroke,B=l.lineWidth,j=l.size/2;j||(j=l.r);var et=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},ut=et.left,ct=et.right,pt=et.top,St=et.leftBottom,Vt=et.rightBottom,ne=this.getSize(e),re=ne[0],Ce={r:j,fill:_,stroke:I,lineWidth:B},We=Math.cos((18+72*0)/180*Math.PI)*re,Ne=Math.sin((18+72*0)/180*Math.PI)*re;a?!ct&&ct!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,b.__assign)((0,b.__assign)({},Ce),{x:We,y:-Ne})):ct&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},Ce),{x:We,y:-Ne}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),We=Math.cos((18+72*1)/180*Math.PI)*re,Ne=Math.sin((18+72*1)/180*Math.PI)*re,o?!pt&&pt!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,b.__assign)((0,b.__assign)({},Ce),{x:We,y:-Ne})):pt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},Ce),{x:We,y:-Ne}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),We=Math.cos((18+72*2)/180*Math.PI)*re,Ne=Math.sin((18+72*2)/180*Math.PI)*re,n?!ut&&ut!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,b.__assign)((0,b.__assign)({},Ce),{x:We,y:-Ne})):ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},Ce),{x:We,y:-Ne}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),We=Math.cos((18+72*3)/180*Math.PI)*re,Ne=Math.sin((18+72*3)/180*Math.PI)*re,s?!St&&St!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,b.__assign)((0,b.__assign)({},Ce),{x:We,y:-Ne})):St&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},Ce),{x:We,y:-Ne}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),We=Math.cos((18+72*4)/180*Math.PI)*re,Ne=Math.sin((18+72*4)/180*Math.PI)*re,u?!Vt&&Vt!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,b.__assign)((0,b.__assign)({},Ce),{x:We,y:-Ne})):Vt&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,b.__assign)((0,b.__assign)({},Ce),{x:We,y:-Ne}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var l0=Gs.defaultSubjectColors,zd="fan-shape-";rc("donut",{options:{size:Jn.defaultNode.size,style:{x:0,y:0,stroke:Jn.defaultNode.style.stroke,fill:Jn.defaultNode.style.fill,lineWidth:Jn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jn.nodeLabel.style.fill,fontSize:Jn.nodeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jn.defaultNode.linkPoints.size,lineWidth:Jn.defaultNode.linkPoints.lineWidth,fill:Jn.defaultNode.linkPoints.fill,stroke:Jn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.__assign)({},Jn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,h.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,l=o.text;return c&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.__assign)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),Lw(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,b.__assign)({},r)),Pw(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var Lw=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var f=d0(a,s),c=f.configs,l=f.totalValue;if(l){var _=h0(r),I=_.lineWidth,B=_.arcR,j=[B,0],et=0;if(u===1){Cv(t,{arcR:B,arcBegin:j,beginAngle:et,config:c[0],fanIndex:0,lineWidth:I,totalValue:l,drawWhole:!0});return}for(var ut=0;ut<c.length;ut++){var ct=Cv(t,{arcR:B,arcBegin:j,beginAngle:et,config:c[ut],fanIndex:ut,lineWidth:I,totalValue:l});if(ct.shouldEnd)return;j=ct.arcBegin,et=ct.beginAngle}}}},Cv=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,l=c===void 0?!1:c,_=t.updateShape,I=_===void 0?void 0:_,B=o.value/f;if(B<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var j,et,ut;if(l||B>.999)j=[r,1e-4],ut=1;else{var ct=B*Math.PI*2;et=a+ct,j=[r*Math.cos(et),-r*Math.sin(et)],ut=ct>Math.PI?1:0}var pt={path:[["M",n[0],n[1]],["A",r,r,0,ut,0,j[0],j[1]]],stroke:o.color||(I==null?void 0:I.attr("stroke"))||l0[s%l0.length],lineWidth:u};return I?I.attr(pt):e.shapeMap["".concat(zd).concat(s)]=e.addShape("path",{attrs:pt,name:"".concat(zd).concat(s),draggable:!0}),{beginAngle:et,arcBegin:j,shape:e.shapeMap["".concat(zd).concat(s)],shouldEnd:l||B>.999}},Pw=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var f=d0(n,o),c=f.configs,l=f.totalValue;if(l)for(var _=h0(r),I=_.lineWidth,B=_.arcR,j=[B,0],et=0,ut=0;ut<c.length;ut++){var ct="".concat(zd).concat(ut),pt=Cv(u,{arcR:B,arcBegin:j,beginAngle:et,config:c[ut],fanIndex:ut,lineWidth:I,totalValue:l,drawWhole:c.length===1,updateShape:u.shapeMap[ct]});if(pt.shape&&(s[ct]=!0),pt.shouldEnd)break;j=pt.arcBegin,et=pt.beginAngle}}var St=Object.keys(u.shapeMap).filter(function(Vt){return Vt.includes(zd)});St.forEach(function(Vt){s[Vt]||(u.shapeMap[Vt].remove(!0),delete u.shapeMap[Vt])})},d0=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},h0=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},bh=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},Nw=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},SM=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Tv=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},v0=function(e){return Tv(e)},MM=function(e,t){return[e,{x:e.x,y:t.y},t]},Eh=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},Rw=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},Av=function(e,t,r){var n=Rw(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},p0=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},Iv=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},wh=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},kw=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},Bw=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},Fw=function(e,t){return kw(e,t.x).concat(Bw(e,t.y))},Gd=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},zw=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},g0=function(e,t,r,n,a){return Gd(e,t)+Gd(e,r)+zw(e,[t,r,n,a])},Gw=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},_M=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},Sh=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,l=n.x-t.x,_=n.y-t.y,I=a*u-o*s,B=f*_-c*l,j=a*c-o*f,et=s*_-u*l;return I*B<=0&&j*et<=0},Ov=function(e,t,r){if(r.width||r.height){var n=Iv(r),a=n[0],o=n[1],s=n[2],u=n[3];return Sh(e,t,a,o)||Sh(e,t,a,u)||Sh(e,t,o,s)||Sh(e,t,s,u)}return!1},Uw=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Ov(o,t,r)||Ov(o,t,n))return;a.push(o)}}),Tv(a)},Ww=function(e,t,r,n,a,o,s){var u,f=[],c=(u={},u[t.id]=t,u),l={},_={},I={};_[t.id]=0,I[t.id]=g0(t,r,t);var B=new x0;B.add({id:t.id,value:I[t.id]});var j={};e.forEach(function(Vt){j[Vt.id]=Vt});for(var et;Object.keys(c).length;){var ut=B.minId(!1);if(ut)et=c[ut];else break;if(et===r){var ct=[];return Gw(ct,j,l,r.id),ct}delete c[et.id],B.remove(et.id),f.push(et);var pt=Uw(e,et,n,a),St=function(ne){ne.forEach(function(re){if(f.indexOf(re)===-1){var Ce=re.id;c[Ce]||(c[Ce]=re);var We=I[et.id]+Gd(et,re);if(_[Ce]&&We>=_[Ce]){B.add({id:Ce,value:I[Ce]});return}l[Ce]=et.id,_[Ce]=We,I[Ce]=_[Ce]+g0(re,r,t,o,s),B.add({id:Ce,value:I[Ce]})}})};St(pt)}return[t,r]},Yw=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},Xw=function(e,t,r,n){var a=Gd(e,t),o=Gd(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},m0=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(Yw(a,s,u)){var f=Xw(a,s,u,t),c=f[0],l=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},y0=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=bh(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,l=f.y;o={x:c,y:l,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=bh(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=bh(t);else if(n.getType()==="combo"){var _=n.getKeyShape().getBBox();if(_){var I=n.getModel(),B=I.x,j=I.y;s={x:B,y:j,width:_.width,height:_.height,minX:_.minX+B,maxX:_.maxX+B,minY:_.minY+j,maxY:_.maxY+j},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=bh(t)}else s=n&&n.getBBox();var et=Eh(o,a),ut=Eh(s,a),ct=Av(et,e,t),pt=Av(ut,t,e),St=Nw([ct,pt]),Vt=p0(et,St),ne=p0(ut,St),re=[];re=re.concat(Iv(Vt)).concat(Iv(ne));var Ce={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[St,Vt,ne].forEach(function(Ne){re=re.concat(Fw(Ne,Ce).filter(function(rr){return wh(rr,et)&&wh(rr,ut)}))}),[{x:ct.x,y:pt.y},{x:pt.x,y:ct.y}].forEach(function(Ne){wh(Ne,et)&&wh(Ne,ut)&&re.push(Ne)}),re.unshift(ct),re.push(pt),re=Tv(re);var We=Ww(re,ct,pt,o,s,e,t);return We.unshift(e),We.push(t),v0(We)},jw=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},x0=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),Vw=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Hw=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Zw=function(e,t){return[e,t]},Kw=function(e,t,r,n,a){return v0(y0(e,t,r,n,a.offset))},$w={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Vw,fallbackRoute:Kw},CM={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:Hw,fallbackRoute:Zw},sc=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},qw=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=Eh(a.getBBox(),r),s=sc(o.minX,t);s<=sc(o.maxX,t);s+=1)for(var u=sc(o.minY,t);u<=sc(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Dv=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},b0=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},E0=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},w0=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,l=Eh(f,u);for(var _ in l)l[_]=sc(l[_],a.gridSize);if(c){for(var I=0,B=s;I<B.length;I++)for(var j=B[I],et=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],_=0;_<4;_++){var ut=et[_],ct=Gs.getLineIntersect(e,{x:e.x+j.stepX*l.width,y:e.y+j.stepY*l.height},ut[0],ut[1]);ct&&!Ov(e,ct,f)&&(ct.id="".concat(ct.x,"|||").concat(ct.y),o.push(ct))}return o}var pt=Av(l,e,n);return pt.id="".concat(pt.x,"|||").concat(pt.y),[pt]},Lv=function(e,t,r,n){var a=Dv(e,t),o=r[e.id];if(!o){var s=Dv(n,e);return b0(s,a)}var u=Dv({x:o.x,y:o.y},e);return b0(u,a)},Qw=function(e,t,r,n,a,o,s){var u=[n],f=n,c=e.id,l=e.x,_=e.y,I={x:l,y:_,id:c};Lv(I,o,t,r)&&(f={x:o.x===n.x?n.x:I.x*s,y:o.y===n.y?n.y:I.y*s},u.unshift(f));for(var B=t[c];B&&B.id!==c;){var j={x:l,y:_,id:c},et={x:B.x,y:B.y,id:B.id},ut=Lv(et,j,t,r);ut&&(f={x:et.x===j.x?f.x:et.x*s,y:et.y===j.y?f.y:et.y*s},u.unshift(f)),c=et.id,l=et.x,_=et.y,B=t[c]}return u[0].x=l===r.x?a.x:f.x,u[0].y=_===r.y?a.y:f.y,u.unshift(a),u},Jw=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,h.deepMix)($w,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=qw(o.obstacles.concat([r,n]),u,o.offset),c={x:sc(e.x,u),y:sc(e.y,u)},l={x:sc(t.x,u),y:sc(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(l.x,"|||").concat(l.y);var _=w0(c,e,r,l,o),I=w0(l,t,n,c,o);_.forEach(function(on){delete f[on.id]}),I.forEach(function(on){delete f[on.id]});for(var B={},j={},et={},ut={},ct={},pt=new x0,St=0;St<_.length;St++){var Vt=_[St];B[Vt.id]=Vt,ut[Vt.id]=0,ct[Vt.id]=E0(Vt,I,o.distFunc),pt.add({id:Vt.id,value:ct[Vt.id]})}var ne=o.maximumLoops,re,Ce,We,Ne,rr,wr,dn=1/0,Gn={};for(I.forEach(function(on){Gn["".concat(on.x,"|||").concat(on.y)]=!0}),Object.keys(B).forEach(function(on){var Tn=B[on].id;ct[Tn]<=dn&&(dn=ct[Tn],re=B[Tn])});Object.keys(B).length>0&&ne>0;){var In=pt.minId((ne+1)%30===0);if(In)re=B[In];else break;if(Gn["".concat(re.x,"|||").concat(re.y)])return Qw(re,et,c,t,e,l,u);delete B[re.id],pt.remove(re.id),j[re.id]=!0;for(var St=0;St<o.directions.length;St++){Ce=o.directions[St];var an="".concat(Math.round(re.x)+Ce.stepX,"|||").concat(Math.round(re.y)+Ce.stepY);if(We={x:re.x+Ce.stepX,y:re.y+Ce.stepY,id:an},!j[an]&&(wr=Lv(re,We,et,c),!(wr>o.maxAllowedDirectionChange)&&!f[an])){B[an]||(B[an]=We);var ta=s[wr];Ne=o.distFunc(re,We)+(isNaN(ta)?u:ta),rr=ut[re.id]+Ne;var $n=ut[an];$n&&rr>=$n||(et[an]=re,ut[an]=rr,ct[an]=rr+E0(We,I,o.distFunc),pt.add({id:an,value:ct[an]}))}}ne-=1}return o.fallbackRoute(e,t,r,n,o)};Ep("polyline",{options:{color:Jn.defaultEdge.color,size:Jn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Jn.defaultEdge.style.stroke,lineAppendWidth:Jn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Jn.edgeLabel.style.fill,fontSize:Jn.edgeLabel.style.fontSize,fontFamily:Jn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,b.__assign)({},Jn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,h.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,l=n.radius,_=this.options.routeCfg,I=(0,h.mix)({},_,e.routeCfg);I.offset=n.offset;var B=this.getPath(u,f,c,l,I,!s);((0,h.isArray)(B)&&B.length<=1||(0,h.isString)(B)&&B.indexOf("L")===-1)&&(B="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(B="M0 0, L0 0");var j=(0,h.mix)({},Jn.defaultEdge.style,n,{lineWidth:e.size,path:B});return j},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(St){return St.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var l=a.attr(),_=(0,h.mix)({},n,l,e.style),I=e.sourceNode,B=e.targetNode,j=_.radius,et=this.options.routeCfg,ut=(0,h.mix)({},et,e.routeCfg);ut.offset=_.offset;var ct=this.getPath(c,I,B,j,ut,!f);((0,h.isArray)(ct)&&ct.length<=1||(0,h.isString)(ct)&&ct.indexOf("L")===-1)&&(ct="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(ct="M0 0, L0 0"),l.endArrow&&_.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&_.startArrow===!1&&(e.style.startArrow={path:""});var pt=(0,h.mix)(n,a.attr(),{lineWidth:o,path:ct},e.style);a&&a.attr(pt)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,f=a.simple;if(!s||e.length>2||o===!1){if(n)return m0(e,n);var c=[];return(0,h.each)(e,function(B,j){j===0?c.push(["M",B.x,B.y]):c.push(["L",B.x,B.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var l=f?y0(e[e.length-1],e[0],r,t,s):Jw(e[0],e[e.length-1],t,r,a);if(!l||!l.length)return"M0 0, L0 0";if(n){var _=m0(l,n);return _}l=jw(l);var I=Gs.pointsToPolygon(l);return I}},"single-edge");var S0=ac.cloneEvent,M0=ac.isNaN,_0=Math.abs,tS=10,eS=["shift","ctrl","alt","control"],rS={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(M0(r)||M0(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c=s*c,l=u*l),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+l&&f.minY+o>u+l||f.maxY+l>=0&&f.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(pt){pt.set("ori-visibility",pt.get("ori-visibility")||pt.get("visible")),pt.hide()})}for(var f=n.getNodes(),c=0,l=f.length;c<l;c++)for(var _=f[c].getContainer(),I=_.get("children"),B=0,j=I;B<j.length;B++){var et=j[B],ut=et.get("isKeyShape");ut||(et.set("ori-visibility",et.get("ori-visibility")||et.get("visible")),et.hide())}}if(typeof window!="undefined"){var ct=this;this.handleDOMContextMenu=function(pt){return ct.onMouseUp(pt)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=S0(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(_0(this.origin.x-e.clientX)+_0(this.origin.y-e.clientY)<tS)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(re){return re.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,l=f.length;c<l;c++){var _=f[c].get("group").get("children");_&&_.forEach(function(re){var Ce=re.get("ori-visibility");re.set("ori-visibility",void 0),Ce&&re.show()})}if(a>u)for(var I=n.getNodes(),B=0,j=I.length;B<j;B++)for(var et=I[B].getContainer(),ut=et.get("children"),ct=0,pt=ut;ct<pt.length;ct++){var St=pt[ct],Vt=St.get("isKeyShape");if(!Vt){var ne=St.get("ori-visibility");St.set("ori-visibility",void 0),ne&&St.show()}}}if(!this.dragging){this.origin=null;return}e=S0(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(eS.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,h.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,h.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},nS={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,b.__assign)((0,b.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,b.__assign)((0,b.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),l=f.filter(function(I){var B=I.get("id");return c===B});if(l.length===0?this.targets.push(n):f.length>1?f.forEach(function(I){var B=I.hasLocked();B||t.targets.push(I)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var _=[];this.targets.forEach(function(I){var B=I.getModel(),j=B.x,et=B.y,ut=B.id;_.push({x:j,y:et,id:ut})}),this.set("beforeDragNodes",_)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(I){var B=I.getEdges();B.forEach(function(j){j.isVisible()&&(t.hidenEdge[j.getID()]=!0,j.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,h.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,h.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(f){var c=f.get("model"),l=f.get("id");r[l]||(r[l]={x:c.x||0,y:c.y||0});var _=a.x-n.x+r[l].x,I=a.y-n.y+r[l].y,B={x:_,y:I};o?t.updateItem(f,B,!1):f.updatePosition(B)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var _=e.x-this.origin.x+this.originPoint.minX,I=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:_,y:I})}else{var r=t.get("group"),n=(0,h.deepMix)({},Tl.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,b.__assign)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,l=f.minY,_=f.maxX,I=f.maxY;c<r&&(r=c),l<a&&(a=l),_>n&&(n=_),I>o&&(o=I)}var B=Math.floor(r),j=Math.floor(a),et=Math.ceil(n)-Math.floor(r),ut=Math.ceil(o)-Math.floor(a);return{x:B,y:j,width:et,height:ut,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},aS={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,h.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){for(var n=e.activeState,a=e.inactiveState,o=r.getNodes(),s=r.getCombos(),u=r.getEdges(),f=r.get("vedges"),c=o.length,l=s.length,_=u.length,I=f.length,B=e.inactiveItems||{},j=e.activeItems||{},et=0;et<c;et++){var ut=o[et],ct=ut.getID(),pt=ut.hasState("selected");e.resetSelected&&pt&&r.setItemState(ut,"selected",!1),j[ct]&&(r.setItemState(ut,n,!1),delete j[ct]),a&&!B[ct]&&(r.setItemState(ut,a,!0),B[ct]=ut)}for(var et=0;et<l;et++){var St=s[et],Vt=St.getID(),pt=St.hasState("selected");e.resetSelected&&pt&&r.setItemState(St,"selected",!1),j[Vt]&&(r.setItemState(St,n,!1),delete j[Vt]),a&&!B[Vt]&&(r.setItemState(St,a,!0),B[Vt]=St)}for(var et=0;et<_;et++){var ne=u[et],re=ne.getID();j[re]&&(r.setItemState(ne,n,!1),delete j[re]),a&&!B[re]&&(r.setItemState(ne,a,!0),B[re]=ne)}for(var et=0;et<I;et++){var Ce=f[et],We=Ce.getID();j[We]&&(r.setItemState(Ce,n,!1),delete j[We]),a&&!B[We]&&(r.setItemState(Ce,a,!0),B[We]=Ce)}if(t&&!t.destroyed){a&&(r.setItemState(t,a,!1),delete B[t.getID()]),j[t.getID()]||(r.setItemState(t,n,!0),j[t.getID()]=t);for(var Ne=t.getEdges(),rr=Ne.length,et=0;et<rr;et++){var ne=Ne[et],re=ne.getID(),wr=void 0;ne.getSource()===t?wr=ne.getTarget():wr=ne.getSource();var dn=wr.getID();a&&B[dn]&&(r.setItemState(wr,a,!1),delete B[dn]),j[dn]||(r.setItemState(wr,n,!0),j[dn]=wr),B[re]&&(r.setItemState(ne,a,!1),delete B[re]),j[re]||(r.setItemState(ne,n,!0),j[re]=ne),ne.toFront()}}e.activeItems=j,e.inactiveItems=B,r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,h.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Mh=Math.min,C0=Math.max,T0=Math.abs,A0="shift",iS=["drag","shift","ctrl","alt","control"],oS={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:A0,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return iS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=A0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),l=Mh(f.x,c.x),_=C0(f.x,c.x),I=Mh(f.y,c.y),B=C0(f.y,c.y),j=[],et=[];n.getNodes().forEach(function(pt){if(pt.isVisible()&&s(pt,l,_,I,B)&&o(pt,"select",t)){j.push(pt);var St=pt.getModel();et.push(St.id),n.setItemState(pt,u,!0)}});var ut=[];this.includeEdges&&j.forEach(function(pt){var St=pt.getOutEdges();St.forEach(function(Vt){if(Vt.isVisible()){var ne=Vt.getModel(),re=ne.source,Ce=ne.target;et.includes(re)&&et.includes(Ce)&&o(Vt,"select",t)&&(ut.push(Vt),n.setItemState(Vt,t.selectedState,!0))}})});var ct=[];this.includeCombos&&n.getCombos().forEach(function(pt){if(pt.isVisible()&&s(pt,l,_,I,B)&&o(pt,"select",t)){ct.push(pt);var St=pt.getModel();et.push(St.id),n.setItemState(pt,u,!0)}}),this.selectedEdges=ut,this.selectedNodes=j,this.selectedCombos=ct,this.onSelect&&this.onSelect(j,ut,ct),n.emit("nodeselectchange",{selectedItems:{nodes:j,edges:ut,combos:ct},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:T0(e.canvasX-t.x),height:T0(e.canvasY-t.y),x:Mh(e.canvasX,t.x),y:Mh(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},I0="shift",sS=["shift","ctrl","alt","control"],uS={getDefaultCfg:function(){return{multiple:!0,trigger:I0,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return sS.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=I0,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,h.each)(c,function(j){j!==r&&a.setItemState(j,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var _=a.findAllByState("node",t.selectedState),I=a.findAllByState("edge",t.selectedState),B=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:_,edges:I,combos:B},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var _=a.findAllByState("node",t.selectedState),I=a.findAllByState("edge",t.selectedState),B=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:_,edges:I,combos:B},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var _=a.findAllByState("node",t.selectedState),I=a.findAllByState("edge",t.selectedState),B=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:_,edges:I,combos:B},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,h.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,h.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,h.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},fS=zt,_h=.05,cS={getDefaultCfg:function(){return this.isFireFox=ug()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(j,et){return Math.hypot(et.x-j.x,et.y-j.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),l=this.get("animateCfg"),_=this.graph.get("canvas"),I=_.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:I.x,y:I.y},c,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,l=f;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-_h*u:c=1/(1-_h*u):e.wheelDelta<0?c=1-_h*u:c=1/(1-_h*u),l=f*c;var _=this.get("minZoom")||n.get("minZoom"),I=this.get("maxZoom")||n.get("maxZoom");l>I?l=I:l<_&&(l=_);var B=this.get("enableOptimize");if(B){var j=this.get("optimizeZoom"),et=this.get("optimized"),ut=n.getNodes(),ct=n.getEdges(),pt=ut.length,St=ct.length;if(!et){for(var Vt=0;Vt<pt;Vt++){var ne=ut[Vt];if(!ne.destroyed)for(var re=ne.get("group").get("children"),Ce=re.length,We=0;We<Ce;We++){var Ne=re[We];!Ne.destoryed&&!Ne.get("isKeyShape")&&(Ne.set("ori-visibility",Ne.get("ori-visibility")||Ne.get("visible")),Ne.hide())}}for(var rr=0;rr<St;rr++)for(var wr=ct[rr],re=wr.get("group").get("children"),Ce=re.length,We=0;We<Ce;We++){var Ne=re[We];Ne.set("ori-visibility",Ne.get("ori-visibility")||Ne.get("visible")),Ne.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var dn=setTimeout(function(){var yi=n.getZoom(),Zi=t.get("optimized");if(Zi){t.set("optimized",!1);for(var pi=0;pi<pt;pi++){var Ki=ut[pi],_o=Ki.get("group").get("children"),Ia=_o.length;if(yi<j){var Si=Ki.getKeyShape(),Ti=Si.get("ori-visibility");Si.set("ori-visibility",void 0),Ti&&Si.show()}else for(var Co=0;Co<Ia;Co++){var Ii=_o[Co],Ti=Ii.get("ori-visibility");Ii.set("ori-visibility",void 0),!Ii.get("visible")&&Ti&&Ti&&Ii.show()}}for(var zi=0;zi<St;zi++){var Qo=ct[zi],_o=Qo.get("group").get("children"),Ia=_o.length;if(yi<j){var Si=Qo.getKeyShape(),Ti=Si.get("ori-visibility");Si.set("ori-visibility",void 0),Ti&&Si.show()}else for(var Co=0;Co<Ia;Co++){var Ii=_o[Co];if(!Ii.get("visible")){var Ti=Ii.get("ori-visibility");Ii.set("ori-visibility",void 0),Ti&&Ii.show()}}}}},100);this.set("timeout",dn)}if(f<=1){var Gn=void 0,In=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Gn=n.findAllByState("node",a.fixState),In=n.findAllByState("edge",a.fixState);for(var an=f/l,ta=Gn.length,$n=0;$n<ta;$n++){var ne=Gn[$n],on=ne.getContainer(),Tn=ne.getModel(),Un=ne.getOriginStyle(),Wn=ne.getStateStyle(a.fixState),ia=ne.get("shapeFactory").getShape(Tn.type).getStateStyle(a.fixState,ne)[a.fixState];if(a.fixAll){if(l<=1){var da=(0,h.clone)(on.getMatrix());da||(da=[1,0,0,0,1,0,0,0,1]);var Wa=ne.getModel(),ai=Wa.x,Ji=Wa.y;da=fS(da,[["t",-ai,-Ji],["s",an,an],["t",ai,Ji]]),on.setMatrix(da)}}else for(var re=on.get("children"),Ce=re.length,We=0;We<Ce;We++){var Ne=re[We],Di=void 0,to=void 0;if(a.fixLabel){var uo=Ne.get("type");if(uo==="text"){Di=Ne.attr("fontSize")||12;var Yo=Wn[Ne.get("name")],Lo=ia[Ne.get("name")],Hu=Yo?Yo.fontSize:12,ws=Lo?Lo.fontSize:12,Zu=Hu||ws||12;if(l<=1&&Ne.attr("fontSize",Zu/l),to)break}}if(a.fixLineWidth&&Ne.get("isKeyShape")){to=Ne.attr("lineWidth")||0;var Ss=Wn.lineWidth||ia.lineWidth||Un.lineWidth||0;if(l<=1&&Ne.attr("lineWidth",Ss/l),Di)break}}}for(var Ms=In.length,Mu=0;Mu<Ms;Mu++)for(var wr=In[Mu],on=wr.getContainer(),re=on.get("children"),Tn=wr.getModel(),Wn=wr.getStateStyle(a.fixState),ia=wr.get("shapeFactory").getShape(Tn.type).getStateStyle(a.fixState,wr)[a.fixState],Ce=re.length,We=0;We<Ce;We++){var Ne=re[We],Di=void 0,to=void 0;if(a.fixLabel||a.fixAll){var uo=Ne.get("type");if(uo==="text"){Di=Ne.attr("fontSize")||12;var Yo=Wn[Ne.get("name")],Lo=ia[Ne.get("name")],Hu=Yo?Yo.fontSize:12,ws=Lo?Lo.fontSize:12,Zu=Hu||ws||12;if(l<=1&&Ne.attr("fontSize",Zu/l),to)break}}if((a.fixLineWidth||a.fixAll)&&Ne.get("isKeyShape")){to=Ne.attr("lineWidth")||0;var Ss=Wn.lineWidth||ia.lineWidth||1;if(l<=1&&Ne.attr("lineWidth",Ss/l),Di)break}}}}var Us=this.get("animate"),iu=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},Us,iu),n.emit("wheelzoom",e)}}},O0={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,mi(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){mi(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){mi(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,l=f.y,_=o.getBoundingClientRect();c>n/2?c-=_.width:c+=this.offset,l>a/2?l-=_.height:l+=this.offset;var I="".concat(c,"px"),B="".concat(l,"px");mi(this.container,{left:I,top:B,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=Zo('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),mi(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},lS=(0,b.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},O0),dS=(0,b.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},O0),D0="click",hS=["click","dblclick"],vS={getDefaultCfg:function(){return{trigger:D0,onChange:function(){}}},getEvents:function(){var e,t;return hS.includes(this.trigger)?t=this.trigger:(t=D0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},pS=ac.calculationItemsBBox,gS=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,h.each)(r,function(n){i(n,t)})}},mS={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),l=c.x,_=c.y,I=c.id;u.push({x:l,y:_,id:I})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var l=r.findById(c.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],gS(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,l=o.filter(function(_){var I=_.getModel();return a.parentId,I.id!==a.id&&!t.currentItemChildCombos.includes(I.id)});l.map(function(_){var I=_.getBBox(),B=I.centerX,j=I.centerY,et=I.width,ut=u-B,ct=f-j,pt=2*Math.sqrt(ut*ut+ct*ct);c+et-pt>.8*c?r.setItemState(_,t.activeState,!0):r.setItemState(_,t.activeState,!1)})}(0,h.each)(this.targets,function(_){t.updateCombo(_,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,h.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,l=f.y,_=f.id;s.after.combos.push({x:c,y:l,id:_}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,h.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,h.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var _=e.x-this.origin.x+this.originPoint.minX,I=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:_,y:I})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=pS(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var l=(0,b.__assign)((0,b.__assign)({},Tl.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,b.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},L0="dblclick",yS=["click","dblclick"],xS={getDefaultCfg:function(){return{trigger:L0,relayout:!0}},getEvents:function(){var e,t;return yS.includes(this.trigger)?t=this.trigger:(t=L0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},bS=ac.isPolygonsIntersect,ES=ac.pathToPoints,P0="shift",wS=["drag","shift","ctrl","alt","control"],SS=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=ES(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return bS(t,r)},MS={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:P0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return wS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=P0,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&SS(c,a)&&n(c,"select",e)){s.push(c);var l=c.getModel();u.push(l.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var l=c.getOutEdges();l.forEach(function(_){if(_.isVisible()){var I=_.getModel(),B=I.source,j=I.target;u.includes(B)&&u.includes(j)&&n(_,"select",e)&&(f.push(_),r.setItemState(_,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,b.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},N0="click",_S=["click","drag"],R0=void 0,CS=["shift","ctrl","control","alt","meta",void 0],TS={getDefaultCfg:function(){return{trigger:N0,key:R0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;_S.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=N0,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&CS.indexOf(e.key.toLowerCase())===-1&&(e.trigger=R0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,h.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,b.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,b.__assign)((0,b.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,h.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,b.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},k0="ctrl",AS=["shift","ctrl","alt","control"],IS="1",OS={getDefaultCfg:function(){return{trigger:k0,combinedKey:IS,functionName:"fitView",functionParams:[]}},getEvents:function(){return AS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=k0,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},DS=["shift","ctrl","alt","control","meta"],LS={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||DS.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(Tn){return e["".concat(Tn,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var l=this.graph.get("width"),_=this.graph.get("height"),I=this.graph.get("canvas").getCanvasBBox(),B=this.scalableRange,j=this.scalableRange;B<1&&B>-1&&(B=l*B,j=_*j);var et=I.minX,ut=I.maxX,ct=I.minY,pt=I.maxY;f>0?ut<-B?f=0:ut-f<-B&&(f=ut+B):f<0&&(et>l+B?f=0:et-f>l+B&&(f=et-(l+B))),c>0?pt<-j?c=0:pt-c<-j&&(c=pt+j):c<0&&(ct>_+j?c=0:ct-c>_+j&&(c=ct-(_+j))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var St=this.get("enableOptimize");if(St){var Vt=this.get("optimizeZoom"),ne=this.get("optimized"),re=r.getNodes(),Ce=r.getEdges(),We=re.length,Ne=Ce.length;if(!ne){for(var rr=0;rr<We;rr++){var wr=re[rr];if(!wr.destroyed)for(var dn=wr.get("group").get("children"),Gn=dn.length,In=0;In<Gn;In++){var an=dn[In];!an.destoryed&&!an.get("isKeyShape")&&(an.set("ori-visibility",an.get("ori-visibility")||an.get("visible")),an.hide())}}for(var ta=0;ta<Ne;ta++)for(var $n=Ce[ta],dn=$n.get("group").get("children"),Gn=dn.length,In=0;In<Gn;In++){var an=dn[In];an.set("ori-visibility",an.get("ori-visibility")||an.get("visible")),an.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var on=setTimeout(function(){var Tn=r.getZoom(),Un=t.get("optimized");if(Un){t.set("optimized",!1);for(var Wn=0;Wn<We;Wn++){var ia=re[Wn],da=ia.get("group").get("children"),Wa=da.length;if(Tn<Vt){var ai=ia.getKeyShape(),Ji=ai.get("ori-visibility");Ji&&ai.show()}else for(var Di=0;Di<Wa;Di++){var to=da[Di],Ji=to.get("ori-visibility");!to.get("visible")&&Ji&&Ji&&to.show()}}for(var uo=0;uo<Ne;uo++){var Yo=Ce[uo],da=Yo.get("group").get("children"),Wa=da.length;if(Tn<Vt){var ai=Yo.getKeyShape(),Ji=ai.get("ori-visibility");Ji&&ai.show()}else for(var Di=0;Di<Wa;Di++){var to=da[Di];if(!to.get("visible")){var Ji=to.get("ori-visibility");Ji&&to.show()}}}}},100);this.set("timeout",on)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,h.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,h.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},PS={"drag-canvas":rS,"zoom-canvas":cS,"drag-node":nS,"activate-relations":aS,"brush-select":oS,"click-select":uS,"lasso-select":MS,tooltip:lS,"edge-tooltip":dS,"collapse-expand":vS,"drag-combo":mS,"collapse-expand-combo":xS,"create-edge":TS,"shortcuts-call":OS,"scroll-canvas":LS};(0,h.each)(PS,function(i,e){wp(e,i)});var NS=(0,b.__assign)((0,b.__assign)({},x),Qm),TM=Es.Grid,AM=Es.Minimap,IM=Es.Bundling,OM=Es.Menu,RS=Es.Fisheye,DM=Es.ToolBar,LM=Es.Tooltip,kS=Es.TimeBar,BS=Es.ImageMinimap,FS=Es.EdgeFilterLens,zS=Es.SnapLine,PM=Es.Legend,GS=Es.Annotation,B0={version:Tl.version,Graph:pg,TreeGraph:Nx,Util:ac,Layout:Ci.Layouts,TreeLayout:px,registerLayout:gx,Global:Tl,registerBehavior:wp,registerCombo:qm,registerEdge:Ep,registerNode:rc,Minimap:Es.Minimap,Grid:Es.Grid,Bundling:Es.Bundling,Menu:Es.Menu,ToolBar:Es.ToolBar,Tooltip:Es.Tooltip,Legend:Es.Legend,TimeBar:kS,SnapLine:zS,Fisheye:RS,ImageMinimap:BS,EdgeFilterLens:FS,Annotation:GS,Algorithm:NS,Arrow:gp,Marker:mp,Shape:Uc};B0.version="4.8.20";var US=B0,NM="4.8.20"},199905:function(He,z,C){"use strict";C.r(z),C.d(z,{Graph:function(){return H},GraphWithEvent:function(){return Rt},algorithm:function(){return x},comparision:function(){return w},essence:function(){return k},generate:function(){return T}});var x={};C.r(x),C.d(x,{components:function(){return se},dfs:function(){return oe},dijkstra:function(){return Le},dijkstraAll:function(){return qe},findCycles:function(){return yn},floydWarshall:function(){return Bt},isAcyclic:function(){return ir},postorder:function(){return Qt},preorder:function(){return we},prim:function(){return Xt},tarjan:function(){return ur},topsort:function(){return _n}});var k={};C.r(k),C.d(k,{hasSelfLoop:function(){return xr},isGraph:function(){return zr},isNullGraph:function(){return tr},isSimpleGraph:function(){return gn}});var w={};C.r(w),C.d(w,{containAllSameEdges:function(){return mt},containAllSameNodes:function(){return X},containSameEdges:function(){return at},containSameNodes:function(){return $},getSameEdges:function(){return M},getSameNodes:function(){return R},isGraphComplement:function(){return Ur},isGraphContainsAnother:function(){return Pt},isGraphOptionSame:function(){return A},isGraphSame:function(){return Lt}});var T={};C.r(T),C.d(T,{getGraphComplement:function(){return Nr}});var L;(function(fe){fe.DEFAULT_EDGE_NAME="\0",fe.GRAPH_NODE="\0",fe.EDGE_KEY_DELIM=""})(L||(L={}));function P(fe,Wt){var ge=fe.get(Wt)||0;fe.set(Wt,ge+1)}function p(fe,Wt){var ge=fe.get(Wt);ge!==void 0&&(ge=ge-1,ge>0?fe.set(Wt,ge):fe.delete(Wt))}function m(fe,Wt,ge,Ae){var Se=String(Wt),Be=String(ge);if(!fe&&Se>Be){var vr=Se;Se=Be,Be=vr}return Se+L.EDGE_KEY_DELIM+Be+L.EDGE_KEY_DELIM+(Ae===void 0?L.DEFAULT_EDGE_NAME:Ae)}function S(fe,Wt,ge,Ae){var Se=String(Wt),Be=String(ge),vr={v:Wt,w:ge};if(!fe&&Se>Be){var Mr=vr.v;vr.v=vr.w,vr.w=Mr}return Ae!==void 0&&(vr.name=Ae),vr}function y(fe,Wt){return m(fe,Wt.v,Wt.w,Wt.name)}function g(fe){return typeof fe=="function"}var O=function(Wt){return Wt.nodes().map(function(ge){var Ae=Wt.node(ge),Se=Wt.parent(ge),Be={id:ge,value:Ae,parent:Se};return Be.value===void 0&&delete Be.value,Be.parent===void 0&&delete Be.parent,Be})},E=function(Wt){return Wt.edges().map(function(ge){var Ae=Wt.edge(ge),Se={v:ge.v,w:ge.w,value:Ae,name:ge.name};return Se.name===void 0&&delete Se.name,Se.value===void 0&&delete Se.value,Se})},D=function(Wt){var ge={options:{directed:Wt.isDirected(),multigraph:Wt.isMultigraph(),compound:Wt.isCompound()},nodes:O(Wt),edges:E(Wt),value:Wt.graph()};return ge.value===void 0&&delete ge.value,ge},F=function(Wt){var ge=new H(Wt.options);return Wt.value!==void 0&&ge.setGraph(Wt.value),Wt.nodes.forEach(function(Ae){ge.setNode(Ae.id,Ae.value),Ae.parent&&ge.setParent(Ae.id,Ae.parent)}),Wt.edges.forEach(function(Ae){ge.setEdge(Ae.v,Ae.w,Ae.value,Ae.name)}),ge};function W(fe,Wt){var ge=Object.keys(fe);if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(fe);Wt&&(Ae=Ae.filter(function(Se){return Object.getOwnPropertyDescriptor(fe,Se).enumerable})),ge.push.apply(ge,Ae)}return ge}function b(fe){for(var Wt=1;Wt<arguments.length;Wt++){var ge=arguments[Wt]!=null?arguments[Wt]:{};Wt%2?W(Object(ge),!0).forEach(function(Ae){h(fe,Ae,ge[Ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(fe,Object.getOwnPropertyDescriptors(ge)):W(Object(ge)).forEach(function(Ae){Object.defineProperty(fe,Ae,Object.getOwnPropertyDescriptor(ge,Ae))})}return fe}function h(fe,Wt,ge){return Wt in fe?Object.defineProperty(fe,Wt,{value:ge,enumerable:!0,configurable:!0,writable:!0}):fe[Wt]=ge,fe}function K(fe,Wt){if(!(fe instanceof Wt))throw new TypeError("Cannot call a class as a function")}function U(fe,Wt){for(var ge=0;ge<Wt.length;ge++){var Ae=Wt[ge];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(fe,Ae.key,Ae)}}function Y(fe,Wt,ge){return Wt&&U(fe.prototype,Wt),ge&&U(fe,ge),Object.defineProperty(fe,"prototype",{writable:!1}),fe}var Z={compound:!1,multigraph:!1,directed:!0},H=function(){function fe(){var Wt=this,ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K(this,fe),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=L.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Wt.directed},this.isMultigraph=function(){return Wt.multigraph},this.isCompound=function(){return Wt.compound},this.setGraph=function(Se){return Wt.label=Se,Wt},this.graph=function(){return Wt.label},this.setDefaultNodeLabel=function(Se){return g(Se)?Wt.defaultNodeLabelFn=Se:Wt.defaultNodeLabelFn=function(){return Se},Wt},this.nodeCount=function(){return Wt.nodeCountNum},this.node=function(Se){return Wt.nodesLabelMap.get(Se)},this.nodes=function(){return Array.from(Wt.nodesLabelMap.keys())},this.sources=function(){return Wt.nodes().filter(function(Se){var Be;return!(!((Be=Wt.inEdgesMap.get(Se))===null||Be===void 0)&&Be.size)})},this.sinks=function(){return Wt.nodes().filter(function(Se){var Be;return!(!((Be=Wt.outEdgesMap.get(Se))===null||Be===void 0)&&Be.size)})},this.setNodes=function(Se,Be){return Se.map(function(vr){return Wt.setNode(vr,Be)}),Wt},this.hasNode=function(Se){return Wt.nodesLabelMap.has(Se)},this.checkCompound=function(){if(!Wt.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(Se){if(Wt.isCompound()){var Be,vr=(Be=Wt.parentMap)===null||Be===void 0?void 0:Be.get(Se);if(vr!==Wt.GRAPH_NODE)return vr}},this.removeFromParentsChildList=function(Se){var Be=Wt.parentMap.get(Se);Wt.childrenMap.get(Be).delete(Se)},this.setParent=function(Se,Be){var vr,Mr;Wt.checkCompound();for(var fn=Be===void 0?Wt.GRAPH_NODE:Be,Xn=Wt.parent(fn);Xn;){if(Se===Xn)throw new Error("Setting "+Be+" as parent of "+Se+" would create a cycle");Xn=Wt.parent(Xn)}Be&&Wt.setNode(Be),Wt.setNode(Se),Wt.removeFromParentsChildList(Se),(vr=Wt.parentMap)===null||vr===void 0||vr.set(Se,fn);var Mn=Wt.childrenMap.get(fn);return Mn.set(Se,!0),(Mr=Wt.childrenMap)===null||Mr===void 0||Mr.set(fn,Mn),Wt},this.children=function(Se){var Be=Se===void 0?Wt.GRAPH_NODE:Se;if(Wt.isCompound()){var vr,Mr=(vr=Wt.childrenMap)===null||vr===void 0?void 0:vr.get(Be);return Mr?Array.from(Mr.keys()):void 0}if(Be===Wt.GRAPH_NODE)return Wt.nodes();if(Se&&Wt.hasNode(Se))return[]},this.predecessors=function(Se){var Be=Wt.predecessorsMap.get(Se);return Be?Array.from(Be.keys()):void 0},this.successors=function(Se){var Be=Wt.successorsMap.get(Se);return Be?Array.from(Be.keys()):void 0},this.neighbors=function(Se){var Be;if(Wt.hasNode(Se))return Array.from(new Set((Be=Wt.predecessors(Se))===null||Be===void 0?void 0:Be.concat(Wt.successors(Se))))},this.isLeaf=function(Se){var Be;if(Wt.isDirected()){var vr;return!(!((vr=Wt.successors(Se))===null||vr===void 0)&&vr.length)}return!(!((Be=Wt.neighbors(Se))===null||Be===void 0)&&Be.length)},this.filterNodes=function(Se){var Be=Wt.directed,vr=Wt.multigraph,Mr=Wt.compound,fn=new fe({directed:Be,multigraph:vr,compound:Mr});if(fn.setGraph(Wt.graph()),Wt.nodes().forEach(function(Mn){Se(Mn)&&fn.setNode(Mn,Wt.node(Mn))}),Wt.edges().forEach(function(Mn){fn.hasNode(Mn.v)&&fn.hasNode(Mn.w)&&fn.setEdgeObj(Mn,Wt.edge(Mn))}),Mr){var Xn=function(qn){for(var bn=Wt.parent(qn);bn!==void 0&&!fn.hasNode(bn);)bn=Wt.parent(bn);return bn};fn.nodes().forEach(function(Mn){fn.setParent(Mn,Xn(Mn))})}return fn},this.setDefaultEdgeLabel=function(Se){return g(Se)?Wt.defaultEdgeLabelFn=Se:Wt.defaultEdgeLabelFn=function(){return Se},Wt},this.edgeCount=function(){return Wt.edgeCountNum},this.setEdgeObj=function(Se,Be){return Wt.setEdge(Se.v,Se.w,Be,Se.name)},this.setPath=function(Se,Be){return Se.reduce(function(vr,Mr){return Wt.setEdge(vr,Mr,Be),Mr}),Wt},this.edgeFromArgs=function(Se,Be,vr){return Wt.edge({v:Se,w:Be,name:vr})},this.edge=function(Se){return Wt.edgesLabelsMap.get(y(Wt.isDirected(),Se))},this.hasEdge=function(Se,Be,vr){return Wt.edgesLabelsMap.has(y(Wt.isDirected(),{v:Se,w:Be,name:vr}))},this.removeEdgeObj=function(Se){var Be=Se.v,vr=Se.w,Mr=Se.name;return Wt.removeEdge(Be,vr,Mr)},this.edges=function(){return Array.from(Wt.edgesMap.values())},this.inEdges=function(Se,Be){var vr=Wt.inEdgesMap.get(Se);if(vr)return Array.from(vr.values()).filter(function(Mr){return!Be||Mr.v===Be})},this.outEdges=function(Se,Be){var vr=Wt.outEdgesMap.get(Se);if(vr)return Array.from(vr.values()).filter(function(Mr){return!Be||Mr.w===Be})},this.nodeEdges=function(Se,Be){var vr;if(Wt.hasNode(Se))return(vr=Wt.inEdges(Se,Be))===null||vr===void 0?void 0:vr.concat(Wt.outEdges(Se,Be))},this.toJSON=function(){return D(Wt)},this.nodeInDegree=function(Se){var Be=Wt.inEdgesMap.get(Se);return Be?Be.size:0},this.nodeOutDegree=function(Se){var Be=Wt.outEdgesMap.get(Se);return Be?Be.size:0},this.nodeDegree=function(Se){return Wt.nodeInDegree(Se)+Wt.nodeOutDegree(Se)},this.source=function(Se){return Se.v},this.target=function(Se){return Se.w};var Ae=b(b({},Z),ge);this.compound=Ae.compound,this.directed=Ae.directed,this.multigraph=Ae.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return Y(fe,[{key:"setNode",value:function(ge,Ae){var Se=this.nodesLabelMap,Be=this.defaultNodeLabelFn,vr=this.isCompound,Mr=this.parentMap,fn=this.childrenMap,Xn=this.inEdgesMap,Mn=this.outEdgesMap,qn=this.predecessorsMap,bn=this.successorsMap;if(Se.has(ge))return Ae!==void 0&&Se.set(ge,Ae),this;if(Se.set(ge,Ae||Be(ge)),vr()){var Vn;Mr==null||Mr.set(ge,this.GRAPH_NODE),fn==null||fn.set(ge,new Map),fn!=null&&fn.has(this.GRAPH_NODE)||fn==null||fn.set(this.GRAPH_NODE,new Map),fn==null||(Vn=fn.get(this.GRAPH_NODE))===null||Vn===void 0||Vn.set(ge,!0)}return[Xn,Mn,qn,bn].forEach(function(ca){return ca.set(ge,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(ge){var Ae=this;if(this.hasNode(ge)){var Se=function(Ea){Ae.removeEdge(Ea.v,Ea.w,Ea.name)},Be=this.inEdgesMap,vr=this.outEdgesMap,Mr=this.predecessorsMap,fn=this.successorsMap,Xn=this.nodesLabelMap;if(this.isCompound()){var Mn,qn,bn;this.removeFromParentsChildList(ge),(Mn=this.parentMap)===null||Mn===void 0||Mn.delete(ge),(qn=this.children(ge))===null||qn===void 0||qn.forEach(function(xa){return Ae.setParent(xa)}),(bn=this.childrenMap)===null||bn===void 0||bn.delete(ge)}var Vn=Be.get(ge),ca=vr.get(ge);Array.from(Vn.values()).forEach(function(xa){return Se(xa)}),Array.from(ca.values()).forEach(function(xa){return Se(xa)}),Xn.delete(ge),Be.delete(ge),vr.delete(ge),Mr.delete(ge),fn.delete(ge),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(ge,Ae,Se,Be){var vr,Mr,fn=S(this.isDirected(),ge,Ae,Be),Xn=y(this.isDirected(),fn),Mn=fn.v,qn=fn.w;if(this.edgesLabelsMap.has(Xn))return this.edgesLabelsMap.set(Xn,Se),this;if(Be!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(Mn),this.setNode(qn),this.edgesLabelsMap.set(Xn,Se||this.defaultEdgeLabelFn(Mn,qn,Be)),Object.freeze(fn),this.edgesMap.set(Xn,fn);var bn=this.predecessorsMap.get(qn),Vn=this.successorsMap.get(Mn);return P(bn,Mn),P(Vn,qn),(vr=this.inEdgesMap.get(qn))===null||vr===void 0||vr.set(Xn,fn),(Mr=this.outEdgesMap.get(Mn))===null||Mr===void 0||Mr.set(Xn,fn),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(ge,Ae,Se){var Be=m(this.isDirected(),ge,Ae,Se),vr=this.edgesMap.get(Be);if(vr){var Mr=S(this.isDirected(),ge,Ae,Se),fn=Mr.v,Xn=Mr.w;this.edgesLabelsMap.delete(Be),this.edgesMap.delete(Be);var Mn=this.predecessorsMap.get(Xn),qn=this.successorsMap.get(fn);p(Mn,fn),p(qn,Xn),this.inEdgesMap.get(Xn).delete(Be),this.outEdgesMap.get(fn).delete(Be),this.edgeCountNum-=1}return this}}]),fe}();H.fromJSON=F;function q(fe){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Wt){return typeof Wt}:function(Wt){return Wt&&typeof Symbol=="function"&&Wt.constructor===Symbol&&Wt!==Symbol.prototype?"symbol":typeof Wt},q(fe)}function Q(fe,Wt){if(!(fe instanceof Wt))throw new TypeError("Cannot call a class as a function")}function J(fe,Wt){for(var ge=0;ge<Wt.length;ge++){var Ae=Wt[ge];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(fe,Ae.key,Ae)}}function ft(fe,Wt,ge){return Wt&&J(fe.prototype,Wt),ge&&J(fe,ge),Object.defineProperty(fe,"prototype",{writable:!1}),fe}function nt(){return typeof Reflect!="undefined"&&Reflect.get?nt=Reflect.get:nt=function(Wt,ge,Ae){var Se=yt(Wt,ge);if(Se){var Be=Object.getOwnPropertyDescriptor(Se,ge);return Be.get?Be.get.call(arguments.length<3?Wt:Ae):Be.value}},nt.apply(this,arguments)}function yt(fe,Wt){for(;!Object.prototype.hasOwnProperty.call(fe,Wt)&&(fe=Tt(fe),fe!==null););return fe}function gt(fe,Wt){if(typeof Wt!="function"&&Wt!==null)throw new TypeError("Super expression must either be null or a function");fe.prototype=Object.create(Wt&&Wt.prototype,{constructor:{value:fe,writable:!0,configurable:!0}}),Object.defineProperty(fe,"prototype",{writable:!1}),Wt&&zt(fe,Wt)}function zt(fe,Wt){return zt=Object.setPrototypeOf||function(Ae,Se){return Ae.__proto__=Se,Ae},zt(fe,Wt)}function Mt(fe){var Wt=ot();return function(){var Ae=Tt(fe),Se;if(Wt){var Be=Tt(this).constructor;Se=Reflect.construct(Ae,arguments,Be)}else Se=Ae.apply(this,arguments);return Ct(this,Se)}}function Ct(fe,Wt){if(Wt&&(q(Wt)==="object"||typeof Wt=="function"))return Wt;if(Wt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rt(fe)}function rt(fe){if(fe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe}function ot(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(fe){return!1}}function Tt(fe){return Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},Tt(fe)}var Rt=function(fe){gt(ge,fe);var Wt=Mt(ge);function ge(){var Ae;Q(this,ge);for(var Se=arguments.length,Be=new Array(Se),vr=0;vr<Se;vr++)Be[vr]=arguments[vr];return Ae=Wt.call.apply(Wt,[this].concat(Be)),Ae.eventPool={},Ae}return ft(ge,[{key:"appendEvent",value:function(Se,Be){this.eventPool[Se]||(this.eventPool[Se]=[]),this.eventPool[Se].push(Be)}},{key:"removeEvent",value:function(Se,Be){if(this.eventPool[Se]){var vr=this.eventPool[Se].indexOf(Be);vr>-1&&this.eventPool[Se].splice(vr,1)}}},{key:"emitEvent",value:function(Se){for(var Be=arguments.length,vr=new Array(Be>1?Be-1:0),Mr=1;Mr<Be;Mr++)vr[Mr-1]=arguments[Mr];this.eventPool[Se]&&this.eventPool[Se].forEach(function(fn){fn.apply(void 0,vr)})}},{key:"setNode",value:function(Se,Be){return nt(Tt(ge.prototype),"setNode",this).call(this,Se,Be),this.emitEvent("nodeAdd",Se,Be),this}},{key:"removeNode",value:function(Se){return nt(Tt(ge.prototype),"removeNode",this).call(this,Se),this.emitEvent("nodeRemove",Se),this}},{key:"setEdge",value:function(Se,Be,vr,Mr){return nt(Tt(ge.prototype),"setEdge",this).call(this,Se,Be,vr,Mr),this.emitEvent("edgeAdd",Se,Be,vr,Mr),this}},{key:"removeEdge",value:function(Se,Be,vr){return nt(Tt(ge.prototype),"removeEdge",this).call(this,Se,Be,vr),this.emitEvent("edgeRemove",Se,Be,vr),this}}]),ge}(H);function st(fe,Wt){for(var ge=0;ge<Wt.length;ge++){var Ae=Wt[ge];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(fe,Ae.key,Ae)}}function bt(fe,Wt,ge){return Wt&&st(fe.prototype,Wt),ge&&st(fe,ge),Object.defineProperty(fe,"prototype",{writable:!1}),fe}function Ft(fe,Wt){if(!(fe instanceof Wt))throw new TypeError("Cannot call a class as a function")}var Ht=bt(function fe(){var Wt=this;Ft(this,fe),this.arr=[],this.keyIndice=new Map,this.size=function(){return Wt.arr.length},this.keys=function(){return Wt.arr.map(function(ge){return ge.key})},this.has=function(ge){return Wt.keyIndice.has(ge)},this.priority=function(ge){var Ae=Wt.keyIndice.get(ge);if(Ae!==void 0)return Wt.arr[Ae].priority},this.swap=function(ge,Ae){var Se=Wt.arr,Be=Wt.keyIndice,vr=[Se[ge],Se[Ae]],Mr=vr[0],fn=vr[1];Se[ge]=fn,Se[Ae]=Mr,Be.set(Mr.key,Ae),Be.set(fn.key,ge)},this.innerDecrease=function(ge){for(var Ae=Wt.arr,Se=Ae[ge].priority,Be,vr=ge;vr!==0;){var Mr;if(Be=vr>>1,((Mr=Ae[Be])===null||Mr===void 0?void 0:Mr.priority)<Se)break;Wt.swap(vr,Be),vr=Be}},this.heapify=function(ge){var Ae=Wt.arr,Se=ge<<1,Be=Se+1,vr=ge;Se<Ae.length&&(vr=Ae[Se].priority<Ae[vr].priority?Se:vr,Be<Ae.length&&(vr=Ae[Be].priority<Ae[vr].priority?Be:vr),vr!==ge&&(Wt.swap(ge,vr),Wt.heapify(vr)))},this.min=function(){if(Wt.size()===0)throw new Error("Queue underflow");return Wt.arr[0].key},this.add=function(ge,Ae){var Se=Wt.keyIndice,Be=Wt.arr;if(!Se.has(ge)){var vr=Be.length;return Se.set(ge,vr),Be.push({key:ge,priority:Ae}),Wt.innerDecrease(vr),!0}return!1},this.removeMin=function(){Wt.swap(0,Wt.arr.length-1);var ge=Wt.arr.pop();return Wt.keyIndice.delete(ge.key),Wt.heapify(0),ge.key},this.decrease=function(ge,Ae){if(!Wt.has(ge))throw new Error("There's no key named ".concat(ge));var Se=Wt.keyIndice.get(ge);if(Ae>Wt.arr[Se].priority)throw new Error("New priority is greater than current priority.Key: ".concat(ge," Old: + ").concat(Wt.arr[Se].priority," New: ").concat(Ae));Wt.arr[Se].priority=Ae,Wt.innerDecrease(Se)}}),_t=function(Wt,ge){var Ae=new H,Se=new Map,Be=new Ht,vr;function Mr(Mn){var qn=Mn.v===vr?Mn.w:Mn.v,bn=Be.priority(qn);if(bn!==void 0){var Vn=ge(Mn);Vn<bn&&(Se.set(qn,vr),Be.decrease(qn,Vn))}}if(Wt.nodeCount()===0)return Ae;Wt.nodes().forEach(function(Mn){Be.add(Mn,Number.POSITIVE_INFINITY),Ae.setNode(Mn)}),Be.decrease(Wt.nodes()[0],0);for(var fn=!1;Be.size()>0;){var Xn;if(vr=Be.removeMin(),Se.has(vr))Ae.setEdge(vr,Se.get(vr));else{if(fn)throw new Error("Input graph is not connected: "+Wt.graph());fn=!0}(Xn=Wt.nodeEdges(vr))===null||Xn===void 0||Xn.forEach(Mr)}return Ae},Xt=_t,ee=function(Wt){var ge=new Set,Ae=[],Se=Wt.nodes();return Se.forEach(function(Be){for(var vr=[],Mr=[Be];Mr.length>0;){var fn=Mr.pop();if(!ge.has(fn)){var Xn,Mn;ge.add(fn),vr.push(fn),(Xn=Wt.successors(fn))===null||Xn===void 0||Xn.forEach(function(qn){return Mr.push(qn)}),(Mn=Wt.predecessors(fn))===null||Mn===void 0||Mn.forEach(function(qn){return Mr.push(qn)})}}vr.length&&Ae.push(vr)}),Ae},se=ee,ue=function fe(Wt,ge,Ae,Se,Be,vr){Se.includes(ge)||(Se.push(ge),Ae||vr.push(ge),Be(ge).forEach(function(Mr){return fe(Wt,Mr,Ae,Se,Be,vr)}),Ae&&vr.push(ge))},Ut=function(Wt,ge,Ae){var Se=Array.isArray(ge)?ge:[ge],Be=function(Xn){return Wt.isDirected()?Wt.successors(Xn):Wt.neighbors(Xn)},vr=[],Mr=[];return Se.forEach(function(fn){if(Wt.hasNode(fn))ue(Wt,fn,Ae==="post",Mr,Be,vr);else throw new Error("Graph does not have node: "+fn)}),vr},oe=Ut;function Pe(fe,Wt){return Re(fe)||xe(fe,Wt)||ve(fe,Wt)||te()}function te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ve(fe,Wt){if(fe){if(typeof fe=="string")return Ue(fe,Wt);var ge=Object.prototype.toString.call(fe).slice(8,-1);if(ge==="Object"&&fe.constructor&&(ge=fe.constructor.name),ge==="Map"||ge==="Set")return Array.from(fe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return Ue(fe,Wt)}}function Ue(fe,Wt){(Wt==null||Wt>fe.length)&&(Wt=fe.length);for(var ge=0,Ae=new Array(Wt);ge<Wt;ge++)Ae[ge]=fe[ge];return Ae}function xe(fe,Wt){var ge=fe==null?null:typeof Symbol!="undefined"&&fe[Symbol.iterator]||fe["@@iterator"];if(ge!=null){var Ae=[],Se=!0,Be=!1,vr,Mr;try{for(ge=ge.call(fe);!(Se=(vr=ge.next()).done)&&(Ae.push(vr.value),!(Wt&&Ae.length===Wt));Se=!0);}catch(fn){Be=!0,Mr=fn}finally{try{!Se&&ge.return!=null&&ge.return()}finally{if(Be)throw Mr}}return Ae}}function Re(fe){if(Array.isArray(fe))return fe}var de=function(){return 1},ht=function(Wt,ge,Ae,Se){return ae(Wt,ge,Ae||de,Se||function(Be){return Wt.outEdges(Be)})},ae=function(Wt,ge,Ae,Se){var Be=new Map,vr=new Ht,Mr,fn,Xn=function(bn){var Vn=bn.v!==Mr?bn.v:bn.w,ca=Be.get(Vn),xa=Ae(bn),Ea=fn.distance+xa;if(xa<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+bn+" Weight: "+xa);Ea<ca.distance&&(ca.distance=Ea,ca.predecessor=Mr,vr.decrease(Vn,Ea))};for(Wt.nodes().forEach(function(qn){var bn=qn===ge?0:Number.POSITIVE_INFINITY;Be.set(qn,{distance:bn}),vr.add(qn,bn)});vr.size()>0&&(Mr=vr.removeMin(),fn=Be.get(Mr),!(fn&&fn.distance===Number.POSITIVE_INFINITY));)Se(Mr).forEach(Xn);var Mn={};return Array.from(Be.entries()).forEach(function(qn){var bn=Pe(qn,2),Vn=bn[0],ca=bn[1];return Mn[String(Vn)]=ca,Mn}),Mn},Le=ht,Ze=function(Wt,ge,Ae){var Se={};return Wt.nodes().forEach(function(Be){return Se[String(Be)]=Le(Wt,Be,ge,Ae),Se}),Se},qe=Ze,fr=function(Wt){var ge=0,Ae=[],Se=new Map,Be=[];function vr(Mr){var fn,Xn={onStack:!0,lowlink:ge,index:ge};if(Se.set(Mr,Xn),ge+=1,Ae.push(Mr),(fn=Wt.successors(Mr))===null||fn===void 0||fn.forEach(function(Vn){var ca;if(Se.has(Vn)){if(!((ca=Se.get(Vn))===null||ca===void 0)&&ca.onStack){var Ea=Se.get(Vn);Xn.lowlink=Math.min(Xn.lowlink,Ea.index)}}else{vr(Vn);var xa=Se.get(Vn);Xn.lowlink=Math.min(Xn.lowlink,xa.lowlink)}}),Xn.lowlink===Xn.index){var Mn=[],qn;do{qn=Ae.pop();var bn=Se.get(qn);bn.onStack=!1,Mn.push(qn)}while(Mr!==qn);Be.push(Mn)}}return Wt.nodes().forEach(function(Mr){Se.has(Mr)||vr(Mr)}),Be},ur=fr,kr=function(Wt){return ur(Wt).filter(function(ge){return ge.length>1||ge.length===1&&Wt.hasEdge(ge[0],ge[0])})},yn=kr;function un(fe){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Wt){return typeof Wt}:function(Wt){return Wt&&typeof Symbol=="function"&&Wt.constructor===Symbol&&Wt!==Symbol.prototype?"symbol":typeof Wt},un(fe)}function Vr(fe,Wt){for(var ge=0;ge<Wt.length;ge++){var Ae=Wt[ge];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(fe,Ae.key,Ae)}}function $e(fe,Wt,ge){return Wt&&Vr(fe.prototype,Wt),ge&&Vr(fe,ge),Object.defineProperty(fe,"prototype",{writable:!1}),fe}function dr(fe,Wt){if(!(fe instanceof Wt))throw new TypeError("Cannot call a class as a function")}function ar(fe,Wt){if(typeof Wt!="function"&&Wt!==null)throw new TypeError("Super expression must either be null or a function");fe.prototype=Object.create(Wt&&Wt.prototype,{constructor:{value:fe,writable:!0,configurable:!0}}),Object.defineProperty(fe,"prototype",{writable:!1}),Wt&&Br(fe,Wt)}function Qe(fe){var Wt=Yn();return function(){var Ae=en(fe),Se;if(Wt){var Be=en(this).constructor;Se=Reflect.construct(Ae,arguments,Be)}else Se=Ae.apply(this,arguments);return Pr(this,Se)}}function Pr(fe,Wt){if(Wt&&(un(Wt)==="object"||typeof Wt=="function"))return Wt;if(Wt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zr(fe)}function Zr(fe){if(fe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe}function qr(fe){var Wt=typeof Map=="function"?new Map:void 0;return qr=function(Ae){if(Ae===null||!Ir(Ae))return Ae;if(typeof Ae!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Wt!="undefined"){if(Wt.has(Ae))return Wt.get(Ae);Wt.set(Ae,Se)}function Se(){return Sn(Ae,arguments,en(this).constructor)}return Se.prototype=Object.create(Ae.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),Br(Se,Ae)},qr(fe)}function Sn(fe,Wt,ge){return Yn()?Sn=Reflect.construct:Sn=function(Se,Be,vr){var Mr=[null];Mr.push.apply(Mr,Be);var fn=Function.bind.apply(Se,Mr),Xn=new fn;return vr&&Br(Xn,vr.prototype),Xn},Sn.apply(null,arguments)}function Yn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(fe){return!1}}function Ir(fe){return Function.toString.call(fe).indexOf("[native code]")!==-1}function Br(fe,Wt){return Br=Object.setPrototypeOf||function(Ae,Se){return Ae.__proto__=Se,Ae},Br(fe,Wt)}function en(fe){return en=Object.setPrototypeOf?Object.getPrototypeOf:function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},en(fe)}var hn=function(fe){ar(ge,fe);var Wt=Qe(ge);function ge(){return dr(this,ge),Wt.apply(this,arguments)}return $e(ge)}(qr(Error));function xn(fe){var Wt=new Set,ge=new Set,Ae=[];function Se(Be){if(ge.has(Be))throw new hn;if(!Wt.has(Be)){var vr;ge.add(Be),Wt.add(Be),(vr=fe.predecessors(Be))===null||vr===void 0||vr.forEach(Se),ge.delete(Be),Ae.push(Be)}}if(fe.sinks().forEach(Se),Wt.size!==fe.nodeCount())throw new hn;return Ae}var _n=xn,tt=function(Wt){try{_n(Wt)}catch(ge){if(ge instanceof hn)return!1;throw ge}return!0},ir=tt,jt=function(Wt,ge){return oe(Wt,ge,"post")},Qt=jt,Et=function(Wt,ge){return oe(Wt,ge,"pre")},we=Et,Ot=function(){return 1};function Kt(fe,Wt,ge){return dt(fe,Wt||Ot,ge||function(Ae){return fe.outEdges(Ae)})}function dt(fe,Wt,ge){var Ae={},Se=fe.nodes();return Se.forEach(function(Be){var vr=String(Be);Ae[vr]={},Ae[vr][vr]={distance:0},Se.forEach(function(Mr){Be!==Mr&&(Ae[vr][String(Mr)]={distance:Number.POSITIVE_INFINITY})}),ge(Be).forEach(function(Mr){var fn=Mr.v===Be?Mr.w:Mr.v,Xn=Wt(Mr);Ae[vr][String(fn)]={distance:Xn,predecessor:Be}})}),Se.forEach(function(Be){var vr=String(Be),Mr=Ae[vr];Se.forEach(function(fn){var Xn=String(fn),Mn=Ae[Xn];Se.forEach(function(qn){var bn=String(qn),Vn=Mn[vr],ca=Mr[bn],xa=Mn[bn],Ea=Vn.distance+ca.distance;Ea<xa.distance&&(xa.distance=Ea,xa.predecessor=ca.predecessor)})})}),Ae}var Bt=Kt,$=function(Wt,ge){for(var Ae=Wt.nodes(),Se=0;Se<Ae.length;Se++){var Be=Ae[Se];if(ge.hasNode(Be))return!0}return!1},at=function(Wt,ge){for(var Ae=Wt.edges(),Se=0;Se<Ae.length;Se++){var Be=Ae[Se];if(ge.hasEdge(Be.v,Be.w,Be.name))return!0}return!1},R=function(Wt,ge){var Ae=Wt.nodes(),Se=Ae.filter(function(Be){return ge.hasNode(Be)});return Se},M=function(Wt,ge){var Ae=Wt.edges(),Se=Ae.filter(function(Be){return ge.hasEdge(Be.v,Be.w,Be.name)});return Se},A=function(Wt,ge){return Wt.isCompound()===ge.isCompound()&&Wt.isDirected()===ge.isDirected()&&Wt.isMultigraph()===ge.isMultigraph()},X=function(Wt,ge){var Ae=R(Wt,ge);return Ae.length===Wt.nodes().length},mt=function(Wt,ge){var Ae=M(Wt,ge);return Ae.length===Wt.edges().length},Lt=function(Wt,ge){return A(Wt,ge)&&Wt.nodeCount()===ge.nodeCount()&&X(Wt,ge)&&Wt.edgeCount()===ge.edgeCount()&&mt(Wt,ge)},Pt=function(Wt,ge){return X(Wt,ge)&&mt(Wt,ge)};function Jt(fe,Wt){return Je(fe)||br(fe,Wt)||pe(fe,Wt)||Ie()}function Ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(fe,Wt){if(fe){if(typeof fe=="string")return je(fe,Wt);var ge=Object.prototype.toString.call(fe).slice(8,-1);if(ge==="Object"&&fe.constructor&&(ge=fe.constructor.name),ge==="Map"||ge==="Set")return Array.from(fe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return je(fe,Wt)}}function je(fe,Wt){(Wt==null||Wt>fe.length)&&(Wt=fe.length);for(var ge=0,Ae=new Array(Wt);ge<Wt;ge++)Ae[ge]=fe[ge];return Ae}function br(fe,Wt){var ge=fe==null?null:typeof Symbol!="undefined"&&fe[Symbol.iterator]||fe["@@iterator"];if(ge!=null){var Ae=[],Se=!0,Be=!1,vr,Mr;try{for(ge=ge.call(fe);!(Se=(vr=ge.next()).done)&&(Ae.push(vr.value),!(Wt&&Ae.length===Wt));Se=!0);}catch(fn){Be=!0,Mr=fn}finally{try{!Se&&ge.return!=null&&ge.return()}finally{if(Be)throw Mr}}return Ae}}function Je(fe){if(Array.isArray(fe))return fe}function zr(fe){return fe instanceof H}function gn(fe){if(fe.isMultigraph())return!1;for(var Wt=fe.edges(),ge=new Map,Ae=0;Ae<Wt.length;Ae++){var Se=Wt[Ae];if(Se.v===Se.w)return!1;var Be=[Se.v,Se.w].sort(),vr=Jt(Be,2),Mr=vr[0],fn=vr[1],Xn="".concat(Mr,"-").concat(fn);if(ge.has(Xn))return!1;ge.set(Xn,!0)}return!0}function tr(fe){return fe.nodes().length===0}function xr(fe){for(var Wt=fe.edges(),ge=0;ge<Wt.length;ge++){var Ae=Wt[ge];if(Ae.v===Ae.w)return!0}return!1}var Ur=function(Wt,ge){if(!gn(Wt)||!gn(ge)||!X(Wt,ge)||at(Wt,ge))return!1;var Ae=Wt.nodeCount();return Wt.edgeCount()+ge.edgeCount()===Ae*(Ae-1)/2},Nr=function(Wt){if(!gn(Wt))return null;for(var ge=Wt.nodeCount(),Ae=new H({compound:Wt.isCompound(),directed:Wt.isDirected(),multigraph:Wt.isMultigraph()}),Se=Wt.nodes(),Be=0;Be<ge;Be++){var vr=Se[Be];Ae.setNode(vr,Wt.node(vr));for(var Mr=Be+1;Mr<ge;Mr++){var fn=Se[Mr];Wt.hasEdge(vr,fn)||Ae.setEdge(vr,fn)}}return Ae}},981746:function(He){(function(C,x){He.exports=x()})(typeof self!="undefined"?self:this,function(){return function(z){var C={};function x(k){if(C[k])return C[k].exports;var w=C[k]={i:k,l:!1,exports:{}};return z[k].call(w.exports,w,w.exports,x),w.l=!0,w.exports}return x.m=z,x.c=C,x.d=function(k,w,T){x.o(k,w)||Object.defineProperty(k,w,{configurable:!1,enumerable:!0,get:T})},x.n=function(k){var w=k&&k.__esModule?function(){return k.default}:function(){return k};return x.d(w,"a",w),w},x.o=function(k,w){return Object.prototype.hasOwnProperty.call(k,w)},x.p="",x(x.s=36)}([function(z,C,x){"use strict";var k=x(3);C.a=function(w){return Array.isArray?Array.isArray(w):Object(k.a)(w,"Array")}},function(z,C,x){"use strict";var k=function(w){return w!==null&&typeof w!="function"&&isFinite(w.length)};C.a=k},function(z,C,x){"use strict";var k=x(3);C.a=function(w){return Object(k.a)(w,"Function")}},function(z,C,x){"use strict";var k={}.toString,w=function(T,L){return k.call(T)==="[object "+L+"]"};C.a=w},function(z,C,x){"use strict";var k=x(3);C.a=function(w){return Object(k.a)(w,"String")}},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"Number")};C.a=w},function(z,C,x){var k=x(38),w=k.mix;function T(L,P,p,m){return m===void 0&&(m="height"),p==="center"?(L[m]+P[m])/2:L.height}z.exports={assign:w,getHeight:T}},function(z,C,x){"use strict";var k=function(w){return w==null};C.a=k},function(z,C,x){"use strict";var k=x(0),w=x(12);function T(L,P){if(L){var p;if(Object(k.a)(L))for(var m=0,S=L.length;m<S&&(p=P(L[m],m),p!==!1);m++);else if(Object(w.a)(L)){for(var y in L)if(L.hasOwnProperty(y)&&(p=P(L[y],y),p===!1))break}}}C.a=T},function(z,C,x){"use strict";var k=x(7);C.a=function(w){return Object(k.a)(w)?"":w.toString()}},function(z,C,x){"use strict";var k=x(14),w=x(3),T=function(L){if(!Object(k.a)(L)||!Object(w.a)(L,"Object"))return!1;if(Object.getPrototypeOf(L)===null)return!0;for(var P=L;Object.getPrototypeOf(P)!==null;)P=Object.getPrototypeOf(P);return Object.getPrototypeOf(L)===P};C.a=T},function(z,C,x){var k=x(18),w=function(){function T(P,p){p===void 0&&(p={});var m=this;m.options=p,m.rootNode=k(P,p)}var L=T.prototype;return L.execute=function(){throw new Error("please override this method")},T}();z.exports=w},function(z,C,x){"use strict";C.a=function(k){var w=typeof k;return k!==null&&w==="object"||w==="function"}},function(z,C,x){"use strict";var k=x(1),w=function(T,L){return Object(k.a)(T)?T.indexOf(L)>-1:!1};C.a=w},function(z,C,x){"use strict";var k=function(w){return typeof w=="object"&&w!==null};C.a=k},function(z,C,x){"use strict";var k=x(8),w=x(2),T=Object.values?function(L){return Object.values(L)}:function(L){var P=[];return Object(k.a)(L,function(p,m){Object(w.a)(L)&&m==="prototype"||P.push(p)}),P};C.a=T},function(z,C,x){"use strict";C.a=w;function k(T,L){for(var P in L)L.hasOwnProperty(P)&&P!=="constructor"&&L[P]!==void 0&&(T[P]=L[P])}function w(T,L,P,p){return L&&k(T,L),P&&k(T,P),p&&k(T,p),T}},function(z,C,x){var k=x(35),w=["LR","RL","TB","BT","H","V"],T=["LR","RL","H"],L=function(m){return T.indexOf(m)>-1},P=w[0];z.exports=function(p,m,S){var y=m.direction||P;if(m.isHorizontal=L(y),y&&w.indexOf(y)===-1)throw new TypeError("Invalid direction: "+y);if(y===w[0])S(p,m);else if(y===w[1])S(p,m),p.right2left();else if(y===w[2])S(p,m);else if(y===w[3])S(p,m),p.bottom2top();else if(y===w[4]||y===w[5]){var g=k(p,m),O=g.left,E=g.right;S(O,m),S(E,m),m.isHorizontal?O.right2left():O.bottom2top(),E.translate(O.x-E.x,O.y-E.y),p.x=O.x,p.y=E.y;var D=p.getBoundingBox();m.isHorizontal?D.top<0&&p.translate(0,-D.top):D.left<0&&p.translate(-D.left,0)}var F=m.fixedRoot;return F===void 0&&(F=!0),F&&p.translate(-(p.x+p.width/2+p.hgap),-(p.y+p.height/2+p.vgap)),p}},function(z,C,x){var k=x(6),w=18,T=w*2,L=w,P={getId:function(y){return y.id||y.name},getPreH:function(y){return y.preH||0},getPreV:function(y){return y.preV||0},getHGap:function(y){return y.hgap||L},getVGap:function(y){return y.vgap||L},getChildren:function(y){return y.children},getHeight:function(y){return y.height||T},getWidth:function(y){var g=y.label||" ";return y.width||g.split("").length*w}};function p(S,y){var g=this;if(g.vgap=g.hgap=0,S instanceof p)return S;g.data=S;var O=y.getHGap(S),E=y.getVGap(S);return g.preH=y.getPreH(S),g.preV=y.getPreV(S),g.width=y.getWidth(S),g.height=y.getHeight(S),g.width+=g.preH,g.height+=g.preV,g.id=y.getId(S),g.x=g.y=0,g.depth=0,g.children||(g.children=[]),g.addGap(O,E),g}k.assign(p.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(y,g){var O=this;O.hgap+=y,O.vgap+=g,O.width+=2*y,O.height+=2*g},eachNode:function(y){for(var g=this,O=[g],E;E=O.shift();)y(E),O=E.children.concat(O)},DFTraverse:function(y){this.eachNode(y)},BFTraverse:function(y){for(var g=this,O=[g],E;E=O.shift();)y(E),O=O.concat(E.children)},getBoundingBox:function(){var y={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(g){y.left=Math.min(y.left,g.x),y.top=Math.min(y.top,g.y),y.width=Math.max(y.width,g.x+g.width),y.height=Math.max(y.height,g.y+g.height)}),y},translate:function(y,g){y===void 0&&(y=0),g===void 0&&(g=0),this.eachNode(function(O){O.x+=y,O.y+=g,O.x+=O.preH,O.y+=O.preV})},right2left:function(){var y=this,g=y.getBoundingBox();y.eachNode(function(O){O.x=O.x-(O.x-g.left)*2-O.width}),y.translate(g.width,0)},bottom2top:function(){var y=this,g=y.getBoundingBox();y.eachNode(function(O){O.y=O.y-(O.y-g.top)*2-O.height}),y.translate(0,g.height)}});function m(S,y,g){y===void 0&&(y={}),y=k.assign({},P,y);var O=new p(S,y),E=[O],D;if(!g&&!S.collapsed){for(;D=E.shift();)if(!D.data.collapsed){var F=y.getChildren(D.data),W=F?F.length:0;if(D.children=new Array(W),F&&W)for(var b=0;b<W;b++){var h=new p(F[b],y);D.children[b]=h,E.push(h),h.parent=D,h.depth=D.depth+1}}}return O}z.exports=m},function(z,C,x){"use strict";var k=x(1),w=function(T,L){if(!Object(k.a)(T))return T;for(var P=[],p=0;p<T.length;p++){var m=T[p];L(m,p)&&P.push(m)}return P};C.a=w},function(z,C,x){"use strict";var k=x(7),w=x(21);function T(L,P){var p=Object(w.a)(P),m=p.length;if(Object(k.a)(L))return!m;for(var S=0;S<m;S+=1){var y=p[S];if(P[y]!==L[y]||!(y in L))return!1}return!0}C.a=T},function(z,C,x){"use strict";var k=x(8),w=x(2),T=Object.keys?function(L){return Object.keys(L)}:function(L){var P=[];return Object(k.a)(L,function(p,m){Object(w.a)(L)&&m==="prototype"||P.push(m)}),P};C.a=T},function(z,C,x){"use strict";var k=x(0);C.a=function(w){if(Object(k.a)(w))return w.reduce(function(T,L){return Math.max(T,L)},w[0])}},function(z,C,x){"use strict";var k=x(0);C.a=function(w){if(Object(k.a)(w))return w.reduce(function(T,L){return Math.min(T,L)},w[0])}},function(z,C,x){"use strict";var k=x(1),w=Array.prototype.splice,T=function(P,p){if(!Object(k.a)(P))return[];for(var m=P?p.length:0,S=m-1;m--;){var y=void 0,g=p[m];(m===S||g!==y)&&(y=g,w.call(P,g,1))}return P};C.a=T},function(z,C,x){"use strict";var k=x(8),w=x(0),T=x(10),L=function(P,p,m){if(!Object(w.a)(P)&&!Object(T.a)(P))return P;var S=m;return Object(k.a)(P,function(y,g){S=p(S,y,g)}),S};C.a=L},function(z,C,x){"use strict";C.a=k;function k(w,T){T===void 0&&(T=new Map);var L=[];if(Array.isArray(w))for(var P=0,p=w.length;P<p;P++){var m=w[P];T.has(m)||(L.push(m),T.set(m,!0))}return L}},function(z,C,x){"use strict";C.a=L;var k=x(0),w=x(2),T=x(28);function L(P,p){if(!p)return{0:P};if(!Object(w.a)(p)){var m=Object(k.a)(p)?p:p.replace(/\s+/g,"").split("*");p=function(S){for(var y="_",g=0,O=m.length;g<O;g++)y+=S[m[g]]&&S[m[g]].toString();return y}}return Object(T.a)(P,p)}},function(z,C,x){"use strict";var k=x(0),w=x(2),T=Object.prototype.hasOwnProperty;function L(P,p){if(!p||!Object(k.a)(P))return{};for(var m={},S=Object(w.a)(p)?p:function(E){return E[p]},y,g=0;g<P.length;g++){var O=P[g];y=S(O),T.call(m,y)?m[y].push(O):m[y]=[O]}return m}C.a=L},function(z,C,x){"use strict";C.a=function(k,w){return k.hasOwnProperty(w)}},function(z,C,x){"use strict";var k={}.toString,w=function(T){return k.call(T).replace(/^\[object /,"").replace(/]$/,"")};C.a=w},function(z,C,x){"use strict";var k=Object.prototype,w=function(T){var L=T&&T.constructor,P=typeof L=="function"&&L.prototype||k;return T===P};C.a=w},function(z,C,x){"use strict";var k=x(2);C.a=function(w,T){if(!Object(k.a)(w))throw new TypeError("Expected a function");var L=function(){for(var P=[],p=0;p<arguments.length;p++)P[p]=arguments[p];var m=T?T.apply(this,P):P[0],S=L.cache;if(S.has(m))return S.get(m);var y=w.apply(this,P);return S.set(m,y),y};return L.cache=new Map,L}},function(z,C,x){"use strict";var k=x(14),w=x(1),T=x(4),L=function(P,p){if(P===p)return!0;if(!P||!p||Object(T.a)(P)||Object(T.a)(p))return!1;if(Object(w.a)(P)||Object(w.a)(p)){if(P.length!==p.length)return!1;for(var m=!0,S=0;S<P.length&&(m=L(P[S],p[S]),!!m);S++);return m}if(Object(k.a)(P)||Object(k.a)(p)){var y=Object.keys(P),g=Object.keys(p);if(y.length!==g.length)return!1;for(var m=!0,S=0;S<y.length&&(m=L(P[y[S]],p[y[S]]),!!m);S++);return m}return!1};C.a=L},function(z,C,x){"use strict";var k=x(116),w=x(15),T=x(32),L=x(4),P;C.a=Object(T.a)(function(p,m){m===void 0&&(m={});var S=m.fontSize,y=m.fontFamily,g=m.fontWeight,O=m.fontStyle,E=m.fontVariant;return P||(P=document.createElement("canvas").getContext("2d")),P.font=[O,E,g,S+"px",y].join(" "),P.measureText(Object(L.a)(p)?p:"").width},function(p,m){return m===void 0&&(m={}),Object(k.a)([p],Object(w.a)(m)).join("")})},function(z,C,x){var k=x(18);z.exports=function(w,T){for(var L=k(w.data,T,!0),P=k(w.data,T,!0),p=w.children.length,m=Math.round(p/2),S=T.getSide||function(E,D){return D<m?"right":"left"},y=0;y<p;y++){var g=w.children[y],O=S(g,y);O==="right"?P.children.push(g):L.children.push(g)}return L.eachNode(function(E){E.isRoot()||(E.side="left")}),P.eachNode(function(E){E.isRoot()||(E.side="right")}),{left:L,right:P}}},function(z,C,x){var k={compactBox:x(37),dendrogram:x(120),indented:x(122),mindmap:x(124)};z.exports=k},function(z,C,x){function k(g,O){g.prototype=Object.create(O.prototype),g.prototype.constructor=g,w(g,O)}function w(g,O){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,F){return D.__proto__=F,D},w(g,O)}var T=x(11),L=x(119),P=x(17),p=x(6),m=function(g){k(O,g);function O(){return g.apply(this,arguments)||this}var E=O.prototype;return E.execute=function(){var F=this;return P(F.rootNode,F.options,L)},O}(T),S={};function y(g,O){return O=p.assign({},S,O),new m(g,O).execute()}z.exports=y},function(z,C,x){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=x(13);x.d(C,"contains",function(){return k.a}),x.d(C,"includes",function(){return k.a});var w=x(39);x.d(C,"difference",function(){return w.a});var T=x(40);x.d(C,"find",function(){return T.a});var L=x(41);x.d(C,"findIndex",function(){return L.a});var P=x(42);x.d(C,"firstValue",function(){return P.a});var p=x(43);x.d(C,"flatten",function(){return p.a});var m=x(44);x.d(C,"flattenDeep",function(){return m.a});var S=x(45);x.d(C,"getRange",function(){return S.a});var y=x(46);x.d(C,"pull",function(){return y.a});var g=x(24);x.d(C,"pullAt",function(){return g.a});var O=x(25);x.d(C,"reduce",function(){return O.a});var E=x(47);x.d(C,"remove",function(){return E.a});var D=x(48);x.d(C,"sortBy",function(){return D.a});var F=x(49);x.d(C,"union",function(){return F.a});var W=x(26);x.d(C,"uniq",function(){return W.a});var b=x(50);x.d(C,"valuesOfKey",function(){return b.a});var h=x(51);x.d(C,"head",function(){return h.a});var K=x(52);x.d(C,"last",function(){return K.a});var U=x(53);x.d(C,"startsWith",function(){return U.a});var Y=x(54);x.d(C,"endsWith",function(){return Y.a});var Z=x(19);x.d(C,"filter",function(){return Z.a});var H=x(55);x.d(C,"every",function(){return H.a});var q=x(56);x.d(C,"some",function(){return q.a});var Q=x(57);x.d(C,"group",function(){return Q.a});var J=x(28);x.d(C,"groupBy",function(){return J.a});var ft=x(27);x.d(C,"groupToMap",function(){return ft.a});var nt=x(58);x.d(C,"getWrapBehavior",function(){return nt.a});var yt=x(59);x.d(C,"wrapBehavior",function(){return yt.a});var gt=x(60);x.d(C,"number2color",function(){return gt.a});var zt=x(61);x.d(C,"parseRadius",function(){return zt.a});var Mt=x(62);x.d(C,"clamp",function(){return Mt.a});var Ct=x(63);x.d(C,"fixedBase",function(){return Ct.a});var rt=x(64);x.d(C,"isDecimal",function(){return rt.a});var ot=x(65);x.d(C,"isEven",function(){return ot.a});var Tt=x(66);x.d(C,"isInteger",function(){return Tt.a});var Rt=x(67);x.d(C,"isNegative",function(){return Rt.a});var st=x(68);x.d(C,"isNumberEqual",function(){return st.a});var bt=x(69);x.d(C,"isOdd",function(){return bt.a});var Ft=x(70);x.d(C,"isPositive",function(){return Ft.a});var Ht=x(22);x.d(C,"max",function(){return Ht.a});var _t=x(71);x.d(C,"maxBy",function(){return _t.a});var Xt=x(23);x.d(C,"min",function(){return Xt.a});var ee=x(72);x.d(C,"minBy",function(){return ee.a});var se=x(73);x.d(C,"mod",function(){return se.a});var ue=x(74);x.d(C,"toDegree",function(){return ue.a});var Ut=x(75);x.d(C,"toInteger",function(){return Ut.a});var oe=x(76);x.d(C,"toRadian",function(){return oe.a});var Pe=x(77);x.d(C,"forIn",function(){return Pe.a});var te=x(29);x.d(C,"has",function(){return te.a});var ve=x(78);x.d(C,"hasKey",function(){return ve.a});var Ue=x(79);x.d(C,"hasValue",function(){return Ue.a});var xe=x(21);x.d(C,"keys",function(){return xe.a});var Re=x(20);x.d(C,"isMatch",function(){return Re.a});var de=x(15);x.d(C,"values",function(){return de.a});var ht=x(80);x.d(C,"lowerCase",function(){return ht.a});var ae=x(81);x.d(C,"lowerFirst",function(){return ae.a});var Le=x(82);x.d(C,"substitute",function(){return Le.a});var Ze=x(83);x.d(C,"upperCase",function(){return Ze.a});var qe=x(84);x.d(C,"upperFirst",function(){return qe.a});var fr=x(30);x.d(C,"getType",function(){return fr.a});var ur=x(85);x.d(C,"isArguments",function(){return ur.a});var kr=x(0);x.d(C,"isArray",function(){return kr.a});var yn=x(1);x.d(C,"isArrayLike",function(){return yn.a});var un=x(86);x.d(C,"isBoolean",function(){return un.a});var Vr=x(87);x.d(C,"isDate",function(){return Vr.a});var $e=x(88);x.d(C,"isError",function(){return $e.a});var dr=x(2);x.d(C,"isFunction",function(){return dr.a});var ar=x(89);x.d(C,"isFinite",function(){return ar.a});var Qe=x(7);x.d(C,"isNil",function(){return Qe.a});var Pr=x(90);x.d(C,"isNull",function(){return Pr.a});var Zr=x(5);x.d(C,"isNumber",function(){return Zr.a});var qr=x(12);x.d(C,"isObject",function(){return qr.a});var Sn=x(14);x.d(C,"isObjectLike",function(){return Sn.a});var Yn=x(10);x.d(C,"isPlainObject",function(){return Yn.a});var Ir=x(31);x.d(C,"isPrototype",function(){return Ir.a});var Br=x(91);x.d(C,"isRegExp",function(){return Br.a});var en=x(4);x.d(C,"isString",function(){return en.a});var hn=x(3);x.d(C,"isType",function(){return hn.a});var xn=x(92);x.d(C,"isUndefined",function(){return xn.a});var _n=x(93);x.d(C,"isElement",function(){return _n.a});var tt=x(94);x.d(C,"requestAnimationFrame",function(){return tt.a});var ir=x(95);x.d(C,"clearAnimationFrame",function(){return ir.a});var jt=x(96);x.d(C,"augment",function(){return jt.a});var Qt=x(97);x.d(C,"clone",function(){return Qt.a});var Et=x(98);x.d(C,"debounce",function(){return Et.a});var we=x(32);x.d(C,"memoize",function(){return we.a});var Ot=x(99);x.d(C,"deepMix",function(){return Ot.a});var Kt=x(8);x.d(C,"each",function(){return Kt.a});var dt=x(100);x.d(C,"extend",function(){return dt.a});var Bt=x(101);x.d(C,"indexOf",function(){return Bt.a});var $=x(102);x.d(C,"isEmpty",function(){return $.a});var at=x(33);x.d(C,"isEqual",function(){return at.a});var R=x(103);x.d(C,"isEqualWith",function(){return R.a});var M=x(104);x.d(C,"map",function(){return M.a});var A=x(105);x.d(C,"mapValues",function(){return A.a});var X=x(16);x.d(C,"mix",function(){return X.a}),x.d(C,"assign",function(){return X.a});var mt=x(106);x.d(C,"get",function(){return mt.a});var Lt=x(107);x.d(C,"set",function(){return Lt.a});var Pt=x(108);x.d(C,"pick",function(){return Pt.a});var Jt=x(109);x.d(C,"omit",function(){return Jt.a});var Ie=x(110);x.d(C,"throttle",function(){return Ie.a});var pe=x(111);x.d(C,"toArray",function(){return pe.a});var je=x(9);x.d(C,"toString",function(){return je.a});var br=x(112);x.d(C,"uniqueId",function(){return br.a});var Je=x(113);x.d(C,"noop",function(){return Je.a});var zr=x(114);x.d(C,"identity",function(){return zr.a});var gn=x(115);x.d(C,"size",function(){return gn.a});var tr=x(34);x.d(C,"measureTextWidth",function(){return tr.a});var xr=x(117);x.d(C,"getEllipsisText",function(){return xr.a});var Ur=x(118);x.d(C,"Cache",function(){return Ur.a})},function(z,C,x){"use strict";var k=x(19),w=x(13),T=function(L,P){return P===void 0&&(P=[]),Object(k.a)(L,function(p){return!Object(w.a)(P,p)})};C.a=T},function(z,C,x){"use strict";var k=x(2),w=x(20),T=x(0),L=x(10);function P(p,m){if(!Object(T.a)(p))return null;var S;if(Object(k.a)(m)&&(S=m),Object(L.a)(m)&&(S=function(g){return Object(w.a)(g,m)}),S){for(var y=0;y<p.length;y+=1)if(S(p[y]))return p[y]}return null}C.a=P},function(z,C,x){"use strict";function k(w,T,L){L===void 0&&(L=0);for(var P=L;P<w.length;P++)if(T(w[P],P))return P;return-1}C.a=k},function(z,C,x){"use strict";var k=x(7),w=x(0),T=function(L,P){for(var p=null,m=0;m<L.length;m++){var S=L[m],y=S[P];if(!Object(k.a)(y)){Object(w.a)(y)?p=y[0]:p=y;break}}return p};C.a=T},function(z,C,x){"use strict";var k=x(0),w=function(T){if(!Object(k.a)(T))return[];for(var L=[],P=0;P<T.length;P++)L=L.concat(T[P]);return L};C.a=w},function(z,C,x){"use strict";var k=x(0),w=function(T,L){if(L===void 0&&(L=[]),!Object(k.a)(T))L.push(T);else for(var P=0;P<T.length;P+=1)w(T[P],L);return L};C.a=w},function(z,C,x){"use strict";var k=x(0),w=x(22),T=x(23),L=function(P){var p=P.filter(function(O){return!isNaN(O)});if(!p.length)return{min:0,max:0};if(Object(k.a)(P[0])){for(var m=[],S=0;S<P.length;S++)m=m.concat(P[S]);p=m}var y=Object(w.a)(p),g=Object(T.a)(p);return{min:g,max:y}};C.a=L},function(z,C,x){"use strict";var k=Array.prototype,w=k.splice,T=k.indexOf,L=function(P){for(var p=[],m=1;m<arguments.length;m++)p[m-1]=arguments[m];for(var S=0;S<p.length;S++)for(var y=p[S],g=-1;(g=T.call(P,y))>-1;)w.call(P,g,1);return P};C.a=L},function(z,C,x){"use strict";var k=x(1),w=x(24),T=function(L,P){var p=[];if(!Object(k.a)(L))return p;for(var m=-1,S=[],y=L.length;++m<y;){var g=L[m];P(g,m,L)&&(p.push(g),S.push(m))}return Object(w.a)(L,S),p};C.a=T},function(z,C,x){"use strict";var k=x(0),w=x(4),T=x(2);function L(P,p){var m;if(Object(T.a)(p))m=function(y,g){return p(y)-p(g)};else{var S=[];Object(w.a)(p)?S.push(p):Object(k.a)(p)&&(S=p),m=function(y,g){for(var O=0;O<S.length;O+=1){var E=S[O];if(y[E]>g[E])return 1;if(y[E]<g[E])return-1}return 0}}return P.sort(m),P}C.a=L},function(z,C,x){"use strict";var k=x(26),w=function(){for(var T=[],L=0;L<arguments.length;L++)T[L]=arguments[L];return Object(k.a)([].concat.apply([],T))};C.a=w},function(z,C,x){"use strict";var k=x(0),w=x(7);C.a=function(T,L){for(var P=[],p={},m=0;m<T.length;m++){var S=T[m],y=S[L];if(!Object(w.a)(y)){Object(k.a)(y)||(y=[y]);for(var g=0;g<y.length;g++){var O=y[g];p[O]||(P.push(O),p[O]=!0)}}}return P}},function(z,C,x){"use strict";C.a=w;var k=x(1);function w(T){if(Object(k.a)(T))return T[0]}},function(z,C,x){"use strict";C.a=w;var k=x(1);function w(T){if(Object(k.a)(T)){var L=T;return L[L.length-1]}}},function(z,C,x){"use strict";var k=x(0),w=x(4);function T(L,P){return Object(k.a)(L)||Object(w.a)(L)?L[0]===P:!1}C.a=T},function(z,C,x){"use strict";var k=x(0),w=x(4);function T(L,P){return Object(k.a)(L)||Object(w.a)(L)?L[L.length-1]===P:!1}C.a=T},function(z,C,x){"use strict";var k=function(w,T){for(var L=0;L<w.length;L++)if(!T(w[L],L))return!1;return!0};C.a=k},function(z,C,x){"use strict";var k=function(w,T){for(var L=0;L<w.length;L++)if(T(w[L],L))return!0;return!1};C.a=k},function(z,C,x){"use strict";var k=x(27);C.a=function(w,T){if(!T)return[w];var L=Object(k.a)(w,T),P=[];for(var p in L)P.push(L[p]);return P}},function(z,C,x){"use strict";function k(w,T){return w["_wrap_"+T]}C.a=k},function(z,C,x){"use strict";function k(w,T){if(w["_wrap_"+T])return w["_wrap_"+T];var L=function(P){w[T](P)};return w["_wrap_"+T]=L,L}C.a=k},function(z,C,x){"use strict";var k={};function w(T){var L=k[T];if(!L){for(var P=T.toString(16),p=P.length;p<6;p++)P="0"+P;L="#"+P,k[T]=L}return L}C.a=w},function(z,C,x){"use strict";var k=x(0);function w(T){var L=0,P=0,p=0,m=0;return Object(k.a)(T)?T.length===1?L=P=p=m=T[0]:T.length===2?(L=p=T[0],P=m=T[1]):T.length===3?(L=T[0],P=m=T[1],p=T[2]):(L=T[0],P=T[1],p=T[2],m=T[3]):L=P=p=m=T,{r1:L,r2:P,r3:p,r4:m}}C.a=w},function(z,C,x){"use strict";var k=function(w,T,L){return w<T?T:w>L?L:w};C.a=k},function(z,C,x){"use strict";var k=function(w,T){var L=T.toString(),P=L.indexOf(".");if(P===-1)return Math.round(w);var p=L.substr(P+1).length;return p>20&&(p=20),parseFloat(w.toFixed(p))};C.a=k},function(z,C,x){"use strict";var k=x(5),w=function(T){return Object(k.a)(T)&&T%1!==0};C.a=w},function(z,C,x){"use strict";var k=x(5),w=function(T){return Object(k.a)(T)&&T%2===0};C.a=w},function(z,C,x){"use strict";var k=x(5),w=Number.isInteger?Number.isInteger:function(T){return Object(k.a)(T)&&T%1===0};C.a=w},function(z,C,x){"use strict";var k=x(5),w=function(T){return Object(k.a)(T)&&T<0};C.a=w},function(z,C,x){"use strict";C.a=w;var k=1e-5;function w(T,L,P){return P===void 0&&(P=k),Math.abs(T-L)<P}},function(z,C,x){"use strict";var k=x(5),w=function(T){return Object(k.a)(T)&&T%2!==0};C.a=w},function(z,C,x){"use strict";var k=x(5),w=function(T){return Object(k.a)(T)&&T>0};C.a=w},function(z,C,x){"use strict";var k=x(0),w=x(2);C.a=function(T,L){if(Object(k.a)(T)){for(var P,p=-1/0,m=0;m<T.length;m++){var S=T[m],y=Object(w.a)(L)?L(S):S[L];y>p&&(P=S,p=y)}return P}}},function(z,C,x){"use strict";var k=x(0),w=x(2);C.a=function(T,L){if(Object(k.a)(T)){for(var P,p=1/0,m=0;m<T.length;m++){var S=T[m],y=Object(w.a)(L)?L(S):S[L];y<p&&(P=S,p=y)}return P}}},function(z,C,x){"use strict";var k=function(w,T){return(w%T+T)%T};C.a=k},function(z,C,x){"use strict";var k=180/Math.PI,w=function(T){return k*T};C.a=w},function(z,C,x){"use strict";C.a=parseInt},function(z,C,x){"use strict";var k=Math.PI/180,w=function(T){return k*T};C.a=w},function(z,C,x){"use strict";var k=x(8);C.a=k.a},function(z,C,x){"use strict";var k=x(29);C.a=k.a},function(z,C,x){"use strict";var k=x(13),w=x(15);C.a=function(T,L){return Object(k.a)(Object(w.a)(T),L)}},function(z,C,x){"use strict";var k=x(9),w=function(T){return Object(k.a)(T).toLowerCase()};C.a=w},function(z,C,x){"use strict";var k=x(9),w=function(T){var L=Object(k.a)(T);return L.charAt(0).toLowerCase()+L.substring(1)};C.a=w},function(z,C,x){"use strict";function k(w,T){return!w||!T?w:w.replace(/\\?\{([^{}]+)\}/g,function(L,P){return L.charAt(0)==="\\"?L.slice(1):T[P]===void 0?"":T[P]})}C.a=k},function(z,C,x){"use strict";var k=x(9),w=function(T){return Object(k.a)(T).toUpperCase()};C.a=w},function(z,C,x){"use strict";var k=x(9),w=function(T){var L=Object(k.a)(T);return L.charAt(0).toUpperCase()+L.substring(1)};C.a=w},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"Arguments")};C.a=w},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"Boolean")};C.a=w},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"Date")};C.a=w},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"Error")};C.a=w},function(z,C,x){"use strict";var k=x(5);C.a=function(w){return Object(k.a)(w)&&isFinite(w)}},function(z,C,x){"use strict";var k=function(w){return w===null};C.a=k},function(z,C,x){"use strict";var k=x(3),w=function(T){return Object(k.a)(T,"RegExp")};C.a=w},function(z,C,x){"use strict";var k=function(w){return w===void 0};C.a=k},function(z,C,x){"use strict";var k=function(w){return w instanceof Element||w instanceof HTMLDocument};C.a=k},function(z,C,x){"use strict";C.a=k;function k(w){var T=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(L){return setTimeout(L,16)};return T(w)}},function(z,C,x){"use strict";C.a=k;function k(w){var T=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;T(w)}},function(z,C,x){"use strict";var k=x(16),w=x(2),T=function(){for(var L=[],P=0;P<arguments.length;P++)L[P]=arguments[P];for(var p=L[0],m=1;m<L.length;m++){var S=L[m];Object(w.a)(S)&&(S=S.prototype),Object(k.a)(p.prototype,S)}};C.a=T},function(z,C,x){"use strict";var k=x(0),w=function(T){if(typeof T!="object"||T===null)return T;var L;if(Object(k.a)(T)){L=[];for(var P=0,p=T.length;P<p;P++)typeof T[P]=="object"&&T[P]!=null?L[P]=w(T[P]):L[P]=T[P]}else{L={};for(var m in T)typeof T[m]=="object"&&T[m]!=null?L[m]=w(T[m]):L[m]=T[m]}return L};C.a=w},function(z,C,x){"use strict";function k(w,T,L){var P;return function(){var p=this,m=arguments,S=function(){P=null,L||w.apply(p,m)},y=L&&!P;clearTimeout(P),P=setTimeout(S,T),y&&w.apply(p,m)}}C.a=k},function(z,C,x){"use strict";var k=x(0),w=x(10),T=5;function L(p,m,S,y){S=S||0,y=y||T;for(var g in m)if(m.hasOwnProperty(g)){var O=m[g];O!==null&&Object(w.a)(O)?(Object(w.a)(p[g])||(p[g]={}),S<y?L(p[g],O,S+1,y):p[g]=m[g]):Object(k.a)(O)?(p[g]=[],p[g]=p[g].concat(O)):O!==void 0&&(p[g]=O)}}var P=function(p){for(var m=[],S=1;S<arguments.length;S++)m[S-1]=arguments[S];for(var y=0;y<m.length;y+=1)L(p,m[y]);return p};C.a=P},function(z,C,x){"use strict";var k=x(16),w=x(2),T=function(L,P,p,m){Object(w.a)(P)||(p=P,P=L,L=function(){});var S=Object.create?function(g,O){return Object.create(g,{constructor:{value:O}})}:function(g,O){function E(){}E.prototype=g;var D=new E;return D.constructor=O,D},y=S(P.prototype,L);return L.prototype=Object(k.a)(y,L.prototype),L.superclass=S(P.prototype,P),Object(k.a)(y,p),Object(k.a)(L,m),L};C.a=T},function(z,C,x){"use strict";var k=x(1),w=function(T,L){if(!Object(k.a)(T))return-1;var P=Array.prototype.indexOf;if(P)return P.call(T,L);for(var p=-1,m=0;m<T.length;m++)if(T[m]===L){p=m;break}return p};C.a=w},function(z,C,x){"use strict";var k=x(7),w=x(1),T=x(30),L=x(31),P=Object.prototype.hasOwnProperty;function p(m){if(Object(k.a)(m))return!0;if(Object(w.a)(m))return!m.length;var S=Object(T.a)(m);if(S==="Map"||S==="Set")return!m.size;if(Object(L.a)(m))return!Object.keys(m).length;for(var y in m)if(P.call(m,y))return!1;return!0}C.a=p},function(z,C,x){"use strict";var k=x(2),w=x(33);C.a=function(T,L,P){return Object(k.a)(P)?!!P(T,L):Object(w.a)(T,L)}},function(z,C,x){"use strict";var k=x(1),w=function(T,L){if(!Object(k.a)(T))return T;for(var P=[],p=0;p<T.length;p++){var m=T[p];P.push(L(m,p))}return P};C.a=w},function(z,C,x){"use strict";var k=x(7),w=x(12),T=function(L){return L};C.a=function(L,P){P===void 0&&(P=T);var p={};return Object(w.a)(L)&&!Object(k.a)(L)&&Object.keys(L).forEach(function(m){p[m]=P(L[m],m)}),p}},function(z,C,x){"use strict";var k=x(4);C.a=function(w,T,L){for(var P=0,p=Object(k.a)(T)?T.split("."):T;w&&P<p.length;)w=w[p[P++]];return w===void 0||P<p.length?L:w}},function(z,C,x){"use strict";var k=x(12),w=x(4),T=x(5);C.a=function(L,P,p){var m=L,S=Object(w.a)(P)?P.split("."):P;return S.forEach(function(y,g){g<S.length-1?(Object(k.a)(m[y])||(m[y]=Object(T.a)(S[g+1])?[]:{}),m=m[y]):m[y]=p}),L}},function(z,C,x){"use strict";var k=x(8),w=x(10),T=Object.prototype.hasOwnProperty;C.a=function(L,P){if(L===null||!Object(w.a)(L))return{};var p={};return Object(k.a)(P,function(m){T.call(L,m)&&(p[m]=L[m])}),p}},function(z,C,x){"use strict";var k=x(25);C.a=function(w,T){return Object(k.a)(w,function(L,P,p){return T.includes(p)||(L[p]=P),L},{})}},function(z,C,x){"use strict";C.a=function(k,w,T){var L,P,p,m,S=0;T||(T={});var y=function(){S=T.leading===!1?0:Date.now(),L=null,m=k.apply(P,p),L||(P=p=null)},g=function(){var O=Date.now();!S&&T.leading===!1&&(S=O);var E=w-(O-S);return P=this,p=arguments,E<=0||E>w?(L&&(clearTimeout(L),L=null),S=O,m=k.apply(P,p),L||(P=p=null)):!L&&T.trailing!==!1&&(L=setTimeout(y,E)),m};return g.cancel=function(){clearTimeout(L),S=0,L=P=p=null},g}},function(z,C,x){"use strict";var k=x(1);C.a=function(w){return Object(k.a)(w)?Array.prototype.slice.call(w):[]}},function(z,C,x){"use strict";var k={};C.a=function(w){return w=w||"g",k[w]?k[w]+=1:k[w]=1,w+k[w]}},function(z,C,x){"use strict";C.a=function(){}},function(z,C,x){"use strict";C.a=function(k){return k}},function(z,C,x){"use strict";C.a=T;var k=x(7),w=x(1);function T(L){return Object(k.a)(L)?0:Object(w.a)(L)?L.length:Object.keys(L).length}},function(z,C,x){"use strict";C.a=U;var k=function(Ct,rt){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,Tt){ot.__proto__=Tt}||function(ot,Tt){for(var Rt in Tt)Object.prototype.hasOwnProperty.call(Tt,Rt)&&(ot[Rt]=Tt[Rt])},k(Ct,rt)};function w(Ct,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");k(Ct,rt);function ot(){this.constructor=Ct}Ct.prototype=rt===null?Object.create(rt):(ot.prototype=rt.prototype,new ot)}var T=function(){return T=Object.assign||function(rt){for(var ot,Tt=1,Rt=arguments.length;Tt<Rt;Tt++){ot=arguments[Tt];for(var st in ot)Object.prototype.hasOwnProperty.call(ot,st)&&(rt[st]=ot[st])}return rt},T.apply(this,arguments)};function L(Ct,rt){var ot={};for(var Tt in Ct)Object.prototype.hasOwnProperty.call(Ct,Tt)&&rt.indexOf(Tt)<0&&(ot[Tt]=Ct[Tt]);if(Ct!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Rt=0,Tt=Object.getOwnPropertySymbols(Ct);Rt<Tt.length;Rt++)rt.indexOf(Tt[Rt])<0&&Object.prototype.propertyIsEnumerable.call(Ct,Tt[Rt])&&(ot[Tt[Rt]]=Ct[Tt[Rt]]);return ot}function P(Ct,rt,ot,Tt){var Rt=arguments.length,st=Rt<3?rt:Tt===null?Tt=Object.getOwnPropertyDescriptor(rt,ot):Tt,bt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(Ct,rt,ot,Tt);else for(var Ft=Ct.length-1;Ft>=0;Ft--)(bt=Ct[Ft])&&(st=(Rt<3?bt(st):Rt>3?bt(rt,ot,st):bt(rt,ot))||st);return Rt>3&&st&&Object.defineProperty(rt,ot,st),st}function p(Ct,rt){return function(ot,Tt){rt(ot,Tt,Ct)}}function m(Ct,rt,ot,Tt,Rt,st){function bt(te){if(te!==void 0&&typeof te!="function")throw new TypeError("Function expected");return te}for(var Ft=Tt.kind,Ht=Ft==="getter"?"get":Ft==="setter"?"set":"value",_t=!rt&&Ct?Tt.static?Ct:Ct.prototype:null,Xt=rt||(_t?Object.getOwnPropertyDescriptor(_t,Tt.name):{}),ee,se=!1,ue=ot.length-1;ue>=0;ue--){var Ut={};for(var oe in Tt)Ut[oe]=oe==="access"?{}:Tt[oe];for(var oe in Tt.access)Ut.access[oe]=Tt.access[oe];Ut.addInitializer=function(te){if(se)throw new TypeError("Cannot add initializers after decoration has completed");st.push(bt(te||null))};var Pe=(0,ot[ue])(Ft==="accessor"?{get:Xt.get,set:Xt.set}:Xt[Ht],Ut);if(Ft==="accessor"){if(Pe===void 0)continue;if(Pe===null||typeof Pe!="object")throw new TypeError("Object expected");(ee=bt(Pe.get))&&(Xt.get=ee),(ee=bt(Pe.set))&&(Xt.set=ee),(ee=bt(Pe.init))&&Rt.push(ee)}else(ee=bt(Pe))&&(Ft==="field"?Rt.push(ee):Xt[Ht]=ee)}_t&&Object.defineProperty(_t,Tt.name,Xt),se=!0}function S(Ct,rt,ot){for(var Tt=arguments.length>2,Rt=0;Rt<rt.length;Rt++)ot=Tt?rt[Rt].call(Ct,ot):rt[Rt].call(Ct);return Tt?ot:void 0}function y(Ct){return typeof Ct=="symbol"?Ct:"".concat(Ct)}function g(Ct,rt,ot){return typeof rt=="symbol"&&(rt=rt.description?"[".concat(rt.description,"]"):""),Object.defineProperty(Ct,"name",{configurable:!0,value:ot?"".concat(ot," ",rt):rt})}function O(Ct,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Ct,rt)}function E(Ct,rt,ot,Tt){function Rt(st){return st instanceof ot?st:new ot(function(bt){bt(st)})}return new(ot||(ot=Promise))(function(st,bt){function Ft(Xt){try{_t(Tt.next(Xt))}catch(ee){bt(ee)}}function Ht(Xt){try{_t(Tt.throw(Xt))}catch(ee){bt(ee)}}function _t(Xt){Xt.done?st(Xt.value):Rt(Xt.value).then(Ft,Ht)}_t((Tt=Tt.apply(Ct,rt||[])).next())})}function D(Ct,rt){var ot={label:0,sent:function(){if(st[0]&1)throw st[1];return st[1]},trys:[],ops:[]},Tt,Rt,st,bt;return bt={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(bt[Symbol.iterator]=function(){return this}),bt;function Ft(_t){return function(Xt){return Ht([_t,Xt])}}function Ht(_t){if(Tt)throw new TypeError("Generator is already executing.");for(;bt&&(bt=0,_t[0]&&(ot=0)),ot;)try{if(Tt=1,Rt&&(st=_t[0]&2?Rt.return:_t[0]?Rt.throw||((st=Rt.return)&&st.call(Rt),0):Rt.next)&&!(st=st.call(Rt,_t[1])).done)return st;switch(Rt=0,st&&(_t=[_t[0]&2,st.value]),_t[0]){case 0:case 1:st=_t;break;case 4:return ot.label++,{value:_t[1],done:!1};case 5:ot.label++,Rt=_t[1],_t=[0];continue;case 7:_t=ot.ops.pop(),ot.trys.pop();continue;default:if(st=ot.trys,!(st=st.length>0&&st[st.length-1])&&(_t[0]===6||_t[0]===2)){ot=0;continue}if(_t[0]===3&&(!st||_t[1]>st[0]&&_t[1]<st[3])){ot.label=_t[1];break}if(_t[0]===6&&ot.label<st[1]){ot.label=st[1],st=_t;break}if(st&&ot.label<st[2]){ot.label=st[2],ot.ops.push(_t);break}st[2]&&ot.ops.pop(),ot.trys.pop();continue}_t=rt.call(Ct,ot)}catch(Xt){_t=[6,Xt],Rt=0}finally{Tt=st=0}if(_t[0]&5)throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}}var F=Object.create?function(Ct,rt,ot,Tt){Tt===void 0&&(Tt=ot);var Rt=Object.getOwnPropertyDescriptor(rt,ot);(!Rt||("get"in Rt?!rt.__esModule:Rt.writable||Rt.configurable))&&(Rt={enumerable:!0,get:function(){return rt[ot]}}),Object.defineProperty(Ct,Tt,Rt)}:function(Ct,rt,ot,Tt){Tt===void 0&&(Tt=ot),Ct[Tt]=rt[ot]};function W(Ct,rt){for(var ot in Ct)ot!=="default"&&!Object.prototype.hasOwnProperty.call(rt,ot)&&F(rt,Ct,ot)}function b(Ct){var rt=typeof Symbol=="function"&&Symbol.iterator,ot=rt&&Ct[rt],Tt=0;if(ot)return ot.call(Ct);if(Ct&&typeof Ct.length=="number")return{next:function(){return Ct&&Tt>=Ct.length&&(Ct=void 0),{value:Ct&&Ct[Tt++],done:!Ct}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(Ct,rt){var ot=typeof Symbol=="function"&&Ct[Symbol.iterator];if(!ot)return Ct;var Tt=ot.call(Ct),Rt,st=[],bt;try{for(;(rt===void 0||rt-- >0)&&!(Rt=Tt.next()).done;)st.push(Rt.value)}catch(Ft){bt={error:Ft}}finally{try{Rt&&!Rt.done&&(ot=Tt.return)&&ot.call(Tt)}finally{if(bt)throw bt.error}}return st}function K(){for(var Ct=[],rt=0;rt<arguments.length;rt++)Ct=Ct.concat(h(arguments[rt]));return Ct}function U(){for(var Ct=0,rt=0,ot=arguments.length;rt<ot;rt++)Ct+=arguments[rt].length;for(var Tt=Array(Ct),Rt=0,rt=0;rt<ot;rt++)for(var st=arguments[rt],bt=0,Ft=st.length;bt<Ft;bt++,Rt++)Tt[Rt]=st[bt];return Tt}function Y(Ct,rt,ot){if(ot||arguments.length===2)for(var Tt=0,Rt=rt.length,st;Tt<Rt;Tt++)(st||!(Tt in rt))&&(st||(st=Array.prototype.slice.call(rt,0,Tt)),st[Tt]=rt[Tt]);return Ct.concat(st||Array.prototype.slice.call(rt))}function Z(Ct){return this instanceof Z?(this.v=Ct,this):new Z(Ct)}function H(Ct,rt,ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Tt=ot.apply(Ct,rt||[]),Rt,st=[];return Rt={},bt("next"),bt("throw"),bt("return"),Rt[Symbol.asyncIterator]=function(){return this},Rt;function bt(se){Tt[se]&&(Rt[se]=function(ue){return new Promise(function(Ut,oe){st.push([se,ue,Ut,oe])>1||Ft(se,ue)})})}function Ft(se,ue){try{Ht(Tt[se](ue))}catch(Ut){ee(st[0][3],Ut)}}function Ht(se){se.value instanceof Z?Promise.resolve(se.value.v).then(_t,Xt):ee(st[0][2],se)}function _t(se){Ft("next",se)}function Xt(se){Ft("throw",se)}function ee(se,ue){se(ue),st.shift(),st.length&&Ft(st[0][0],st[0][1])}}function q(Ct){var rt,ot;return rt={},Tt("next"),Tt("throw",function(Rt){throw Rt}),Tt("return"),rt[Symbol.iterator]=function(){return this},rt;function Tt(Rt,st){rt[Rt]=Ct[Rt]?function(bt){return(ot=!ot)?{value:Z(Ct[Rt](bt)),done:!1}:st?st(bt):bt}:st}}function Q(Ct){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=Ct[Symbol.asyncIterator],ot;return rt?rt.call(Ct):(Ct=typeof b=="function"?b(Ct):Ct[Symbol.iterator](),ot={},Tt("next"),Tt("throw"),Tt("return"),ot[Symbol.asyncIterator]=function(){return this},ot);function Tt(st){ot[st]=Ct[st]&&function(bt){return new Promise(function(Ft,Ht){bt=Ct[st](bt),Rt(Ft,Ht,bt.done,bt.value)})}}function Rt(st,bt,Ft,Ht){Promise.resolve(Ht).then(function(_t){st({value:_t,done:Ft})},bt)}}function J(Ct,rt){return Object.defineProperty?Object.defineProperty(Ct,"raw",{value:rt}):Ct.raw=rt,Ct}var ft=Object.create?function(Ct,rt){Object.defineProperty(Ct,"default",{enumerable:!0,value:rt})}:function(Ct,rt){Ct.default=rt};function nt(Ct){if(Ct&&Ct.__esModule)return Ct;var rt={};if(Ct!=null)for(var ot in Ct)ot!=="default"&&Object.prototype.hasOwnProperty.call(Ct,ot)&&F(rt,Ct,ot);return ft(rt,Ct),rt}function yt(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}}function gt(Ct,rt,ot,Tt){if(ot==="a"&&!Tt)throw new TypeError("Private accessor was defined without a getter");if(typeof rt=="function"?Ct!==rt||!Tt:!rt.has(Ct))throw new TypeError("Cannot read private member from an object whose class did not declare it");return ot==="m"?Tt:ot==="a"?Tt.call(Ct):Tt?Tt.value:rt.get(Ct)}function zt(Ct,rt,ot,Tt,Rt){if(Tt==="m")throw new TypeError("Private method is not writable");if(Tt==="a"&&!Rt)throw new TypeError("Private accessor was defined without a setter");if(typeof rt=="function"?Ct!==rt||!Rt:!rt.has(Ct))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Tt==="a"?Rt.call(Ct,ot):Rt?Rt.value=ot:rt.set(Ct,ot),ot}function Mt(Ct,rt){if(rt===null||typeof rt!="object"&&typeof rt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Ct=="function"?rt===Ct:Ct.has(rt)}},function(z,C,x){"use strict";var k=x(4),w=x(9),T=x(34);C.a=function(L,P,p,m){m===void 0&&(m="...");var S=16,y=Object(T.a)(m,p),g=Object(k.a)(L)?L:Object(w.a)(L),O=P,E=[],D,F;if(Object(T.a)(L,p)<=P)return L;for(;D=g.substr(0,S),F=Object(T.a)(D,p),!(F+y>O&&F>O);)if(E.push(D),O-=F,g=g.substr(S),!g)return E.join("");for(;D=g.substr(0,1),F=Object(T.a)(D,p),!(F+y>O);)if(E.push(D),O-=F,g=g.substr(1),!g)return E.join("");return""+E.join("")+m}},function(z,C,x){"use strict";var k=function(){function w(){this.map={}}return w.prototype.has=function(T){return this.map[T]!==void 0},w.prototype.get=function(T,L){var P=this.map[T];return P===void 0?L:P},w.prototype.set=function(T,L){this.map[T]=L},w.prototype.clear=function(){this.map={}},w.prototype.delete=function(T){delete this.map[T]},w.prototype.size=function(){return Object.keys(this.map).length},w}();C.a=k},function(z,C){function x(p,m,S,y){y===void 0&&(y=[]);var g=this;g.w=p||0,g.h=m||0,g.y=S||0,g.x=0,g.c=y||[],g.cs=y.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}x.fromNode=function(p,m){if(!p)return null;var S=[];return p.children.forEach(function(y){S.push(x.fromNode(y,m))}),m?new x(p.height,p.width,p.x,S):new x(p.width,p.height,p.y,S)};function k(p,m,S){S?p.y+=m:p.x+=m,p.children.forEach(function(y){k(y,m,S)})}function w(p,m){var S=m?p.y:p.x;return p.children.forEach(function(y){S=Math.min(w(y,m),S)}),S}function T(p,m){var S=w(p,m);k(p,-S,m)}function L(p,m,S){S?m.y=p.x:m.x=p.x,p.c.forEach(function(y,g){L(y,m.children[g],S)})}function P(p,m,S){S===void 0&&(S=0),m?(p.x=S,S+=p.width):(p.y=S,S+=p.height),p.children.forEach(function(y){P(y,m,S)})}z.exports=function(p,m){m===void 0&&(m={});var S=m.isHorizontal;function y(Q){if(Q.cs===0){g(Q);return}y(Q.c[0]);for(var J=H(W(Q.c[0].el),0,null),ft=1;ft<Q.cs;++ft){y(Q.c[ft]);var nt=W(Q.c[ft].er);O(Q,ft,J),J=H(nt,ft,J)}K(Q),g(Q)}function g(Q){Q.cs===0?(Q.el=Q,Q.er=Q,Q.msel=Q.mser=0):(Q.el=Q.c[0].el,Q.msel=Q.c[0].msel,Q.er=Q.c[Q.cs-1].er,Q.mser=Q.c[Q.cs-1].mser)}function O(Q,J,ft){for(var nt=Q.c[J-1],yt=nt.mod,gt=Q.c[J],zt=gt.mod;nt!==null&&gt!==null;){W(nt)>ft.low&&(ft=ft.nxt);var Mt=yt+nt.prelim+nt.w-(zt+gt.prelim);Mt>0&&(zt+=Mt,E(Q,J,ft.index,Mt));var Ct=W(nt),rt=W(gt);Ct<=rt&&(nt=F(nt),nt!==null&&(yt+=nt.mod)),Ct>=rt&&(gt=D(gt),gt!==null&&(zt+=gt.mod))}!nt&&gt?b(Q,J,gt,zt):nt&&!gt&&h(Q,J,nt,yt)}function E(Q,J,ft,nt){Q.c[J].mod+=nt,Q.c[J].msel+=nt,Q.c[J].mser+=nt,Y(Q,J,ft,nt)}function D(Q){return Q.cs===0?Q.tl:Q.c[0]}function F(Q){return Q.cs===0?Q.tr:Q.c[Q.cs-1]}function W(Q){return Q.y+Q.h}function b(Q,J,ft,nt){var yt=Q.c[0].el;yt.tl=ft;var gt=nt-ft.mod-Q.c[0].msel;yt.mod+=gt,yt.prelim-=gt,Q.c[0].el=Q.c[J].el,Q.c[0].msel=Q.c[J].msel}function h(Q,J,ft,nt){var yt=Q.c[J].er;yt.tr=ft;var gt=nt-ft.mod-Q.c[J].mser;yt.mod+=gt,yt.prelim-=gt,Q.c[J].er=Q.c[J-1].er,Q.c[J].mser=Q.c[J-1].mser}function K(Q){Q.prelim=(Q.c[0].prelim+Q.c[0].mod+Q.c[Q.cs-1].mod+Q.c[Q.cs-1].prelim+Q.c[Q.cs-1].w)/2-Q.w/2}function U(Q,J){J+=Q.mod,Q.x=Q.prelim+J,Z(Q);for(var ft=0;ft<Q.cs;ft++)U(Q.c[ft],J)}function Y(Q,J,ft,nt){if(ft!==J-1){var yt=J-ft;Q.c[ft+1].shift+=nt/yt,Q.c[J].shift-=nt/yt,Q.c[J].change-=nt-nt/yt}}function Z(Q){for(var J=0,ft=0,nt=0;nt<Q.cs;nt++)J+=Q.c[nt].shift,ft+=J+Q.c[nt].change,Q.c[nt].mod+=ft}function H(Q,J,ft){for(;ft!==null&&Q>=ft.low;)ft=ft.nxt;return{low:Q,index:J,nxt:ft}}P(p,S);var q=x.fromNode(p,S);return y(q),U(q,0),L(q,p,S),T(p,S),p}},function(z,C,x){function k(g,O){g.prototype=Object.create(O.prototype),g.prototype.constructor=g,w(g,O)}function w(g,O){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,F){return D.__proto__=F,D},w(g,O)}var T=x(11),L=x(121),P=x(17),p=x(6),m=function(g){k(O,g);function O(){return g.apply(this,arguments)||this}var E=O.prototype;return E.execute=function(){var F=this;return F.rootNode.width=0,P(F.rootNode,F.options,L)},O}(T),S={};function y(g,O){return O=p.assign({},S,O),new m(g,O).execute()}z.exports=y},function(z,C,x){var k=x(6);function w(P,p){P===void 0&&(P=0),p===void 0&&(p=[]);var m=this;m.x=m.y=0,m.leftChild=m.rightChild=null,m.height=0,m.children=p}var T={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function L(P,p,m){m?(p.x=P.x,p.y=P.y):(p.x=P.y,p.y=P.x),P.children.forEach(function(S,y){L(S,p.children[y],m)})}z.exports=function(P,p){p===void 0&&(p={}),p=k.assign({},T,p);var m=0;function S(D){if(!D)return null;D.width=0,D.depth&&D.depth>m&&(m=D.depth);var F=D.children,W=F.length,b=new w(D.height,[]);return F.forEach(function(h,K){var U=S(h);b.children.push(U),K===0&&(b.leftChild=U),K===W-1&&(b.rightChild=U)}),b.originNode=D,b.isLeaf=D.isLeaf(),b}function y(D){if(D.isLeaf||D.children.length===0)D.drawingDepth=m;else{var F=D.children.map(function(b){return y(b)}),W=Math.min.apply(null,F);D.drawingDepth=W-1}return D.drawingDepth}var g;function O(D){D.x=D.drawingDepth*p.rankSep,D.isLeaf?(D.y=0,g&&(D.y=g.y+g.height+p.nodeSep,D.originNode.parent!==g.originNode.parent&&(D.y+=p.subTreeSep)),g=D):(D.children.forEach(function(F){O(F)}),D.y=(D.leftChild.y+D.rightChild.y)/2)}var E=S(P);return y(E),O(E),L(E,P,p.isHorizontal),P}},function(z,C,x){function k(E,D){E.prototype=Object.create(D.prototype),E.prototype.constructor=E,w(E,D)}function w(E,D){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,b){return W.__proto__=b,W},w(E,D)}var T=x(11),L=x(123),P=x(35),p=x(6),m=["LR","RL","H"],S=m[0],y=function(E){k(D,E);function D(){return E.apply(this,arguments)||this}var F=D.prototype;return F.execute=function(){var b=this,h=b.options,K=b.rootNode;h.isHorizontal=!0;var U=h.indent,Y=U===void 0?20:U,Z=h.dropCap,H=Z===void 0?!0:Z,q=h.direction,Q=q===void 0?S:q,J=h.align;if(Q&&m.indexOf(Q)===-1)throw new TypeError("Invalid direction: "+Q);if(Q===m[0])L(K,Y,H,J);else if(Q===m[1])L(K,Y,H,J),K.right2left();else if(Q===m[2]){var ft=P(K,h),nt=ft.left,yt=ft.right;L(nt,Y,H,J),nt.right2left(),L(yt,Y,H,J);var gt=nt.getBoundingBox();yt.translate(gt.width,0),K.x=yt.x-K.width/2}return K},D}(T),g={};function O(E,D){return D=p.assign({},g,D),new y(E,D).execute()}z.exports=O},function(z,C,x){var k=x(6);function w(T,L,P,p,m){var S=typeof P=="function"?P(T):P*T.depth;if(!p)try{if(T.id===T.parent.children[0].id){T.x+=S,T.y=L?L.y:0;return}}catch(O){}if(T.x+=S,L){if(T.y=L.y+k.getHeight(L,T,m),L.parent&&T.parent.id!==L.parent.id){var y=L.parent,g=y.y+k.getHeight(y,T,m);T.y=g>T.y?g:T.y}}else T.y=0}z.exports=function(T,L,P,p){var m=null;T.eachNode(function(S){w(S,m,L,P,p),m=S})}},function(z,C,x){function k(g,O){g.prototype=Object.create(O.prototype),g.prototype.constructor=g,w(g,O)}function w(g,O){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,F){return D.__proto__=F,D},w(g,O)}var T=x(11),L=x(125),P=x(17),p=x(6),m=function(g){k(O,g);function O(){return g.apply(this,arguments)||this}var E=O.prototype;return E.execute=function(){var F=this;return P(F.rootNode,F.options,L)},O}(T),S={};function y(g,O){return O=p.assign({},S,O),new m(g,O).execute()}z.exports=y},function(z,C,x){var k=x(6);function w(P,p){var m=0;return P.children.length?P.children.forEach(function(S){m+=w(S,p)}):m=P.height,P._subTreeSep=p.getSubTreeSep(P.data),P.totalHeight=Math.max(P.height,m)+2*P._subTreeSep,P.totalHeight}function T(P){var p=P.children,m=p.length;if(m){p.forEach(function(D){T(D)});var S=p[0],y=p[m-1],g=y.y-S.y+y.height,O=0;if(p.forEach(function(D){O+=D.totalHeight}),g>P.height)P.y=S.y+g/2-P.height/2;else if(p.length!==1||P.height>O){var E=P.y+(P.height-g)/2-S.y;p.forEach(function(D){D.translate(0,E)})}else P.y=(S.y+S.height/2+y.y+y.height/2)/2-P.height/2}}var L={getSubTreeSep:function(){return 0}};z.exports=function(P,p){p===void 0&&(p={}),p=k.assign({},L,p),P.parent={x:0,width:0,height:0,y:0},P.BFTraverse(function(m){m.x=m.parent.x+m.parent.width}),P.parent=null,w(P,p),P.startY=0,P.y=P.totalHeight/2-P.height/2,P.eachNode(function(m){var S=m.children,y=S.length;if(y){var g=S[0];if(g.startY=m.startY+m._subTreeSep,y===1)g.y=m.y+m.height/2-g.height/2;else{g.y=g.startY+g.totalHeight/2-g.height/2;for(var O=1;O<y;O++){var E=S[O];E.startY=S[O-1].startY+S[O-1].totalHeight,E.y=E.startY+E.totalHeight/2-E.height/2}}}}),T(P)}}])})},483360:function(He,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(T,L,P,p){p===void 0&&(p=P);var m=Object.getOwnPropertyDescriptor(L,P);(!m||("get"in m?!L.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return L[P]}}),Object.defineProperty(T,p,m)}:function(T,L,P,p){p===void 0&&(p=P),T[p]=L[P]}),k=this&&this.__exportStar||function(T,L){for(var P in T)P!=="default"&&!Object.prototype.hasOwnProperty.call(L,P)&&x(L,T,P)};Object.defineProperty(z,"__esModule",{value:!0}),z.getLayoutByName=z.unRegisterLayout=z.registerLayout=void 0;var w=C(695326);Object.defineProperty(z,"registerLayout",{enumerable:!0,get:function(){return w.registerLayout}}),Object.defineProperty(z,"unRegisterLayout",{enumerable:!0,get:function(){return w.unRegisterLayout}}),Object.defineProperty(z,"getLayoutByName",{enumerable:!0,get:function(){return w.getLayoutByName}}),k(C(702584),z)},762329:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.Base=void 0;var C=function(){function x(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return x.prototype.layout=function(k){return this.init(k),this.execute(!0)},x.prototype.init=function(k){this.nodes=k.nodes||[],this.edges=k.edges||[],this.combos=k.combos||[],this.comboEdges=k.comboEdges||[],this.hiddenNodes=k.hiddenNodes||[],this.hiddenEdges=k.hiddenEdges||[],this.hiddenCombos=k.hiddenCombos||[],this.vedges=k.vedges||[]},x.prototype.execute=function(k){},x.prototype.executeWithWorker=function(){},x.prototype.getDefaultCfg=function(){return{}},x.prototype.updateCfg=function(k){k&&Object.assign(this,k)},x.prototype.getType=function(){return"base"},x.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},x}();z.Base=C},964885:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var m=function(S,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(g[E]=O[E])},m(S,y)};return function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(S,y);function g(){this.constructor=S}S.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.CircularLayout=void 0;var k=C(762329),w=C(449784);function T(m,S,y,g){m.forEach(function(O,E){m[E].children=[],m[E].parent=[]}),g?S.forEach(function(O){var E=(0,w.getEdgeTerminal)(O,"source"),D=(0,w.getEdgeTerminal)(O,"target"),F=0;E&&(F=y[E]);var W=0;D&&(W=y[D]);var b=m[F].children,h=m[W].parent;b.push(m[W].id),h.push(m[F].id)}):S.forEach(function(O){var E=(0,w.getEdgeTerminal)(O,"source"),D=(0,w.getEdgeTerminal)(O,"target"),F=0;E&&(F=y[E]);var W=0;D&&(W=y[D]);var b=m[F].children,h=m[W].children;b.push(m[W].id),h.push(m[F].id)})}function L(m,S,y){for(var g=y.length,O=0;O<g;O++){var E=(0,w.getEdgeTerminal)(y[O],"source"),D=(0,w.getEdgeTerminal)(y[O],"target");if(m.id===E&&S.id===D||S.id===E&&m.id===D)return!0}return!1}function P(m,S){var y=m.degree,g=S.degree;return y<g?-1:y>g?1:0}var p=function(m){x(S,m);function S(y){var g=m.call(this)||this;return g.radius=null,g.nodeSize=void 0,g.startRadius=null,g.endRadius=null,g.startAngle=0,g.endAngle=2*Math.PI,g.clockwise=!0,g.divisions=1,g.ordering=null,g.angleRatio=1,g.nodes=[],g.edges=[],g.nodeMap={},g.degrees=[],g.width=300,g.height=300,g.updateCfg(y),g}return S.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},S.prototype.execute=function(){var y,g=this,O=g.nodes,E=g.edges,D=O.length;if(D===0){g.onLayoutEnd&&g.onLayoutEnd();return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var F=g.center;if(D===1){O[0].x=F[0],O[0].y=F[1],g.onLayoutEnd&&g.onLayoutEnd();return}var W=g.radius,b=g.startRadius,h=g.endRadius,K=g.divisions,U=g.startAngle,Y=g.endAngle,Z=g.angleRatio,H=g.ordering,q=g.clockwise,Q=g.nodeSpacing,J=g.nodeSize,ft=(Y-U)/D,nt={};O.forEach(function(Ft,Ht){nt[Ft.id]=Ht}),g.nodeMap=nt;var yt=(0,w.getDegree)(O.length,nt,E);if(g.degrees=yt,Q){var gt=(0,w.getFuncByUnknownType)(10,Q),zt=(0,w.getFuncByUnknownType)(10,J),Mt=-1/0;O.forEach(function(Ft){var Ht=zt(Ft);Mt<Ht&&(Mt=Ht)});var Ct=0;O.forEach(function(Ft,Ht){Ht===0?Ct+=Mt||10:Ct+=(gt(Ft)||0)+(Mt||10)}),W=Ct/(2*Math.PI)}else!W&&!b&&!h?W=g.height>g.width?g.width/2:g.height/2:!b&&h?b=h:b&&!h&&(h=b);var rt=ft*Z,ot=[];H==="topology"?ot=g.topologyOrdering():H==="topology-directed"?ot=g.topologyOrdering(!0):H==="degree"?ot=g.degreeOrdering():ot=O;for(var Tt=Math.ceil(D/K),Rt=0;Rt<D;++Rt){var st=W;!st&&b!==null&&h!==null&&(st=b+Rt*(h-b)/(D-1)),st||(st=10+Rt*100/(D-1));var bt=U+Rt%Tt*rt+2*Math.PI/K*Math.floor(Rt/Tt);q||(bt=Y-Rt%Tt*rt-2*Math.PI/K*Math.floor(Rt/Tt)),ot[Rt].x=F[0]+Math.cos(bt)*st,ot[Rt].y=F[1]+Math.sin(bt)*st,ot[Rt].weight=yt[Rt].all}return(y=g.onLayoutEnd)===null||y===void 0||y.call(g),{nodes:ot,edges:this.edges}},S.prototype.topologyOrdering=function(y){y===void 0&&(y=!1);var g=this,O=g.degrees,E=g.edges,D=g.nodes,F=(0,w.clone)(D),W=g.nodeMap,b=[F[0]],h=[D[0]],K=[],U=D.length;K[0]=!0,T(F,E,W,y);var Y=0;return F.forEach(function(Z,H){if(H!==0)if((H===U-1||O[H].all!==O[H+1].all||L(b[Y],Z,E))&&!K[H])b.push(Z),h.push(D[W[Z.id]]),K[H]=!0,Y++;else{for(var q=b[Y].children,Q=!1,J=0;J<q.length;J++){var ft=W[q[J]];if(O[ft].all===O[H].all&&!K[ft]){b.push(F[ft]),h.push(D[W[F[ft].id]]),K[ft]=!0,Q=!0;break}}for(var nt=0;!Q&&(K[nt]||(b.push(F[nt]),h.push(D[W[F[nt].id]]),K[nt]=!0,Q=!0),nt++,nt!==U););}}),h},S.prototype.degreeOrdering=function(){var y=this,g=y.nodes,O=[],E=y.degrees;return g.forEach(function(D,F){D.degree=E[F].all,O.push(D)}),O.sort(P),O},S.prototype.getType=function(){return"circular"},S}(k.Base);z.CircularLayout=p},263861:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var m=function(S,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(g[E]=O[E])},m(S,y)};return function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(S,y);function g(){this.constructor=S}S.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),k=this&&this.__assign||function(){return k=Object.assign||function(m){for(var S,y=1,g=arguments.length;y<g;y++){S=arguments[y];for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(m[O]=S[O])}return m},k.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0}),z.ComboCombinedLayout=void 0;var w=C(416470),T=C(762329),L=C(449784),P=C(702584),p=function(m){x(S,m);function S(y){var g=m.call(this)||this;return g.center=[0,0],g.nodes=[],g.edges=[],g.combos=[],g.comboEdges=[],g.comboPadding=10,g.comboTrees=[],g.updateCfg(y),g}return S.prototype.getDefaultCfg=function(){return{}},S.prototype.execute=function(){var y=this,g=y.nodes,O=y.center;if(!g||g.length===0){y.onLayoutEnd&&y.onLayoutEnd();return}if(g.length===1){g[0].x=O[0],g[0].y=O[1],y.onLayoutEnd&&y.onLayoutEnd();return}y.initVals(),y.run(),y.onLayoutEnd&&y.onLayoutEnd()},S.prototype.run=function(){var y,g=this,O=g.nodes,E=g.edges,D=g.combos,F=g.comboEdges,W=g.center,b={};O.forEach(function(Mt){b[Mt.id]=Mt});var h={};D.forEach(function(Mt){h[Mt.id]=Mt});var K=g.getInnerGraphs(b),U=[],Y=[],Z={},H=!0;this.comboTrees.forEach(function(Mt){var Ct=K[Mt.id],rt=k(k({},Mt),{x:Ct.x||h[Mt.id].x,y:Ct.y||h[Mt.id].y,fx:Ct.fx||h[Mt.id].fx,fy:Ct.fy||h[Mt.id].fy,mass:Ct.mass||h[Mt.id].mass,size:Ct.size});Y.push(rt),!isNaN(rt.x)&&rt.x!==0&&!isNaN(rt.y)&&rt.y!==0?H=!1:(rt.x=Math.random()*100,rt.y=Math.random()*100),U.push(Mt.id),(0,L.traverseTreeUp)(Mt,function(ot){return ot.id!==Mt.id&&(Z[ot.id]=Mt.id),!0})}),O.forEach(function(Mt){if(!(Mt.comboId&&h[Mt.comboId])){var Ct=k({},Mt);Y.push(Ct),!isNaN(Ct.x)&&Ct.x!==0&&!isNaN(Ct.y)&&Ct.y!==0?H=!1:(Ct.x=Math.random()*100,Ct.y=Math.random()*100),U.push(Mt.id)}});var q=[];if(E.concat(F).forEach(function(Mt){var Ct=Z[Mt.source]||Mt.source,rt=Z[Mt.target]||Mt.target;Ct!==rt&&U.includes(Ct)&&U.includes(rt)&&q.push({source:Ct,target:rt})}),Y!=null&&Y.length){if(Y.length===1)Y[0].x=W[0],Y[0].y=W[1];else{var Q={nodes:Y,edges:q},J=this.outerLayout||new P.GForceLayout({gravity:1,factor:4,linkDistance:function(Mt,Ct,rt){var ot,Tt,Rt=((((ot=Ct.size)===null||ot===void 0?void 0:ot[0])||30)+(((Tt=rt.size)===null||Tt===void 0?void 0:Tt[0])||30))/2;return Math.min(Rt*1.5,700)}}),ft=(y=J.getType)===null||y===void 0?void 0:y.call(J);if(J.updateCfg({center:W,kg:5,preventOverlap:!0,animate:!1}),H&&w.FORCE_LAYOUT_TYPE_MAP[ft]){var nt=Y.length<100?new P.MDSLayout:new P.GridLayout;nt.layout(Q)}J.layout(Q)}Y.forEach(function(Mt){var Ct=K[Mt.id];if(!Ct){var rt=b[Mt.id];rt&&(rt.x=Mt.x,rt.y=Mt.y);return}Ct.visited=!0,Ct.x=Mt.x,Ct.y=Mt.y,Ct.nodes.forEach(function(ot){ot.x+=Mt.x,ot.y+=Mt.y})})}for(var yt=Object.keys(K),gt=function(Mt){var Ct=yt[Mt],rt=K[Ct];if(!rt)return"continue";rt.nodes.forEach(function(ot){rt.visited||(ot.x+=rt.x||0,ot.y+=rt.y||0),b[ot.id]&&(b[ot.id].x=ot.x,b[ot.id].y=ot.y)}),h[Ct]&&(h[Ct].x=rt.x,h[Ct].y=rt.y)},zt=yt.length-1;zt>=0;zt--)gt(zt);return{nodes:O,edges:E,combos:D,comboEdges:F}},S.prototype.getInnerGraphs=function(y){var g=this,O=g.comboTrees,E=g.nodeSize,D=g.edges,F=g.comboPadding,W=g.spacing,b={},h=this.innerLayout||new P.ConcentricLayout({type:"concentric",sortBy:"id"});return h.center=[0,0],h.preventOverlap=!0,h.nodeSpacing=W,(O||[]).forEach(function(K){(0,L.traverseTreeUp)(K,function(U){var Y,Z=(F==null?void 0:F(U))||10;if((0,L.isArray)(Z)&&(Z=Math.max.apply(Math,Z)),!((Y=U.children)===null||Y===void 0)&&Y.length){var q=U.children.map(function(Tt){if(Tt.itemType==="combo")return b[Tt.id];var Rt=y[Tt.id]||{};return k(k({},Rt),Tt)}),Q=q.map(function(Tt){return Tt.id}),J={nodes:q,edges:D.filter(function(Tt){return Q.includes(Tt.source)&&Q.includes(Tt.target)})},ft=1/0;q.forEach(function(Tt){var Rt;Tt.size||(Tt.size=((Rt=b[Tt.id])===null||Rt===void 0?void 0:Rt.size)||(E==null?void 0:E(Tt))||[30,30]),(0,L.isNumber)(Tt.size)&&(Tt.size=[Tt.size,Tt.size]),ft>Tt.size[0]&&(ft=Tt.size[0]),ft>Tt.size[1]&&(ft=Tt.size[1])}),h.layout(J);var nt=(0,L.getLayoutBBox)(q),yt=nt.minX,gt=nt.minY,zt=nt.maxX,Mt=nt.maxY,Ct={x:(zt+yt)/2,y:(Mt+gt)/2};J.nodes.forEach(function(Tt){Tt.x-=Ct.x,Tt.y-=Ct.y});var rt=Math.max(zt-yt,ft)+Z*2,ot=Math.max(Mt-gt,ft)+Z*2;b[U.id]={id:U.id,nodes:q,size:[rt,ot]}}else if(U.itemType==="combo"){var H=Z?[Z*2,Z*2]:[30,30];b[U.id]={id:U.id,nodes:[],size:H}}return!0})}),b},S.prototype.initVals=function(){var y=this,g=y.nodeSize,O=y.spacing,E,D;if((0,L.isNumber)(O)?D=function(){return O}:(0,L.isFunction)(O)?D=O:D=function(){return 0},this.spacing=D,!g)E=function(U){var Y=D(U);if(U.size){if((0,L.isArray)(U.size)){var Z=U.size[0]>U.size[1]?U.size[0]:U.size[1];return(Z+Y)/2}if((0,L.isObject)(U.size)){var Z=U.size.width>U.size.height?U.size.width:U.size.height;return(Z+Y)/2}return(U.size+Y)/2}return 10+Y/2};else if((0,L.isFunction)(g))E=function(U){var Y=g(U),Z=D(U);if((0,L.isArray)(U.size)){var H=U.size[0]>U.size[1]?U.size[0]:U.size[1];return(H+Z)/2}return((Y||10)+Z)/2};else if((0,L.isArray)(g)){var F=g[0]>g[1]?g[0]:g[1],W=F/2;E=function(U){return W+D(U)/2}}else{var b=g/2;E=function(U){return b+D(U)/2}}this.nodeSize=E;var h=y.comboPadding,K;(0,L.isNumber)(h)?K=function(){return h}:(0,L.isArray)(h)?K=function(){return Math.max.apply(null,h)}:(0,L.isFunction)(h)?K=h:K=function(){return 0},this.comboPadding=K},S.prototype.getType=function(){return"comboCombined"},S}(T.Base);z.ComboCombinedLayout=p},366590:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var L=function(P,p){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var y in S)Object.prototype.hasOwnProperty.call(S,y)&&(m[y]=S[y])},L(P,p)};return function(P,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");L(P,p);function m(){this.constructor=P}P.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.ComboForceLayout=void 0;var k=C(762329),w=C(449784),T=function(L){x(P,L);function P(p){var m=L.call(this)||this;return m.center=[0,0],m.maxIteration=100,m.gravity=10,m.comboGravity=10,m.linkDistance=10,m.alpha=1,m.alphaMin=.001,m.alphaDecay=1-Math.pow(m.alphaMin,1/300),m.alphaTarget=0,m.velocityDecay=.6,m.edgeStrength=.6,m.nodeStrength=30,m.preventOverlap=!1,m.preventNodeOverlap=!1,m.preventComboOverlap=!1,m.collideStrength=void 0,m.nodeCollideStrength=.5,m.comboCollideStrength=.5,m.comboSpacing=20,m.comboPadding=10,m.optimizeRangeFactor=1,m.onTick=function(){},m.onLayoutEnd=function(){},m.depthAttractiveForceScale=1,m.depthRepulsiveForceScale=2,m.nodes=[],m.edges=[],m.combos=[],m.comboTrees=[],m.width=300,m.height=300,m.bias=[],m.nodeMap={},m.oriComboMap={},m.indexMap={},m.comboMap={},m.previousLayouted=!1,m.updateCfg(p),m}return P.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},P.prototype.execute=function(){var p=this,m=p.nodes,S=p.center;if(p.comboTree={id:"comboTreeRoot",depth:-1,children:p.comboTrees},!m||m.length===0){p.onLayoutEnd&&p.onLayoutEnd();return}if(m.length===1){m[0].x=S[0],m[0].y=S[1],p.onLayoutEnd&&p.onLayoutEnd();return}p.initVals(),p.run(),p.onLayoutEnd&&p.onLayoutEnd()},P.prototype.run=function(){var p=this,m=p.nodes,S=p.previousLayouted?p.maxIteration/5:p.maxIteration;!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight);var y=p.center,g=p.velocityDecay,O=p.comboMap;p.previousLayouted||p.initPos(O);for(var E=function(b){var h=[];m.forEach(function(K,U){h[U]={x:0,y:0}}),p.applyCalculate(h),p.applyComboCenterForce(h),m.forEach(function(K,U){!(0,w.isNumber)(K.x)||!(0,w.isNumber)(K.y)||(K.x+=h[U].x*g,K.y+=h[U].y*g)}),p.alpha+=(p.alphaTarget-p.alpha)*p.alphaDecay,p.onTick()},D=0;D<S;D++)E(D);var F=[0,0];m.forEach(function(b){!(0,w.isNumber)(b.x)||!(0,w.isNumber)(b.y)||(F[0]+=b.x,F[1]+=b.y)}),F[0]/=m.length,F[1]/=m.length;var W=[y[0]-F[0],y[1]-F[1]];m.forEach(function(b,h){!(0,w.isNumber)(b.x)||!(0,w.isNumber)(b.y)||(b.x+=W[0],b.y+=W[1])}),p.combos.forEach(function(b){var h=O[b.id];h&&h.empty&&(b.x=h.cx||b.x,b.y=h.cy||b.y)}),p.previousLayouted=!0},P.prototype.initVals=function(){var p=this,m=p.edges,S=p.nodes,y=p.combos,g={},O={},E={};S.forEach(function(st,bt){O[st.id]=st,E[st.id]=bt}),p.nodeMap=O,p.indexMap=E;var D={};y.forEach(function(st){D[st.id]=st}),p.oriComboMap=D,p.comboMap=p.getComboMap();var F=p.preventOverlap;p.preventComboOverlap=p.preventComboOverlap||F,p.preventNodeOverlap=p.preventNodeOverlap||F;var W=p.collideStrength;W&&(p.comboCollideStrength=W,p.nodeCollideStrength=W),p.comboCollideStrength=p.comboCollideStrength?p.comboCollideStrength:0,p.nodeCollideStrength=p.nodeCollideStrength?p.nodeCollideStrength:0;for(var b=0;b<m.length;++b){var h=(0,w.getEdgeTerminal)(m[b],"source"),K=(0,w.getEdgeTerminal)(m[b],"target");g[h]?g[h]++:g[h]=1,g[K]?g[K]++:g[K]=1}for(var U=[],b=0;b<m.length;++b){var h=(0,w.getEdgeTerminal)(m[b],"source"),K=(0,w.getEdgeTerminal)(m[b],"target");U[b]=g[h]/(g[h]+g[K])}this.bias=U;var Y=p.nodeSize,Z=p.nodeSpacing,H,q;if((0,w.isNumber)(Z)?q=function(){return Z}:(0,w.isFunction)(Z)?q=Z:q=function(){return 0},this.nodeSpacing=q,!Y)H=function(st){if(st.size){if((0,w.isArray)(st.size)){var bt=st.size[0]>st.size[1]?st.size[0]:st.size[1];return bt/2}if((0,w.isObject)(st.size)){var bt=st.size.width>st.size.height?st.size.width:st.size.height;return bt/2}return st.size/2}return 10};else if((0,w.isFunction)(Y))H=function(st){return Y(st)};else if((0,w.isArray)(Y)){var Q=Y[0]>Y[1]?Y[0]:Y[1],J=Q/2;H=function(st){return J}}else{var ft=Y/2;H=function(st){return ft}}this.nodeSize=H;var nt=p.comboSpacing,yt;(0,w.isNumber)(nt)?yt=function(){return nt}:(0,w.isFunction)(nt)?yt=nt:yt=function(){return 0},this.comboSpacing=yt;var gt=p.comboPadding,zt;(0,w.isNumber)(gt)?zt=function(){return gt}:(0,w.isArray)(gt)?zt=function(){return Math.max.apply(null,gt)}:(0,w.isFunction)(gt)?zt=gt:zt=function(){return 0},this.comboPadding=zt;var Mt=this.linkDistance,Ct;Mt||(Mt=10),(0,w.isNumber)(Mt)?Ct=function(st){return Mt}:Ct=Mt,this.linkDistance=Ct;var rt=this.edgeStrength,ot;rt||(rt=1),(0,w.isNumber)(rt)?ot=function(st){return rt}:ot=rt,this.edgeStrength=ot;var Tt=this.nodeStrength,Rt;Tt||(Tt=30),(0,w.isNumber)(Tt)?Rt=function(st){return Tt}:Rt=Tt,this.nodeStrength=Rt},P.prototype.initPos=function(p){var m=this,S=m.nodes;S.forEach(function(y,g){var O=y.comboId,E=p[O];O&&E?(y.x=E.cx+100/(g+1),y.y=E.cy+100/(g+1)):(y.x=100/(g+1),y.y=100/(g+1))})},P.prototype.getComboMap=function(){var p=this,m=p.nodeMap,S=p.comboTrees,y=p.oriComboMap,g={};return(S||[]).forEach(function(O){var E=[];(0,w.traverseTreeUp)(O,function(D){if(D.itemType==="node"||!y[D.id])return!0;if(g[D.id]===void 0){var F={id:D.id,name:D.id,cx:0,cy:0,count:0,depth:p.oriComboMap[D.id].depth||0,children:[]};g[D.id]=F}var W=D.children;W&&W.forEach(function(K){if(!g[K.id]&&!m[K.id])return!0;E.push(K)});var b=g[D.id];if(b.cx=0,b.cy=0,E.length===0){b.empty=!0;var h=y[D.id];b.cx=h.x,b.cy=h.y}return E.forEach(function(K){if(b.count++,K.itemType!=="node"){var U=g[K.id];(0,w.isNumber)(U.cx)&&(b.cx+=U.cx),(0,w.isNumber)(U.cy)&&(b.cy+=U.cy);return}var Y=m[K.id];Y&&((0,w.isNumber)(Y.x)&&(b.cx+=Y.x),(0,w.isNumber)(Y.y)&&(b.cy+=Y.y))}),b.cx/=b.count||1,b.cy/=b.count||1,b.children=E,!0})}),g},P.prototype.applyComboCenterForce=function(p){var m=this,S=m.gravity,y=m.comboGravity||S,g=this.alpha,O=m.comboTrees,E=m.indexMap,D=m.nodeMap,F=m.comboMap;(O||[]).forEach(function(W){(0,w.traverseTreeUp)(W,function(b){if(b.itemType==="node")return!0;var h=F[b.id];if(!h)return!0;var K=F[b.id],U=(K.depth+1)/10*.5,Y=K.cx,Z=K.cy;return K.cx=0,K.cy=0,K.children.forEach(function(H){if(H.itemType!=="node"){var q=F[H.id];q&&(0,w.isNumber)(q.cx)&&(K.cx+=q.cx),q&&(0,w.isNumber)(q.cy)&&(K.cy+=q.cy);return}var Q=D[H.id],J=Q.x-Y||.005,ft=Q.y-Z||.005,nt=Math.sqrt(J*J+ft*ft),yt=E[Q.id],gt=y*g/nt*U;p[yt].x-=J*gt,p[yt].y-=ft*gt,(0,w.isNumber)(Q.x)&&(K.cx+=Q.x),(0,w.isNumber)(Q.y)&&(K.cy+=Q.y)}),K.cx/=K.count||1,K.cy/=K.count||1,!0})})},P.prototype.applyCalculate=function(p){var m=this,S=m.comboMap,y=m.nodes,g={};y.forEach(function(E,D){y.forEach(function(F,W){if(!(D<W)){var b=E.x-F.x||.005,h=E.y-F.y||.005,K=b*b+h*h,U=Math.sqrt(K);K<1&&(K=U),g["".concat(E.id,"-").concat(F.id)]={vx:b,vy:h,vl2:K,vl:U},g["".concat(F.id,"-").concat(E.id)]={vl2:K,vl:U,vx:-b,vy:-h}}})}),m.updateComboSizes(S),m.calRepulsive(p,g),m.calAttractive(p,g);var O=m.preventComboOverlap;O&&m.comboNonOverlapping(p,S)},P.prototype.updateComboSizes=function(p){var m=this,S=m.comboTrees,y=m.nodeMap,g=m.nodeSize,O=m.comboSpacing,E=m.comboPadding;(S||[]).forEach(function(D){var F=[];(0,w.traverseTreeUp)(D,function(W){if(W.itemType==="node")return!0;var b=p[W.id];if(!b)return!1;var h=W.children;h&&h.forEach(function(Y){!p[Y.id]&&!y[Y.id]||F.push(Y)}),b.minX=1/0,b.minY=1/0,b.maxX=-1/0,b.maxY=-1/0,F.forEach(function(Y){if(Y.itemType!=="node")return!0;var Z=y[Y.id];if(!Z)return!0;var H=g(Z),q=Z.x-H,Q=Z.y-H,J=Z.x+H,ft=Z.y+H;b.minX>q&&(b.minX=q),b.minY>Q&&(b.minY=Q),b.maxX<J&&(b.maxX=J),b.maxY<ft&&(b.maxY=ft)});var K=m.oriComboMap[W.id].size||10;(0,w.isArray)(K)&&(K=K[0]);var U=Math.max(b.maxX-b.minX,b.maxY-b.minY,K);return b.r=U/2+O(b)/2+E(b),!0})})},P.prototype.comboNonOverlapping=function(p,m){var S=this,y=S.comboTree,g=S.comboCollideStrength,O=S.indexMap,E=S.nodeMap;(0,w.traverseTreeUp)(y,function(D){if(!m[D.id]&&!E[D.id]&&D.id!=="comboTreeRoot")return!1;var F=D.children;return F&&F.length>1&&F.forEach(function(W,b){if(W.itemType==="node")return!1;var h=m[W.id];h&&F.forEach(function(K,U){if(b<=U||K.itemType==="node")return!1;var Y=m[K.id];if(!Y)return!1;var Z=h.cx-Y.cx||.005,H=h.cy-Y.cy||.005,q=Z*Z+H*H,Q=h.r||1,J=Y.r||1,ft=Q+J,nt=J*J,yt=Q*Q;if(q<ft*ft){var gt=W.children;if(!gt||gt.length===0)return!1;var zt=K.children;if(!zt||zt.length===0)return!1;var Mt=Math.sqrt(q),Ct=(ft-Mt)/Mt*g,rt=Z*Ct,ot=H*Ct,Tt=nt/(yt+nt),Rt=1-Tt;gt.forEach(function(st){if(st.itemType!=="node")return!1;if(E[st.id]){var bt=O[st.id];zt.forEach(function(Ft){if(Ft.itemType!=="node"||!E[Ft.id])return!1;var Ht=O[Ft.id];p[bt].x+=rt*Tt,p[bt].y+=ot*Tt,p[Ht].x-=rt*Rt,p[Ht].y-=ot*Rt})}})}})}),!0})},P.prototype.calRepulsive=function(p,m){var S=this,y=S.nodes,g=S.width*S.optimizeRangeFactor,O=S.nodeStrength,E=S.alpha,D=S.nodeCollideStrength,F=S.preventNodeOverlap,W=S.nodeSize,b=S.nodeSpacing,h=S.depthRepulsiveForceScale,K=S.center;y.forEach(function(U,Y){if(!(!U.x||!U.y)){if(K){var Z=S.gravity,H=U.x-K[0]||.005,q=U.y-K[1]||.005,Q=Math.sqrt(H*H+q*q);p[Y].x-=H*Z*E/Q,p[Y].y-=q*Z*E/Q}y.forEach(function(J,ft){if(Y!==ft&&!(!J.x||!J.y)){var nt=m["".concat(U.id,"-").concat(J.id)],yt=nt.vl2,gt=nt.vl;if(!(gt>g)){var zt=m["".concat(U.id,"-").concat(J.id)],Mt=zt.vx,Ct=zt.vy,rt=Math.log(Math.abs(J.depth-U.depth)/10)+1||1;rt=rt<1?1:rt,J.comboId!==U.comboId&&(rt+=1);var ot=rt?Math.pow(h,rt):1,Tt=O(J)*E/yt*ot;if(p[Y].x+=Mt*Tt,p[Y].y+=Ct*Tt,Y<ft&&F){var Rt=W(U)+b(U)||1,st=W(J)+b(J)||1,bt=Rt+st;if(yt<bt*bt){var Ft=(bt-gt)/gt*D,Ht=st*st,_t=Ht/(Rt*Rt+Ht),Xt=Mt*Ft,ee=Ct*Ft;p[Y].x+=Xt*_t,p[Y].y+=ee*_t,_t=1-_t,p[ft].x-=Xt*_t,p[ft].y-=ee*_t}}}}})}})},P.prototype.calAttractive=function(p,m){var S=this,y=S.edges,g=S.linkDistance,O=S.alpha,E=S.edgeStrength,D=S.bias,F=S.depthAttractiveForceScale;y.forEach(function(W,b){var h=(0,w.getEdgeTerminal)(W,"source"),K=(0,w.getEdgeTerminal)(W,"target");if(!(!h||!K||h===K)){var U=S.indexMap[h],Y=S.indexMap[K],Z=S.nodeMap[h],H=S.nodeMap[K];if(!(!Z||!H)){var q=Z.depth===H.depth?0:Math.log(Math.abs(Z.depth-H.depth)/10);Z.comboId===H.comboId&&(q=q/2);var Q=q?Math.pow(F,q):1;if(Z.comboId!==H.comboId&&Q===1?Q=F/2:Z.comboId===H.comboId&&(Q=2),!(!(0,w.isNumber)(H.x)||!(0,w.isNumber)(Z.x)||!(0,w.isNumber)(H.y)||!(0,w.isNumber)(Z.y))){var J=m["".concat(K,"-").concat(h)],ft=J.vl,nt=J.vx,yt=J.vy,gt=(ft-g(W))/ft*O*E(W)*Q,zt=nt*gt,Mt=yt*gt,Ct=D[b];p[Y].x-=zt*Ct,p[Y].y-=Mt*Ct,p[U].x+=zt*(1-Ct),p[U].y+=Mt*(1-Ct)}}}})},P.prototype.getType=function(){return"comboForce"},P}(k.Base);z.ComboForceLayout=T},843281:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var L=function(P,p){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var y in S)Object.prototype.hasOwnProperty.call(S,y)&&(m[y]=S[y])},L(P,p)};return function(P,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");L(P,p);function m(){this.constructor=P}P.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.ConcentricLayout=void 0;var k=C(449784),w=C(762329),T=function(L){x(P,L);function P(p){var m=L.call(this)||this;return m.nodeSize=30,m.minNodeSpacing=10,m.nodeSpacing=10,m.preventOverlap=!1,m.equidistant=!1,m.startAngle=3/2*Math.PI,m.clockwise=!0,m.sortBy="degree",m.nodes=[],m.edges=[],m.width=300,m.height=300,m.onLayoutEnd=function(){},m.updateCfg(p),m}return P.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},P.prototype.execute=function(){var p,m,S=this,y=S.nodes,g=S.edges,O=y.length;if(O===0){(p=S.onLayoutEnd)===null||p===void 0||p.call(S);return}!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]);var E=S.center;if(O===1){y[0].x=E[0],y[0].y=E[1],(m=S.onLayoutEnd)===null||m===void 0||m.call(S);return}var D=S.nodeSize,F=S.nodeSpacing,W=[],b,h=0;(0,k.isArray)(D)?b=Math.max(D[0],D[1]):b=D,(0,k.isArray)(F)?h=Math.max(F[0],F[1]):(0,k.isNumber)(F)&&(h=F),y.forEach(function(rt){W.push(rt);var ot=b;(0,k.isArray)(rt.size)?ot=Math.max(rt.size[0],rt.size[1]):(0,k.isNumber)(rt.size)?ot=rt.size:(0,k.isObject)(rt.size)&&(ot=Math.max(rt.size.width,rt.size.height)),b=Math.max(b,ot),(0,k.isFunction)(F)&&(h=Math.max(F(rt),h))}),S.clockwise=S.counterclockwise!==void 0?!S.counterclockwise:S.clockwise;var K={},U={};if(W.forEach(function(rt,ot){K[rt.id]=rt,U[rt.id]=ot}),(S.sortBy==="degree"||!(0,k.isString)(S.sortBy)||W[0][S.sortBy]===void 0)&&(S.sortBy="degree",!(0,k.isNumber)(y[0].degree))){var Y=(0,k.getDegree)(y.length,U,g);W.forEach(function(rt,ot){rt.degree=Y[ot].all})}W.sort(function(rt,ot){return ot[S.sortBy]-rt[S.sortBy]}),S.maxValueNode=W[0],S.maxLevelDiff=S.maxLevelDiff||S.maxValueNode[S.sortBy]/4;var Z=[[]],H=Z[0];W.forEach(function(rt){if(H.length>0){var ot=Math.abs(H[0][S.sortBy]-rt[S.sortBy]);S.maxLevelDiff&&ot>=S.maxLevelDiff&&(H=[],Z.push(H))}H.push(rt)});var q=b+(h||S.minNodeSpacing);if(!S.preventOverlap){var Q=Z.length>0&&Z[0].length>1,J=Math.min(S.width,S.height)/2-q,ft=J/(Z.length+(Q?1:0));q=Math.min(q,ft)}var nt=0;if(Z.forEach(function(rt){var ot=S.sweep;ot===void 0&&(ot=2*Math.PI-2*Math.PI/rt.length);var Tt=rt.dTheta=ot/Math.max(1,rt.length-1);if(rt.length>1&&S.preventOverlap){var Rt=Math.cos(Tt)-Math.cos(0),st=Math.sin(Tt)-Math.sin(0),bt=Math.sqrt(q*q/(Rt*Rt+st*st));nt=Math.max(bt,nt)}rt.r=nt,nt+=q}),S.equidistant){for(var yt=0,gt=0,zt=0;zt<Z.length;zt++){var Mt=Z[zt],Ct=Mt.r-gt;yt=Math.max(yt,Ct)}gt=0,Z.forEach(function(rt,ot){ot===0&&(gt=rt.r),rt.r=gt,gt+=yt})}return Z.forEach(function(rt){var ot=rt.dTheta,Tt=rt.r;rt.forEach(function(Rt,st){var bt=S.startAngle+(S.clockwise?1:-1)*ot*st;Rt.x=E[0]+Tt*Math.cos(bt),Rt.y=E[1]+Tt*Math.sin(bt)})}),S.onLayoutEnd&&S.onLayoutEnd(),{nodes:y,edges:g}},P.prototype.getType=function(){return"concentric"},P}(w.Base);z.ConcentricLayout=T},416470:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.FORCE_LAYOUT_TYPE_MAP=z.LAYOUT_MESSAGE=void 0,z.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},z.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},920171:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var S=function(y,g){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,E){O.__proto__=E}||function(O,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(O[D]=E[D])},S(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");S(y,g);function O(){this.constructor=y}y.prototype=g===null?Object.create(g):(O.prototype=g.prototype,new O)}}(),k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(z,"__esModule",{value:!0}),z.DagreLayout=void 0;var w=k(C(441106)),T=C(449784),L=C(762329),P=C(627652),p=function(S){x(y,S);function y(g){var O=S.call(this)||this;return O.rankdir="TB",O.nodesep=50,O.ranksep=50,O.controlPoints=!1,O.sortByCombo=!1,O.edgeLabelSpace=!0,O.radial=!1,O.nodes=[],O.edges=[],O.onLayoutEnd=function(){},O.layoutNode=function(E){var D=O,F=D.nodes,W=F.find(function(h){return h.id===E});if(W){var b=W.layout!==!1;return b}return!0},O.updateCfg(g),O}return y.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},y.prototype.execute=function(){var g=this,O,E,D,F,W=this,b=W.nodes,h=W.nodeSize,K=W.rankdir,U=W.combos,Y=W.begin,Z=W.radial,H=W.comboEdges,q=H===void 0?[]:H,Q=W.vedges,J=Q===void 0?[]:Q;if(b){var ft=W.edges||[],nt=new P.Graph({multigraph:!0,compound:!0});W.nodeMap={};var yt={};b.forEach(function($e){W.nodeMap[$e.id]=$e,$e.comboId&&(yt[$e.comboId]=yt[$e.comboId]||[],yt[$e.comboId].push($e.id))});var gt=[],zt={};!((O=W.nodeOrder)===null||O===void 0)&&O.length?(W.nodeOrder.forEach(function($e){zt[$e]=!0,gt.push(W.nodeMap[$e])}),b.forEach(function($e){zt[$e.id]||gt.push($e)})):gt=b;var Mt;h?(0,T.isArray)(h)?Mt=function(){return h}:Mt=function(){return[h,h]}:Mt=function($e){return $e.size?(0,T.isArray)($e.size)?$e.size:(0,T.isObject)($e.size)?[$e.size.width||40,$e.size.height||40]:[$e.size,$e.size]:[40,40]};var Ct=(0,T.getFunc)(W.ranksep,50,W.ranksepFunc),rt=(0,T.getFunc)(W.nodesep,50,W.nodesepFunc),ot=rt,Tt=Ct;(K==="LR"||K==="RL")&&(ot=Ct,Tt=rt),nt.setDefaultEdgeLabel(function(){return{}}),nt.setGraph(W);var Rt={};this.sortByCombo&&U&&U.forEach(function($e){if(Rt[$e.id]=$e,$e.collapsed){var dr=Mt($e),ar=Tt($e),Qe=ot($e),Pr=dr[0]+2*Qe,Zr=dr[1]+2*ar;nt.setNode($e.id,{width:Pr,height:Zr})}$e.parentId&&(Rt[$e.parentId]||nt.setNode($e.parentId,{}),nt.setParent($e.id,$e.parentId))}),gt.filter(function($e){return $e.layout!==!1}).forEach(function($e){var dr=Mt($e),ar=Tt($e),Qe=ot($e),Pr=dr[0]+2*Qe,Zr=dr[1]+2*ar,qr=$e.layer;(0,T.isNumber)(qr)?nt.setNode($e.id,{width:Pr,height:Zr,layer:qr}):nt.setNode($e.id,{width:Pr,height:Zr}),g.sortByCombo&&$e.comboId&&(Rt[$e.comboId]||(Rt[$e.comboId]={id:$e.comboId},nt.setNode($e.comboId,{})),nt.setParent($e.id,$e.comboId))}),ft.forEach(function($e){var dr=(0,T.getEdgeTerminal)($e,"source"),ar=(0,T.getEdgeTerminal)($e,"target");g.layoutNode(dr)&&g.layoutNode(ar)&&nt.setEdge(dr,ar,{weight:$e.weight||1})}),(E=q==null?void 0:q.concat(J||[]))===null||E===void 0||E.forEach(function($e){var dr,ar,Qe=$e.source,Pr=$e.target,Zr=!((dr=Rt[Qe])===null||dr===void 0)&&dr.collapsed?[Qe]:yt[Qe]||[Qe],qr=!((ar=Rt[Pr])===null||ar===void 0)&&ar.collapsed?[Pr]:yt[Pr]||[Pr];Zr.forEach(function(Sn){qr.forEach(function(Yn){nt.setEdge(Sn,Yn,{weight:$e.weight||1})})})});var st=void 0;!((D=W.preset)===null||D===void 0)&&D.nodes&&(st=new P.Graph({multigraph:!0,compound:!0}),W.preset.nodes.forEach(function($e){st==null||st.setNode($e.id,$e)})),w.default.layout(nt,{prevGraph:st,edgeLabelSpace:W.edgeLabelSpace,keepNodeOrder:!!W.nodeOrder,nodeOrder:W.nodeOrder});var bt=[0,0];if(Y){var Ft=1/0,Ht=1/0;nt.nodes().forEach(function($e){var dr=nt.node($e);Ft>dr.x&&(Ft=dr.x),Ht>dr.y&&(Ht=dr.y)}),nt.edges().forEach(function($e){var dr,ar=nt.edge($e);(dr=ar.points)===null||dr===void 0||dr.forEach(function(Qe){Ft>Qe.x&&(Ft=Qe.x),Ht>Qe.y&&(Ht=Qe.y)})}),bt[0]=Y[0]-Ft,bt[1]=Y[1]-Ht}var _t=K==="LR"||K==="RL";if(Z){var Xt=this,ee=Xt.focusNode,se=Xt.ranksep,ue=Xt.getRadialPos,Ut=(0,T.isString)(ee)?ee:ee==null?void 0:ee.id,oe=Ut?(F=nt.node(Ut))===null||F===void 0?void 0:F._rank:0,Pe=[],te=_t?"y":"x",ve=_t?"height":"width",Ue=1/0,xe=-1/0;nt.nodes().forEach(function($e){var dr=nt.node($e);if(W.nodeMap[$e]){var ar=rt(W.nodeMap[$e]);if(oe===0)Pe[dr._rank]||(Pe[dr._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Pe[dr._rank].nodes.push($e),Pe[dr._rank].totalWidth+=ar*2+dr[ve],Pe[dr._rank].maxSize<Math.max(dr.width,dr.height)&&(Pe[dr._rank].maxSize=Math.max(dr.width,dr.height));else{var Qe=dr._rank-oe;if(Qe===0)Pe[Qe]||(Pe[Qe]={nodes:[],totalWidth:0,maxSize:-1/0}),Pe[Qe].nodes.push($e),Pe[Qe].totalWidth+=ar*2+dr[ve],Pe[Qe].maxSize<Math.max(dr.width,dr.height)&&(Pe[Qe].maxSize=Math.max(dr.width,dr.height));else{var Pr=Math.abs(Qe);Pe[Pr]||(Pe[Pr]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Pe[Pr].totalWidth+=ar*2+dr[ve],Pe[Pr].maxSize<Math.max(dr.width,dr.height)&&(Pe[Pr].maxSize=Math.max(dr.width,dr.height)),Qe<0?Pe[Pr].left.push($e):Pe[Pr].right.push($e)}}var Zr=dr[te]-dr[ve]/2-ar,qr=dr[te]+dr[ve]/2+ar;Zr<Ue&&(Ue=Zr),qr>xe&&(xe=qr)}});var Re=se||50,de={},ht=(xe-Ue)/.9,ae=[(Ue+xe-ht)*.5,(Ue+xe+ht)*.5],Le=function($e,dr,ar,Qe){ar===void 0&&(ar=-1/0),Qe===void 0&&(Qe=[0,1]);var Pr=ar;return $e.forEach(function(Zr){var qr=nt.node(Zr);de[Zr]=dr;var Sn=ue(qr[te],ae,ht,dr,Qe),Yn=Sn.x,Ir=Sn.y;if(W.nodeMap[Zr]){W.nodeMap[Zr].x=Yn+bt[0],W.nodeMap[Zr].y=Ir+bt[1],W.nodeMap[Zr]._order=qr._order;var Br=Ct(W.nodeMap[Zr]);Pr<Br&&(Pr=Br)}}),Pr},Ze=!0,qe=0;Pe.forEach(function($e){var dr,ar,Qe,Pr,Zr,qr,Sn;if(!(!(!((dr=$e==null?void 0:$e.nodes)===null||dr===void 0)&&dr.length)&&!(!((ar=$e==null?void 0:$e.left)===null||ar===void 0)&&ar.length)&&!(!((Qe=$e==null?void 0:$e.right)===null||Qe===void 0)&&Qe.length))){if(Ze&&$e.nodes.length===1){var Yn=$e.nodes[0];if(!W.nodeMap[Yn])return;W.nodeMap[Yn].x=bt[0],W.nodeMap[Yn].y=bt[1],de[$e.nodes[0]]=0,Re=Ct(W.nodeMap[Yn]),Ze=!1;return}Re=Math.max(Re,$e.totalWidth/(2*Math.PI));var Ir=-1/0;if(oe===0||!((Pr=$e.nodes)===null||Pr===void 0)&&Pr.length)Ir=Le($e.nodes,Re,Ir,[0,1]);else{var Br=((Zr=$e.left)===null||Zr===void 0?void 0:Zr.length)/(((qr=$e.left)===null||qr===void 0?void 0:qr.length)+((Sn=$e.right)===null||Sn===void 0?void 0:Sn.length));Ir=Le($e.left,Re,Ir,[0,Br]),Ir=Le($e.right,Re,Ir,[Br+.05,1])}Re+=Ir,Ze=!1,qe-$e.maxSize}}),nt.edges().forEach(function($e){var dr,ar,Qe,Pr=nt.edge($e),Zr=ft.findIndex(function(xn){var _n=(0,T.getEdgeTerminal)(xn,"source"),tt=(0,T.getEdgeTerminal)(xn,"target");return _n===$e.v&&tt===$e.w});if(!(Zr<=-1)&&W.edgeLabelSpace&&W.controlPoints&&ft[Zr].type!=="loop"){var qr=te==="x"?"y":"x",Sn=(dr=Pr==null?void 0:Pr.points)===null||dr===void 0?void 0:dr.slice(1,Pr.points.length-1),Yn=[],Ir=(ar=nt.node($e.v))===null||ar===void 0?void 0:ar[qr],Br=Ir-((Qe=nt.node($e.w))===null||Qe===void 0?void 0:Qe[qr]),en=de[$e.v],hn=en-de[$e.w];Sn==null||Sn.forEach(function(xn){var _n=(xn[qr]-Ir)/Br*hn+en,tt=ue(xn[te],ae,ht,_n);Yn.push({x:tt.x+bt[0],y:tt.y+bt[1]})}),ft[Zr].controlPoints=Yn}})}else{var fr=new Set,ur=K==="BT"||K==="RL",kr=ur?function($e,dr){return dr-$e}:function($e,dr){return $e-dr};nt.nodes().forEach(function($e){var dr=nt.node($e);if(dr){var ar=g.nodeMap[$e];ar||(ar=U==null?void 0:U.find(function(Qe){return Qe.id===$e})),ar&&(ar.x=dr.x+bt[0],ar.y=dr.y+bt[1],ar._order=dr._order,fr.add(_t?ar.x:ar.y))}});var yn=Array.from(fr).sort(kr),un=_t?function($e,dr){return $e.x!==dr.x}:function($e,dr){return $e.y!==dr.y},Vr=_t?function($e,dr,ar){var Qe=Math.max(dr.y,ar.y),Pr=Math.min(dr.y,ar.y);return $e.filter(function(Zr){return Zr.y<=Qe&&Zr.y>=Pr})}:function($e,dr,ar){var Qe=Math.max(dr.x,ar.x),Pr=Math.min(dr.x,ar.x);return $e.filter(function(Zr){return Zr.x<=Qe&&Zr.x>=Pr})};nt.edges().forEach(function($e){var dr,ar=nt.edge($e),Qe=ft.findIndex(function(qr){var Sn=(0,T.getEdgeTerminal)(qr,"source"),Yn=(0,T.getEdgeTerminal)(qr,"target");return Sn===$e.v&&Yn===$e.w});if(!(Qe<=-1)&&W.edgeLabelSpace&&W.controlPoints&&ft[Qe].type!=="loop"){(dr=ar==null?void 0:ar.points)===null||dr===void 0||dr.forEach(function(qr){qr.x+=bt[0],qr.y+=bt[1]});var Pr=W.nodeMap[$e.v],Zr=W.nodeMap[$e.w];ft[Qe].controlPoints=m(ar==null?void 0:ar.points,Pr,Zr,yn,_t,un,Vr)}})}return W.onLayoutEnd&&W.onLayoutEnd(),{nodes:b,edges:ft}}},y.prototype.getRadialPos=function(g,O,E,D,F){F===void 0&&(F=[0,1]);var W=(g-O[0])/E;W=W*(F[1]-F[0])+F[0];var b=W*2*Math.PI;return{x:Math.cos(b)*D,y:Math.sin(b)*D}},y.prototype.getType=function(){return"dagre"},y}(L.Base);z.DagreLayout=p;var m=function(S,y,g,O,E,D,F){var W=(S==null?void 0:S.slice(1,S.length-1))||[];if(y&&g){var b=y.x,h=y.y,K=g.x,U=g.y;if(E&&(b=y.y,h=y.x,K=g.y,U=g.x),U!==h&&b!==K){var Y=O.indexOf(h),Z=O[Y+1];if(Z){var H=W[0],q=E?{x:(h+Z)/2,y:(H==null?void 0:H.y)||K}:{x:(H==null?void 0:H.x)||K,y:(h+Z)/2};(!H||D(H,q))&&W.unshift(q)}var Q=O.indexOf(U),J=Math.abs(Q-Y);if(J===1)W=F(W,y,g),W.length||W.push(E?{x:(h+U)/2,y:b}:{x:b,y:(h+U)/2});else if(J>1){var ft=O[Q-1];if(ft){var nt=W[W.length-1],yt=E?{x:(U+ft)/2,y:(nt==null?void 0:nt.y)||K}:{x:(nt==null?void 0:nt.x)||b,y:(U+ft)/2};(!nt||D(nt,yt))&&W.push(yt)}}}}return W}},627652:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var T=function(L,P){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(p[S]=m[S])},T(L,P)};return function(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");T(L,P);function p(){this.constructor=L}L.prototype=P===null?Object.create(P):(p.prototype=P.prototype,new p)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.Graph=void 0;var k=C(199905),w=function(T){x(L,T);function L(){return T!==null&&T.apply(this,arguments)||this}return L}(k.Graph);z.Graph=w},441106:function(He,z,C){"use strict";var x=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(z,"__esModule",{value:!0});var k=x(C(265236)),w=C(269209);z.default={layout:k.default,util:{time:w.time,notime:w.notime}}},178029:function(He,z,C){"use strict";var x=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(z,"__esModule",{value:!0});var k=x(C(40773)),w=function(P){var p=function(S){return function(y){var g;return((g=S.edge(y))===null||g===void 0?void 0:g.weight)||1}},m=P.graph().acyclicer==="greedy"?(0,k.default)(P,p(P)):T(P);m==null||m.forEach(function(S){var y=P.edge(S);P.removeEdgeObj(S),y.forwardName=S.name,y.reversed=!0,P.setEdge(S.w,S.v,y,"rev-".concat(Math.random()))})},T=function(P){var p=[],m={},S={},y=function(g){var O;S[g]||(S[g]=!0,m[g]=!0,(O=P.outEdges(g))===null||O===void 0||O.forEach(function(E){m[E.w]?p.push(E):y(E.w)}),delete m[g])};return P.nodes().forEach(y),p},L=function(P){P.edges().forEach(function(p){var m=P.edge(p);if(m.reversed){P.removeEdgeObj(p);var S=m.forwardName;delete m.reversed,delete m.forwardName,P.setEdge(p.w,p.v,m,S)}})};z.default={run:w,undo:L}},111500:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(269209),k=function(T){var L,P=function(p){var m=T.children(p),S=T.node(p);if(m!=null&&m.length&&m.forEach(function(O){return P(O)}),S.hasOwnProperty("minRank")){S.borderLeft=[],S.borderRight=[];for(var y=S.minRank,g=S.maxRank+1;y<g;y+=1)w(T,"borderLeft","_bl",p,S,y),w(T,"borderRight","_br",p,S,y)}};(L=T.children())===null||L===void 0||L.forEach(function(p){return P(p)})},w=function(T,L,P,p,m,S){var y={rank:S,borderType:L,width:0,height:0},g=m[L][S-1],O=(0,x.addDummyNode)(T,"border",y,P);m[L][S]=O,T.setParent(O,p),g&&T.setEdge(g,O,{weight:1})};z.default=k},335279:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(m){var S,y=(S=m.graph().rankdir)===null||S===void 0?void 0:S.toLowerCase();(y==="lr"||y==="rl")&&k(m)},x=function(m){var S,y=(S=m.graph().rankdir)===null||S===void 0?void 0:S.toLowerCase();(y==="bt"||y==="rl")&&T(m),(y==="lr"||y==="rl")&&(P(m),k(m))},k=function(m){m.nodes().forEach(function(S){w(m.node(S))}),m.edges().forEach(function(S){w(m.edge(S))})},w=function(m){var S=m.width;m.width=m.height,m.height=S},T=function(m){m.nodes().forEach(function(S){L(m.node(S))}),m.edges().forEach(function(S){var y,g=m.edge(S);(y=g.points)===null||y===void 0||y.forEach(function(O){return L(O)}),g.hasOwnProperty("y")&&L(g)})},L=function(m){m!=null&&m.y&&(m.y=-m.y)},P=function(m){m.nodes().forEach(function(S){p(m.node(S))}),m.edges().forEach(function(S){var y,g=m.edge(S);(y=g.points)===null||y===void 0||y.forEach(function(O){return p(O)}),g.hasOwnProperty("x")&&p(g)})},p=function(m){var S=m.x;m.x=m.y,m.y=S};z.default={adjust:C,undo:x}},455532:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(w,T){if(w!=="next"&&w!=="prev")return T},x=function(w){w.prev.next=w.next,w.next.prev=w.prev,delete w.next,delete w.prev},k=function(){function w(){var T={};T.prev=T,T.next=T.prev,this.shortcut=T}return w.prototype.dequeue=function(){var T=this.shortcut,L=T.prev;if(L&&L!==T)return x(L),L},w.prototype.enqueue=function(T){var L=this.shortcut;T.prev&&T.next&&x(T),T.next=L.next,L.next.prev=T,L.next=T,T.prev=L},w.prototype.toString=function(){for(var T=[],L=this.shortcut,P=L.prev;P!==L;)T.push(JSON.stringify(P,C)),P=P==null?void 0:P.prev;return"[".concat(T.join(", "),"]")},w}();z.default=k},40773:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var E=function(D,F){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,b){W.__proto__=b}||function(W,b){for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(W[h]=b[h])},E(D,F)};return function(D,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");E(D,F);function W(){this.constructor=D}D.prototype=F===null?Object.create(F):(W.prototype=F.prototype,new W)}}(),k=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(z,"__esModule",{value:!0});var w=k(C(455532)),T=C(199905),L=function(E){x(D,E);function D(){return E!==null&&E.apply(this,arguments)||this}return D}(w.default),P=function(E){x(D,E);function D(){return E!==null&&E.apply(this,arguments)||this}return D}(T.Graph),p=function(){return 1},m=function(E,D){var F;if(E.nodeCount()<=1)return[];var W=g(E,D||p),b=S(W.graph,W.buckets,W.zeroIdx);return(F=b.map(function(h){return E.outEdges(h.v,h.w)}))===null||F===void 0?void 0:F.flat()},S=function(E,D,F){for(var W=[],b=D[D.length-1],h=D[0],K;E.nodeCount();){for(;K=h.dequeue();)y(E,D,F,K);for(;K=b.dequeue();)y(E,D,F,K);if(E.nodeCount()){for(var U=D.length-2;U>0;--U)if(K=D[U].dequeue(),K){W=W.concat(y(E,D,F,K,!0));break}}}return W},y=function(E,D,F,W,b){var h,K,U=[];return(h=E.inEdges(W.v))===null||h===void 0||h.forEach(function(Y){var Z=E.edge(Y),H=E.node(Y.v);b&&U.push({v:Y.v,w:Y.w,in:0,out:0}),H.out===void 0&&(H.out=0),H.out-=Z,O(D,F,H)}),(K=E.outEdges(W.v))===null||K===void 0||K.forEach(function(Y){var Z=E.edge(Y),H=Y.w,q=E.node(H);q.in===void 0&&(q.in=0),q.in-=Z,O(D,F,q)}),E.removeNode(W.v),b?U:void 0},g=function(E,D){var F=new P,W=0,b=0;E.nodes().forEach(function(Z){F.setNode(Z,{v:Z,in:0,out:0})}),E.edges().forEach(function(Z){var H=F.edge(Z)||0,q=(D==null?void 0:D(Z))||1,Q=H+q;F.setEdge(Z.v,Z.w,Q),b=Math.max(b,F.node(Z.v).out+=q),W=Math.max(W,F.node(Z.w).in+=q)});for(var h=[],K=b+W+3,U=0;U<K;U++)h.push(new L);var Y=W+1;return F.nodes().forEach(function(Z){O(h,Y,F.node(Z))}),{buckets:h,zeroIdx:Y,graph:F}},O=function(E,D,F){F.out?F.in?E[F.out-F.in+D].enqueue(F):E[E.length-1].enqueue(F):E[0].enqueue(F)};z.default=m},265236:function(He,z,C){"use strict";var x=this&&this.__assign||function(){return x=Object.assign||function(_t){for(var Xt,ee=1,se=arguments.length;ee<se;ee++){Xt=arguments[ee];for(var ue in Xt)Object.prototype.hasOwnProperty.call(Xt,ue)&&(_t[ue]=Xt[ue])}return _t},x.apply(this,arguments)},k=this&&this.__importDefault||function(_t){return _t&&_t.__esModule?_t:{default:_t}};Object.defineProperty(z,"__esModule",{value:!0});var w=k(C(178029)),T=k(C(546171)),L=k(C(576827)),P=C(269209),p=k(C(933562)),m=k(C(59596)),S=k(C(111500)),y=k(C(335279)),g=k(C(819597)),O=k(C(100095)),E=k(C(724956)),D=C(627652),F=function(_t,Xt){var ee=Xt&&Xt.debugTiming?P.time:P.notime;ee("layout",function(){Xt&&!Xt.keepNodeOrder&&Xt.prevGraph&&ee("  inheritOrder",function(){b(_t,Xt.prevGraph)});var se=ee("  buildLayoutGraph",function(){return ft(_t)});Xt&&Xt.edgeLabelSpace===!1||ee("  makeSpaceForEdgeLabels",function(){nt(se)});try{ee("  runLayout",function(){W(se,ee,Xt)})}catch(ue){if(ue.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,ue);return}throw ue}ee("  updateInputGraph",function(){h(_t,se)})})},W=function(_t,Xt,ee){Xt("    removeSelfEdges",function(){Rt(_t)}),Xt("    acyclic",function(){w.default.run(_t)}),Xt("    nestingGraph.run",function(){m.default.run(_t)}),Xt("    rank",function(){(0,L.default)((0,P.asNonCompoundGraph)(_t))}),Xt("    injectEdgeLabelProxies",function(){yt(_t)}),Xt("    removeEmptyRanks",function(){(0,P.removeEmptyRanks)(_t)}),Xt("    nestingGraph.cleanup",function(){m.default.cleanup(_t)}),Xt("    normalizeRanks",function(){(0,P.normalizeRanks)(_t)}),Xt("    assignRankMinMax",function(){gt(_t)}),Xt("    removeEdgeLabelProxies",function(){zt(_t)}),Xt("    normalize.run",function(){T.default.run(_t)}),Xt("    parentDummyChains",function(){(0,p.default)(_t)}),Xt("    addBorderSegments",function(){(0,S.default)(_t)}),ee&&ee.keepNodeOrder&&Xt("    initDataOrder",function(){(0,E.default)(_t,ee.nodeOrder)}),Xt("    order",function(){(0,g.default)(_t,ee==null?void 0:ee.keepNodeOrder)}),Xt("    insertSelfEdges",function(){st(_t)}),Xt("    adjustCoordinateSystem",function(){y.default.adjust(_t)}),Xt("    position",function(){(0,O.default)(_t)}),Xt("    positionSelfEdges",function(){bt(_t)}),Xt("    removeBorderNodes",function(){Tt(_t)}),Xt("    normalize.undo",function(){T.default.undo(_t)}),Xt("    fixupEdgeLabelCoords",function(){rt(_t)}),Xt("    undoCoordinateSystem",function(){y.default.undo(_t)}),Xt("    translateGraph",function(){Mt(_t)}),Xt("    assignNodeIntersects",function(){Ct(_t)}),Xt("    reversePoints",function(){ot(_t)}),Xt("    acyclic.undo",function(){w.default.undo(_t)})},b=function(_t,Xt){_t.nodes().forEach(function(ee){var se=_t.node(ee),ue=Xt.node(ee);ue!==void 0?(se.fixorder=ue._order,delete ue._order):delete se.fixorder})},h=function(_t,Xt){_t.nodes().forEach(function(ee){var se,ue=_t.node(ee);if(ue){var Ut=Xt.node(ee);ue.x=Ut.x,ue.y=Ut.y,ue._order=Ut.order,ue._rank=Ut.rank,!((se=Xt.children(ee))===null||se===void 0)&&se.length&&(ue.width=Ut.width,ue.height=Ut.height)}}),_t.edges().forEach(function(ee){var se=_t.edge(ee),ue=Xt.edge(ee);se.points=ue?ue.points:[],ue&&ue.hasOwnProperty("x")&&(se.x=ue.x,se.y=ue.y)}),_t.graph().width=Xt.graph().width,_t.graph().height=Xt.graph().height},K=["nodesep","edgesep","ranksep","marginx","marginy"],U={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Y=["acyclicer","ranker","rankdir","align"],Z=["width","height","layer","fixorder"],H={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],Q={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},J=["labelpos"],ft=function(_t){var Xt=new D.Graph({multigraph:!0,compound:!0}),ee=Ht(_t.graph()),se={};return Y==null||Y.forEach(function(ue){ee[ue]!==void 0&&(se[ue]=ee[ue])}),Xt.setGraph(Object.assign({},U,Ft(ee,K),se)),_t.nodes().forEach(function(ue){var Ut=Ht(_t.node(ue)),oe=x(x({},H),Ut),Pe=Ft(oe,Z);Xt.setNode(ue,Pe),Xt.setParent(ue,_t.parent(ue))}),_t.edges().forEach(function(ue){var Ut=Ht(_t.edge(ue)),oe={};J==null||J.forEach(function(Pe){Ut[Pe]!==void 0&&(oe[Pe]=Ut[Pe])}),Xt.setEdgeObj(ue,Object.assign({},Q,Ft(Ut,q),oe))}),Xt},nt=function(_t){var Xt=_t.graph();Xt.ranksep||(Xt.ranksep=0),Xt.ranksep/=2,_t.nodes().forEach(function(ee){var se=_t.node(ee);isNaN(se.layer)||se.layer||(se.layer=0)}),_t.edges().forEach(function(ee){var se,ue=_t.edge(ee);ue.minlen*=2,((se=ue.labelpos)===null||se===void 0?void 0:se.toLowerCase())!=="c"&&(Xt.rankdir==="TB"||Xt.rankdir==="BT"?ue.width+=ue.labeloffset:ue.height+=ue.labeloffset)})},yt=function(_t){_t.edges().forEach(function(Xt){var ee=_t.edge(Xt);if(ee.width&&ee.height){var se=_t.node(Xt.v),ue=_t.node(Xt.w),Ut={e:Xt,rank:(ue.rank-se.rank)/2+se.rank};(0,P.addDummyNode)(_t,"edge-proxy",Ut,"_ep")}})},gt=function(_t){var Xt=0;_t.nodes().forEach(function(ee){var se,ue,Ut=_t.node(ee);Ut.borderTop&&(Ut.minRank=(se=_t.node(Ut.borderTop))===null||se===void 0?void 0:se.rank,Ut.maxRank=(ue=_t.node(Ut.borderBottom))===null||ue===void 0?void 0:ue.rank,Xt=Math.max(Xt,Ut.maxRank||-1/0))}),_t.graph().maxRank=Xt},zt=function(_t){_t.nodes().forEach(function(Xt){var ee=_t.node(Xt);ee.dummy==="edge-proxy"&&(_t.edge(ee.e).labelRank=ee.rank,_t.removeNode(Xt))})},Mt=function(_t){var Xt,ee=0,se,ue=0,Ut=_t.graph(),oe=Ut.marginx||0,Pe=Ut.marginy||0,te=function(ve){if(ve){var Ue=ve.x,xe=ve.y,Re=ve.width,de=ve.height;!isNaN(Ue)&&!isNaN(Re)&&(Xt===void 0&&(Xt=Ue-Re/2),Xt=Math.min(Xt,Ue-Re/2),ee=Math.max(ee,Ue+Re/2)),!isNaN(xe)&&!isNaN(de)&&(se===void 0&&(se=xe-de/2),se=Math.min(se,xe-de/2),ue=Math.max(ue,xe+de/2))}};_t.nodes().forEach(function(ve){te(_t.node(ve))}),_t.edges().forEach(function(ve){var Ue=_t.edge(ve);Ue!=null&&Ue.hasOwnProperty("x")&&te(Ue)}),Xt-=oe,se-=Pe,_t.nodes().forEach(function(ve){var Ue=_t.node(ve);Ue&&(Ue.x-=Xt,Ue.y-=se)}),_t.edges().forEach(function(ve){var Ue,xe=_t.edge(ve);(Ue=xe.points)===null||Ue===void 0||Ue.forEach(function(Re){Re.x-=Xt,Re.y-=se}),xe.hasOwnProperty("x")&&(xe.x-=Xt),xe.hasOwnProperty("y")&&(xe.y-=se)}),Ut.width=ee-Xt+oe,Ut.height=ue-se+Pe},Ct=function(_t){_t.edges().forEach(function(Xt){var ee=_t.edge(Xt),se=_t.node(Xt.v),ue=_t.node(Xt.w),Ut,oe;ee.points?(Ut=ee.points[0],oe=ee.points[ee.points.length-1]):(ee.points=[],Ut=ue,oe=se),ee.points.unshift((0,P.intersectRect)(se,Ut)),ee.points.push((0,P.intersectRect)(ue,oe))})},rt=function(_t){_t.edges().forEach(function(Xt){var ee=_t.edge(Xt);if(ee!=null&&ee.hasOwnProperty("x"))switch((ee.labelpos==="l"||ee.labelpos==="r")&&(ee.width-=ee.labeloffset),ee.labelpos){case"l":ee.x-=ee.width/2+ee.labeloffset;break;case"r":ee.x+=ee.width/2+ee.labeloffset;break}})},ot=function(_t){_t.edges().forEach(function(Xt){var ee,se=_t.edge(Xt);se.reversed&&((ee=se.points)===null||ee===void 0||ee.reverse())})},Tt=function(_t){_t.nodes().forEach(function(Xt){var ee,se,ue;if(!((ee=_t.children(Xt))===null||ee===void 0)&&ee.length){var Ut=_t.node(Xt),oe=_t.node(Ut.borderTop),Pe=_t.node(Ut.borderBottom),te=_t.node(Ut.borderLeft[((se=Ut.borderLeft)===null||se===void 0?void 0:se.length)-1]),ve=_t.node(Ut.borderRight[((ue=Ut.borderRight)===null||ue===void 0?void 0:ue.length)-1]);Ut.width=Math.abs((ve==null?void 0:ve.x)-(te==null?void 0:te.x))||10,Ut.height=Math.abs((Pe==null?void 0:Pe.y)-(oe==null?void 0:oe.y))||10,Ut.x=((te==null?void 0:te.x)||0)+Ut.width/2,Ut.y=((oe==null?void 0:oe.y)||0)+Ut.height/2}}),_t.nodes().forEach(function(Xt){var ee;((ee=_t.node(Xt))===null||ee===void 0?void 0:ee.dummy)==="border"&&_t.removeNode(Xt)})},Rt=function(_t){_t.edges().forEach(function(Xt){if(Xt.v===Xt.w){var ee=_t.node(Xt.v);ee.selfEdges||(ee.selfEdges=[]),ee.selfEdges.push({e:Xt,label:_t.edge(Xt)}),_t.removeEdgeObj(Xt)}})},st=function(_t){var Xt=(0,P.buildLayerMatrix)(_t);Xt==null||Xt.forEach(function(ee){var se=0;ee==null||ee.forEach(function(ue,Ut){var oe,Pe=_t.node(ue);Pe.order=Ut+se,(oe=Pe.selfEdges)===null||oe===void 0||oe.forEach(function(te){(0,P.addDummyNode)(_t,"selfedge",{width:te.label.width,height:te.label.height,rank:Pe.rank,order:Ut+ ++se,e:te.e,label:te.label},"_se")}),delete Pe.selfEdges})})},bt=function(_t){_t.nodes().forEach(function(Xt){var ee=_t.node(Xt);if(ee.dummy==="selfedge"){var se=_t.node(ee.e.v),ue=se.x+se.width/2,Ut=se.y,oe=ee.x-ue,Pe=se.height/2;_t.setEdgeObj(ee.e,ee.label),_t.removeNode(Xt),ee.label.points=[{x:ue+2*oe/3,y:Ut-Pe},{x:ue+5*oe/6,y:Ut-Pe},{y:Ut,x:ue+oe},{x:ue+5*oe/6,y:Ut+Pe},{x:ue+2*oe/3,y:Ut+Pe}],ee.label.x=ee.x,ee.label.y=ee.y}})},Ft=function(_t,Xt){var ee={};return Xt==null||Xt.forEach(function(se){_t[se]!==void 0&&(ee[se]=+_t[se])}),ee},Ht=function(_t){_t===void 0&&(_t={});var Xt={};return Object.keys(_t).forEach(function(ee){Xt[ee.toLowerCase()]=_t[ee]}),Xt};z.default=F},59596:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(269209),k=function(p){var m,S=(0,x.addDummyNode)(p,"root",{},"_root"),y=T(p),g=Math.max.apply(Math,Object.values(y));Math.abs(g)===1/0&&(g=1);var O=g-1,E=2*O+1;p.graph().nestingRoot=S,p.edges().forEach(function(F){p.edge(F).minlen*=E});var D=L(p)+1;(m=p.children())===null||m===void 0||m.forEach(function(F){w(p,S,E,D,O,y,F)}),p.graph().nodeRankFactor=E},w=function(p,m,S,y,g,O,E){var D=p.children(E);if(!(D!=null&&D.length)){E!==m&&p.setEdge(m,E,{weight:0,minlen:S});return}var F=(0,x.addBorderNode)(p,"_bt"),W=(0,x.addBorderNode)(p,"_bb"),b=p.node(E);p.setParent(F,E),b.borderTop=F,p.setParent(W,E),b.borderBottom=W,D==null||D.forEach(function(h){w(p,m,S,y,g,O,h);var K=p.node(h),U=K.borderTop?K.borderTop:h,Y=K.borderBottom?K.borderBottom:h,Z=K.borderTop?y:2*y,H=U!==Y?1:g-O[E]+1;p.setEdge(F,U,{minlen:H,weight:Z,nestingEdge:!0}),p.setEdge(Y,W,{minlen:H,weight:Z,nestingEdge:!0})}),p.parent(E)||p.setEdge(m,F,{weight:0,minlen:g+O[E]})},T=function(p){var m,S={},y=function(g,O){var E=p.children(g);E==null||E.forEach(function(D){return y(D,O+1)}),S[g]=O};return(m=p.children())===null||m===void 0||m.forEach(function(g){return y(g,1)}),S},L=function(p){var m=0;return p.edges().forEach(function(S){m+=p.edge(S).weight}),m},P=function(p){var m=p.graph();m.nestingRoot&&p.removeNode(m.nestingRoot),delete m.nestingRoot,p.edges().forEach(function(S){var y=p.edge(S);y.nestingEdge&&p.removeEdgeObj(S)})};z.default={run:k,cleanup:P}},546171:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(269209),k=function(L){L.graph().dummyChains=[],L.edges().forEach(function(P){return w(L,P)})},w=function(L,P){var p=P.v,m=L.node(p).rank,S=P.w,y=L.node(S).rank,g=P.name,O=L.edge(P),E=O.labelRank;if(y!==m+1){L.removeEdgeObj(P);var D=L.graph(),F,W,b;for(b=0,++m;m<y;++b,++m)O.points=[],W={edgeLabel:O,width:0,height:0,edgeObj:P,rank:m},F=(0,x.addDummyNode)(L,"edge",W,"_d"),m===E&&(W.width=O.width,W.height=O.height,W.dummy="edge-label",W.labelpos=O.labelpos),L.setEdge(p,F,{weight:O.weight},g),b===0&&(D.dummyChains||(D.dummyChains=[]),D.dummyChains.push(F)),p=F;L.setEdge(p,S,{weight:O.weight},g)}},T=function(L){var P;(P=L.graph().dummyChains)===null||P===void 0||P.forEach(function(p){var m=L.node(p),S=m.edgeLabel,y;m.edgeObj&&L.setEdgeObj(m.edgeObj,S);for(var g=p;m.dummy;)y=L.successors(g)[0],L.removeNode(g),S.points.push({x:m.x,y:m.y}),m.dummy==="edge-label"&&(S.x=m.x,S.y=m.y,S.width=m.width,S.height=m.height),g=y,m=L.node(g)})};z.default={run:k,undo:T}},680314:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(x,k,w){var T={},L;w==null||w.forEach(function(P){for(var p=x.parent(P),m,S;p;){if(m=x.parent(p),m?(S=T[m],T[m]=p):(S=L,L=p),S&&S!==p){k.setEdge(S,p);return}p=m}})};z.default=C},989921:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(x,k){return k.map(function(w){var T=x.inEdges(w);if(!(T!=null&&T.length))return{v:w};{var L={sum:0,weight:0};return T==null||T.forEach(function(P){var p=x.edge(P),m=x.node(P.v);L.sum+=p.weight*m.order,L.weight+=p.weight}),{v:w,barycenter:L.sum/L.weight,weight:L.weight}}})};z.default=C},277006:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(627652),k=function(T,L,P){var p=w(T),m=new x.Graph({compound:!0}).setGraph({root:p}).setDefaultNodeLabel(function(S){return T.node(S)});return T.nodes().forEach(function(S){var y,g=T.node(S),O=T.parent(S);(g.rank===L||g.minRank<=L&&L<=g.maxRank)&&(m.setNode(S),m.setParent(S,O||p),(y=T[P](S))===null||y===void 0||y.forEach(function(E){var D=E.v===S?E.w:E.v,F=m.edgeFromArgs(D,S),W=F!==void 0?F.weight:0;m.setEdge(D,S,{weight:T.edge(E).weight+W})}),g.hasOwnProperty("minRank")&&m.setNode(S,{borderLeft:g.borderLeft[L],borderRight:g.borderRight[L]}))}),m},w=function(T){for(var L;T.hasNode(L="_root".concat(Math.random())););return L};z.default=k},632957:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(269209),k=function(T,L,P){for(var p=(0,x.zipObject)(P,P.map(function(D,F){return F})),m=L.map(function(D){var F,W=(F=T.outEdges(D))===null||F===void 0?void 0:F.map(function(b){return{pos:p[b.w]||0,weight:T.edge(b).weight}});return W==null?void 0:W.sort(function(b,h){return b.pos-h.pos})}),S=m.flat().filter(function(D){return D!==void 0}),y=1;y<P.length;)y<<=1;var g=2*y-1;y-=1;var O=Array(g).fill(0,0,g),E=0;return S==null||S.forEach(function(D){if(D){var F=D.pos+y;O[F]+=D.weight;for(var W=0;F>0;)F%2&&(W+=O[F+1]),F=F-1>>1,O[F]+=D.weight;E+=D.weight*W}}),E},w=function(T,L){for(var P=0,p=1;p<(L==null?void 0:L.length);p+=1)P+=k(T,L[p-1],L[p]);return P};z.default=w},819597:function(He,z,C){"use strict";var x=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(z,"__esModule",{value:!0});var k=x(C(115697)),w=x(C(632957)),T=x(C(277006)),L=x(C(680314)),P=x(C(99455)),p=C(449784),m=C(627652),S=C(269209),y=function(D,F){for(var W=(0,S.maxRank)(D),b=[],h=[],K=1;K<W+1;K++)b.push(K);for(var K=W-1;K>-1;K--)h.push(K);var U=g(D,b,"inEdges"),Y=g(D,h,"outEdges"),Z=(0,k.default)(D);E(D,Z);for(var H=Number.POSITIVE_INFINITY,q,K=0,Q=0;Q<4;++K,++Q){O(K%2?U:Y,K%4>=2,!1,F),Z=(0,S.buildLayerMatrix)(D);var J=(0,w.default)(D,Z);J<H&&(Q=0,q=(0,p.clone)(Z),H=J)}Z=(0,k.default)(D),E(D,Z);for(var K=0,Q=0;Q<4;++K,++Q){O(K%2?U:Y,K%4>=2,!0,F),Z=(0,S.buildLayerMatrix)(D);var J=(0,w.default)(D,Z);J<H&&(Q=0,q=(0,p.clone)(Z),H=J)}E(D,q)},g=function(D,F,W){return F.map(function(b){return(0,T.default)(D,b,W)})},O=function(D,F,W,b){var h=new m.Graph;D==null||D.forEach(function(K){for(var U,Y=K.graph().root,Z=(0,P.default)(K,Y,h,F,W,b),H=0;H<((U=Z.vs)===null||U===void 0?void 0:U.length);H++){var q=K.node(Z.vs[H]);q&&(q.order=H)}(0,L.default)(K,h,Z.vs)})},E=function(D,F){F==null||F.forEach(function(W){W==null||W.forEach(function(b,h){D.node(b).order=h})})};z.default=y},724956:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(x,k){for(var w=x.nodes().filter(function(m){var S;return!(!((S=x.children(m))===null||S===void 0)&&S.length)}),T=w.map(function(m){return x.node(m).rank}),L=Math.max.apply(Math,T),P=[],p=0;p<L+1;p++)P[p]=[];k==null||k.forEach(function(m){var S=x.node(m);!S||S!=null&&S.dummy||isNaN(S.rank)||(S.fixorder=P[S.rank].length,P[S.rank].push(m))})};z.default=C},115697:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(233446),k=function(w){for(var T={},L=w.nodes().filter(function(D){var F;return!(!((F=w.children(D))===null||F===void 0)&&F.length)}),P=L.map(function(D){return w.node(D).rank}),p=(0,x.max)(P),m=[],S=0;S<p+1;S++)m.push([]);var y=function(D){var F;if(!T.hasOwnProperty(D)){T[D]=!0;var W=w.node(D);isNaN(W.rank)||m[W.rank].push(D),(F=w.successors(D))===null||F===void 0||F.forEach(function(b){return y(b)})}},g=L.sort(function(D,F){return w.node(D).rank-w.node(F).rank}),O=g.filter(function(D){return w.node(D).fixorder!==void 0}),E=O.sort(function(D,F){return w.node(D).fixorder-w.node(F).fixorder});return E==null||E.forEach(function(D){isNaN(w.node(D).rank)||m[w.node(D).rank].push(D),T[D]=!0}),g==null||g.forEach(y),m};z.default=k},707043:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(w,T){var L,P,p,m={};w==null||w.forEach(function(y,g){m[y.v]={i:g,indegree:0,in:[],out:[],vs:[y.v]};var O=m[y.v];y.barycenter!==void 0&&(O.barycenter=y.barycenter,O.weight=y.weight)}),(L=T.edges())===null||L===void 0||L.forEach(function(y){var g=m[y.v],O=m[y.w];g!==void 0&&O!==void 0&&(O.indegree++,g.out.push(m[y.w]))});var S=(p=(P=Object.values(m)).filter)===null||p===void 0?void 0:p.call(P,function(y){return!y.indegree});return x(S)},x=function(w){for(var T,L,P=[],p=function(O){return function(E){E.merged||(E.barycenter===void 0||O.barycenter===void 0||E.barycenter>=O.barycenter)&&k(O,E)}},m=function(O){return function(E){E.in.push(O),--E.indegree===0&&w.push(E)}},S=function(){var O=w.pop();P.push(O),(T=O.in.reverse())===null||T===void 0||T.forEach(function(E){return p(O)(E)}),(L=O.out)===null||L===void 0||L.forEach(function(E){return m(O)(E)})};w!=null&&w.length;)S();var y=P.filter(function(O){return!O.merged}),g=["vs","i","barycenter","weight"];return y.map(function(O){var E={};return g==null||g.forEach(function(D){O[D]!==void 0&&(E[D]=O[D])}),E})},k=function(w,T){var L,P=0,p=0;w.weight&&(P+=w.barycenter*w.weight,p+=w.weight),T.weight&&(P+=T.barycenter*T.weight,p+=T.weight),w.vs=(L=T.vs)===null||L===void 0?void 0:L.concat(w.vs),w.barycenter=P/p,w.weight=p,w.i=Math.min(T.i,w.i),T.merged=!0};z.default=C},99455:function(He,z,C){"use strict";var x=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(z,"__esModule",{value:!0});var k=x(C(989921)),w=x(C(707043)),T=x(C(421498)),L=function(m,S,y,g,O,E){var D,F,W,b,h=m.children(S),K=m.node(S),U=K?K.borderLeft:void 0,Y=K?K.borderRight:void 0,Z={};U&&(h=h==null?void 0:h.filter(function(nt){return nt!==U&&nt!==Y}));var H=(0,k.default)(m,h||[]);H==null||H.forEach(function(nt){var yt;if(!((yt=m.children(nt.v))===null||yt===void 0)&&yt.length){var gt=L(m,nt.v,y,g,E);Z[nt.v]=gt,gt.hasOwnProperty("barycenter")&&p(nt,gt)}});var q=(0,w.default)(H,y);P(q,Z),(D=q.filter(function(nt){return nt.vs.length>0}))===null||D===void 0||D.forEach(function(nt){var yt=m.node(nt.vs[0]);yt&&(nt.fixorder=yt.fixorder,nt.order=yt.order)});var Q=(0,T.default)(q,g,O,E);if(U&&(Q.vs=[U,Q.vs,Y].flat(),!((F=m.predecessors(U))===null||F===void 0)&&F.length)){var J=m.node(((W=m.predecessors(U))===null||W===void 0?void 0:W[0])||""),ft=m.node(((b=m.predecessors(Y))===null||b===void 0?void 0:b[0])||"");Q.hasOwnProperty("barycenter")||(Q.barycenter=0,Q.weight=0),Q.barycenter=(Q.barycenter*Q.weight+J.order+ft.order)/(Q.weight+2),Q.weight+=2}return Q},P=function(m,S){m==null||m.forEach(function(y){var g,O=(g=y.vs)===null||g===void 0?void 0:g.map(function(E){return S[E]?S[E].vs:E});y.vs=O.flat()})},p=function(m,S){m.barycenter!==void 0?(m.barycenter=(m.barycenter*m.weight+S.barycenter*S.weight)/(m.weight+S.weight),m.weight+=S.weight):(m.barycenter=S.barycenter,m.weight=S.weight)};z.default=L},421498:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(269209),k=function(L,P,p,m){var S=(0,x.partition)(L,function(b){var h=b.hasOwnProperty("fixorder")&&!isNaN(b.fixorder);return m?!h&&b.hasOwnProperty("barycenter"):h||b.hasOwnProperty("barycenter")}),y=S.lhs,g=S.rhs.sort(function(b,h){return-b.i- -h.i}),O=[],E=0,D=0,F=0;y==null||y.sort(T(!!P,!!p)),F=w(O,g,F),y==null||y.forEach(function(b){var h;F+=(h=b.vs)===null||h===void 0?void 0:h.length,O.push(b.vs),E+=b.barycenter*b.weight,D+=b.weight,F=w(O,g,F)});var W={vs:O.flat()};return D&&(W.barycenter=E/D,W.weight=D),W},w=function(L,P,p){for(var m=p,S;P.length&&(S=P[P.length-1]).i<=m;)P.pop(),L==null||L.push(S.vs),m++;return m},T=function(L,P){return function(p,m){if(p.fixorder!==void 0&&m.fixorder!==void 0)return p.fixorder-m.fixorder;if(p.barycenter<m.barycenter)return-1;if(p.barycenter>m.barycenter)return 1;if(P&&p.order!==void 0&&m.order!==void 0){if(p.order<m.order)return-1;if(p.order>m.order)return 1}return L?m.i-p.i:p.i-m.i}};z.default=k},933562:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(w){var T,L={},P=0,p=function(m){var S,y=P;(S=w.children(m))===null||S===void 0||S.forEach(p),L[m]={low:y,lim:P++}};return(T=w.children())===null||T===void 0||T.forEach(p),L},x=function(w,T,L,P){var p=[],m=[],S=Math.min(T[L].low,T[P].low),y=Math.max(T[L].lim,T[P].lim),g,O;g=L;do g=w.parent(g),p.push(g);while(g&&(T[g].low>S||y>T[g].lim));for(O=g,g=P;g&&g!==O;)m.push(g),g=w.parent(g);return{lca:O,path:p.concat(m.reverse())}},k=function(w){var T,L=C(w);(T=w.graph().dummyChains)===null||T===void 0||T.forEach(function(P){var p,m,S=P,y=w.node(S),g=y.edgeObj;if(g)for(var O=x(w,L,g.v,g.w),E=O.path,D=O.lca,F=0,W=E[F],b=!0;S!==g.w;){if(y=w.node(S),b){for(;W!==D&&((p=w.node(W))===null||p===void 0?void 0:p.maxRank)<y.rank;)F++,W=E[F];W===D&&(b=!1)}if(!b){for(;F<E.length-1&&((m=w.node(E[F+1]))===null||m===void 0?void 0:m.minRank)<=y.rank;)F++;W=E[F]}w.setParent(S,W),S=w.successors(S)[0]}})};z.default=k},371963:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var U=function(Y,Z){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,q){H.__proto__=q}||function(H,q){for(var Q in q)Object.prototype.hasOwnProperty.call(q,Q)&&(H[Q]=q[Q])},U(Y,Z)};return function(Y,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");U(Y,Z);function H(){this.constructor=Y}Y.prototype=Z===null?Object.create(Z):(H.prototype=Z.prototype,new H)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.width=z.sep=z.positionX=z.balance=z.alignCoordinates=z.findSmallestWidthAlignment=z.buildBlockGraph=z.horizontalCompaction=z.verticalAlignment=z.hasConflict=z.addConflict=z.findOtherInnerSegmentNode=z.findType2Conflicts=z.findType1Conflicts=void 0;var k=C(199905),w=C(233446),T=C(269209),L=function(U){x(Y,U);function Y(){return U!==null&&U.apply(this,arguments)||this}return Y}(k.Graph),P=function(U,Y){var Z={},H=function(q,Q){var J=0,ft=0,nt=q.length,yt=Q==null?void 0:Q[(Q==null?void 0:Q.length)-1];return Q==null||Q.forEach(function(gt,zt){var Mt,Ct=(0,z.findOtherInnerSegmentNode)(U,gt),rt=Ct?U.node(Ct).order:nt;(Ct||gt===yt)&&((Mt=Q.slice(ft,zt+1))===null||Mt===void 0||Mt.forEach(function(ot){var Tt;(Tt=U.predecessors(ot))===null||Tt===void 0||Tt.forEach(function(Rt){var st,bt=U.node(Rt),Ft=bt.order;(Ft<J||rt<Ft)&&!(bt.dummy&&(!((st=U.node(ot))===null||st===void 0)&&st.dummy))&&(0,z.addConflict)(Z,Rt,ot)})}),ft=zt+1,J=rt)}),Q};return Y!=null&&Y.length&&Y.reduce(H),Z};z.findType1Conflicts=P;var p=function(U,Y){var Z={};function H(ft,nt,yt,gt,zt){for(var Mt,Ct,rt,ot=nt;ot<yt;ot++)rt=ft[ot],!((Mt=U.node(rt))===null||Mt===void 0)&&Mt.dummy&&((Ct=U.predecessors(rt))===null||Ct===void 0||Ct.forEach(function(Tt){var Rt=U.node(Tt);Rt.dummy&&(Rt.order<gt||Rt.order>zt)&&(0,z.addConflict)(Z,Tt,rt)}))}function q(ft){return JSON.stringify(ft.slice(1))}function Q(ft,nt){var yt=q(ft);nt.get(yt)||(H.apply(void 0,ft),nt.set(yt,!0))}var J=function(ft,nt){var yt=-1,gt,zt=0,Mt=new Map;return nt==null||nt.forEach(function(Ct,rt){var ot;if(((ot=U.node(Ct))===null||ot===void 0?void 0:ot.dummy)==="border"){var Tt=U.predecessors(Ct)||[];Tt.length&&(gt=U.node(Tt[0]).order,Q([nt,zt,rt,yt,gt],Mt),zt=rt,yt=gt)}Q([nt,zt,nt.length,gt,ft.length],Mt)}),nt};return Y!=null&&Y.length&&Y.reduce(J),Z};z.findType2Conflicts=p;var m=function(U,Y){var Z,H;if(!((Z=U.node(Y))===null||Z===void 0)&&Z.dummy)return(H=U.predecessors(Y))===null||H===void 0?void 0:H.find(function(q){return U.node(q).dummy})};z.findOtherInnerSegmentNode=m;var S=function(U,Y,Z){var H=Y,q=Z;if(H>q){var Q=H;H=q,q=Q}var J=U[H];J||(U[H]=J={}),J[q]=!0};z.addConflict=S;var y=function(U,Y,Z){var H=Y,q=Z;if(H>q){var Q=Y;H=q,q=Q}return!!U[H]};z.hasConflict=y;var g=function(U,Y,Z,H){var q={},Q={},J={};return Y==null||Y.forEach(function(ft){ft==null||ft.forEach(function(nt,yt){q[nt]=nt,Q[nt]=nt,J[nt]=yt})}),Y==null||Y.forEach(function(ft){var nt=-1;ft==null||ft.forEach(function(yt){var gt=H(yt);if(gt.length){gt=gt.sort(function(ot,Tt){return J[ot]-J[Tt]});for(var zt=(gt.length-1)/2,Mt=Math.floor(zt),Ct=Math.ceil(zt);Mt<=Ct;++Mt){var rt=gt[Mt];Q[yt]===yt&&nt<J[rt]&&!(0,z.hasConflict)(Z,yt,rt)&&(Q[rt]=yt,Q[yt]=q[yt]=q[rt],nt=J[rt])}}})}),{root:q,align:Q}};z.verticalAlignment=g;var O=function(U,Y,Z,H,q){var Q,J={},ft=(0,z.buildBlockGraph)(U,Y,Z,q),nt=q?"borderLeft":"borderRight",yt=function(Mt,Ct){for(var rt=ft.nodes(),ot=rt.pop(),Tt={};ot;)Tt[ot]?Mt(ot):(Tt[ot]=!0,rt.push(ot),rt=rt.concat(Ct(ot))),ot=rt.pop()},gt=function(Mt){J[Mt]=(ft.inEdges(Mt)||[]).reduce(function(Ct,rt){return Math.max(Ct,(J[rt.v]||0)+ft.edge(rt))},0)},zt=function(Mt){var Ct=(ft.outEdges(Mt)||[]).reduce(function(ot,Tt){return Math.min(ot,(J[Tt.w]||0)-ft.edge(Tt))},Number.POSITIVE_INFINITY),rt=U.node(Mt);Ct!==Number.POSITIVE_INFINITY&&rt.borderType!==nt&&(J[Mt]=Math.max(J[Mt],Ct))};return yt(gt,ft.predecessors.bind(ft)),yt(zt,ft.successors.bind(ft)),(Q=Object.values(H))===null||Q===void 0||Q.forEach(function(Mt){J[Mt]=J[Z[Mt]]}),J};z.horizontalCompaction=O;var E=function(U,Y,Z,H){var q=new L,Q=U.graph(),J=(0,z.sep)(Q.nodesep,Q.edgesep,H);return Y==null||Y.forEach(function(ft){var nt;ft==null||ft.forEach(function(yt){var gt=Z[yt];if(q.setNode(gt),nt){var zt=Z[nt],Mt=q.edgeFromArgs(zt,gt);q.setEdge(zt,gt,Math.max(J(U,yt,nt),Mt||0))}nt=yt})}),q};z.buildBlockGraph=E;var D=function(U,Y){return(0,T.minBy)(Object.values(Y),function(Z){var H,q=Number.NEGATIVE_INFINITY,Q=Number.POSITIVE_INFINITY;return(H=Object.keys(Z))===null||H===void 0||H.forEach(function(J){var ft=Z[J],nt=(0,z.width)(U,J)/2;q=Math.max(ft+nt,q),Q=Math.min(ft-nt,Q)}),q-Q})};z.findSmallestWidthAlignment=D;function F(U,Y){var Z=Object.values(Y),H=(0,w.min)(Z),q=(0,w.max)(Z);["u","d"].forEach(function(Q){["l","r"].forEach(function(J){var ft=Q+J,nt=U[ft],yt;if(nt!==Y){var gt=Object.values(nt);yt=J==="l"?H-(0,w.min)(gt):q-(0,w.max)(gt),yt&&(U[ft]={},Object.keys(nt).forEach(function(zt){U[ft][zt]=nt[zt]+yt}))}})})}z.alignCoordinates=F;var W=function(U,Y){var Z={};return Object.keys(U.ul).forEach(function(H){if(Y)Z[H]=U[Y.toLowerCase()][H];else{var q=Object.values(U).map(function(Q){return Q[H]});Z[H]=(q[0]+q[1])/2}}),Z};z.balance=W;var b=function(U){var Y=(0,T.buildLayerMatrix)(U),Z=Object.assign((0,z.findType1Conflicts)(U,Y),(0,z.findType2Conflicts)(U,Y)),H={},q;["u","d"].forEach(function(J){q=J==="u"?Y:Object.values(Y).reverse(),["l","r"].forEach(function(ft){ft==="r"&&(q=q.map(function(zt){return Object.values(zt).reverse()}));var nt=(J==="u"?U.predecessors:U.successors).bind(U),yt=(0,z.verticalAlignment)(U,q,Z,nt),gt=(0,z.horizontalCompaction)(U,q,yt.root,yt.align,ft==="r");ft==="r"&&Object.keys(gt).forEach(function(zt){gt[zt]=-gt[zt]}),H[J+ft]=gt})});var Q=(0,z.findSmallestWidthAlignment)(U,H);return F(H,Q),(0,z.balance)(H,U.graph().align)};z.positionX=b;var h=function(U,Y,Z){return function(H,q,Q){var J=H.node(q),ft=H.node(Q),nt=0,yt;if(nt+=J.width/2,J.hasOwnProperty("labelpos"))switch((J.labelpos||"").toLowerCase()){case"l":yt=-J.width/2;break;case"r":yt=J.width/2;break}if(yt&&(nt+=Z?yt:-yt),yt=0,nt+=(J.dummy?Y:U)/2,nt+=(ft.dummy?Y:U)/2,nt+=ft.width/2,ft.labelpos)switch((ft.labelpos||"").toLowerCase()){case"l":yt=ft.width/2;break;case"r":yt=-ft.width/2;break}return yt&&(nt+=Z?yt:-yt),yt=0,nt}};z.sep=h;var K=function(U,Y){return U.node(Y).width||0};z.width=K},100095:function(He,z,C){"use strict";var x=this&&this.__spreadArray||function(p,m,S){if(S||arguments.length===2)for(var y=0,g=m.length,O;y<g;y++)(O||!(y in m))&&(O||(O=Array.prototype.slice.call(m,0,y)),O[y]=m[y]);return p.concat(O||Array.prototype.slice.call(m))};Object.defineProperty(z,"__esModule",{value:!0});var k=C(269209),w=C(371963),T=function(p){var m=(0,k.buildLayerMatrix)(p),S=p.graph().ranksep,y=0;m==null||m.forEach(function(g){var O=g.map(function(D){return p.node(D).height}),E=Math.max.apply(Math,x(x([],O,!1),[0],!1));g==null||g.forEach(function(D){p.node(D).y=y+E/2}),y+=E+S})},L=function(p){var m=(0,k.buildLayerMatrix)(p),S=Object.assign((0,w.findType1Conflicts)(p,m),(0,w.findType2Conflicts)(p,m)),y={},g=[];["u","d"].forEach(function(E){g=E==="u"?m:Object.values(m).reverse(),["l","r"].forEach(function(D){D==="r"&&(g=g.map(function(h){return Object.values(h).reverse()}));var F=(E==="u"?p.predecessors:p.successors).bind(p),W=(0,w.verticalAlignment)(p,g,S,F),b=(0,w.horizontalCompaction)(p,g,W.root,W.align,D==="r");D==="r"&&Object.keys(b).forEach(function(h){return b[h]=-b[h]}),y[E+D]=b})});var O=(0,w.findSmallestWidthAlignment)(p,y);return O&&(0,w.alignCoordinates)(y,O),(0,w.balance)(y,p.graph().align)},P=function(p){var m,S=(0,k.asNonCompoundGraph)(p);T(S);var y=L(S);(m=Object.keys(y))===null||m===void 0||m.forEach(function(g){S.node(g).x=y[g]})};z.default=P},813614:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.feasibleTreeWithLayer=z.feasibleTree=void 0;var x=C(337323),k=C(269209),w=C(627652),T=function(y){var g=new w.Graph({directed:!1}),O=y.nodes()[0],E=y.nodeCount();g.setNode(O,{});for(var D,F;L(g,y)<E;)D=m(g,y),F=g.hasNode(D.v)?(0,x.slack)(y,D):-(0,x.slack)(y,D),S(g,y,F);return g};z.feasibleTree=T;var L=function(y,g){var O=function(E){g.nodeEdges(E).forEach(function(D){var F=D.v,W=E===F?D.w:F;!y.hasNode(W)&&!(0,x.slack)(g,D)&&(y.setNode(W,{}),y.setEdge(E,W,{}),O(W))})};return y.nodes().forEach(O),y.nodeCount()},P=function(y){var g=new w.Graph({directed:!1}),O=y.nodes()[0],E=y.nodes().filter(function(W){return!!y.node(W)}).length;g.setNode(O,{});for(var D,F;p(g,y)<E;)D=m(g,y),F=g.hasNode(D.v)?(0,x.slack)(y,D):-(0,x.slack)(y,D),S(g,y,F);return g};z.feasibleTreeWithLayer=P;var p=function(y,g){var O=function(E){var D;(D=g.nodeEdges(E))===null||D===void 0||D.forEach(function(F){var W=F.v,b=E===W?F.w:W;!y.hasNode(b)&&(g.node(b).layer!==void 0||!(0,x.slack)(g,F))&&(y.setNode(b,{}),y.setEdge(E,b,{}),O(b))})};return y.nodes().forEach(O),y.nodeCount()},m=function(y,g){return(0,k.minBy)(g.edges(),function(O){return y.hasNode(O.v)!==y.hasNode(O.w)?(0,x.slack)(g,O):1/0})},S=function(y,g,O){y.nodes().forEach(function(E){g.node(E).rank||(g.node(E).rank=0),g.node(E).rank+=O})};z.default={feasibleTree:T,feasibleTreeWithLayer:P}},576827:function(He,z,C){"use strict";var x=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(z,"__esModule",{value:!0});var k=C(337323),w=C(813614),T=x(C(432253)),L=function(S){switch(S.graph().ranker){case"network-simplex":m(S);break;case"tight-tree":p(S);break;case"longest-path":P(S);break;default:p(S)}},P=k.longestPath,p=function(S){(0,k.longestPathWithLayer)(S),(0,w.feasibleTreeWithLayer)(S)},m=function(S){(0,T.default)(S)};z.default=L},432253:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.exchangeEdges=z.enterEdge=z.leaveEdge=z.initLowLimValues=z.calcCutValue=z.initCutValues=void 0;var x=C(813614),k=C(337323),w=C(269209),T=C(199905),L=T.algorithm.preorder,P=T.algorithm.postorder,p=function(K){var U=(0,w.simplify)(K);(0,k.longestPath)(U);var Y=(0,x.feasibleTree)(U);(0,z.initLowLimValues)(Y),(0,z.initCutValues)(Y,U);for(var Z,H;Z=(0,z.leaveEdge)(Y);)H=(0,z.enterEdge)(Y,U,Z),(0,z.exchangeEdges)(Y,U,Z,H)},m=function(K,U){var Y=P(K,K.nodes());Y=Y==null?void 0:Y.slice(0,(Y==null?void 0:Y.length)-1),Y==null||Y.forEach(function(Z){S(K,U,Z)})};z.initCutValues=m;var S=function(K,U,Y){var Z=K.node(Y),H=Z.parent;K.edgeFromArgs(Y,H).cutvalue=(0,z.calcCutValue)(K,U,Y)},y=function(K,U,Y){var Z,H=K.node(Y),q=H.parent,Q=!0,J=U.edgeFromArgs(Y,q),ft=0;return J||(Q=!1,J=U.edgeFromArgs(q,Y)),ft=J.weight,(Z=U.nodeEdges(Y))===null||Z===void 0||Z.forEach(function(nt){var yt=nt.v===Y,gt=yt?nt.w:nt.v;if(gt!==q){var zt=yt===Q,Mt=U.edge(nt).weight;if(ft+=zt?Mt:-Mt,b(K,Y,gt)){var Ct=K.edgeFromArgs(Y,gt).cutvalue;ft+=zt?-Ct:Ct}}}),ft};z.calcCutValue=y;var g=function(K,U){U===void 0&&(U=K.nodes()[0]),O(K,{},1,U)};z.initLowLimValues=g;var O=function(K,U,Y,Z,H){var q,Q=Y,J=Y,ft=K.node(Z);return U[Z]=!0,(q=K.neighbors(Z))===null||q===void 0||q.forEach(function(nt){U[nt]||(J=O(K,U,J,nt,Z))}),ft.low=Q,ft.lim=J++,H?ft.parent=H:delete ft.parent,J},E=function(K){return K.edges().find(function(U){return K.edge(U).cutvalue<0})};z.leaveEdge=E;var D=function(K,U,Y){var Z=Y.v,H=Y.w;U.hasEdge(Z,H)||(Z=Y.w,H=Y.v);var q=K.node(Z),Q=K.node(H),J=q,ft=!1;q.lim>Q.lim&&(J=Q,ft=!0);var nt=U.edges().filter(function(yt){return ft===h(K,K.node(yt.v),J)&&ft!==h(K,K.node(yt.w),J)});return(0,w.minBy)(nt,function(yt){return(0,k.slack)(U,yt)})};z.enterEdge=D;var F=function(K,U,Y,Z){var H=Y.v,q=Y.w;K.removeEdge(H,q),K.setEdge(Z.v,Z.w,{}),(0,z.initLowLimValues)(K),(0,z.initCutValues)(K,U),W(K,U)};z.exchangeEdges=F;var W=function(K,U){var Y=K.nodes().find(function(H){var q;return!(!((q=U.node(H))===null||q===void 0)&&q.parent)}),Z=L(K,Y);Z=Z==null?void 0:Z.slice(1),Z==null||Z.forEach(function(H){var q=K.node(H).parent,Q=U.edgeFromArgs(H,q),J=!1;Q||(Q=U.edgeFromArgs(q,H),J=!0),U.node(H).rank=U.node(q).rank+(J?Q.minlen:-Q.minlen)})},b=function(K,U,Y){return K.hasEdge(U,Y)},h=function(K,U,Y){return Y.low<=U.lim&&U.lim<=Y.lim};z.default=p},337323:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.slack=z.longestPathWithLayer=z.longestPath=void 0;var C=function(w){var T,L={},P=function(p){var m,S=w.node(p);if(!S)return 0;if(L[p])return S.rank;L[p]=!0;var y;return(m=w.outEdges(p))===null||m===void 0||m.forEach(function(g){var O=P(g.w),E=w.edge(g).minlen,D=O-E;D&&(y===void 0||D<y)&&(y=D)}),y||(y=0),S.rank=y,y};(T=w.sources())===null||T===void 0||T.forEach(function(p){return P(p)})};z.longestPath=C;var x=function(w){var T,L={},P,p=function(y){var g,O=w.node(y);if(!O)return 0;if(L[y])return O.rank;L[y]=!0;var E;return(g=w.outEdges(y))===null||g===void 0||g.forEach(function(D){var F=p(D.w),W=w.edge(D).minlen,b=F-W;b&&(E===void 0||b<E)&&(E=b)}),E||(E=0),(P===void 0||E<P)&&(P=E),O.rank=E,E};(T=w.sources())===null||T===void 0||T.forEach(function(y){w.node(y)&&p(y)}),P===void 0&&(P=0);var m={},S=function(y,g){var O,E=w.node(y),D=isNaN(E.layer)?g:E.layer;(E.rank===void 0||E.rank<D)&&(E.rank=D),!m[y]&&(m[y]=!0,(O=w.outEdges(y))===null||O===void 0||O.map(function(F){S(F.w,D+w.edge(F).minlen)}))};w.nodes().forEach(function(y){var g=w.node(y);g&&(isNaN(g.layer)?g.rank-=P:S(y,g.layer))})};z.longestPathWithLayer=x;var k=function(w,T){return w.node(T.w).rank-w.node(T.v).rank-w.edge(T).minlen};z.slack=k,z.default={longestPath:C,longestPathWithLayer:x,slack:k}},269209:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.minBy=z.notime=z.time=z.partition=z.maxRank=z.addBorderNode=z.removeEmptyRanks=z.normalizeRanks=z.buildLayerMatrix=z.intersectRect=z.predecessorWeights=z.successorWeights=z.zipObject=z.asNonCompoundGraph=z.simplify=z.addDummyNode=void 0;var x=C(449784),k=C(627652),w=function(U,Y){return Number(U)-Number(Y)},T=function(U,Y,Z,H){var q;do q="".concat(H).concat(Math.random());while(U.hasNode(q));return Z.dummy=Y,U.setNode(q,Z),q};z.addDummyNode=T;var L=function(U){var Y=new k.Graph().setGraph(U.graph());return U.nodes().forEach(function(Z){Y.setNode(Z,U.node(Z))}),U.edges().forEach(function(Z){var H=Y.edgeFromArgs(Z.v,Z.w)||{weight:0,minlen:1},q=U.edge(Z);Y.setEdge(Z.v,Z.w,{weight:H.weight+q.weight,minlen:Math.max(H.minlen,q.minlen)})}),Y};z.simplify=L;var P=function(U){var Y=new k.Graph({multigraph:U.isMultigraph()}).setGraph(U.graph());return U.nodes().forEach(function(Z){var H;!((H=U.children(Z))===null||H===void 0)&&H.length||Y.setNode(Z,U.node(Z))}),U.edges().forEach(function(Z){Y.setEdgeObj(Z,U.edge(Z))}),Y};z.asNonCompoundGraph=P;var p=function(U,Y){return U==null?void 0:U.reduce(function(Z,H,q){return Z[H]=Y[q],Z},{})};z.zipObject=p;var m=function(U){var Y={};return U.nodes().forEach(function(Z){var H,q={};(H=U.outEdges(Z))===null||H===void 0||H.forEach(function(Q){var J;q[Q.w]=(q[Q.w]||0)+(((J=U.edge(Q))===null||J===void 0?void 0:J.weight)||0)}),Y[Z]=q}),Y};z.successorWeights=m;var S=function(U){var Y=U.nodes(),Z=Y.map(function(H){var q,Q={};return(q=U.inEdges(H))===null||q===void 0||q.forEach(function(J){Q[J.v]=(Q[J.v]||0)+U.edge(J).weight}),Q});return(0,z.zipObject)(Y,Z)};z.predecessorWeights=S;var y=function(U,Y){var Z=Number(U.x),H=Number(U.y),q=Number(Y.x)-Z,Q=Number(Y.y)-H,J=Number(U.width)/2,ft=Number(U.height)/2;if(!q&&!Q)return{x:0,y:0};var nt,yt;return Math.abs(Q)*J>Math.abs(q)*ft?(Q<0&&(ft=-ft),nt=ft*q/Q,yt=ft):(q<0&&(J=-J),nt=J,yt=J*Q/q),{x:Z+nt,y:H+yt}};z.intersectRect=y;var g=function(U){for(var Y=[],Z=(0,z.maxRank)(U)+1,H=0;H<Z;H++)Y.push([]);U.nodes().forEach(function(q){var Q=U.node(q);if(Q){var J=Q.rank;J!==void 0&&Y[J]&&Y[J].push(q)}});for(var H=0;H<Z;H++)Y[H]=Y[H].sort(function(Q,J){var ft,nt;return w((ft=U.node(Q))===null||ft===void 0?void 0:ft.order,(nt=U.node(J))===null||nt===void 0?void 0:nt.order)});return Y};z.buildLayerMatrix=g;var O=function(U){var Y=U.nodes().filter(function(H){var q;return((q=U.node(H))===null||q===void 0?void 0:q.rank)!==void 0}).map(function(H){return U.node(H).rank}),Z=Math.min.apply(Math,Y);U.nodes().forEach(function(H){var q=U.node(H);q.hasOwnProperty("rank")&&Z!==1/0&&(q.rank-=Z)})};z.normalizeRanks=O;var E=function(U){var Y=U.nodes(),Z=Y.filter(function(yt){var gt;return((gt=U.node(yt))===null||gt===void 0?void 0:gt.rank)!==void 0}).map(function(yt){return U.node(yt).rank}),H=Math.min.apply(Math,Z),q=[];Y.forEach(function(yt){var gt,zt=(((gt=U.node(yt))===null||gt===void 0?void 0:gt.rank)||0)-H;q[zt]||(q[zt]=[]),q[zt].push(yt)});for(var Q=0,J=U.graph().nodeRankFactor||0,ft=0;ft<q.length;ft++){var nt=q[ft];nt===void 0?ft%J!==0&&(Q-=1):Q&&(nt==null||nt.forEach(function(yt){var gt=U.node(yt);gt&&(gt.rank=gt.rank||0,gt.rank+=Q)}))}};z.removeEmptyRanks=E;var D=function(U,Y,Z,H){var q={width:0,height:0};return(0,x.isNumber)(Z)&&(0,x.isNumber)(H)&&(q.rank=Z,q.order=H),(0,z.addDummyNode)(U,"border",q,Y)};z.addBorderNode=D;var F=function(U){var Y;return U.nodes().forEach(function(Z){var H,q=(H=U.node(Z))===null||H===void 0?void 0:H.rank;q!==void 0&&(Y===void 0||q>Y)&&(Y=q)}),Y||(Y=0),Y};z.maxRank=F;var W=function(U,Y){var Z={lhs:[],rhs:[]};return U==null||U.forEach(function(H){Y(H)?Z.lhs.push(H):Z.rhs.push(H)}),Z};z.partition=W;var b=function(U,Y){var Z=Date.now();try{return Y()}finally{console.log("".concat(U," time: ").concat(Date.now()-Z,"ms"))}};z.time=b;var h=function(U,Y){return Y()};z.notime=h;var K=function(U,Y){return U.reduce(function(Z,H){var q=Y(Z),Q=Y(H);return q>Q?H:Z})};z.minBy=K},177057:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var m=function(S,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(g[E]=O[E])},m(S,y)};return function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(S,y);function g(){this.constructor=S}S.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),k=this&&this.__assign||function(){return k=Object.assign||function(m){for(var S,y=1,g=arguments.length;y<g;y++){S=arguments[y];for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(m[O]=S[O])}return m},k.apply(this,arguments)},w=this&&this.__spreadArray||function(m,S,y){if(y||arguments.length===2)for(var g=0,O=S.length,E;g<O;g++)(E||!(g in S))&&(E||(E=Array.prototype.slice.call(S,0,g)),E[g]=S[g]);return m.concat(E||Array.prototype.slice.call(S))};Object.defineProperty(z,"__esModule",{value:!0}),z.DagreCompoundLayout=void 0;var T=C(762329),L=C(631969),P=C(449784),p=function(m){x(S,m);function S(y){var g=m.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.edgesep=5,g.ranksep=50,g.controlPoints=!0,g.anchorPoint=!0,g.nodes=[],g.edges=[],g.combos=[],g.onLayoutEnd=function(){},g.updateCfg(y),g}return S.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},S.prototype.init=function(y){var g=y.hiddenNodes||[],O=y.hiddenEdges||[],E=y.hiddenCombos||[];this.nodes=this.getDataByOrder((y.nodes||[]).concat(g)),this.edges=this.getDataByOrder((y.edges||[]).concat(O)),this.combos=(y.combos||[]).concat(E.map(function(D){return k(k({},D),{collapsed:!0})}))},S.prototype.execute=function(){var y=this,g=y.nodes,O=y.edges;if(g){var E=y.getLayoutConfig(),D=E.graphDef,F=E.graphOption,W=E.graphSettings,b=(0,L.buildGraph)(D,F,W),h=(0,L.flatGraph)(b,!0);return this.updatePosition(h),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:g,edges:O}}},S.prototype.getNodePath=function(y){var g=this,O=g.nodes,E=g.combos,D=O.find(function(W){return W.id===y}),F=function(W,b){b===void 0&&(b=[]);var h=E.find(function(K){return K.id===W});return h?(b.unshift(W),h.parentId?F(h.parentId,b):b):b};return D&&D.comboId?F(D.comboId,[y]):[y]},S.prototype.getLayoutConfig=function(){var y,g,O,E=this,D=E.nodes,F=E.edges,W=E.combos,b=E.nodeSize,h=E.rankdir,K=E.align,U=E.edgesep,Y=E.nodesep,Z=E.ranksep,H=E.settings,q=(W||[]).reduce(function(Ft,Ht){var _t=D.filter(function(ee){return ee.comboId===Ht.id}).map(function(ee){return ee.id}),Xt=(W||[]).filter(function(ee){return ee.parentId===Ht.id}).map(function(ee){return ee.id});return(_t.length||Xt.length)&&(Ft[Ht.id]=w(w([],_t,!0),Xt,!0)),Ft},{}),Q;b?(0,P.isArray)(b)?Q=function(){return b}:Q=function(){return[b,b]}:Q=function(Ft){return Ft&&Ft.size?(0,P.isArray)(Ft.size)?Ft.size:(0,P.isObject)(Ft.size)?[Ft.size.width||40,Ft.size.height||40]:[Ft.size,Ft.size]:[40,40]};var J=function(Ft){return Ft&&Ft.size?(0,P.isArray)(Ft.size)?Ft.size:[Ft.size,Ft.size]:[80,40]},ft=J(W==null?void 0:W[0]),nt=ft[0],yt=ft[1],gt=(g=(y=E.graphSettings)===null||y===void 0?void 0:y.subScene)===null||g===void 0?void 0:g.meta,zt=((O=W.find(function(Ft){return!Ft.collapsed}))===null||O===void 0?void 0:O.padding)||[20,20,20,20],Mt=zt[0],Ct=zt[1],rt=zt[2],ot=zt[3],Tt={compound:q,nodes:w([],(D||[]).map(function(Ft){var Ht=Q(Ft),_t=Ht[0],Xt=Ht[1];return k(k({},Ft),{width:_t,height:Xt})}),!0),edges:w([],(F||[]).map(function(Ft){return k(k({},Ft),{v:Ft.source,w:Ft.target})}),!0)},Rt={expanded:(W||[]).filter(function(Ft){return!Ft.collapsed}).map(function(Ft){return Ft.id})},st={graph:{meta:{align:K,rankDir:h,nodeSep:Y,edgeSep:U,rankSep:Z}},subScene:{meta:{paddingTop:Mt||(gt==null?void 0:gt.paddingTop)||20,paddingRight:Ct||(gt==null?void 0:gt.paddingRight)||20,paddingBottom:rt||(gt==null?void 0:gt.paddingBottom)||20,paddingLeft:ot||(gt==null?void 0:gt.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:nt,height:yt}}},bt=(0,L.mergeConfig)(H,k({},(0,L.mergeConfig)(st,L.LAYOUT_CONFIG)));return E.graphSettings=bt,{graphDef:Tt,graphOption:Rt,graphSettings:bt}},S.prototype.updatePosition=function(y){var g=y.nodes,O=y.edges;this.updateNodePosition(g,O),this.updateEdgePosition(g,O)},S.prototype.getBegin=function(y,g){var O=this,E=O.begin,D=[0,0];if(E){var F=1/0,W=1/0;y.forEach(function(b){F>b.x&&(F=b.x),W>b.y&&(W=b.y)}),g.forEach(function(b){b.points.forEach(function(h){F>h.x&&(F=h.x),W>h.y&&(W=h.y)})}),D[0]=E[0]-F,D[1]=E[1]-W}return D},S.prototype.updateNodePosition=function(y,g){var O=this,E=O.combos,D=O.nodes,F=O.edges,W=O.anchorPoint,b=O.graphSettings,h=this.getBegin(y,g);y.forEach(function(K){var U,Y=K.x,Z=K.y,H=K.id,q=K.type,Q=K.coreBox;if(q===L.HierarchyNodeType.META&&H!==L.ROOT_NAME){var J=E.findIndex(function(zt){return zt.id===H}),ft=(U=b==null?void 0:b.subScene)===null||U===void 0?void 0:U.meta;E[J].offsetX=Y+h[0],E[J].offsetY=Z+h[1],E[J].fixSize=[Q.width,Q.height],E[J].fixCollapseSize=[Q.width,Q.height],K.expanded?E[J].padding=[ft==null?void 0:ft.paddingTop,ft==null?void 0:ft.paddingRight,ft==null?void 0:ft.paddingBottom,ft==null?void 0:ft.paddingLeft]:E[J].padding=[0,0,0,0]}else if(q===L.HierarchyNodeType.OP){var J=D.findIndex(function(Mt){return Mt.id===H});if(D[J].x=Y+h[0],D[J].y=Z+h[1],W){var nt=[],yt=g.filter(function(Mt){return Mt.v===H}),gt=g.filter(function(Mt){return Mt.w===H});yt.length>0&&yt.forEach(function(Mt){var Ct=Mt.points[0],rt=(Ct.x-Y)/K.width+.5,ot=(Ct.y-Z)/K.height+.5;nt.push([rt,ot]),Mt.baseEdgeList.forEach(function(Tt){var Rt=F.find(function(st){return st.source===Tt.v&&st.target===Tt.w});Rt&&(Rt.sourceAnchor=nt.length-1)})}),gt.length>0&&gt.forEach(function(Mt){var Ct=Mt.points[Mt.points.length-1],rt=(Ct.x-Y)/K.width+.5,ot=(Ct.y-Z)/K.height+.5;nt.push([rt,ot]),Mt.baseEdgeList.forEach(function(Tt){var Rt=F.find(function(st){return st.source===Tt.v&&st.target===Tt.w});Rt&&(Rt.targetAnchor=nt.length-1)})}),D[J].anchorPoints=nt.length>0?nt:D[J].anchorPoints||[]}}})},S.prototype.updateEdgePosition=function(y,g){var O=this,E=O.combos,D=O.edges,F=O.controlPoints,W=this.getBegin(y,g);F&&(E.forEach(function(b){b.inEdges=[],b.outEdges=[]}),D.forEach(function(b){var h,K,U,Y,Z=y.find(function(zt){return zt.id===b.source}),H=y.find(function(zt){return zt.id===b.target}),q=[],Q=[];if(Z&&H)Q=(0,L.getEdges)(Z==null?void 0:Z.id,H==null?void 0:H.id,y);else if(!Z||!H){var J=O.getNodePath(b.source),ft=O.getNodePath(b.target),nt=J.reverse().slice(Z?0:1).find(function(zt){return y.find(function(Mt){return Mt.id===zt})}),yt=ft.reverse().slice(H?0:1).find(function(zt){return y.find(function(Mt){return Mt.id===zt})});Z=y.find(function(zt){return zt.id===nt}),H=y.find(function(zt){return zt.id===yt}),Q=(0,L.getEdges)(Z==null?void 0:Z.id,H==null?void 0:H.id,y,{v:b.source,w:b.target})}if(q=Q.reduce(function(zt,Mt){return w(w([],zt,!0),Mt.points.map(function(Ct){return k(k({},Ct),{x:Ct.x+W[0],y:Ct.y+W[1]})}),!0)},[]),q=q.slice(1,-1),b.controlPoints=q,(H==null?void 0:H.type)===L.NodeType.META){var gt=E.findIndex(function(zt){return zt.id===(H==null?void 0:H.id)});if(!E[gt]||!((h=E[gt].inEdges)===null||h===void 0)&&h.some(function(zt){return zt.source===Z.id&&zt.target===H.id}))return;(K=E[gt].inEdges)===null||K===void 0||K.push({source:Z.id,target:H.id,controlPoints:q})}if((Z==null?void 0:Z.type)===L.NodeType.META){var gt=E.findIndex(function(Mt){return Mt.id===(Z==null?void 0:Z.id)});if(!E[gt]||!((U=E[gt].outEdges)===null||U===void 0)&&U.some(function(Mt){return Mt.source===Z.id&&Mt.target===H.id}))return;(Y=E[gt].outEdges)===null||Y===void 0||Y.push({source:Z.id,target:H.id,controlPoints:q})}}))},S.prototype.getType=function(){return"dagreCompound"},S.prototype.getDataByOrder=function(y){return y.every(function(g){return g.layoutOrder!==void 0})||y.forEach(function(g,O){g.layoutOrder=O}),y.sort(function(g,O){return g.layoutOrder-O.layoutOrder})},S}(T.Base);z.DagreCompoundLayout=p},934015:function(He,z,C){"use strict";var x=this&&this.__assign||function(){return x=Object.assign||function(g){for(var O,E=1,D=arguments.length;E<D;E++){O=arguments[E];for(var F in O)Object.prototype.hasOwnProperty.call(O,F)&&(g[F]=O[F])}return g},x.apply(this,arguments)},k=this&&this.__createBinding||(Object.create?function(g,O,E,D){D===void 0&&(D=E);var F=Object.getOwnPropertyDescriptor(O,E);(!F||("get"in F?!O.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return O[E]}}),Object.defineProperty(g,D,F)}:function(g,O,E,D){D===void 0&&(D=E),g[D]=O[E]}),w=this&&this.__setModuleDefault||(Object.create?function(g,O){Object.defineProperty(g,"default",{enumerable:!0,value:O})}:function(g,O){g.default=O}),T=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var O={};if(g!=null)for(var E in g)E!=="default"&&Object.prototype.hasOwnProperty.call(g,E)&&k(O,g,E);return w(O,g),O},L=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(z,"__esModule",{value:!0});var P=T(C(486880)),p=L(C(788221)),m=L(C(87064)),S=C(920171);function y(g,O){var E=g.nodes,D=g.edges,F=O.width,W=O.height;if(!(E!=null&&E.length))return Promise.resolve();var b=[];E.forEach(function(Q){var J=D.filter(function(nt){return nt.source===Q.id||nt.target===Q.id});if(J.length>1){var ft=x({},Q);delete ft.size,b.push(ft)}});var h=[];D.forEach(function(Q){var J=b.find(function(nt){return nt.id===Q.source}),ft=b.find(function(nt){return nt.id===Q.target});J&&ft&&h.push(Q)});var K=new S.DagreLayout({type:"dagre",ranksep:O.nodeMinGap,nodesep:O.nodeMinGap}),U=K.layout({nodes:b,edges:h}).nodes;E.forEach(function(Q){var J=(U||[]).find(function(ft){return ft.id===Q.id});Q.x=(J==null?void 0:J.x)||F/2,Q.y=(J==null?void 0:J.y)||W/2});var Y=JSON.parse(JSON.stringify(E)),Z=JSON.parse(JSON.stringify(D)),H=P.forceSimulation().nodes(Y).force("link",P.forceLink(Z).id(function(Q){return Q.id}).distance(function(Q){var J=h.find(function(ft){return ft.source===Q.source&&ft.target===Q.target});return J?30:20})).force("charge",P.forceManyBody()).force("center",P.forceCenter(F/2,W/2)).force("x",P.forceX(F/2)).force("y",P.forceY(W/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),q=new Promise(function(Q){H.on("end",function(){E.forEach(function(Mt){var Ct=Y.find(function(rt){return rt.id===Mt.id});Ct&&(Mt.x=Ct.x,Mt.y=Ct.y)});var J=Math.min.apply(Math,E.map(function(Mt){return Mt.x})),ft=Math.max.apply(Math,E.map(function(Mt){return Mt.x})),nt=Math.min.apply(Math,E.map(function(Mt){return Mt.y})),yt=Math.max.apply(Math,E.map(function(Mt){return Mt.y})),gt=F/(ft-J),zt=W/(yt-nt);E.forEach(function(Mt){Mt.x!==void 0&&gt<1&&(Mt.x=(Mt.x-J)*gt),Mt.y!==void 0&&zt<1&&(Mt.y=(Mt.y-nt)*zt)}),E.forEach(function(Mt){Mt.sizeTemp=Mt.size,Mt.size=[10,10]}),(0,m.default)(E,D),E.forEach(function(Mt){Mt.size=Mt.sizeTemp||[],delete Mt.sizeTemp}),(0,p.default)({nodes:E,edges:D},O),Q()})});return q}z.default=y},788221:function(He,z,C){"use strict";var x=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(z,"__esModule",{value:!0});var k=x(C(28611));function w(T,L){if(!T.nodes||T.nodes.length===0)return T;var P=L.width,p=L.height,m=L.nodeMinGap,S=1e4,y=1e4;T.nodes.forEach(function(Z){var H=Z.size[0]||50,q=Z.size[1]||50;S=Math.min(H,S),y=Math.min(q,y)});var g=new k.default;g.init(P,p,{CELL_H:y,CELL_W:S}),T.nodes.forEach(function(Z){var H=g.occupyNearest(Z);H&&(H.node={id:Z.id,size:Z.size},Z.x=H.x,Z.y=H.y,Z.dx=H.dx,Z.dy=H.dy)});for(var O=0;O<T.nodes.length;O++){var E=T.nodes[O],D=g.findGridByNodeId(E.id);if(!D)throw new Error("can not find node cell");var F=D.column,W=D.row;if(E.size[0]+m>S){for(var b=Math.ceil((E.size[0]+m)/S)-1,h=b,K=0;K<b;K++){var U=g.additionColumn.indexOf(F+K+1)>-1;if(U&&!g.cells[F+K+1][W].node)h--;else break}g.insertColumn(F,h)}if(E.size[1]+m>y){for(var b=Math.ceil((E.size[1]+m)/y)-1,h=b,K=0;K<b;K++){var U=g.additionRow.indexOf(W+K+1)>-1;if(U&&!g.cells[F][W+K+1].node)h--;else break}g.insertRow(W,h)}}for(var O=0;O<g.columnNum;O++)for(var Y=function(H){var q=g.cells[O][H];if(q.node){var Q=T.nodes.find(function(J){var ft;return J.id===((ft=q==null?void 0:q.node)===null||ft===void 0?void 0:ft.id)});Q&&(Q.x=q.x+Q.size[0]/2,Q.y=q.y+Q.size[1]/2)}},K=0;K<g.rowNum;K++)Y(K)}z.default=w},28611:function(He,z){"use strict";var C=this&&this.__assign||function(){return C=Object.assign||function(k){for(var w,T=1,L=arguments.length;T<L;T++){w=arguments[T];for(var P in w)Object.prototype.hasOwnProperty.call(w,P)&&(k[P]=w[P])}return k},C.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0});var x=function(){function k(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return k.prototype.init=function(w,T,L){this.cells=[],this.CELL_W=L.CELL_W||k.DEFAULT_CELL_W,this.CELL_H=L.CELL_H||k.DEFAULT_CELL_H,this.columnNum=Math.ceil(w/this.CELL_W),this.rowNum=Math.ceil(T/this.CELL_H),k.MIN_DIST=Math.pow(w,2)+Math.pow(T,2);for(var P=0;P<this.columnNum;P++){for(var p=[],m=0;m<this.rowNum;m++){var S={dx:P,dy:m,x:P*this.CELL_W,y:m*this.CELL_H,occupied:!1};p.push(S)}this.cells.push(p)}},k.prototype.findGridByNodeId=function(w){for(var T,L,P=0;P<this.columnNum;P++)for(var p=0;p<this.rowNum;p++)if(this.cells[P][p].node&&((L=(T=this.cells[P][p])===null||T===void 0?void 0:T.node)===null||L===void 0?void 0:L.id)===w)return{column:P,row:p};return null},k.prototype.sqdist=function(w,T){return Math.pow(w.x-T.x,2)+Math.pow(w.y-T.y,2)},k.prototype.occupyNearest=function(w){for(var T=k.MIN_DIST,L,P=null,p=0;p<this.columnNum;p++)for(var m=0;m<this.rowNum;m++)!this.cells[p][m].occupied&&(L=this.sqdist(w,this.cells[p][m]))<T&&(T=L,P=this.cells[p][m]);return P&&(P.occupied=!0),P},k.prototype.insertColumn=function(w,T){if(!(T<=0)){for(var L=0;L<T;L++){this.cells[L+this.columnNum]=[];for(var P=0;P<this.rowNum;P++)this.cells[L+this.columnNum][P]={dx:L,dy:P,x:L*this.CELL_W,y:P*this.CELL_H,occupied:!1,node:null}}for(var L=this.columnNum-1;L>w;L--)for(var P=0;P<this.rowNum;P++)this.cells[L+T][P]=C(C({},this.cells[L][P]),{x:(L+T)*this.CELL_W,y:P*this.CELL_H}),this.cells[L][P]={x:L*this.CELL_W,y:P*this.CELL_H,occupied:!0,node:null};for(var P=0;P<this.additionColumn.length;P++)this.additionColumn[P]>=w&&(this.additionColumn[P]+=T);for(var L=0;L<T;L++)this.additionColumn.push(w+L+1);this.columnNum+=T}},k.prototype.insertRow=function(w,T){if(!(T<=0)){for(var L=0;L<T;L++)for(var P=0;P<this.columnNum;P++)this.cells[P][L+this.rowNum]={dx:P,dy:L,x:P*this.CELL_W,y:L*this.CELL_H,occupied:!1,node:null};for(var P=0;P<this.columnNum;P++)for(var L=this.rowNum-1;L>w;L--)this.cells[P][L+T]=C(C({},this.cells[P][L]),{dx:P,dy:L+T,x:P*this.CELL_W,y:(L+T)*this.CELL_H}),this.cells[P][L]={dx:P,dy:L,x:P*this.CELL_W,y:L*this.CELL_H,occupied:!1,node:null};for(var L=0;L<this.additionRow.length;L++)this.additionRow[L]>=w&&(this.additionRow[L]+=T);for(var P=0;P<T;P++)this.additionRow.push(w+P+1);this.rowNum+=T}},k.prototype.getNodes=function(){for(var w=[],T=0;T<this.columnNum;T++)for(var L=0;L<this.rowNum;L++)this.cells[T][L].node&&w.push(this.cells[T][L]);return w},k.MIN_DIST=50,k.DEFAULT_CELL_W=80,k.DEFAULT_CELL_H=80,k}();z.default=x},290441:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(S[g]=y[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}(),k=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(z,"__esModule",{value:!0}),z.ERLayout=void 0;var w=C(762329),T=k(C(934015)),L=function(P){x(p,P);function p(m){var S=P.call(this)||this;return S.width=300,S.height=300,S.nodeMinGap=50,S.onLayoutEnd=function(){},m&&S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},p.prototype.execute=function(){var m=this,S=m.nodes,y=m.edges;return S==null||S.forEach(function(g){g.size||(g.size=[50,50])}),(0,T.default)({nodes:S,edges:y},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){m.onLayoutEnd&&m.onLayoutEnd()})},p.prototype.getType=function(){return"er"},p}(w.Base);z.ERLayout=L},87064:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=1200,x=800,k=1e7,w=10,T=3.141592653589793,L=1.5707963267948966,P=T*.375,p=T*.625,m=new Map,S=10,y=10,g=.8,O=.1,E=.5;function D(Y,Z,H){var q=Y.x-Y.size[0]/2,Q=Y.y-Y.size[1]/2,J=Y.x+Y.size[0]/2,ft=Y.y+Y.size[1]/2,nt=Z.x-Z.size[0]/2,yt=Z.y-Z.size[1]/2,gt=Z.x+Z.size[0]/2,zt=Z.y+Z.size[1]/2,Mt=Y.x,Ct=Y.y,rt=Z.x,ot=Z.y,Tt=rt-Mt,Rt=Math.atan2(Tt,ot-Ct),st=0,bt=0,Ft=0,Ht=0;Rt>L?(bt=Q-zt,st=nt-J,Ft=parseFloat(bt?(bt/Math.cos(Rt)).toFixed(2):st.toFixed(2)),Ht=parseFloat(st?(st/Math.sin(Rt)).toFixed(2):bt.toFixed(2))):0<Rt&&Rt<=L?(bt=yt-ft,st=nt-J,bt>st?Ft=Ht=parseFloat(bt?(bt/Math.cos(Rt)).toFixed(2):st.toFixed(2)):Ft=Ht=parseFloat(st?(st/Math.sin(Rt)).toFixed(2):bt.toFixed(2))):Rt<-L?(bt=Q-zt,st=-(gt-q),bt>st?Ft=Ht=parseFloat(bt?(bt/Math.cos(Rt)).toFixed(2):st.toFixed(2)):Ft=Ht=parseFloat(st?(st/Math.sin(Rt)).toFixed(2):bt.toFixed(2))):(bt=yt-ft,Math.abs(Tt)>(J-q)/2?st=q-gt:st=Tt,bt>st?Ft=Ht=parseFloat(bt?(bt/Math.cos(Rt)).toFixed(2):st.toFixed(2)):Ft=Ht=parseFloat(st&&Rt!==0?(st/Math.sin(Rt)).toFixed(2):bt.toFixed(2)));var _t=parseFloat(Rt.toFixed(2)),Xt=H;return H&&(Xt=P<_t&&_t<p),{distance:Math.abs(Ft<Ht?Ft:Ht),isHoriz:Xt}}function F(Y,Z){var H=m.get(Y.id)||[],q=H.find(function(xe){return xe.source===Z.id||xe.target===Z.id}),Q=Y.size[0]*Y.size[1],J=Z.size[0]*Z.size[1],ft=Q>J?Z:Y,nt=Q>J?Y:Z,yt=ft.x-ft.size[0]/2,gt=ft.y-ft.size[1]/2,zt=ft.x+ft.size[0]/2,Mt=ft.y+ft.size[1]/2,Ct=nt.x-nt.size[0]/2,rt=nt.y-nt.size[1]/2,ot=nt.x+nt.size[0]/2,Tt=nt.y+nt.size[1]/2,Rt=ft.x,st=ft.y,bt=nt.x,Ft=nt.y,Ht=zt>=Ct&&ot>=yt&&Mt>=rt&&Tt>=gt,_t=0,Xt=0;if(Ht){Xt=Math.sqrt(Math.pow(bt-Rt,2)+Math.pow(Ft-st,2));var ee=yt>Ct?yt:Ct,se=gt>rt?gt:rt,ue=zt<ot?zt:ot,Ut=Mt<Tt?Mt:Tt,oe=ue-ee,Pe=Ut-se,te=oe*Pe;Xt===0&&(Xt=1e-7),_t=w*1/Xt*100+te,_t*=k}else{var ve=!1,Ue=D(ft,nt,ve);Xt=Ue.distance,ve=Ue.isHoriz,Xt<=w?Xt!==0?q?_t+=w+k*1/Xt:_t+=w+k*w/Xt:_t+=k:(_t+=Xt,q&&(_t+=Xt*Xt))}return _t}function W(Y){for(var Z=0,H=0;H<Y.length;H++){var q=Y[H];(q.x<0||q.y<0||q.x>C||q.y>x)&&(Z+=1e12);for(var Q=H+1;Q<Y.length;Q++)Z+=F(q,Y[Q])}return Z}function b(Y,Z,H,q){var Q=new Map;H.forEach(function(Rt,st){Q.set(Rt.id,Rt)});var J=q.filter(function(Rt){return Rt.source===Y.id||Rt.target===Y.id})||[],ft=[];J.forEach(function(Rt){var st=Rt.source===Y.id?Rt.target:Rt.source,bt=Q.get(st);bt&&ft.push(bt)});for(var nt=!0,yt=0;yt<ft.length;yt++){var gt=ft[yt],zt=Math.atan((Y.y-gt.y)/(gt.x-Y.y))*180,Mt=Math.atan((Z.y-gt.y)/(gt.x-Z.y))*180,Ct=zt<30||zt>150,rt=Mt<30||Mt>150,ot=zt>70&&zt<110,Tt=Mt>70&&Mt<110;if(Ct&&!rt||zt*Mt<0){nt=!1;break}else if(ot&&!Tt||zt*Mt<0){nt=!1;break}else if((gt.x-Y.x)*(gt.x-Z.x)<0){nt=!1;break}else if((gt.y-Y.y)*(gt.y-Z.y)<0){nt=!1;break}}return nt}function h(Y,Z){for(var H=!1,q=1,Q=S*q,J=y*q,ft=[Q,-Q,0,0],nt=[0,0,J,-J],yt=0;yt<Y.length;++yt)for(var gt=Y[yt],zt=K(gt,Y),Mt=0;Mt<ft.length;Mt++){var Ct=b(gt,{x:gt.x+ft[Mt],y:gt.y+nt[Mt]},Y,Z);if(Ct){gt.x+=ft[Mt],gt.y+=nt[Mt];var rt=K(gt,Y),ot=Math.random();rt<zt||ot<g&&ot>O?(zt=rt,H=!0):(gt.x-=ft[Mt],gt.y-=nt[Mt])}}return g>O&&(g*=E),H?W(Y):0}function K(Y,Z){var H=0;(Y.x<0||Y.y<0||Y.x+Y.size[0]+20>C||Y.y+Y.size[1]+20>x)&&(H+=1e12);for(var q=0;q<Z.length;++q)Y.id!==Z[q].id&&(H+=F(Y,Z[q]));return H}function U(Y,Z){if(Y.length===0)return{nodes:Y,edges:Z};Y.forEach(function(gt){var zt=Z.filter(function(Mt){return Mt.source===gt.id||Mt.target===gt.id});m.set(gt,zt)}),Y.sort(function(gt,zt){var Mt,Ct;return((Mt=m.get(gt.id))===null||Mt===void 0?void 0:Mt.length)-((Ct=m.get(zt.id))===null||Ct===void 0?void 0:Ct.length)});for(var H=W(Y),q=20,Q=1,J=0,ft=50,nt=0;q>0&&(nt++,!(nt>=ft));){var yt=h(Y,Z);yt!==0&&(J=yt),Q=J-H,H=J,Q===0?--q:q=20}return Y.forEach(function(gt){gt.x=gt.x-gt.size[0]/2,gt.y=gt.y-gt.size[1]/2}),{nodes:Y,edges:Z}}z.default=U},589806:function(He,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(p,m,S,y){y===void 0&&(y=S);var g=Object.getOwnPropertyDescriptor(m,S);(!g||("get"in g?!m.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return m[S]}}),Object.defineProperty(p,y,g)}:function(p,m,S,y){y===void 0&&(y=S),p[y]=m[S]}),k=this&&this.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),w=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var S in p)S!=="default"&&Object.prototype.hasOwnProperty.call(p,S)&&x(m,p,S);return k(m,p),m};Object.defineProperty(z,"__esModule",{value:!0});var T=w(C(486880)),L=C(449784);function P(){function p(Ut){return function(){return Ut}}var m=function(Ut){return Ut.cluster},S=p(1),y=p(-1),g=p(100),O=p(.1),E=[0,0],D=[],F={},W=[],b=100,h=100,K={none:{x:0,y:0}},U=[],Y,Z="force",H=!0,q=.1;function Q(Ut){if(!H)return Q;Y.tick(),zt();for(var oe=0,Pe=D.length,te=void 0,ve=Ut*q;oe<Pe;++oe)te=D[oe],te.vx+=(K[m(te)].x-te.x)*ve,te.vy+=(K[m(te)].y-te.y)*ve}function J(){D&&ft()}function ft(){if(!(!D||!D.length)){if(m(D[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Ut=nt();Y=T.forceSimulation(Ut.nodes).force("x",T.forceX(b).strength(.1)).force("y",T.forceY(h).strength(.1)).force("collide",T.forceCollide(function(oe){return oe.r}).iterations(4)).force("charge",T.forceManyBody().strength(y)).force("links",T.forceLink(Ut.nodes.length?Ut.links:[]).distance(g).strength(O)),U=Y.nodes(),zt()}}function nt(){var Ut=[],oe=[],Pe={},te=[],ve={},Ue=[];return ve=yt(D),Ue=gt(W),te=Object.keys(ve),te.forEach(function(xe,Re){var de=ve[xe];Ut.push({id:xe,size:de.count,r:Math.sqrt(de.sumforceNodeSize/Math.PI)}),Pe[xe]=Re}),Ue.forEach(function(xe){var Re=(0,L.getEdgeTerminal)(xe,"source"),de=(0,L.getEdgeTerminal)(xe,"target"),ht=Pe[Re],ae=Pe[de];ht!==void 0&&ae!==void 0&&oe.push({source:ht,target:ae,count:xe.count})}),{nodes:Ut,links:oe}}function yt(Ut){var oe={};return Ut.forEach(function(Pe){var te=m(Pe);oe[te]||(oe[te]={count:0,sumforceNodeSize:0})}),Ut.forEach(function(Pe){var te=m(Pe),ve=S(Pe),Ue=oe[te];Ue.count=Ue.count+1,Ue.sumforceNodeSize=Ue.sumforceNodeSize+Math.PI*(ve*ve)*1.3,oe[te]=Ue}),oe}function gt(Ut){var oe={},Pe=[];Ut.forEach(function(ve){var Ue=Mt(ve),xe=0;oe[Ue]!==void 0&&(xe=oe[Ue]),xe+=1,oe[Ue]=xe});var te=Object.entries(oe);return te.forEach(function(ve){var Ue=ve[0],xe=ve[1],Re=Ue.split("~")[0],de=Ue.split("~")[1];Re!==void 0&&de!==void 0&&Pe.push({source:Re,target:de,count:xe})}),Pe}function zt(){return K={none:{x:0,y:0}},U.forEach(function(Ut){K[Ut.id]={x:Ut.x-E[0],y:Ut.y-E[1]}}),K}function Mt(Ut){var oe=(0,L.getEdgeTerminal)(Ut,"source"),Pe=(0,L.getEdgeTerminal)(Ut,"target"),te=m(F[oe]),ve=m(F[Pe]);return te<=ve?"".concat(te,"~").concat(ve):"".concat(ve,"~").concat(te)}function Ct(Ut){F={},Ut.forEach(function(oe){F[oe.id]=oe})}function rt(Ut){return arguments.length?(Z=Ut,J(),Q):Z}function ot(Ut){return arguments.length?typeof Ut=="string"?(m=function(oe){return oe[Ut]},Q):(m=Ut,Q):m}function Tt(Ut){return arguments.length?(H=Ut,Q):H}function Rt(Ut){return arguments.length?(q=Ut,Q):q}function st(Ut){return arguments.length?(b=Ut,Q):b}function bt(Ut){return arguments.length?(h=Ut,Q):h}function Ft(Ut){return arguments.length?(Ct(Ut||[]),D=Ut||[],Q):D}function Ht(Ut){return arguments.length?(W=Ut||[],J(),Q):W}function _t(Ut){return arguments.length?(typeof Ut=="function"?S=Ut:S=p(+Ut),J(),Q):S}function Xt(Ut){return arguments.length?(typeof Ut=="function"?y=Ut:y=p(+Ut),J(),Q):y}function ee(Ut){return arguments.length?(typeof Ut=="function"?g=Ut:g=p(+Ut),J(),Q):g}function se(Ut){return arguments.length?(typeof Ut=="function"?O=Ut:O=p(+Ut),J(),Q):O}function ue(Ut){return arguments.length?(E=Ut,Q):E}return Q.initialize=function(Ut){D=Ut,J()},Q.template=rt,Q.groupBy=ot,Q.enableGrouping=Tt,Q.strength=Rt,Q.centerX=st,Q.centerY=bt,Q.nodes=Ft,Q.links=Ht,Q.forceNodeSize=_t,Q.nodeSize=Q.forceNodeSize,Q.forceCharge=Xt,Q.forceLinkDistance=ee,Q.forceLinkStrength=se,Q.offset=ue,Q.getFocis=zt,Q}z.default=P},508810:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var D=function(F,W){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var K in h)Object.prototype.hasOwnProperty.call(h,K)&&(b[K]=h[K])},D(F,W)};return function(F,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");D(F,W);function b(){this.constructor=F}F.prototype=W===null?Object.create(W):(b.prototype=W.prototype,new b)}}(),k=this&&this.__createBinding||(Object.create?function(D,F,W,b){b===void 0&&(b=W);var h=Object.getOwnPropertyDescriptor(F,W);(!h||("get"in h?!F.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return F[W]}}),Object.defineProperty(D,b,h)}:function(D,F,W,b){b===void 0&&(b=W),D[b]=F[W]}),w=this&&this.__setModuleDefault||(Object.create?function(D,F){Object.defineProperty(D,"default",{enumerable:!0,value:F})}:function(D,F){D.default=F}),T=this&&this.__importStar||function(D){if(D&&D.__esModule)return D;var F={};if(D!=null)for(var W in D)W!=="default"&&Object.prototype.hasOwnProperty.call(D,W)&&k(F,D,W);return w(F,D),F},L=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(z,"__esModule",{value:!0}),z.ForceLayout=void 0;var P=T(C(486880)),p=L(C(589806)),m=C(449784),S=C(762329),y=C(416470),g=function(D){x(F,D);function F(W){var b=D.call(this)||this;return b.center=[0,0],b.nodeStrength=null,b.edgeStrength=null,b.preventOverlap=!1,b.clusterNodeStrength=null,b.clusterEdgeStrength=null,b.clusterEdgeDistance=null,b.clusterNodeSize=null,b.clusterFociStrength=null,b.linkDistance=50,b.alphaDecay=.028,b.alphaMin=.001,b.alpha=.3,b.collideStrength=1,b.workerEnabled=!1,b.tick=function(){},b.onLayoutEnd=function(){},b.ticking=void 0,W&&b.updateCfg(W),b}return F.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},F.prototype.init=function(W){var b=this;b.nodes=W.nodes||[];var h=W.edges||[];b.edges=h.map(function(K){var U={},Y=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(K).forEach(function(Z){Y.indexOf(Z)>-1||(U[Z]=K[Z])}),U}),b.ticking=!1},F.prototype.execute=function(W){var b=this,h=b.nodes,K=b.edges;if(!b.ticking){var U=b.forceSimulation,Y=b.alphaMin,Z=b.alphaDecay,H=b.alpha;if(U){if(W){if(b.clustering&&b.clusterForce&&(b.clusterForce.nodes(h),b.clusterForce.links(K)),U.nodes(h),K&&b.edgeForce)b.edgeForce.links(K);else if(K&&!b.edgeForce){var J=P.forceLink().id(function(gt){return gt.id}).links(K);b.edgeStrength&&J.strength(b.edgeStrength),b.linkDistance&&J.distance(b.linkDistance),b.edgeForce=J,U.force("link",J)}}b.preventOverlap&&b.overlapProcess(U),U.alpha(H).restart(),this.ticking=!0}else try{var q=P.forceManyBody();if(b.nodeStrength&&q.strength(b.nodeStrength),U=P.forceSimulation().nodes(h),b.clustering){var Q=(0,p.default)();Q.centerX(b.center[0]).centerY(b.center[1]).template("force").strength(b.clusterFociStrength),K&&Q.links(K),h&&Q.nodes(h),Q.forceLinkDistance(b.clusterEdgeDistance).forceLinkStrength(b.clusterEdgeStrength).forceCharge(b.clusterNodeStrength).forceNodeSize(b.clusterNodeSize),b.clusterForce=Q,U.force("group",Q)}if(U.force("center",P.forceCenter(b.center[0],b.center[1])).force("charge",q).alpha(H).alphaDecay(Z).alphaMin(Y),b.preventOverlap&&b.overlapProcess(U),K){var J=P.forceLink().id(function(yt){return yt.id}).links(K);b.edgeStrength&&J.strength(b.edgeStrength),b.linkDistance&&J.distance(b.linkDistance),b.edgeForce=J,U.force("link",J)}if(b.workerEnabled&&!E()&&(b.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!b.workerEnabled)U.on("tick",function(){b.tick()}).on("end",function(){b.ticking=!1,b.onLayoutEnd&&b.onLayoutEnd()}),b.ticking=!0;else{U.stop();for(var ft=O(U),nt=1;nt<=ft;nt++)U.tick(),postMessage({nodes:h,currentTick:nt,totalTicks:ft,type:y.LAYOUT_MESSAGE.TICK},void 0);b.ticking=!1}b.forceSimulation=U,b.ticking=!0}catch(yt){b.ticking=!1,console.warn(yt)}}},F.prototype.overlapProcess=function(W){var b=this,h=b.nodeSize,K=b.nodeSpacing,U,Y,Z=b.collideStrength;if((0,m.isNumber)(K)?Y=function(){return K}:(0,m.isFunction)(K)?Y=K:Y=function(){return 0},!h)U=function(J){if(J.size){if((0,m.isArray)(J.size)){var ft=J.size[0]>J.size[1]?J.size[0]:J.size[1];return ft/2+Y(J)}if((0,m.isObject)(J.size)){var ft=J.size.width>J.size.height?J.size.width:J.size.height;return ft/2+Y(J)}return J.size/2+Y(J)}return 10+Y(J)};else if((0,m.isFunction)(h))U=function(J){var ft=h(J);return ft+Y(J)};else if((0,m.isArray)(h)){var H=h[0]>h[1]?h[0]:h[1],q=H/2;U=function(J){return q+Y(J)}}else if((0,m.isNumber)(h)){var Q=h/2;U=function(J){return Q+Y(J)}}else U=function(){return 10};W.force("collisionForce",P.forceCollide(U).strength(Z))},F.prototype.updateCfg=function(W){var b=this;b.ticking&&(b.forceSimulation.stop(),b.ticking=!1),b.forceSimulation=null,Object.assign(b,W)},F.prototype.destroy=function(){var W=this;W.ticking&&(W.forceSimulation.stop(),W.ticking=!1),W.nodes=null,W.edges=null,W.destroyed=!0},F}(S.Base);z.ForceLayout=g;function O(D){var F=D.alphaMin(),W=D.alphaTarget(),b=D.alpha(),h=Math.log((F-W)/(b-W))/Math.log(1-D.alphaDecay()),K=Math.ceil(h);return K}function E(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},885717:function(He,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(w,T,L,P){P===void 0&&(P=L);var p=Object.getOwnPropertyDescriptor(T,L);(!p||("get"in p?!T.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return T[L]}}),Object.defineProperty(w,P,p)}:function(w,T,L,P){P===void 0&&(P=L),w[P]=T[L]}),k=this&&this.__exportStar||function(w,T){for(var L in w)L!=="default"&&!Object.prototype.hasOwnProperty.call(T,L)&&x(T,w,L)};Object.defineProperty(z,"__esModule",{value:!0}),k(C(508810),z)},191019:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.forceNBody=void 0;var x=C(971829),k=.81,w=.1;function T(m,S,y,g,O){var E=y/g,D=m.map(function(W,b){var h=S[W.id],K=h.data,U=h.x,Y=h.y,Z=h.size,H=K.layout.force.nodeStrength;return{x:U,y:Y,size:Z,index:b,vx:0,vy:0,weight:E*H}}),F=(0,x.quadtree)(D,function(W){return W.x},function(W){return W.y}).visitAfter(L);return D.forEach(function(W){p(W,F)}),D.map(function(W,b){var h=S[m[b].id],K=h.data.layout.force.mass,U=K===void 0?1:K;O[2*b]=W.vx/U,O[2*b+1]=W.vy/U}),O}z.forceNBody=T;function L(m){var S=0,y=0,g=0;if(m.length){for(var O=0;O<4;O++){var E=m[O];E&&E.weight&&(S+=E.weight,y+=E.x*E.weight,g+=E.y*E.weight)}m.x=y/S,m.y=g/S,m.weight=S}else{var E=m;m.x=E.data.x,m.y=E.data.y,m.weight=E.data.weight}}var P=function(m,S,y,g,O,E){var D=E.x-m.x||w,F=E.y-m.y||w,W=g-S,b=D*D+F*F,h=Math.sqrt(b)*b;if(W*W*k<b){var K=m.weight/h;return E.vx+=D*K,E.vy+=F*K,!0}if(m.length)return!1;if(m.data!==E){var K=m.data.weight/h;E.vx+=D*K,E.vy+=F*K}};function p(m,S){S.visit(function(y,g,O,E,D){return P(y,g,O,E,D,m)})}},306740:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var m=function(S,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(g[E]=O[E])},m(S,y)};return function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(S,y);function g(){this.constructor=S}S.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),k=this&&this.__assign||function(){return k=Object.assign||function(m){for(var S,y=1,g=arguments.length;y<g;y++){S=arguments[y];for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(m[O]=S[O])}return m},k.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0}),z.Force2Layout=void 0;var w=C(762329),T=C(449784),L=C(191019),P=function(m,S){var y;return m?(0,T.isNumber)(m)?y=function(g){return m}:y=m:y=function(g){return S||1},y},p=function(m){x(S,m);function S(y){var g=m.call(this)||this;g.maxIteration=1e3,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=500,g.minMovement=.4,g.interval=.02,g.factor=1,g.linkDistance=200,g.gravity=0,g.clusterNodeStrength=20,g.preventOverlap=!0,g.distanceThresholdMode="mean",g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.judgingDistance=0,g.centripetalOptions={leaf:2,single:2,others:1,center:function(E){return{x:g.width/2,y:g.height/2}}};var O=y.getMass;return g.propsGetMass=O,g.updateCfg(y),g}return S.prototype.getCentripetalOptions=function(){var y=this,g=y.leafCluster,O=y.clustering,E=y.nodeClusterBy,D=y.nodes,F=y.nodeMap,W=y.clusterNodeStrength,b=function(ft){return typeof W=="function"?W(ft):W},h={},K;if(g){K=this.getSameTypeLeafMap()||{};var U=Array.from(new Set(D==null?void 0:D.map(function(ft){return ft[E]})))||[];h={single:100,leaf:function(ft,nt,yt){var gt=K[ft.id]||{},zt=gt.relativeLeafNodes,Mt=gt.sameTypeLeafNodes;return(Mt==null?void 0:Mt.length)===(zt==null?void 0:zt.length)||(U==null?void 0:U.length)===1?1:b(ft)},others:1,center:function(ft,nt,yt){var gt,zt=(((gt=ft.data)===null||gt===void 0?void 0:gt.layout)||{}).degree;if(!zt)return{x:100,y:100};var Mt;if(zt===1){var Ct=(K[ft.id]||{}).sameTypeLeafNodes,rt=Ct===void 0?[]:Ct;rt.length===1?Mt=void 0:rt.length>1&&(Mt=(0,T.getAvgNodePosition)(rt))}else Mt=void 0;return{x:Mt==null?void 0:Mt.x,y:Mt==null?void 0:Mt.y}}}}if(O){K||(K=this.getSameTypeLeafMap());var Y=Array.from(new Set(D.map(function(ft,nt){return ft[E]}))).filter(function(ft){return ft!==void 0}),Z={};Y.forEach(function(ft){var nt=D.filter(function(yt){return yt[E]===ft}).map(function(yt){return F[yt.id]});Z[ft]=(0,T.getAvgNodePosition)(nt)}),h={single:function(ft){return b(ft)},leaf:function(ft){return b(ft)},others:function(ft){return b(ft)},center:function(ft,nt,yt){var gt=Z[ft[E]];return{x:gt==null?void 0:gt.x,y:gt==null?void 0:gt.y}}}}this.centripetalOptions=k(k({},this.centripetalOptions),h);var H=this.centripetalOptions,q=H.leaf,Q=H.single,J=H.others;q&&typeof q!="function"&&(this.centripetalOptions.leaf=function(){return q}),Q&&typeof Q!="function"&&(this.centripetalOptions.single=function(){return Q}),J&&typeof J!="function"&&(this.centripetalOptions.others=function(){return J})},S.prototype.updateCfg=function(y){y&&Object.assign(this,y)},S.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},S.prototype.execute=function(){var y=this;y.stop();var g=y.nodes,O=y.edges,E=y.defSpringLen;if(y.judgingDistance=0,!g||g.length===0){y.onLayoutEnd([]);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var D=y.center;if(g.length===1){g[0].x=D[0],g[0].y=D[1],y.onLayoutEnd([k({},g[0])]);return}y.degreesMap=(0,T.getDegreeMap)(g,O),y.propsGetMass?y.getMass=y.propsGetMass:y.getMass=function(Y){var Z=1;(0,T.isNumber)(Y.mass)&&(Z=Y.mass);var H=y.degreesMap[Y.id].all;return!H||H<5?Z:H*5*Z};var F=y.nodeSize,W;if(y.preventOverlap){var b=y.nodeSpacing,h;(0,T.isNumber)(b)?h=function(){return b}:(0,T.isFunction)(b)?h=b:h=function(){return 0},F?(0,T.isArray)(F)?W=function(Y){return Math.max(F[0],F[1])+h(Y)}:W=function(Y){return F+h(Y)}:W=function(Y){return Y.size?(0,T.isArray)(Y.size)?Math.max(Y.size[0],Y.size[1])+h(Y):(0,T.isObject)(Y.size)?Math.max(Y.size.width,Y.size.height)+h(Y):Y.size+h(Y):10+h(Y)}}y.nodeSize=W,y.linkDistance=P(y.linkDistance,1),y.nodeStrength=P(y.nodeStrength,1),y.edgeStrength=P(y.edgeStrength,1);var K={},U={};g.forEach(function(Y,Z){(0,T.isNumber)(Y.x)||(Y.x=Math.random()*y.width),(0,T.isNumber)(Y.y)||(Y.y=Math.random()*y.height);var H=y.degreesMap[Y.id];K[Y.id]=k(k({},Y),{data:k(k({},Y.data),{size:y.nodeSize(Y)||30,layout:{inDegree:H.in,outDegree:H.out,degree:H.all,tDegree:H.in,sDegree:H.out,force:{mass:y.getMass(Y),nodeStrength:y.nodeStrength(Y,O)}}})}),U[Y.id]=Z}),y.nodeMap=K,y.nodeIdxMap=U,y.edgeInfos=[],O==null||O.forEach(function(Y){var Z=K[Y.source],H=K[Y.target];!Z||!H?elf.edgeInfos.push({}):y.edgeInfos.push({edgeStrength:y.edgeStrength(Y),linkDistance:E?E(k(k({},Y),{source:Z,target:H}),Z,H):y.linkDistance(Y,Z,H)||1+(F(Z)+F(Z)||0)/2})}),this.getCentripetalOptions(),y.onLayoutEnd=y.onLayoutEnd||function(){},y.run()},S.prototype.run=function(){var y=this,g=y.maxIteration,O=y.nodes,E=y.edges,D=y.workerEnabled,F=y.minMovement,W=y.animate,b=y.nodeMap,h=y.height;if(y.currentMinY=0,y.currentMaxY=h,!!O){var K=[];if(O.forEach(function(J,ft){K[2*ft]=0,K[2*ft+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var U={};E.forEach(function(J){var ft=J.source,nt=J.target;U[ft]=U[ft]||[],U[ft].push(J),U[nt]=U[nt]||[],U[nt].push(J)}),this.relatedEdges=U}var Y=g,Z=!W;if(D||Z){for(var H=0,q=0;(y.judgingDistance>F||q<1)&&q<Y;q++)H=q,y.runOneStep(q,K);y.onLayoutEnd(Object.values(b))}else{if(typeof window=="undefined")return;var Q=0;this.timeInterval=window.setInterval(function(){O&&(y.runOneStep(Q,K),Q++,(Q>=Y||y.judgingDistance<F)&&(y.onLayoutEnd(Object.values(b)),window.clearInterval(y.timeInterval)))},0)}}},S.prototype.runOneStep=function(y,g){var O,E=this,D=E.nodes,F=E.edges,W=E.nodeMap,b=E.monitor,h=[];if(D!=null&&D.length){E.calRepulsive(h),F&&E.calAttractive(h),E.calGravity(h),E.attractToSide(h);var K=E.interval;if(E.updateVelocity(h,g,K),E.updatePosition(g,K),(O=E.tick)===null||O===void 0||O.call(E),b){var U=this.calTotalEnergy(h);b({energy:U,nodes:D,edges:F,iterations:y})}}},S.prototype.calTotalEnergy=function(y){var g=this,O=g.nodes,E=g.nodeMap;if(!(O!=null&&O.length))return 0;var D=0;return O.forEach(function(F,W){var b=y[2*W],h=y[2*W+1],K=b*b+h*h,U=E[F.id].data.layout.force.mass,Y=U===void 0?1:U;D+=Y*K*.5}),D},S.prototype.calRepulsive=function(y){var g=this,O=g.nodes,E=g.nodeMap,D=g.factor,F=g.coulombDisScale,W=g.nodeSize;(0,L.forceNBody)(O,E,D,F*F,y)},S.prototype.calAttractive=function(y){var g=this,O=g.edges,E=g.nodeMap,D=g.nodeIdxMap,F=g.edgeInfos,W=g.nodeSize;O.forEach(function(b,h){var K=(0,T.getEdgeTerminal)(b,"source"),U=(0,T.getEdgeTerminal)(b,"target"),Y=E[K],Z=E[U];if(!(!Y||!Z)){var H=Z.x-Y.x,q=Z.y-Y.y;!H&&!q&&(H=Math.random()*.01,q=Math.random()*.01);var Q=Math.sqrt(H*H+q*q),J=H/Q,ft=q/Q,nt=F[h]||{},yt=nt.linkDistance,gt=yt===void 0?200:yt,zt=nt.edgeStrength,Mt=zt===void 0?200:zt,Ct=gt-Q,rt=Ct*Mt,ot=Y.data.layout.force.mass||1,Tt=Z.data.layout.force.mass||1,Rt=1/ot,st=1/Tt,bt=J*rt,Ft=ft*rt,Ht=2*D[K],_t=2*D[U];y[Ht]-=bt*Rt,y[Ht+1]-=Ft*Rt,y[_t]+=bt*st,y[_t+1]+=Ft*st}})},S.prototype.calGravity=function(y){var g,O=this,E=O.nodes,D=O.edges,F=D===void 0?[]:D,W=O.nodeMap,b=O.width,h=O.height,K=O.center,U=O.gravity,Y=O.degreesMap,Z=O.centripetalOptions;if(E)for(var H=E.length,q=0;q<H;q++){var Q=2*q,J=W[E[q].id],ft=J.data.layout.force.mass,nt=ft===void 0?1:ft,yt=0,gt=0,zt=U,Mt=Y[J.id],Ct=Mt.in,rt=Mt.out,ot=Mt.all,Tt=(g=O.getCenter)===null||g===void 0?void 0:g.call(O,J,ot);if(Tt){var Rt=Tt[0],st=Tt[1],bt=Tt[2];yt=J.x-Rt,gt=J.y-st,zt=bt}else yt=J.x-K[0],gt=J.y-K[1];if(zt&&(y[Q]-=zt*yt/nt,y[Q+1]-=zt*gt/nt),Z){var Ft=Z.leaf,Ht=Z.single,_t=Z.others,Xt=Z.center,ee=(Xt==null?void 0:Xt(J,E,F,b,h))||{x:0,y:0,centerStrength:0},se=ee.x,ue=ee.y,Ut=ee.centerStrength;if(!(0,T.isNumber)(se)||!(0,T.isNumber)(ue))continue;var oe=(J.x-se)/nt,Pe=(J.y-ue)/nt;if(Ut&&(y[Q]-=Ut*oe,y[Q+1]-=Ut*Pe),ot===0){var te=Ht(J);if(!te)continue;y[Q]-=te*oe,y[Q+1]-=te*Pe;continue}if(Ct===0||rt===0){var ve=Ft(J,E,F);if(!ve)continue;y[Q]-=ve*oe,y[Q+1]-=ve*Pe;continue}var Ue=_t(J);if(!Ue)continue;y[Q]-=Ue*oe,y[Q+1]-=Ue*Pe}}},S.prototype.attractToSide=function(y){var g=this,O=g.defSideCoe,E=g.height,D=g.nodes,F=g.relatedEdges,W=g.currentMinY,b=W===void 0?0:W,h=g.currentMaxY,K=h===void 0?this.height:h;!O||typeof O!="function"||!(D!=null&&D.length)||D.forEach(function(U,Y){var Z=O(U,F[U.id]||[]);if(Z!==0){var H=Z<0?b:K,q=Math.abs(Z);y[2*Y+1]-=q*(U.y-H)}})},S.prototype.updateVelocity=function(y,g,O){var E=this,D=E.nodes,F=E.damping,W=E.maxSpeed;D!=null&&D.length&&D.forEach(function(b,h){var K=(g[2*h]+y[2*h]*O)*F||.01,U=(g[2*h+1]+y[2*h+1]*O)*F||.01,Y=Math.sqrt(K*K+U*U);if(Y>W){var Z=W/Y;K=Z*K,U=Z*U}g[2*h]=K,g[2*h+1]=U})},S.prototype.updatePosition=function(y,g){var O=this,E=O.nodes,D=O.distanceThresholdMode,F=O.nodeMap;if(!(E!=null&&E.length)){this.judgingDistance=0;return}var W=0;D==="max"?O.judgingDistance=-1/0:D==="min"&&(O.judgingDistance=1/0);var b=1/0,h=-1/0;E.forEach(function(K,U){var Y=F[K.id];if((0,T.isNumber)(K.fx)&&(0,T.isNumber)(K.fy)){K.x=K.fx,K.y=K.fy,Y.x=K.x,Y.y=K.y;return}var Z=y[2*U]*g,H=y[2*U+1]*g;K.x+=Z,K.y+=H,Y.x=K.x,Y.y=K.y,K.y<b&&(b=K.y),K.y>h&&(h=K.y);var q=Math.sqrt(Z*Z+H*H);switch(D){case"max":O.judgingDistance<q&&(O.judgingDistance=q);break;case"min":O.judgingDistance>q&&(O.judgingDistance=q);break;default:W=W+q;break}}),this.currentMinY=b,this.currentMaxY=h,(!D||D==="mean")&&(O.judgingDistance=W/E.length)},S.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},S.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},S.prototype.getType=function(){return"force2"},S.prototype.getSameTypeLeafMap=function(){var y=this,g=y.nodeClusterBy,O=y.nodes,E=y.edges,D=y.nodeMap,F=y.degreesMap;if(O!=null&&O.length){var W={};return O.forEach(function(b,h){var K=F[b.id].all;K===1&&(W[b.id]=(0,T.getCoreNodeAndRelativeLeafNodes)("leaf",b,E,g,F,D))}),W}},S}(w.Base);z.Force2Layout=p},19712:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(){function x(k){this.id=k.id||0,this.rx=k.rx,this.ry=k.ry,this.fx=0,this.fy=0,this.mass=k.mass,this.degree=k.degree,this.g=k.g||0}return x.prototype.distanceTo=function(k){var w=this.rx-k.rx,T=this.ry-k.ry;return Math.hypot(w,T)},x.prototype.setPos=function(k,w){this.rx=k,this.ry=w},x.prototype.resetForce=function(){this.fx=0,this.fy=0},x.prototype.addForce=function(k){var w=k.rx-this.rx,T=k.ry-this.ry,L=Math.hypot(w,T);L=L<1e-4?1e-4:L;var P=this.g*(this.degree+1)*(k.degree+1)/L;this.fx+=P*w/L,this.fy+=P*T/L},x.prototype.in=function(k){return k.contains(this.rx,this.ry)},x.prototype.add=function(k){var w=this.mass+k.mass,T=(this.rx*this.mass+k.rx*k.mass)/w,L=(this.ry*this.mass+k.ry*k.mass)/w,P=this.degree+k.degree,p={rx:T,ry:L,mass:w,degree:P};return new x(p)},x}();z.default=C},148564:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var S=function(y,g){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,E){O.__proto__=E}||function(O,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(O[D]=E[D])},S(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");S(y,g);function O(){this.constructor=y}y.prototype=g===null?Object.create(g):(O.prototype=g.prototype,new O)}}(),k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(z,"__esModule",{value:!0}),z.ForceAtlas2Layout=void 0;var w=C(762329),T=C(449784),L=k(C(19712)),P=k(C(851638)),p=k(C(762732)),m=function(S){x(y,S);function y(g){var O=S.call(this)||this;return O.center=[0,0],O.width=300,O.height=300,O.nodes=[],O.edges=[],O.kr=5,O.kg=1,O.mode="normal",O.preventOverlap=!1,O.dissuadeHubs=!1,O.barnesHut=void 0,O.maxIteration=0,O.ks=.1,O.ksmax=10,O.tao=.1,O.onLayoutEnd=function(){},O.prune=void 0,O.updateCfg(g),O}return y.prototype.getDefaultCfg=function(){return{}},y.prototype.execute=function(){var g=this,O=g.nodes,E=g.onLayoutEnd,D=g.prune,F=g.maxIteration;!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight);for(var W=[],b=O.length,h=0;h<b;h+=1){var K=O[h],U=10,Y=10;(0,T.isNumber)(K.size)&&(U=K.size,Y=K.size),(0,T.isArray)(K.size)?(isNaN(K.size[0])||(U=K.size[0]),isNaN(K.size[1])||(Y=K.size[1])):(0,T.isObject)(K.size)&&(U=K.size.width,Y=K.size.height),g.getWidth&&!isNaN(g.getWidth(K))&&(Y=g.getWidth(K)),g.getHeight&&!isNaN(g.getHeight(K))&&(U=g.getHeight(K));var Z=Math.max(U,Y);W.push(Z)}g.barnesHut===void 0&&b>250&&(g.barnesHut=!0),g.prune===void 0&&b>100&&(g.prune=!0),this.maxIteration===0&&!g.prune?(F=250,b<=200&&b>100?F=1e3:b>200&&(F=1200),this.maxIteration=F):this.maxIteration===0&&D&&(F=100,b<=200&&b>100?F=500:b>200&&(F=950),this.maxIteration=F),g.kr||(g.kr=50,b>100&&b<=500?g.kr=20:b>500&&(g.kr=1)),g.kg||(g.kg=20,b>100&&b<=500?g.kg=10:b>500&&(g.kg=1)),this.nodes=g.updateNodesByForces(W),E()},y.prototype.updateNodesByForces=function(g){for(var O=this,E=O.edges,D=O.maxIteration,F=O.nodes,W=E.filter(function(Mt){var Ct=(0,T.getEdgeTerminal)(Mt,"source"),rt=(0,T.getEdgeTerminal)(Mt,"target");return Ct!==rt}),b=F.length,h=W.length,K=[],U={},Y={},Z=[],H=0;H<b;H+=1)U[F[H].id]=H,K[H]=0,(F[H].x===void 0||isNaN(F[H].x))&&(F[H].x=Math.random()*1e3),(F[H].y===void 0||isNaN(F[H].y))&&(F[H].y=Math.random()*1e3),Z.push({x:F[H].x,y:F[H].y});for(var H=0;H<h;H+=1){for(var q=void 0,Q=void 0,J=0,ft=0,nt=0;nt<b;nt+=1){var yt=(0,T.getEdgeTerminal)(W[H],"source"),gt=(0,T.getEdgeTerminal)(W[H],"target");F[nt].id===yt?(q=F[nt],J=nt):F[nt].id===gt&&(Q=F[nt],ft=nt),Y[H]={sourceIdx:J,targetIdx:ft}}q&&(K[U[q.id]]+=1),Q&&(K[U[Q.id]]+=1)}var zt=D;if(F=this.iterate(zt,U,Y,h,K,g),O.prune){for(var nt=0;nt<h;nt+=1)K[Y[nt].sourceIdx]<=1?(F[Y[nt].sourceIdx].x=F[Y[nt].targetIdx].x,F[Y[nt].sourceIdx].y=F[Y[nt].targetIdx].y):K[Y[nt].targetIdx]<=1&&(F[Y[nt].targetIdx].x=F[Y[nt].sourceIdx].x,F[Y[nt].targetIdx].y=F[Y[nt].sourceIdx].y);O.prune=!1,O.barnesHut=!1,zt=100,F=this.iterate(zt,U,Y,h,K,g)}return F},y.prototype.iterate=function(g,O,E,D,F,W){for(var b=this,h=b.nodes,K=b.kr,U=b.preventOverlap,Y=b.barnesHut,Z=h.length,H=0,q=100,Q=g,J=50,ft=[],nt=[],yt=[],gt=0;gt<Z;gt+=1)if(ft[2*gt]=0,ft[2*gt+1]=0,Y){var zt={id:gt,rx:h[gt].x,ry:h[gt].y,mass:1,g:K,degree:F[gt]};yt[gt]=new L.default(zt)}for(;Q>0;){for(var gt=0;gt<Z;gt+=1)nt[2*gt]=ft[2*gt],nt[2*gt+1]=ft[2*gt+1],ft[2*gt]=0,ft[2*gt+1]=0;ft=this.getAttrForces(Q,J,D,O,E,F,W,ft),Y&&(U&&Q>J||!U)?ft=this.getOptRepGraForces(ft,yt,F):ft=this.getRepGraForces(Q,J,ft,q,W,F);var Mt=this.updatePos(ft,nt,H,F);h=Mt.nodes,H=Mt.sg,Q--,b.tick&&b.tick()}return h},y.prototype.getAttrForces=function(g,O,E,D,F,W,b,h){for(var K=this,U=K.nodes,Y=K.preventOverlap,Z=K.dissuadeHubs,H=K.mode,q=K.prune,Q=0;Q<E;Q+=1){var J=U[F[Q].sourceIdx],ft=F[Q].sourceIdx,nt=U[F[Q].targetIdx],yt=F[Q].targetIdx;if(!(q&&(W[ft]<=1||W[yt]<=1))){var gt=[nt.x-J.x,nt.y-J.y],zt=Math.hypot(gt[0],gt[1]);zt=zt<1e-4?1e-4:zt,gt[0]=gt[0]/zt,gt[1]=gt[1]/zt,Y&&g<O&&(zt=zt-b[ft]-b[yt]);var Mt=zt,Ct=Mt;H==="linlog"&&(Mt=Math.log(1+zt),Ct=Mt),Z&&(Mt=zt/W[ft],Ct=zt/W[yt]),Y&&g<O&&zt<=0?(Mt=0,Ct=0):Y&&g<O&&zt>0&&(Mt=zt,Ct=zt),h[2*D[J.id]]+=Mt*gt[0],h[2*D[nt.id]]-=Ct*gt[0],h[2*D[J.id]+1]+=Mt*gt[1],h[2*D[nt.id]+1]-=Ct*gt[1]}}return h},y.prototype.getRepGraForces=function(g,O,E,D,F,W){for(var b=this,h=b.nodes,K=b.preventOverlap,U=b.kr,Y=b.kg,Z=b.center,H=b.prune,q=h.length,Q=0;Q<q;Q+=1){for(var J=Q+1;J<q;J+=1)if(!(H&&(W[Q]<=1||W[J]<=1))){var ft=[h[J].x-h[Q].x,h[J].y-h[Q].y],nt=Math.hypot(ft[0],ft[1]);nt=nt<1e-4?1e-4:nt,ft[0]=ft[0]/nt,ft[1]=ft[1]/nt,K&&g<O&&(nt=nt-F[Q]-F[J]);var yt=U*(W[Q]+1)*(W[J]+1)/nt;K&&g<O&&nt<0?yt=D*(W[Q]+1)*(W[J]+1):K&&g<O&&nt===0?yt=0:K&&g<O&&nt>0&&(yt=U*(W[Q]+1)*(W[J]+1)/nt),E[2*Q]-=yt*ft[0],E[2*J]+=yt*ft[0],E[2*Q+1]-=yt*ft[1],E[2*J+1]+=yt*ft[1]}var gt=[h[Q].x-Z[0],h[Q].y-Z[1]],zt=Math.hypot(gt[0],gt[1]);gt[0]=gt[0]/zt,gt[1]=gt[1]/zt;var Mt=Y*(W[Q]+1);E[2*Q]-=Mt*gt[0],E[2*Q+1]-=Mt*gt[1]}return E},y.prototype.getOptRepGraForces=function(g,O,E){for(var D=this,F=D.nodes,W=D.kg,b=D.center,h=D.prune,K=F.length,U=9e10,Y=-9e10,Z=9e10,H=-9e10,q=0;q<K;q+=1)h&&E[q]<=1||(O[q].setPos(F[q].x,F[q].y),F[q].x>=Y&&(Y=F[q].x),F[q].x<=U&&(U=F[q].x),F[q].y>=H&&(H=F[q].y),F[q].y<=Z&&(Z=F[q].y));for(var Q=Math.max(Y-U,H-Z),J={xmid:(Y+U)/2,ymid:(H+Z)/2,length:Q,massCenter:b,mass:K},ft=new P.default(J),nt=new p.default(ft),q=0;q<K;q+=1)h&&E[q]<=1||O[q].in(ft)&&nt.insert(O[q]);for(var q=0;q<K;q+=1)if(!(h&&E[q]<=1)){O[q].resetForce(),nt.updateForce(O[q]),g[2*q]-=O[q].fx,g[2*q+1]-=O[q].fy;var yt=[F[q].x-b[0],F[q].y-b[1]],gt=Math.hypot(yt[0],yt[1]);gt=gt<1e-4?1e-4:gt,yt[0]=yt[0]/gt,yt[1]=yt[1]/gt;var zt=W*(E[q]+1);g[2*q]-=zt*yt[0],g[2*q+1]-=zt*yt[1]}return g},y.prototype.updatePos=function(g,O,E,D){for(var F=this,W=F.nodes,b=F.ks,h=F.tao,K=F.prune,U=F.ksmax,Y=W.length,Z=[],H=[],q=0,Q=0,J=0;J<Y;J+=1)if(!(K&&D[J]<=1)){var ft=[g[2*J]-O[2*J],g[2*J+1]-O[2*J+1]],nt=Math.hypot(ft[0],ft[1]),yt=[g[2*J]+O[2*J],g[2*J+1]+O[2*J+1]],gt=Math.hypot(yt[0],yt[1]);Z[J]=nt,H[J]=gt/2,q+=(D[J]+1)*Z[J],Q+=(D[J]+1)*H[J]}var zt=E;E=h*Q/q,zt!==0&&(E=E>1.5*zt?1.5*zt:E);for(var J=0;J<Y;J+=1)if(!(K&&D[J]<=1)&&!((0,T.isNumber)(W[J].fx)&&(0,T.isNumber)(W[J].fy))){var Mt=b*E/(1+E*Math.sqrt(Z[J])),Ct=Math.hypot(g[2*J],g[2*J+1]);Ct=Ct<1e-4?1e-4:Ct;var rt=U/Ct;Mt=Mt>rt?rt:Mt;var ot=Mt*g[2*J],Tt=Mt*g[2*J+1];W[J].x+=ot,W[J].y+=Tt}return{nodes:W,sg:E}},y}(w.Base);z.ForceAtlas2Layout=m},851638:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(){function x(k){this.xmid=k.xmid,this.ymid=k.ymid,this.length=k.length,this.massCenter=k.massCenter||[0,0],this.mass=k.mass||1}return x.prototype.getLength=function(){return this.length},x.prototype.contains=function(k,w){var T=this.length/2;return k<=this.xmid+T&&k>=this.xmid-T&&w<=this.ymid+T&&w>=this.ymid-T},x.prototype.NW=function(){var k=this.xmid-this.length/4,w=this.ymid+this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new x(L);return P},x.prototype.NE=function(){var k=this.xmid+this.length/4,w=this.ymid+this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new x(L);return P},x.prototype.SW=function(){var k=this.xmid-this.length/4,w=this.ymid-this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new x(L);return P},x.prototype.SE=function(){var k=this.xmid+this.length/4,w=this.ymid-this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new x(L);return P},x}();z.default=C},762732:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(){function x(k){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,k!=null&&(this.quad=k)}return x.prototype.insert=function(k){if(this.body==null){this.body=k;return}this._isExternal()?(this.quad&&(this.NW=new x(this.quad.NW()),this.NE=new x(this.quad.NE()),this.SW=new x(this.quad.SW()),this.SE=new x(this.quad.SE())),this._putBody(this.body),this._putBody(k),this.body=this.body.add(k)):(this.body=this.body.add(k),this._putBody(k))},x.prototype._putBody=function(k){this.quad&&(k.in(this.quad.NW())&&this.NW?this.NW.insert(k):k.in(this.quad.NE())&&this.NE?this.NE.insert(k):k.in(this.quad.SW())&&this.SW?this.SW.insert(k):k.in(this.quad.SE())&&this.SE&&this.SE.insert(k))},x.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},x.prototype.updateForce=function(k){if(!(this.body==null||k===this.body))if(this._isExternal())k.addForce(this.body);else{var w=this.quad?this.quad.getLength():0,T=this.body.distanceTo(k);w/T<this.theta?k.addForce(this.body):(this.NW&&this.NW.updateForce(k),this.NE&&this.NE.updateForce(k),this.SW&&this.SW.updateForce(k),this.SE&&this.SE.updateForce(k))}},x}();z.default=C},880374:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(S[g]=y[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.FruchtermanLayout=void 0;var k=C(762329),w=C(449784),T=800,L=function(P){x(p,P);function p(m){var S=P.call(this)||this;return S.maxIteration=1e3,S.workerEnabled=!1,S.gravity=10,S.speed=5,S.clustering=!1,S.clusterGravity=10,S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.onLayoutEnd=function(){},S.tick=function(){},S.animate=!0,S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},p.prototype.execute=function(){var m=this,S,y,g=this,O=g.nodes;if(g.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(g.timeInterval),!O||O.length===0){(S=g.onLayoutEnd)===null||S===void 0||S.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var E=g.center;if(O.length===1){O[0].x=E[0],O[0].y=E[1],(y=g.onLayoutEnd)===null||y===void 0||y.call(g);return}var D={},F={};return O.forEach(function(W,b){(0,w.isNumber)(W.x)||(W.x=Math.random()*m.width),(0,w.isNumber)(W.y)||(W.y=Math.random()*m.height),D[W.id]=W,F[W.id]=b}),g.nodeMap=D,g.nodeIdxMap=F,g.run()},p.prototype.run=function(){var m,S=this,y=S.nodes;if(y){var g=S.edges,O=S.maxIteration,E=S.workerEnabled,D=S.clustering,F=S.animate,W={};if(D&&y.forEach(function(K){W[K.cluster]===void 0&&(W[K.cluster]={name:K.cluster,cx:0,cy:0,count:0})}),E||!F){for(var b=0;b<O;b++)S.runOneStep(W);(m=S.onLayoutEnd)===null||m===void 0||m.call(S)}else{if(typeof window=="undefined")return;var h=0;this.timeInterval=window.setInterval(function(){var K;S.runOneStep(W),h++,h>=O&&((K=S.onLayoutEnd)===null||K===void 0||K.call(S),window.clearInterval(S.timeInterval))},0)}return{nodes:y,edges:g}}},p.prototype.runOneStep=function(m){var S,y=this,g=y.nodes;if(g){var O=y.edges,E=y.center,D=y.gravity,F=y.speed,W=y.clustering,b=y.height*y.width,h=Math.sqrt(b)/10,K=b/(g.length+1),U=Math.sqrt(K),Y=[];if(g.forEach(function(q,Q){Y[Q]={x:0,y:0}}),y.applyCalculate(g,O,Y,U,K),W){for(var Z in m)m[Z].cx=0,m[Z].cy=0,m[Z].count=0;g.forEach(function(q){var Q=m[q.cluster];(0,w.isNumber)(q.x)&&(Q.cx+=q.x),(0,w.isNumber)(q.y)&&(Q.cy+=q.y),Q.count++});for(var Z in m)m[Z].cx/=m[Z].count,m[Z].cy/=m[Z].count;var H=y.clusterGravity||D;g.forEach(function(q,Q){if(!(!(0,w.isNumber)(q.x)||!(0,w.isNumber)(q.y))){var J=m[q.cluster],ft=Math.sqrt((q.x-J.cx)*(q.x-J.cx)+(q.y-J.cy)*(q.y-J.cy)),nt=U*H;Y[Q].x-=nt*(q.x-J.cx)/ft,Y[Q].y-=nt*(q.y-J.cy)/ft}})}g.forEach(function(q,Q){if(!(!(0,w.isNumber)(q.x)||!(0,w.isNumber)(q.y))){var J=.01*U*D;Y[Q].x-=J*(q.x-E[0]),Y[Q].y-=J*(q.y-E[1])}}),g.forEach(function(q,Q){if((0,w.isNumber)(q.fx)&&(0,w.isNumber)(q.fy)){q.x=q.fx,q.y=q.fy;return}if(!(!(0,w.isNumber)(q.x)||!(0,w.isNumber)(q.y))){var J=Math.sqrt(Y[Q].x*Y[Q].x+Y[Q].y*Y[Q].y);if(J>0){var ft=Math.min(h*(F/T),J);q.x+=Y[Q].x/J*ft,q.y+=Y[Q].y/J*ft}}}),(S=y.tick)===null||S===void 0||S.call(y)}},p.prototype.applyCalculate=function(m,S,y,g,O){var E=this;E.calRepulsive(m,y,O),S&&E.calAttractive(S,y,g)},p.prototype.calRepulsive=function(m,S,y){m.forEach(function(g,O){S[O]={x:0,y:0},m.forEach(function(E,D){if(O!==D&&!(!(0,w.isNumber)(g.x)||!(0,w.isNumber)(E.x)||!(0,w.isNumber)(g.y)||!(0,w.isNumber)(E.y))){var F=g.x-E.x,W=g.y-E.y,b=F*F+W*W;if(b===0){b=1;var h=O>D?1:-1;F=.01*h,W=.01*h}var K=y/b;S[O].x+=F*K,S[O].y+=W*K}})})},p.prototype.calAttractive=function(m,S,y){var g=this;m.forEach(function(O){var E=(0,w.getEdgeTerminal)(O,"source"),D=(0,w.getEdgeTerminal)(O,"target");if(!(!E||!D)){var F=g.nodeIdxMap[E],W=g.nodeIdxMap[D];if(F!==W){var b=g.nodeMap[E],h=g.nodeMap[D];if(!(!(0,w.isNumber)(h.x)||!(0,w.isNumber)(b.x)||!(0,w.isNumber)(h.y)||!(0,w.isNumber)(b.y))){var K=h.x-b.x,U=h.y-b.y,Y=Math.sqrt(K*K+U*U),Z=Y*Y/y;S[W].x-=K/Y*Z,S[W].y-=U/Y*Z,S[F].x+=K/Y*Z,S[F].y+=U/Y*Z}}}})},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var m=this;m.stop(),m.tick=null,m.nodes=null,m.edges=null,m.destroyed=!0},p.prototype.getType=function(){return"fruchterman"},p}(k.Base);z.FruchtermanLayout=L},113653:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(S[g]=y[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.GForceLayout=void 0;var k=C(762329),w=C(449784),T=function(P,p){var m;return P?(0,w.isNumber)(P)?m=function(S){return P}:m=P:m=function(S){return p||1},m},L=function(P){x(p,P);function p(m){var S=P.call(this)||this;return S.maxIteration=500,S.workerEnabled=!1,S.edgeStrength=200,S.nodeStrength=1e3,S.coulombDisScale=.005,S.damping=.9,S.maxSpeed=1e3,S.minMovement=.5,S.interval=.02,S.factor=1,S.linkDistance=1,S.gravity=10,S.preventOverlap=!0,S.collideStrength=1,S.tick=function(){},S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.animate=!0,S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},p.prototype.execute=function(){var m,S,y=this,g=y.nodes;if(y.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(y.timeInterval),!g||g.length===0){(m=y.onLayoutEnd)===null||m===void 0||m.call(y);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var O=y.center;if(g.length===1){g[0].x=O[0],g[0].y=O[1],(S=y.onLayoutEnd)===null||S===void 0||S.call(y);return}var E={},D={};g.forEach(function(U,Y){(0,w.isNumber)(U.x)||(U.x=Math.random()*y.width),(0,w.isNumber)(U.y)||(U.y=Math.random()*y.height),E[U.id]=U,D[U.id]=Y}),y.nodeMap=E,y.nodeIdxMap=D,y.linkDistance=T(y.linkDistance,1),y.nodeStrength=T(y.nodeStrength,1),y.edgeStrength=T(y.edgeStrength,1);var F=y.nodeSize,W;if(y.preventOverlap){var b=y.nodeSpacing,h;(0,w.isNumber)(b)?h=function(){return b}:(0,w.isFunction)(b)?h=b:h=function(){return 0},F?(0,w.isArray)(F)?W=function(U){return Math.max(F[0],F[1])+h(U)}:W=function(U){return F+h(U)}:W=function(U){return U.size?(0,w.isArray)(U.size)?Math.max(U.size[0],U.size[1])+h(U):(0,w.isObject)(U.size)?Math.max(U.size.width,U.size.height)+h(U):U.size+h(U):10+h(U)}}y.nodeSize=W;var K=y.edges;y.degrees=(0,w.getDegree)(g.length,y.nodeIdxMap,K),y.getMass||(y.getMass=function(U){var Y=U.mass||y.degrees[y.nodeIdxMap[U.id]].all||1;return Y}),y.run()},p.prototype.run=function(){var m,S=this,y=S.maxIteration,g=S.nodes,O=S.workerEnabled,E=S.minMovement,D=S.animate;if(g)if(O||!D){for(var F=0;F<y;F++){var W=S.runOneStep(F);if(S.reachMoveThreshold(g,W,E))break}(m=S.onLayoutEnd)===null||m===void 0||m.call(S)}else{if(typeof window=="undefined")return;var b=0;this.timeInterval=window.setInterval(function(){var h,K;if(g){var U=S.runOneStep(b)||[];S.reachMoveThreshold(g,U,E)&&((h=S.onLayoutEnd)===null||h===void 0||h.call(S),window.clearInterval(S.timeInterval)),b++,b>=y&&((K=S.onLayoutEnd)===null||K===void 0||K.call(S),window.clearInterval(S.timeInterval))}},0)}},p.prototype.reachMoveThreshold=function(m,S,y){var g=0;return m.forEach(function(O,E){var D=O.x-S[E].x,F=O.y-S[E].y;g+=Math.sqrt(D*D+F*F)}),g/=m.length,g<y},p.prototype.runOneStep=function(m){var S,y=this,g=y.nodes,O=y.edges,E=[],D=[];if(g){g.forEach(function(b,h){E[2*h]=0,E[2*h+1]=0,D[2*h]=0,D[2*h+1]=0}),y.calRepulsive(E,g),O&&y.calAttractive(E,O),y.calGravity(E,g);var F=Math.max(.02,y.interval-m*.002);y.updateVelocity(E,D,F,g);var W=[];return g.forEach(function(b){W.push({x:b.x,y:b.y})}),y.updatePosition(D,F,g),(S=y.tick)===null||S===void 0||S.call(y),W}},p.prototype.calRepulsive=function(m,S){var y=this,g=y.getMass,O=y.factor,E=y.coulombDisScale,D=y.preventOverlap,F=y.collideStrength,W=F===void 0?1:F,b=y.nodeStrength,h=y.nodeSize;S.forEach(function(K,U){var Y=g?g(K):1;S.forEach(function(Z,H){if(!(U>=H)){var q=K.x-Z.x,Q=K.y-Z.y;q===0&&Q===0&&(q=Math.random()*.01,Q=Math.random()*.01);var J=q*q+Q*Q,ft=Math.sqrt(J),nt=(ft+.1)*E,yt=q/ft,gt=Q/ft,zt=(b(K)+b(Z))*.5*O/(nt*nt),Mt=g?g(Z):1;if(m[2*U]+=yt*zt,m[2*U+1]+=gt*zt,m[2*H]-=yt*zt,m[2*H+1]-=gt*zt,D&&(h(K)+h(Z))/2>ft){var Ct=W*(b(K)+b(Z))*.5/J;m[2*U]+=yt*Ct/Y,m[2*U+1]+=gt*Ct/Y,m[2*H]-=yt*Ct/Mt,m[2*H+1]-=gt*Ct/Mt}}})})},p.prototype.calAttractive=function(m,S){var y=this,g=y.nodeMap,O=y.nodeIdxMap,E=y.linkDistance,D=y.edgeStrength,F=y.nodeSize,W=y.getMass;S.forEach(function(b,h){var K=(0,w.getEdgeTerminal)(b,"source"),U=(0,w.getEdgeTerminal)(b,"target"),Y=g[K],Z=g[U],H=Z.x-Y.x,q=Z.y-Y.y;H===0&&q===0&&(H=Math.random()*.01,q=Math.random()*.01);var Q=Math.sqrt(H*H+q*q),J=H/Q,ft=q/Q,nt=E(b,Y,Z)||1+(F(Y)+F(Z)||0)/2,yt=nt-Q,gt=yt*D(b),zt=O[K],Mt=O[U],Ct=W?W(Y):1,rt=W?W(Z):1;m[2*zt]-=J*gt/Ct,m[2*zt+1]-=ft*gt/Ct,m[2*Mt]+=J*gt/rt,m[2*Mt+1]+=ft*gt/rt})},p.prototype.calGravity=function(m,S){for(var y=this,g=y.center,O=y.gravity,E=y.degrees,D=S.length,F=0;F<D;F++){var W=S[F],b=W.x-g[0],h=W.y-g[1],K=O;if(y.getCenter){var U=y.getCenter(W,E[F].all);U&&(0,w.isNumber)(U[0])&&(0,w.isNumber)(U[1])&&(0,w.isNumber)(U[2])&&(b=W.x-U[0],h=W.y-U[1],K=U[2])}K&&(m[2*F]-=K*b,m[2*F+1]-=K*h)}},p.prototype.updateVelocity=function(m,S,y,g){var O=this,E=y*O.damping;g.forEach(function(D,F){var W=m[2*F]*E||.01,b=m[2*F+1]*E||.01,h=Math.sqrt(W*W+b*b);if(h>O.maxSpeed){var K=O.maxSpeed/h;W=K*W,b=K*b}S[2*F]=W,S[2*F+1]=b})},p.prototype.updatePosition=function(m,S,y){y.forEach(function(g,O){if((0,w.isNumber)(g.fx)&&(0,w.isNumber)(g.fy)){g.x=g.fx,g.y=g.fy;return}var E=m[2*O]*S,D=m[2*O+1]*S;g.x+=E,g.y+=D})},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var m=this;m.stop(),m.tick=null,m.nodes=null,m.edges=null,m.destroyed=!0},p.prototype.getType=function(){return"gForce"},p}(k.Base);z.GForceLayout=L},687745:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var g=function(O,E){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var W in F)Object.prototype.hasOwnProperty.call(F,W)&&(D[W]=F[W])},g(O,E)};return function(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");g(O,E);function D(){this.constructor=O}O.prototype=E===null?Object.create(E):(D.prototype=E.prototype,new D)}}(),k=this&&this.__awaiter||function(g,O,E,D){function F(W){return W instanceof E?W:new E(function(b){b(W)})}return new(E||(E=Promise))(function(W,b){function h(Y){try{U(D.next(Y))}catch(Z){b(Z)}}function K(Y){try{U(D.throw(Y))}catch(Z){b(Z)}}function U(Y){Y.done?W(Y.value):F(Y.value).then(h,K)}U((D=D.apply(g,O||[])).next())})},w=this&&this.__generator||function(g,O){var E={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},D,F,W,b;return b={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function h(U){return function(Y){return K([U,Y])}}function K(U){if(D)throw new TypeError("Generator is already executing.");for(;b&&(b=0,U[0]&&(E=0)),E;)try{if(D=1,F&&(W=U[0]&2?F.return:U[0]?F.throw||((W=F.return)&&W.call(F),0):F.next)&&!(W=W.call(F,U[1])).done)return W;switch(F=0,W&&(U=[U[0]&2,W.value]),U[0]){case 0:case 1:W=U;break;case 4:return E.label++,{value:U[1],done:!1};case 5:E.label++,F=U[1],U=[0];continue;case 7:U=E.ops.pop(),E.trys.pop();continue;default:if(W=E.trys,!(W=W.length>0&&W[W.length-1])&&(U[0]===6||U[0]===2)){E=0;continue}if(U[0]===3&&(!W||U[1]>W[0]&&U[1]<W[3])){E.label=U[1];break}if(U[0]===6&&E.label<W[1]){E.label=W[1],W=U;break}if(W&&E.label<W[2]){E.label=W[2],E.ops.push(U);break}W[2]&&E.ops.pop(),E.trys.pop();continue}U=O.call(g,E)}catch(Y){U=[6,Y],F=0}finally{D=W=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}};Object.defineProperty(z,"__esModule",{value:!0}),z.FruchtermanGPULayout=void 0;var T=C(762329),L=C(449784),P=C(901029),p=C(248835),m=C(108574),S=C(416470),y=function(g){x(O,g);function O(E){var D=g.call(this)||this;return D.maxIteration=1e3,D.gravity=10,D.speed=1,D.clustering=!1,D.clusterField="cluster",D.clusterGravity=10,D.workerEnabled=!1,D.nodes=[],D.edges=[],D.width=300,D.height=300,D.nodeMap={},D.nodeIdxMap={},D.updateCfg(E),D}return O.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},O.prototype.execute=function(){return k(this,void 0,void 0,function(){var E,D,F,W,b,h=this;return w(this,function(K){switch(K.label){case 0:return E=this,D=E.nodes,!D||D.length===0?(E.onLayoutEnd&&E.onLayoutEnd(),[2]):(!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]),F=E.center,D.length===1?(D[0].x=F[0],D[0].y=F[1],E.onLayoutEnd&&E.onLayoutEnd(),[2]):(W={},b={},D.forEach(function(U,Y){(0,L.isNumber)(U.x)||(U.x=Math.random()*h.width),(0,L.isNumber)(U.y)||(U.y=Math.random()*h.height),W[U.id]=U,b[U.id]=Y}),E.nodeMap=W,E.nodeIdxMap=b,[4,E.run()]));case 1:return K.sent(),[2]}})})},O.prototype.executeWithWorker=function(E,D){return k(this,void 0,void 0,function(){var F,W,b,h,K,U=this;return w(this,function(Y){switch(Y.label){case 0:return F=this,W=F.nodes,b=F.center,!W||W.length===0?[2]:W.length===1?(W[0].x=b[0],W[0].y=b[1],[2]):(h={},K={},W.forEach(function(Z,H){(0,L.isNumber)(Z.x)||(Z.x=Math.random()*U.width),(0,L.isNumber)(Z.y)||(Z.y=Math.random()*U.height),h[Z.id]=Z,K[Z.id]=H}),F.nodeMap=h,F.nodeIdxMap=K,[4,F.run(E,D)]);case 1:return Y.sent(),[2]}})})},O.prototype.run=function(E,D){return k(this,void 0,void 0,function(){var F,W,b,h,K,U,Y,Z,H,q,Q,J,ft,nt,yt,gt,zt,Mt,Ct,rt,ot,Tt,Rt,st,bt,Ft,Ht=this;return w(this,function(_t){switch(_t.label){case 0:for(F=this,W=F.nodes,b=F.edges,h=F.maxIteration,K=F.center,U=F.height*F.width,Y=Math.sqrt(U)/10,Z=U/(W.length+1),H=Math.sqrt(Z),q=F.speed,Q=F.clustering,J=(0,p.attributesToTextureData)([F.clusterField],W),ft=J.array,nt=J.count,W.forEach(function(Xt,ee){var se=0,ue=0;(0,L.isNumber)(Xt.fx)&&(0,L.isNumber)(Xt.fy)&&(se=Xt.fx||.001,ue=Xt.fy||.001),ft[4*ee+1]=se,ft[4*ee+2]=ue}),yt=W.length,gt=(0,p.buildTextureData)(W,b),zt=gt.maxEdgePerVetex,Mt=gt.array,Ct=F.workerEnabled,Ct?rt=P.World.create({canvas:E,engineOptions:{supportCompute:!0}}):rt=P.World.create({engineOptions:{supportCompute:!0}}),ot=F.onLayoutEnd,Tt=[],Rt=0;Rt<nt;Rt++)Tt.push(0,0,0,0);return st=rt.createKernel(m.fruchtermanBundle).setDispatch([yt,1,1]).setBinding({u_Data:Mt,u_K:H,u_K2:Z,u_Gravity:F.gravity,u_ClusterGravity:F.clusterGravity||F.gravity||1,u_Speed:q,u_MaxDisplace:Y,u_Clustering:Q?1:0,u_Center:K,u_AttributeArray:ft,u_ClusterCenters:Tt,MAX_EDGE_PER_VERTEX:zt,VERTEX_COUNT:yt}),Q&&(bt=rt.createKernel(m.clusterBundle).setDispatch([nt,1,1]).setBinding({u_Data:Mt,u_NodeAttributes:ft,u_ClusterCenters:Tt,VERTEX_COUNT:yt,CLUSTER_COUNT:nt})),Ft=function(){return k(Ht,void 0,void 0,function(){var Xt,ee;return w(this,function(se){switch(se.label){case 0:Xt=0,se.label=1;case 1:return Xt<h?[4,st.execute()]:[3,6];case 2:return se.sent(),Q?(bt.setBinding({u_Data:st}),[4,bt.execute()]):[3,4];case 3:se.sent(),st.setBinding({u_ClusterCenters:bt}),se.label=4;case 4:st.setBinding({u_MaxDisplace:Y*=.99}),se.label=5;case 5:return Xt++,[3,1];case 6:return[4,st.getOutput()];case 7:return ee=se.sent(),E?D.postMessage({type:S.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:ee}):W.forEach(function(ue,Ut){var oe=ee[4*Ut],Pe=ee[4*Ut+1];ue.x=oe,ue.y=Pe}),ot&&ot(),[2]}})})},[4,Ft()];case 1:return _t.sent(),[2]}})})},O.prototype.getType=function(){return"fruchterman-gpu"},O}(T.Base);z.FruchtermanGPULayout=y},108574:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.clusterBundle=z.clusterCode=z.fruchtermanBundle=z.fruchtermanCode=void 0,z.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,z.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',z.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,z.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},785194:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var O=function(E,D){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,W){F.__proto__=W}||function(F,W){for(var b in W)Object.prototype.hasOwnProperty.call(W,b)&&(F[b]=W[b])},O(E,D)};return function(E,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");O(E,D);function F(){this.constructor=E}E.prototype=D===null?Object.create(D):(F.prototype=D.prototype,new F)}}(),k=this&&this.__awaiter||function(O,E,D,F){function W(b){return b instanceof D?b:new D(function(h){h(b)})}return new(D||(D=Promise))(function(b,h){function K(Z){try{Y(F.next(Z))}catch(H){h(H)}}function U(Z){try{Y(F.throw(Z))}catch(H){h(H)}}function Y(Z){Z.done?b(Z.value):W(Z.value).then(K,U)}Y((F=F.apply(O,E||[])).next())})},w=this&&this.__generator||function(O,E){var D={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},F,W,b,h;return h={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function K(Y){return function(Z){return U([Y,Z])}}function U(Y){if(F)throw new TypeError("Generator is already executing.");for(;h&&(h=0,Y[0]&&(D=0)),D;)try{if(F=1,W&&(b=Y[0]&2?W.return:Y[0]?W.throw||((b=W.return)&&b.call(W),0):W.next)&&!(b=b.call(W,Y[1])).done)return b;switch(W=0,b&&(Y=[Y[0]&2,b.value]),Y[0]){case 0:case 1:b=Y;break;case 4:return D.label++,{value:Y[1],done:!1};case 5:D.label++,W=Y[1],Y=[0];continue;case 7:Y=D.ops.pop(),D.trys.pop();continue;default:if(b=D.trys,!(b=b.length>0&&b[b.length-1])&&(Y[0]===6||Y[0]===2)){D=0;continue}if(Y[0]===3&&(!b||Y[1]>b[0]&&Y[1]<b[3])){D.label=Y[1];break}if(Y[0]===6&&D.label<b[1]){D.label=b[1],b=Y;break}if(b&&D.label<b[2]){D.label=b[2],D.ops.push(Y);break}b[2]&&D.ops.pop(),D.trys.pop();continue}Y=E.call(O,D)}catch(Z){Y=[6,Z],W=0}finally{F=b=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(z,"__esModule",{value:!0}),z.GForceGPULayout=void 0;var T=C(762329),L=C(449784),P=C(901029),p=C(248835),m=C(280628),S=C(549762),y=C(416470),g=function(O){x(E,O);function E(D){var F=O.call(this)||this;return F.maxIteration=1e3,F.edgeStrength=200,F.nodeStrength=1e3,F.coulombDisScale=.005,F.damping=.9,F.maxSpeed=1e3,F.minMovement=.5,F.interval=.02,F.factor=1,F.linkDistance=1,F.gravity=10,F.workerEnabled=!1,F.nodes=[],F.edges=[],F.width=300,F.height=300,F.nodeMap={},F.nodeIdxMap={},F.updateCfg(D),F}return E.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},E.prototype.execute=function(){return k(this,void 0,void 0,function(){var D,F,W,b,h;return w(this,function(K){switch(K.label){case 0:return D=this,F=D.nodes,!F||F.length===0?(D.onLayoutEnd&&D.onLayoutEnd(),[2]):(!D.width&&typeof window!="undefined"&&(D.width=window.innerWidth),!D.height&&typeof window!="undefined"&&(D.height=window.innerHeight),D.center||(D.center=[D.width/2,D.height/2]),W=D.center,F.length===1?(F[0].x=W[0],F[0].y=W[1],D.onLayoutEnd&&D.onLayoutEnd(),[2]):(b={},h={},F.forEach(function(U,Y){(0,L.isNumber)(U.x)||(U.x=Math.random()*D.width),(0,L.isNumber)(U.y)||(U.y=Math.random()*D.height),b[U.id]=U,h[U.id]=Y}),D.nodeMap=b,D.nodeIdxMap=h,D.nodeStrength=(0,p.proccessToFunc)(D.nodeStrength,1),D.edgeStrength=(0,p.proccessToFunc)(D.edgeStrength,1),[4,D.run()]));case 1:return K.sent(),[2]}})})},E.prototype.executeWithWorker=function(D,F){var W=this,b=W.nodes,h=W.center;if(!(!b||b.length===0)){if(b.length===1){b[0].x=h[0],b[0].y=h[1];return}var K={},U={};b.forEach(function(Y,Z){(0,L.isNumber)(Y.x)||(Y.x=Math.random()*W.width),(0,L.isNumber)(Y.y)||(Y.y=Math.random()*W.height),K[Y.id]=Y,U[Y.id]=Z}),W.nodeMap=K,W.nodeIdxMap=U,W.nodeStrength=(0,p.proccessToFunc)(W.nodeStrength,1),W.edgeStrength=(0,p.proccessToFunc)(W.edgeStrength,1),W.run(D,F)}},E.prototype.run=function(D,F){return k(this,void 0,void 0,function(){var W,b,h,K,U,Y,Z,H,q,Q,J,ft,nt,yt,gt,zt,Mt,Ct,rt,ot,Tt,Rt,st,bt,Ft,Ht,_t,Xt=this;return w(this,function(ee){switch(ee.label){case 0:for(W=this,b=W.nodes,h=W.edges,K=W.maxIteration,!W.width&&typeof window!="undefined"&&(W.width=window.innerWidth),!W.height&&typeof window!="undefined"&&(W.height=window.innerHeight),U=b.length,W.linkDistance=(0,p.proccessToFunc)(W.linkDistance),W.edgeStrength=(0,p.proccessToFunc)(W.edgeStrength),Y=(0,p.buildTextureDataWithTwoEdgeAttr)(b,h,W.linkDistance,W.edgeStrength),Z=Y.maxEdgePerVetex,H=Y.array,W.degrees=(0,m.getDegree)(b.length,W.nodeIdxMap,h).map(function(se){return se.all}),q=[],Q=[],J=[],ft=[],nt=[],yt=[],gt=[],W.getMass||(W.getMass=function(se){return W.degrees[W.nodeIdxMap[se.id]]||1}),zt=W.gravity,Mt=W.center,b.forEach(function(se,ue){q.push(W.getMass(se)),Q.push(W.nodeStrength(se)),W.degrees[ue]||(W.degrees[ue]=0);var Ut=[Mt[0],Mt[1],zt];if(W.getCenter){var oe=W.getCenter(se,W.degrees[ue]);oe&&(0,L.isNumber)(oe[0])&&(0,L.isNumber)(oe[1])&&(0,L.isNumber)(oe[2])&&(Ut=oe)}J.push(Ut[0]),ft.push(Ut[1]),nt.push(Ut[2]),(0,L.isNumber)(se.fx)&&(0,L.isNumber)(se.fy)?(yt.push(se.fx||.001),gt.push(se.fy||.001)):(yt.push(0),gt.push(0))}),Ct=(0,p.arrayToTextureData)([q,W.degrees,Q,yt]),rt=(0,p.arrayToTextureData)([J,ft,nt,gt]),ot=W.workerEnabled,ot?Tt=P.World.create({canvas:D,engineOptions:{supportCompute:!0}}):Tt=P.World.create({engineOptions:{supportCompute:!0}}),Rt=W.onLayoutEnd,st=[],H.forEach(function(se){st.push(se)}),bt=0;bt<4;bt++)st.push(0);return Ft=Tt.createKernel(S.gForceBundle).setDispatch([U,1,1]).setBinding({u_Data:H,u_damping:W.damping,u_maxSpeed:W.maxSpeed,u_minMovement:W.minMovement,u_coulombDisScale:W.coulombDisScale,u_factor:W.factor,u_NodeAttributeArray1:Ct,u_NodeAttributeArray2:rt,MAX_EDGE_PER_VERTEX:Z,VERTEX_COUNT:U,u_AveMovement:st,u_interval:W.interval}),Ht=Tt.createKernel(S.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:H,VERTEX_COUNT:U,u_AveMovement:[0,0,0,0]}),_t=function(){return k(Xt,void 0,void 0,function(){var se,ue,Ut;return w(this,function(oe){switch(oe.label){case 0:se=0,oe.label=1;case 1:return se<K?[4,Ft.execute()]:[3,5];case 2:return oe.sent(),Ht.setBinding({u_Data:Ft}),[4,Ht.execute()];case 3:oe.sent(),ue=Math.max(.02,W.interval-se*.002),Ft.setBinding({u_interval:ue,u_AveMovement:Ht}),oe.label=4;case 4:return se++,[3,1];case 5:return[4,Ft.getOutput()];case 6:return Ut=oe.sent(),D?F.postMessage({type:y.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Ut}):b.forEach(function(Pe,te){var ve=Ut[4*te],Ue=Ut[4*te+1];Pe.x=ve,Pe.y=Ue}),Rt&&Rt(),[2]}})})},[4,_t()];case 1:return ee.sent(),[2]}})})},E.prototype.getType=function(){return"gForce-gpu"},E}(T.Base);z.GForceGPULayout=g},549762:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.aveMovementBundle=z.aveMovementCode=z.gForceBundle=z.gForceCode=void 0,z.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,z.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',z.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,z.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},694414:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var L=function(P,p){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var y in S)Object.prototype.hasOwnProperty.call(S,y)&&(m[y]=S[y])},L(P,p)};return function(P,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");L(P,p);function m(){this.constructor=P}P.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.GridLayout=void 0;var k=C(449784),w=C(762329),T=function(L){x(P,L);function P(p){var m=L.call(this)||this;return m.begin=[0,0],m.preventOverlap=!0,m.preventOverlapPadding=10,m.condense=!1,m.sortBy="degree",m.nodes=[],m.edges=[],m.width=300,m.height=300,m.row=0,m.col=0,m.cellWidth=0,m.cellHeight=0,m.cellUsed={},m.id2manPos={},m.onLayoutEnd=function(){},m.updateCfg(p),m}return P.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},P.prototype.execute=function(){var p=this,m=p.nodes,S=p.edges,y=p.begin,g=m.length;if(g===0)return p.onLayoutEnd&&p.onLayoutEnd(),{nodes:m,edges:S};if(g===1)return m[0].x=y[0],m[0].y=y[1],p.onLayoutEnd&&p.onLayoutEnd(),{nodes:m,edges:S};var O=p.sortBy,E=p.width,D=p.height,F=p.condense,W=p.preventOverlapPadding,b=p.preventOverlap,h=p.nodeSpacing,K=p.nodeSize,U=[];m.forEach(function(Ct){U.push(Ct)});var Y={};if(U.forEach(function(Ct,rt){Y[Ct.id]=rt}),(O==="degree"||!(0,k.isString)(O)||U[0][O]===void 0)&&(O="degree",(0,k.isNaN)(m[0].degree))){var Z=(0,k.getDegree)(U.length,Y,S);U.forEach(function(Ct,rt){Ct.degree=Z[rt].all})}U.sort(function(Ct,rt){return rt[O]-Ct[O]}),!E&&typeof window!="undefined"&&(E=window.innerWidth),!D&&typeof window!="undefined"&&(D=window.innerHeight);var H=p.rows,q=p.cols!=null?p.cols:p.columns;if(p.cells=g,H!=null&&q!=null?(p.rows=H,p.cols=q):H!=null&&q==null?(p.rows=H,p.cols=Math.ceil(p.cells/p.rows)):H==null&&q!=null?(p.cols=q,p.rows=Math.ceil(p.cells/p.cols)):(p.splits=Math.sqrt(p.cells*p.height/p.width),p.rows=Math.round(p.splits),p.cols=Math.round(p.width/p.height*p.splits)),p.rows=Math.max(p.rows,1),p.cols=Math.max(p.cols,1),p.cols*p.rows>p.cells){var Q=p.small(),J=p.large();(Q-1)*J>=p.cells?p.small(Q-1):(J-1)*Q>=p.cells&&p.large(J-1)}else for(;p.cols*p.rows<p.cells;){var Q=p.small(),J=p.large();(J+1)*Q>=p.cells?p.large(J+1):p.small(Q+1)}if(p.cellWidth=E/p.cols,p.cellHeight=D/p.rows,F&&(p.cellWidth=0,p.cellHeight=0),b||h){var ft=(0,k.getFuncByUnknownType)(10,h),nt=(0,k.getFuncByUnknownType)(30,K,!1);U.forEach(function(Ct){(!Ct.x||!Ct.y)&&(Ct.x=0,Ct.y=0);var rt=nt(Ct)||30,ot,Tt;(0,k.isArray)(rt)?(ot=rt[0],Tt=rt[1]):(ot=rt,Tt=rt);var Rt=ft!==void 0?ft(Ct):W,st=ot+Rt,bt=Tt+Rt;p.cellWidth=Math.max(p.cellWidth,st),p.cellHeight=Math.max(p.cellHeight,bt)})}p.cellUsed={},p.row=0,p.col=0,p.id2manPos={};for(var yt=0;yt<U.length;yt++){var gt=U[yt],zt=void 0;if(p.position&&(zt=p.position(gt)),zt&&(zt.row!==void 0||zt.col!==void 0)){var Mt={row:zt.row,col:zt.col};if(Mt.col===void 0)for(Mt.col=0;p.used(Mt.row,Mt.col);)Mt.col++;else if(Mt.row===void 0)for(Mt.row=0;p.used(Mt.row,Mt.col);)Mt.row++;p.id2manPos[gt.id]=Mt,p.use(Mt.row,Mt.col)}p.getPos(gt)}return p.onLayoutEnd&&p.onLayoutEnd(),{edges:S,nodes:U}},P.prototype.small=function(p){var m=this,S,y=m.rows||5,g=m.cols||5;if(p==null)S=Math.min(y,g);else{var O=Math.min(y,g);O===m.rows?m.rows=p:m.cols=p}return S},P.prototype.large=function(p){var m=this,S,y=m.rows||5,g=m.cols||5;if(p==null)S=Math.max(y,g);else{var O=Math.max(y,g);O===m.rows?m.rows=p:m.cols=p}return S},P.prototype.used=function(p,m){var S=this;return S.cellUsed["c-".concat(p,"-").concat(m)]||!1},P.prototype.use=function(p,m){var S=this;S.cellUsed["c-".concat(p,"-").concat(m)]=!0},P.prototype.moveToNextCell=function(){var p=this,m=p.cols||5;p.col++,p.col>=m&&(p.col=0,p.row++)},P.prototype.getPos=function(p){var m=this,S=m.begin,y=m.cellWidth,g=m.cellHeight,O,E,D=m.id2manPos[p.id];if(D)O=D.col*y+y/2+S[0],E=D.row*g+g/2+S[1];else{for(;m.used(m.row,m.col);)m.moveToNextCell();O=m.col*y+y/2+S[0],E=m.row*g+g/2+S[1],m.use(m.row,m.col),m.moveToNextCell()}p.x=O,p.y=E},P.prototype.getType=function(){return"grid"},P}(w.Base);z.GridLayout=T},702584:function(He,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(Z,H,q,Q){Q===void 0&&(Q=q);var J=Object.getOwnPropertyDescriptor(H,q);(!J||("get"in J?!H.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return H[q]}}),Object.defineProperty(Z,Q,J)}:function(Z,H,q,Q){Q===void 0&&(Q=q),Z[Q]=H[q]}),k=this&&this.__exportStar||function(Z,H){for(var q in Z)q!=="default"&&!Object.prototype.hasOwnProperty.call(H,q)&&x(H,Z,q)};Object.defineProperty(z,"__esModule",{value:!0}),z.ERLayout=z.ForceAtlas2Layout=z.ComboCombinedLayout=z.ComboForceLayout=z.GForceGPULayout=z.FruchtermanGPULayout=z.FruchtermanLayout=z.MDSLayout=z.ConcentricLayout=z.RadialLayout=z.DagreCompoundLayout=z.DagreLayout=z.CircularLayout=z.ForceLayout=z.Force2Layout=z.GForceLayout=z.RandomLayout=z.GridLayout=z.Layouts=z.Layout=void 0;var w=C(694414);Object.defineProperty(z,"GridLayout",{enumerable:!0,get:function(){return w.GridLayout}});var T=C(539711);Object.defineProperty(z,"RandomLayout",{enumerable:!0,get:function(){return T.RandomLayout}});var L=C(113653);Object.defineProperty(z,"GForceLayout",{enumerable:!0,get:function(){return L.GForceLayout}});var P=C(306740);Object.defineProperty(z,"Force2Layout",{enumerable:!0,get:function(){return P.Force2Layout}});var p=C(885717);Object.defineProperty(z,"ForceLayout",{enumerable:!0,get:function(){return p.ForceLayout}});var m=C(964885);Object.defineProperty(z,"CircularLayout",{enumerable:!0,get:function(){return m.CircularLayout}});var S=C(920171);Object.defineProperty(z,"DagreLayout",{enumerable:!0,get:function(){return S.DagreLayout}});var y=C(177057);Object.defineProperty(z,"DagreCompoundLayout",{enumerable:!0,get:function(){return y.DagreCompoundLayout}});var g=C(847944);Object.defineProperty(z,"RadialLayout",{enumerable:!0,get:function(){return g.RadialLayout}});var O=C(843281);Object.defineProperty(z,"ConcentricLayout",{enumerable:!0,get:function(){return O.ConcentricLayout}});var E=C(352899);Object.defineProperty(z,"MDSLayout",{enumerable:!0,get:function(){return E.MDSLayout}});var D=C(880374);Object.defineProperty(z,"FruchtermanLayout",{enumerable:!0,get:function(){return D.FruchtermanLayout}});var F=C(687745);Object.defineProperty(z,"FruchtermanGPULayout",{enumerable:!0,get:function(){return F.FruchtermanGPULayout}});var W=C(785194);Object.defineProperty(z,"GForceGPULayout",{enumerable:!0,get:function(){return W.GForceGPULayout}});var b=C(366590);Object.defineProperty(z,"ComboForceLayout",{enumerable:!0,get:function(){return b.ComboForceLayout}});var h=C(263861);Object.defineProperty(z,"ComboCombinedLayout",{enumerable:!0,get:function(){return h.ComboCombinedLayout}});var K=C(148564);Object.defineProperty(z,"ForceAtlas2Layout",{enumerable:!0,get:function(){return K.ForceAtlas2Layout}});var U=C(290441);Object.defineProperty(z,"ERLayout",{enumerable:!0,get:function(){return U.ERLayout}});var Y=C(842875);Object.defineProperty(z,"Layout",{enumerable:!0,get:function(){return Y.Layout}}),Object.defineProperty(z,"Layouts",{enumerable:!0,get:function(){return Y.Layouts}}),k(C(932867),z)},842875:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.Layouts=z.Layout=void 0;var x=C(695326),k=C(694414),w=C(539711),T=C(306740),L=C(113653),P=C(885717),p=C(964885),m=C(920171),S=C(847944),y=C(843281),g=C(352899),O=C(880374),E=C(687745),D=C(785194),F=C(366590),W=C(263861),b=C(148564),h=C(290441),K=C(177057),U=C(449784),Y=function(){function Z(H){var q=(0,x.getLayoutByName)(H.type);this.layoutInstance=new q(H)}return Z.prototype.layout=function(H){return this.layoutInstance.layout(H)},Z.prototype.updateCfg=function(H){this.layoutInstance.updateCfg(H)},Z.prototype.init=function(H){this.correctLayers(H.nodes),this.layoutInstance.init(H)},Z.prototype.correctLayers=function(H){if(H!=null&&H.length){var q=1/0,Q=[];if(H.forEach(function(ft){(0,U.isString)(ft.layer)&&(ft.layer=parseInt(ft.layer,10)),!(ft.layer===void 0||isNaN(ft.layer))&&(Q.push(ft),ft.layer<q&&(q=ft.layer))}),q<=0){var J=Math.abs(q)+1;Q.forEach(function(ft){return ft.layer+=J})}}},Z.prototype.execute=function(){this.layoutInstance.execute()},Z.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},Z.prototype.destroy=function(){return this.layoutInstance.destroy()},Z}();z.Layout=Y,z.Layouts={force:P.ForceLayout,fruchterman:O.FruchtermanLayout,forceAtlas2:b.ForceAtlas2Layout,gForce:L.GForceLayout,force2:T.Force2Layout,dagre:m.DagreLayout,dagreCompound:K.DagreCompoundLayout,circular:p.CircularLayout,radial:S.RadialLayout,concentric:y.ConcentricLayout,grid:k.GridLayout,mds:g.MDSLayout,comboForce:F.ComboForceLayout,comboCombined:W.ComboCombinedLayout,random:w.RandomLayout,"gForce-gpu":D.GForceGPULayout,"fruchterman-gpu":E.FruchtermanGPULayout,er:h.ERLayout}},352899:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(S[g]=y[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.MDSLayout=void 0;var k=C(405237),w=C(449784),T=C(762329),L=function(P){x(p,P);function p(m){var S=P.call(this)||this;return S.center=[0,0],S.linkDistance=50,S.nodes=[],S.edges=[],S.onLayoutEnd=function(){},S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},p.prototype.execute=function(){var m=this,S=m.nodes,y=m.edges,g=y===void 0?[]:y,O=m.center;if(!S||S.length===0){m.onLayoutEnd&&m.onLayoutEnd();return}if(S.length===1){S[0].x=O[0],S[0].y=O[1],m.onLayoutEnd&&m.onLayoutEnd();return}var E=m.linkDistance,D=(0,w.getAdjMatrix)({nodes:S,edges:g},!1),F=(0,w.floydWarshall)(D);m.handleInfinity(F);var W=(0,w.scaleMatrix)(F,E);m.scaledDistances=W;var b=m.runMDS();return m.positions=b,b.forEach(function(h,K){S[K].x=h[0]+O[0],S[K].y=h[1]+O[1]}),m.onLayoutEnd&&m.onLayoutEnd(),{nodes:S,edges:g}},p.prototype.runMDS=function(){var m=this,S=2,y=m.scaledDistances,g=k.Matrix.mul(k.Matrix.pow(y,2),-.5),O=g.mean("row"),E=g.mean("column"),D=g.mean();g.add(D).subRowVector(O).subColumnVector(E);var F=new k.SingularValueDecomposition(g),W=k.Matrix.sqrt(F.diagonalMatrix).diagonal();return F.leftSingularVectors.toJSON().map(function(b){return k.Matrix.mul([b],[W]).toJSON()[0].splice(0,S)})},p.prototype.handleInfinity=function(m){var S=-999999;m.forEach(function(y){y.forEach(function(g){g!==1/0&&S<g&&(S=g)})}),m.forEach(function(y,g){y.forEach(function(O,E){O===1/0&&(m[g][E]=S)})})},p.prototype.getType=function(){return"mds"},p}(T.Base);z.MDSLayout=L},847944:function(He,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(w,T,L,P){P===void 0&&(P=L);var p=Object.getOwnPropertyDescriptor(T,L);(!p||("get"in p?!T.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return T[L]}}),Object.defineProperty(w,P,p)}:function(w,T,L,P){P===void 0&&(P=L),w[P]=T[L]}),k=this&&this.__exportStar||function(w,T){for(var L in w)L!=="default"&&!Object.prototype.hasOwnProperty.call(T,L)&&x(T,w,L)};Object.defineProperty(z,"__esModule",{value:!0}),k(C(255974),z)},366082:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var x=C(405237),k=function(){function w(T){this.distances=T.distances,this.dimension=T.dimension||2,this.linkDistance=T.linkDistance}return w.prototype.layout=function(){var T=this,L=T.dimension,P=T.distances,p=T.linkDistance;try{var m=x.Matrix.mul(x.Matrix.pow(P,2),-.5),S=m.mean("row"),y=m.mean("column"),g=m.mean();m.add(g).subRowVector(S).subColumnVector(y);var O=new x.SingularValueDecomposition(m),E=x.Matrix.sqrt(O.diagonalMatrix).diagonal();return O.leftSingularVectors.toJSON().map(function(h){return x.Matrix.mul([h],[E]).toJSON()[0].splice(0,L)})}catch(h){for(var D=[],F=0;F<P.length;F++){var W=Math.random()*p,b=Math.random()*p;D.push([W,b])}return D}},w}();z.default=k},255974:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var g=function(O,E){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var W in F)Object.prototype.hasOwnProperty.call(F,W)&&(D[W]=F[W])},g(O,E)};return function(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");g(O,E);function D(){this.constructor=O}O.prototype=E===null?Object.create(E):(D.prototype=E.prototype,new D)}}(),k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(z,"__esModule",{value:!0}),z.RadialLayout=void 0;var w=C(449784),T=C(762329),L=k(C(366082)),P=k(C(706290));function p(g){for(var O=g.length,E=g[0].length,D=[],F=0;F<O;F++){for(var W=[],b=0;b<E;b++)g[F][b]!==0?W.push(1/(g[F][b]*g[F][b])):W.push(0);D.push(W)}return D}function m(g,O){var E=-1;return g.forEach(function(D,F){D.id===O&&(E=F)}),E}function S(g,O){return Math.sqrt((g[0]-O[0])*(g[0]-O[0])+(g[1]-O[1])*(g[1]-O[1]))}var y=function(g){x(O,g);function O(E){var D=g.call(this)||this;return D.maxIteration=1e3,D.focusNode=null,D.unitRadius=null,D.linkDistance=50,D.preventOverlap=!1,D.strictRadial=!0,D.maxPreventOverlapIteration=200,D.sortStrength=10,D.nodes=[],D.edges=[],D.updateCfg(E),D}return O.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},O.prototype.execute=function(){var E=this,D=E.nodes,F=E.edges||[];if(!D||D.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]);var W=E.center;if(D.length===1){D[0].x=W[0],D[0].y=W[1],E.onLayoutEnd&&E.onLayoutEnd();return}var b=E.linkDistance,h=null;if((0,w.isString)(E.focusNode)){for(var K=!1,U=0;U<D.length;U++)D[U].id===E.focusNode&&(h=D[U],E.focusNode=h,K=!0,U=D.length);K||(h=null)}else h=E.focusNode;h||(h=D[0],E.focusNode=h);var Y=m(D,h.id);Y<0&&(Y=0),E.focusIndex=Y;var Z=(0,w.getAdjMatrix)({nodes:D,edges:F},!1),H=(0,w.floydWarshall)(Z),q=E.maxToFocus(H,Y);E.handleInfinity(H,Y,q+1),E.distances=H;var Q=H[Y],J=E.width||500,ft=E.height||500,nt=J-W[0]>W[0]?W[0]:J-W[0],yt=ft-W[1]>W[1]?W[1]:ft-W[1];nt===0&&(nt=J/2),yt===0&&(yt=ft/2);var gt=yt>nt?nt:yt,zt=Math.max.apply(Math,Q),Mt=[];Q.forEach(function(se,ue){E.unitRadius||(E.unitRadius=gt/zt),Mt[ue]=se*E.unitRadius}),E.radii=Mt;var Ct=E.eIdealDisMatrix();E.eIdealDistances=Ct;var rt=p(Ct);E.weights=rt;var ot=new L.default({linkDistance:b,distances:Ct}),Tt=ot.layout();Tt.forEach(function(se){(0,w.isNaN)(se[0])&&(se[0]=Math.random()*b),(0,w.isNaN)(se[1])&&(se[1]=Math.random()*b)}),E.positions=Tt,Tt.forEach(function(se,ue){D[ue].x=se[0]+W[0],D[ue].y=se[1]+W[1]}),Tt.forEach(function(se){se[0]-=Tt[Y][0],se[1]-=Tt[Y][1]}),E.run();var Rt=E.preventOverlap,st=E.nodeSize,bt,Ft=E.strictRadial;if(Rt){var Ht=E.nodeSpacing,_t;(0,w.isNumber)(Ht)?_t=function(){return Ht}:(0,w.isFunction)(Ht)?_t=Ht:_t=function(){return 0},st?(0,w.isArray)(st)?bt=function(se){var ue=st[0]>st[1]?st[0]:st[1];return ue+_t(se)}:bt=function(se){return st+_t(se)}:bt=function(se){if(se.size){if((0,w.isArray)(se.size)){var ue=se.size[0]>se.size[1]?se.size[0]:se.size[1];return ue+_t(se)}if((0,w.isObject)(se.size)){var ue=se.size.width>se.size.height?se.size.width:se.size.height;return ue+_t(se)}return se.size+_t(se)}return 10+_t(se)};var Xt={nodes:D,nodeSizeFunc:bt,adjMatrix:Z,positions:Tt,radii:Mt,height:ft,width:J,strictRadial:Ft,focusID:Y,iterations:E.maxPreventOverlapIteration||200,k:Tt.length/4.5},ee=new P.default(Xt);Tt=ee.layout()}return Tt.forEach(function(se,ue){D[ue].x=se[0]+W[0],D[ue].y=se[1]+W[1]}),E.onLayoutEnd&&E.onLayoutEnd(),{nodes:D,edges:F}},O.prototype.run=function(){for(var E=this,D=E.maxIteration,F=E.positions||[],W=E.weights||[],b=E.eIdealDistances||[],h=E.radii||[],K=0;K<=D;K++){var U=K/D;E.oneIteration(U,F,h,b,W)}},O.prototype.oneIteration=function(E,D,F,W,b){var h=this,K=1-E,U=h.focusIndex;D.forEach(function(Y,Z){var H=S(Y,[0,0]),q=H===0?0:1/H;if(Z!==U){var Q=0,J=0,ft=0;D.forEach(function(yt,gt){if(Z!==gt){var zt=S(Y,yt),Mt=zt===0?0:1/zt,Ct=W[gt][Z];ft+=b[Z][gt],Q+=b[Z][gt]*(yt[0]+Ct*(Y[0]-yt[0])*Mt),J+=b[Z][gt]*(yt[1]+Ct*(Y[1]-yt[1])*Mt)}});var nt=F[Z]===0?0:1/F[Z];ft*=K,ft+=E*nt*nt,Q*=K,Q+=E*nt*Y[0]*q,Y[0]=Q/ft,J*=K,J+=E*nt*Y[1]*q,Y[1]=J/ft}})},O.prototype.eIdealDisMatrix=function(){var E=this,D=E.nodes;if(!D)return[];var F=E.distances,W=E.linkDistance,b=E.radii||[],h=E.unitRadius||50,K=[];return F&&F.forEach(function(U,Y){var Z=[];U.forEach(function(H,q){if(Y===q)Z.push(0);else if(b[Y]===b[q])if(E.sortBy==="data")Z.push(H*(Math.abs(Y-q)*E.sortStrength)/(b[Y]/h));else if(E.sortBy){var Q=D[Y][E.sortBy]||0,J=D[q][E.sortBy]||0;(0,w.isString)(Q)&&(Q=Q.charCodeAt(0)),(0,w.isString)(J)&&(J=J.charCodeAt(0)),Z.push(H*(Math.abs(Q-J)*E.sortStrength)/(b[Y]/h))}else Z.push(H*W/(b[Y]/h));else{var ft=(W+h)/2;Z.push(H*ft)}}),K.push(Z)}),K},O.prototype.handleInfinity=function(E,D,F){for(var W=E.length,b=0;b<W;b++)if(E[D][b]===1/0){E[D][b]=F,E[b][D]=F;for(var h=0;h<W;h++)E[b][h]!==1/0&&E[D][h]===1/0&&(E[D][h]=F+E[b][h],E[h][D]=F+E[b][h])}for(var b=0;b<W;b++)if(b!==D){for(var h=0;h<W;h++)if(E[b][h]===1/0){var K=Math.abs(E[D][b]-E[D][h]);K=K===0?1:K,E[b][h]=K}}},O.prototype.maxToFocus=function(E,D){for(var F=0,W=0;W<E[D].length;W++)E[D][W]!==1/0&&(F=E[D][W]>F?E[D][W]:F);return F},O.prototype.getType=function(){return"radial"},O}(T.Base);z.RadialLayout=y},706290:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=800,x=function(){function k(w){this.disp=[],this.positions=w.positions,this.adjMatrix=w.adjMatrix,this.focusID=w.focusID,this.radii=w.radii,this.iterations=w.iterations||10,this.height=w.height||10,this.width=w.width||10,this.speed=w.speed||100,this.gravity=w.gravity||10,this.nodeSizeFunc=w.nodeSizeFunc,this.k=w.k||5,this.strictRadial=w.strictRadial,this.nodes=w.nodes}return k.prototype.layout=function(){var w=this,T=w.positions,L=[],P=w.iterations,p=w.width/10;w.maxDisplace=p,w.disp=L;for(var m=0;m<P;m++)T.forEach(function(S,y){L[y]={x:0,y:0}}),w.getRepulsion(),w.updatePositions();return T},k.prototype.getRepulsion=function(){var w=this,T=w.positions,L=w.nodes,P=w.disp,p=w.k,m=w.radii||[];T.forEach(function(S,y){P[y]={x:0,y:0},T.forEach(function(g,O){if(y!==O&&m[y]===m[O]){var E=S[0]-g[0],D=S[1]-g[1],F=Math.sqrt(E*E+D*D);if(F===0){F=1;var W=y>O?1:-1;E=.01*W,D=.01*W}if(F<w.nodeSizeFunc(L[y])/2+w.nodeSizeFunc(L[O])/2){var b=p*p/F;P[y].x+=E/F*b,P[y].y+=D/F*b}}})})},k.prototype.updatePositions=function(){var w=this,T=w.positions,L=w.disp,P=w.speed,p=w.strictRadial,m=w.focusID,S=w.maxDisplace||w.width/10;p&&L.forEach(function(g,O){var E=T[O][0]-T[m][0],D=T[O][1]-T[m][1],F=Math.sqrt(E*E+D*D),W=D/F,b=-E/F,h=Math.sqrt(g.x*g.x+g.y*g.y),K=Math.acos((W*g.x+b*g.y)/h);K>Math.PI/2&&(K-=Math.PI/2,W*=-1,b*=-1);var U=Math.cos(K)*h;g.x=W*U,g.y=b*U});var y=w.radii;T.forEach(function(g,O){if(O!==m){var E=Math.sqrt(L[O].x*L[O].x+L[O].y*L[O].y);if(E>0&&O!==m){var D=Math.min(S*(P/C),E);if(g[0]+=L[O].x/E*D,g[1]+=L[O].y/E*D,p){var F=g[0]-T[m][0],W=g[1]-T[m][1],b=Math.sqrt(F*F+W*W);F=F/b*y[O],W=W/b*y[O],g[0]=T[m][0]+F,g[1]=T[m][1]+W}}}})},k}();z.default=x},539711:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var T=function(L,P){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(p[S]=m[S])},T(L,P)};return function(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");T(L,P);function p(){this.constructor=L}L.prototype=P===null?Object.create(P):(p.prototype=P.prototype,new p)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.RandomLayout=void 0;var k=C(762329),w=function(T){x(L,T);function L(P){var p=T.call(this)||this;return p.center=[0,0],p.width=300,p.height=300,p.nodes=[],p.edges=[],p.onLayoutEnd=function(){},p.updateCfg(P),p}return L.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},L.prototype.execute=function(){var P=this,p=P.nodes,m=.9,S=P.center;return!P.width&&typeof window!="undefined"&&(P.width=window.innerWidth),!P.height&&typeof window!="undefined"&&(P.height=window.innerHeight),p&&p.forEach(function(y){y.x=(Math.random()-.5)*m*P.width+S[0],y.y=(Math.random()-.5)*m*P.height+S[1]}),P.onLayoutEnd&&P.onLayoutEnd(),{nodes:p,edges:this.edges}},L.prototype.getType=function(){return"random"},L}(k.Base);z.RandomLayout=w},932867:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0})},695326:function(He,z,C){"use strict";var x=this&&this.__extends||function(){var m=function(S,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(g[E]=O[E])},m(S,y)};return function(S,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(S,y);function g(){this.constructor=S}S.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.getLayoutByName=z.unRegisterLayout=z.registerLayout=void 0;var k=C(762329),w=C(449784),T=new Map,L=function(m,S){if(T.get(m)&&console.warn("The layout with the name ".concat(m," exists already, it will be overridden")),(0,w.isObject)(S)){var y=function(g){x(O,g);function O(E){var D=this,F;D=g.call(this)||this;var W=D,b={},h=Object.assign({},W.getDefaultCfg(),((F=S.getDefaultCfg)===null||F===void 0?void 0:F.call(S))||{});return Object.assign(b,h,S,E),Object.keys(b).forEach(function(K){var U=b[K];W[K]=U}),D}return O}(k.Base);T.set(m,y)}else T.set(m,S);return T.get(m)};z.registerLayout=L;var P=function(m){T.has(m)&&T.delete(m)};z.unRegisterLayout=P;var p=function(m){return T.has(m)?T.get(m):null};z.getLayoutByName=p},185087:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.isArray=void 0,z.isArray=Array.isArray},578732:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getFuncByUnknownType=z.getFunc=z.isFunction=void 0;var x=C(449784),k=C(330627),w=function(P){return typeof P=="function"};z.isFunction=w;var T=function(P,p,m){var S;return m?S=m:(0,k.isNumber)(P)?S=function(){return P}:S=function(){return p},S};z.getFunc=T;var L=function(P,p,m){return m===void 0&&(m=!0),!p&&p!==0?function(S){return S.size?(0,x.isArray)(S.size)?S.size[0]>S.size[1]?S.size[0]:S.size[1]:(0,x.isObject)(S.size)?S.size.width>S.size.height?S.size.width:S.size.height:S.size:P}:(0,z.isFunction)(p)?p:(0,k.isNumber)(p)?function(){return p}:(0,x.isArray)(p)?function(){if(m){var S=Math.max.apply(Math,p);return isNaN(S)?P:S}return p}:(0,x.isObject)(p)?function(){if(m){var S=Math.max(p.width,p.height);return isNaN(S)?P:S}return[p.width,p.height]}:function(){return P}};z.getFuncByUnknownType=L},248835:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.arrayToTextureData=z.attributesToTextureData=z.buildTextureDataWithTwoEdgeAttr=z.buildTextureData=z.proccessToFunc=void 0;var x=C(449784),k=C(280628),w=function(m,S){var y;return m?(0,x.isNumber)(m)?y=function(){return m}:y=m:y=function(){return S||1},y};z.proccessToFunc=w;var T=function(m,S){var y=[],g=[],O={},E=0;for(E=0;E<m.length;E++){var D=m[E];O[D.id]=E,y.push(D.x),y.push(D.y),y.push(0),y.push(0),g.push([])}for(E=0;E<S.length;E++){var F=S[E],W=(0,k.getEdgeTerminal)(F,"source"),b=(0,k.getEdgeTerminal)(F,"target");!isNaN(O[W])&&!isNaN(O[b])&&(g[O[W]].push(O[b]),g[O[b]].push(O[W]))}var h=0;for(E=0;E<m.length;E++){var K=y.length,U=g[E],Y=U.length;y[E*4+2]=K,y[E*4+3]=Y,h=Math.max(h,Y);for(var Z=0;Z<Y;++Z){var H=U[Z];y.push(+H)}}for(;y.length%4!==0;)y.push(0);return{maxEdgePerVetex:h,array:new Float32Array(y)}};z.buildTextureData=T;var L=function(m,S,y,g){var O=[],E=[],D={},F=0;for(F=0;F<m.length;F++){var W=m[F];D[W.id]=F,O.push(W.x),O.push(W.y),O.push(0),O.push(0),E.push([])}for(F=0;F<S.length;F++){var b=S[F],h=(0,k.getEdgeTerminal)(b,"source"),K=(0,k.getEdgeTerminal)(b,"target");E[D[h]].push(D[K]),E[D[h]].push(y(b)),E[D[h]].push(g(b)),E[D[h]].push(0),E[D[K]].push(D[h]),E[D[K]].push(y(b)),E[D[K]].push(g(b)),E[D[K]].push(0)}var U=0;for(F=0;F<m.length;F++){var Y=O.length,Z=E[F],H=Z.length;O[F*4+2]=Y+1048576*H/4,O[F*4+3]=0,U=Math.max(U,H/4);for(var q=0;q<H;++q){var Q=Z[q];O.push(+Q)}}for(;O.length%4!==0;)O.push(0);return{maxEdgePerVetex:U,array:new Float32Array(O)}};z.buildTextureDataWithTwoEdgeAttr=L;var P=function(m,S){var y=[],g=m.length,O={};return S.forEach(function(E){m.forEach(function(D,F){if(O[E[D]]===void 0&&(O[E[D]]=Object.keys(O).length),y.push(O[E[D]]),F===g-1)for(;y.length%4!==0;)y.push(0)})}),{array:new Float32Array(y),count:Object.keys(O).length}};z.attributesToTextureData=P;var p=function(m){for(var S=[],y=m.length,g=m[0].length,O=function(D){m.forEach(function(F,W){if(S.push(F[D]),W===y-1)for(;S.length%4!==0;)S.push(0)})},E=0;E<g;E++)O(E);return new Float32Array(S)};z.arrayToTextureData=p},449784:function(He,z,C){"use strict";var x=this&&this.__createBinding||(Object.create?function(w,T,L,P){P===void 0&&(P=L);var p=Object.getOwnPropertyDescriptor(T,L);(!p||("get"in p?!T.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return T[L]}}),Object.defineProperty(w,P,p)}:function(w,T,L,P){P===void 0&&(P=L),w[P]=T[L]}),k=this&&this.__exportStar||function(w,T){for(var L in w)L!=="default"&&!Object.prototype.hasOwnProperty.call(T,L)&&x(T,w,L)};Object.defineProperty(z,"__esModule",{value:!0}),k(C(708055),z),k(C(185087),z),k(C(330627),z),k(C(280628),z),k(C(898130),z),k(C(578732),z)},280628:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getCoreNodeAndRelativeLeafNodes=z.getAvgNodePosition=z.getLayoutBBox=z.traverseTreeUp=z.scaleMatrix=z.getAdjMatrix=z.floydWarshall=z.getDegreeMap=z.getDegree=z.getEdgeTerminal=void 0;var x=C(185087),k=C(330627),w=C(898130),T=function(h,K){var U=h[K];return(0,w.isObject)(U)?U.cell:U};z.getEdgeTerminal=T;var L=function(h,K,U){for(var Y=[],Z=0;Z<h;Z++)Y[Z]={in:0,out:0,all:0};return U&&U.forEach(function(H){var q=(0,z.getEdgeTerminal)(H,"source"),Q=(0,z.getEdgeTerminal)(H,"target");q&&Y[K[q]]&&(Y[K[q]].out+=1,Y[K[q]].all+=1),Q&&Y[K[Q]]&&(Y[K[Q]].in+=1,Y[K[Q]].all+=1)}),Y};z.getDegree=L;var P=function(h,K){var U={};return h.forEach(function(Y){U[Y.id]={in:0,out:0,all:0}}),K&&K.forEach(function(Y){var Z=(0,z.getEdgeTerminal)(Y,"source"),H=(0,z.getEdgeTerminal)(Y,"target");Z&&(U[Z].out+=1,U[Z].all+=1),H&&(U[H].in+=1,U[H].all+=1)}),U};z.getDegreeMap=P;var p=function(h){for(var K=[],U=h.length,Y=0;Y<U;Y+=1){K[Y]=[];for(var Z=0;Z<U;Z+=1)Y===Z?K[Y][Z]=0:h[Y][Z]===0||!h[Y][Z]?K[Y][Z]=1/0:K[Y][Z]=h[Y][Z]}for(var H=0;H<U;H+=1)for(var Y=0;Y<U;Y+=1)for(var Z=0;Z<U;Z+=1)K[Y][Z]>K[Y][H]+K[H][Z]&&(K[Y][Z]=K[Y][H]+K[H][Z]);return K};z.floydWarshall=p;var m=function(h,K){var U=h.nodes,Y=h.edges,Z=[],H={};if(!U)throw new Error("invalid nodes data!");return U&&U.forEach(function(q,Q){H[q.id]=Q;var J=[];Z.push(J)}),Y==null||Y.forEach(function(q){var Q=(0,z.getEdgeTerminal)(q,"source"),J=(0,z.getEdgeTerminal)(q,"target"),ft=H[Q],nt=H[J];ft===void 0||nt===void 0||(Z[ft][nt]=1,K||(Z[nt][ft]=1))}),Z};z.getAdjMatrix=m;var S=function(h,K){var U=[];return h.forEach(function(Y){var Z=[];Y.forEach(function(H){Z.push(H*K)}),U.push(Z)}),U};z.scaleMatrix=S;var y=function(h,K){if(h&&h.children){for(var U=h.children.length-1;U>=0;U--)if(!y(h.children[U],K))return}return!!K(h)},g=function(h,K){typeof K=="function"&&y(h,K)};z.traverseTreeUp=g;var O=function(h){var K=1/0,U=1/0,Y=-1/0,Z=-1/0;return h.forEach(function(H){var q=H.size;(0,x.isArray)(q)?q.length===1&&(q=[q[0],q[0]]):(0,k.isNumber)(q)?q=[q,q]:(q===void 0||isNaN(q))&&(q=[30,30]);var Q=[q[0]/2,q[1]/2],J=H.x-Q[0],ft=H.x+Q[0],nt=H.y-Q[1],yt=H.y+Q[1];K>J&&(K=J),U>nt&&(U=nt),Y<ft&&(Y=ft),Z<yt&&(Z=yt)}),{minX:K,minY:U,maxX:Y,maxY:Z}};z.getLayoutBBox=O;var E=function(h){var K={x:0,y:0};h.forEach(function(Y){K.x+=Y.x||0,K.y+=Y.y||0});var U=h.length||1;return{x:K.x/U,y:K.y/U}};z.getAvgNodePosition=E;var D=function(h,K,U){var Y,Z;return h==="source"?((Y=U==null?void 0:U.find(function(H){return H.target===K.id}))===null||Y===void 0?void 0:Y.source)||{}:((Z=U==null?void 0:U.find(function(H){return H.source===K.id}))===null||Z===void 0?void 0:Z.target)||{}},F=function(h,K,U){var Y=[];switch(h){case"source":Y=U==null?void 0:U.filter(function(H){return H.source===K.id}).map(function(H){return H.target});break;case"target":Y=U==null?void 0:U.filter(function(H){return H.target===K.id}).map(function(H){return H.source});break;case"both":Y=U==null?void 0:U.filter(function(H){return H.source===K.id}).map(function(H){return H.target}).concat(U==null?void 0:U.filter(function(H){return H.target===K.id}).map(function(H){return H.source}));break;default:break}var Z=new Set(Y);return Array.from(Z)},W=function(h,K,U,Y,Z){var H=U[K]||"",q=(Y==null?void 0:Y.filter(function(Q){return Q[K]===H}))||[];return h==="leaf"&&(q=q.filter(function(Q){var J,ft;return((J=Z[Q.id])===null||J===void 0?void 0:J.in)===0||((ft=Z[Q.id])===null||ft===void 0?void 0:ft.out)===0})),q},b=function(h,K,U,Y,Z,H){var q=Z[K.id],Q=q.in,J=q.out,ft=K,nt=[];Q===0?(ft=D("source",K,U),nt=F("both",ft,U).map(function(gt){return H[gt]})):J===0&&(ft=D("target",K,U),nt=F("both",ft,U).map(function(gt){return H[gt]})),nt=nt.filter(function(gt){return Z[gt.id]&&(Z[gt.id].in===0||Z[gt.id].out===0)});var yt=W(h,Y,K,nt,Z);return{coreNode:ft,relativeLeafNodes:nt,sameTypeLeafNodes:yt}};z.getCoreNodeAndRelativeLeafNodes=b},330627:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.toNumber=z.isNaN=z.isNumber=void 0;var C=function(w){return typeof w=="number"};z.isNumber=C;var x=function(w){return Number.isNaN(Number(w))};z.isNaN=x;var k=function(w){var T=parseFloat(w);return(0,z.isNaN)(T)?w:T};z.toNumber=k},898130:function(He,z){"use strict";var C=this&&this.__assign||function(){return C=Object.assign||function(w){for(var T,L=1,P=arguments.length;L<P;L++){T=arguments[L];for(var p in T)Object.prototype.hasOwnProperty.call(T,p)&&(w[p]=T[p])}return w},C.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0}),z.clone=z.isObject=void 0;var x=function(w){return w!==null&&typeof w=="object"};z.isObject=x;var k=function(w){if(w===null)return w;if(w instanceof Date)return new Date(w.getTime());if(w instanceof Array){var T=[];return w.forEach(function(P){T.push(P)}),T.map(function(P){return(0,z.clone)(P)})}if(typeof w=="object"&&Object.keys(w).length){var L=C({},w);return Object.keys(L).forEach(function(P){L[P]=(0,z.clone)(L[P])}),L}return w};z.clone=k},708055:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.camelize=z.isString=void 0;var C=function(w){return typeof w=="string"};z.isString=C;var x=function(w){var T=Object.create(null);return function(L){var P=T[L];return P||(T[L]=w(L))}},k=/-(\w)/g;z.camelize=x(function(w){return w.replace(k,function(T,L){return L?L.toUpperCase():""})})},233446:function(He,z,C){"use strict";C.r(z),C.d(z,{Cache:function(){return ea},angleTo:function(){return q},arcToCubic:function(){return xe},assign:function(){return gr},augment:function(){return Jr},clamp:function(){return $a},clearAnimationFrame:function(){return Fe},clone:function(){return Ln},clonePath:function(){return J},contains:function(){return Ot},debounce:function(){return sn},deepMix:function(){return _a},difference:function(){return $},direction:function(){return H},distanceSquareRoot:function(){return ht},each:function(){return Ie},endsWith:function(){return io},equalizeSegments:function(){return jt},every:function(){return Gt},extend:function(){return Do},filter:function(){return dt},find:function(){return Nr},findIndex:function(){return Wt},firstValue:function(){return Ae},fixedBase:function(){return Ui},flatten:function(){return Be},flattenDeep:function(){return Mr},forIn:function(){return cs},get:function(){return kf},getDrawDirection:function(){return Br},getPathArea:function(){return Ir},getPathBBox:function(){return Qe},getPathBBoxTotalLength:function(){return Zr},getPointAtLength:function(){return en},getRange:function(){return qn},getRotatedCurve:function(){return Sn},getTotalLength:function(){return Pr},getType:function(){return ls},getWrapBehavior:function(){return Bn},gradient:function(){return y},group:function(){return cn},groupBy:function(){return Gr},groupToMap:function(){return Or},has:function(){return _s},hasKey:function(){return jo},hasValue:function(){return hr},head:function(){return no},identity:function(){return $c},includes:function(){return Ot},indexOf:function(){return vo},isArguments:function(){return Qs},isArray:function(){return Lt},isArrayLike:function(){return Et},isBoolean:function(){return Ws},isDate:function(){return Bs},isDecimal:function(){return Ga},isElement:function(){return me},isEmpty:function(){return No},isEqual:function(){return hi},isEqualWith:function(){return Bi},isError:function(){return es},isEven:function(){return xi},isFinite:function(){return Tu},isFunction:function(){return at},isInteger:function(){return ho},isMatch:function(){return Je},isNegative:function(){return Io},isNil:function(){return M},isNull:function(){return Uo},isNumber:function(){return La},isNumberEqual:function(){return is},isObject:function(){return Pt},isObjectLike:function(){return gn},isOdd:function(){return qa},isPlainObject:function(){return xr},isPointInPolygon:function(){return $u},isPointInStroke:function(){return _n},isPolygonsIntersect:function(){return Fs},isPositive:function(){return oo},isPrototype:function(){return d},isRegExp:function(){return wt},isString:function(){return ga},isType:function(){return mt},isUndefined:function(){return qt},keys:function(){return je},last:function(){return ao},lowerCase:function(){return kn},lowerFirst:function(){return wa},map:function(){return Xs},mapValues:function(){return Iu},max:function(){return fn},maxBy:function(){return Qa},memoize:function(){return ra},min:function(){return Xn},minBy:function(){return Li},mix:function(){return gr},mod:function(){return qi},noop:function(){return vc},normalizePath:function(){return te},number2color:function(){return vi},omit:function(){return Bf},parseRadius:function(){return oa},path2Absolute:function(){return oe},path2Curve:function(){return qe},path2String:function(){return nt},pick:function(){return dc},pull:function(){return Ea},pullAt:function(){return ei},reduce:function(){return Gi},remove:function(){return ro},requestAnimationFrame:function(){return Oe},reverseCurve:function(){return fr},rgb2arr:function(){return x},set:function(){return cc},size:function(){return vu},some:function(){return Ge},sortBy:function(){return Ao},startsWith:function(){return lo},substitute:function(){return Oo},throttle:function(){return Ff},toArray:function(){return hc},toCSSGradient:function(){return F},toDegree:function(){return xo},toInteger:function(){return gs},toRGB:function(){return p},toRadian:function(){return ss},toString:function(){return Er},transform:function(){return Z},union:function(){return co},uniq:function(){return ni},uniqueId:function(){return uf},upperCase:function(){return Rs},upperFirst:function(){return ji},values:function(){return ye},valuesOfKey:function(){return Po},vertical:function(){return Q},wrapBehavior:function(){return Zn}});function x(lt){return[parseInt(lt.substr(1,2),16),parseInt(lt.substr(3,2),16),parseInt(lt.substr(5,2),16)]}function k(lt){var It=Math.round(lt).toString(16);return It.length===1?"0"+It:It}function w(lt){return"#"+k(lt[0])+k(lt[1])+k(lt[2])}var T=/rgba?\(([\s.,0-9]+)\)/;function L(){var lt=document.createElement("i");return lt.title="Web Colour Picker",lt.style.display="none",document.body.appendChild(lt),lt}var P;function p(lt){if(lt[0]==="#"&&lt.length===7)return lt;P||(P=L()),P.style.color=lt;var It=document.defaultView.getComputedStyle(P,"").getPropertyValue("color"),Yt=T.exec(It),ce=Yt[1].split(/\s*,\s*/).map(function(Te){return Number(Te)});return It=w(ce),It}function m(lt,It,Yt,ce){return lt[ce]+(It[ce]-lt[ce])*Yt}function S(lt,It){var Yt=isNaN(Number(It))||It<0?0:It>1?1:Number(It),ce=lt.length-1,Te=Math.floor(ce*Yt),cr=ce*Yt-Te,mr=lt[Te],Hr=Te===ce?mr:lt[Te+1];return w([m(mr,Hr,cr,0),m(mr,Hr,cr,1),m(mr,Hr,cr,2)])}function y(lt){var It=typeof lt=="string"?lt.split("-"):lt,Yt=It.map(function(ce){return x(ce.indexOf("#")===-1?p(ce):ce)});return function(ce){return S(Yt,ce)}}var g=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,O=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,E=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function D(lt){return/^[r,R,L,l]{1}[\s]*\(/.test(lt)}function F(lt){if(D(lt)){var It,Yt=void 0;if(lt[0]==="l"){var ce=g.exec(lt),Te=+ce[1]+90;Yt=ce[2],It="linear-gradient("+Te+"deg, "}else if(lt[0]==="r"){It="radial-gradient(";var ce=O.exec(lt);Yt=ce[4]}var cr=Yt.match(E);return cr.forEach(function(mr,Hr){var wn=mr.split(":");It+=wn[1]+" "+Number(wn[0])*100+"%",Hr!==cr.length-1&&(It+=", ")}),It+=")",It}return lt}var W=C(935600),b=C(631437);function h(lt,It,Yt){var ce=[0,0,0,0,0,0,0,0,0];return W.fromTranslation(ce,Yt),W.multiply(lt,ce,It)}function K(lt,It,Yt){var ce=[0,0,0,0,0,0,0,0,0];return W.fromRotation(ce,Yt),W.multiply(lt,ce,It)}function U(lt,It,Yt){var ce=[0,0,0,0,0,0,0,0,0];return W.fromScaling(ce,Yt),W.multiply(lt,ce,It)}function Y(lt,It,Yt){return W.multiply(lt,Yt,It)}function Z(lt,It){for(var Yt=lt?[].concat(lt):[1,0,0,0,1,0,0,0,1],ce=0,Te=It.length;ce<Te;ce++){var cr=It[ce];switch(cr[0]){case"t":h(Yt,Yt,[cr[1],cr[2]]);break;case"s":U(Yt,Yt,[cr[1],cr[2]]);break;case"r":K(Yt,Yt,cr[1]);break;case"m":Y(Yt,Yt,cr[1]);break;default:break}}return Yt}function H(lt,It){return lt[0]*It[1]-It[0]*lt[1]}function q(lt,It,Yt){var ce=b.angle(lt,It),Te=H(lt,It)>=0;return Yt?Te?Math.PI*2-ce:ce:Te?ce:Math.PI*2-ce}function Q(lt,It,Yt){return Yt?(lt[0]=It[1],lt[1]=-1*It[0]):(lt[0]=-1*It[1],lt[1]=It[0]),lt}function J(lt){return lt.map(function(It){return Array.isArray(It)?[].concat(It):It})}function ft(lt,It){if(It==="off")return J(lt);var Yt=typeof It=="number"&&It>=1?Math.pow(10,It):1;return lt.map(function(ce){var Te=ce.slice(1).map(Number).map(function(cr){return It?Math.round(cr*Yt)/Yt:Math.round(cr)});return[ce[0]].concat(Te)})}function nt(lt,It){return It===void 0&&(It="off"),ft(lt,It).map(function(Yt){return Yt[0]+Yt.slice(1).join(" ")}).join("")}var yt=C(197582),gt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function zt(lt,It,Yt){if(lt[Yt].length>7){lt[Yt].shift();for(var ce=lt[Yt],Te=Yt;ce.length;)It[Yt]="A",lt.splice(Te+=1,0,["C"].concat(ce.splice(0,6)));lt.splice(Yt,1)}}var Mt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function Ct(lt){return Array.isArray(lt)&&lt.every(function(It){var Yt=It[0].toLowerCase();return Mt[Yt]===It.length-1&&"achlmqstvz".includes(Yt)})}function rt(lt){return Ct(lt)&&lt.every(function(It){var Yt=It[0];return Yt===Yt.toUpperCase()})}function ot(lt){return rt(lt)&&lt.every(function(It){var Yt=It[0];return"ACLMQZ".includes(Yt)})}function Tt(lt){for(var It=lt.pathValue[lt.segmentStart],Yt=It.toLowerCase(),ce=lt.data;ce.length>=Mt[Yt]&&(Yt==="m"&&ce.length>2?(lt.segments.push([It].concat(ce.splice(0,2))),Yt="l",It=It==="m"?"l":"L"):lt.segments.push([It].concat(ce.splice(0,Mt[Yt]))),!!Mt[Yt]););}function Rt(lt){var It=lt.index,Yt=lt.pathValue,ce=Yt.charCodeAt(It);if(ce===48){lt.param=0,lt.index+=1;return}if(ce===49){lt.param=1,lt.index+=1;return}lt.err='[path-util]: invalid Arc flag "'+Yt[It]+'", expecting 0 or 1 at index '+It}function st(lt){return lt>=48&&lt<=57||lt===43||lt===45||lt===46}function bt(lt){return lt>=48&&lt<=57}function Ft(lt){var It=lt.max,Yt=lt.pathValue,ce=lt.index,Te=ce,cr=!1,mr=!1,Hr=!1,wn=!1,Cn;if(Te>=It){lt.err="[path-util]: Invalid path value at index "+Te+', "pathValue" is missing param';return}if(Cn=Yt.charCodeAt(Te),(Cn===43||Cn===45)&&(Te+=1,Cn=Yt.charCodeAt(Te)),!bt(Cn)&&Cn!==46){lt.err="[path-util]: Invalid path value at index "+Te+', "'+Yt[Te]+'" is not a number';return}if(Cn!==46){if(cr=Cn===48,Te+=1,Cn=Yt.charCodeAt(Te),cr&&Te<It&&Cn&&bt(Cn)){lt.err="[path-util]: Invalid path value at index "+ce+', "'+Yt[ce]+'" illegal number';return}for(;Te<It&&bt(Yt.charCodeAt(Te));)Te+=1,mr=!0;Cn=Yt.charCodeAt(Te)}if(Cn===46){for(wn=!0,Te+=1;bt(Yt.charCodeAt(Te));)Te+=1,Hr=!0;Cn=Yt.charCodeAt(Te)}if(Cn===101||Cn===69){if(wn&&!mr&&!Hr){lt.err="[path-util]: Invalid path value at index "+Te+', "'+Yt[Te]+'" invalid float exponent';return}if(Te+=1,Cn=Yt.charCodeAt(Te),(Cn===43||Cn===45)&&(Te+=1),Te<It&&bt(Yt.charCodeAt(Te)))for(;Te<It&&bt(Yt.charCodeAt(Te));)Te+=1;else{lt.err="[path-util]: Invalid path value at index "+Te+', "'+Yt[Te]+'" invalid integer exponent';return}}lt.index=Te,lt.param=+lt.pathValue.slice(ce,Te)}function Ht(lt){var It=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return lt===10||lt===13||lt===8232||lt===8233||lt===32||lt===9||lt===11||lt===12||lt===160||lt>=5760&&It.includes(lt)}function _t(lt){for(var It=lt.pathValue,Yt=lt.max;lt.index<Yt&&Ht(It.charCodeAt(lt.index));)lt.index+=1}function Xt(lt){switch(lt|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function ee(lt){return(lt|32)===97}function se(lt){var It=lt.max,Yt=lt.pathValue,ce=lt.index,Te=Yt.charCodeAt(ce),cr=Mt[Yt[ce].toLowerCase()];if(lt.segmentStart=ce,!Xt(Te)){lt.err='[path-util]: Invalid path value "'+Yt[ce]+'" is not a path command';return}if(lt.index+=1,_t(lt),lt.data=[],!cr){Tt(lt);return}for(;;){for(var mr=cr;mr>0;mr-=1){if(ee(Te)&&(mr===3||mr===4)?Rt(lt):Ft(lt),lt.err.length)return;lt.data.push(lt.param),_t(lt),lt.index<It&&Yt.charCodeAt(lt.index)===44&&(lt.index+=1,_t(lt))}if(lt.index>=lt.max||!st(Yt.charCodeAt(lt.index)))break}Tt(lt)}var ue=function(){function lt(It){this.pathValue=It,this.segments=[],this.max=It.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return lt}();function Ut(lt){if(Ct(lt))return J(lt);var It=new ue(lt);for(_t(It);It.index<It.max&&!It.err.length;)se(It);return It.err?It.err:It.segments}function oe(lt){if(rt(lt))return J(lt);var It=Ut(lt),Yt=0,ce=0,Te=0,cr=0;return It.map(function(mr){var Hr=mr.slice(1).map(Number),wn=mr[0],Cn=wn.toUpperCase();if(wn==="M")return Yt=Hr[0],ce=Hr[1],Te=Yt,cr=ce,["M",Yt,ce];var Hn;if(wn!==Cn)switch(Cn){case"A":Hn=[Cn,Hr[0],Hr[1],Hr[2],Hr[3],Hr[4],Hr[5]+Yt,Hr[6]+ce];break;case"V":Hn=[Cn,Hr[0]+ce];break;case"H":Hn=[Cn,Hr[0]+Yt];break;default:{var aa=Hr.map(function(Oa,Ja){return Oa+(Ja%2?ce:Yt)});Hn=[Cn].concat(aa)}}else Hn=[Cn].concat(Hr);var Kn=Hn.length;switch(Cn){case"Z":Yt=Te,ce=cr;break;case"H":Yt=Hn[1];break;case"V":ce=Hn[1];break;default:Yt=Hn[Kn-2],ce=Hn[Kn-1],Cn==="M"&&(Te=Yt,cr=ce)}return Hn})}function Pe(lt,It){var Yt=lt[0],ce=It.x1,Te=It.y1,cr=It.x2,mr=It.y2,Hr=lt.slice(1).map(Number),wn=lt;if("TQ".includes(Yt)||(It.qx=null,It.qy=null),Yt==="H")wn=["L",lt[1],Te];else if(Yt==="V")wn=["L",ce,lt[1]];else if(Yt==="S"){var Cn=ce*2-cr,Hn=Te*2-mr;It.x1=Cn,It.y1=Hn,wn=["C",Cn,Hn].concat(Hr)}else if(Yt==="T"){var aa=ce*2-It.qx,Kn=Te*2-It.qy;It.qx=aa,It.qy=Kn,wn=["Q",aa,Kn].concat(Hr)}else if(Yt==="Q"){var Oa=Hr[0],Ja=Hr[1];It.qx=Oa,It.qy=Ja}return wn}function te(lt){if(ot(lt))return J(lt);for(var It=oe(lt),Yt=(0,yt.__assign)({},gt),ce=0;ce<It.length;ce+=1){It[ce]=Pe(It[ce],Yt);var Te=It[ce],cr=Te.length;Yt.x1=+Te[cr-2],Yt.y1=+Te[cr-1],Yt.x2=+Te[cr-4]||Yt.x1,Yt.y2=+Te[cr-3]||Yt.y1}return It}function ve(lt){return ot(lt)&&lt.every(function(It){var Yt=It[0];return"MC".includes(Yt)})}function Ue(lt,It,Yt){var ce=lt*Math.cos(Yt)-It*Math.sin(Yt),Te=lt*Math.sin(Yt)+It*Math.cos(Yt);return{x:ce,y:Te}}function xe(lt,It,Yt,ce,Te,cr,mr,Hr,wn,Cn){var Hn=lt,aa=It,Kn=Yt,Oa=ce,Ja=Hr,Na=wn,Ta=Math.PI*120/180,Ba=Math.PI/180*(+Te||0),ha=[],Ya,Ua,ma,ri,Ei;if(Cn)Ua=Cn[0],ma=Cn[1],ri=Cn[2],Ei=Cn[3];else{Ya=Ue(Hn,aa,-Ba),Hn=Ya.x,aa=Ya.y,Ya=Ue(Ja,Na,-Ba),Ja=Ya.x,Na=Ya.y;var Vi=(Hn-Ja)/2,gi=(aa-Na)/2,ui=Vi*Vi/(Kn*Kn)+gi*gi/(Oa*Oa);ui>1&&(ui=Math.sqrt(ui),Kn*=ui,Oa*=ui);var Hi=Kn*Kn,ko=Oa*Oa,po=(cr===mr?-1:1)*Math.sqrt(Math.abs((Hi*ko-Hi*gi*gi-ko*Vi*Vi)/(Hi*gi*gi+ko*Vi*Vi)));ri=po*Kn*gi/Oa+(Hn+Ja)/2,Ei=po*-Oa*Vi/Kn+(aa+Na)/2,Ua=Math.asin(((aa-Ei)/Oa*Math.pow(10,9)>>0)/Math.pow(10,9)),ma=Math.asin(((Na-Ei)/Oa*Math.pow(10,9)>>0)/Math.pow(10,9)),Ua=Hn<ri?Math.PI-Ua:Ua,ma=Ja<ri?Math.PI-ma:ma,Ua<0&&(Ua=Math.PI*2+Ua),ma<0&&(ma=Math.PI*2+ma),mr&&Ua>ma&&(Ua-=Math.PI*2),!mr&&ma>Ua&&(ma-=Math.PI*2)}var Ls=ma-Ua;if(Math.abs(Ls)>Ta){var Lu=ma,ys=Ja,pu=Na;ma=Ua+Ta*(mr&&ma>Ua?1:-1),Ja=ri+Kn*Math.cos(ma),Na=Ei+Oa*Math.sin(ma),ha=xe(Ja,Na,Kn,Oa,Te,0,mr,ys,pu,[ma,Lu,ri,Ei])}Ls=ma-Ua;var tu=Math.cos(Ua),js=Math.sin(Ua),lf=Math.cos(ma),qc=Math.sin(ma),gu=Math.tan(Ls/4),qu=4/3*Kn*gu,yc=4/3*Oa*gu,Pu=[Hn,aa],Nu=[Hn+qu*js,aa-yc*tu],xc=[Ja+qu*qc,Na-yc*lf],Qu=[Ja,Na];if(Nu[0]=2*Pu[0]-Nu[0],Nu[1]=2*Pu[1]-Nu[1],Cn)return Nu.concat(xc,Qu,ha);ha=Nu.concat(xc,Qu,ha);for(var df=[],Vs=0,Ru=ha.length;Vs<Ru;Vs+=1)df[Vs]=Vs%2?Ue(ha[Vs-1],ha[Vs],Ba).y:Ue(ha[Vs],ha[Vs+1],Ba).x;return df}function Re(lt,It,Yt,ce,Te,cr){var mr=.3333333333333333,Hr=2/3;return[mr*lt+Hr*Yt,mr*It+Hr*ce,mr*Te+Hr*Yt,mr*cr+Hr*ce,Te,cr]}function de(lt,It,Yt){var ce=lt[0],Te=lt[1],cr=It[0],mr=It[1];return[ce+(cr-ce)*Yt,Te+(mr-Te)*Yt]}function ht(lt,It){return Math.sqrt((lt[0]-It[0])*(lt[0]-It[0])+(lt[1]-It[1])*(lt[1]-It[1]))}function ae(lt,It,Yt,ce,Te){var cr=ht([lt,It],[Yt,ce]),mr={x:0,y:0};if(typeof Te=="number")if(Te<=0)mr={x:lt,y:It};else if(Te>=cr)mr={x:Yt,y:ce};else{var Hr=de([lt,It],[Yt,ce],Te/cr),wn=Hr[0],Cn=Hr[1];mr={x:wn,y:Cn}}return{length:cr,point:mr,min:{x:Math.min(lt,Yt),y:Math.min(It,ce)},max:{x:Math.max(lt,Yt),y:Math.max(It,ce)}}}function Le(lt,It,Yt,ce){var Te=.5,cr=[lt,It],mr=[Yt,ce],Hr=de(cr,mr,Te),wn=de(mr,Hr,Te),Cn=de(Hr,wn,Te),Hn=de(wn,Cn,Te),aa=de(Cn,Hn,Te),Kn=ae(cr[0],cr[1],Hr[0],Hr[1],Cn[0]).point,Oa=ae(aa[0],aa[1],Hn[0],Hn[1],wn[0]).point;return[Kn.x,Kn.y,Oa.x,Oa.y,Yt,ce]}function Ze(lt,It){var Yt=lt[0],ce=lt.slice(1).map(Number),Te=ce[0],cr=ce[1],mr,Hr=It.x1,wn=It.y1,Cn=It.x,Hn=It.y;switch("TQ".includes(Yt)||(It.qx=null,It.qy=null),Yt){case"M":return It.x=Te,It.y=cr,lt;case"A":return mr=[Hr,wn].concat(ce),["C"].concat(xe(mr[0],mr[1],mr[2],mr[3],mr[4],mr[5],mr[6],mr[7],mr[8],mr[9]));case"Q":return It.qx=Te,It.qy=cr,mr=[Hr,wn].concat(ce),["C"].concat(Re(mr[0],mr[1],mr[2],mr[3],mr[4],mr[5]));case"L":return["C"].concat(Le(Hr,wn,Te,cr));case"Z":return Hr===Cn&&wn===Hn?["C",Hr,wn,Cn,Hn,Cn,Hn]:["C"].concat(Le(Hr,wn,Cn,Hn));default:}return lt}function qe(lt,It){if(It===void 0&&(It=!1),ve(lt)){var Yt=J(lt);return It?[Yt,[]]:Yt}for(var ce=te(lt),Te=(0,yt.__assign)({},gt),cr=[],mr="",Hr=ce.length,wn,Cn,Hn=[],aa=0;aa<Hr;aa+=1){ce[aa]&&(mr=ce[aa][0]),cr[aa]=mr;var Kn=Ze(ce[aa],Te);ce[aa]=Kn,zt(ce,cr,aa),Hr=ce.length,mr==="Z"&&Hn.push(aa),wn=ce[aa],Cn=wn.length,Te.x1=+wn[Cn-2],Te.y1=+wn[Cn-1],Te.x2=+wn[Cn-4]||Te.x1,Te.y2=+wn[Cn-3]||Te.y1}return It?[ce,Hn]:ce}function fr(lt){var It=lt.slice(1).map(function(Yt,ce,Te){return ce?Te[ce-1].slice(-2).concat(Yt.slice(1)):lt[0].slice(1).concat(Yt.slice(1))}).map(function(Yt){return Yt.map(function(ce,Te){return Yt[Yt.length-Te-2*(1-Te%2)]})}).reverse();return[["M"].concat(It[0].slice(0,2))].concat(It.map(function(Yt){return["C"].concat(Yt.slice(2))}))}function ur(lt,It){var Yt=lt.x,ce=lt.y,Te=It.x,cr=It.y,mr=Yt*Te+ce*cr,Hr=Math.sqrt((Math.pow(Yt,2)+Math.pow(ce,2))*(Math.pow(Te,2)+Math.pow(cr,2))),wn=Yt*cr-ce*Te<0?-1:1,Cn=wn*Math.acos(mr/Hr);return Cn}function kr(lt,It,Yt,ce,Te,cr,mr,Hr,wn,Cn){var Hn=Math.abs,aa=Math.sin,Kn=Math.cos,Oa=Math.sqrt,Ja=Math.PI,Na=Hn(Yt),Ta=Hn(ce),Ba=(Te%360+360)%360,ha=Ba*(Ja/180);if(lt===Hr&&It===wn)return{x:lt,y:It};if(Na===0||Ta===0)return ae(lt,It,Hr,wn,Cn).point;var Ya=(lt-Hr)/2,Ua=(It-wn)/2,ma={x:Kn(ha)*Ya+aa(ha)*Ua,y:-aa(ha)*Ya+Kn(ha)*Ua},ri=Math.pow(ma.x,2)/Math.pow(Na,2)+Math.pow(ma.y,2)/Math.pow(Ta,2);ri>1&&(Na*=Oa(ri),Ta*=Oa(ri));var Ei=Math.pow(Na,2)*Math.pow(Ta,2)-Math.pow(Na,2)*Math.pow(ma.y,2)-Math.pow(Ta,2)*Math.pow(ma.x,2),Vi=Math.pow(Na,2)*Math.pow(ma.y,2)+Math.pow(Ta,2)*Math.pow(ma.x,2),gi=Ei/Vi;gi=gi<0?0:gi;var ui=(cr!==mr?1:-1)*Oa(gi),Hi={x:ui*(Na*ma.y/Ta),y:ui*(-(Ta*ma.x)/Na)},ko={x:Kn(ha)*Hi.x-aa(ha)*Hi.y+(lt+Hr)/2,y:aa(ha)*Hi.x+Kn(ha)*Hi.y+(It+wn)/2},po={x:(ma.x-Hi.x)/Na,y:(ma.y-Hi.y)/Ta},Ls=ur({x:1,y:0},po),Lu={x:(-ma.x-Hi.x)/Na,y:(-ma.y-Hi.y)/Ta},ys=ur(po,Lu);!mr&&ys>0?ys-=2*Ja:mr&&ys<0&&(ys+=2*Ja),ys%=2*Ja;var pu=Ls+ys*Cn,tu=Na*Kn(pu),js=Ta*aa(pu),lf={x:Kn(ha)*tu-aa(ha)*js+ko.x,y:aa(ha)*tu+Kn(ha)*js+ko.y};return lf}function yn(lt,It,Yt,ce,Te,cr,mr,Hr,wn,Cn,Hn){var aa,Kn=Hn.bbox,Oa=Kn===void 0?!0:Kn,Ja=Hn.length,Na=Ja===void 0?!0:Ja,Ta=Hn.sampleSize,Ba=Ta===void 0?30:Ta,ha=typeof Cn=="number",Ya=lt,Ua=It,ma=0,ri=[Ya,Ua,ma],Ei=[Ya,Ua],Vi=0,gi={x:0,y:0},ui=[{x:Ya,y:Ua}];ha&&Cn<=0&&(gi={x:Ya,y:Ua});for(var Hi=0;Hi<=Ba;Hi+=1){if(Vi=Hi/Ba,aa=kr(lt,It,Yt,ce,Te,cr,mr,Hr,wn,Vi),Ya=aa.x,Ua=aa.y,Oa&&ui.push({x:Ya,y:Ua}),Na&&(ma+=ht(Ei,[Ya,Ua])),Ei=[Ya,Ua],ha&&ma>=Cn&&Cn>ri[2]){var ko=(ma-Cn)/(ma-ri[2]);gi={x:Ei[0]*(1-ko)+ri[0]*ko,y:Ei[1]*(1-ko)+ri[1]*ko}}ri=[Ya,Ua,ma]}return ha&&Cn>=ma&&(gi={x:Hr,y:wn}),{length:ma,point:gi,min:{x:Math.min.apply(null,ui.map(function(po){return po.x})),y:Math.min.apply(null,ui.map(function(po){return po.y}))},max:{x:Math.max.apply(null,ui.map(function(po){return po.x})),y:Math.max.apply(null,ui.map(function(po){return po.y}))}}}function un(lt,It,Yt,ce,Te,cr,mr,Hr,wn){var Cn=1-wn;return{x:Math.pow(Cn,3)*lt+3*Math.pow(Cn,2)*wn*Yt+3*Cn*Math.pow(wn,2)*Te+Math.pow(wn,3)*mr,y:Math.pow(Cn,3)*It+3*Math.pow(Cn,2)*wn*ce+3*Cn*Math.pow(wn,2)*cr+Math.pow(wn,3)*Hr}}function Vr(lt,It,Yt,ce,Te,cr,mr,Hr,wn,Cn){var Hn,aa=Cn.bbox,Kn=aa===void 0?!0:aa,Oa=Cn.length,Ja=Oa===void 0?!0:Oa,Na=Cn.sampleSize,Ta=Na===void 0?10:Na,Ba=typeof wn=="number",ha=lt,Ya=It,Ua=0,ma=[ha,Ya,Ua],ri=[ha,Ya],Ei=0,Vi={x:0,y:0},gi=[{x:ha,y:Ya}];Ba&&wn<=0&&(Vi={x:ha,y:Ya});for(var ui=0;ui<=Ta;ui+=1){if(Ei=ui/Ta,Hn=un(lt,It,Yt,ce,Te,cr,mr,Hr,Ei),ha=Hn.x,Ya=Hn.y,Kn&&gi.push({x:ha,y:Ya}),Ja&&(Ua+=ht(ri,[ha,Ya])),ri=[ha,Ya],Ba&&Ua>=wn&&wn>ma[2]){var Hi=(Ua-wn)/(Ua-ma[2]);Vi={x:ri[0]*(1-Hi)+ma[0]*Hi,y:ri[1]*(1-Hi)+ma[1]*Hi}}ma=[ha,Ya,Ua]}return Ba&&wn>=Ua&&(Vi={x:mr,y:Hr}),{length:Ua,point:Vi,min:{x:Math.min.apply(null,gi.map(function(ko){return ko.x})),y:Math.min.apply(null,gi.map(function(ko){return ko.y}))},max:{x:Math.max.apply(null,gi.map(function(ko){return ko.x})),y:Math.max.apply(null,gi.map(function(ko){return ko.y}))}}}function $e(lt,It,Yt,ce,Te,cr,mr){var Hr=1-mr;return{x:Math.pow(Hr,2)*lt+2*Hr*mr*Yt+Math.pow(mr,2)*Te,y:Math.pow(Hr,2)*It+2*Hr*mr*ce+Math.pow(mr,2)*cr}}function dr(lt,It,Yt,ce,Te,cr,mr,Hr){var wn,Cn=Hr.bbox,Hn=Cn===void 0?!0:Cn,aa=Hr.length,Kn=aa===void 0?!0:aa,Oa=Hr.sampleSize,Ja=Oa===void 0?10:Oa,Na=typeof mr=="number",Ta=lt,Ba=It,ha=0,Ya=[Ta,Ba,ha],Ua=[Ta,Ba],ma=0,ri={x:0,y:0},Ei=[{x:Ta,y:Ba}];Na&&mr<=0&&(ri={x:Ta,y:Ba});for(var Vi=0;Vi<=Ja;Vi+=1){if(ma=Vi/Ja,wn=$e(lt,It,Yt,ce,Te,cr,ma),Ta=wn.x,Ba=wn.y,Hn&&Ei.push({x:Ta,y:Ba}),Kn&&(ha+=ht(Ua,[Ta,Ba])),Ua=[Ta,Ba],Na&&ha>=mr&&mr>Ya[2]){var gi=(ha-mr)/(ha-Ya[2]);ri={x:Ua[0]*(1-gi)+Ya[0]*gi,y:Ua[1]*(1-gi)+Ya[1]*gi}}Ya=[Ta,Ba,ha]}return Na&&mr>=ha&&(ri={x:Te,y:cr}),{length:ha,point:ri,min:{x:Math.min.apply(null,Ei.map(function(ui){return ui.x})),y:Math.min.apply(null,Ei.map(function(ui){return ui.y}))},max:{x:Math.max.apply(null,Ei.map(function(ui){return ui.x})),y:Math.max.apply(null,Ei.map(function(ui){return ui.y}))}}}function ar(lt,It,Yt){for(var ce,Te,cr,mr,Hr,wn,Cn=te(lt),Hn=typeof It=="number",aa,Kn=[],Oa,Ja=0,Na=0,Ta=0,Ba=0,ha,Ya=[],Ua=[],ma=0,ri={x:0,y:0},Ei=ri,Vi=ri,gi=ri,ui=0,Hi=0,ko=Cn.length;Hi<ko;Hi+=1)ha=Cn[Hi],Oa=ha[0],aa=Oa==="M",Kn=aa?Kn:[Ja,Na].concat(ha.slice(1)),aa?(Ta=ha[1],Ba=ha[2],ri={x:Ta,y:Ba},Ei=ri,ma=0,Hn&&It<.001&&(gi=ri)):Oa==="L"?(ce=ae(Kn[0],Kn[1],Kn[2],Kn[3],(It||0)-ui),ma=ce.length,ri=ce.min,Ei=ce.max,Vi=ce.point):Oa==="A"?(Te=yn(Kn[0],Kn[1],Kn[2],Kn[3],Kn[4],Kn[5],Kn[6],Kn[7],Kn[8],(It||0)-ui,Yt||{}),ma=Te.length,ri=Te.min,Ei=Te.max,Vi=Te.point):Oa==="C"?(cr=Vr(Kn[0],Kn[1],Kn[2],Kn[3],Kn[4],Kn[5],Kn[6],Kn[7],(It||0)-ui,Yt||{}),ma=cr.length,ri=cr.min,Ei=cr.max,Vi=cr.point):Oa==="Q"?(mr=dr(Kn[0],Kn[1],Kn[2],Kn[3],Kn[4],Kn[5],(It||0)-ui,Yt||{}),ma=mr.length,ri=mr.min,Ei=mr.max,Vi=mr.point):Oa==="Z"&&(Kn=[Ja,Na,Ta,Ba],Hr=ae(Kn[0],Kn[1],Kn[2],Kn[3],(It||0)-ui),ma=Hr.length,ri=Hr.min,Ei=Hr.max,Vi=Hr.point),Hn&&ui<It&&ui+ma>=It&&(gi=Vi),Ua.push(Ei),Ya.push(ri),ui+=ma,wn=Oa!=="Z"?ha.slice(-2):[Ta,Ba],Ja=wn[0],Na=wn[1];return Hn&&It>=ui&&(gi={x:Ja,y:Na}),{length:ui,point:gi,min:{x:Math.min.apply(null,Ya.map(function(po){return po.x})),y:Math.min.apply(null,Ya.map(function(po){return po.y}))},max:{x:Math.max.apply(null,Ua.map(function(po){return po.x})),y:Math.max.apply(null,Ua.map(function(po){return po.y}))}}}function Qe(lt,It){if(!lt)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Yt=ar(lt,void 0,(0,yt.__assign)((0,yt.__assign)({},It),{length:!1})),ce=Yt.min,Te=ce.x,cr=ce.y,mr=Yt.max,Hr=mr.x,wn=mr.y,Cn=Hr-Te,Hn=wn-cr;return{width:Cn,height:Hn,x:Te,y:cr,x2:Hr,y2:wn,cx:Te+Cn/2,cy:cr+Hn/2,cz:Math.max(Cn,Hn)+Math.min(Cn,Hn)/2}}function Pr(lt,It){return ar(lt,void 0,(0,yt.__assign)((0,yt.__assign)({},It),{bbox:!1,length:!0})).length}function Zr(lt,It){if(!lt)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Yt=ar(lt,void 0,(0,yt.__assign)((0,yt.__assign)({},It),{bbox:!0,length:!0})),ce=Yt.length,Te=Yt.min,cr=Te.x,mr=Te.y,Hr=Yt.max,wn=Hr.x,Cn=Hr.y,Hn=wn-cr,aa=Cn-mr;return{length:ce,width:Hn,height:aa,x:cr,y:mr,x2:wn,y2:Cn,cx:cr+Hn/2,cy:mr+aa/2,cz:Math.max(Hn,aa)+Math.min(Hn,aa)/2}}function qr(lt){var It=lt.length,Yt=It-1;return lt.map(function(ce,Te){return lt.map(function(cr,mr){var Hr=Te+mr,wn;return mr===0||lt[Hr]&&lt[Hr][0]==="M"?(wn=lt[Hr],["M"].concat(wn.slice(-2))):(Hr>=It&&(Hr-=Yt),lt[Hr])})})}function Sn(lt,It){var Yt=lt.length-1,ce=[],Te=0,cr=0,mr=qr(lt);return mr.forEach(function(Hr,wn){lt.slice(1).forEach(function(Cn,Hn){cr+=ht(lt[(wn+Hn)%Yt].slice(-2),It[Hn%Yt].slice(-2))}),ce[wn]=cr,cr=0}),Te=ce.indexOf(Math.min.apply(null,ce)),mr[Te]}function Yn(lt,It,Yt,ce,Te,cr,mr,Hr){return 3*((Hr-It)*(Yt+Te)-(mr-lt)*(ce+cr)+ce*(lt-Te)-Yt*(It-cr)+Hr*(Te+lt/3)-mr*(cr+It/3))/20}function Ir(lt){var It=0,Yt=0,ce=0;return qe(lt).map(function(Te){var cr;switch(Te[0]){case"M":return It=Te[1],Yt=Te[2],0;default:var mr=Te.slice(1),Hr=mr[0],wn=mr[1],Cn=mr[2],Hn=mr[3],aa=mr[4],Kn=mr[5];return ce=Yn(It,Yt,Hr,wn,Cn,Hn,aa,Kn),cr=Te.slice(-2),It=cr[0],Yt=cr[1],ce}}).reduce(function(Te,cr){return Te+cr},0)}function Br(lt){return Ir(lt)>=0}function en(lt,It,Yt){return ar(lt,It,(0,yt.__assign)((0,yt.__assign)({},Yt),{bbox:!1,length:!0})).point}function hn(lt,It){var Yt=Ut(lt);if(typeof Yt=="string")throw TypeError(Yt);var ce=Yt.slice(),Te=Pr(ce),cr=ce.length-1,mr=0,Hr=0,wn=Yt[0],Cn=wn.slice(-2),Hn=Cn[0],aa=Cn[1],Kn={x:Hn,y:aa};if(cr<=0||!It||!Number.isFinite(It))return{segment:wn,index:0,length:Hr,point:Kn,lengthAtSegment:mr};if(It>=Te)return ce=Yt.slice(0,-1),mr=Pr(ce),Hr=Te-mr,{segment:Yt[cr],index:cr,length:Hr,lengthAtSegment:mr};for(var Oa=[];cr>0;)wn=ce[cr],ce=ce.slice(0,-1),mr=Pr(ce),Hr=Te-mr,Te=mr,Oa.push({segment:wn,index:cr,length:Hr,lengthAtSegment:mr}),cr-=1;return Oa.find(function(Ja){var Na=Ja.lengthAtSegment;return Na<=It})}function xn(lt,It){for(var Yt=Ut(lt),ce=te(Yt),Te=Pr(Yt),cr=function(ma){var ri=ma.x-It.x,Ei=ma.y-It.y;return ri*ri+Ei*Ei},mr=8,Hr,wn=0,Cn,Hn=0,aa=1/0,Kn=0;Kn<=Te;Kn+=mr)Hr=en(ce,Kn),wn=cr(Hr),wn<aa&&(Cn=Hr,Hn=Kn,aa=wn);mr/=2;for(var Oa,Ja,Na=0,Ta=0,Ba=0,ha=0;mr>.5;)Na=Hn-mr,Oa=en(ce,Na),Ba=cr(Oa),Ta=Hn+mr,Ja=en(ce,Ta),ha=cr(Ja),Na>=0&&Ba<aa?(Cn=Oa,Hn=Na,aa=Ba):Ta<=Te&&ha<aa?(Cn=Ja,Hn=Ta,aa=ha):mr/=2;var Ya=hn(Yt,Hn),Ua=Math.sqrt(aa);return{closest:Cn,distance:Ua,segment:Ya}}function _n(lt,It){var Yt=xn(lt,It).distance;return Math.abs(Yt)<.001}function tt(lt,It){It===void 0&&(It=.5);var Yt=lt.slice(0,2),ce=lt.slice(2,4),Te=lt.slice(4,6),cr=lt.slice(6,8),mr=de(Yt,ce,It),Hr=de(ce,Te,It),wn=de(Te,cr,It),Cn=de(mr,Hr,It),Hn=de(Hr,wn,It),aa=de(Cn,Hn,It);return[["C"].concat(mr,Cn,aa),["C"].concat(Hn,wn,cr)]}function ir(lt){return lt.map(function(It,Yt,ce){var Te=Yt&&ce[Yt-1].slice(-2).concat(It.slice(1)),cr=Yt?Vr(Te[0],Te[1],Te[2],Te[3],Te[4],Te[5],Te[6],Te[7],Te[8],{bbox:!1}).length:0,mr;return Yt?mr=cr?tt(Te):[It,It]:mr=[It],{s:It,ss:mr,l:cr}})}function jt(lt,It,Yt){var ce=ir(lt),Te=ir(It),cr=ce.length,mr=Te.length,Hr=ce.filter(function(Ta){return Ta.l}).length,wn=Te.filter(function(Ta){return Ta.l}).length,Cn=ce.filter(function(Ta){return Ta.l}).reduce(function(Ta,Ba){var ha=Ba.l;return Ta+ha},0)/Hr||0,Hn=Te.filter(function(Ta){return Ta.l}).reduce(function(Ta,Ba){var ha=Ba.l;return Ta+ha},0)/wn||0,aa=Yt||Math.max(cr,mr),Kn=[Cn,Hn],Oa=[aa-cr,aa-mr],Ja=0,Na=[ce,Te].map(function(Ta,Ba){return Ta.l===aa?Ta.map(function(ha){return ha.s}):Ta.map(function(ha,Ya){return Ja=Ya&&Oa[Ba]&&ha.l>=Kn[Ba],Oa[Ba]-=Ja?1:0,Ja?ha.ss:[ha.s]}).flat()});return Na[0].length===Na[1].length?Na:jt(Na[0],Na[1],aa)}var Qt=function(lt){return lt!==null&&typeof lt!="function"&&isFinite(lt.length)},Et=Qt,we=function(lt,It){return Et(lt)?lt.indexOf(It)>-1:!1},Ot=we,Kt=function(lt,It){if(!Et(lt))return lt;for(var Yt=[],ce=0;ce<lt.length;ce++){var Te=lt[ce];It(Te,ce)&&Yt.push(Te)}return Yt},dt=Kt,Bt=function(lt,It){return It===void 0&&(It=[]),dt(lt,function(Yt){return!Ot(It,Yt)})},$=Bt,at=function(lt){return typeof lt=="function"},R=function(lt){return lt==null},M=R,A={}.toString,X=function(lt,It){return A.call(lt)==="[object "+It+"]"},mt=X,Lt=function(lt){return Array.isArray?Array.isArray(lt):mt(lt,"Array")},Pt=function(lt){var It=typeof lt;return lt!==null&&It==="object"||It==="function"};function Jt(lt,It){if(lt){var Yt;if(Lt(lt))for(var ce=0,Te=lt.length;ce<Te&&(Yt=It(lt[ce],ce),Yt!==!1);ce++);else if(Pt(lt)){for(var cr in lt)if(lt.hasOwnProperty(cr)&&(Yt=It(lt[cr],cr),Yt===!1))break}}}var Ie=Jt,pe=Object.keys?function(lt){return Object.keys(lt)}:function(lt){var It=[];return Ie(lt,function(Yt,ce){at(lt)&&ce==="prototype"||It.push(ce)}),It},je=pe;function br(lt,It){var Yt=je(It),ce=Yt.length;if(M(lt))return!ce;for(var Te=0;Te<ce;Te+=1){var cr=Yt[Te];if(It[cr]!==lt[cr]||!(cr in lt))return!1}return!0}var Je=br,zr=function(lt){return typeof lt=="object"&&lt!==null},gn=zr,tr=function(lt){if(!gn(lt)||!mt(lt,"Object"))return!1;if(Object.getPrototypeOf(lt)===null)return!0;for(var It=lt;Object.getPrototypeOf(It)!==null;)It=Object.getPrototypeOf(It);return Object.getPrototypeOf(lt)===It},xr=tr;function Ur(lt,It){if(!Lt(lt))return null;var Yt;if(at(It)&&(Yt=It),xr(It)&&(Yt=function(Te){return Je(Te,It)}),Yt){for(var ce=0;ce<lt.length;ce+=1)if(Yt(lt[ce]))return lt[ce]}return null}var Nr=Ur;function fe(lt,It,Yt){Yt===void 0&&(Yt=0);for(var ce=Yt;ce<lt.length;ce++)if(It(lt[ce],ce))return ce;return-1}var Wt=fe,ge=function(lt,It){for(var Yt=null,ce=0;ce<lt.length;ce++){var Te=lt[ce],cr=Te[It];if(!M(cr)){Lt(cr)?Yt=cr[0]:Yt=cr;break}}return Yt},Ae=ge,Se=function(lt){if(!Lt(lt))return[];for(var It=[],Yt=0;Yt<lt.length;Yt++)It=It.concat(lt[Yt]);return It},Be=Se,vr=function(lt,It){if(It===void 0&&(It=[]),!Lt(lt))It.push(lt);else for(var Yt=0;Yt<lt.length;Yt+=1)vr(lt[Yt],It);return It},Mr=vr,fn=function(lt){if(Lt(lt))return lt.reduce(function(It,Yt){return Math.max(It,Yt)},lt[0])},Xn=function(lt){if(Lt(lt))return lt.reduce(function(It,Yt){return Math.min(It,Yt)},lt[0])},Mn=function(lt){var It=lt.filter(function(mr){return!isNaN(mr)});if(!It.length)return{min:0,max:0};if(Lt(lt[0])){for(var Yt=[],ce=0;ce<lt.length;ce++)Yt=Yt.concat(lt[ce]);It=Yt}var Te=fn(It),cr=Xn(It);return{min:cr,max:Te}},qn=Mn,bn=Array.prototype,Vn=bn.splice,ca=bn.indexOf,xa=function(lt){for(var It=[],Yt=1;Yt<arguments.length;Yt++)It[Yt-1]=arguments[Yt];for(var ce=0;ce<It.length;ce++)for(var Te=It[ce],cr=-1;(cr=ca.call(lt,Te))>-1;)Vn.call(lt,cr,1);return lt},Ea=xa,Ni=Array.prototype.splice,ti=function(It,Yt){if(!Et(It))return[];for(var ce=It?Yt.length:0,Te=ce-1;ce--;){var cr=void 0,mr=Yt[ce];(ce===Te||mr!==cr)&&(cr=mr,Ni.call(It,mr,1))}return It},ei=ti,Mi=function(lt,It,Yt){if(!Lt(lt)&&!xr(lt))return lt;var ce=Yt;return Ie(lt,function(Te,cr){ce=It(ce,Te,cr)}),ce},Gi=Mi,To=function(lt,It){var Yt=[];if(!Et(lt))return Yt;for(var ce=-1,Te=[],cr=lt.length;++ce<cr;){var mr=lt[ce];It(mr,ce,lt)&&(Yt.push(mr),Te.push(ce))}return ei(lt,Te),Yt},ro=To,ga=function(lt){return mt(lt,"String")};function fo(lt,It){var Yt;if(at(It))Yt=function(Te,cr){return It(Te)-It(cr)};else{var ce=[];ga(It)?ce.push(It):Lt(It)&&(ce=It),Yt=function(Te,cr){for(var mr=0;mr<ce.length;mr+=1){var Hr=ce[mr];if(Te[Hr]>cr[Hr])return 1;if(Te[Hr]<cr[Hr])return-1}return 0}}return lt.sort(Yt),lt}var Ao=fo;function ni(lt,It){It===void 0&&(It=new Map);var Yt=[];if(Array.isArray(lt))for(var ce=0,Te=lt.length;ce<Te;ce++){var cr=lt[ce];It.has(cr)||(Yt.push(cr),It.set(cr,!0))}return Yt}var Ri=function(){for(var lt=[],It=0;It<arguments.length;It++)lt[It]=arguments[It];return ni([].concat.apply([],lt))},co=Ri,Po=function(lt,It){for(var Yt=[],ce={},Te=0;Te<lt.length;Te++){var cr=lt[Te],mr=cr[It];if(!M(mr)){Lt(mr)||(mr=[mr]);for(var Hr=0;Hr<mr.length;Hr++){var wn=mr[Hr];ce[wn]||(Yt.push(wn),ce[wn]=!0)}}}return Yt};function no(lt){if(Et(lt))return lt[0]}function ao(lt){if(Et(lt)){var It=lt;return It[It.length-1]}}function Jo(lt,It){return Lt(lt)||ga(lt)?lt[0]===It:!1}var lo=Jo;function _i(lt,It){return Lt(lt)||ga(lt)?lt[lt.length-1]===It:!1}var io=_i,$o=function(lt,It){for(var Yt=0;Yt<lt.length;Yt++)if(!It(lt[Yt],Yt))return!1;return!0},Gt=$o,le=function(lt,It){for(var Yt=0;Yt<lt.length;Yt++)if(It(lt[Yt],Yt))return!0;return!1},Ge=le,pr=Object.prototype.hasOwnProperty;function Fr(lt,It){if(!It||!Lt(lt))return{};for(var Yt={},ce=at(It)?It:function(Hr){return Hr[It]},Te,cr=0;cr<lt.length;cr++){var mr=lt[cr];Te=ce(mr),pr.call(Yt,Te)?Yt[Te].push(mr):Yt[Te]=[mr]}return Yt}var Gr=Fr;function Or(lt,It){if(!It)return{0:lt};if(!at(It)){var Yt=Lt(It)?It:It.replace(/\s+/g,"").split("*");It=function(ce){for(var Te="_",cr=0,mr=Yt.length;cr<mr;cr++)Te+=ce[Yt[cr]]&&ce[Yt[cr]].toString();return Te}}return Gr(lt,It)}var cn=function(lt,It){if(!It)return[lt];var Yt=Or(lt,It),ce=[];for(var Te in Yt)ce.push(Yt[Te]);return ce};function mn(lt,It){return lt["_wrap_"+It]}var Bn=mn;function sa(lt,It){if(lt["_wrap_"+It])return lt["_wrap_"+It];var Yt=function(ce){lt[It](ce)};return lt["_wrap_"+It]=Yt,Yt}var Zn=sa,va={};function ya(lt){var It=va[lt];if(!It){for(var Yt=lt.toString(16),ce=Yt.length;ce<6;ce++)Yt="0"+Yt;It="#"+Yt,va[lt]=It}return It}var vi=ya;function Ma(lt){var It=0,Yt=0,ce=0,Te=0;return Lt(lt)?lt.length===1?It=Yt=ce=Te=lt[0]:lt.length===2?(It=ce=lt[0],Yt=Te=lt[1]):lt.length===3?(It=lt[0],Yt=Te=lt[1],ce=lt[2]):(It=lt[0],Yt=lt[1],ce=lt[2],Te=lt[3]):It=Yt=ce=Te=lt,{r1:It,r2:Yt,r3:ce,r4:Te}}var oa=Ma,oi=function(lt,It,Yt){return lt<It?It:lt>Yt?Yt:lt},$a=oi,za=function(lt,It){var Yt=It.toString(),ce=Yt.indexOf(".");if(ce===-1)return Math.round(lt);var Te=Yt.substr(ce+1).length;return Te>20&&(Te=20),parseFloat(lt.toFixed(Te))},Ui=za,di=function(lt){return mt(lt,"Number")},La=di,ja=function(lt){return La(lt)&&lt%1!==0},Ga=ja,bi=function(lt){return La(lt)&&lt%2===0},xi=bi,ki=Number.isInteger?Number.isInteger:function(lt){return La(lt)&&lt%1===0},ho=ki,Wi=function(lt){return La(lt)&&lt<0},Io=Wi,Xo=1e-5;function is(lt,It,Yt){return Yt===void 0&&(Yt=Xo),Math.abs(lt-It)<Yt}var $i=function(lt){return La(lt)&&lt%2!==0},qa=$i,Yi=function(lt){return La(lt)&&lt>0},oo=Yi,Qa=function(lt,It){if(Lt(lt)){for(var Yt,ce=-1/0,Te=0;Te<lt.length;Te++){var cr=lt[Te],mr=at(It)?It(cr):cr[It];mr>ce&&(Yt=cr,ce=mr)}return Yt}},Li=function(lt,It){if(Lt(lt)){for(var Yt,ce=1/0,Te=0;Te<lt.length;Te++){var cr=lt[Te],mr=at(It)?It(cr):cr[It];mr<ce&&(Yt=cr,ce=mr)}return Yt}},zo=function(lt,It){return(lt%It+It)%It},qi=zo,ts=180/Math.PI,Xi=function(lt){return ts*lt},xo=Xi,gs=parseInt,fs=Math.PI/180,so=function(lt){return fs*lt},ss=so,cs=Ie,_s=function(lt,It){return lt.hasOwnProperty(It)},jo=_s,$t=Object.values?function(lt){return Object.values(lt)}:function(lt){var It=[];return Ie(lt,function(Yt,ce){at(lt)&&ce==="prototype"||It.push(Yt)}),It},ye=$t,hr=function(lt,It){return Ot(ye(lt),It)},Er=function(lt){return M(lt)?"":lt.toString()},nn=function(lt){return Er(lt).toLowerCase()},kn=nn,Qn=function(lt){var It=Er(lt);return It.charAt(0).toLowerCase()+It.substring(1)},wa=Qn;function Ai(lt,It){return!lt||!It?lt:lt.replace(/\\?\{([^{}]+)\}/g,function(Yt,ce){return Yt.charAt(0)==="\\"?Yt.slice(1):It[ce]===void 0?"":It[ce]})}var Oo=Ai,Go=function(lt){return Er(lt).toUpperCase()},Rs=Go,Cs=function(lt){var It=Er(lt);return It.charAt(0).toUpperCase()+It.substring(1)},ji=Cs,bo={}.toString,ks=function(lt){return bo.call(lt).replace(/^\[object /,"").replace(/]$/,"")},ls=ks,qs=function(lt){return mt(lt,"Arguments")},Qs=qs,Js=function(lt){return mt(lt,"Boolean")},Ws=Js,Ds=function(lt){return mt(lt,"Date")},Bs=Ds,ms=function(lt){return mt(lt,"Error")},es=ms;function Tu(lt){return La(lt)&&isFinite(lt)}var Au=function(lt){return lt===null},Uo=Au,Eo=Object.prototype,os=function(lt){var It=lt&&lt.constructor,Yt=typeof It=="function"&&It.prototype||Eo;return lt===Yt},d=os,G=function(lt){return mt(lt,"RegExp")},wt=G,kt=function(lt){return lt===void 0},qt=kt,he=function(lt){return lt instanceof Element||lt instanceof HTMLDocument},me=he;function Oe(lt){var It=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Yt){return setTimeout(Yt,16)};return It(lt)}function Fe(lt){var It=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;It(lt)}function Ke(lt,It){for(var Yt in It)It.hasOwnProperty(Yt)&&Yt!=="constructor"&&It[Yt]!==void 0&&(lt[Yt]=It[Yt])}function gr(lt,It,Yt,ce){return It&&Ke(lt,It),Yt&&Ke(lt,Yt),ce&&Ke(lt,ce),lt}var Kr=function(){for(var lt=[],It=0;It<arguments.length;It++)lt[It]=arguments[It];for(var Yt=lt[0],ce=1;ce<lt.length;ce++){var Te=lt[ce];at(Te)&&(Te=Te.prototype),gr(Yt.prototype,Te)}},Jr=Kr,Qr=function(lt){if(typeof lt!="object"||lt===null)return lt;var It;if(Lt(lt)){It=[];for(var Yt=0,ce=lt.length;Yt<ce;Yt++)typeof lt[Yt]=="object"&&lt[Yt]!=null?It[Yt]=Qr(lt[Yt]):It[Yt]=lt[Yt]}else{It={};for(var Te in lt)typeof lt[Te]=="object"&&lt[Te]!=null?It[Te]=Qr(lt[Te]):It[Te]=lt[Te]}return It},Ln=Qr;function Nn(lt,It,Yt){var ce;return function(){var Te=this,cr=arguments,mr=function(){ce=null,Yt||lt.apply(Te,cr)},Hr=Yt&&!ce;clearTimeout(ce),ce=setTimeout(mr,It),Hr&&lt.apply(Te,cr)}}var sn=Nn,ra=function(lt,It){if(!at(lt))throw new TypeError("Expected a function");var Yt=function(){for(var ce=[],Te=0;Te<arguments.length;Te++)ce[Te]=arguments[Te];var cr=It?It.apply(this,ce):ce[0],mr=Yt.cache;if(mr.has(cr))return mr.get(cr);var Hr=lt.apply(this,ce);return mr.set(cr,Hr),Hr};return Yt.cache=new Map,Yt},Ha=5;function Va(lt,It,Yt,ce){Yt=Yt||0,ce=ce||Ha;for(var Te in It)if(It.hasOwnProperty(Te)){var cr=It[Te];cr!==null&&xr(cr)?(xr(lt[Te])||(lt[Te]={}),Yt<ce?Va(lt[Te],cr,Yt+1,ce):lt[Te]=It[Te]):Lt(cr)?(lt[Te]=[],lt[Te]=lt[Te].concat(cr)):cr!==void 0&&(lt[Te]=cr)}}var ka=function(lt){for(var It=[],Yt=1;Yt<arguments.length;Yt++)It[Yt-1]=arguments[Yt];for(var ce=0;ce<It.length;ce+=1)Va(lt,It[ce]);return lt},_a=ka,Pa=function(lt,It,Yt,ce){at(It)||(Yt=It,It=lt,lt=function(){});var Te=Object.create?function(mr,Hr){return Object.create(mr,{constructor:{value:Hr}})}:function(mr,Hr){function wn(){}wn.prototype=mr;var Cn=new wn;return Cn.constructor=Hr,Cn},cr=Te(It.prototype,lt);return lt.prototype=gr(cr,lt.prototype),lt.superclass=Te(It.prototype,It),gr(cr,Yt),gr(lt,ce),lt},Do=Pa,wo=function(lt,It){if(!Et(lt))return-1;var Yt=Array.prototype.indexOf;if(Yt)return Yt.call(lt,It);for(var ce=-1,Te=0;Te<lt.length;Te++)if(lt[Te]===It){ce=Te;break}return ce},vo=wo,So=Object.prototype.hasOwnProperty;function Mo(lt){if(M(lt))return!0;if(Et(lt))return!lt.length;var It=ls(lt);if(It==="Map"||It==="Set")return!lt.size;if(d(lt))return!Object.keys(lt).length;for(var Yt in lt)if(So.call(lt,Yt))return!1;return!0}var No=Mo,Ro=function(lt,It){if(lt===It)return!0;if(!lt||!It||ga(lt)||ga(It))return!1;if(Et(lt)||Et(It)){if(lt.length!==It.length)return!1;for(var Yt=!0,ce=0;ce<lt.length&&(Yt=Ro(lt[ce],It[ce]),!!Yt);ce++);return Yt}if(gn(lt)||gn(It)){var Te=Object.keys(lt),cr=Object.keys(It);if(Te.length!==cr.length)return!1;for(var Yt=!0,ce=0;ce<Te.length&&(Yt=Ro(lt[Te[ce]],It[Te[ce]]),!!Yt);ce++);return Yt}return!1},hi=Ro,Bi=function(lt,It,Yt){return at(Yt)?!!Yt(lt,It):hi(lt,It)},Ys=function(lt,It){if(!Et(lt))return lt;for(var Yt=[],ce=0;ce<lt.length;ce++){var Te=lt[ce];Yt.push(It(Te,ce))}return Yt},Xs=Ys,ds=function(lt){return lt},Iu=function(lt,It){It===void 0&&(It=ds);var Yt={};return Pt(lt)&&!M(lt)&&Object.keys(lt).forEach(function(ce){Yt[ce]=It(lt[ce],ce)}),Yt},kf=function(lt,It,Yt){for(var ce=0,Te=ga(It)?It.split("."):It;lt&&ce<Te.length;)lt=lt[Te[ce++]];return lt===void 0||ce<Te.length?Yt:lt},cc=function(lt,It,Yt){var ce=lt,Te=ga(It)?It.split("."):It;return Te.forEach(function(cr,mr){mr<Te.length-1?(Pt(ce[cr])||(ce[cr]=La(Te[mr+1])?[]:{}),ce=ce[cr]):ce[cr]=Yt}),lt},lc=Object.prototype.hasOwnProperty,dc=function(lt,It){if(lt===null||!xr(lt))return{};var Yt={};return Ie(It,function(ce){lc.call(lt,ce)&&(Yt[ce]=lt[ce])}),Yt},Bf=function(lt,It){return Gi(lt,function(Yt,ce,Te){return It.includes(Te)||(Yt[Te]=ce),Yt},{})},Ff=function(lt,It,Yt){var ce,Te,cr,mr,Hr=0;Yt||(Yt={});var wn=function(){Hr=Yt.leading===!1?0:Date.now(),ce=null,mr=lt.apply(Te,cr),ce||(Te=cr=null)},Cn=function(){var Hn=Date.now();!Hr&&Yt.leading===!1&&(Hr=Hn);var aa=It-(Hn-Hr);return Te=this,cr=arguments,aa<=0||aa>It?(ce&&(clearTimeout(ce),ce=null),Hr=Hn,mr=lt.apply(Te,cr),ce||(Te=cr=null)):!ce&&Yt.trailing!==!1&&(ce=setTimeout(wn,aa)),mr};return Cn.cancel=function(){clearTimeout(ce),Hr=0,ce=Te=cr=null},Cn},hc=function(lt){return Et(lt)?Array.prototype.slice.call(lt):[]},hu={},uf=function(lt){return lt=lt||"g",hu[lt]?hu[lt]+=1:hu[lt]=1,lt+hu[lt]},vc=function(){},$c=function(lt){return lt};function vu(lt){return M(lt)?0:Et(lt)?lt.length:Object.keys(lt).length}var pc=function(){function lt(){this.map={}}return lt.prototype.has=function(It){return this.map[It]!==void 0},lt.prototype.get=function(It,Yt){var ce=this.map[It];return ce===void 0?Yt:ce},lt.prototype.set=function(It,Yt){this.map[It]=Yt},lt.prototype.clear=function(){this.map={}},lt.prototype.delete=function(It){delete this.map[It]},lt.prototype.size=function(){return Object.keys(this.map).length},lt}(),ea=pc,Ou=1e-6;function si(lt){return Math.abs(lt)<Ou?0:lt<0?-1:1}function ff(lt,It,Yt){return(Yt[0]-lt[0])*(It[1]-lt[1])===(It[0]-lt[0])*(Yt[1]-lt[1])&&Math.min(lt[0],It[0])<=Yt[0]&&Yt[0]<=Math.max(lt[0],It[0])&&Math.min(lt[1],It[1])<=Yt[1]&&Yt[1]<=Math.max(lt[1],It[1])}function $u(lt,It,Yt){var ce=!1,Te=lt.length;if(Te<=2)return!1;for(var cr=0;cr<Te;cr++){var mr=lt[cr],Hr=lt[(cr+1)%Te];if(ff(mr,Hr,[It,Yt]))return!0;si(mr[1]-Yt)>0!=si(Hr[1]-Yt)>0&&si(It-(Yt-mr[1])*(mr[0]-Hr[0])/(mr[1]-Hr[1])-mr[0])<0&&(ce=!ce)}return ce}var uu=function(lt,It,Yt){return lt>=It&&lt<=Yt};function zf(lt,It,Yt,ce){var Te=.001,cr={x:Yt.x-lt.x,y:Yt.y-lt.y},mr={x:It.x-lt.x,y:It.y-lt.y},Hr={x:ce.x-Yt.x,y:ce.y-Yt.y},wn=mr.x*Hr.y-mr.y*Hr.x,Cn=wn*wn,Hn=mr.x*mr.x+mr.y*mr.y,aa=Hr.x*Hr.x+Hr.y*Hr.y,Kn=null;if(Cn>Te*Hn*aa){var Oa=(cr.x*Hr.y-cr.y*Hr.x)/wn,Ja=(cr.x*mr.y-cr.y*mr.x)/wn;uu(Oa,0,1)&&uu(Ja,0,1)&&(Kn={x:lt.x+Oa*mr.x,y:lt.y+Oa*mr.y})}return Kn}function Du(lt){for(var It=[],Yt=lt.length,ce=0;ce<Yt-1;ce++){var Te=lt[ce],cr=lt[ce+1];It.push({from:{x:Te[0],y:Te[1]},to:{x:cr[0],y:cr[1]}})}if(It.length>1){var mr=lt[0],Hr=lt[Yt-1];It.push({from:{x:Hr[0],y:Hr[1]},to:{x:mr[0],y:mr[1]}})}return It}function gc(lt,It){var Yt=!1;return lt.forEach(function(ce){if(zf(ce.from,ce.to,It.from,It.to))return Yt=!0,!1}),Yt}function cf(lt){var It=lt.map(function(ce){return ce[0]}),Yt=lt.map(function(ce){return ce[1]});return{minX:Math.min.apply(null,It),maxX:Math.max.apply(null,It),minY:Math.min.apply(null,Yt),maxY:Math.max.apply(null,Yt)}}function mc(lt,It){return!(It.minX>lt.maxX||It.maxX<lt.minX||It.minY>lt.maxY||It.maxY<lt.minY)}function Fs(lt,It){if(lt.length<2||It.length<2)return!1;var Yt=cf(lt),ce=cf(It);if(!mc(Yt,ce))return!1;var Te=!1;if(It.forEach(function(wn){if($u(lt,wn[0],wn[1]))return Te=!0,!1}),Te||(lt.forEach(function(wn){if($u(It,wn[0],wn[1]))return Te=!0,!1}),Te))return!0;var cr=Du(lt),mr=Du(It),Hr=!1;return mr.forEach(function(wn){if(gc(cr,wn))return Hr=!0,!1}),Hr}},731278:function(He,z,C){"use strict";var x;x={value:!0};var k=C(858204);function w(g,O,E){var D=[0,0,0,0,0,0,0,0,0];return k.mat3.fromTranslation(D,E),k.mat3.multiply(g,D,O)}x=w;function T(g,O,E){var D=[0,0,0,0,0,0,0,0,0];return k.mat3.fromRotation(D,E),k.mat3.multiply(g,D,O)}x=T;function L(g,O,E){var D=[0,0,0,0,0,0,0,0,0];return k.mat3.fromScaling(D,E),k.mat3.multiply(g,D,O)}x=L;function P(g,O,E){return k.mat3.multiply(g,E,O)}function p(g,O){for(var E=g?[].concat(g):[1,0,0,0,1,0,0,0,1],D=0,F=O.length;D<F;D++){var W=O[D];switch(W[0]){case"t":w(E,E,[W[1],W[2]]);break;case"s":L(E,E,[W[1],W[2]]);break;case"r":T(E,E,W[1]);break;case"m":P(E,E,W[1]);break;default:break}}return E}z.vs=p;function m(g,O){return g[0]*O[1]-O[0]*g[1]}x=m;function S(g,O,E){var D=k.vec2.angle(g,O),F=m(g,O)>=0;return E?F?Math.PI*2-D:D:F?D:Math.PI*2-D}x=S;function y(g,O,E){return E?(g[0]=O[1],g[1]=-1*O[0]):(g[0]=-1*O[1],g[1]=O[0]),g}x=y},413810:function(He,z,C){"use strict";C.r(z),C.d(z,{Cache:function(){return jo},assign:function(){return cn},augment:function(){return Bn},clamp:function(){return Qt},clearAnimationFrame:function(){return Gr},clone:function(){return Zn},contains:function(){return T},debounce:function(){return ya},deepMix:function(){return $a},difference:function(){return m},each:function(){return h},endsWith:function(){return un},every:function(){return $e},extend:function(){return Ui},filter:function(){return P},find:function(){return nt},findIndex:function(){return gt},firstValue:function(){return Mt},fixedBase:function(){return we},flatten:function(){return rt},flattenDeep:function(){return Tt},forIn:function(){return ge},get:function(){return $i},getEllipsisText:function(){return cs},getRange:function(){return Ft},getType:function(){return Gi},getWrapBehavior:function(){return Ir},group:function(){return Sn},groupBy:function(){return Zr},groupToMap:function(){return qr},has:function(){return Ae},hasKey:function(){return Se},hasValue:function(){return Mr},head:function(){return qe},identity:function(){return xo},includes:function(){return T},indexOf:function(){return La},isArguments:function(){return ro},isArray:function(){return F},isArrayLike:function(){return k},isBoolean:function(){return fo},isDate:function(){return ni},isDecimal:function(){return Bt},isElement:function(){return pr},isEmpty:function(){return bi},isEqual:function(){return ki},isEqualWith:function(){return ho},isError:function(){return co},isEven:function(){return at},isFinite:function(){return Po},isFunction:function(){return O},isInteger:function(){return M},isMatch:function(){return Z},isNegative:function(){return X},isNil:function(){return D},isNull:function(){return ao},isNumber:function(){return Kt},isNumberEqual:function(){return Lt},isObject:function(){return W},isObjectLike:function(){return q},isOdd:function(){return Jt},isPlainObject:function(){return J},isPositive:function(){return pe},isPrototype:function(){return _i},isRegExp:function(){return $o},isString:function(){return xe},isType:function(){return g},isUndefined:function(){return le},keys:function(){return U},last:function(){return fr},lowerCase:function(){return Mn},lowerFirst:function(){return bn},map:function(){return Io},mapValues:function(){return is},max:function(){return Rt},maxBy:function(){return je},measureTextWidth:function(){return ss},memoize:function(){return vi},min:function(){return st},minBy:function(){return br},mix:function(){return cn},mod:function(){return zr},noop:function(){return Xi},number2color:function(){return _n},omit:function(){return Qa},parseRadius:function(){return ir},pick:function(){return oo},pull:function(){return se},pullAt:function(){return oe},reduce:function(){return te},remove:function(){return Ue},requestAnimationFrame:function(){return Fr},set:function(){return qa},size:function(){return gs},some:function(){return ar},sortBy:function(){return de},startsWith:function(){return kr},substitute:function(){return ca},throttle:function(){return Li},toArray:function(){return zo},toDegree:function(){return xr},toInteger:function(){return Ur},toRadian:function(){return Wt},toString:function(){return fn},union:function(){return Le},uniq:function(){return ht},uniqueId:function(){return ts},upperCase:function(){return Ea},upperFirst:function(){return ti},values:function(){return vr},valuesOfKey:function(){return Ze},wrapBehavior:function(){return en}});var x=function($t){return $t!==null&&typeof $t!="function"&&isFinite($t.length)},k=x,w=function($t,ye){return k($t)?$t.indexOf(ye)>-1:!1},T=w,L=function($t,ye){if(!k($t))return $t;for(var hr=[],Er=0;Er<$t.length;Er++){var nn=$t[Er];ye(nn,Er)&&hr.push(nn)}return hr},P=L,p=function($t,ye){return ye===void 0&&(ye=[]),P($t,function(hr){return!T(ye,hr)})},m=p,S={}.toString,y=function($t,ye){return S.call($t)==="[object "+ye+"]"},g=y,O=function($t){return g($t,"Function")},E=function($t){return $t==null},D=E,F=function($t){return Array.isArray?Array.isArray($t):g($t,"Array")},W=function($t){var ye=typeof $t;return $t!==null&&ye==="object"||ye==="function"};function b($t,ye){if($t){var hr;if(F($t))for(var Er=0,nn=$t.length;Er<nn&&(hr=ye($t[Er],Er),hr!==!1);Er++);else if(W($t)){for(var kn in $t)if($t.hasOwnProperty(kn)&&(hr=ye($t[kn],kn),hr===!1))break}}}var h=b,K=Object.keys?function($t){return Object.keys($t)}:function($t){var ye=[];return h($t,function(hr,Er){O($t)&&Er==="prototype"||ye.push(Er)}),ye},U=K;function Y($t,ye){var hr=U(ye),Er=hr.length;if(D($t))return!Er;for(var nn=0;nn<Er;nn+=1){var kn=hr[nn];if(ye[kn]!==$t[kn]||!(kn in $t))return!1}return!0}var Z=Y,H=function($t){return typeof $t=="object"&&$t!==null},q=H,Q=function($t){if(!q($t)||!g($t,"Object"))return!1;if(Object.getPrototypeOf($t)===null)return!0;for(var ye=$t;Object.getPrototypeOf(ye)!==null;)ye=Object.getPrototypeOf(ye);return Object.getPrototypeOf($t)===ye},J=Q;function ft($t,ye){if(!F($t))return null;var hr;if(O(ye)&&(hr=ye),J(ye)&&(hr=function(nn){return Z(nn,ye)}),hr){for(var Er=0;Er<$t.length;Er+=1)if(hr($t[Er]))return $t[Er]}return null}var nt=ft;function yt($t,ye,hr){hr===void 0&&(hr=0);for(var Er=hr;Er<$t.length;Er++)if(ye($t[Er],Er))return Er;return-1}var gt=yt,zt=function($t,ye){for(var hr=null,Er=0;Er<$t.length;Er++){var nn=$t[Er],kn=nn[ye];if(!D(kn)){F(kn)?hr=kn[0]:hr=kn;break}}return hr},Mt=zt,Ct=function($t){if(!F($t))return[];for(var ye=[],hr=0;hr<$t.length;hr++)ye=ye.concat($t[hr]);return ye},rt=Ct,ot=function($t,ye){if(ye===void 0&&(ye=[]),!F($t))ye.push($t);else for(var hr=0;hr<$t.length;hr+=1)ot($t[hr],ye);return ye},Tt=ot,Rt=function($t){if(F($t))return $t.reduce(function(ye,hr){return Math.max(ye,hr)},$t[0])},st=function($t){if(F($t))return $t.reduce(function(ye,hr){return Math.min(ye,hr)},$t[0])},bt=function($t){var ye=$t.filter(function(Qn){return!isNaN(Qn)});if(!ye.length)return{min:0,max:0};if(F($t[0])){for(var hr=[],Er=0;Er<$t.length;Er++)hr=hr.concat($t[Er]);ye=hr}var nn=Rt(ye),kn=st(ye);return{min:kn,max:nn}},Ft=bt,Ht=Array.prototype,_t=Ht.splice,Xt=Ht.indexOf,ee=function($t){for(var ye=[],hr=1;hr<arguments.length;hr++)ye[hr-1]=arguments[hr];for(var Er=0;Er<ye.length;Er++)for(var nn=ye[Er],kn=-1;(kn=Xt.call($t,nn))>-1;)_t.call($t,kn,1);return $t},se=ee,ue=Array.prototype.splice,Ut=function(ye,hr){if(!k(ye))return[];for(var Er=ye?hr.length:0,nn=Er-1;Er--;){var kn=void 0,Qn=hr[Er];(Er===nn||Qn!==kn)&&(kn=Qn,ue.call(ye,Qn,1))}return ye},oe=Ut,Pe=function($t,ye,hr){if(!F($t)&&!J($t))return $t;var Er=hr;return h($t,function(nn,kn){Er=ye(Er,nn,kn)}),Er},te=Pe,ve=function($t,ye){var hr=[];if(!k($t))return hr;for(var Er=-1,nn=[],kn=$t.length;++Er<kn;){var Qn=$t[Er];ye(Qn,Er,$t)&&(hr.push(Qn),nn.push(Er))}return oe($t,nn),hr},Ue=ve,xe=function($t){return g($t,"String")};function Re($t,ye){var hr;if(O(ye))hr=function(nn,kn){return ye(nn)-ye(kn)};else{var Er=[];xe(ye)?Er.push(ye):F(ye)&&(Er=ye),hr=function(nn,kn){for(var Qn=0;Qn<Er.length;Qn+=1){var wa=Er[Qn];if(nn[wa]>kn[wa])return 1;if(nn[wa]<kn[wa])return-1}return 0}}return $t.sort(hr),$t}var de=Re;function ht($t,ye){ye===void 0&&(ye=new Map);var hr=[];if(Array.isArray($t))for(var Er=0,nn=$t.length;Er<nn;Er++){var kn=$t[Er];ye.has(kn)||(hr.push(kn),ye.set(kn,!0))}return hr}var ae=function(){for(var $t=[],ye=0;ye<arguments.length;ye++)$t[ye]=arguments[ye];return ht([].concat.apply([],$t))},Le=ae,Ze=function($t,ye){for(var hr=[],Er={},nn=0;nn<$t.length;nn++){var kn=$t[nn],Qn=kn[ye];if(!D(Qn)){F(Qn)||(Qn=[Qn]);for(var wa=0;wa<Qn.length;wa++){var Ai=Qn[wa];Er[Ai]||(hr.push(Ai),Er[Ai]=!0)}}}return hr};function qe($t){if(k($t))return $t[0]}function fr($t){if(k($t)){var ye=$t;return ye[ye.length-1]}}function ur($t,ye){return F($t)||xe($t)?$t[0]===ye:!1}var kr=ur;function yn($t,ye){return F($t)||xe($t)?$t[$t.length-1]===ye:!1}var un=yn,Vr=function($t,ye){for(var hr=0;hr<$t.length;hr++)if(!ye($t[hr],hr))return!1;return!0},$e=Vr,dr=function($t,ye){for(var hr=0;hr<$t.length;hr++)if(ye($t[hr],hr))return!0;return!1},ar=dr,Qe=Object.prototype.hasOwnProperty;function Pr($t,ye){if(!ye||!F($t))return{};for(var hr={},Er=O(ye)?ye:function(wa){return wa[ye]},nn,kn=0;kn<$t.length;kn++){var Qn=$t[kn];nn=Er(Qn),Qe.call(hr,nn)?hr[nn].push(Qn):hr[nn]=[Qn]}return hr}var Zr=Pr;function qr($t,ye){if(!ye)return{0:$t};if(!O(ye)){var hr=F(ye)?ye:ye.replace(/\s+/g,"").split("*");ye=function(Er){for(var nn="_",kn=0,Qn=hr.length;kn<Qn;kn++)nn+=Er[hr[kn]]&&Er[hr[kn]].toString();return nn}}return Zr($t,ye)}var Sn=function($t,ye){if(!ye)return[$t];var hr=qr($t,ye),Er=[];for(var nn in hr)Er.push(hr[nn]);return Er};function Yn($t,ye){return $t["_wrap_"+ye]}var Ir=Yn;function Br($t,ye){if($t["_wrap_"+ye])return $t["_wrap_"+ye];var hr=function(Er){$t[ye](Er)};return $t["_wrap_"+ye]=hr,hr}var en=Br,hn={};function xn($t){var ye=hn[$t];if(!ye){for(var hr=$t.toString(16),Er=hr.length;Er<6;Er++)hr="0"+hr;ye="#"+hr,hn[$t]=ye}return ye}var _n=xn;function tt($t){var ye=0,hr=0,Er=0,nn=0;return F($t)?$t.length===1?ye=hr=Er=nn=$t[0]:$t.length===2?(ye=Er=$t[0],hr=nn=$t[1]):$t.length===3?(ye=$t[0],hr=nn=$t[1],Er=$t[2]):(ye=$t[0],hr=$t[1],Er=$t[2],nn=$t[3]):ye=hr=Er=nn=$t,{r1:ye,r2:hr,r3:Er,r4:nn}}var ir=tt,jt=function($t,ye,hr){return $t<ye?ye:$t>hr?hr:$t},Qt=jt,Et=function($t,ye){var hr=ye.toString(),Er=hr.indexOf(".");if(Er===-1)return Math.round($t);var nn=hr.substr(Er+1).length;return nn>20&&(nn=20),parseFloat($t.toFixed(nn))},we=Et,Ot=function($t){return g($t,"Number")},Kt=Ot,dt=function($t){return Kt($t)&&$t%1!==0},Bt=dt,$=function($t){return Kt($t)&&$t%2===0},at=$,R=Number.isInteger?Number.isInteger:function($t){return Kt($t)&&$t%1===0},M=R,A=function($t){return Kt($t)&&$t<0},X=A,mt=1e-5;function Lt($t,ye,hr){return hr===void 0&&(hr=mt),Math.abs($t-ye)<hr}var Pt=function($t){return Kt($t)&&$t%2!==0},Jt=Pt,Ie=function($t){return Kt($t)&&$t>0},pe=Ie,je=function($t,ye){if(F($t)){for(var hr,Er=-1/0,nn=0;nn<$t.length;nn++){var kn=$t[nn],Qn=O(ye)?ye(kn):kn[ye];Qn>Er&&(hr=kn,Er=Qn)}return hr}},br=function($t,ye){if(F($t)){for(var hr,Er=1/0,nn=0;nn<$t.length;nn++){var kn=$t[nn],Qn=O(ye)?ye(kn):kn[ye];Qn<Er&&(hr=kn,Er=Qn)}return hr}},Je=function($t,ye){return($t%ye+ye)%ye},zr=Je,gn=180/Math.PI,tr=function($t){return gn*$t},xr=tr,Ur=parseInt,Nr=Math.PI/180,fe=function($t){return Nr*$t},Wt=fe,ge=h,Ae=function($t,ye){return $t.hasOwnProperty(ye)},Se=Ae,Be=Object.values?function($t){return Object.values($t)}:function($t){var ye=[];return h($t,function(hr,Er){O($t)&&Er==="prototype"||ye.push(hr)}),ye},vr=Be,Mr=function($t,ye){return T(vr($t),ye)},fn=function($t){return D($t)?"":$t.toString()},Xn=function($t){return fn($t).toLowerCase()},Mn=Xn,qn=function($t){var ye=fn($t);return ye.charAt(0).toLowerCase()+ye.substring(1)},bn=qn;function Vn($t,ye){return!$t||!ye?$t:$t.replace(/\\?\{([^{}]+)\}/g,function(hr,Er){return hr.charAt(0)==="\\"?hr.slice(1):ye[Er]===void 0?"":ye[Er]})}var ca=Vn,xa=function($t){return fn($t).toUpperCase()},Ea=xa,Ni=function($t){var ye=fn($t);return ye.charAt(0).toUpperCase()+ye.substring(1)},ti=Ni,ei={}.toString,Mi=function($t){return ei.call($t).replace(/^\[object /,"").replace(/]$/,"")},Gi=Mi,To=function($t){return g($t,"Arguments")},ro=To,ga=function($t){return g($t,"Boolean")},fo=ga,Ao=function($t){return g($t,"Date")},ni=Ao,Ri=function($t){return g($t,"Error")},co=Ri;function Po($t){return Kt($t)&&isFinite($t)}var no=function($t){return $t===null},ao=no,Jo=Object.prototype,lo=function($t){var ye=$t&&$t.constructor,hr=typeof ye=="function"&&ye.prototype||Jo;return $t===hr},_i=lo,io=function($t){return g($t,"RegExp")},$o=io,Gt=function($t){return $t===void 0},le=Gt,Ge=function($t){return $t instanceof Element||$t instanceof HTMLDocument},pr=Ge;function Fr($t){var ye=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(hr){return setTimeout(hr,16)};return ye($t)}function Gr($t){var ye=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;ye($t)}function Or($t,ye){for(var hr in ye)ye.hasOwnProperty(hr)&&hr!=="constructor"&&ye[hr]!==void 0&&($t[hr]=ye[hr])}function cn($t,ye,hr,Er){return ye&&Or($t,ye),hr&&Or($t,hr),Er&&Or($t,Er),$t}var mn=function(){for(var $t=[],ye=0;ye<arguments.length;ye++)$t[ye]=arguments[ye];for(var hr=$t[0],Er=1;Er<$t.length;Er++){var nn=$t[Er];O(nn)&&(nn=nn.prototype),cn(hr.prototype,nn)}},Bn=mn,sa=function($t){if(typeof $t!="object"||$t===null)return $t;var ye;if(F($t)){ye=[];for(var hr=0,Er=$t.length;hr<Er;hr++)typeof $t[hr]=="object"&&$t[hr]!=null?ye[hr]=sa($t[hr]):ye[hr]=$t[hr]}else{ye={};for(var nn in $t)typeof $t[nn]=="object"&&$t[nn]!=null?ye[nn]=sa($t[nn]):ye[nn]=$t[nn]}return ye},Zn=sa;function va($t,ye,hr){var Er;return function(){var nn=this,kn=arguments,Qn=function(){Er=null,hr||$t.apply(nn,kn)},wa=hr&&!Er;clearTimeout(Er),Er=setTimeout(Qn,ye),wa&&$t.apply(nn,kn)}}var ya=va,vi=function($t,ye){if(!O($t))throw new TypeError("Expected a function");var hr=function(){for(var Er=[],nn=0;nn<arguments.length;nn++)Er[nn]=arguments[nn];var kn=ye?ye.apply(this,Er):Er[0],Qn=hr.cache;if(Qn.has(kn))return Qn.get(kn);var wa=$t.apply(this,Er);return Qn.set(kn,wa),wa};return hr.cache=new Map,hr},Ma=5;function oa($t,ye,hr,Er){hr=hr||0,Er=Er||Ma;for(var nn in ye)if(ye.hasOwnProperty(nn)){var kn=ye[nn];kn!==null&&J(kn)?(J($t[nn])||($t[nn]={}),hr<Er?oa($t[nn],kn,hr+1,Er):$t[nn]=ye[nn]):F(kn)?($t[nn]=[],$t[nn]=$t[nn].concat(kn)):kn!==void 0&&($t[nn]=kn)}}var oi=function($t){for(var ye=[],hr=1;hr<arguments.length;hr++)ye[hr-1]=arguments[hr];for(var Er=0;Er<ye.length;Er+=1)oa($t,ye[Er]);return $t},$a=oi,za=function($t,ye,hr,Er){O(ye)||(hr=ye,ye=$t,$t=function(){});var nn=Object.create?function(Qn,wa){return Object.create(Qn,{constructor:{value:wa}})}:function(Qn,wa){function Ai(){}Ai.prototype=Qn;var Oo=new Ai;return Oo.constructor=wa,Oo},kn=nn(ye.prototype,$t);return $t.prototype=cn(kn,$t.prototype),$t.superclass=nn(ye.prototype,ye),cn(kn,hr),cn($t,Er),$t},Ui=za,di=function($t,ye){if(!k($t))return-1;var hr=Array.prototype.indexOf;if(hr)return hr.call($t,ye);for(var Er=-1,nn=0;nn<$t.length;nn++)if($t[nn]===ye){Er=nn;break}return Er},La=di,ja=Object.prototype.hasOwnProperty;function Ga($t){if(D($t))return!0;if(k($t))return!$t.length;var ye=Gi($t);if(ye==="Map"||ye==="Set")return!$t.size;if(_i($t))return!Object.keys($t).length;for(var hr in $t)if(ja.call($t,hr))return!1;return!0}var bi=Ga,xi=function($t,ye){if($t===ye)return!0;if(!$t||!ye||xe($t)||xe(ye))return!1;if(k($t)||k(ye)){if($t.length!==ye.length)return!1;for(var hr=!0,Er=0;Er<$t.length&&(hr=xi($t[Er],ye[Er]),!!hr);Er++);return hr}if(q($t)||q(ye)){var nn=Object.keys($t),kn=Object.keys(ye);if(nn.length!==kn.length)return!1;for(var hr=!0,Er=0;Er<nn.length&&(hr=xi($t[nn[Er]],ye[nn[Er]]),!!hr);Er++);return hr}return!1},ki=xi,ho=function($t,ye,hr){return O(hr)?!!hr($t,ye):ki($t,ye)},Wi=function($t,ye){if(!k($t))return $t;for(var hr=[],Er=0;Er<$t.length;Er++){var nn=$t[Er];hr.push(ye(nn,Er))}return hr},Io=Wi,Xo=function($t){return $t},is=function($t,ye){ye===void 0&&(ye=Xo);var hr={};return W($t)&&!D($t)&&Object.keys($t).forEach(function(Er){hr[Er]=ye($t[Er],Er)}),hr},$i=function($t,ye,hr){for(var Er=0,nn=xe(ye)?ye.split("."):ye;$t&&Er<nn.length;)$t=$t[nn[Er++]];return $t===void 0||Er<nn.length?hr:$t},qa=function($t,ye,hr){var Er=$t,nn=xe(ye)?ye.split("."):ye;return nn.forEach(function(kn,Qn){Qn<nn.length-1?(W(Er[kn])||(Er[kn]=Kt(nn[Qn+1])?[]:{}),Er=Er[kn]):Er[kn]=hr}),$t},Yi=Object.prototype.hasOwnProperty,oo=function($t,ye){if($t===null||!J($t))return{};var hr={};return h(ye,function(Er){Yi.call($t,Er)&&(hr[Er]=$t[Er])}),hr},Qa=function($t,ye){return te($t,function(hr,Er,nn){return ye.includes(nn)||(hr[nn]=Er),hr},{})},Li=function($t,ye,hr){var Er,nn,kn,Qn,wa=0;hr||(hr={});var Ai=function(){wa=hr.leading===!1?0:Date.now(),Er=null,Qn=$t.apply(nn,kn),Er||(nn=kn=null)},Oo=function(){var Go=Date.now();!wa&&hr.leading===!1&&(wa=Go);var Rs=ye-(Go-wa);return nn=this,kn=arguments,Rs<=0||Rs>ye?(Er&&(clearTimeout(Er),Er=null),wa=Go,Qn=$t.apply(nn,kn),Er||(nn=kn=null)):!Er&&hr.trailing!==!1&&(Er=setTimeout(Ai,Rs)),Qn};return Oo.cancel=function(){clearTimeout(Er),wa=0,Er=nn=kn=null},Oo},zo=function($t){return k($t)?Array.prototype.slice.call($t):[]},qi={},ts=function($t){return $t=$t||"g",qi[$t]?qi[$t]+=1:qi[$t]=1,$t+qi[$t]},Xi=function(){},xo=function($t){return $t};function gs($t){return D($t)?0:k($t)?$t.length:Object.keys($t).length}var fs=C(197582),so,ss=vi(function($t,ye){ye===void 0&&(ye={});var hr=ye.fontSize,Er=ye.fontFamily,nn=ye.fontWeight,kn=ye.fontStyle,Qn=ye.fontVariant;return so||(so=document.createElement("canvas").getContext("2d")),so.font=[kn,Qn,nn,hr+"px",Er].join(" "),so.measureText(xe($t)?$t:"").width},function($t,ye){return ye===void 0&&(ye={}),(0,fs.__spreadArrays)([$t],vr(ye)).join("")}),cs=function($t,ye,hr,Er){Er===void 0&&(Er="...");var nn=16,kn=ss(Er,hr),Qn=xe($t)?$t:fn($t),wa=ye,Ai=[],Oo,Go;if(ss($t,hr)<=ye)return $t;for(;Oo=Qn.substr(0,nn),Go=ss(Oo,hr),!(Go+kn>wa&&Go>wa);)if(Ai.push(Oo),wa-=Go,Qn=Qn.substr(nn),!Qn)return Ai.join("");for(;Oo=Qn.substr(0,1),Go=ss(Oo,hr),!(Go+kn>wa);)if(Ai.push(Oo),wa-=Go,Qn=Qn.substr(1),!Qn)return Ai.join("");return""+Ai.join("")+Er},_s=function(){function $t(){this.map={}}return $t.prototype.has=function(ye){return this.map[ye]!==void 0},$t.prototype.get=function(ye,hr){var Er=this.map[ye];return Er===void 0?hr:Er},$t.prototype.set=function(ye,hr){this.map[ye]=hr},$t.prototype.clear=function(){this.map={}},$t.prototype.delete=function(ye){delete this.map[ye]},$t.prototype.size=function(){return Object.keys(this.map).length},$t}(),jo=_s},960887:function(He,z,C){"use strict";C.d(z,{LB:function(){return xa},g4:function(){return ar},we:function(){return Br},pE:function(){return ft},VK:function(){return Ft},Cj:function(){return Mi},O1:function(){return ei},Zj:function(){return ro},VT:function(){return b},Dy:function(){return h}});var x=C(667294),k=C(973935),w=C(724285);const T={display:"none"};function L(Gt){let{id:le,value:Ge}=Gt;return x.createElement("div",{id:le,style:T},Ge)}const P={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function p(Gt){let{id:le,announcement:Ge}=Gt;return x.createElement("div",{id:le,style:P,role:"status","aria-live":"assertive","aria-atomic":!0},Ge)}function m(){const[Gt,le]=(0,x.useState)("");return{announce:(0,x.useCallback)(pr=>{pr!=null&&le(pr)},[]),announcement:Gt}}const S=(0,x.createContext)(null);function y(Gt){const le=(0,x.useContext)(S);(0,x.useEffect)(()=>{if(!le)throw new Error("useDndMonitor must be used within a children of <DndContext>");return le(Gt)},[Gt,le])}function g(){const[Gt]=(0,x.useState)(()=>new Set),le=(0,x.useCallback)(pr=>(Gt.add(pr),()=>Gt.delete(pr)),[Gt]);return[(0,x.useCallback)(pr=>{let{type:Fr,event:Gr}=pr;Gt.forEach(Or=>{var cn;return(cn=Or[Fr])==null?void 0:cn.call(Or,Gr)})},[Gt]),le]}const O={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},E={onDragStart(Gt){let{active:le}=Gt;return"Picked up draggable item "+le.id+"."},onDragOver(Gt){let{active:le,over:Ge}=Gt;return Ge?"Draggable item "+le.id+" was moved over droppable area "+Ge.id+".":"Draggable item "+le.id+" is no longer over a droppable area."},onDragEnd(Gt){let{active:le,over:Ge}=Gt;return Ge?"Draggable item "+le.id+" was dropped over droppable area "+Ge.id:"Draggable item "+le.id+" was dropped."},onDragCancel(Gt){let{active:le}=Gt;return"Dragging was cancelled. Draggable item "+le.id+" was dropped."}};function D(Gt){let{announcements:le=E,container:Ge,hiddenTextDescribedById:pr,screenReaderInstructions:Fr=O}=Gt;const{announce:Gr,announcement:Or}=m(),cn=(0,w.Ld)("DndLiveRegion"),[mn,Bn]=(0,x.useState)(!1);if((0,x.useEffect)(()=>{Bn(!0)},[]),y((0,x.useMemo)(()=>({onDragStart(Zn){let{active:va}=Zn;Gr(le.onDragStart({active:va}))},onDragMove(Zn){let{active:va,over:ya}=Zn;le.onDragMove&&Gr(le.onDragMove({active:va,over:ya}))},onDragOver(Zn){let{active:va,over:ya}=Zn;Gr(le.onDragOver({active:va,over:ya}))},onDragEnd(Zn){let{active:va,over:ya}=Zn;Gr(le.onDragEnd({active:va,over:ya}))},onDragCancel(Zn){let{active:va,over:ya}=Zn;Gr(le.onDragCancel({active:va,over:ya}))}}),[Gr,le])),!mn)return null;const sa=x.createElement(x.Fragment,null,x.createElement(L,{id:pr,value:Fr.draggable}),x.createElement(p,{id:cn,announcement:Or}));return Ge?(0,k.createPortal)(sa,Ge):sa}var F;(function(Gt){Gt.DragStart="dragStart",Gt.DragMove="dragMove",Gt.DragEnd="dragEnd",Gt.DragCancel="dragCancel",Gt.DragOver="dragOver",Gt.RegisterDroppable="registerDroppable",Gt.SetDroppableDisabled="setDroppableDisabled",Gt.UnregisterDroppable="unregisterDroppable"})(F||(F={}));function W(){}function b(Gt,le){return(0,x.useMemo)(()=>({sensor:Gt,options:le!=null?le:{}}),[Gt,le])}function h(){for(var Gt=arguments.length,le=new Array(Gt),Ge=0;Ge<Gt;Ge++)le[Ge]=arguments[Ge];return(0,x.useMemo)(()=>[...le].filter(pr=>pr!=null),[...le])}const K=Object.freeze({x:0,y:0});function U(Gt,le){return Math.sqrt(Math.pow(Gt.x-le.x,2)+Math.pow(Gt.y-le.y,2))}function Y(Gt,le){const Ge=getEventCoordinates(Gt);if(!Ge)return"0 0";const pr={x:(Ge.x-le.left)/le.width*100,y:(Ge.y-le.top)/le.height*100};return pr.x+"% "+pr.y+"%"}function Z(Gt,le){let{data:{value:Ge}}=Gt,{data:{value:pr}}=le;return Ge-pr}function H(Gt,le){let{data:{value:Ge}}=Gt,{data:{value:pr}}=le;return pr-Ge}function q(Gt){let{left:le,top:Ge,height:pr,width:Fr}=Gt;return[{x:le,y:Ge},{x:le+Fr,y:Ge},{x:le,y:Ge+pr},{x:le+Fr,y:Ge+pr}]}function Q(Gt,le){if(!Gt||Gt.length===0)return null;const[Ge]=Gt;return le?Ge[le]:Ge}function J(Gt,le,Ge){return le===void 0&&(le=Gt.left),Ge===void 0&&(Ge=Gt.top),{x:le+Gt.width*.5,y:Ge+Gt.height*.5}}const ft=Gt=>{let{collisionRect:le,droppableRects:Ge,droppableContainers:pr}=Gt;const Fr=J(le,le.left,le.top),Gr=[];for(const Or of pr){const{id:cn}=Or,mn=Ge.get(cn);if(mn){const Bn=U(J(mn),Fr);Gr.push({id:cn,data:{droppableContainer:Or,value:Bn}})}}return Gr.sort(Z)},nt=Gt=>{let{collisionRect:le,droppableRects:Ge,droppableContainers:pr}=Gt;const Fr=q(le),Gr=[];for(const Or of pr){const{id:cn}=Or,mn=Ge.get(cn);if(mn){const Bn=q(mn),sa=Fr.reduce((va,ya,vi)=>va+U(Bn[vi],ya),0),Zn=Number((sa/4).toFixed(4));Gr.push({id:cn,data:{droppableContainer:Or,value:Zn}})}}return Gr.sort(Z)};function yt(Gt,le){const Ge=Math.max(le.top,Gt.top),pr=Math.max(le.left,Gt.left),Fr=Math.min(le.left+le.width,Gt.left+Gt.width),Gr=Math.min(le.top+le.height,Gt.top+Gt.height),Or=Fr-pr,cn=Gr-Ge;if(pr<Fr&&Ge<Gr){const mn=le.width*le.height,Bn=Gt.width*Gt.height,sa=Or*cn,Zn=sa/(mn+Bn-sa);return Number(Zn.toFixed(4))}return 0}const gt=Gt=>{let{collisionRect:le,droppableRects:Ge,droppableContainers:pr}=Gt;const Fr=[];for(const Gr of pr){const{id:Or}=Gr,cn=Ge.get(Or);if(cn){const mn=yt(cn,le);mn>0&&Fr.push({id:Or,data:{droppableContainer:Gr,value:mn}})}}return Fr.sort(H)};function zt(Gt,le){const{top:Ge,left:pr,bottom:Fr,right:Gr}=le;return Ge<=Gt.y&&Gt.y<=Fr&&pr<=Gt.x&&Gt.x<=Gr}const Mt=Gt=>{let{droppableContainers:le,droppableRects:Ge,pointerCoordinates:pr}=Gt;if(!pr)return[];const Fr=[];for(const Gr of le){const{id:Or}=Gr,cn=Ge.get(Or);if(cn&&zt(pr,cn)){const Bn=q(cn).reduce((Zn,va)=>Zn+U(pr,va),0),sa=Number((Bn/4).toFixed(4));Fr.push({id:Or,data:{droppableContainer:Gr,value:sa}})}}return Fr.sort(Z)};function Ct(Gt,le,Ge){return yo(Da({},Gt),{scaleX:le&&Ge?le.width/Ge.width:1,scaleY:le&&Ge?le.height/Ge.height:1})}function rt(Gt,le){return Gt&&le?{x:Gt.left-le.left,y:Gt.top-le.top}:K}function ot(Gt){return function(Ge){for(var pr=arguments.length,Fr=new Array(pr>1?pr-1:0),Gr=1;Gr<pr;Gr++)Fr[Gr-1]=arguments[Gr];return Fr.reduce((Or,cn)=>yo(Da({},Or),{top:Or.top+Gt*cn.y,bottom:Or.bottom+Gt*cn.y,left:Or.left+Gt*cn.x,right:Or.right+Gt*cn.x}),Da({},Ge))}}const Tt=ot(1);function Rt(Gt){if(Gt.startsWith("matrix3d(")){const le=Gt.slice(9,-1).split(/, /);return{x:+le[12],y:+le[13],scaleX:+le[0],scaleY:+le[5]}}else if(Gt.startsWith("matrix(")){const le=Gt.slice(7,-1).split(/, /);return{x:+le[4],y:+le[5],scaleX:+le[0],scaleY:+le[3]}}return null}function st(Gt,le,Ge){const pr=Rt(le);if(!pr)return Gt;const{scaleX:Fr,scaleY:Gr,x:Or,y:cn}=pr,mn=Gt.left-Or-(1-Fr)*parseFloat(Ge),Bn=Gt.top-cn-(1-Gr)*parseFloat(Ge.slice(Ge.indexOf(" ")+1)),sa=Fr?Gt.width/Fr:Gt.width,Zn=Gr?Gt.height/Gr:Gt.height;return{width:sa,height:Zn,top:Bn,right:mn+sa,bottom:Bn+Zn,left:mn}}const bt={ignoreTransform:!1};function Ft(Gt,le){le===void 0&&(le=bt);let Ge=Gt.getBoundingClientRect();if(le.ignoreTransform){const{transform:Bn,transformOrigin:sa}=(0,w.Jj)(Gt).getComputedStyle(Gt);Bn&&(Ge=st(Ge,Bn,sa))}const{top:pr,left:Fr,width:Gr,height:Or,bottom:cn,right:mn}=Ge;return{top:pr,left:Fr,width:Gr,height:Or,bottom:cn,right:mn}}function Ht(Gt){return Ft(Gt,{ignoreTransform:!0})}function _t(Gt){const le=Gt.innerWidth,Ge=Gt.innerHeight;return{top:0,left:0,right:le,bottom:Ge,width:le,height:Ge}}function Xt(Gt,le){return le===void 0&&(le=(0,w.Jj)(Gt).getComputedStyle(Gt)),le.position==="fixed"}function ee(Gt,le){le===void 0&&(le=(0,w.Jj)(Gt).getComputedStyle(Gt));const Ge=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(Fr=>{const Gr=le[Fr];return typeof Gr=="string"?Ge.test(Gr):!1})}function se(Gt,le){const Ge=[];function pr(Fr){if(le!=null&&Ge.length>=le||!Fr)return Ge;if((0,w.qk)(Fr)&&Fr.scrollingElement!=null&&!Ge.includes(Fr.scrollingElement))return Ge.push(Fr.scrollingElement),Ge;if(!(0,w.Re)(Fr)||(0,w.vZ)(Fr)||Ge.includes(Fr))return Ge;const Gr=(0,w.Jj)(Gt).getComputedStyle(Fr);return Fr!==Gt&&ee(Fr,Gr)&&Ge.push(Fr),Xt(Fr,Gr)?Ge:pr(Fr.parentNode)}return Gt?pr(Gt):Ge}function ue(Gt){const[le]=se(Gt,1);return le!=null?le:null}function Ut(Gt){return!w.Nq||!Gt?null:(0,w.FJ)(Gt)?Gt:(0,w.UG)(Gt)?(0,w.qk)(Gt)||Gt===(0,w.r3)(Gt).scrollingElement?window:(0,w.Re)(Gt)?Gt:null:null}function oe(Gt){return(0,w.FJ)(Gt)?Gt.scrollX:Gt.scrollLeft}function Pe(Gt){return(0,w.FJ)(Gt)?Gt.scrollY:Gt.scrollTop}function te(Gt){return{x:oe(Gt),y:Pe(Gt)}}var ve;(function(Gt){Gt[Gt.Forward=1]="Forward",Gt[Gt.Backward=-1]="Backward"})(ve||(ve={}));function Ue(Gt){return!w.Nq||!Gt?!1:Gt===document.scrollingElement}function xe(Gt){const le={x:0,y:0},Ge=Ue(Gt)?{height:window.innerHeight,width:window.innerWidth}:{height:Gt.clientHeight,width:Gt.clientWidth},pr={x:Gt.scrollWidth-Ge.width,y:Gt.scrollHeight-Ge.height},Fr=Gt.scrollTop<=le.y,Gr=Gt.scrollLeft<=le.x,Or=Gt.scrollTop>=pr.y,cn=Gt.scrollLeft>=pr.x;return{isTop:Fr,isLeft:Gr,isBottom:Or,isRight:cn,maxScroll:pr,minScroll:le}}const Re={x:.2,y:.2};function de(Gt,le,Ge,pr,Fr){let{top:Gr,left:Or,right:cn,bottom:mn}=Ge;pr===void 0&&(pr=10),Fr===void 0&&(Fr=Re);const{isTop:Bn,isBottom:sa,isLeft:Zn,isRight:va}=xe(Gt),ya={x:0,y:0},vi={x:0,y:0},Ma={height:le.height*Fr.y,width:le.width*Fr.x};return!Bn&&Gr<=le.top+Ma.height?(ya.y=ve.Backward,vi.y=pr*Math.abs((le.top+Ma.height-Gr)/Ma.height)):!sa&&mn>=le.bottom-Ma.height&&(ya.y=ve.Forward,vi.y=pr*Math.abs((le.bottom-Ma.height-mn)/Ma.height)),!va&&cn>=le.right-Ma.width?(ya.x=ve.Forward,vi.x=pr*Math.abs((le.right-Ma.width-cn)/Ma.width)):!Zn&&Or<=le.left+Ma.width&&(ya.x=ve.Backward,vi.x=pr*Math.abs((le.left+Ma.width-Or)/Ma.width)),{direction:ya,speed:vi}}function ht(Gt){if(Gt===document.scrollingElement){const{innerWidth:Gr,innerHeight:Or}=window;return{top:0,left:0,right:Gr,bottom:Or,width:Gr,height:Or}}const{top:le,left:Ge,right:pr,bottom:Fr}=Gt.getBoundingClientRect();return{top:le,left:Ge,right:pr,bottom:Fr,width:Gt.clientWidth,height:Gt.clientHeight}}function ae(Gt){return Gt.reduce((le,Ge)=>(0,w.IH)(le,te(Ge)),K)}function Le(Gt){return Gt.reduce((le,Ge)=>le+oe(Ge),0)}function Ze(Gt){return Gt.reduce((le,Ge)=>le+Pe(Ge),0)}function qe(Gt,le){if(le===void 0&&(le=Ft),!Gt)return;const{top:Ge,left:pr,bottom:Fr,right:Gr}=le(Gt);ue(Gt)&&(Fr<=0||Gr<=0||Ge>=window.innerHeight||pr>=window.innerWidth)&&Gt.scrollIntoView({block:"center",inline:"center"})}const fr=[["x",["left","right"],Le],["y",["top","bottom"],Ze]];class ur{constructor(le,Ge){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const pr=se(Ge),Fr=ae(pr);this.rect=Da({},le),this.width=le.width,this.height=le.height;for(const[Gr,Or,cn]of fr)for(const mn of Or)Object.defineProperty(this,mn,{get:()=>{const Bn=cn(pr),sa=Fr[Gr]-Bn;return this.rect[mn]+sa},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class kr{constructor(le){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(Ge=>{var pr;return(pr=this.target)==null?void 0:pr.removeEventListener(...Ge)})},this.target=le}add(le,Ge,pr){var Fr;(Fr=this.target)==null||Fr.addEventListener(le,Ge,pr),this.listeners.push([le,Ge,pr])}}function yn(Gt){const{EventTarget:le}=(0,w.Jj)(Gt);return Gt instanceof le?Gt:(0,w.r3)(Gt)}function un(Gt,le){const Ge=Math.abs(Gt.x),pr=Math.abs(Gt.y);return typeof le=="number"?Math.sqrt(Rv(Ge,2)+Rv(pr,2))>le:"x"in le&&"y"in le?Ge>le.x&&pr>le.y:"x"in le?Ge>le.x:"y"in le?pr>le.y:!1}var Vr;(function(Gt){Gt.Click="click",Gt.DragStart="dragstart",Gt.Keydown="keydown",Gt.ContextMenu="contextmenu",Gt.Resize="resize",Gt.SelectionChange="selectionchange",Gt.VisibilityChange="visibilitychange"})(Vr||(Vr={}));function $e(Gt){Gt.preventDefault()}function dr(Gt){Gt.stopPropagation()}var ar;(function(Gt){Gt.Space="Space",Gt.Down="ArrowDown",Gt.Right="ArrowRight",Gt.Left="ArrowLeft",Gt.Up="ArrowUp",Gt.Esc="Escape",Gt.Enter="Enter"})(ar||(ar={}));const Qe={start:[ar.Space,ar.Enter],cancel:[ar.Esc],end:[ar.Space,ar.Enter]},Pr=(Gt,le)=>{let{currentCoordinates:Ge}=le;switch(Gt.code){case ar.Right:return yo(Da({},Ge),{x:Ge.x+25});case ar.Left:return yo(Da({},Ge),{x:Ge.x-25});case ar.Down:return yo(Da({},Ge),{y:Ge.y+25});case ar.Up:return yo(Da({},Ge),{y:Ge.y-25})}};class Zr{constructor(le){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=le;const{event:{target:Ge}}=le;this.props=le,this.listeners=new kr((0,w.r3)(Ge)),this.windowListeners=new kr((0,w.Jj)(Ge)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vr.Resize,this.handleCancel),this.windowListeners.add(Vr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:le,onStart:Ge}=this.props,pr=le.node.current;pr&&qe(pr),Ge(K)}handleKeyDown(le){if((0,w.vd)(le)){const{active:Ge,context:pr,options:Fr}=this.props,{keyboardCodes:Gr=Qe,coordinateGetter:Or=Pr,scrollBehavior:cn="smooth"}=Fr,{code:mn}=le;if(Gr.end.includes(mn)){this.handleEnd(le);return}if(Gr.cancel.includes(mn)){this.handleCancel(le);return}const{collisionRect:Bn}=pr.current,sa=Bn?{x:Bn.left,y:Bn.top}:K;this.referenceCoordinates||(this.referenceCoordinates=sa);const Zn=Or(le,{active:Ge,context:pr.current,currentCoordinates:sa});if(Zn){const va=(0,w.$X)(Zn,sa),ya={x:0,y:0},{scrollableAncestors:vi}=pr.current;for(const Ma of vi){const oa=le.code,{isTop:oi,isRight:$a,isLeft:za,isBottom:Ui,maxScroll:di,minScroll:La}=xe(Ma),ja=ht(Ma),Ga={x:Math.min(oa===ar.Right?ja.right-ja.width/2:ja.right,Math.max(oa===ar.Right?ja.left:ja.left+ja.width/2,Zn.x)),y:Math.min(oa===ar.Down?ja.bottom-ja.height/2:ja.bottom,Math.max(oa===ar.Down?ja.top:ja.top+ja.height/2,Zn.y))},bi=oa===ar.Right&&!$a||oa===ar.Left&&!za,xi=oa===ar.Down&&!Ui||oa===ar.Up&&!oi;if(bi&&Ga.x!==Zn.x){const ki=Ma.scrollLeft+va.x,ho=oa===ar.Right&&ki<=di.x||oa===ar.Left&&ki>=La.x;if(ho&&!va.y){Ma.scrollTo({left:ki,behavior:cn});return}ho?ya.x=Ma.scrollLeft-ki:ya.x=oa===ar.Right?Ma.scrollLeft-di.x:Ma.scrollLeft-La.x,ya.x&&Ma.scrollBy({left:-ya.x,behavior:cn});break}else if(xi&&Ga.y!==Zn.y){const ki=Ma.scrollTop+va.y,ho=oa===ar.Down&&ki<=di.y||oa===ar.Up&&ki>=La.y;if(ho&&!va.x){Ma.scrollTo({top:ki,behavior:cn});return}ho?ya.y=Ma.scrollTop-ki:ya.y=oa===ar.Down?Ma.scrollTop-di.y:Ma.scrollTop-La.y,ya.y&&Ma.scrollBy({top:-ya.y,behavior:cn});break}}this.handleMove(le,(0,w.IH)((0,w.$X)(Zn,this.referenceCoordinates),ya))}}}handleMove(le,Ge){const{onMove:pr}=this.props;le.preventDefault(),pr(Ge)}handleEnd(le){const{onEnd:Ge}=this.props;le.preventDefault(),this.detach(),Ge()}handleCancel(le){const{onCancel:Ge}=this.props;le.preventDefault(),this.detach(),Ge()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Zr.activators=[{eventName:"onKeyDown",handler:(Gt,le,Ge)=>{let{keyboardCodes:pr=Qe,onActivation:Fr}=le,{active:Gr}=Ge;const{code:Or}=Gt.nativeEvent;if(pr.start.includes(Or)){const cn=Gr.activatorNode.current;return cn&&Gt.target!==cn?!1:(Gt.preventDefault(),Fr==null||Fr({event:Gt.nativeEvent}),!0)}return!1}}];function qr(Gt){return!!(Gt&&"distance"in Gt)}function Sn(Gt){return!!(Gt&&"delay"in Gt)}class Yn{constructor(le,Ge,pr){var Fr;pr===void 0&&(pr=yn(le.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=le,this.events=Ge;const{event:Gr}=le,{target:Or}=Gr;this.props=le,this.events=Ge,this.document=(0,w.r3)(Or),this.documentListeners=new kr(this.document),this.listeners=new kr(pr),this.windowListeners=new kr((0,w.Jj)(Or)),this.initialCoordinates=(Fr=(0,w.DC)(Gr))!=null?Fr:K,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:le,props:{options:{activationConstraint:Ge}}}=this;if(this.listeners.add(le.move.name,this.handleMove,{passive:!1}),this.listeners.add(le.end.name,this.handleEnd),this.windowListeners.add(Vr.Resize,this.handleCancel),this.windowListeners.add(Vr.DragStart,$e),this.windowListeners.add(Vr.VisibilityChange,this.handleCancel),this.windowListeners.add(Vr.ContextMenu,$e),this.documentListeners.add(Vr.Keydown,this.handleKeydown),Ge){if(qr(Ge))return;if(Sn(Ge)){this.timeoutId=setTimeout(this.handleStart,Ge.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:le}=this,{onStart:Ge}=this.props;le&&(this.activated=!0,this.documentListeners.add(Vr.Click,dr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vr.SelectionChange,this.removeTextSelection),Ge(le))}handleMove(le){var Ge;const{activated:pr,initialCoordinates:Fr,props:Gr}=this,{onMove:Or,options:{activationConstraint:cn}}=Gr;if(!Fr)return;const mn=(Ge=(0,w.DC)(le))!=null?Ge:K,Bn=(0,w.$X)(Fr,mn);if(!pr&&cn){if(Sn(cn))return un(Bn,cn.tolerance)?this.handleCancel():void 0;if(qr(cn))return cn.tolerance!=null&&un(Bn,cn.tolerance)?this.handleCancel():un(Bn,cn.distance)?this.handleStart():void 0}le.cancelable&&le.preventDefault(),Or(mn)}handleEnd(){const{onEnd:le}=this.props;this.detach(),le()}handleCancel(){const{onCancel:le}=this.props;this.detach(),le()}handleKeydown(le){le.code===ar.Esc&&this.handleCancel()}removeTextSelection(){var le;(le=this.document.getSelection())==null||le.removeAllRanges()}}const Ir={move:{name:"pointermove"},end:{name:"pointerup"}};class Br extends Yn{constructor(le){const{event:Ge}=le,pr=(0,w.r3)(Ge.target);super(le,Ir,pr)}}Br.activators=[{eventName:"onPointerDown",handler:(Gt,le)=>{let{nativeEvent:Ge}=Gt,{onActivation:pr}=le;return!Ge.isPrimary||Ge.button!==0?!1:(pr==null||pr({event:Ge}),!0)}}];const en={move:{name:"mousemove"},end:{name:"mouseup"}};var hn;(function(Gt){Gt[Gt.RightClick=2]="RightClick"})(hn||(hn={}));class xn extends Yn{constructor(le){super(le,en,(0,w.r3)(le.event.target))}}xn.activators=[{eventName:"onMouseDown",handler:(Gt,le)=>{let{nativeEvent:Ge}=Gt,{onActivation:pr}=le;return Ge.button===hn.RightClick?!1:(pr==null||pr({event:Ge}),!0)}}];const _n={move:{name:"touchmove"},end:{name:"touchend"}};class tt extends Yn{constructor(le){super(le,_n)}static setup(){return window.addEventListener(_n.move.name,le,{capture:!1,passive:!1}),function(){window.removeEventListener(_n.move.name,le)};function le(){}}}tt.activators=[{eventName:"onTouchStart",handler:(Gt,le)=>{let{nativeEvent:Ge}=Gt,{onActivation:pr}=le;const{touches:Fr}=Ge;return Fr.length>1?!1:(pr==null||pr({event:Ge}),!0)}}];var ir;(function(Gt){Gt[Gt.Pointer=0]="Pointer",Gt[Gt.DraggableRect=1]="DraggableRect"})(ir||(ir={}));var jt;(function(Gt){Gt[Gt.TreeOrder=0]="TreeOrder",Gt[Gt.ReversedTreeOrder=1]="ReversedTreeOrder"})(jt||(jt={}));function Qt(Gt){let{acceleration:le,activator:Ge=ir.Pointer,canScroll:pr,draggingRect:Fr,enabled:Gr,interval:Or=5,order:cn=jt.TreeOrder,pointerCoordinates:mn,scrollableAncestors:Bn,scrollableAncestorRects:sa,delta:Zn,threshold:va}=Gt;const ya=we({delta:Zn,disabled:!Gr}),[vi,Ma]=(0,w.Yz)(),oa=(0,x.useRef)({x:0,y:0}),oi=(0,x.useRef)({x:0,y:0}),$a=(0,x.useMemo)(()=>{switch(Ge){case ir.Pointer:return mn?{top:mn.y,bottom:mn.y,left:mn.x,right:mn.x}:null;case ir.DraggableRect:return Fr}},[Ge,Fr,mn]),za=(0,x.useRef)(null),Ui=(0,x.useCallback)(()=>{const La=za.current;if(!La)return;const ja=oa.current.x*oi.current.x,Ga=oa.current.y*oi.current.y;La.scrollBy(ja,Ga)},[]),di=(0,x.useMemo)(()=>cn===jt.TreeOrder?[...Bn].reverse():Bn,[cn,Bn]);(0,x.useEffect)(()=>{if(!Gr||!Bn.length||!$a){Ma();return}for(const La of di){if((pr==null?void 0:pr(La))===!1)continue;const ja=Bn.indexOf(La),Ga=sa[ja];if(!Ga)continue;const{direction:bi,speed:xi}=de(La,Ga,$a,le,va);for(const ki of["x","y"])ya[ki][bi[ki]]||(xi[ki]=0,bi[ki]=0);if(xi.x>0||xi.y>0){Ma(),za.current=La,vi(Ui,Or),oa.current=xi,oi.current=bi;return}}oa.current={x:0,y:0},oi.current={x:0,y:0},Ma()},[le,Ui,pr,Ma,Gr,Or,JSON.stringify($a),JSON.stringify(ya),vi,Bn,di,sa,JSON.stringify(va)])}const Et={x:{[ve.Backward]:!1,[ve.Forward]:!1},y:{[ve.Backward]:!1,[ve.Forward]:!1}};function we(Gt){let{delta:le,disabled:Ge}=Gt;const pr=(0,w.D9)(le);return(0,w.Gj)(Fr=>{if(Ge||!pr||!Fr)return Et;const Gr={x:Math.sign(le.x-pr.x),y:Math.sign(le.y-pr.y)};return{x:{[ve.Backward]:Fr.x[ve.Backward]||Gr.x===-1,[ve.Forward]:Fr.x[ve.Forward]||Gr.x===1},y:{[ve.Backward]:Fr.y[ve.Backward]||Gr.y===-1,[ve.Forward]:Fr.y[ve.Forward]||Gr.y===1}}},[Ge,le,pr])}function Ot(Gt,le){const Ge=le!==null?Gt.get(le):void 0,pr=Ge?Ge.node.current:null;return(0,w.Gj)(Fr=>{var Gr;return le===null?null:(Gr=pr!=null?pr:Fr)!=null?Gr:null},[pr,le])}function Kt(Gt,le){return(0,x.useMemo)(()=>Gt.reduce((Ge,pr)=>{const{sensor:Fr}=pr,Gr=Fr.activators.map(Or=>({eventName:Or.eventName,handler:le(Or.handler,pr)}));return[...Ge,...Gr]},[]),[Gt,le])}var dt;(function(Gt){Gt[Gt.Always=0]="Always",Gt[Gt.BeforeDragging=1]="BeforeDragging",Gt[Gt.WhileDragging=2]="WhileDragging"})(dt||(dt={}));var Bt;(function(Gt){Gt.Optimized="optimized"})(Bt||(Bt={}));const $=new Map;function at(Gt,le){let{dragging:Ge,dependencies:pr,config:Fr}=le;const[Gr,Or]=(0,x.useState)(null),{frequency:cn,measure:mn,strategy:Bn}=Fr,sa=(0,x.useRef)(Gt),Zn=oa(),va=(0,w.Ey)(Zn),ya=(0,x.useCallback)(function(oi){oi===void 0&&(oi=[]),!va.current&&Or($a=>$a===null?oi:$a.concat(oi.filter(za=>!$a.includes(za))))},[va]),vi=(0,x.useRef)(null),Ma=(0,w.Gj)(oi=>{if(Zn&&!Ge)return $;if(!oi||oi===$||sa.current!==Gt||Gr!=null){const $a=new Map;for(let za of Gt){if(!za)continue;if(Gr&&Gr.length>0&&!Gr.includes(za.id)&&za.rect.current){$a.set(za.id,za.rect.current);continue}const Ui=za.node.current,di=Ui?new ur(mn(Ui),Ui):null;za.rect.current=di,di&&$a.set(za.id,di)}return $a}return oi},[Gt,Gr,Ge,Zn,mn]);return(0,x.useEffect)(()=>{sa.current=Gt},[Gt]),(0,x.useEffect)(()=>{Zn||ya()},[Ge,Zn]),(0,x.useEffect)(()=>{Gr&&Gr.length>0&&Or(null)},[JSON.stringify(Gr)]),(0,x.useEffect)(()=>{Zn||typeof cn!="number"||vi.current!==null||(vi.current=setTimeout(()=>{ya(),vi.current=null},cn))},[cn,Zn,ya,...pr]),{droppableRects:Ma,measureDroppableContainers:ya,measuringScheduled:Gr!=null};function oa(){switch(Bn){case dt.Always:return!1;case dt.BeforeDragging:return Ge;default:return!Ge}}}function R(Gt,le){return(0,w.Gj)(Ge=>Gt?Ge||(typeof le=="function"?le(Gt):Gt):null,[le,Gt])}function M(Gt,le){return R(Gt,le)}function A(Gt){let{callback:le,disabled:Ge}=Gt;const pr=(0,w.zX)(le),Fr=(0,x.useMemo)(()=>{if(Ge||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:Gr}=window;return new Gr(pr)},[pr,Ge]);return(0,x.useEffect)(()=>()=>Fr==null?void 0:Fr.disconnect(),[Fr]),Fr}function X(Gt){let{callback:le,disabled:Ge}=Gt;const pr=(0,w.zX)(le),Fr=(0,x.useMemo)(()=>{if(Ge||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:Gr}=window;return new Gr(pr)},[Ge]);return(0,x.useEffect)(()=>()=>Fr==null?void 0:Fr.disconnect(),[Fr]),Fr}function mt(Gt){return new ur(Ft(Gt),Gt)}function Lt(Gt,le,Ge){le===void 0&&(le=mt);const[pr,Fr]=(0,x.useReducer)(cn,null),Gr=A({callback(mn){if(Gt)for(const Bn of mn){const{type:sa,target:Zn}=Bn;if(sa==="childList"&&Zn instanceof HTMLElement&&Zn.contains(Gt)){Fr();break}}}}),Or=X({callback:Fr});return(0,w.LI)(()=>{Fr(),Gt?(Or==null||Or.observe(Gt),Gr==null||Gr.observe(document.body,{childList:!0,subtree:!0})):(Or==null||Or.disconnect(),Gr==null||Gr.disconnect())},[Gt]),pr;function cn(mn){if(!Gt)return null;if(Gt.isConnected===!1){var Bn;return(Bn=mn!=null?mn:Ge)!=null?Bn:null}const sa=le(Gt);return JSON.stringify(mn)===JSON.stringify(sa)?mn:sa}}function Pt(Gt){const le=R(Gt);return rt(Gt,le)}const Jt=[];function Ie(Gt){const le=(0,x.useRef)(Gt),Ge=(0,w.Gj)(pr=>Gt?pr&&pr!==Jt&&Gt&&le.current&&Gt.parentNode===le.current.parentNode?pr:se(Gt):Jt,[Gt]);return(0,x.useEffect)(()=>{le.current=Gt},[Gt]),Ge}function pe(Gt){const[le,Ge]=(0,x.useState)(null),pr=(0,x.useRef)(Gt),Fr=(0,x.useCallback)(Gr=>{const Or=Ut(Gr.target);Or&&Ge(cn=>cn?(cn.set(Or,te(Or)),new Map(cn)):null)},[]);return(0,x.useEffect)(()=>{const Gr=pr.current;if(Gt!==Gr){Or(Gr);const cn=Gt.map(mn=>{const Bn=Ut(mn);return Bn?(Bn.addEventListener("scroll",Fr,{passive:!0}),[Bn,te(Bn)]):null}).filter(mn=>mn!=null);Ge(cn.length?new Map(cn):null),pr.current=Gt}return()=>{Or(Gt),Or(Gr)};function Or(cn){cn.forEach(mn=>{const Bn=Ut(mn);Bn==null||Bn.removeEventListener("scroll",Fr)})}},[Fr,Gt]),(0,x.useMemo)(()=>Gt.length?le?Array.from(le.values()).reduce((Gr,Or)=>(0,w.IH)(Gr,Or),K):ae(Gt):K,[Gt,le])}function je(Gt,le){le===void 0&&(le=[]);const Ge=(0,x.useRef)(null);return(0,x.useEffect)(()=>{Ge.current=null},le),(0,x.useEffect)(()=>{const pr=Gt!==K;pr&&!Ge.current&&(Ge.current=Gt),!pr&&Ge.current&&(Ge.current=null)},[Gt]),Ge.current?(0,w.$X)(Gt,Ge.current):K}function br(Gt){(0,x.useEffect)(()=>{if(!w.Nq)return;const le=Gt.map(Ge=>{let{sensor:pr}=Ge;return pr.setup==null?void 0:pr.setup()});return()=>{for(const Ge of le)Ge==null||Ge()}},Gt.map(le=>{let{sensor:Ge}=le;return Ge}))}function Je(Gt,le){return(0,x.useMemo)(()=>Gt.reduce((Ge,pr)=>{let{eventName:Fr,handler:Gr}=pr;return Ge[Fr]=Or=>{Gr(Or,le)},Ge},{}),[Gt,le])}function zr(Gt){return(0,x.useMemo)(()=>Gt?_t(Gt):null,[Gt])}const gn=[];function tr(Gt,le){le===void 0&&(le=Ft);const[Ge]=Gt,pr=zr(Ge?(0,w.Jj)(Ge):null),[Fr,Gr]=(0,x.useReducer)(cn,gn),Or=X({callback:Gr});return Gt.length>0&&Fr===gn&&Gr(),(0,w.LI)(()=>{Gt.length?Gt.forEach(mn=>Or==null?void 0:Or.observe(mn)):(Or==null||Or.disconnect(),Gr())},[Gt]),Fr;function cn(){return Gt.length?Gt.map(mn=>Ue(mn)?pr:new ur(le(mn),mn)):gn}}function xr(Gt){if(!Gt)return null;if(Gt.children.length>1)return Gt;const le=Gt.children[0];return(0,w.Re)(le)?le:Gt}function Ur(Gt){let{measure:le}=Gt;const[Ge,pr]=(0,x.useState)(null),Fr=(0,x.useCallback)(Bn=>{for(const{target:sa}of Bn)if((0,w.Re)(sa)){pr(Zn=>{const va=le(sa);return Zn?yo(Da({},Zn),{width:va.width,height:va.height}):va});break}},[le]),Gr=X({callback:Fr}),Or=(0,x.useCallback)(Bn=>{const sa=xr(Bn);Gr==null||Gr.disconnect(),sa&&(Gr==null||Gr.observe(sa)),pr(sa?le(sa):null)},[le,Gr]),[cn,mn]=(0,w.wm)(Or);return(0,x.useMemo)(()=>({nodeRef:cn,rect:Ge,setRef:mn}),[Ge,cn,mn])}const Nr=[{sensor:Br,options:{}},{sensor:Zr,options:{}}],fe={current:{}},Wt={draggable:{measure:Ht},droppable:{measure:Ht,strategy:dt.WhileDragging,frequency:Bt.Optimized},dragOverlay:{measure:Ft}};class ge extends Map{get(le){var Ge;return le!=null&&(Ge=super.get(le))!=null?Ge:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(le=>{let{disabled:Ge}=le;return!Ge})}getNodeFor(le){var Ge,pr;return(Ge=(pr=this.get(le))==null?void 0:pr.node.current)!=null?Ge:void 0}}const Ae={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ge,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:W},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Wt,measureDroppableContainers:W,windowRect:null,measuringScheduled:!1},Se={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:W,draggableNodes:new Map,over:null,measureDroppableContainers:W},Be=(0,x.createContext)(Se),vr=(0,x.createContext)(Ae);function Mr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ge}}}function fn(Gt,le){switch(le.type){case F.DragStart:return yo(Da({},Gt),{draggable:yo(Da({},Gt.draggable),{initialCoordinates:le.initialCoordinates,active:le.active})});case F.DragMove:return Gt.draggable.active?yo(Da({},Gt),{draggable:yo(Da({},Gt.draggable),{translate:{x:le.coordinates.x-Gt.draggable.initialCoordinates.x,y:le.coordinates.y-Gt.draggable.initialCoordinates.y}})}):Gt;case F.DragEnd:case F.DragCancel:return yo(Da({},Gt),{draggable:yo(Da({},Gt.draggable),{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case F.RegisterDroppable:{const{element:Ge}=le,{id:pr}=Ge,Fr=new ge(Gt.droppable.containers);return Fr.set(pr,Ge),yo(Da({},Gt),{droppable:yo(Da({},Gt.droppable),{containers:Fr})})}case F.SetDroppableDisabled:{const{id:Ge,key:pr,disabled:Fr}=le,Gr=Gt.droppable.containers.get(Ge);if(!Gr||pr!==Gr.key)return Gt;const Or=new ge(Gt.droppable.containers);return Or.set(Ge,yo(Da({},Gr),{disabled:Fr})),yo(Da({},Gt),{droppable:yo(Da({},Gt.droppable),{containers:Or})})}case F.UnregisterDroppable:{const{id:Ge,key:pr}=le,Fr=Gt.droppable.containers.get(Ge);if(!Fr||pr!==Fr.key)return Gt;const Gr=new ge(Gt.droppable.containers);return Gr.delete(Ge),yo(Da({},Gt),{droppable:yo(Da({},Gt.droppable),{containers:Gr})})}default:return Gt}}function Xn(Gt){let{disabled:le}=Gt;const{active:Ge,activatorEvent:pr,draggableNodes:Fr}=(0,x.useContext)(Be),Gr=(0,w.D9)(pr),Or=(0,w.D9)(Ge==null?void 0:Ge.id);return(0,x.useEffect)(()=>{if(!le&&!pr&&Gr&&Or!=null){if(!(0,w.vd)(Gr)||document.activeElement===Gr.target)return;const cn=Fr.get(Or);if(!cn)return;const{activatorNode:mn,node:Bn}=cn;if(!mn.current&&!Bn.current)return;requestAnimationFrame(()=>{for(const sa of[mn.current,Bn.current]){if(!sa)continue;const Zn=(0,w.so)(sa);if(Zn){Zn.focus();break}}})}},[pr,le,Fr,Or,Gr]),null}function Mn(Gt,le){let Fr=le,{transform:Ge}=Fr,pr=Ih(Fr,["transform"]);return Gt!=null&&Gt.length?Gt.reduce((Gr,Or)=>Or(Da({transform:Gr},pr)),Ge):Ge}function qn(Gt){return(0,x.useMemo)(()=>({draggable:Da(Da({},Wt.draggable),Gt==null?void 0:Gt.draggable),droppable:Da(Da({},Wt.droppable),Gt==null?void 0:Gt.droppable),dragOverlay:Da(Da({},Wt.dragOverlay),Gt==null?void 0:Gt.dragOverlay)}),[Gt==null?void 0:Gt.draggable,Gt==null?void 0:Gt.droppable,Gt==null?void 0:Gt.dragOverlay])}function bn(Gt){let{activeNode:le,measure:Ge,initialRect:pr,config:Fr=!0}=Gt;const Gr=(0,x.useRef)(!1),{x:Or,y:cn}=typeof Fr=="boolean"?{x:Fr,y:Fr}:Fr;(0,w.LI)(()=>{if(!Or&&!cn||!le){Gr.current=!1;return}if(Gr.current||!pr)return;const Bn=le==null?void 0:le.node.current;if(!Bn||Bn.isConnected===!1)return;const sa=Ge(Bn),Zn=rt(sa,pr);if(Or||(Zn.x=0),cn||(Zn.y=0),Gr.current=!0,Math.abs(Zn.x)>0||Math.abs(Zn.y)>0){const va=ue(Bn);va&&va.scrollBy({top:Zn.y,left:Zn.x})}},[le,Or,cn,pr,Ge])}const Vn=(0,x.createContext)(yo(Da({},K),{scaleX:1,scaleY:1}));var ca;(function(Gt){Gt[Gt.Uninitialized=0]="Uninitialized",Gt[Gt.Initializing=1]="Initializing",Gt[Gt.Initialized=2]="Initialized"})(ca||(ca={}));const xa=(0,x.memo)(function(le){var Ge,pr,Fr,Gr;let Au=le,{id:Or,accessibility:cn,autoScroll:mn=!0,children:Bn,sensors:sa=Nr,collisionDetection:Zn=gt,measuring:va,modifiers:ya}=Au,vi=Ih(Au,["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const Ma=(0,x.useReducer)(fn,void 0,Mr),[oa,oi]=Ma,[$a,za]=g(),[Ui,di]=(0,x.useState)(ca.Uninitialized),La=Ui===ca.Initialized,{draggable:{active:ja,nodes:Ga,translate:bi},droppable:{containers:xi}}=oa,ki=ja?Ga.get(ja):null,ho=(0,x.useRef)({initial:null,translated:null}),Wi=(0,x.useMemo)(()=>{var Uo;return ja!=null?{id:ja,data:(Uo=ki==null?void 0:ki.data)!=null?Uo:fe,rect:ho}:null},[ja,ki]),Io=(0,x.useRef)(null),[Xo,is]=(0,x.useState)(null),[$i,qa]=(0,x.useState)(null),Yi=(0,w.Ey)(vi,Object.values(vi)),oo=(0,w.Ld)("DndDescribedBy",Or),Qa=(0,x.useMemo)(()=>xi.getEnabled(),[xi]),Li=qn(va),{droppableRects:zo,measureDroppableContainers:qi,measuringScheduled:ts}=at(Qa,{dragging:La,dependencies:[bi.x,bi.y],config:Li.droppable}),Xi=Ot(Ga,ja),xo=(0,x.useMemo)(()=>$i?(0,w.DC)($i):null,[$i]),gs=Tu(),fs=M(Xi,Li.draggable.measure);bn({activeNode:ja?Ga.get(ja):null,config:gs.layoutShiftCompensation,initialRect:fs,measure:Li.draggable.measure});const so=Lt(Xi,Li.draggable.measure,fs),ss=Lt(Xi?Xi.parentElement:null),cs=(0,x.useRef)({activatorEvent:null,active:null,activeNode:Xi,collisionRect:null,collisions:null,droppableRects:zo,draggableNodes:Ga,draggingNode:null,draggingNodeRect:null,droppableContainers:xi,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_s=xi.getNodeFor((Ge=cs.current.over)==null?void 0:Ge.id),jo=Ur({measure:Li.dragOverlay.measure}),$t=(pr=jo.nodeRef.current)!=null?pr:Xi,ye=La?(Fr=jo.rect)!=null?Fr:so:null,hr=!!(jo.nodeRef.current&&jo.rect),Er=Pt(hr?null:so),nn=zr($t?(0,w.Jj)($t):null),kn=Ie(La?_s!=null?_s:Xi:null),Qn=tr(kn),wa=Mn(ya,{transform:{x:bi.x-Er.x,y:bi.y-Er.y,scaleX:1,scaleY:1},activatorEvent:$i,active:Wi,activeNodeRect:so,containerNodeRect:ss,draggingNodeRect:ye,over:cs.current.over,overlayNodeRect:jo.rect,scrollableAncestors:kn,scrollableAncestorRects:Qn,windowRect:nn}),Ai=xo?(0,w.IH)(xo,bi):null,Oo=pe(kn),Go=je(Oo),Rs=je(Oo,[so]),Cs=(0,w.IH)(wa,Go),ji=ye?Tt(ye,wa):null,bo=Wi&&ji?Zn({active:Wi,collisionRect:ji,droppableRects:zo,droppableContainers:Qa,pointerCoordinates:Ai}):null,ks=Q(bo,"id"),[ls,qs]=(0,x.useState)(null),Qs=hr?wa:(0,w.IH)(wa,Rs),Js=Ct(Qs,(Gr=ls==null?void 0:ls.rect)!=null?Gr:null,so),Ws=(0,x.useCallback)((Uo,Eo)=>{let{sensor:os,options:d}=Eo;if(Io.current==null)return;const G=Ga.get(Io.current);if(!G)return;const wt=Uo.nativeEvent,kt=new os({active:Io.current,activeNode:G,event:wt,options:d,context:cs,onStart(he){const me=Io.current;if(me==null)return;const Oe=Ga.get(me);if(!Oe)return;const{onDragStart:Fe}=Yi.current,Ke={active:{id:me,data:Oe.data,rect:ho}};(0,k.unstable_batchedUpdates)(()=>{Fe==null||Fe(Ke),di(ca.Initializing),oi({type:F.DragStart,initialCoordinates:he,active:me}),$a({type:"onDragStart",event:Ke})})},onMove(he){oi({type:F.DragMove,coordinates:he})},onEnd:qt(F.DragEnd),onCancel:qt(F.DragCancel)});(0,k.unstable_batchedUpdates)(()=>{is(kt),qa(Uo.nativeEvent)});function qt(he){return function(){return Z0(this,null,function*(){const{active:Oe,collisions:Fe,over:Ke,scrollAdjustedTranslate:gr}=cs.current;let Kr=null;if(Oe&&gr){const{cancelDrop:Jr}=Yi.current;Kr={activatorEvent:wt,active:Oe,collisions:Fe,delta:gr,over:Ke},he===F.DragEnd&&typeof Jr=="function"&&(yield Promise.resolve(Jr(Kr)))&&(he=F.DragCancel)}Io.current=null,(0,k.unstable_batchedUpdates)(()=>{oi({type:he}),di(ca.Uninitialized),qs(null),is(null),qa(null);const Jr=he===F.DragEnd?"onDragEnd":"onDragCancel";if(Kr){const Qr=Yi.current[Jr];Qr==null||Qr(Kr),$a({type:Jr,event:Kr})}})})}}},[Ga]),Ds=(0,x.useCallback)((Uo,Eo)=>(os,d)=>{const G=os.nativeEvent,wt=Ga.get(d);if(Io.current!==null||!wt||G.dndKit||G.defaultPrevented)return;const kt={active:wt};Uo(os,Eo.options,kt)===!0&&(G.dndKit={capturedBy:Eo.sensor},Io.current=d,Ws(os,Eo))},[Ga,Ws]),Bs=Kt(sa,Ds);br(sa),(0,w.LI)(()=>{so&&Ui===ca.Initializing&&di(ca.Initialized)},[so,Ui]),(0,x.useEffect)(()=>{const{onDragMove:Uo}=Yi.current,{active:Eo,activatorEvent:os,collisions:d,over:G}=cs.current;if(!Eo||!os)return;const wt={active:Eo,activatorEvent:os,collisions:d,delta:{x:Cs.x,y:Cs.y},over:G};(0,k.unstable_batchedUpdates)(()=>{Uo==null||Uo(wt),$a({type:"onDragMove",event:wt})})},[Cs.x,Cs.y]),(0,x.useEffect)(()=>{const{active:Uo,activatorEvent:Eo,collisions:os,droppableContainers:d,scrollAdjustedTranslate:G}=cs.current;if(!Uo||Io.current==null||!Eo||!G)return;const{onDragOver:wt}=Yi.current,kt=d.get(ks),qt=kt&&kt.rect.current?{id:kt.id,rect:kt.rect.current,data:kt.data,disabled:kt.disabled}:null,he={active:Uo,activatorEvent:Eo,collisions:os,delta:{x:G.x,y:G.y},over:qt};(0,k.unstable_batchedUpdates)(()=>{qs(qt),wt==null||wt(he),$a({type:"onDragOver",event:he})})},[ks]),(0,w.LI)(()=>{cs.current={activatorEvent:$i,active:Wi,activeNode:Xi,collisionRect:ji,collisions:bo,droppableRects:zo,draggableNodes:Ga,draggingNode:$t,draggingNodeRect:ye,droppableContainers:xi,over:ls,scrollableAncestors:kn,scrollAdjustedTranslate:Cs},ho.current={initial:ye,translated:ji}},[Wi,Xi,bo,ji,Ga,$t,ye,zo,xi,ls,kn,Cs]),Qt(yo(Da({},gs),{delta:bi,draggingRect:ji,pointerCoordinates:Ai,scrollableAncestors:kn,scrollableAncestorRects:Qn}));const ms=(0,x.useMemo)(()=>({active:Wi,activeNode:Xi,activeNodeRect:so,activatorEvent:$i,collisions:bo,containerNodeRect:ss,dragOverlay:jo,draggableNodes:Ga,droppableContainers:xi,droppableRects:zo,over:ls,measureDroppableContainers:qi,scrollableAncestors:kn,scrollableAncestorRects:Qn,measuringConfiguration:Li,measuringScheduled:ts,windowRect:nn}),[Wi,Xi,so,$i,bo,ss,jo,Ga,xi,zo,ls,qi,kn,Qn,Li,ts,nn]),es=(0,x.useMemo)(()=>({activatorEvent:$i,activators:Bs,active:Wi,activeNodeRect:so,ariaDescribedById:{draggable:oo},dispatch:oi,draggableNodes:Ga,over:ls,measureDroppableContainers:qi}),[$i,Bs,Wi,so,oi,oo,Ga,ls,qi]);return x.createElement(S.Provider,{value:za},x.createElement(Be.Provider,{value:es},x.createElement(vr.Provider,{value:ms},x.createElement(Vn.Provider,{value:Js},Bn)),x.createElement(Xn,{disabled:(cn==null?void 0:cn.restoreFocus)===!1})),x.createElement(D,yo(Da({},cn),{hiddenTextDescribedById:oo})));function Tu(){const Uo=(Xo==null?void 0:Xo.autoScrollEnabled)===!1,Eo=typeof mn=="object"?mn.enabled===!1:mn===!1,os=La&&!Uo&&!Eo;return typeof mn=="object"?yo(Da({},mn),{enabled:os}):{enabled:os}}}),Ea=(0,x.createContext)(null),Ni="button",ti="Droppable";function ei(Gt){let{id:le,data:Ge,disabled:pr=!1,attributes:Fr}=Gt;const Gr=(0,w.Ld)(ti),{activators:Or,activatorEvent:cn,active:mn,activeNodeRect:Bn,ariaDescribedById:sa,draggableNodes:Zn,over:va}=(0,x.useContext)(Be),{role:ya=Ni,roleDescription:vi="draggable",tabIndex:Ma=0}=Fr!=null?Fr:{},oa=(mn==null?void 0:mn.id)===le,oi=(0,x.useContext)(oa?Vn:Ea),[$a,za]=(0,w.wm)(),[Ui,di]=(0,w.wm)(),La=Je(Or,le),ja=(0,w.Ey)(Ge);(0,w.LI)(()=>(Zn.set(le,{id:le,key:Gr,node:$a,activatorNode:Ui,data:ja}),()=>{const bi=Zn.get(le);bi&&bi.key===Gr&&Zn.delete(le)}),[Zn,le]);const Ga=(0,x.useMemo)(()=>({role:ya,tabIndex:Ma,"aria-disabled":pr,"aria-pressed":oa&&ya===Ni?!0:void 0,"aria-roledescription":vi,"aria-describedby":sa.draggable}),[pr,ya,Ma,oa,vi,sa.draggable]);return{active:mn,activatorEvent:cn,activeNodeRect:Bn,attributes:Ga,isDragging:oa,listeners:pr?void 0:La,node:$a,over:va,setNodeRef:za,setActivatorNodeRef:di,transform:oi}}function Mi(){return(0,x.useContext)(vr)}const Gi="Droppable",To={timeout:25};function ro(Gt){let{data:le,disabled:Ge=!1,id:pr,resizeObserverConfig:Fr}=Gt;const Gr=(0,w.Ld)(Gi),{active:Or,dispatch:cn,over:mn,measureDroppableContainers:Bn}=(0,x.useContext)(Be),sa=(0,x.useRef)({disabled:Ge}),Zn=(0,x.useRef)(!1),va=(0,x.useRef)(null),ya=(0,x.useRef)(null),{disabled:vi,updateMeasurementsFor:Ma,timeout:oa}=Da(Da({},To),Fr),oi=(0,w.Ey)(Ma!=null?Ma:pr),$a=(0,x.useCallback)(()=>{if(!Zn.current){Zn.current=!0;return}ya.current!=null&&clearTimeout(ya.current),ya.current=setTimeout(()=>{Bn(Array.isArray(oi.current)?oi.current:[oi.current]),ya.current=null},oa)},[oa]),za=X({callback:$a,disabled:vi||!Or}),Ui=(0,x.useCallback)((Ga,bi)=>{za&&(bi&&(za.unobserve(bi),Zn.current=!1),Ga&&za.observe(Ga))},[za]),[di,La]=(0,w.wm)(Ui),ja=(0,w.Ey)(le);return(0,x.useEffect)(()=>{!za||!di.current||(za.disconnect(),Zn.current=!1,za.observe(di.current))},[di,za]),(0,w.LI)(()=>(cn({type:F.RegisterDroppable,element:{id:pr,key:Gr,disabled:Ge,node:di,rect:va,data:ja}}),()=>cn({type:F.UnregisterDroppable,key:Gr,id:pr})),[pr]),(0,x.useEffect)(()=>{Ge!==sa.current.disabled&&(cn({type:F.SetDroppableDisabled,id:pr,key:Gr,disabled:Ge}),sa.current.disabled=Ge)},[pr,Gr,Ge,cn]),{active:Or,rect:va,isOver:(mn==null?void 0:mn.id)===pr,node:di,over:mn,setNodeRef:La}}function ga(Gt){let{animation:le,children:Ge}=Gt;const[pr,Fr]=useState(null),[Gr,Or]=useState(null),cn=usePrevious(Ge);return!Ge&&!pr&&cn&&Fr(cn),useIsomorphicLayoutEffect(()=>{if(!Gr)return;const mn=pr==null?void 0:pr.key,Bn=pr==null?void 0:pr.props.id;if(mn==null||Bn==null){Fr(null);return}Promise.resolve(le(Bn,Gr)).then(()=>{Fr(null)})},[le,pr,Gr]),React.createElement(React.Fragment,null,Ge,pr?cloneElement(pr,{ref:Or}):null)}const fo={x:0,y:0,scaleX:1,scaleY:1};function Ao(Gt){let{children:le}=Gt;return React.createElement(Be.Provider,{value:Se},React.createElement(Vn.Provider,{value:fo},le))}const ni={position:"fixed",touchAction:"none"},Ri=Gt=>isKeyboardEvent(Gt)?"transform 250ms ease":void 0,co=null,ao={duration:250,easing:"ease",keyframes:Gt=>{let{transform:{initial:le,final:Ge}}=Gt;return[{transform:w.ux.Transform.toString(le)},{transform:w.ux.Transform.toString(Ge)}]},sideEffects:(Gt=>le=>{let{active:Ge,dragOverlay:pr}=le;const Fr={},{styles:Gr,className:Or}=Gt;if(Gr!=null&&Gr.active)for(const[cn,mn]of Object.entries(Gr.active))mn!==void 0&&(Fr[cn]=Ge.node.style.getPropertyValue(cn),Ge.node.style.setProperty(cn,mn));if(Gr!=null&&Gr.dragOverlay)for(const[cn,mn]of Object.entries(Gr.dragOverlay))mn!==void 0&&pr.node.style.setProperty(cn,mn);return Or!=null&&Or.active&&Ge.node.classList.add(Or.active),Or!=null&&Or.dragOverlay&&pr.node.classList.add(Or.dragOverlay),function(){for(const[mn,Bn]of Object.entries(Fr))Ge.node.style.setProperty(mn,Bn);Or!=null&&Or.active&&Ge.node.classList.remove(Or.active)}})({styles:{active:{opacity:"0"}}})};function Jo(Gt){let{config:le,draggableNodes:Ge,droppableContainers:pr,measuringConfiguration:Fr}=Gt;return useEvent((Gr,Or)=>{if(le===null)return;const cn=Ge.get(Gr);if(!cn)return;const mn=cn.node.current;if(!mn)return;const Bn=xr(Or);if(!Bn)return;const{transform:sa}=getWindow(Or).getComputedStyle(Or),Zn=Rt(sa);if(!Zn)return;const va=typeof le=="function"?le:lo(le);return qe(mn,Fr.draggable.measure),va({active:{id:Gr,data:cn.data,node:mn,rect:Fr.draggable.measure(mn)},draggableNodes:Ge,dragOverlay:{node:Or,rect:Fr.dragOverlay.measure(Bn)},droppableContainers:pr,measuringConfiguration:Fr,transform:Zn})})}function lo(Gt){const{duration:le,easing:Ge,sideEffects:pr,keyframes:Fr}=Da(Da({},ao),Gt);return Gr=>{let $a=Gr,{active:Or,dragOverlay:cn,transform:mn}=$a,Bn=Ih($a,["active","dragOverlay","transform"]);if(!le)return;const sa={x:cn.rect.left-Or.rect.left,y:cn.rect.top-Or.rect.top},Zn={scaleX:mn.scaleX!==1?Or.rect.width*mn.scaleX/cn.rect.width:1,scaleY:mn.scaleY!==1?Or.rect.height*mn.scaleY/cn.rect.height:1},va=Da({x:mn.x-sa.x,y:mn.y-sa.y},Zn),ya=Fr(yo(Da({},Bn),{active:Or,dragOverlay:cn,transform:{initial:mn,final:va}})),[vi]=ya,Ma=ya[ya.length-1];if(JSON.stringify(vi)===JSON.stringify(Ma))return;const oa=pr==null?void 0:pr(Da({active:Or,dragOverlay:cn},Bn)),oi=cn.node.animate(ya,{duration:le,easing:Ge,fill:"forwards"});return new Promise(za=>{oi.onfinish=()=>{oa==null||oa(),za()}})}}let _i=0;function io(Gt){return useMemo(()=>{if(Gt!=null)return _i++,_i},[Gt])}const $o=null},332339:function(He,z,C){"use strict";C.d(z,{DL:function(){return p}});var x=C(724285);function k(y){return g=>{let{transform:O}=g;return yo(Da({},O),{x:Math.ceil(O.x/y)*y,y:Math.ceil(O.y/y)*y})}}const w=y=>{let{transform:g}=y;return yo(Da({},g),{y:0})};function T(y,g,O){const E=Da({},y);return g.top+y.y<=O.top?E.y=O.top-g.top:g.bottom+y.y>=O.top+O.height&&(E.y=O.top+O.height-g.bottom),g.left+y.x<=O.left?E.x=O.left-g.left:g.right+y.x>=O.left+O.width&&(E.x=O.left+O.width-g.right),E}const L=y=>{let{containerNodeRect:g,draggingNodeRect:O,transform:E}=y;return!O||!g?E:T(E,O,g)},P=y=>{let{draggingNodeRect:g,transform:O,scrollableAncestorRects:E}=y;const D=E[0];return!g||!D?O:T(O,g,D)},p=y=>{let{transform:g}=y;return yo(Da({},g),{x:0})},m=y=>{let{transform:g,draggingNodeRect:O,windowRect:E}=y;return!O||!E?g:T(g,O,E)},S=y=>{let{activatorEvent:g,draggingNodeRect:O,transform:E}=y;if(O&&g){const D=getEventCoordinates(g);if(!D)return E;const F=D.x-O.left,W=D.y-O.top;return yo(Da({},E),{x:E.x+F-O.width/2,y:E.y+W-O.height/2})}return E}},245587:function(He,z,C){"use strict";C.d(z,{Fo:function(){return U},PG:function(){return g},Rp:function(){return T},nB:function(){return nt},qw:function(){return W}});var x=C(667294),k=C(960887),w=C(724285);function T(ot,Tt,Rt){const st=ot.slice();return st.splice(Rt<0?st.length+Rt:Rt,0,st.splice(Tt,1)[0]),st}function L(ot,Tt,Rt){const st=ot.slice();return st[Tt]=ot[Rt],st[Rt]=ot[Tt],st}function P(ot,Tt){return ot.reduce((Rt,st,bt)=>{const Ft=Tt.get(st);return Ft&&(Rt[bt]=Ft),Rt},Array(ot.length))}function p(ot){return ot!==null&&ot>=0}function m(ot,Tt){if(ot===Tt)return!0;if(ot.length!==Tt.length)return!1;for(let Rt=0;Rt<ot.length;Rt++)if(ot[Rt]!==Tt[Rt])return!1;return!0}function S(ot){return typeof ot=="boolean"?{draggable:ot,droppable:ot}:ot}const y={scaleX:1,scaleY:1},g=ot=>{var Tt;let{rects:Rt,activeNodeRect:st,activeIndex:bt,overIndex:Ft,index:Ht}=ot;const _t=(Tt=Rt[bt])!=null?Tt:st;if(!_t)return null;const Xt=O(Rt,Ht,bt);if(Ht===bt){const ee=Rt[Ft];return ee?Da({x:bt<Ft?ee.left+ee.width-(_t.left+_t.width):ee.left-_t.left,y:0},y):null}return Ht>bt&&Ht<=Ft?Da({x:-_t.width-Xt,y:0},y):Ht<bt&&Ht>=Ft?Da({x:_t.width+Xt,y:0},y):Da({x:0,y:0},y)};function O(ot,Tt,Rt){const st=ot[Tt],bt=ot[Tt-1],Ft=ot[Tt+1];return!st||!bt&&!Ft?0:Rt<Tt?bt?st.left-(bt.left+bt.width):Ft.left-(st.left+st.width):Ft?Ft.left-(st.left+st.width):st.left-(bt.left+bt.width)}const E=ot=>{let{rects:Tt,activeIndex:Rt,overIndex:st,index:bt}=ot;const Ft=T(Tt,st,Rt),Ht=Tt[bt],_t=Ft[bt];return!_t||!Ht?null:{x:_t.left-Ht.left,y:_t.top-Ht.top,scaleX:_t.width/Ht.width,scaleY:_t.height/Ht.height}},D=ot=>{let{activeIndex:Tt,index:Rt,rects:st,overIndex:bt}=ot,Ft,Ht;return Rt===Tt&&(Ft=st[Rt],Ht=st[bt]),Rt===bt&&(Ft=st[Rt],Ht=st[Tt]),!Ht||!Ft?null:{x:Ht.left-Ft.left,y:Ht.top-Ft.top,scaleX:Ht.width/Ft.width,scaleY:Ht.height/Ft.height}},F={scaleX:1,scaleY:1},W=ot=>{var Tt;let{activeIndex:Rt,activeNodeRect:st,index:bt,rects:Ft,overIndex:Ht}=ot;const _t=(Tt=Ft[Rt])!=null?Tt:st;if(!_t)return null;if(bt===Rt){const ee=Ft[Ht];return ee?Da({x:0,y:Rt<Ht?ee.top+ee.height-(_t.top+_t.height):ee.top-_t.top},F):null}const Xt=b(Ft,bt,Rt);return bt>Rt&&bt<=Ht?Da({x:0,y:-_t.height-Xt},F):bt<Rt&&bt>=Ht?Da({x:0,y:_t.height+Xt},F):Da({x:0,y:0},F)};function b(ot,Tt,Rt){const st=ot[Tt],bt=ot[Tt-1],Ft=ot[Tt+1];return st?Rt<Tt?bt?st.top-(bt.top+bt.height):Ft?Ft.top-(st.top+st.height):0:Ft?Ft.top-(st.top+st.height):bt?st.top-(bt.top+bt.height):0:0}const h="Sortable",K=x.createContext({activeIndex:-1,containerId:h,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:E,disabled:{draggable:!1,droppable:!1}});function U(ot){let{children:Tt,id:Rt,items:st,strategy:bt=E,disabled:Ft=!1}=ot;const{active:Ht,dragOverlay:_t,droppableRects:Xt,over:ee,measureDroppableContainers:se}=(0,k.Cj)(),ue=(0,w.Ld)(h,Rt),Ut=_t.rect!==null,oe=(0,x.useMemo)(()=>st.map(ae=>typeof ae=="object"&&"id"in ae?ae.id:ae),[st]),Pe=Ht!=null,te=Ht?oe.indexOf(Ht.id):-1,ve=ee?oe.indexOf(ee.id):-1,Ue=(0,x.useRef)(oe),xe=!m(oe,Ue.current),Re=ve!==-1&&te===-1||xe,de=S(Ft);(0,w.LI)(()=>{xe&&Pe&&se(oe)},[xe,oe,Pe,se]),(0,x.useEffect)(()=>{Ue.current=oe},[oe]);const ht=(0,x.useMemo)(()=>({activeIndex:te,containerId:ue,disabled:de,disableTransforms:Re,items:oe,overIndex:ve,useDragOverlay:Ut,sortedRects:P(oe,Xt),strategy:bt}),[te,ue,de.draggable,de.droppable,Re,oe,ve,Xt,Ut,bt]);return x.createElement(K.Provider,{value:ht},Tt)}const Y=ot=>{let{id:Tt,items:Rt,activeIndex:st,overIndex:bt}=ot;return T(Rt,st,bt).indexOf(Tt)},Z=ot=>{let{containerId:Tt,isSorting:Rt,wasDragging:st,index:bt,items:Ft,newIndex:Ht,previousItems:_t,previousContainerId:Xt,transition:ee}=ot;return!ee||!st||_t!==Ft&&bt===Ht?!1:Rt?!0:Ht!==bt&&Tt===Xt},H={duration:200,easing:"ease"},q="transform",Q=w.ux.Transition.toString({property:q,duration:0,easing:"linear"}),J={roleDescription:"sortable"};function ft(ot){let{disabled:Tt,index:Rt,node:st,rect:bt}=ot;const[Ft,Ht]=(0,x.useState)(null),_t=(0,x.useRef)(Rt);return(0,w.LI)(()=>{if(!Tt&&Rt!==_t.current&&st.current){const Xt=bt.current;if(Xt){const ee=(0,k.VK)(st.current,{ignoreTransform:!0}),se={x:Xt.left-ee.left,y:Xt.top-ee.top,scaleX:Xt.width/ee.width,scaleY:Xt.height/ee.height};(se.x||se.y)&&Ht(se)}}Rt!==_t.current&&(_t.current=Rt)},[Tt,Rt,st,bt]),(0,x.useEffect)(()=>{Ft&&Ht(null)},[Ft]),Ft}function nt(ot){let{animateLayoutChanges:Tt=Z,attributes:Rt,disabled:st,data:bt,getNewIndex:Ft=Y,id:Ht,strategy:_t,resizeObserverConfig:Xt,transition:ee=H}=ot;const{items:se,containerId:ue,activeIndex:Ut,disabled:oe,disableTransforms:Pe,sortedRects:te,overIndex:ve,useDragOverlay:Ue,strategy:xe}=(0,x.useContext)(K),Re=yt(st,oe),de=se.indexOf(Ht),ht=(0,x.useMemo)(()=>Da({sortable:{containerId:ue,index:de,items:se}},bt),[ue,bt,de,se]),ae=(0,x.useMemo)(()=>se.slice(se.indexOf(Ht)),[se,Ht]),{rect:Le,node:Ze,isOver:qe,setNodeRef:fr}=(0,k.Zj)({id:Ht,data:ht,disabled:Re.droppable,resizeObserverConfig:Da({updateMeasurementsFor:ae},Xt)}),{active:ur,activatorEvent:kr,activeNodeRect:yn,attributes:un,setNodeRef:Vr,listeners:$e,isDragging:dr,over:ar,setActivatorNodeRef:Qe,transform:Pr}=(0,k.O1)({id:Ht,data:ht,attributes:Da(Da({},J),Rt),disabled:Re.draggable}),Zr=(0,w.HB)(fr,Vr),qr=!!ur,Sn=qr&&!Pe&&p(Ut)&&p(ve),Yn=!Ue&&dr,Ir=Yn&&Sn?Pr:null,Br=_t!=null?_t:xe,en=Sn?Ir!=null?Ir:Br({rects:te,activeNodeRect:yn,activeIndex:Ut,overIndex:ve,index:de}):null,hn=p(Ut)&&p(ve)?Ft({id:Ht,items:se,activeIndex:Ut,overIndex:ve}):de,xn=ur==null?void 0:ur.id,_n=(0,x.useRef)({activeId:xn,items:se,newIndex:hn,containerId:ue}),tt=se!==_n.current.items,ir=Tt({active:ur,containerId:ue,isDragging:dr,isSorting:qr,id:Ht,index:de,items:se,newIndex:_n.current.newIndex,previousItems:_n.current.items,previousContainerId:_n.current.containerId,transition:ee,wasDragging:_n.current.activeId!=null}),jt=ft({disabled:!ir,index:de,node:Ze,rect:Le});return(0,x.useEffect)(()=>{qr&&_n.current.newIndex!==hn&&(_n.current.newIndex=hn),ue!==_n.current.containerId&&(_n.current.containerId=ue),se!==_n.current.items&&(_n.current.items=se)},[qr,hn,ue,se]),(0,x.useEffect)(()=>{if(xn===_n.current.activeId)return;if(xn&&!_n.current.activeId){_n.current.activeId=xn;return}const Et=setTimeout(()=>{_n.current.activeId=xn},50);return()=>clearTimeout(Et)},[xn]),{active:ur,activeIndex:Ut,attributes:un,data:ht,rect:Le,index:de,newIndex:hn,items:se,isOver:qe,isSorting:qr,isDragging:dr,listeners:$e,node:Ze,overIndex:ve,over:ar,setNodeRef:Zr,setActivatorNodeRef:Qe,setDroppableNodeRef:fr,setDraggableNodeRef:Vr,transform:jt!=null?jt:en,transition:Qt()};function Qt(){if(jt||tt&&_n.current.newIndex===de)return Q;if(!(Yn&&!(0,w.vd)(kr)||!ee)&&(qr||ir))return w.ux.Transition.toString(yo(Da({},ee),{property:q}))}}function yt(ot,Tt){var Rt,st;return typeof ot=="boolean"?{draggable:ot,droppable:!1}:{draggable:(Rt=ot==null?void 0:ot.draggable)!=null?Rt:Tt.draggable,droppable:(st=ot==null?void 0:ot.droppable)!=null?st:Tt.droppable}}function gt(ot){if(!ot)return!1;const Tt=ot.data.current;return!!(Tt&&"sortable"in Tt&&typeof Tt.sortable=="object"&&"containerId"in Tt.sortable&&"items"in Tt.sortable&&"index"in Tt.sortable)}const zt=[k.g4.Down,k.g4.Right,k.g4.Up,k.g4.Left],Mt=(ot,Tt)=>{let{context:{active:Rt,collisionRect:st,droppableRects:bt,droppableContainers:Ft,over:Ht,scrollableAncestors:_t}}=Tt;if(zt.includes(ot.code)){if(ot.preventDefault(),!Rt||!st)return;const Xt=[];Ft.getEnabled().forEach(ue=>{if(!ue||ue!=null&&ue.disabled)return;const Ut=bt.get(ue.id);if(Ut)switch(ot.code){case KeyboardCode.Down:st.top<Ut.top&&Xt.push(ue);break;case KeyboardCode.Up:st.top>Ut.top&&Xt.push(ue);break;case KeyboardCode.Left:st.left>Ut.left&&Xt.push(ue);break;case KeyboardCode.Right:st.left<Ut.left&&Xt.push(ue);break}});const ee=closestCorners({active:Rt,collisionRect:st,droppableRects:bt,droppableContainers:Xt,pointerCoordinates:null});let se=getFirstCollision(ee,"id");if(se===(Ht==null?void 0:Ht.id)&&ee.length>1&&(se=ee[1].id),se!=null){const ue=Ft.get(Rt.id),Ut=Ft.get(se),oe=Ut?bt.get(Ut.id):null,Pe=Ut==null?void 0:Ut.node.current;if(Pe&&oe&&ue&&Ut){const ve=getScrollableAncestors(Pe).some((ae,Le)=>_t[Le]!==ae),Ue=Ct(ue,Ut),xe=rt(ue,Ut),Re=ve||!Ue?{x:0,y:0}:{x:xe?st.width-oe.width:0,y:xe?st.height-oe.height:0},de={x:oe.left,y:oe.top};return Re.x&&Re.y?de:subtract(de,Re)}}}};function Ct(ot,Tt){return!gt(ot)||!gt(Tt)?!1:ot.data.current.sortable.containerId===Tt.data.current.sortable.containerId}function rt(ot,Tt){return!gt(ot)||!gt(Tt)||!Ct(ot,Tt)?!1:ot.data.current.sortable.index<Tt.data.current.sortable.index}},724285:function(He,z,C){"use strict";C.d(z,{$X:function(){return Z},D9:function(){return b},DC:function(){return J},Ey:function(){return D},FJ:function(){return T},Gj:function(){return F},HB:function(){return k},IH:function(){return Y},Jj:function(){return P},LI:function(){return g},Ld:function(){return K},Nq:function(){return w},Re:function(){return m},UG:function(){return L},Yz:function(){return E},qk:function(){return p},r3:function(){return y},so:function(){return yt},ux:function(){return ft},vZ:function(){return S},vd:function(){return q},wm:function(){return W},zX:function(){return O}});var x=C(667294);function k(){for(var gt=arguments.length,zt=new Array(gt),Mt=0;Mt<gt;Mt++)zt[Mt]=arguments[Mt];return(0,x.useMemo)(()=>Ct=>{zt.forEach(rt=>rt(Ct))},zt)}const w=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function T(gt){const zt=Object.prototype.toString.call(gt);return zt==="[object Window]"||zt==="[object global]"}function L(gt){return"nodeType"in gt}function P(gt){var zt,Mt;return gt?T(gt)?gt:L(gt)&&(zt=(Mt=gt.ownerDocument)==null?void 0:Mt.defaultView)!=null?zt:window:window}function p(gt){const{Document:zt}=P(gt);return gt instanceof zt}function m(gt){return T(gt)?!1:gt instanceof P(gt).HTMLElement}function S(gt){return gt instanceof P(gt).SVGElement}function y(gt){return gt?T(gt)?gt.document:L(gt)?p(gt)?gt:m(gt)?gt.ownerDocument:document:document:document}const g=w?x.useLayoutEffect:x.useEffect;function O(gt){const zt=(0,x.useRef)(gt);return g(()=>{zt.current=gt}),(0,x.useCallback)(function(){for(var Mt=arguments.length,Ct=new Array(Mt),rt=0;rt<Mt;rt++)Ct[rt]=arguments[rt];return zt.current==null?void 0:zt.current(...Ct)},[])}function E(){const gt=(0,x.useRef)(null),zt=(0,x.useCallback)((Ct,rt)=>{gt.current=setInterval(Ct,rt)},[]),Mt=(0,x.useCallback)(()=>{gt.current!==null&&(clearInterval(gt.current),gt.current=null)},[]);return[zt,Mt]}function D(gt,zt){zt===void 0&&(zt=[gt]);const Mt=(0,x.useRef)(gt);return g(()=>{Mt.current!==gt&&(Mt.current=gt)},zt),Mt}function F(gt,zt){const Mt=(0,x.useRef)();return(0,x.useMemo)(()=>{const Ct=gt(Mt.current);return Mt.current=Ct,Ct},[...zt])}function W(gt){const zt=O(gt),Mt=(0,x.useRef)(null),Ct=(0,x.useCallback)(rt=>{rt!==Mt.current&&(zt==null||zt(rt,Mt.current)),Mt.current=rt},[]);return[Mt,Ct]}function b(gt){const zt=(0,x.useRef)();return(0,x.useEffect)(()=>{zt.current=gt},[gt]),zt.current}let h={};function K(gt,zt){return(0,x.useMemo)(()=>{if(zt)return zt;const Mt=h[gt]==null?0:h[gt]+1;return h[gt]=Mt,gt+"-"+Mt},[gt,zt])}function U(gt){return function(zt){for(var Mt=arguments.length,Ct=new Array(Mt>1?Mt-1:0),rt=1;rt<Mt;rt++)Ct[rt-1]=arguments[rt];return Ct.reduce((ot,Tt)=>{const Rt=Object.entries(Tt);for(const[st,bt]of Rt){const Ft=ot[st];Ft!=null&&(ot[st]=Ft+gt*bt)}return ot},Da({},zt))}}const Y=U(1),Z=U(-1);function H(gt){return"clientX"in gt&&"clientY"in gt}function q(gt){if(!gt)return!1;const{KeyboardEvent:zt}=P(gt.target);return zt&&gt instanceof zt}function Q(gt){if(!gt)return!1;const{TouchEvent:zt}=P(gt.target);return zt&&gt instanceof zt}function J(gt){if(Q(gt)){if(gt.touches&&gt.touches.length){const{clientX:zt,clientY:Mt}=gt.touches[0];return{x:zt,y:Mt}}else if(gt.changedTouches&&gt.changedTouches.length){const{clientX:zt,clientY:Mt}=gt.changedTouches[0];return{x:zt,y:Mt}}}return H(gt)?{x:gt.clientX,y:gt.clientY}:null}const ft=Object.freeze({Translate:{toString(gt){if(!gt)return;const{x:zt,y:Mt}=gt;return"translate3d("+(zt?Math.round(zt):0)+"px, "+(Mt?Math.round(Mt):0)+"px, 0)"}},Scale:{toString(gt){if(!gt)return;const{scaleX:zt,scaleY:Mt}=gt;return"scaleX("+zt+") scaleY("+Mt+")"}},Transform:{toString(gt){if(gt)return[ft.Translate.toString(gt),ft.Scale.toString(gt)].join(" ")}},Transition:{toString(gt){let{property:zt,duration:Mt,easing:Ct}=gt;return zt+" "+Mt+"ms "+Ct}}}),nt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function yt(gt){return gt.matches(nt)?gt:gt.querySelector(nt)}},486880:function(He,z,C){"use strict";C.r(z),C.d(z,{forceCenter:function(){return x},forceCollide:function(){return p},forceLink:function(){return O},forceManyBody:function(){return Pe},forceRadial:function(){return te},forceSimulation:function(){return oe},forceX:function(){return ve},forceY:function(){return Ue}});function x(xe,Re){var de,ht=1;xe==null&&(xe=0),Re==null&&(Re=0);function ae(){var Le,Ze=de.length,qe,fr=0,ur=0;for(Le=0;Le<Ze;++Le)qe=de[Le],fr+=qe.x,ur+=qe.y;for(fr=(fr/Ze-xe)*ht,ur=(ur/Ze-Re)*ht,Le=0;Le<Ze;++Le)qe=de[Le],qe.x-=fr,qe.y-=ur}return ae.initialize=function(Le){de=Le},ae.x=function(Le){return arguments.length?(xe=+Le,ae):xe},ae.y=function(Le){return arguments.length?(Re=+Le,ae):Re},ae.strength=function(Le){return arguments.length?(ht=+Le,ae):ht},ae}var k=C(547148);function w(xe){return function(){return xe}}function T(xe){return(xe()-.5)*1e-6}function L(xe){return xe.x+xe.vx}function P(xe){return xe.y+xe.vy}function p(xe){var Re,de,ht,ae=1,Le=1;typeof xe!="function"&&(xe=w(xe==null?1:+xe));function Ze(){for(var ur,kr=Re.length,yn,un,Vr,$e,dr,ar,Qe=0;Qe<Le;++Qe)for(yn=(0,k.Z)(Re,L,P).visitAfter(qe),ur=0;ur<kr;++ur)un=Re[ur],dr=de[un.index],ar=dr*dr,Vr=un.x+un.vx,$e=un.y+un.vy,yn.visit(Pr);function Pr(Zr,qr,Sn,Yn,Ir){var Br=Zr.data,en=Zr.r,hn=dr+en;if(Br){if(Br.index>un.index){var xn=Vr-Br.x-Br.vx,_n=$e-Br.y-Br.vy,tt=xn*xn+_n*_n;tt<hn*hn&&(xn===0&&(xn=T(ht),tt+=xn*xn),_n===0&&(_n=T(ht),tt+=_n*_n),tt=(hn-(tt=Math.sqrt(tt)))/tt*ae,un.vx+=(xn*=tt)*(hn=(en*=en)/(ar+en)),un.vy+=(_n*=tt)*hn,Br.vx-=xn*(hn=1-hn),Br.vy-=_n*hn)}return}return qr>Vr+hn||Yn<Vr-hn||Sn>$e+hn||Ir<$e-hn}}function qe(ur){if(ur.data)return ur.r=de[ur.data.index];for(var kr=ur.r=0;kr<4;++kr)ur[kr]&&ur[kr].r>ur.r&&(ur.r=ur[kr].r)}function fr(){if(Re){var ur,kr=Re.length,yn;for(de=new Array(kr),ur=0;ur<kr;++ur)yn=Re[ur],de[yn.index]=+xe(yn,ur,Re)}}return Ze.initialize=function(ur,kr){Re=ur,ht=kr,fr()},Ze.iterations=function(ur){return arguments.length?(Le=+ur,Ze):Le},Ze.strength=function(ur){return arguments.length?(ae=+ur,Ze):ae},Ze.radius=function(ur){return arguments.length?(xe=typeof ur=="function"?ur:w(+ur),fr(),Ze):xe},Ze}var m=C(952677),S=C.n(m);function y(xe){return xe.index}function g(xe,Re){var de=xe.get(Re);if(!de)throw new Error("node not found: "+Re);return de}function O(xe){var Re=y,de=yn,ht,ae=w(30),Le,Ze,qe,fr,ur,kr=1;xe==null&&(xe=[]);function yn(ar){return 1/Math.min(qe[ar.source.index],qe[ar.target.index])}function un(ar){for(var Qe=0,Pr=xe.length;Qe<kr;++Qe)for(var Zr=0,qr,Sn,Yn,Ir,Br,en,hn;Zr<Pr;++Zr)qr=xe[Zr],Sn=qr.source,Yn=qr.target,Ir=Yn.x+Yn.vx-Sn.x-Sn.vx||T(ur),Br=Yn.y+Yn.vy-Sn.y-Sn.vy||T(ur),en=Math.sqrt(Ir*Ir+Br*Br),en=(en-Le[Zr])/en*ar*ht[Zr],Ir*=en,Br*=en,Yn.vx-=Ir*(hn=fr[Zr]),Yn.vy-=Br*hn,Sn.vx+=Ir*(hn=1-hn),Sn.vy+=Br*hn}function Vr(){if(Ze){var ar,Qe=Ze.length,Pr=xe.length,Zr=new Map(Ze.map(function(Sn,Yn){return[Re(Sn,Yn,Ze),Sn]})),qr;for(ar=0,qe=new Array(Qe);ar<Pr;++ar)qr=xe[ar],qr.index=ar,S()(qr.source)!=="object"&&(qr.source=g(Zr,qr.source)),S()(qr.target)!=="object"&&(qr.target=g(Zr,qr.target)),qe[qr.source.index]=(qe[qr.source.index]||0)+1,qe[qr.target.index]=(qe[qr.target.index]||0)+1;for(ar=0,fr=new Array(Pr);ar<Pr;++ar)qr=xe[ar],fr[ar]=qe[qr.source.index]/(qe[qr.source.index]+qe[qr.target.index]);ht=new Array(Pr),$e(),Le=new Array(Pr),dr()}}function $e(){if(Ze)for(var ar=0,Qe=xe.length;ar<Qe;++ar)ht[ar]=+de(xe[ar],ar,xe)}function dr(){if(Ze)for(var ar=0,Qe=xe.length;ar<Qe;++ar)Le[ar]=+ae(xe[ar],ar,xe)}return un.initialize=function(ar,Qe){Ze=ar,ur=Qe,Vr()},un.links=function(ar){return arguments.length?(xe=ar,Vr(),un):xe},un.id=function(ar){return arguments.length?(Re=ar,un):Re},un.iterations=function(ar){return arguments.length?(kr=+ar,un):kr},un.strength=function(ar){return arguments.length?(de=typeof ar=="function"?ar:w(+ar),$e(),un):de},un.distance=function(ar){return arguments.length?(ae=typeof ar=="function"?ar:w(+ar),dr(),un):ae},un}var E={value:function(){}};function D(){for(var xe=0,Re=arguments.length,de={},ht;xe<Re;++xe){if(!(ht=arguments[xe]+"")||ht in de||/[\s.]/.test(ht))throw new Error("illegal type: "+ht);de[ht]=[]}return new F(de)}function F(xe){this._=xe}function W(xe,Re){return xe.trim().split(/^|\s+/).map(function(de){var ht="",ae=de.indexOf(".");if(ae>=0&&(ht=de.slice(ae+1),de=de.slice(0,ae)),de&&!Re.hasOwnProperty(de))throw new Error("unknown type: "+de);return{type:de,name:ht}})}F.prototype=D.prototype={constructor:F,on:function(Re,de){var ht=this._,ae=W(Re+"",ht),Le,Ze=-1,qe=ae.length;if(arguments.length<2){for(;++Ze<qe;)if((Le=(Re=ae[Ze]).type)&&(Le=b(ht[Le],Re.name)))return Le;return}if(de!=null&&typeof de!="function")throw new Error("invalid callback: "+de);for(;++Ze<qe;)if(Le=(Re=ae[Ze]).type)ht[Le]=h(ht[Le],Re.name,de);else if(de==null)for(Le in ht)ht[Le]=h(ht[Le],Re.name,null);return this},copy:function(){var Re={},de=this._;for(var ht in de)Re[ht]=de[ht].slice();return new F(Re)},call:function(Re,de){if((Le=arguments.length-2)>0)for(var ht=new Array(Le),ae=0,Le,Ze;ae<Le;++ae)ht[ae]=arguments[ae+2];if(!this._.hasOwnProperty(Re))throw new Error("unknown type: "+Re);for(Ze=this._[Re],ae=0,Le=Ze.length;ae<Le;++ae)Ze[ae].value.apply(de,ht)},apply:function(Re,de,ht){if(!this._.hasOwnProperty(Re))throw new Error("unknown type: "+Re);for(var ae=this._[Re],Le=0,Ze=ae.length;Le<Ze;++Le)ae[Le].value.apply(de,ht)}};function b(xe,Re){for(var de=0,ht=xe.length,ae;de<ht;++de)if((ae=xe[de]).name===Re)return ae.value}function h(xe,Re,de){for(var ht=0,ae=xe.length;ht<ae;++ht)if(xe[ht].name===Re){xe[ht]=E,xe=xe.slice(0,ht).concat(xe.slice(ht+1));break}return de!=null&&xe.push({name:Re,value:de}),xe}var K=D,U=0,Y=0,Z=0,H=1e3,q,Q,J=0,ft=0,nt=0,yt=typeof performance=="object"&&performance.now?performance:Date,gt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(xe){setTimeout(xe,17)};function zt(){return ft||(gt(Mt),ft=yt.now()+nt)}function Mt(){ft=0}function Ct(){this._call=this._time=this._next=null}Ct.prototype=rt.prototype={constructor:Ct,restart:function(xe,Re,de){if(typeof xe!="function")throw new TypeError("callback is not a function");de=(de==null?zt():+de)+(Re==null?0:+Re),!this._next&&Q!==this&&(Q?Q._next=this:q=this,Q=this),this._call=xe,this._time=de,bt()},stop:function(){this._call&&(this._call=null,this._time=1/0,bt())}};function rt(xe,Re,de){var ht=new Ct;return ht.restart(xe,Re,de),ht}function ot(){zt(),++U;for(var xe=q,Re;xe;)(Re=ft-xe._time)>=0&&xe._call.call(null,Re),xe=xe._next;--U}function Tt(){ft=(J=yt.now())+nt,U=Y=0;try{ot()}finally{U=0,st(),ft=0}}function Rt(){var xe=yt.now(),Re=xe-J;Re>H&&(nt-=Re,J=xe)}function st(){for(var xe,Re=q,de,ht=1/0;Re;)Re._call?(ht>Re._time&&(ht=Re._time),xe=Re,Re=Re._next):(de=Re._next,Re._next=null,Re=xe?xe._next=de:q=de);Q=xe,bt(ht)}function bt(xe){if(!U){Y&&(Y=clearTimeout(Y));var Re=xe-ft;Re>24?(xe<1/0&&(Y=setTimeout(Tt,xe-yt.now()-nt)),Z&&(Z=clearInterval(Z))):(Z||(J=yt.now(),Z=setInterval(Rt,H)),U=1,gt(Tt))}}var Ft=1664525,Ht=1013904223,_t=4294967296;function Xt(){var xe=1;return function(){return(xe=(Ft*xe+Ht)%_t)/_t}}function ee(xe){return xe.x}function se(xe){return xe.y}var ue=10,Ut=Math.PI*(3-Math.sqrt(5));function oe(xe){var Re,de=1,ht=.001,ae=1-Math.pow(ht,1/300),Le=0,Ze=.6,qe=new Map,fr=rt(yn),ur=K("tick","end"),kr=Xt();xe==null&&(xe=[]);function yn(){un(),ur.call("tick",Re),de<ht&&(fr.stop(),ur.call("end",Re))}function un(dr){var ar,Qe=xe.length,Pr;dr===void 0&&(dr=1);for(var Zr=0;Zr<dr;++Zr)for(de+=(Le-de)*ae,qe.forEach(function(qr){qr(de)}),ar=0;ar<Qe;++ar)Pr=xe[ar],Pr.fx==null?Pr.x+=Pr.vx*=Ze:(Pr.x=Pr.fx,Pr.vx=0),Pr.fy==null?Pr.y+=Pr.vy*=Ze:(Pr.y=Pr.fy,Pr.vy=0);return Re}function Vr(){for(var dr=0,ar=xe.length,Qe;dr<ar;++dr){if(Qe=xe[dr],Qe.index=dr,Qe.fx!=null&&(Qe.x=Qe.fx),Qe.fy!=null&&(Qe.y=Qe.fy),isNaN(Qe.x)||isNaN(Qe.y)){var Pr=ue*Math.sqrt(.5+dr),Zr=dr*Ut;Qe.x=Pr*Math.cos(Zr),Qe.y=Pr*Math.sin(Zr)}(isNaN(Qe.vx)||isNaN(Qe.vy))&&(Qe.vx=Qe.vy=0)}}function $e(dr){return dr.initialize&&dr.initialize(xe,kr),dr}return Vr(),Re={tick:un,restart:function(){return fr.restart(yn),Re},stop:function(){return fr.stop(),Re},nodes:function(ar){return arguments.length?(xe=ar,Vr(),qe.forEach($e),Re):xe},alpha:function(ar){return arguments.length?(de=+ar,Re):de},alphaMin:function(ar){return arguments.length?(ht=+ar,Re):ht},alphaDecay:function(ar){return arguments.length?(ae=+ar,Re):+ae},alphaTarget:function(ar){return arguments.length?(Le=+ar,Re):Le},velocityDecay:function(ar){return arguments.length?(Ze=1-ar,Re):1-Ze},randomSource:function(ar){return arguments.length?(kr=ar,qe.forEach($e),Re):kr},force:function(ar,Qe){return arguments.length>1?(Qe==null?qe.delete(ar):qe.set(ar,$e(Qe)),Re):qe.get(ar)},find:function(ar,Qe,Pr){var Zr=0,qr=xe.length,Sn,Yn,Ir,Br,en;for(Pr==null?Pr=1/0:Pr*=Pr,Zr=0;Zr<qr;++Zr)Br=xe[Zr],Sn=ar-Br.x,Yn=Qe-Br.y,Ir=Sn*Sn+Yn*Yn,Ir<Pr&&(en=Br,Pr=Ir);return en},on:function(ar,Qe){return arguments.length>1?(ur.on(ar,Qe),Re):ur.on(ar)}}}function Pe(){var xe,Re,de,ht,ae=w(-30),Le,Ze=1,qe=1/0,fr=.81;function ur(Vr){var $e,dr=xe.length,ar=(0,k.Z)(xe,ee,se).visitAfter(yn);for(ht=Vr,$e=0;$e<dr;++$e)Re=xe[$e],ar.visit(un)}function kr(){if(xe){var Vr,$e=xe.length,dr;for(Le=new Array($e),Vr=0;Vr<$e;++Vr)dr=xe[Vr],Le[dr.index]=+ae(dr,Vr,xe)}}function yn(Vr){var $e=0,dr,ar,Qe=0,Pr,Zr,qr;if(Vr.length){for(Pr=Zr=qr=0;qr<4;++qr)(dr=Vr[qr])&&(ar=Math.abs(dr.value))&&($e+=dr.value,Qe+=ar,Pr+=ar*dr.x,Zr+=ar*dr.y);Vr.x=Pr/Qe,Vr.y=Zr/Qe}else{dr=Vr,dr.x=dr.data.x,dr.y=dr.data.y;do $e+=Le[dr.data.index];while(dr=dr.next)}Vr.value=$e}function un(Vr,$e,dr,ar){if(!Vr.value)return!0;var Qe=Vr.x-Re.x,Pr=Vr.y-Re.y,Zr=ar-$e,qr=Qe*Qe+Pr*Pr;if(Zr*Zr/fr<qr)return qr<qe&&(Qe===0&&(Qe=T(de),qr+=Qe*Qe),Pr===0&&(Pr=T(de),qr+=Pr*Pr),qr<Ze&&(qr=Math.sqrt(Ze*qr)),Re.vx+=Qe*Vr.value*ht/qr,Re.vy+=Pr*Vr.value*ht/qr),!0;if(Vr.length||qr>=qe)return;(Vr.data!==Re||Vr.next)&&(Qe===0&&(Qe=T(de),qr+=Qe*Qe),Pr===0&&(Pr=T(de),qr+=Pr*Pr),qr<Ze&&(qr=Math.sqrt(Ze*qr)));do Vr.data!==Re&&(Zr=Le[Vr.data.index]*ht/qr,Re.vx+=Qe*Zr,Re.vy+=Pr*Zr);while(Vr=Vr.next)}return ur.initialize=function(Vr,$e){xe=Vr,de=$e,kr()},ur.strength=function(Vr){return arguments.length?(ae=typeof Vr=="function"?Vr:w(+Vr),kr(),ur):ae},ur.distanceMin=function(Vr){return arguments.length?(Ze=Vr*Vr,ur):Math.sqrt(Ze)},ur.distanceMax=function(Vr){return arguments.length?(qe=Vr*Vr,ur):Math.sqrt(qe)},ur.theta=function(Vr){return arguments.length?(fr=Vr*Vr,ur):Math.sqrt(fr)},ur}function te(xe,Re,de){var ht,ae=w(.1),Le,Ze;typeof xe!="function"&&(xe=w(+xe)),Re==null&&(Re=0),de==null&&(de=0);function qe(ur){for(var kr=0,yn=ht.length;kr<yn;++kr){var un=ht[kr],Vr=un.x-Re||1e-6,$e=un.y-de||1e-6,dr=Math.sqrt(Vr*Vr+$e*$e),ar=(Ze[kr]-dr)*Le[kr]*ur/dr;un.vx+=Vr*ar,un.vy+=$e*ar}}function fr(){if(ht){var ur,kr=ht.length;for(Le=new Array(kr),Ze=new Array(kr),ur=0;ur<kr;++ur)Ze[ur]=+xe(ht[ur],ur,ht),Le[ur]=isNaN(Ze[ur])?0:+ae(ht[ur],ur,ht)}}return qe.initialize=function(ur){ht=ur,fr()},qe.strength=function(ur){return arguments.length?(ae=typeof ur=="function"?ur:w(+ur),fr(),qe):ae},qe.radius=function(ur){return arguments.length?(xe=typeof ur=="function"?ur:w(+ur),fr(),qe):xe},qe.x=function(ur){return arguments.length?(Re=+ur,qe):Re},qe.y=function(ur){return arguments.length?(de=+ur,qe):de},qe}function ve(xe){var Re=w(.1),de,ht,ae;typeof xe!="function"&&(xe=w(xe==null?0:+xe));function Le(qe){for(var fr=0,ur=de.length,kr;fr<ur;++fr)kr=de[fr],kr.vx+=(ae[fr]-kr.x)*ht[fr]*qe}function Ze(){if(de){var qe,fr=de.length;for(ht=new Array(fr),ae=new Array(fr),qe=0;qe<fr;++qe)ht[qe]=isNaN(ae[qe]=+xe(de[qe],qe,de))?0:+Re(de[qe],qe,de)}}return Le.initialize=function(qe){de=qe,Ze()},Le.strength=function(qe){return arguments.length?(Re=typeof qe=="function"?qe:w(+qe),Ze(),Le):Re},Le.x=function(qe){return arguments.length?(xe=typeof qe=="function"?qe:w(+qe),Ze(),Le):xe},Le}function Ue(xe){var Re=w(.1),de,ht,ae;typeof xe!="function"&&(xe=w(xe==null?0:+xe));function Le(qe){for(var fr=0,ur=de.length,kr;fr<ur;++fr)kr=de[fr],kr.vy+=(ae[fr]-kr.y)*ht[fr]*qe}function Ze(){if(de){var qe,fr=de.length;for(ht=new Array(fr),ae=new Array(fr),qe=0;qe<fr;++qe)ht[qe]=isNaN(ae[qe]=+xe(de[qe],qe,de))?0:+Re(de[qe],qe,de)}}return Le.initialize=function(qe){de=qe,Ze()},Le.strength=function(qe){return arguments.length?(Re=typeof qe=="function"?qe:w(+qe),Ze(),Le):Re},Le.y=function(qe){return arguments.length?(xe=typeof qe=="function"?qe:w(+qe),Ze(),Le):xe},Le}},405237:function(He,z,C){"use strict";C.r(z),C.d(z,{AbstractMatrix:function(){return Re},CHO:function(){return dt},CholeskyDecomposition:function(){return dt},EVD:function(){return jt},EigenvalueDecomposition:function(){return jt},LU:function(){return Pr},LuDecomposition:function(){return Pr},Matrix:function(){return ae},MatrixColumnSelectionView:function(){return qe},MatrixColumnView:function(){return Ze},MatrixFlipColumnView:function(){return fr},MatrixFlipRowView:function(){return ur},MatrixRowSelectionView:function(){return yn},MatrixRowView:function(){return kr},MatrixSelectionView:function(){return un},MatrixSubView:function(){return Vr},MatrixTransposeView:function(){return $e},NIPALS:function(){return Bt},Nipals:function(){return Bt},QR:function(){return qr},QrDecomposition:function(){return qr},SVD:function(){return Sn},SingularValueDecomposition:function(){return Sn},WrapperMatrix1D:function(){return dr},WrapperMatrix2D:function(){return ar},correlation:function(){return ir},covariance:function(){return tt},default:function(){return ae},determinant:function(){return Br},inverse:function(){return Yn},linearDependencies:function(){return xn},pseudoInverse:function(){return _n},solve:function(){return Ir},wrap:function(){return Qe}});var x=C(273408),k=C.n(x),w=C(731996),T=C.n(w),L=C(626037),P=C.n(L),p=C(952677),m=C.n(p),S=C(912444),y=C.n(S),g=C(272004),O=C.n(g);const E=Object.prototype.toString;function D($){const at=E.call($);return at.endsWith("Array]")&&!at.includes("Big")}function F($){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!D($))throw new TypeError("input must be an array");if($.length===0)throw new TypeError("input must not be empty");var R=at.fromIndex,M=R===void 0?0:R,A=at.toIndex,X=A===void 0?$.length:A;if(M<0||M>=$.length||!Number.isInteger(M))throw new Error("fromIndex must be a positive integer smaller than length");if(X<=M||X>$.length||!Number.isInteger(X))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var mt=$[M],Lt=M+1;Lt<X;Lt++)$[Lt]>mt&&(mt=$[Lt]);return mt}function W($){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!D($))throw new TypeError("input must be an array");if($.length===0)throw new TypeError("input must not be empty");var R=at.fromIndex,M=R===void 0?0:R,A=at.toIndex,X=A===void 0?$.length:A;if(M<0||M>=$.length||!Number.isInteger(M))throw new Error("fromIndex must be a positive integer smaller than length");if(X<=M||X>$.length||!Number.isInteger(X))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var mt=$[M],Lt=M+1;Lt<X;Lt++)$[Lt]<mt&&(mt=$[Lt]);return mt}function b($){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(D($)){if($.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var R;if(at.output!==void 0){if(!D(at.output))throw new TypeError("output option must be an array if specified");R=at.output}else R=new Array($.length);var M=W($),A=F($);if(M===A)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var X=at.min,mt=X===void 0?at.autoMinMax?M:0:X,Lt=at.max,Pt=Lt===void 0?at.autoMinMax?A:1:Lt;if(mt>=Pt)throw new RangeError("min option must be smaller than max option");for(var Jt=(Pt-mt)/(A-M),Ie=0;Ie<$.length;Ie++)R[Ie]=($[Ie]-M)*Jt+mt;return R}var h=" ".repeat(2),K=" ".repeat(4);function U(){return Y(this)}function Y($){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=at.maxRows,M=R===void 0?15:R,A=at.maxColumns,X=A===void 0?10:A,mt=at.maxNumSize,Lt=mt===void 0?8:mt,Pt=at.padMinus,Jt=Pt===void 0?"auto":Pt;return"".concat($.constructor.name,` {
`).concat(h,`[
`).concat(K).concat(Z($,M,X,Lt,Jt),`
`).concat(h,`]
`).concat(h,"rows: ").concat($.rows,`
`).concat(h,"columns: ").concat($.columns,`
}`)}function Z($,at,R,M,A){var X=$.rows,mt=$.columns,Lt=Math.min(X,at),Pt=Math.min(mt,R),Jt=[];if(A==="auto"){A=!1;t:for(var Ie=0;Ie<Lt;Ie++)for(var pe=0;pe<Pt;pe++)if($.get(Ie,pe)<0){A=!0;break t}}for(var je=0;je<Lt;je++){for(var br=[],Je=0;Je<Pt;Je++)br.push(H($.get(je,Je),M,A));Jt.push("".concat(br.join(" ")))}return Pt!==mt&&(Jt[Jt.length-1]+=" ... ".concat(mt-R," more columns")),Lt!==X&&Jt.push("... ".concat(X-at," more rows")),Jt.join(`
`.concat(K))}function H($,at,R){return($>=0&&R?" ".concat(q($,at-1)):q($,at)).padEnd(at)}function q($,at){var R=$.toString();if(R.length<=at)return R;var M=$.toFixed(at);if(M.length>at&&(M=$.toFixed(Math.max(0,at-(M.length-at)))),M.length<=at&&!M.startsWith("0.000")&&!M.startsWith("-0.000"))return M;var A=$.toExponential(at);return A.length>at&&(A=$.toExponential(Math.max(0,at-(A.length-at)))),A.slice(0)}function Q($,at){$.prototype.add=function(M){return typeof M=="number"?this.addS(M):this.addM(M)},$.prototype.addS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)+M);return this},$.prototype.addM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)+M.get(A,X));return this},$.add=function(M,A){var X=new at(M);return X.add(A)},$.prototype.sub=function(M){return typeof M=="number"?this.subS(M):this.subM(M)},$.prototype.subS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)-M);return this},$.prototype.subM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)-M.get(A,X));return this},$.sub=function(M,A){var X=new at(M);return X.sub(A)},$.prototype.subtract=$.prototype.sub,$.prototype.subtractS=$.prototype.subS,$.prototype.subtractM=$.prototype.subM,$.subtract=$.sub,$.prototype.mul=function(M){return typeof M=="number"?this.mulS(M):this.mulM(M)},$.prototype.mulS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)*M);return this},$.prototype.mulM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)*M.get(A,X));return this},$.mul=function(M,A){var X=new at(M);return X.mul(A)},$.prototype.multiply=$.prototype.mul,$.prototype.multiplyS=$.prototype.mulS,$.prototype.multiplyM=$.prototype.mulM,$.multiply=$.mul,$.prototype.div=function(M){return typeof M=="number"?this.divS(M):this.divM(M)},$.prototype.divS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)/M);return this},$.prototype.divM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)/M.get(A,X));return this},$.div=function(M,A){var X=new at(M);return X.div(A)},$.prototype.divide=$.prototype.div,$.prototype.divideS=$.prototype.divS,$.prototype.divideM=$.prototype.divM,$.divide=$.div,$.prototype.mod=function(M){return typeof M=="number"?this.modS(M):this.modM(M)},$.prototype.modS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)%M);return this},$.prototype.modM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)%M.get(A,X));return this},$.mod=function(M,A){var X=new at(M);return X.mod(A)},$.prototype.modulus=$.prototype.mod,$.prototype.modulusS=$.prototype.modS,$.prototype.modulusM=$.prototype.modM,$.modulus=$.mod,$.prototype.and=function(M){return typeof M=="number"?this.andS(M):this.andM(M)},$.prototype.andS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)&M);return this},$.prototype.andM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)&M.get(A,X));return this},$.and=function(M,A){var X=new at(M);return X.and(A)},$.prototype.or=function(M){return typeof M=="number"?this.orS(M):this.orM(M)},$.prototype.orS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)|M);return this},$.prototype.orM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)|M.get(A,X));return this},$.or=function(M,A){var X=new at(M);return X.or(A)},$.prototype.xor=function(M){return typeof M=="number"?this.xorS(M):this.xorM(M)},$.prototype.xorS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)^M);return this},$.prototype.xorM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)^M.get(A,X));return this},$.xor=function(M,A){var X=new at(M);return X.xor(A)},$.prototype.leftShift=function(M){return typeof M=="number"?this.leftShiftS(M):this.leftShiftM(M)},$.prototype.leftShiftS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)<<M);return this},$.prototype.leftShiftM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)<<M.get(A,X));return this},$.leftShift=function(M,A){var X=new at(M);return X.leftShift(A)},$.prototype.signPropagatingRightShift=function(M){return typeof M=="number"?this.signPropagatingRightShiftS(M):this.signPropagatingRightShiftM(M)},$.prototype.signPropagatingRightShiftS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)>>M);return this},$.prototype.signPropagatingRightShiftM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)>>M.get(A,X));return this},$.signPropagatingRightShift=function(M,A){var X=new at(M);return X.signPropagatingRightShift(A)},$.prototype.rightShift=function(M){return typeof M=="number"?this.rightShiftS(M):this.rightShiftM(M)},$.prototype.rightShiftS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)>>>M);return this},$.prototype.rightShiftM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,this.get(A,X)>>>M.get(A,X));return this},$.rightShift=function(M,A){var X=new at(M);return X.rightShift(A)},$.prototype.zeroFillRightShift=$.prototype.rightShift,$.prototype.zeroFillRightShiftS=$.prototype.rightShiftS,$.prototype.zeroFillRightShiftM=$.prototype.rightShiftM,$.zeroFillRightShift=$.rightShift,$.prototype.not=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,~this.get(M,A));return this},$.not=function(M){var A=new at(M);return A.not()},$.prototype.abs=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.abs(this.get(M,A)));return this},$.abs=function(M){var A=new at(M);return A.abs()},$.prototype.acos=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.acos(this.get(M,A)));return this},$.acos=function(M){var A=new at(M);return A.acos()},$.prototype.acosh=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.acosh(this.get(M,A)));return this},$.acosh=function(M){var A=new at(M);return A.acosh()},$.prototype.asin=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.asin(this.get(M,A)));return this},$.asin=function(M){var A=new at(M);return A.asin()},$.prototype.asinh=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.asinh(this.get(M,A)));return this},$.asinh=function(M){var A=new at(M);return A.asinh()},$.prototype.atan=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.atan(this.get(M,A)));return this},$.atan=function(M){var A=new at(M);return A.atan()},$.prototype.atanh=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.atanh(this.get(M,A)));return this},$.atanh=function(M){var A=new at(M);return A.atanh()},$.prototype.cbrt=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.cbrt(this.get(M,A)));return this},$.cbrt=function(M){var A=new at(M);return A.cbrt()},$.prototype.ceil=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.ceil(this.get(M,A)));return this},$.ceil=function(M){var A=new at(M);return A.ceil()},$.prototype.clz32=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.clz32(this.get(M,A)));return this},$.clz32=function(M){var A=new at(M);return A.clz32()},$.prototype.cos=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.cos(this.get(M,A)));return this},$.cos=function(M){var A=new at(M);return A.cos()},$.prototype.cosh=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.cosh(this.get(M,A)));return this},$.cosh=function(M){var A=new at(M);return A.cosh()},$.prototype.exp=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.exp(this.get(M,A)));return this},$.exp=function(M){var A=new at(M);return A.exp()},$.prototype.expm1=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.expm1(this.get(M,A)));return this},$.expm1=function(M){var A=new at(M);return A.expm1()},$.prototype.floor=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.floor(this.get(M,A)));return this},$.floor=function(M){var A=new at(M);return A.floor()},$.prototype.fround=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.fround(this.get(M,A)));return this},$.fround=function(M){var A=new at(M);return A.fround()},$.prototype.log=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.log(this.get(M,A)));return this},$.log=function(M){var A=new at(M);return A.log()},$.prototype.log1p=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.log1p(this.get(M,A)));return this},$.log1p=function(M){var A=new at(M);return A.log1p()},$.prototype.log10=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.log10(this.get(M,A)));return this},$.log10=function(M){var A=new at(M);return A.log10()},$.prototype.log2=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.log2(this.get(M,A)));return this},$.log2=function(M){var A=new at(M);return A.log2()},$.prototype.round=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.round(this.get(M,A)));return this},$.round=function(M){var A=new at(M);return A.round()},$.prototype.sign=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.sign(this.get(M,A)));return this},$.sign=function(M){var A=new at(M);return A.sign()},$.prototype.sin=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.sin(this.get(M,A)));return this},$.sin=function(M){var A=new at(M);return A.sin()},$.prototype.sinh=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.sinh(this.get(M,A)));return this},$.sinh=function(M){var A=new at(M);return A.sinh()},$.prototype.sqrt=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.sqrt(this.get(M,A)));return this},$.sqrt=function(M){var A=new at(M);return A.sqrt()},$.prototype.tan=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.tan(this.get(M,A)));return this},$.tan=function(M){var A=new at(M);return A.tan()},$.prototype.tanh=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.tanh(this.get(M,A)));return this},$.tanh=function(M){var A=new at(M);return A.tanh()},$.prototype.trunc=function(){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,Math.trunc(this.get(M,A)));return this},$.trunc=function(M){var A=new at(M);return A.trunc()},$.pow=function(M,A){var X=new at(M);return X.pow(A)},$.prototype.pow=function(M){return typeof M=="number"?this.powS(M):this.powM(M)},$.prototype.powS=function(M){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,Math.pow(this.get(A,X),M));return this},$.prototype.powM=function(M){if(M=at.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.set(A,X,Math.pow(this.get(A,X),M.get(A,X)));return this}}function J($,at,R){var M=R?$.rows:$.rows-1;if(at<0||at>M)throw new RangeError("Row index out of range")}function ft($,at,R){var M=R?$.columns:$.columns-1;if(at<0||at>M)throw new RangeError("Column index out of range")}function nt($,at){if(at.to1DArray&&(at=at.to1DArray()),at.length!==$.columns)throw new RangeError("vector size must be the same as the number of columns");return at}function yt($,at){if(at.to1DArray&&(at=at.to1DArray()),at.length!==$.rows)throw new RangeError("vector size must be the same as the number of rows");return at}function gt($,at){if(!D(at))throw new TypeError("row indices must be an array");for(var R=0;R<at.length;R++)if(at[R]<0||at[R]>=$.rows)throw new RangeError("row indices are out of range")}function zt($,at){if(!D(at))throw new TypeError("column indices must be an array");for(var R=0;R<at.length;R++)if(at[R]<0||at[R]>=$.columns)throw new RangeError("column indices are out of range")}function Mt($,at,R,M,A){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(rt("startRow",at),rt("endRow",R),rt("startColumn",M),rt("endColumn",A),at>R||M>A||at<0||at>=$.rows||R<0||R>=$.rows||M<0||M>=$.columns||A<0||A>=$.columns)throw new RangeError("Submatrix indices are out of range")}function Ct($){for(var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=[],M=0;M<$;M++)R.push(at);return R}function rt($,at){if(typeof at!="number")throw new TypeError("".concat($," must be a number"))}function ot($){if($.isEmpty())throw new Error("Empty matrix has no elements to index")}function Tt($){for(var at=Ct($.rows),R=0;R<$.rows;++R)for(var M=0;M<$.columns;++M)at[R]+=$.get(R,M);return at}function Rt($){for(var at=Ct($.columns),R=0;R<$.rows;++R)for(var M=0;M<$.columns;++M)at[M]+=$.get(R,M);return at}function st($){for(var at=0,R=0;R<$.rows;R++)for(var M=0;M<$.columns;M++)at+=$.get(R,M);return at}function bt($){for(var at=Ct($.rows,1),R=0;R<$.rows;++R)for(var M=0;M<$.columns;++M)at[R]*=$.get(R,M);return at}function Ft($){for(var at=Ct($.columns,1),R=0;R<$.rows;++R)for(var M=0;M<$.columns;++M)at[M]*=$.get(R,M);return at}function Ht($){for(var at=1,R=0;R<$.rows;R++)for(var M=0;M<$.columns;M++)at*=$.get(R,M);return at}function _t($,at,R){for(var M=$.rows,A=$.columns,X=[],mt=0;mt<M;mt++){for(var Lt=0,Pt=0,Jt=0,Ie=0;Ie<A;Ie++)Jt=$.get(mt,Ie)-R[mt],Lt+=Jt,Pt+=Jt*Jt;at?X.push((Pt-Lt*Lt/A)/(A-1)):X.push((Pt-Lt*Lt/A)/A)}return X}function Xt($,at,R){for(var M=$.rows,A=$.columns,X=[],mt=0;mt<A;mt++){for(var Lt=0,Pt=0,Jt=0,Ie=0;Ie<M;Ie++)Jt=$.get(Ie,mt)-R[mt],Lt+=Jt,Pt+=Jt*Jt;at?X.push((Pt-Lt*Lt/M)/(M-1)):X.push((Pt-Lt*Lt/M)/M)}return X}function ee($,at,R){for(var M=$.rows,A=$.columns,X=M*A,mt=0,Lt=0,Pt=0,Jt=0;Jt<M;Jt++)for(var Ie=0;Ie<A;Ie++)Pt=$.get(Jt,Ie)-R,mt+=Pt,Lt+=Pt*Pt;return at?(Lt-mt*mt/X)/(X-1):(Lt-mt*mt/X)/X}function se($,at){for(var R=0;R<$.rows;R++)for(var M=0;M<$.columns;M++)$.set(R,M,$.get(R,M)-at[R])}function ue($,at){for(var R=0;R<$.rows;R++)for(var M=0;M<$.columns;M++)$.set(R,M,$.get(R,M)-at[M])}function Ut($,at){for(var R=0;R<$.rows;R++)for(var M=0;M<$.columns;M++)$.set(R,M,$.get(R,M)-at)}function oe($){for(var at=[],R=0;R<$.rows;R++){for(var M=0,A=0;A<$.columns;A++)M+=Math.pow($.get(R,A),2)/($.columns-1);at.push(Math.sqrt(M))}return at}function Pe($,at){for(var R=0;R<$.rows;R++)for(var M=0;M<$.columns;M++)$.set(R,M,$.get(R,M)/at[R])}function te($){for(var at=[],R=0;R<$.columns;R++){for(var M=0,A=0;A<$.rows;A++)M+=Math.pow($.get(A,R),2)/($.rows-1);at.push(Math.sqrt(M))}return at}function ve($,at){for(var R=0;R<$.rows;R++)for(var M=0;M<$.columns;M++)$.set(R,M,$.get(R,M)/at[M])}function Ue($){for(var at=$.size-1,R=0,M=0;M<$.columns;M++)for(var A=0;A<$.rows;A++)R+=Math.pow($.get(A,M),2)/at;return Math.sqrt(R)}function xe($,at){for(var R=0;R<$.rows;R++)for(var M=0;M<$.columns;M++)$.set(R,M,$.get(R,M)/at)}var Re=function(){function $(){y()(this,$)}return O()($,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(R){if(typeof R!="function")throw new TypeError("callback must be a function");for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)R.call(this,M,A);return this}},{key:"to1DArray",value:function(){for(var R=[],M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)R.push(this.get(M,A));return R}},{key:"to2DArray",value:function(){for(var R=[],M=0;M<this.rows;M++){R.push([]);for(var A=0;A<this.columns;A++)R[M].push(this.get(M,A))}return R}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var R=0;R<this.rows;R++)for(var M=0;M<=R;M++)if(this.get(R,M)!==this.get(M,R))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var R=0,M=0,A=-1,X=!0,mt=!1;R<this.rows&&X;){for(M=0,mt=!1;M<this.columns&&mt===!1;)this.get(R,M)===0?M++:this.get(R,M)===1&&M>A?(mt=!0,A=M):(X=!1,mt=!0);R++}return X}},{key:"isReducedEchelonForm",value:function(){for(var R=0,M=0,A=-1,X=!0,mt=!1;R<this.rows&&X;){for(M=0,mt=!1;M<this.columns&&mt===!1;)this.get(R,M)===0?M++:this.get(R,M)===1&&M>A?(mt=!0,A=M):(X=!1,mt=!0);for(var Lt=M+1;Lt<this.rows;Lt++)this.get(R,Lt)!==0&&(X=!1);R++}return X}},{key:"echelonForm",value:function(){for(var R=this.clone(),M=0,A=0;M<R.rows&&A<R.columns;){for(var X=M,mt=M;mt<R.rows;mt++)R.get(mt,A)>R.get(X,A)&&(X=mt);if(R.get(X,A)===0)A++;else{R.swapRows(M,X);for(var Lt=R.get(M,A),Pt=A;Pt<R.columns;Pt++)R.set(M,Pt,R.get(M,Pt)/Lt);for(var Jt=M+1;Jt<R.rows;Jt++){var Ie=R.get(Jt,A)/R.get(M,A);R.set(Jt,A,0);for(var pe=A+1;pe<R.columns;pe++)R.set(Jt,pe,R.get(Jt,pe)-R.get(M,pe)*Ie)}M++,A++}}return R}},{key:"reducedEchelonForm",value:function(){for(var R=this.echelonForm(),M=R.columns,A=R.rows,X=A-1;X>=0;)if(R.maxRow(X)===0)X--;else{for(var mt=0,Lt=!1;mt<A&&Lt===!1;)R.get(X,mt)===1?Lt=!0:mt++;for(var Pt=0;Pt<X;Pt++)for(var Jt=R.get(Pt,mt),Ie=mt;Ie<M;Ie++){var pe=R.get(Pt,Ie)-Jt*R.get(X,Ie);R.set(Pt,Ie,pe)}X--}return R}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m()(R)!=="object")throw new TypeError("options must be an object");var M=R.rows,A=M===void 0?1:M,X=R.columns,mt=X===void 0?1:X;if(!Number.isInteger(A)||A<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(mt)||mt<=0)throw new TypeError("columns must be a positive integer");for(var Lt=new ae(this.rows*A,this.columns*mt),Pt=0;Pt<A;Pt++)for(var Jt=0;Jt<mt;Jt++)Lt.setSubMatrix(this,this.rows*Pt,this.columns*Jt);return Lt}},{key:"fill",value:function(R){for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,R);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(R){J(this,R);for(var M=[],A=0;A<this.columns;A++)M.push(this.get(R,A));return M}},{key:"getRowVector",value:function(R){return ae.rowVector(this.getRow(R))}},{key:"setRow",value:function(R,M){J(this,R),M=nt(this,M);for(var A=0;A<this.columns;A++)this.set(R,A,M[A]);return this}},{key:"swapRows",value:function(R,M){J(this,R),J(this,M);for(var A=0;A<this.columns;A++){var X=this.get(R,A);this.set(R,A,this.get(M,A)),this.set(M,A,X)}return this}},{key:"getColumn",value:function(R){ft(this,R);for(var M=[],A=0;A<this.rows;A++)M.push(this.get(A,R));return M}},{key:"getColumnVector",value:function(R){return ae.columnVector(this.getColumn(R))}},{key:"setColumn",value:function(R,M){ft(this,R),M=yt(this,M);for(var A=0;A<this.rows;A++)this.set(A,R,M[A]);return this}},{key:"swapColumns",value:function(R,M){ft(this,R),ft(this,M);for(var A=0;A<this.rows;A++){var X=this.get(A,R);this.set(A,R,this.get(A,M)),this.set(A,M,X)}return this}},{key:"addRowVector",value:function(R){R=nt(this,R);for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,this.get(M,A)+R[A]);return this}},{key:"subRowVector",value:function(R){R=nt(this,R);for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,this.get(M,A)-R[A]);return this}},{key:"mulRowVector",value:function(R){R=nt(this,R);for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,this.get(M,A)*R[A]);return this}},{key:"divRowVector",value:function(R){R=nt(this,R);for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,this.get(M,A)/R[A]);return this}},{key:"addColumnVector",value:function(R){R=yt(this,R);for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,this.get(M,A)+R[M]);return this}},{key:"subColumnVector",value:function(R){R=yt(this,R);for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,this.get(M,A)-R[M]);return this}},{key:"mulColumnVector",value:function(R){R=yt(this,R);for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,this.get(M,A)*R[M]);return this}},{key:"divColumnVector",value:function(R){R=yt(this,R);for(var M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)this.set(M,A,this.get(M,A)/R[M]);return this}},{key:"mulRow",value:function(R,M){J(this,R);for(var A=0;A<this.columns;A++)this.set(R,A,this.get(R,A)*M);return this}},{key:"mulColumn",value:function(R,M){ft(this,R);for(var A=0;A<this.rows;A++)this.set(A,R,this.get(A,R)*M);return this}},{key:"max",value:function(R){if(this.isEmpty())return NaN;switch(R){case"row":{for(var M=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.get(A,X)>M[A]&&(M[A]=this.get(A,X));return M}case"column":{for(var mt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),Lt=0;Lt<this.rows;Lt++)for(var Pt=0;Pt<this.columns;Pt++)this.get(Lt,Pt)>mt[Pt]&&(mt[Pt]=this.get(Lt,Pt));return mt}case void 0:{for(var Jt=this.get(0,0),Ie=0;Ie<this.rows;Ie++)for(var pe=0;pe<this.columns;pe++)this.get(Ie,pe)>Jt&&(Jt=this.get(Ie,pe));return Jt}default:throw new Error("invalid option: ".concat(R))}}},{key:"maxIndex",value:function(){ot(this);for(var R=this.get(0,0),M=[0,0],A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.get(A,X)>R&&(R=this.get(A,X),M[0]=A,M[1]=X);return M}},{key:"min",value:function(R){if(this.isEmpty())return NaN;switch(R){case"row":{for(var M=new Array(this.rows).fill(Number.POSITIVE_INFINITY),A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.get(A,X)<M[A]&&(M[A]=this.get(A,X));return M}case"column":{for(var mt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),Lt=0;Lt<this.rows;Lt++)for(var Pt=0;Pt<this.columns;Pt++)this.get(Lt,Pt)<mt[Pt]&&(mt[Pt]=this.get(Lt,Pt));return mt}case void 0:{for(var Jt=this.get(0,0),Ie=0;Ie<this.rows;Ie++)for(var pe=0;pe<this.columns;pe++)this.get(Ie,pe)<Jt&&(Jt=this.get(Ie,pe));return Jt}default:throw new Error("invalid option: ".concat(R))}}},{key:"minIndex",value:function(){ot(this);for(var R=this.get(0,0),M=[0,0],A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)this.get(A,X)<R&&(R=this.get(A,X),M[0]=A,M[1]=X);return M}},{key:"maxRow",value:function(R){if(J(this,R),this.isEmpty())return NaN;for(var M=this.get(R,0),A=1;A<this.columns;A++)this.get(R,A)>M&&(M=this.get(R,A));return M}},{key:"maxRowIndex",value:function(R){J(this,R),ot(this);for(var M=this.get(R,0),A=[R,0],X=1;X<this.columns;X++)this.get(R,X)>M&&(M=this.get(R,X),A[1]=X);return A}},{key:"minRow",value:function(R){if(J(this,R),this.isEmpty())return NaN;for(var M=this.get(R,0),A=1;A<this.columns;A++)this.get(R,A)<M&&(M=this.get(R,A));return M}},{key:"minRowIndex",value:function(R){J(this,R),ot(this);for(var M=this.get(R,0),A=[R,0],X=1;X<this.columns;X++)this.get(R,X)<M&&(M=this.get(R,X),A[1]=X);return A}},{key:"maxColumn",value:function(R){if(ft(this,R),this.isEmpty())return NaN;for(var M=this.get(0,R),A=1;A<this.rows;A++)this.get(A,R)>M&&(M=this.get(A,R));return M}},{key:"maxColumnIndex",value:function(R){ft(this,R),ot(this);for(var M=this.get(0,R),A=[0,R],X=1;X<this.rows;X++)this.get(X,R)>M&&(M=this.get(X,R),A[0]=X);return A}},{key:"minColumn",value:function(R){if(ft(this,R),this.isEmpty())return NaN;for(var M=this.get(0,R),A=1;A<this.rows;A++)this.get(A,R)<M&&(M=this.get(A,R));return M}},{key:"minColumnIndex",value:function(R){ft(this,R),ot(this);for(var M=this.get(0,R),A=[0,R],X=1;X<this.rows;X++)this.get(X,R)<M&&(M=this.get(X,R),A[0]=X);return A}},{key:"diag",value:function(){for(var R=Math.min(this.rows,this.columns),M=[],A=0;A<R;A++)M.push(this.get(A,A));return M}},{key:"norm",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",M=0;if(R==="max")return this.max();if(R==="frobenius"){for(var A=0;A<this.rows;A++)for(var X=0;X<this.columns;X++)M=M+this.get(A,X)*this.get(A,X);return Math.sqrt(M)}else throw new RangeError("unknown norm type: ".concat(R))}},{key:"cumulativeSum",value:function(){for(var R=0,M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)R+=this.get(M,A),this.set(M,A,R);return this}},{key:"dot",value:function(R){$.isMatrix(R)&&(R=R.to1DArray());var M=this.to1DArray();if(M.length!==R.length)throw new RangeError("vectors do not have the same size");for(var A=0,X=0;X<M.length;X++)A+=M[X]*R[X];return A}},{key:"mmul",value:function(R){R=ae.checkMatrix(R);for(var M=this.rows,A=this.columns,X=R.columns,mt=new ae(M,X),Lt=new Float64Array(A),Pt=0;Pt<X;Pt++){for(var Jt=0;Jt<A;Jt++)Lt[Jt]=R.get(Jt,Pt);for(var Ie=0;Ie<M;Ie++){for(var pe=0,je=0;je<A;je++)pe+=this.get(Ie,je)*Lt[je];mt.set(Ie,Pt,pe)}}return mt}},{key:"strassen2x2",value:function(R){R=ae.checkMatrix(R);var M=new ae(2,2),A=this.get(0,0),X=R.get(0,0),mt=this.get(0,1),Lt=R.get(0,1),Pt=this.get(1,0),Jt=R.get(1,0),Ie=this.get(1,1),pe=R.get(1,1),je=(A+Ie)*(X+pe),br=(Pt+Ie)*X,Je=A*(Lt-pe),zr=Ie*(Jt-X),gn=(A+mt)*pe,tr=(Pt-A)*(X+Lt),xr=(mt-Ie)*(Jt+pe),Ur=je+zr-gn+xr,Nr=Je+gn,fe=br+zr,Wt=je-br+Je+tr;return M.set(0,0,Ur),M.set(0,1,Nr),M.set(1,0,fe),M.set(1,1,Wt),M}},{key:"strassen3x3",value:function(R){R=ae.checkMatrix(R);var M=new ae(3,3),A=this.get(0,0),X=this.get(0,1),mt=this.get(0,2),Lt=this.get(1,0),Pt=this.get(1,1),Jt=this.get(1,2),Ie=this.get(2,0),pe=this.get(2,1),je=this.get(2,2),br=R.get(0,0),Je=R.get(0,1),zr=R.get(0,2),gn=R.get(1,0),tr=R.get(1,1),xr=R.get(1,2),Ur=R.get(2,0),Nr=R.get(2,1),fe=R.get(2,2),Wt=(A+X+mt-Lt-Pt-pe-je)*tr,ge=(A-Lt)*(-Je+tr),Ae=Pt*(-br+Je+gn-tr-xr-Ur+fe),Se=(-A+Lt+Pt)*(br-Je+tr),Be=(Lt+Pt)*(-br+Je),vr=A*br,Mr=(-A+Ie+pe)*(br-zr+xr),fn=(-A+Ie)*(zr-xr),Xn=(Ie+pe)*(-br+zr),Mn=(A+X+mt-Pt-Jt-Ie-pe)*xr,qn=pe*(-br+zr+gn-tr-xr-Ur+Nr),bn=(-mt+pe+je)*(tr+Ur-Nr),Vn=(mt-je)*(tr-Nr),ca=mt*Ur,xa=(pe+je)*(-Ur+Nr),Ea=(-mt+Pt+Jt)*(xr+Ur-fe),Ni=(mt-Jt)*(xr-fe),ti=(Pt+Jt)*(-Ur+fe),ei=X*gn,Mi=Jt*Nr,Gi=Lt*zr,To=Ie*Je,ro=je*fe,ga=vr+ca+ei,fo=Wt+Se+Be+vr+bn+ca+xa,Ao=vr+Mr+Xn+Mn+ca+Ea+ti,ni=ge+Ae+Se+vr+ca+Ea+Ni,Ri=ge+Se+Be+vr+Mi,co=ca+Ea+Ni+ti+Gi,Po=vr+Mr+fn+qn+bn+Vn+ca,no=bn+Vn+ca+xa+To,ao=vr+Mr+fn+Xn+ro;return M.set(0,0,ga),M.set(0,1,fo),M.set(0,2,Ao),M.set(1,0,ni),M.set(1,1,Ri),M.set(1,2,co),M.set(2,0,Po),M.set(2,1,no),M.set(2,2,ao),M}},{key:"mmulStrassen",value:function(R){R=ae.checkMatrix(R);var M=this.clone(),A=M.rows,X=M.columns,mt=R.rows,Lt=R.columns;X!==mt&&console.warn("Multiplying ".concat(A," x ").concat(X," and ").concat(mt," x ").concat(Lt," matrix: dimensions do not match."));function Pt(je,br,Je){var zr=je.rows,gn=je.columns;if(zr===br&&gn===Je)return je;var tr=$.zeros(br,Je);return tr=tr.setSubMatrix(je,0,0),tr}var Jt=Math.max(A,mt),Ie=Math.max(X,Lt);M=Pt(M,Jt,Ie),R=Pt(R,Jt,Ie);function pe(je,br,Je,zr){if(Je<=512||zr<=512)return je.mmul(br);Je%2===1&&zr%2===1?(je=Pt(je,Je+1,zr+1),br=Pt(br,Je+1,zr+1)):Je%2===1?(je=Pt(je,Je+1,zr),br=Pt(br,Je+1,zr)):zr%2===1&&(je=Pt(je,Je,zr+1),br=Pt(br,Je,zr+1));var gn=parseInt(je.rows/2,10),tr=parseInt(je.columns/2,10),xr=je.subMatrix(0,gn-1,0,tr-1),Ur=br.subMatrix(0,gn-1,0,tr-1),Nr=je.subMatrix(0,gn-1,tr,je.columns-1),fe=br.subMatrix(0,gn-1,tr,br.columns-1),Wt=je.subMatrix(gn,je.rows-1,0,tr-1),ge=br.subMatrix(gn,br.rows-1,0,tr-1),Ae=je.subMatrix(gn,je.rows-1,tr,je.columns-1),Se=br.subMatrix(gn,br.rows-1,tr,br.columns-1),Be=pe($.add(xr,Ae),$.add(Ur,Se),gn,tr),vr=pe($.add(Wt,Ae),Ur,gn,tr),Mr=pe(xr,$.sub(fe,Se),gn,tr),fn=pe(Ae,$.sub(ge,Ur),gn,tr),Xn=pe($.add(xr,Nr),Se,gn,tr),Mn=pe($.sub(Wt,xr),$.add(Ur,fe),gn,tr),qn=pe($.sub(Nr,Ae),$.add(ge,Se),gn,tr),bn=$.add(Be,fn);bn.sub(Xn),bn.add(qn);var Vn=$.add(Mr,Xn),ca=$.add(vr,fn),xa=$.sub(Be,vr);xa.add(Mr),xa.add(Mn);var Ea=$.zeros(2*bn.rows,2*bn.columns);return Ea=Ea.setSubMatrix(bn,0,0),Ea=Ea.setSubMatrix(Vn,bn.rows,0),Ea=Ea.setSubMatrix(ca,0,bn.columns),Ea=Ea.setSubMatrix(xa,bn.rows,bn.columns),Ea.subMatrix(0,Je-1,0,zr-1)}return pe(M,R,Jt,Ie)}},{key:"scaleRows",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m()(R)!=="object")throw new TypeError("options must be an object");var M=R.min,A=M===void 0?0:M,X=R.max,mt=X===void 0?1:X;if(!Number.isFinite(A))throw new TypeError("min must be a number");if(!Number.isFinite(mt))throw new TypeError("max must be a number");if(A>=mt)throw new RangeError("min must be smaller than max");for(var Lt=new ae(this.rows,this.columns),Pt=0;Pt<this.rows;Pt++){var Jt=this.getRow(Pt);Jt.length>0&&b(Jt,{min:A,max:mt,output:Jt}),Lt.setRow(Pt,Jt)}return Lt}},{key:"scaleColumns",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m()(R)!=="object")throw new TypeError("options must be an object");var M=R.min,A=M===void 0?0:M,X=R.max,mt=X===void 0?1:X;if(!Number.isFinite(A))throw new TypeError("min must be a number");if(!Number.isFinite(mt))throw new TypeError("max must be a number");if(A>=mt)throw new RangeError("min must be smaller than max");for(var Lt=new ae(this.rows,this.columns),Pt=0;Pt<this.columns;Pt++){var Jt=this.getColumn(Pt);Jt.length&&b(Jt,{min:A,max:mt,output:Jt}),Lt.setColumn(Pt,Jt)}return Lt}},{key:"flipRows",value:function(){for(var R=Math.ceil(this.columns/2),M=0;M<this.rows;M++)for(var A=0;A<R;A++){var X=this.get(M,A),mt=this.get(M,this.columns-1-A);this.set(M,A,mt),this.set(M,this.columns-1-A,X)}return this}},{key:"flipColumns",value:function(){for(var R=Math.ceil(this.rows/2),M=0;M<this.columns;M++)for(var A=0;A<R;A++){var X=this.get(A,M),mt=this.get(this.rows-1-A,M);this.set(A,M,mt),this.set(this.rows-1-A,M,X)}return this}},{key:"kroneckerProduct",value:function(R){R=ae.checkMatrix(R);for(var M=this.rows,A=this.columns,X=R.rows,mt=R.columns,Lt=new ae(M*X,A*mt),Pt=0;Pt<M;Pt++)for(var Jt=0;Jt<A;Jt++)for(var Ie=0;Ie<X;Ie++)for(var pe=0;pe<mt;pe++)Lt.set(X*Pt+Ie,mt*Jt+pe,this.get(Pt,Jt)*R.get(Ie,pe));return Lt}},{key:"kroneckerSum",value:function(R){if(R=ae.checkMatrix(R),!this.isSquare()||!R.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var M=this.rows,A=R.rows,X=this.kroneckerProduct(ae.eye(A,A)),mt=ae.eye(M,M).kroneckerProduct(R);return X.add(mt)}},{key:"transpose",value:function(){for(var R=new ae(this.columns,this.rows),M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)R.set(A,M,this.get(M,A));return R}},{key:"sortRows",value:function(){for(var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:de,M=0;M<this.rows;M++)this.setRow(M,this.getRow(M).sort(R));return this}},{key:"sortColumns",value:function(){for(var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:de,M=0;M<this.columns;M++)this.setColumn(M,this.getColumn(M).sort(R));return this}},{key:"subMatrix",value:function(R,M,A,X){Mt(this,R,M,A,X);for(var mt=new ae(M-R+1,X-A+1),Lt=R;Lt<=M;Lt++)for(var Pt=A;Pt<=X;Pt++)mt.set(Lt-R,Pt-A,this.get(Lt,Pt));return mt}},{key:"subMatrixRow",value:function(R,M,A){if(M===void 0&&(M=0),A===void 0&&(A=this.columns-1),M>A||M<0||M>=this.columns||A<0||A>=this.columns)throw new RangeError("Argument out of range");for(var X=new ae(R.length,A-M+1),mt=0;mt<R.length;mt++)for(var Lt=M;Lt<=A;Lt++){if(R[mt]<0||R[mt]>=this.rows)throw new RangeError("Row index out of range: ".concat(R[mt]));X.set(mt,Lt-M,this.get(R[mt],Lt))}return X}},{key:"subMatrixColumn",value:function(R,M,A){if(M===void 0&&(M=0),A===void 0&&(A=this.rows-1),M>A||M<0||M>=this.rows||A<0||A>=this.rows)throw new RangeError("Argument out of range");for(var X=new ae(A-M+1,R.length),mt=0;mt<R.length;mt++)for(var Lt=M;Lt<=A;Lt++){if(R[mt]<0||R[mt]>=this.columns)throw new RangeError("Column index out of range: ".concat(R[mt]));X.set(Lt-M,mt,this.get(Lt,R[mt]))}return X}},{key:"setSubMatrix",value:function(R,M,A){if(R=ae.checkMatrix(R),R.isEmpty())return this;var X=M+R.rows-1,mt=A+R.columns-1;Mt(this,M,X,A,mt);for(var Lt=0;Lt<R.rows;Lt++)for(var Pt=0;Pt<R.columns;Pt++)this.set(M+Lt,A+Pt,R.get(Lt,Pt));return this}},{key:"selection",value:function(R,M){gt(this,R),zt(this,M);for(var A=new ae(R.length,M.length),X=0;X<R.length;X++)for(var mt=R[X],Lt=0;Lt<M.length;Lt++){var Pt=M[Lt];A.set(X,Lt,this.get(mt,Pt))}return A}},{key:"trace",value:function(){for(var R=Math.min(this.rows,this.columns),M=0,A=0;A<R;A++)M+=this.get(A,A);return M}},{key:"clone",value:function(){for(var R=new ae(this.rows,this.columns),M=0;M<this.rows;M++)for(var A=0;A<this.columns;A++)R.set(M,A,this.get(M,A));return R}},{key:"sum",value:function(R){switch(R){case"row":return Tt(this);case"column":return Rt(this);case void 0:return st(this);default:throw new Error("invalid option: ".concat(R))}}},{key:"product",value:function(R){switch(R){case"row":return bt(this);case"column":return Ft(this);case void 0:return Ht(this);default:throw new Error("invalid option: ".concat(R))}}},{key:"mean",value:function(R){var M=this.sum(R);switch(R){case"row":{for(var A=0;A<this.rows;A++)M[A]/=this.columns;return M}case"column":{for(var X=0;X<this.columns;X++)M[X]/=this.rows;return M}case void 0:return M/this.size;default:throw new Error("invalid option: ".concat(R))}}},{key:"variance",value:function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(R)==="object"&&(M=R,R=void 0),m()(M)!=="object")throw new TypeError("options must be an object");var A=M,X=A.unbiased,mt=X===void 0?!0:X,Lt=A.mean,Pt=Lt===void 0?this.mean(R):Lt;if(typeof mt!="boolean")throw new TypeError("unbiased must be a boolean");switch(R){case"row":{if(!D(Pt))throw new TypeError("mean must be an array");return _t(this,mt,Pt)}case"column":{if(!D(Pt))throw new TypeError("mean must be an array");return Xt(this,mt,Pt)}case void 0:{if(typeof Pt!="number")throw new TypeError("mean must be a number");return ee(this,mt,Pt)}default:throw new Error("invalid option: ".concat(R))}}},{key:"standardDeviation",value:function(R,M){m()(R)==="object"&&(M=R,R=void 0);var A=this.variance(R,M);if(R===void 0)return Math.sqrt(A);for(var X=0;X<A.length;X++)A[X]=Math.sqrt(A[X]);return A}},{key:"center",value:function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(R)==="object"&&(M=R,R=void 0),m()(M)!=="object")throw new TypeError("options must be an object");var A=M,X=A.center,mt=X===void 0?this.mean(R):X;switch(R){case"row":{if(!D(mt))throw new TypeError("center must be an array");return se(this,mt),this}case"column":{if(!D(mt))throw new TypeError("center must be an array");return ue(this,mt),this}case void 0:{if(typeof mt!="number")throw new TypeError("center must be a number");return Ut(this,mt),this}default:throw new Error("invalid option: ".concat(R))}}},{key:"scale",value:function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(R)==="object"&&(M=R,R=void 0),m()(M)!=="object")throw new TypeError("options must be an object");var A=M.scale;switch(R){case"row":{if(A===void 0)A=oe(this);else if(!D(A))throw new TypeError("scale must be an array");return Pe(this,A),this}case"column":{if(A===void 0)A=te(this);else if(!D(A))throw new TypeError("scale must be an array");return ve(this,A),this}case void 0:{if(A===void 0)A=Ue(this);else if(typeof A!="number")throw new TypeError("scale must be a number");return xe(this,A),this}default:throw new Error("invalid option: ".concat(R))}}},{key:"toString",value:function(R){return Y(this,R)}}],[{key:"from1DArray",value:function(R,M,A){var X=R*M;if(X!==A.length)throw new RangeError("data length does not match given dimensions");for(var mt=new ae(R,M),Lt=0;Lt<R;Lt++)for(var Pt=0;Pt<M;Pt++)mt.set(Lt,Pt,A[Lt*M+Pt]);return mt}},{key:"rowVector",value:function(R){for(var M=new ae(1,R.length),A=0;A<R.length;A++)M.set(0,A,R[A]);return M}},{key:"columnVector",value:function(R){for(var M=new ae(R.length,1),A=0;A<R.length;A++)M.set(A,0,R[A]);return M}},{key:"zeros",value:function(R,M){return new ae(R,M)}},{key:"ones",value:function(R,M){return new ae(R,M).fill(1)}},{key:"rand",value:function(R,M){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(m()(A)!=="object")throw new TypeError("options must be an object");for(var X=A.random,mt=X===void 0?Math.random:X,Lt=new ae(R,M),Pt=0;Pt<R;Pt++)for(var Jt=0;Jt<M;Jt++)Lt.set(Pt,Jt,mt());return Lt}},{key:"randInt",value:function(R,M){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(m()(A)!=="object")throw new TypeError("options must be an object");var X=A.min,mt=X===void 0?0:X,Lt=A.max,Pt=Lt===void 0?1e3:Lt,Jt=A.random,Ie=Jt===void 0?Math.random:Jt;if(!Number.isInteger(mt))throw new TypeError("min must be an integer");if(!Number.isInteger(Pt))throw new TypeError("max must be an integer");if(mt>=Pt)throw new RangeError("min must be smaller than max");for(var pe=Pt-mt,je=new ae(R,M),br=0;br<R;br++)for(var Je=0;Je<M;Je++){var zr=mt+Math.round(Ie()*pe);je.set(br,Je,zr)}return je}},{key:"eye",value:function(R,M,A){M===void 0&&(M=R),A===void 0&&(A=1);for(var X=Math.min(R,M),mt=this.zeros(R,M),Lt=0;Lt<X;Lt++)mt.set(Lt,Lt,A);return mt}},{key:"diag",value:function(R,M,A){var X=R.length;M===void 0&&(M=X),A===void 0&&(A=M);for(var mt=Math.min(X,M,A),Lt=this.zeros(M,A),Pt=0;Pt<mt;Pt++)Lt.set(Pt,Pt,R[Pt]);return Lt}},{key:"min",value:function(R,M){R=this.checkMatrix(R),M=this.checkMatrix(M);for(var A=R.rows,X=R.columns,mt=new ae(A,X),Lt=0;Lt<A;Lt++)for(var Pt=0;Pt<X;Pt++)mt.set(Lt,Pt,Math.min(R.get(Lt,Pt),M.get(Lt,Pt)));return mt}},{key:"max",value:function(R,M){R=this.checkMatrix(R),M=this.checkMatrix(M);for(var A=R.rows,X=R.columns,mt=new this(A,X),Lt=0;Lt<A;Lt++)for(var Pt=0;Pt<X;Pt++)mt.set(Lt,Pt,Math.max(R.get(Lt,Pt),M.get(Lt,Pt)));return mt}},{key:"checkMatrix",value:function(R){return $.isMatrix(R)?R:new ae(R)}},{key:"isMatrix",value:function(R){return R!=null&&R.klass==="Matrix"}}]),$}();Re.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Re.prototype[Symbol.for("nodejs.util.inspect.custom")]=U);function de($,at){return $-at}function ht($){return $.every(function(at){return typeof at=="number"})}Re.random=Re.rand,Re.randomInt=Re.randInt,Re.diagonal=Re.diag,Re.prototype.diagonal=Re.prototype.diag,Re.identity=Re.eye,Re.prototype.negate=Re.prototype.neg,Re.prototype.tensorProduct=Re.prototype.kroneckerProduct;var ae=function($){T()(R,$);var at=P()(R);function R(M,A){var X;if(y()(this,R),X=at.call(this),R.isMatrix(M))return k()(X,M.clone());if(Number.isInteger(M)&&M>=0)if(X.data=[],Number.isInteger(A)&&A>=0)for(var mt=0;mt<M;mt++)X.data.push(new Float64Array(A));else throw new TypeError("nColumns must be a positive integer");else if(D(M)){var Lt=M;if(M=Lt.length,A=M?Lt[0].length:0,typeof A!="number")throw new TypeError("Data must be a 2D array with at least one element");X.data=[];for(var Pt=0;Pt<M;Pt++){if(Lt[Pt].length!==A)throw new RangeError("Inconsistent array dimensions");if(!ht(Lt[Pt]))throw new TypeError("Input data contains non-numeric values");X.data.push(Float64Array.from(Lt[Pt]))}}else throw new TypeError("First argument must be a positive number or an array");return X.rows=M,X.columns=A,X}return O()(R,[{key:"set",value:function(A,X,mt){return this.data[A][X]=mt,this}},{key:"get",value:function(A,X){return this.data[A][X]}},{key:"removeRow",value:function(A){return J(this,A),this.data.splice(A,1),this.rows-=1,this}},{key:"addRow",value:function(A,X){return X===void 0&&(X=A,A=this.rows),J(this,A,!0),X=Float64Array.from(nt(this,X)),this.data.splice(A,0,X),this.rows+=1,this}},{key:"removeColumn",value:function(A){ft(this,A);for(var X=0;X<this.rows;X++){for(var mt=new Float64Array(this.columns-1),Lt=0;Lt<A;Lt++)mt[Lt]=this.data[X][Lt];for(var Pt=A+1;Pt<this.columns;Pt++)mt[Pt-1]=this.data[X][Pt];this.data[X]=mt}return this.columns-=1,this}},{key:"addColumn",value:function(A,X){typeof X=="undefined"&&(X=A,A=this.columns),ft(this,A,!0),X=yt(this,X);for(var mt=0;mt<this.rows;mt++){for(var Lt=new Float64Array(this.columns+1),Pt=0;Pt<A;Pt++)Lt[Pt]=this.data[mt][Pt];for(Lt[Pt++]=X[mt];Pt<this.columns+1;Pt++)Lt[Pt]=this.data[mt][Pt-1];this.data[mt]=Lt}return this.columns+=1,this}}]),R}(Re);Q(Re,ae);var Le=function($){T()(R,$);var at=P()(R);function R(M,A,X){var mt;return y()(this,R),mt=at.call(this),mt.matrix=M,mt.rows=A,mt.columns=X,mt}return O()(R)}(Re),Ze=function($){T()(R,$);var at=P()(R);function R(M,A){var X;return y()(this,R),ft(M,A),X=at.call(this,M,M.rows,1),X.column=A,X}return O()(R,[{key:"set",value:function(A,X,mt){return this.matrix.set(A,this.column,mt),this}},{key:"get",value:function(A){return this.matrix.get(A,this.column)}}]),R}(Le),qe=function($){T()(R,$);var at=P()(R);function R(M,A){var X;return y()(this,R),zt(M,A),X=at.call(this,M,M.rows,A.length),X.columnIndices=A,X}return O()(R,[{key:"set",value:function(A,X,mt){return this.matrix.set(A,this.columnIndices[X],mt),this}},{key:"get",value:function(A,X){return this.matrix.get(A,this.columnIndices[X])}}]),R}(Le),fr=function($){T()(R,$);var at=P()(R);function R(M){return y()(this,R),at.call(this,M,M.rows,M.columns)}return O()(R,[{key:"set",value:function(A,X,mt){return this.matrix.set(A,this.columns-X-1,mt),this}},{key:"get",value:function(A,X){return this.matrix.get(A,this.columns-X-1)}}]),R}(Le),ur=function($){T()(R,$);var at=P()(R);function R(M){return y()(this,R),at.call(this,M,M.rows,M.columns)}return O()(R,[{key:"set",value:function(A,X,mt){return this.matrix.set(this.rows-A-1,X,mt),this}},{key:"get",value:function(A,X){return this.matrix.get(this.rows-A-1,X)}}]),R}(Le),kr=function($){T()(R,$);var at=P()(R);function R(M,A){var X;return y()(this,R),J(M,A),X=at.call(this,M,1,M.columns),X.row=A,X}return O()(R,[{key:"set",value:function(A,X,mt){return this.matrix.set(this.row,X,mt),this}},{key:"get",value:function(A,X){return this.matrix.get(this.row,X)}}]),R}(Le),yn=function($){T()(R,$);var at=P()(R);function R(M,A){var X;return y()(this,R),gt(M,A),X=at.call(this,M,A.length,M.columns),X.rowIndices=A,X}return O()(R,[{key:"set",value:function(A,X,mt){return this.matrix.set(this.rowIndices[A],X,mt),this}},{key:"get",value:function(A,X){return this.matrix.get(this.rowIndices[A],X)}}]),R}(Le),un=function($){T()(R,$);var at=P()(R);function R(M,A,X){var mt;return y()(this,R),gt(M,A),zt(M,X),mt=at.call(this,M,A.length,X.length),mt.rowIndices=A,mt.columnIndices=X,mt}return O()(R,[{key:"set",value:function(A,X,mt){return this.matrix.set(this.rowIndices[A],this.columnIndices[X],mt),this}},{key:"get",value:function(A,X){return this.matrix.get(this.rowIndices[A],this.columnIndices[X])}}]),R}(Le),Vr=function($){T()(R,$);var at=P()(R);function R(M,A,X,mt,Lt){var Pt;return y()(this,R),Mt(M,A,X,mt,Lt),Pt=at.call(this,M,X-A+1,Lt-mt+1),Pt.startRow=A,Pt.startColumn=mt,Pt}return O()(R,[{key:"set",value:function(A,X,mt){return this.matrix.set(this.startRow+A,this.startColumn+X,mt),this}},{key:"get",value:function(A,X){return this.matrix.get(this.startRow+A,this.startColumn+X)}}]),R}(Le),$e=function($){T()(R,$);var at=P()(R);function R(M){return y()(this,R),at.call(this,M,M.columns,M.rows)}return O()(R,[{key:"set",value:function(A,X,mt){return this.matrix.set(X,A,mt),this}},{key:"get",value:function(A,X){return this.matrix.get(X,A)}}]),R}(Le),dr=function($){T()(R,$);var at=P()(R);function R(M){var A,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};y()(this,R);var mt=X.rows,Lt=mt===void 0?1:mt;if(M.length%Lt!==0)throw new Error("the data length is not divisible by the number of rows");return A=at.call(this),A.rows=Lt,A.columns=M.length/Lt,A.data=M,A}return O()(R,[{key:"set",value:function(A,X,mt){var Lt=this._calculateIndex(A,X);return this.data[Lt]=mt,this}},{key:"get",value:function(A,X){var mt=this._calculateIndex(A,X);return this.data[mt]}},{key:"_calculateIndex",value:function(A,X){return A*this.columns+X}}]),R}(Re),ar=function($){T()(R,$);var at=P()(R);function R(M){var A;return y()(this,R),A=at.call(this),A.data=M,A.rows=M.length,A.columns=M[0].length,A}return O()(R,[{key:"set",value:function(A,X,mt){return this.data[A][X]=mt,this}},{key:"get",value:function(A,X){return this.data[A][X]}}]),R}(Re);function Qe($,at){if(D($))return $[0]&&D($[0])?new ar($):new dr($,at);throw new Error("the argument is not an array")}var Pr=function(){function $(at){y()(this,$),at=ar.checkMatrix(at);var R=at.clone(),M=R.rows,A=R.columns,X=new Float64Array(M),mt=1,Lt,Pt,Jt,Ie,pe,je,br,Je,zr;for(Lt=0;Lt<M;Lt++)X[Lt]=Lt;for(Je=new Float64Array(M),Pt=0;Pt<A;Pt++){for(Lt=0;Lt<M;Lt++)Je[Lt]=R.get(Lt,Pt);for(Lt=0;Lt<M;Lt++){for(zr=Math.min(Lt,Pt),pe=0,Jt=0;Jt<zr;Jt++)pe+=R.get(Lt,Jt)*Je[Jt];Je[Lt]-=pe,R.set(Lt,Pt,Je[Lt])}for(Ie=Pt,Lt=Pt+1;Lt<M;Lt++)Math.abs(Je[Lt])>Math.abs(Je[Ie])&&(Ie=Lt);if(Ie!==Pt){for(Jt=0;Jt<A;Jt++)je=R.get(Ie,Jt),R.set(Ie,Jt,R.get(Pt,Jt)),R.set(Pt,Jt,je);br=X[Ie],X[Ie]=X[Pt],X[Pt]=br,mt=-mt}if(Pt<M&&R.get(Pt,Pt)!==0)for(Lt=Pt+1;Lt<M;Lt++)R.set(Lt,Pt,R.get(Lt,Pt)/R.get(Pt,Pt))}this.LU=R,this.pivotVector=X,this.pivotSign=mt}return O()($,[{key:"isSingular",value:function(){for(var R=this.LU,M=R.columns,A=0;A<M;A++)if(R.get(A,A)===0)return!0;return!1}},{key:"solve",value:function(R){R=ae.checkMatrix(R);var M=this.LU,A=M.rows;if(A!==R.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var X=R.columns,mt=R.subMatrixRow(this.pivotVector,0,X-1),Lt=M.columns,Pt,Jt,Ie;for(Ie=0;Ie<Lt;Ie++)for(Pt=Ie+1;Pt<Lt;Pt++)for(Jt=0;Jt<X;Jt++)mt.set(Pt,Jt,mt.get(Pt,Jt)-mt.get(Ie,Jt)*M.get(Pt,Ie));for(Ie=Lt-1;Ie>=0;Ie--){for(Jt=0;Jt<X;Jt++)mt.set(Ie,Jt,mt.get(Ie,Jt)/M.get(Ie,Ie));for(Pt=0;Pt<Ie;Pt++)for(Jt=0;Jt<X;Jt++)mt.set(Pt,Jt,mt.get(Pt,Jt)-mt.get(Ie,Jt)*M.get(Pt,Ie))}return mt}},{key:"determinant",get:function(){var R=this.LU;if(!R.isSquare())throw new Error("Matrix must be square");for(var M=this.pivotSign,A=R.columns,X=0;X<A;X++)M*=R.get(X,X);return M}},{key:"lowerTriangularMatrix",get:function(){for(var R=this.LU,M=R.rows,A=R.columns,X=new ae(M,A),mt=0;mt<M;mt++)for(var Lt=0;Lt<A;Lt++)mt>Lt?X.set(mt,Lt,R.get(mt,Lt)):mt===Lt?X.set(mt,Lt,1):X.set(mt,Lt,0);return X}},{key:"upperTriangularMatrix",get:function(){for(var R=this.LU,M=R.rows,A=R.columns,X=new ae(M,A),mt=0;mt<M;mt++)for(var Lt=0;Lt<A;Lt++)mt<=Lt?X.set(mt,Lt,R.get(mt,Lt)):X.set(mt,Lt,0);return X}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),$}();function Zr($,at){var R=0;return Math.abs($)>Math.abs(at)?(R=at/$,Math.abs($)*Math.sqrt(1+R*R)):at!==0?(R=$/at,Math.abs(at)*Math.sqrt(1+R*R)):0}var qr=function(){function $(at){y()(this,$),at=ar.checkMatrix(at);var R=at.clone(),M=at.rows,A=at.columns,X=new Float64Array(A),mt,Lt,Pt,Jt;for(Pt=0;Pt<A;Pt++){var Ie=0;for(mt=Pt;mt<M;mt++)Ie=Zr(Ie,R.get(mt,Pt));if(Ie!==0){for(R.get(Pt,Pt)<0&&(Ie=-Ie),mt=Pt;mt<M;mt++)R.set(mt,Pt,R.get(mt,Pt)/Ie);for(R.set(Pt,Pt,R.get(Pt,Pt)+1),Lt=Pt+1;Lt<A;Lt++){for(Jt=0,mt=Pt;mt<M;mt++)Jt+=R.get(mt,Pt)*R.get(mt,Lt);for(Jt=-Jt/R.get(Pt,Pt),mt=Pt;mt<M;mt++)R.set(mt,Lt,R.get(mt,Lt)+Jt*R.get(mt,Pt))}}X[Pt]=-Ie}this.QR=R,this.Rdiag=X}return O()($,[{key:"solve",value:function(R){R=ae.checkMatrix(R);var M=this.QR,A=M.rows;if(R.rows!==A)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var X=R.columns,mt=R.clone(),Lt=M.columns,Pt,Jt,Ie,pe;for(Ie=0;Ie<Lt;Ie++)for(Jt=0;Jt<X;Jt++){for(pe=0,Pt=Ie;Pt<A;Pt++)pe+=M.get(Pt,Ie)*mt.get(Pt,Jt);for(pe=-pe/M.get(Ie,Ie),Pt=Ie;Pt<A;Pt++)mt.set(Pt,Jt,mt.get(Pt,Jt)+pe*M.get(Pt,Ie))}for(Ie=Lt-1;Ie>=0;Ie--){for(Jt=0;Jt<X;Jt++)mt.set(Ie,Jt,mt.get(Ie,Jt)/this.Rdiag[Ie]);for(Pt=0;Pt<Ie;Pt++)for(Jt=0;Jt<X;Jt++)mt.set(Pt,Jt,mt.get(Pt,Jt)-mt.get(Ie,Jt)*M.get(Pt,Ie))}return mt.subMatrix(0,Lt-1,0,X-1)}},{key:"isFullRank",value:function(){for(var R=this.QR.columns,M=0;M<R;M++)if(this.Rdiag[M]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var R=this.QR,M=R.columns,A=new ae(M,M),X,mt;for(X=0;X<M;X++)for(mt=0;mt<M;mt++)X<mt?A.set(X,mt,R.get(X,mt)):X===mt?A.set(X,mt,this.Rdiag[X]):A.set(X,mt,0);return A}},{key:"orthogonalMatrix",get:function(){var R=this.QR,M=R.rows,A=R.columns,X=new ae(M,A),mt,Lt,Pt,Jt;for(Pt=A-1;Pt>=0;Pt--){for(mt=0;mt<M;mt++)X.set(mt,Pt,0);for(X.set(Pt,Pt,1),Lt=Pt;Lt<A;Lt++)if(R.get(Pt,Pt)!==0){for(Jt=0,mt=Pt;mt<M;mt++)Jt+=R.get(mt,Pt)*X.get(mt,Lt);for(Jt=-Jt/R.get(Pt,Pt),mt=Pt;mt<M;mt++)X.set(mt,Lt,X.get(mt,Lt)+Jt*R.get(mt,Pt))}}return X}}]),$}(),Sn=function(){function $(at){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(this,$),at=ar.checkMatrix(at),at.isEmpty())throw new Error("Matrix must be non-empty");var M=at.rows,A=at.columns,X=R.computeLeftSingularVectors,mt=X===void 0?!0:X,Lt=R.computeRightSingularVectors,Pt=Lt===void 0?!0:Lt,Jt=R.autoTranspose,Ie=Jt===void 0?!1:Jt,pe=!!mt,je=!!Pt,br=!1,Je;if(M<A)if(!Ie)Je=at.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Je=at.transpose(),M=Je.rows,A=Je.columns,br=!0;var zr=pe;pe=je,je=zr}else Je=at.clone();for(var gn=Math.min(M,A),tr=Math.min(M+1,A),xr=new Float64Array(tr),Ur=new ae(M,gn),Nr=new ae(A,A),fe=new Float64Array(A),Wt=new Float64Array(M),ge=new Float64Array(tr),Ae=0;Ae<tr;Ae++)ge[Ae]=Ae;for(var Se=Math.min(M-1,A),Be=Math.max(0,Math.min(A-2,M)),vr=Math.max(Se,Be),Mr=0;Mr<vr;Mr++){if(Mr<Se){xr[Mr]=0;for(var fn=Mr;fn<M;fn++)xr[Mr]=Zr(xr[Mr],Je.get(fn,Mr));if(xr[Mr]!==0){Je.get(Mr,Mr)<0&&(xr[Mr]=-xr[Mr]);for(var Xn=Mr;Xn<M;Xn++)Je.set(Xn,Mr,Je.get(Xn,Mr)/xr[Mr]);Je.set(Mr,Mr,Je.get(Mr,Mr)+1)}xr[Mr]=-xr[Mr]}for(var Mn=Mr+1;Mn<A;Mn++){if(Mr<Se&&xr[Mr]!==0){for(var qn=0,bn=Mr;bn<M;bn++)qn+=Je.get(bn,Mr)*Je.get(bn,Mn);qn=-qn/Je.get(Mr,Mr);for(var Vn=Mr;Vn<M;Vn++)Je.set(Vn,Mn,Je.get(Vn,Mn)+qn*Je.get(Vn,Mr))}fe[Mn]=Je.get(Mr,Mn)}if(pe&&Mr<Se)for(var ca=Mr;ca<M;ca++)Ur.set(ca,Mr,Je.get(ca,Mr));if(Mr<Be){fe[Mr]=0;for(var xa=Mr+1;xa<A;xa++)fe[Mr]=Zr(fe[Mr],fe[xa]);if(fe[Mr]!==0){fe[Mr+1]<0&&(fe[Mr]=0-fe[Mr]);for(var Ea=Mr+1;Ea<A;Ea++)fe[Ea]/=fe[Mr];fe[Mr+1]+=1}if(fe[Mr]=-fe[Mr],Mr+1<M&&fe[Mr]!==0){for(var Ni=Mr+1;Ni<M;Ni++)Wt[Ni]=0;for(var ti=Mr+1;ti<M;ti++)for(var ei=Mr+1;ei<A;ei++)Wt[ti]+=fe[ei]*Je.get(ti,ei);for(var Mi=Mr+1;Mi<A;Mi++)for(var Gi=-fe[Mi]/fe[Mr+1],To=Mr+1;To<M;To++)Je.set(To,Mi,Je.get(To,Mi)+Gi*Wt[To])}if(je)for(var ro=Mr+1;ro<A;ro++)Nr.set(ro,Mr,fe[ro])}}var ga=Math.min(A,M+1);if(Se<A&&(xr[Se]=Je.get(Se,Se)),M<ga&&(xr[ga-1]=0),Be+1<ga&&(fe[Be]=Je.get(Be,ga-1)),fe[ga-1]=0,pe){for(var fo=Se;fo<gn;fo++){for(var Ao=0;Ao<M;Ao++)Ur.set(Ao,fo,0);Ur.set(fo,fo,1)}for(var ni=Se-1;ni>=0;ni--)if(xr[ni]!==0){for(var Ri=ni+1;Ri<gn;Ri++){for(var co=0,Po=ni;Po<M;Po++)co+=Ur.get(Po,ni)*Ur.get(Po,Ri);co=-co/Ur.get(ni,ni);for(var no=ni;no<M;no++)Ur.set(no,Ri,Ur.get(no,Ri)+co*Ur.get(no,ni))}for(var ao=ni;ao<M;ao++)Ur.set(ao,ni,-Ur.get(ao,ni));Ur.set(ni,ni,1+Ur.get(ni,ni));for(var Jo=0;Jo<ni-1;Jo++)Ur.set(Jo,ni,0)}else{for(var lo=0;lo<M;lo++)Ur.set(lo,ni,0);Ur.set(ni,ni,1)}}if(je)for(var _i=A-1;_i>=0;_i--){if(_i<Be&&fe[_i]!==0)for(var io=_i+1;io<A;io++){for(var $o=0,Gt=_i+1;Gt<A;Gt++)$o+=Nr.get(Gt,_i)*Nr.get(Gt,io);$o=-$o/Nr.get(_i+1,_i);for(var le=_i+1;le<A;le++)Nr.set(le,io,Nr.get(le,io)+$o*Nr.get(le,_i))}for(var Ge=0;Ge<A;Ge++)Nr.set(Ge,_i,0);Nr.set(_i,_i,1)}for(var pr=ga-1,Fr=0,Gr=Number.EPSILON;ga>0;){var Or=void 0,cn=void 0;for(Or=ga-2;Or>=-1&&Or!==-1;Or--){var mn=Number.MIN_VALUE+Gr*Math.abs(xr[Or]+Math.abs(xr[Or+1]));if(Math.abs(fe[Or])<=mn||Number.isNaN(fe[Or])){fe[Or]=0;break}}if(Or===ga-2)cn=4;else{var Bn=void 0;for(Bn=ga-1;Bn>=Or&&Bn!==Or;Bn--){var sa=(Bn!==ga?Math.abs(fe[Bn]):0)+(Bn!==Or+1?Math.abs(fe[Bn-1]):0);if(Math.abs(xr[Bn])<=Gr*sa){xr[Bn]=0;break}}Bn===Or?cn=3:Bn===ga-1?cn=1:(cn=2,Or=Bn)}switch(Or++,cn){case 1:{var Zn=fe[ga-2];fe[ga-2]=0;for(var va=ga-2;va>=Or;va--){var ya=Zr(xr[va],Zn),vi=xr[va]/ya,Ma=Zn/ya;if(xr[va]=ya,va!==Or&&(Zn=-Ma*fe[va-1],fe[va-1]=vi*fe[va-1]),je)for(var oa=0;oa<A;oa++)ya=vi*Nr.get(oa,va)+Ma*Nr.get(oa,ga-1),Nr.set(oa,ga-1,-Ma*Nr.get(oa,va)+vi*Nr.get(oa,ga-1)),Nr.set(oa,va,ya)}break}case 2:{var oi=fe[Or-1];fe[Or-1]=0;for(var $a=Or;$a<ga;$a++){var za=Zr(xr[$a],oi),Ui=xr[$a]/za,di=oi/za;if(xr[$a]=za,oi=-di*fe[$a],fe[$a]=Ui*fe[$a],pe)for(var La=0;La<M;La++)za=Ui*Ur.get(La,$a)+di*Ur.get(La,Or-1),Ur.set(La,Or-1,-di*Ur.get(La,$a)+Ui*Ur.get(La,Or-1)),Ur.set(La,$a,za)}break}case 3:{var ja=Math.max(Math.abs(xr[ga-1]),Math.abs(xr[ga-2]),Math.abs(fe[ga-2]),Math.abs(xr[Or]),Math.abs(fe[Or])),Ga=xr[ga-1]/ja,bi=xr[ga-2]/ja,xi=fe[ga-2]/ja,ki=xr[Or]/ja,ho=fe[Or]/ja,Wi=((bi+Ga)*(bi-Ga)+xi*xi)/2,Io=Ga*xi*(Ga*xi),Xo=0;(Wi!==0||Io!==0)&&(Wi<0?Xo=0-Math.sqrt(Wi*Wi+Io):Xo=Math.sqrt(Wi*Wi+Io),Xo=Io/(Wi+Xo));for(var is=(ki+Ga)*(ki-Ga)+Xo,$i=ki*ho,qa=Or;qa<ga-1;qa++){var Yi=Zr(is,$i);Yi===0&&(Yi=Number.MIN_VALUE);var oo=is/Yi,Qa=$i/Yi;if(qa!==Or&&(fe[qa-1]=Yi),is=oo*xr[qa]+Qa*fe[qa],fe[qa]=oo*fe[qa]-Qa*xr[qa],$i=Qa*xr[qa+1],xr[qa+1]=oo*xr[qa+1],je)for(var Li=0;Li<A;Li++)Yi=oo*Nr.get(Li,qa)+Qa*Nr.get(Li,qa+1),Nr.set(Li,qa+1,-Qa*Nr.get(Li,qa)+oo*Nr.get(Li,qa+1)),Nr.set(Li,qa,Yi);if(Yi=Zr(is,$i),Yi===0&&(Yi=Number.MIN_VALUE),oo=is/Yi,Qa=$i/Yi,xr[qa]=Yi,is=oo*fe[qa]+Qa*xr[qa+1],xr[qa+1]=-Qa*fe[qa]+oo*xr[qa+1],$i=Qa*fe[qa+1],fe[qa+1]=oo*fe[qa+1],pe&&qa<M-1)for(var zo=0;zo<M;zo++)Yi=oo*Ur.get(zo,qa)+Qa*Ur.get(zo,qa+1),Ur.set(zo,qa+1,-Qa*Ur.get(zo,qa)+oo*Ur.get(zo,qa+1)),Ur.set(zo,qa,Yi)}fe[ga-2]=is,Fr=Fr+1;break}case 4:{if(xr[Or]<=0&&(xr[Or]=xr[Or]<0?-xr[Or]:0,je))for(var qi=0;qi<=pr;qi++)Nr.set(qi,Or,-Nr.get(qi,Or));for(;Or<pr&&!(xr[Or]>=xr[Or+1]);){var ts=xr[Or];if(xr[Or]=xr[Or+1],xr[Or+1]=ts,je&&Or<A-1)for(var Xi=0;Xi<A;Xi++)ts=Nr.get(Xi,Or+1),Nr.set(Xi,Or+1,Nr.get(Xi,Or)),Nr.set(Xi,Or,ts);if(pe&&Or<M-1)for(var xo=0;xo<M;xo++)ts=Ur.get(xo,Or+1),Ur.set(xo,Or+1,Ur.get(xo,Or)),Ur.set(xo,Or,ts);Or++}Fr=0,ga--;break}}}if(br){var gs=Nr;Nr=Ur,Ur=gs}this.m=M,this.n=A,this.s=xr,this.U=Ur,this.V=Nr}return O()($,[{key:"solve",value:function(R){for(var M=R,A=this.threshold,X=this.s.length,mt=ae.zeros(X,X),Lt=0;Lt<X;Lt++)Math.abs(this.s[Lt])<=A?mt.set(Lt,Lt,0):mt.set(Lt,Lt,1/this.s[Lt]);for(var Pt=this.U,Jt=this.rightSingularVectors,Ie=Jt.mmul(mt),pe=Jt.rows,je=Pt.rows,br=ae.zeros(pe,je),Je=0;Je<pe;Je++)for(var zr=0;zr<je;zr++){for(var gn=0,tr=0;tr<X;tr++)gn+=Ie.get(Je,tr)*Pt.get(zr,tr);br.set(Je,zr,gn)}return br.mmul(M)}},{key:"solveForDiagonal",value:function(R){return this.solve(ae.diag(R))}},{key:"inverse",value:function(){for(var R=this.V,M=this.threshold,A=R.rows,X=R.columns,mt=new ae(A,this.s.length),Lt=0;Lt<A;Lt++)for(var Pt=0;Pt<X;Pt++)Math.abs(this.s[Pt])>M&&mt.set(Lt,Pt,R.get(Lt,Pt)/this.s[Pt]);for(var Jt=this.U,Ie=Jt.rows,pe=Jt.columns,je=new ae(A,Ie),br=0;br<A;br++)for(var Je=0;Je<Ie;Je++){for(var zr=0,gn=0;gn<pe;gn++)zr+=mt.get(br,gn)*Jt.get(Je,gn);je.set(br,Je,zr)}return je}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var R=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,M=0,A=this.s,X=0,mt=A.length;X<mt;X++)A[X]>R&&M++;return M}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return ae.diag(this.s)}}]),$}();function Yn($){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return $=ar.checkMatrix($),at?new Sn($).inverse():Ir($,ae.eye($.rows))}function Ir($,at){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return $=ar.checkMatrix($),at=ar.checkMatrix(at),R?new Sn($).solve(at):$.isSquare()?new Pr($).solve(at):new qr($).solve(at)}function Br($){if($=ae.checkMatrix($),$.isSquare()){if($.columns===0)return 1;var at,R,M,A;if($.columns===2)return at=$.get(0,0),R=$.get(0,1),M=$.get(1,0),A=$.get(1,1),at*A-R*M;if($.columns===3){var X,mt,Lt;return X=new un($,[1,2],[1,2]),mt=new un($,[1,2],[0,2]),Lt=new un($,[1,2],[0,1]),at=$.get(0,0),R=$.get(0,1),M=$.get(0,2),at*Br(X)-R*Br(mt)+M*Br(Lt)}else return new Pr($).determinant}else throw Error("determinant can only be calculated for a square matrix")}function en($,at){for(var R=[],M=0;M<$;M++)M!==at&&R.push(M);return R}function hn($,at,R){var M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if($>A)return new Array(at.rows+1).fill(0);for(var X=at.addRow(R,[0]),mt=0;mt<X.rows;mt++)Math.abs(X.get(mt,0))<M&&X.set(mt,0,0);return X.to1DArray()}function xn($){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=at.thresholdValue,M=R===void 0?1e-9:R,A=at.thresholdError,X=A===void 0?1e-9:A;$=ae.checkMatrix($);for(var mt=$.rows,Lt=new ae(mt,mt),Pt=0;Pt<mt;Pt++){var Jt=ae.columnVector($.getRow(Pt)),Ie=$.subMatrixRow(en(mt,Pt)).transpose(),pe=new Sn(Ie),je=pe.solve(Jt),br=ae.sub(Jt,Ie.mmul(je)).abs().max();Lt.setRow(Pt,hn(br,je,Pt,M,X))}return Lt}function _n($){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if($=ae.checkMatrix($),$.isEmpty())return $.transpose();for(var R=new Sn($,{autoTranspose:!0}),M=R.leftSingularVectors,A=R.rightSingularVectors,X=R.diagonal,mt=0;mt<X.length;mt++)Math.abs(X[mt])>at?X[mt]=1/X[mt]:X[mt]=0;return A.mmul(ae.diag(X).mmul(M.transpose()))}function tt($){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};$=new ae($);var M=!1;if(m()(at)==="object"&&!ae.isMatrix(at)&&!D(at)?(R=at,at=$,M=!0):at=new ae(at),$.rows!==at.rows)throw new TypeError("Both matrices must have the same number of rows");var A=R,X=A.center,mt=X===void 0?!0:X;mt&&($=$.center("column"),M||(at=at.center("column")));for(var Lt=$.transpose().mmul(at),Pt=0;Pt<Lt.rows;Pt++)for(var Jt=0;Jt<Lt.columns;Jt++)Lt.set(Pt,Jt,Lt.get(Pt,Jt)*(1/($.rows-1)));return Lt}function ir($){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};$=new ae($);var M=!1;if(m()(at)==="object"&&!ae.isMatrix(at)&&!D(at)?(R=at,at=$,M=!0):at=new ae(at),$.rows!==at.rows)throw new TypeError("Both matrices must have the same number of rows");var A=R,X=A.center,mt=X===void 0?!0:X,Lt=A.scale,Pt=Lt===void 0?!0:Lt;mt&&($.center("column"),M||at.center("column")),Pt&&($.scale("column"),M||at.scale("column"));for(var Jt=$.standardDeviation("column",{unbiased:!0}),Ie=M?Jt:at.standardDeviation("column",{unbiased:!0}),pe=$.transpose().mmul(at),je=0;je<pe.rows;je++)for(var br=0;br<pe.columns;br++)pe.set(je,br,pe.get(je,br)*(1/(Jt[je]*Ie[br]))*(1/($.rows-1)));return pe}var jt=function(){function $(at){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};y()(this,$);var M=R.assumeSymmetric,A=M===void 0?!1:M;if(at=ar.checkMatrix(at),!at.isSquare())throw new Error("Matrix is not a square matrix");if(at.isEmpty())throw new Error("Matrix must be non-empty");var X=at.columns,mt=new ae(X,X),Lt=new Float64Array(X),Pt=new Float64Array(X),Jt=at,Ie,pe,je=!1;if(A?je=!0:je=at.isSymmetric(),je){for(Ie=0;Ie<X;Ie++)for(pe=0;pe<X;pe++)mt.set(Ie,pe,Jt.get(Ie,pe));Qt(X,Pt,Lt,mt),Et(X,Pt,Lt,mt)}else{var br=new ae(X,X),Je=new Float64Array(X);for(pe=0;pe<X;pe++)for(Ie=0;Ie<X;Ie++)br.set(Ie,pe,Jt.get(Ie,pe));we(X,br,Je,mt),Ot(X,Pt,Lt,mt,br)}this.n=X,this.e=Pt,this.d=Lt,this.V=mt}return O()($,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var R=this.n,M=this.e,A=this.d,X=new ae(R,R),mt,Lt;for(mt=0;mt<R;mt++){for(Lt=0;Lt<R;Lt++)X.set(mt,Lt,0);X.set(mt,mt,A[mt]),M[mt]>0?X.set(mt,mt+1,M[mt]):M[mt]<0&&X.set(mt,mt-1,M[mt])}return X}}]),$}();function Qt($,at,R,M){var A,X,mt,Lt,Pt,Jt,Ie,pe;for(Pt=0;Pt<$;Pt++)R[Pt]=M.get($-1,Pt);for(Lt=$-1;Lt>0;Lt--){for(pe=0,mt=0,Jt=0;Jt<Lt;Jt++)pe=pe+Math.abs(R[Jt]);if(pe===0)for(at[Lt]=R[Lt-1],Pt=0;Pt<Lt;Pt++)R[Pt]=M.get(Lt-1,Pt),M.set(Lt,Pt,0),M.set(Pt,Lt,0);else{for(Jt=0;Jt<Lt;Jt++)R[Jt]/=pe,mt+=R[Jt]*R[Jt];for(A=R[Lt-1],X=Math.sqrt(mt),A>0&&(X=-X),at[Lt]=pe*X,mt=mt-A*X,R[Lt-1]=A-X,Pt=0;Pt<Lt;Pt++)at[Pt]=0;for(Pt=0;Pt<Lt;Pt++){for(A=R[Pt],M.set(Pt,Lt,A),X=at[Pt]+M.get(Pt,Pt)*A,Jt=Pt+1;Jt<=Lt-1;Jt++)X+=M.get(Jt,Pt)*R[Jt],at[Jt]+=M.get(Jt,Pt)*A;at[Pt]=X}for(A=0,Pt=0;Pt<Lt;Pt++)at[Pt]/=mt,A+=at[Pt]*R[Pt];for(Ie=A/(mt+mt),Pt=0;Pt<Lt;Pt++)at[Pt]-=Ie*R[Pt];for(Pt=0;Pt<Lt;Pt++){for(A=R[Pt],X=at[Pt],Jt=Pt;Jt<=Lt-1;Jt++)M.set(Jt,Pt,M.get(Jt,Pt)-(A*at[Jt]+X*R[Jt]));R[Pt]=M.get(Lt-1,Pt),M.set(Lt,Pt,0)}}R[Lt]=mt}for(Lt=0;Lt<$-1;Lt++){if(M.set($-1,Lt,M.get(Lt,Lt)),M.set(Lt,Lt,1),mt=R[Lt+1],mt!==0){for(Jt=0;Jt<=Lt;Jt++)R[Jt]=M.get(Jt,Lt+1)/mt;for(Pt=0;Pt<=Lt;Pt++){for(X=0,Jt=0;Jt<=Lt;Jt++)X+=M.get(Jt,Lt+1)*M.get(Jt,Pt);for(Jt=0;Jt<=Lt;Jt++)M.set(Jt,Pt,M.get(Jt,Pt)-X*R[Jt])}}for(Jt=0;Jt<=Lt;Jt++)M.set(Jt,Lt+1,0)}for(Pt=0;Pt<$;Pt++)R[Pt]=M.get($-1,Pt),M.set($-1,Pt,0);M.set($-1,$-1,1),at[0]=0}function Et($,at,R,M){var A,X,mt,Lt,Pt,Jt,Ie,pe,je,br,Je,zr,gn,tr,xr,Ur,Nr;for(mt=1;mt<$;mt++)at[mt-1]=at[mt];at[$-1]=0;var fe=0,Wt=0,ge=Number.EPSILON;for(Jt=0;Jt<$;Jt++){for(Wt=Math.max(Wt,Math.abs(R[Jt])+Math.abs(at[Jt])),Ie=Jt;Ie<$&&!(Math.abs(at[Ie])<=ge*Wt);)Ie++;if(Ie>Jt){Nr=0;do{for(Nr=Nr+1,A=R[Jt],pe=(R[Jt+1]-A)/(2*at[Jt]),je=Zr(pe,1),pe<0&&(je=-je),R[Jt]=at[Jt]/(pe+je),R[Jt+1]=at[Jt]*(pe+je),br=R[Jt+1],X=A-R[Jt],mt=Jt+2;mt<$;mt++)R[mt]-=X;for(fe=fe+X,pe=R[Ie],Je=1,zr=Je,gn=Je,tr=at[Jt+1],xr=0,Ur=0,mt=Ie-1;mt>=Jt;mt--)for(gn=zr,zr=Je,Ur=xr,A=Je*at[mt],X=Je*pe,je=Zr(pe,at[mt]),at[mt+1]=xr*je,xr=at[mt]/je,Je=pe/je,pe=Je*R[mt]-xr*A,R[mt+1]=X+xr*(Je*A+xr*R[mt]),Pt=0;Pt<$;Pt++)X=M.get(Pt,mt+1),M.set(Pt,mt+1,xr*M.get(Pt,mt)+Je*X),M.set(Pt,mt,Je*M.get(Pt,mt)-xr*X);pe=-xr*Ur*gn*tr*at[Jt]/br,at[Jt]=xr*pe,R[Jt]=Je*pe}while(Math.abs(at[Jt])>ge*Wt)}R[Jt]=R[Jt]+fe,at[Jt]=0}for(mt=0;mt<$-1;mt++){for(Pt=mt,pe=R[mt],Lt=mt+1;Lt<$;Lt++)R[Lt]<pe&&(Pt=Lt,pe=R[Lt]);if(Pt!==mt)for(R[Pt]=R[mt],R[mt]=pe,Lt=0;Lt<$;Lt++)pe=M.get(Lt,mt),M.set(Lt,mt,M.get(Lt,Pt)),M.set(Lt,Pt,pe)}}function we($,at,R,M){var A=0,X=$-1,mt,Lt,Pt,Jt,Ie,pe,je;for(pe=A+1;pe<=X-1;pe++){for(je=0,Jt=pe;Jt<=X;Jt++)je=je+Math.abs(at.get(Jt,pe-1));if(je!==0){for(Pt=0,Jt=X;Jt>=pe;Jt--)R[Jt]=at.get(Jt,pe-1)/je,Pt+=R[Jt]*R[Jt];for(Lt=Math.sqrt(Pt),R[pe]>0&&(Lt=-Lt),Pt=Pt-R[pe]*Lt,R[pe]=R[pe]-Lt,Ie=pe;Ie<$;Ie++){for(mt=0,Jt=X;Jt>=pe;Jt--)mt+=R[Jt]*at.get(Jt,Ie);for(mt=mt/Pt,Jt=pe;Jt<=X;Jt++)at.set(Jt,Ie,at.get(Jt,Ie)-mt*R[Jt])}for(Jt=0;Jt<=X;Jt++){for(mt=0,Ie=X;Ie>=pe;Ie--)mt+=R[Ie]*at.get(Jt,Ie);for(mt=mt/Pt,Ie=pe;Ie<=X;Ie++)at.set(Jt,Ie,at.get(Jt,Ie)-mt*R[Ie])}R[pe]=je*R[pe],at.set(pe,pe-1,je*Lt)}}for(Jt=0;Jt<$;Jt++)for(Ie=0;Ie<$;Ie++)M.set(Jt,Ie,Jt===Ie?1:0);for(pe=X-1;pe>=A+1;pe--)if(at.get(pe,pe-1)!==0){for(Jt=pe+1;Jt<=X;Jt++)R[Jt]=at.get(Jt,pe-1);for(Ie=pe;Ie<=X;Ie++){for(Lt=0,Jt=pe;Jt<=X;Jt++)Lt+=R[Jt]*M.get(Jt,Ie);for(Lt=Lt/R[pe]/at.get(pe,pe-1),Jt=pe;Jt<=X;Jt++)M.set(Jt,Ie,M.get(Jt,Ie)+Lt*R[Jt])}}}function Ot($,at,R,M,A){var X=$-1,mt=0,Lt=$-1,Pt=Number.EPSILON,Jt=0,Ie=0,pe=0,je=0,br=0,Je=0,zr=0,gn=0,tr,xr,Ur,Nr,fe,Wt,ge,Ae,Se,Be,vr,Mr,fn,Xn,Mn;for(tr=0;tr<$;tr++)for((tr<mt||tr>Lt)&&(R[tr]=A.get(tr,tr),at[tr]=0),xr=Math.max(tr-1,0);xr<$;xr++)Ie=Ie+Math.abs(A.get(tr,xr));for(;X>=mt;){for(Nr=X;Nr>mt&&(Je=Math.abs(A.get(Nr-1,Nr-1))+Math.abs(A.get(Nr,Nr)),Je===0&&(Je=Ie),!(Math.abs(A.get(Nr,Nr-1))<Pt*Je));)Nr--;if(Nr===X)A.set(X,X,A.get(X,X)+Jt),R[X]=A.get(X,X),at[X]=0,X--,gn=0;else if(Nr===X-1){if(ge=A.get(X,X-1)*A.get(X-1,X),pe=(A.get(X-1,X-1)-A.get(X,X))/2,je=pe*pe+ge,zr=Math.sqrt(Math.abs(je)),A.set(X,X,A.get(X,X)+Jt),A.set(X-1,X-1,A.get(X-1,X-1)+Jt),Ae=A.get(X,X),je>=0){for(zr=pe>=0?pe+zr:pe-zr,R[X-1]=Ae+zr,R[X]=R[X-1],zr!==0&&(R[X]=Ae-ge/zr),at[X-1]=0,at[X]=0,Ae=A.get(X,X-1),Je=Math.abs(Ae)+Math.abs(zr),pe=Ae/Je,je=zr/Je,br=Math.sqrt(pe*pe+je*je),pe=pe/br,je=je/br,xr=X-1;xr<$;xr++)zr=A.get(X-1,xr),A.set(X-1,xr,je*zr+pe*A.get(X,xr)),A.set(X,xr,je*A.get(X,xr)-pe*zr);for(tr=0;tr<=X;tr++)zr=A.get(tr,X-1),A.set(tr,X-1,je*zr+pe*A.get(tr,X)),A.set(tr,X,je*A.get(tr,X)-pe*zr);for(tr=mt;tr<=Lt;tr++)zr=M.get(tr,X-1),M.set(tr,X-1,je*zr+pe*M.get(tr,X)),M.set(tr,X,je*M.get(tr,X)-pe*zr)}else R[X-1]=Ae+pe,R[X]=Ae+pe,at[X-1]=zr,at[X]=-zr;X=X-2,gn=0}else{if(Ae=A.get(X,X),Se=0,ge=0,Nr<X&&(Se=A.get(X-1,X-1),ge=A.get(X,X-1)*A.get(X-1,X)),gn===10){for(Jt+=Ae,tr=mt;tr<=X;tr++)A.set(tr,tr,A.get(tr,tr)-Ae);Je=Math.abs(A.get(X,X-1))+Math.abs(A.get(X-1,X-2)),Ae=Se=.75*Je,ge=-.4375*Je*Je}if(gn===30&&(Je=(Se-Ae)/2,Je=Je*Je+ge,Je>0)){for(Je=Math.sqrt(Je),Se<Ae&&(Je=-Je),Je=Ae-ge/((Se-Ae)/2+Je),tr=mt;tr<=X;tr++)A.set(tr,tr,A.get(tr,tr)-Je);Jt+=Je,Ae=Se=ge=.964}for(gn=gn+1,fe=X-2;fe>=Nr&&(zr=A.get(fe,fe),br=Ae-zr,Je=Se-zr,pe=(br*Je-ge)/A.get(fe+1,fe)+A.get(fe,fe+1),je=A.get(fe+1,fe+1)-zr-br-Je,br=A.get(fe+2,fe+1),Je=Math.abs(pe)+Math.abs(je)+Math.abs(br),pe=pe/Je,je=je/Je,br=br/Je,!(fe===Nr||Math.abs(A.get(fe,fe-1))*(Math.abs(je)+Math.abs(br))<Pt*(Math.abs(pe)*(Math.abs(A.get(fe-1,fe-1))+Math.abs(zr)+Math.abs(A.get(fe+1,fe+1))))));)fe--;for(tr=fe+2;tr<=X;tr++)A.set(tr,tr-2,0),tr>fe+2&&A.set(tr,tr-3,0);for(Ur=fe;Ur<=X-1&&(Xn=Ur!==X-1,Ur!==fe&&(pe=A.get(Ur,Ur-1),je=A.get(Ur+1,Ur-1),br=Xn?A.get(Ur+2,Ur-1):0,Ae=Math.abs(pe)+Math.abs(je)+Math.abs(br),Ae!==0&&(pe=pe/Ae,je=je/Ae,br=br/Ae)),Ae!==0);Ur++)if(Je=Math.sqrt(pe*pe+je*je+br*br),pe<0&&(Je=-Je),Je!==0){for(Ur!==fe?A.set(Ur,Ur-1,-Je*Ae):Nr!==fe&&A.set(Ur,Ur-1,-A.get(Ur,Ur-1)),pe=pe+Je,Ae=pe/Je,Se=je/Je,zr=br/Je,je=je/pe,br=br/pe,xr=Ur;xr<$;xr++)pe=A.get(Ur,xr)+je*A.get(Ur+1,xr),Xn&&(pe=pe+br*A.get(Ur+2,xr),A.set(Ur+2,xr,A.get(Ur+2,xr)-pe*zr)),A.set(Ur,xr,A.get(Ur,xr)-pe*Ae),A.set(Ur+1,xr,A.get(Ur+1,xr)-pe*Se);for(tr=0;tr<=Math.min(X,Ur+3);tr++)pe=Ae*A.get(tr,Ur)+Se*A.get(tr,Ur+1),Xn&&(pe=pe+zr*A.get(tr,Ur+2),A.set(tr,Ur+2,A.get(tr,Ur+2)-pe*br)),A.set(tr,Ur,A.get(tr,Ur)-pe),A.set(tr,Ur+1,A.get(tr,Ur+1)-pe*je);for(tr=mt;tr<=Lt;tr++)pe=Ae*M.get(tr,Ur)+Se*M.get(tr,Ur+1),Xn&&(pe=pe+zr*M.get(tr,Ur+2),M.set(tr,Ur+2,M.get(tr,Ur+2)-pe*br)),M.set(tr,Ur,M.get(tr,Ur)-pe),M.set(tr,Ur+1,M.get(tr,Ur+1)-pe*je)}}}if(Ie!==0){for(X=$-1;X>=0;X--)if(pe=R[X],je=at[X],je===0)for(Nr=X,A.set(X,X,1),tr=X-1;tr>=0;tr--){for(ge=A.get(tr,tr)-pe,br=0,xr=Nr;xr<=X;xr++)br=br+A.get(tr,xr)*A.get(xr,X);if(at[tr]<0)zr=ge,Je=br;else if(Nr=tr,at[tr]===0?A.set(tr,X,ge!==0?-br/ge:-br/(Pt*Ie)):(Ae=A.get(tr,tr+1),Se=A.get(tr+1,tr),je=(R[tr]-pe)*(R[tr]-pe)+at[tr]*at[tr],Wt=(Ae*Je-zr*br)/je,A.set(tr,X,Wt),A.set(tr+1,X,Math.abs(Ae)>Math.abs(zr)?(-br-ge*Wt)/Ae:(-Je-Se*Wt)/zr)),Wt=Math.abs(A.get(tr,X)),Pt*Wt*Wt>1)for(xr=tr;xr<=X;xr++)A.set(xr,X,A.get(xr,X)/Wt)}else if(je<0)for(Nr=X-1,Math.abs(A.get(X,X-1))>Math.abs(A.get(X-1,X))?(A.set(X-1,X-1,je/A.get(X,X-1)),A.set(X-1,X,-(A.get(X,X)-pe)/A.get(X,X-1))):(Mn=Kt(0,-A.get(X-1,X),A.get(X-1,X-1)-pe,je),A.set(X-1,X-1,Mn[0]),A.set(X-1,X,Mn[1])),A.set(X,X-1,0),A.set(X,X,1),tr=X-2;tr>=0;tr--){for(Be=0,vr=0,xr=Nr;xr<=X;xr++)Be=Be+A.get(tr,xr)*A.get(xr,X-1),vr=vr+A.get(tr,xr)*A.get(xr,X);if(ge=A.get(tr,tr)-pe,at[tr]<0)zr=ge,br=Be,Je=vr;else if(Nr=tr,at[tr]===0?(Mn=Kt(-Be,-vr,ge,je),A.set(tr,X-1,Mn[0]),A.set(tr,X,Mn[1])):(Ae=A.get(tr,tr+1),Se=A.get(tr+1,tr),Mr=(R[tr]-pe)*(R[tr]-pe)+at[tr]*at[tr]-je*je,fn=(R[tr]-pe)*2*je,Mr===0&&fn===0&&(Mr=Pt*Ie*(Math.abs(ge)+Math.abs(je)+Math.abs(Ae)+Math.abs(Se)+Math.abs(zr))),Mn=Kt(Ae*br-zr*Be+je*vr,Ae*Je-zr*vr-je*Be,Mr,fn),A.set(tr,X-1,Mn[0]),A.set(tr,X,Mn[1]),Math.abs(Ae)>Math.abs(zr)+Math.abs(je)?(A.set(tr+1,X-1,(-Be-ge*A.get(tr,X-1)+je*A.get(tr,X))/Ae),A.set(tr+1,X,(-vr-ge*A.get(tr,X)-je*A.get(tr,X-1))/Ae)):(Mn=Kt(-br-Se*A.get(tr,X-1),-Je-Se*A.get(tr,X),zr,je),A.set(tr+1,X-1,Mn[0]),A.set(tr+1,X,Mn[1]))),Wt=Math.max(Math.abs(A.get(tr,X-1)),Math.abs(A.get(tr,X))),Pt*Wt*Wt>1)for(xr=tr;xr<=X;xr++)A.set(xr,X-1,A.get(xr,X-1)/Wt),A.set(xr,X,A.get(xr,X)/Wt)}for(tr=0;tr<$;tr++)if(tr<mt||tr>Lt)for(xr=tr;xr<$;xr++)M.set(tr,xr,A.get(tr,xr));for(xr=$-1;xr>=mt;xr--)for(tr=mt;tr<=Lt;tr++){for(zr=0,Ur=mt;Ur<=Math.min(xr,Lt);Ur++)zr=zr+M.get(tr,Ur)*A.get(Ur,xr);M.set(tr,xr,zr)}}}function Kt($,at,R,M){var A,X;return Math.abs(R)>Math.abs(M)?(A=M/R,X=R+A*M,[($+A*at)/X,(at-A*$)/X]):(A=R/M,X=M+A*R,[(A*$+at)/X,(A*at-$)/X])}var dt=function(){function $(at){if(y()(this,$),at=ar.checkMatrix(at),!at.isSymmetric())throw new Error("Matrix is not symmetric");var R=at,M=R.rows,A=new ae(M,M),X=!0,mt,Lt,Pt;for(Lt=0;Lt<M;Lt++){var Jt=0;for(Pt=0;Pt<Lt;Pt++){var Ie=0;for(mt=0;mt<Pt;mt++)Ie+=A.get(Pt,mt)*A.get(Lt,mt);Ie=(R.get(Lt,Pt)-Ie)/A.get(Pt,Pt),A.set(Lt,Pt,Ie),Jt=Jt+Ie*Ie}for(Jt=R.get(Lt,Lt)-Jt,X&=Jt>0,A.set(Lt,Lt,Math.sqrt(Math.max(Jt,0))),Pt=Lt+1;Pt<M;Pt++)A.set(Lt,Pt,0)}this.L=A,this.positiveDefinite=!!X}return O()($,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(R){R=ar.checkMatrix(R);var M=this.L,A=M.rows;if(R.rows!==A)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var X=R.columns,mt=R.clone(),Lt,Pt,Jt;for(Jt=0;Jt<A;Jt++)for(Pt=0;Pt<X;Pt++){for(Lt=0;Lt<Jt;Lt++)mt.set(Jt,Pt,mt.get(Jt,Pt)-mt.get(Lt,Pt)*M.get(Jt,Lt));mt.set(Jt,Pt,mt.get(Jt,Pt)/M.get(Jt,Jt))}for(Jt=A-1;Jt>=0;Jt--)for(Pt=0;Pt<X;Pt++){for(Lt=Jt+1;Lt<A;Lt++)mt.set(Jt,Pt,mt.get(Jt,Pt)-mt.get(Lt,Pt)*M.get(Lt,Jt));mt.set(Jt,Pt,mt.get(Jt,Pt)/M.get(Jt,Jt))}return mt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),$}(),Bt=O()(function $(at){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};y()(this,$),at=ar.checkMatrix(at);var M=R.Y,A=R.scaleScores,X=A===void 0?!1:A,mt=R.maxIterations,Lt=mt===void 0?1e3:mt,Pt=R.terminationCriteria,Jt=Pt===void 0?1e-10:Pt,Ie;if(M){if(D(M)&&typeof M[0]=="number"?M=ae.columnVector(M):M=ar.checkMatrix(M),M.rows!==at.rows)throw new Error("Y should have the same number of rows as X");Ie=M.getColumnVector(0)}else Ie=at.getColumnVector(0);for(var pe=1,je,br,Je,zr,gn=0;gn<Lt&&pe>Jt;gn++)Je=at.transpose().mmul(Ie).div(Ie.transpose().mmul(Ie).get(0,0)),Je=Je.div(Je.norm()),je=at.mmul(Je).div(Je.transpose().mmul(Je).get(0,0)),gn>0&&(pe=je.clone().sub(zr).pow(2).sum()),zr=je.clone(),M?(br=M.transpose().mmul(je).div(je.transpose().mmul(je).get(0,0)),br=br.div(br.norm()),Ie=M.mmul(br).div(br.transpose().mmul(br).get(0,0))):Ie=je;if(M){var tr=at.transpose().mmul(je).div(je.transpose().mmul(je).get(0,0));tr=tr.div(tr.norm());var xr=at.clone().sub(je.clone().mmul(tr.transpose())),Ur=Ie.transpose().mmul(je).div(je.transpose().mmul(je).get(0,0)),Nr=M.clone().sub(je.clone().mulS(Ur.get(0,0)).mmul(br.transpose()));this.t=je,this.p=tr.transpose(),this.w=Je.transpose(),this.q=br,this.u=Ie,this.s=je.transpose().mmul(je),this.xResidual=xr,this.yResidual=Nr,this.betas=Ur}else this.w=Je.transpose(),this.s=je.transpose().mmul(je).sqrt(),X?this.t=je.clone().div(this.s.get(0,0)):this.t=je,this.xResidual=at.sub(je.mmul(Je.transpose()))})},988824:function(He,z,C){"use strict";C.d(z,{Z:function(){return we}});var x=C(197582),k=C(785893),w=C(667294),T=C(513669),L=C(98651),P=C(82538);const p=(Ot,Kt)=>{const dt=O(Ot),Bt=O(Kt),$=dt.pop(),at=Bt.pop(),R=b(dt,Bt);return R!==0?R:$&&at?b($.split("."),at.split(".")):$||at?$?-1:1:0},m=Ot=>typeof Ot=="string"&&/^[v\d]/.test(Ot)&&g.test(Ot),S=(Ot,Kt,dt)=>{U(dt);const Bt=p(Ot,Kt);return h[dt].includes(Bt)},y=(Ot,Kt)=>{if(Kt.includes("||"))return Kt.split("||").some(je=>y(Ot,je));if(Kt.includes(" "))return Kt.trim().replace(/\s{2,}/g," ").split(" ").every(je=>y(Ot,je));const dt=Kt.match(/^([<>=~^]+)/),Bt=dt?dt[1]:"=";if(Bt!=="^"&&Bt!=="~")return S(Ot,Kt,Bt);const[$,at,R,,M]=O(Ot),[A,X,mt,,Lt]=O(Kt),Pt=[$,at,R],Jt=[A,X!=null?X:"x",mt!=null?mt:"x"];if(Lt&&(!M||b(Pt,Jt)!==0||b(M.split("."),Lt.split("."))===-1))return!1;const Ie=Jt.findIndex(je=>je!=="0")+1,pe=Bt==="~"?2:Ie>1?Ie:1;return!(b(Pt.slice(0,pe),Jt.slice(0,pe))!==0||b(Pt.slice(pe),Jt.slice(pe))===-1)},g=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,O=Ot=>{if(typeof Ot!="string")throw new TypeError("Invalid argument expected string");const Kt=Ot.match(g);if(!Kt)throw new Error(`Invalid argument not valid semver ('${Ot}' received)`);return Kt.shift(),Kt},E=Ot=>Ot==="*"||Ot==="x"||Ot==="X",D=Ot=>{const Kt=parseInt(Ot,10);return isNaN(Kt)?Ot:Kt},F=(Ot,Kt)=>typeof Ot!=typeof Kt?[String(Ot),String(Kt)]:[Ot,Kt],W=(Ot,Kt)=>{if(E(Ot)||E(Kt))return 0;const[dt,Bt]=F(D(Ot),D(Kt));return dt>Bt?1:dt<Bt?-1:0},b=(Ot,Kt)=>{for(let dt=0;dt<Math.max(Ot.length,Kt.length);dt++){const Bt=W(Ot[dt]||"0",Kt[dt]||"0");if(Bt!==0)return Bt}return 0},h={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},K=Object.keys(h),U=Ot=>{if(typeof Ot!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof Ot}`);if(K.indexOf(Ot)===-1)throw new Error(`Invalid operator, expected one of ${K.join("|")}`)};var Y=function(Ot,Kt){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,Bt){dt.__proto__=Bt}||function(dt,Bt){for(var $ in Bt)Object.prototype.hasOwnProperty.call(Bt,$)&&(dt[$]=Bt[$])},Y(Ot,Kt)};function Z(Ot,Kt){Y(Ot,Kt);function dt(){this.constructor=Ot}Ot.prototype=Kt===null?Object.create(Kt):(dt.prototype=Kt.prototype,new dt)}var H=function(){return H=Object.assign||function(Kt){for(var dt,Bt=1,$=arguments.length;Bt<$;Bt++){dt=arguments[Bt];for(var at in dt)Object.prototype.hasOwnProperty.call(dt,at)&&(Kt[at]=dt[at])}return Kt},H.apply(this,arguments)};function q(Ot,Kt){var dt={};for(var Bt in Ot)Object.prototype.hasOwnProperty.call(Ot,Bt)&&Kt.indexOf(Bt)<0&&(dt[Bt]=Ot[Bt]);if(Ot!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $=0,Bt=Object.getOwnPropertySymbols(Ot);$<Bt.length;$++)Kt.indexOf(Bt[$])<0&&Object.prototype.propertyIsEnumerable.call(Ot,Bt[$])&&(dt[Bt[$]]=Ot[Bt[$]]);return dt}function Q(Ot,Kt,dt,Bt){var $=arguments.length,at=$<3?Kt:Bt===null?Bt=Object.getOwnPropertyDescriptor(Kt,dt):Bt,R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")at=Reflect.decorate(Ot,Kt,dt,Bt);else for(var M=Ot.length-1;M>=0;M--)(R=Ot[M])&&(at=($<3?R(at):$>3?R(Kt,dt,at):R(Kt,dt))||at);return $>3&&at&&Object.defineProperty(Kt,dt,at),at}function J(Ot,Kt){return function(dt,Bt){Kt(dt,Bt,Ot)}}function ft(Ot,Kt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Ot,Kt)}function nt(Ot,Kt,dt,Bt){function $(at){return at instanceof dt?at:new dt(function(R){R(at)})}return new(dt||(dt=Promise))(function(at,R){function M(mt){try{X(Bt.next(mt))}catch(Lt){R(Lt)}}function A(mt){try{X(Bt.throw(mt))}catch(Lt){R(Lt)}}function X(mt){mt.done?at(mt.value):$(mt.value).then(M,A)}X((Bt=Bt.apply(Ot,Kt||[])).next())})}function yt(Ot,Kt){var dt={label:0,sent:function(){if(at[0]&1)throw at[1];return at[1]},trys:[],ops:[]},Bt,$,at,R;return R={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function M(X){return function(mt){return A([X,mt])}}function A(X){if(Bt)throw new TypeError("Generator is already executing.");for(;dt;)try{if(Bt=1,$&&(at=X[0]&2?$.return:X[0]?$.throw||((at=$.return)&&at.call($),0):$.next)&&!(at=at.call($,X[1])).done)return at;switch($=0,at&&(X=[X[0]&2,at.value]),X[0]){case 0:case 1:at=X;break;case 4:return dt.label++,{value:X[1],done:!1};case 5:dt.label++,$=X[1],X=[0];continue;case 7:X=dt.ops.pop(),dt.trys.pop();continue;default:if(at=dt.trys,!(at=at.length>0&&at[at.length-1])&&(X[0]===6||X[0]===2)){dt=0;continue}if(X[0]===3&&(!at||X[1]>at[0]&&X[1]<at[3])){dt.label=X[1];break}if(X[0]===6&&dt.label<at[1]){dt.label=at[1],at=X;break}if(at&&dt.label<at[2]){dt.label=at[2],dt.ops.push(X);break}at[2]&&dt.ops.pop(),dt.trys.pop();continue}X=Kt.call(Ot,dt)}catch(mt){X=[6,mt],$=0}finally{Bt=at=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}}var gt=Object.create?function(Ot,Kt,dt,Bt){Bt===void 0&&(Bt=dt),Object.defineProperty(Ot,Bt,{enumerable:!0,get:function(){return Kt[dt]}})}:function(Ot,Kt,dt,Bt){Bt===void 0&&(Bt=dt),Ot[Bt]=Kt[dt]};function zt(Ot,Kt){for(var dt in Ot)dt!=="default"&&!Object.prototype.hasOwnProperty.call(Kt,dt)&&gt(Kt,Ot,dt)}function Mt(Ot){var Kt=typeof Symbol=="function"&&Symbol.iterator,dt=Kt&&Ot[Kt],Bt=0;if(dt)return dt.call(Ot);if(Ot&&typeof Ot.length=="number")return{next:function(){return Ot&&Bt>=Ot.length&&(Ot=void 0),{value:Ot&&Ot[Bt++],done:!Ot}}};throw new TypeError(Kt?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ct(Ot,Kt){var dt=typeof Symbol=="function"&&Ot[Symbol.iterator];if(!dt)return Ot;var Bt=dt.call(Ot),$,at=[],R;try{for(;(Kt===void 0||Kt-- >0)&&!($=Bt.next()).done;)at.push($.value)}catch(M){R={error:M}}finally{try{$&&!$.done&&(dt=Bt.return)&&dt.call(Bt)}finally{if(R)throw R.error}}return at}function rt(){for(var Ot=[],Kt=0;Kt<arguments.length;Kt++)Ot=Ot.concat(Ct(arguments[Kt]));return Ot}function ot(){for(var Ot=0,Kt=0,dt=arguments.length;Kt<dt;Kt++)Ot+=arguments[Kt].length;for(var Bt=Array(Ot),$=0,Kt=0;Kt<dt;Kt++)for(var at=arguments[Kt],R=0,M=at.length;R<M;R++,$++)Bt[$]=at[R];return Bt}function Tt(Ot){return this instanceof Tt?(this.v=Ot,this):new Tt(Ot)}function Rt(Ot,Kt,dt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Bt=dt.apply(Ot,Kt||[]),$,at=[];return $={},R("next"),R("throw"),R("return"),$[Symbol.asyncIterator]=function(){return this},$;function R(Pt){Bt[Pt]&&($[Pt]=function(Jt){return new Promise(function(Ie,pe){at.push([Pt,Jt,Ie,pe])>1||M(Pt,Jt)})})}function M(Pt,Jt){try{A(Bt[Pt](Jt))}catch(Ie){Lt(at[0][3],Ie)}}function A(Pt){Pt.value instanceof Tt?Promise.resolve(Pt.value.v).then(X,mt):Lt(at[0][2],Pt)}function X(Pt){M("next",Pt)}function mt(Pt){M("throw",Pt)}function Lt(Pt,Jt){Pt(Jt),at.shift(),at.length&&M(at[0][0],at[0][1])}}function st(Ot){var Kt,dt;return Kt={},Bt("next"),Bt("throw",function($){throw $}),Bt("return"),Kt[Symbol.iterator]=function(){return this},Kt;function Bt($,at){Kt[$]=Ot[$]?function(R){return(dt=!dt)?{value:Tt(Ot[$](R)),done:$==="return"}:at?at(R):R}:at}}function bt(Ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Kt=Ot[Symbol.asyncIterator],dt;return Kt?Kt.call(Ot):(Ot=typeof Mt=="function"?Mt(Ot):Ot[Symbol.iterator](),dt={},Bt("next"),Bt("throw"),Bt("return"),dt[Symbol.asyncIterator]=function(){return this},dt);function Bt(at){dt[at]=Ot[at]&&function(R){return new Promise(function(M,A){R=Ot[at](R),$(M,A,R.done,R.value)})}}function $(at,R,M,A){Promise.resolve(A).then(function(X){at({value:X,done:M})},R)}}function Ft(Ot,Kt){return Object.defineProperty?Object.defineProperty(Ot,"raw",{value:Kt}):Ot.raw=Kt,Ot}var Ht=Object.create?function(Ot,Kt){Object.defineProperty(Ot,"default",{enumerable:!0,value:Kt})}:function(Ot,Kt){Ot.default=Kt};function _t(Ot){if(Ot&&Ot.__esModule)return Ot;var Kt={};if(Ot!=null)for(var dt in Ot)dt!=="default"&&Object.prototype.hasOwnProperty.call(Ot,dt)&&gt(Kt,Ot,dt);return Ht(Kt,Ot),Kt}function Xt(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function ee(Ot,Kt){if(!Kt.has(Ot))throw new TypeError("attempted to get private field on non-instance");return Kt.get(Ot)}function se(Ot,Kt,dt){if(!Kt.has(Ot))throw new TypeError("attempted to set private field on non-instance");return Kt.set(Ot,dt),dt}var ue=C(252796),Ut=C.n(ue);function oe(Ot,Kt,dt,Bt,$,at){at===void 0&&(at=0);var R=ur(Ot,Kt,at),M=R.width,A=R.height,X=Math.min(M,dt),mt=Math.min(A,Bt);return X>mt*$?{width:mt*$,height:mt}:{width:X,height:X/$}}function Pe(Ot){return Ot.width>Ot.height?Ot.width/Ot.naturalWidth:Ot.height/Ot.naturalHeight}function te(Ot,Kt,dt,Bt,$){$===void 0&&($=0);var at=ur(Kt.width,Kt.height,$),R=at.width,M=at.height;return{x:ve(Ot.x,R,dt.width,Bt),y:ve(Ot.y,M,dt.height,Bt)}}function ve(Ot,Kt,dt,Bt){var $=Kt*Bt/2-dt/2;return kr(Ot,-$,$)}function Ue(Ot,Kt){return Math.sqrt(Math.pow(Ot.y-Kt.y,2)+Math.pow(Ot.x-Kt.x,2))}function xe(Ot,Kt){return Math.atan2(Kt.y-Ot.y,Kt.x-Ot.x)*180/Math.PI}function Re(Ot,Kt,dt,Bt,$,at,R){at===void 0&&(at=0),R===void 0&&(R=!0);var M=R?de:ht,A=ur(Kt.width,Kt.height,at),X=ur(Kt.naturalWidth,Kt.naturalHeight,at),mt={x:M(100,((A.width-dt.width/$)/2-Ot.x/$)/A.width*100),y:M(100,((A.height-dt.height/$)/2-Ot.y/$)/A.height*100),width:M(100,dt.width/A.width*100/$),height:M(100,dt.height/A.height*100/$)},Lt=Math.round(M(X.width,mt.width*X.width/100)),Pt=Math.round(M(X.height,mt.height*X.height/100)),Jt=X.width>=X.height*Bt,Ie=Jt?{width:Math.round(Pt*Bt),height:Pt}:{width:Lt,height:Math.round(Lt/Bt)},pe=H(H({},Ie),{x:Math.round(M(X.width-Ie.width,mt.x*X.width/100)),y:Math.round(M(X.height-Ie.height,mt.y*X.height/100))});return{croppedAreaPercentages:mt,croppedAreaPixels:pe}}function de(Ot,Kt){return Math.min(Ot,Math.max(0,Kt))}function ht(Ot,Kt){return Kt}function ae(Ot,Kt,dt,Bt,$,at){var R=ur(Kt.width,Kt.height,dt),M=kr(Bt.width/R.width*(100/Ot.width),$,at),A={x:M*R.width/2-Bt.width/2-R.width*M*(Ot.x/100),y:M*R.height/2-Bt.height/2-R.height*M*(Ot.y/100)};return{crop:A,zoom:M}}function Le(Ot,Kt,dt){var Bt=Pe(Kt);return dt.height>dt.width?dt.height/(Ot.height*Bt):dt.width/(Ot.width*Bt)}function Ze(Ot,Kt,dt,Bt,$,at){dt===void 0&&(dt=0);var R=ur(Kt.naturalWidth,Kt.naturalHeight,dt),M=kr(Le(Ot,Kt,Bt),$,at),A=Bt.height>Bt.width?Bt.height/Ot.height:Bt.width/Ot.width,X={x:((R.width-Ot.width)/2-Ot.x)*A,y:((R.height-Ot.height)/2-Ot.y)*A};return{crop:X,zoom:M}}function qe(Ot,Kt){return{x:(Kt.x+Ot.x)/2,y:(Kt.y+Ot.y)/2}}function fr(Ot){return Ot*Math.PI/180}function ur(Ot,Kt,dt){var Bt=fr(dt);return{width:Math.abs(Math.cos(Bt)*Ot)+Math.abs(Math.sin(Bt)*Kt),height:Math.abs(Math.sin(Bt)*Ot)+Math.abs(Math.cos(Bt)*Kt)}}function kr(Ot,Kt,dt){return Math.min(Math.max(Ot,Kt),dt)}function yn(){for(var Ot=[],Kt=0;Kt<arguments.length;Kt++)Ot[Kt]=arguments[Kt];return Ot.filter(function(dt){return typeof dt=="string"&&dt.length>0}).join(" ").trim()}var un=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Vr=1,$e=3,dr=function(Ot){Z(Kt,Ot);function Kt(){var dt=Ot!==null&&Ot.apply(this,arguments)||this;return dt.imageRef=w.createRef(),dt.videoRef=w.createRef(),dt.containerRef=null,dt.styleRef=null,dt.containerRect=null,dt.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},dt.dragStartPosition={x:0,y:0},dt.dragStartCrop={x:0,y:0},dt.gestureZoomStart=0,dt.gestureRotationStart=0,dt.isTouching=!1,dt.lastPinchDistance=0,dt.lastPinchRotation=0,dt.rafDragTimeout=null,dt.rafPinchTimeout=null,dt.wheelTimer=null,dt.currentDoc=typeof document!="undefined"?document:null,dt.currentWindow=typeof window!="undefined"?window:null,dt.resizeObserver=null,dt.state={cropSize:null,hasWheelJustStarted:!1},dt.initResizeObserver=function(){if(!(typeof window.ResizeObserver=="undefined"||!dt.containerRef)){var Bt=!0;dt.resizeObserver=new window.ResizeObserver(function($){if(Bt){Bt=!1;return}dt.computeSizes()}),dt.resizeObserver.observe(dt.containerRef)}},dt.preventZoomSafari=function(Bt){return Bt.preventDefault()},dt.cleanEvents=function(){dt.currentDoc&&(dt.currentDoc.removeEventListener("mousemove",dt.onMouseMove),dt.currentDoc.removeEventListener("mouseup",dt.onDragStopped),dt.currentDoc.removeEventListener("touchmove",dt.onTouchMove),dt.currentDoc.removeEventListener("touchend",dt.onDragStopped),dt.currentDoc.removeEventListener("gesturemove",dt.onGestureMove),dt.currentDoc.removeEventListener("gestureend",dt.onGestureEnd))},dt.clearScrollEvent=function(){dt.containerRef&&dt.containerRef.removeEventListener("wheel",dt.onWheel),dt.wheelTimer&&clearTimeout(dt.wheelTimer)},dt.onMediaLoad=function(){var Bt=dt.computeSizes();Bt&&(dt.emitCropData(),dt.setInitialCrop(Bt)),dt.props.onMediaLoaded&&dt.props.onMediaLoaded(dt.mediaSize)},dt.setInitialCrop=function(Bt){if(dt.props.initialCroppedAreaPercentages){var $=ae(dt.props.initialCroppedAreaPercentages,dt.mediaSize,dt.props.rotation,Bt,dt.props.minZoom,dt.props.maxZoom),at=$.crop,R=$.zoom;dt.props.onCropChange(at),dt.props.onZoomChange&&dt.props.onZoomChange(R)}else if(dt.props.initialCroppedAreaPixels){var M=Ze(dt.props.initialCroppedAreaPixels,dt.mediaSize,dt.props.rotation,Bt,dt.props.minZoom,dt.props.maxZoom),at=M.crop,R=M.zoom;dt.props.onCropChange(at),dt.props.onZoomChange&&dt.props.onZoomChange(R)}},dt.computeSizes=function(){var Bt,$,at,R,M,A,X=dt.imageRef.current||dt.videoRef.current;if(X&&dt.containerRef){dt.containerRect=dt.containerRef.getBoundingClientRect();var mt=dt.containerRect.width/dt.containerRect.height,Lt=((Bt=dt.imageRef.current)===null||Bt===void 0?void 0:Bt.naturalWidth)||(($=dt.videoRef.current)===null||$===void 0?void 0:$.videoWidth)||0,Pt=((at=dt.imageRef.current)===null||at===void 0?void 0:at.naturalHeight)||((R=dt.videoRef.current)===null||R===void 0?void 0:R.videoHeight)||0,Jt=X.offsetWidth<Lt||X.offsetHeight<Pt,Ie=Lt/Pt,pe=void 0;if(Jt)switch(dt.props.objectFit){default:case"contain":pe=mt>Ie?{width:dt.containerRect.height*Ie,height:dt.containerRect.height}:{width:dt.containerRect.width,height:dt.containerRect.width/Ie};break;case"horizontal-cover":pe={width:dt.containerRect.width,height:dt.containerRect.width/Ie};break;case"vertical-cover":pe={width:dt.containerRect.height*Ie,height:dt.containerRect.height};break;case"auto-cover":pe=Lt>Pt?{width:dt.containerRect.width,height:dt.containerRect.width/Ie}:{width:dt.containerRect.height*Ie,height:dt.containerRect.height};break}else pe={width:X.offsetWidth,height:X.offsetHeight};dt.mediaSize=H(H({},pe),{naturalWidth:Lt,naturalHeight:Pt}),dt.props.setMediaSize&&dt.props.setMediaSize(dt.mediaSize);var je=dt.props.cropSize?dt.props.cropSize:oe(dt.mediaSize.width,dt.mediaSize.height,dt.containerRect.width,dt.containerRect.height,dt.props.aspect,dt.props.rotation);return(((M=dt.state.cropSize)===null||M===void 0?void 0:M.height)!==je.height||((A=dt.state.cropSize)===null||A===void 0?void 0:A.width)!==je.width)&&dt.props.onCropSizeChange&&dt.props.onCropSizeChange(je),dt.setState({cropSize:je},dt.recomputeCropPosition),dt.props.setCropSize&&dt.props.setCropSize(je),je}},dt.onMouseDown=function(Bt){dt.currentDoc&&(Bt.preventDefault(),dt.currentDoc.addEventListener("mousemove",dt.onMouseMove),dt.currentDoc.addEventListener("mouseup",dt.onDragStopped),dt.onDragStart(Kt.getMousePoint(Bt)))},dt.onMouseMove=function(Bt){return dt.onDrag(Kt.getMousePoint(Bt))},dt.onTouchStart=function(Bt){dt.currentDoc&&(dt.isTouching=!0,!(dt.props.onTouchRequest&&!dt.props.onTouchRequest(Bt))&&(dt.currentDoc.addEventListener("touchmove",dt.onTouchMove,{passive:!1}),dt.currentDoc.addEventListener("touchend",dt.onDragStopped),Bt.touches.length===2?dt.onPinchStart(Bt):Bt.touches.length===1&&dt.onDragStart(Kt.getTouchPoint(Bt.touches[0]))))},dt.onTouchMove=function(Bt){Bt.preventDefault(),Bt.touches.length===2?dt.onPinchMove(Bt):Bt.touches.length===1&&dt.onDrag(Kt.getTouchPoint(Bt.touches[0]))},dt.onGestureStart=function(Bt){dt.currentDoc&&(Bt.preventDefault(),dt.currentDoc.addEventListener("gesturechange",dt.onGestureMove),dt.currentDoc.addEventListener("gestureend",dt.onGestureEnd),dt.gestureZoomStart=dt.props.zoom,dt.gestureRotationStart=dt.props.rotation)},dt.onGestureMove=function(Bt){if(Bt.preventDefault(),!dt.isTouching){var $=Kt.getMousePoint(Bt),at=dt.gestureZoomStart-1+Bt.scale;if(dt.setNewZoom(at,$,{shouldUpdatePosition:!0}),dt.props.onRotationChange){var R=dt.gestureRotationStart+Bt.rotation;dt.props.onRotationChange(R)}}},dt.onGestureEnd=function(Bt){dt.cleanEvents()},dt.onDragStart=function(Bt){var $,at,R=Bt.x,M=Bt.y;dt.dragStartPosition={x:R,y:M},dt.dragStartCrop=H({},dt.props.crop),(at=($=dt.props).onInteractionStart)===null||at===void 0||at.call($)},dt.onDrag=function(Bt){var $=Bt.x,at=Bt.y;dt.currentWindow&&(dt.rafDragTimeout&&dt.currentWindow.cancelAnimationFrame(dt.rafDragTimeout),dt.rafDragTimeout=dt.currentWindow.requestAnimationFrame(function(){if(dt.state.cropSize&&!($===void 0||at===void 0)){var R=$-dt.dragStartPosition.x,M=at-dt.dragStartPosition.y,A={x:dt.dragStartCrop.x+R,y:dt.dragStartCrop.y+M},X=dt.props.restrictPosition?te(A,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):A;dt.props.onCropChange(X)}}))},dt.onDragStopped=function(){var Bt,$;dt.isTouching=!1,dt.cleanEvents(),dt.emitCropData(),($=(Bt=dt.props).onInteractionEnd)===null||$===void 0||$.call(Bt)},dt.onWheel=function(Bt){if(dt.currentWindow&&!(dt.props.onWheelRequest&&!dt.props.onWheelRequest(Bt))){Bt.preventDefault();var $=Kt.getMousePoint(Bt),at=Ut()(Bt).pixelY,R=dt.props.zoom-at*dt.props.zoomSpeed/200;dt.setNewZoom(R,$,{shouldUpdatePosition:!0}),dt.state.hasWheelJustStarted||dt.setState({hasWheelJustStarted:!0},function(){var M,A;return(A=(M=dt.props).onInteractionStart)===null||A===void 0?void 0:A.call(M)}),dt.wheelTimer&&clearTimeout(dt.wheelTimer),dt.wheelTimer=dt.currentWindow.setTimeout(function(){return dt.setState({hasWheelJustStarted:!1},function(){var M,A;return(A=(M=dt.props).onInteractionEnd)===null||A===void 0?void 0:A.call(M)})},250)}},dt.getPointOnContainer=function(Bt){var $=Bt.x,at=Bt.y;if(!dt.containerRect)throw new Error("The Cropper is not mounted");return{x:dt.containerRect.width/2-($-dt.containerRect.left),y:dt.containerRect.height/2-(at-dt.containerRect.top)}},dt.getPointOnMedia=function(Bt){var $=Bt.x,at=Bt.y,R=dt.props,M=R.crop,A=R.zoom;return{x:($+M.x)/A,y:(at+M.y)/A}},dt.setNewZoom=function(Bt,$,at){var R=at===void 0?{}:at,M=R.shouldUpdatePosition,A=M===void 0?!0:M;if(!(!dt.state.cropSize||!dt.props.onZoomChange)){var X=kr(Bt,dt.props.minZoom,dt.props.maxZoom);if(A){var mt=dt.getPointOnContainer($),Lt=dt.getPointOnMedia(mt),Pt={x:Lt.x*X-mt.x,y:Lt.y*X-mt.y},Jt=dt.props.restrictPosition?te(Pt,dt.mediaSize,dt.state.cropSize,X,dt.props.rotation):Pt;dt.props.onCropChange(Jt)}dt.props.onZoomChange(X)}},dt.getCropData=function(){if(!dt.state.cropSize)return null;var Bt=dt.props.restrictPosition?te(dt.props.crop,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):dt.props.crop;return Re(Bt,dt.mediaSize,dt.state.cropSize,dt.getAspect(),dt.props.zoom,dt.props.rotation,dt.props.restrictPosition)},dt.emitCropData=function(){var Bt=dt.getCropData();if(Bt){var $=Bt.croppedAreaPercentages,at=Bt.croppedAreaPixels;dt.props.onCropComplete&&dt.props.onCropComplete($,at),dt.props.onCropAreaChange&&dt.props.onCropAreaChange($,at)}},dt.emitCropAreaChange=function(){var Bt=dt.getCropData();if(Bt){var $=Bt.croppedAreaPercentages,at=Bt.croppedAreaPixels;dt.props.onCropAreaChange&&dt.props.onCropAreaChange($,at)}},dt.recomputeCropPosition=function(){if(dt.state.cropSize){var Bt=dt.props.restrictPosition?te(dt.props.crop,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):dt.props.crop;dt.props.onCropChange(Bt),dt.emitCropData()}},dt}return Kt.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver=="undefined"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=un,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},Kt.prototype.componentWillUnmount=function(){var dt,Bt;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver=="undefined"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(dt=this.resizeObserver)===null||dt===void 0||dt.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((Bt=this.styleRef.parentNode)===null||Bt===void 0||Bt.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},Kt.prototype.componentDidUpdate=function(dt){var Bt,$,at,R,M,A,X,mt,Lt;dt.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):dt.aspect!==this.props.aspect?this.computeSizes():dt.zoom!==this.props.zoom?this.recomputeCropPosition():((Bt=dt.cropSize)===null||Bt===void 0?void 0:Bt.height)!==(($=this.props.cropSize)===null||$===void 0?void 0:$.height)||((at=dt.cropSize)===null||at===void 0?void 0:at.width)!==((R=this.props.cropSize)===null||R===void 0?void 0:R.width)?this.computeSizes():(((M=dt.crop)===null||M===void 0?void 0:M.x)!==((A=this.props.crop)===null||A===void 0?void 0:A.x)||((X=dt.crop)===null||X===void 0?void 0:X.y)!==((mt=this.props.crop)===null||mt===void 0?void 0:mt.y))&&this.emitCropAreaChange(),dt.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),dt.video!==this.props.video&&((Lt=this.videoRef.current)===null||Lt===void 0||Lt.load())},Kt.prototype.getAspect=function(){var dt=this.props,Bt=dt.cropSize,$=dt.aspect;return Bt?Bt.width/Bt.height:$},Kt.prototype.onPinchStart=function(dt){var Bt=Kt.getTouchPoint(dt.touches[0]),$=Kt.getTouchPoint(dt.touches[1]);this.lastPinchDistance=Ue(Bt,$),this.lastPinchRotation=xe(Bt,$),this.onDragStart(qe(Bt,$))},Kt.prototype.onPinchMove=function(dt){var Bt=this;if(!(!this.currentDoc||!this.currentWindow)){var $=Kt.getTouchPoint(dt.touches[0]),at=Kt.getTouchPoint(dt.touches[1]),R=qe($,at);this.onDrag(R),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var M=Ue($,at),A=Bt.props.zoom*(M/Bt.lastPinchDistance);Bt.setNewZoom(A,R,{shouldUpdatePosition:!1}),Bt.lastPinchDistance=M;var X=xe($,at),mt=Bt.props.rotation+(X-Bt.lastPinchRotation);Bt.props.onRotationChange&&Bt.props.onRotationChange(mt),Bt.lastPinchRotation=X})}},Kt.prototype.render=function(){var dt=this,Bt=this.props,$=Bt.image,at=Bt.video,R=Bt.mediaProps,M=Bt.transform,A=Bt.crop,X=A.x,mt=A.y,Lt=Bt.rotation,Pt=Bt.zoom,Jt=Bt.cropShape,Ie=Bt.showGrid,pe=Bt.style,je=pe.containerStyle,br=pe.cropAreaStyle,Je=pe.mediaStyle,zr=Bt.classes,gn=zr.containerClassName,tr=zr.cropAreaClassName,xr=zr.mediaClassName,Ur=Bt.objectFit;return w.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(fe){return dt.containerRef=fe},"data-testid":"container",style:je,className:yn("reactEasyCrop_Container",gn)},$?w.createElement("img",H({alt:"",className:yn("reactEasyCrop_Image",Ur==="contain"&&"reactEasyCrop_Contain",Ur==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Ur==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Ur==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),xr)},R,{src:$,ref:this.imageRef,style:H(H({},Je),{transform:M||"translate(".concat(X,"px, ").concat(mt,"px) rotate(").concat(Lt,"deg) scale(").concat(Pt,")")}),onLoad:this.onMediaLoad})):at&&w.createElement("video",H({autoPlay:!0,loop:!0,muted:!0,className:yn("reactEasyCrop_Video",Ur==="contain"&&"reactEasyCrop_Contain",Ur==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Ur==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Ur==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),xr)},R,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:H(H({},Je),{transform:M||"translate(".concat(X,"px, ").concat(mt,"px) rotate(").concat(Lt,"deg) scale(").concat(Pt,")")}),controls:!1}),(Array.isArray(at)?at:[{src:at}]).map(function(Nr){return w.createElement("source",H({key:Nr.src},Nr))})),this.state.cropSize&&w.createElement("div",{style:H(H({},br),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:yn("reactEasyCrop_CropArea",Jt==="round"&&"reactEasyCrop_CropAreaRound",Ie&&"reactEasyCrop_CropAreaGrid",tr)}))},Kt.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:$e,minZoom:Vr,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},Kt.getMousePoint=function(dt){return{x:Number(dt.clientX),y:Number(dt.clientY)}},Kt.getTouchPoint=function(dt){return{x:Number(dt.clientX),y:Number(dt.clientY)}},Kt}(w.Component),ar=C(905303),Qe=C(591607);const Pr="img-crop",Zr=1,qr=.1,Sn=0,Yn=-180,Ir=180,Br=1,en=.5,hn=2,xn=.01,_n=(0,w.forwardRef)((Ot,Kt)=>{const{cropperRef:dt,zoomSlider:Bt,rotationSlider:$,aspectSlider:at,showReset:R,resetBtnText:M,modalImage:A,aspect:X,minZoom:mt,maxZoom:Lt,cropShape:Pt,showGrid:Jt,cropperProps:Ie}=Ot,[pe,je]=(0,w.useState)(Zr),[br,Je]=(0,w.useState)(Sn),[zr,gn]=(0,w.useState)(X),tr=pe!==Zr||br!==Sn||zr!==X,xr=()=>{je(Zr),Je(Sn),gn(X)},[Ur,Nr]=(0,w.useState)({x:0,y:0}),fe=(0,w.useRef)({width:0,height:0,x:0,y:0}),Wt=(0,w.useCallback)((Be,vr)=>{fe.current=vr},[]);(0,w.useImperativeHandle)(Kt,()=>({rotation:br,cropPixelsRef:fe,onReset:xr}));const ge="[display:flex] [align-items:center] [width:60%] [margin-inline:auto]",Ae="[display:flex] [align-items:center] [justify-content:center] [height:32px] [width:32px] [background:transparent] [border:0] [font-family:inherit] [font-size:18px] [cursor:pointer] disabled:[opacity:20%] disabled:[cursor:default]",Se="[flex:1]";return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(dr,Object.assign({},Ie,{ref:dt,image:A,crop:Ur,zoom:pe,rotation:br,aspect:zr,minZoom:mt,maxZoom:Lt,zoomWithScroll:Bt,cropShape:Pt,showGrid:Jt,onCropChange:Nr,onZoomChange:je,onRotationChange:Je,onCropComplete:Wt,classes:{containerClassName:`${Pr}-container ![position:relative] [width:100%] [height:40vh] [&~section:first-of-type]:[margin-top:16px] [&~section:last-of-type]:[margin-bottom:16px]`,mediaClassName:`${Pr}-media`}})),Bt&&(0,k.jsxs)("section",Object.assign({className:`${Pr}-control ${Pr}-control-zoom ${ge}`},{children:[(0,k.jsx)("button",Object.assign({className:Ae,onClick:()=>je(pe-qr),disabled:pe-qr<mt},{children:"\uFF0D"})),(0,k.jsx)(Qe.Z,{className:Se,min:mt,max:Lt,step:qr,value:pe,onChange:je}),(0,k.jsx)("button",Object.assign({className:Ae,onClick:()=>je(pe+qr),disabled:pe+qr>Lt},{children:"\uFF0B"}))]})),$&&(0,k.jsxs)("section",Object.assign({className:`${Pr}-control ${Pr}-control-rotation ${ge}`},{children:[(0,k.jsx)("button",Object.assign({className:`${Ae} [font-size:16px]`,onClick:()=>Je(br-Br),disabled:br===Yn},{children:"\u21BA"})),(0,k.jsx)(Qe.Z,{className:Se,min:Yn,max:Ir,step:Br,value:br,onChange:Je}),(0,k.jsx)("button",Object.assign({className:`${Ae} [font-size:16px]`,onClick:()=>Je(br+Br),disabled:br===Ir},{children:"\u21BB"}))]})),at&&(0,k.jsxs)("section",Object.assign({className:`${Pr}-control ${Pr}-control-aspect ${ge}`},{children:[(0,k.jsx)("button",Object.assign({className:Ae,onClick:()=>gn(zr-xn),disabled:zr-xn<en},{children:"\u2195\uFE0F"})),(0,k.jsx)(Qe.Z,{className:Se,min:en,max:hn,step:xn,value:zr,onChange:gn}),(0,k.jsx)("button",Object.assign({className:Ae,onClick:()=>gn(zr+xn),disabled:zr+xn>hn},{children:"\u2194\uFE0F"}))]})),R&&(Bt||$||at)&&(0,k.jsx)(ar.ZP,Object.assign({className:"[bottom:20px] [position:absolute]",style:tr?{}:{opacity:.3,pointerEvents:"none"},onClick:xr},{children:M}))]})});var tt=(0,w.memo)(_n);function ir(Ot,Kt){Kt===void 0&&(Kt={});var dt=Kt.insertAt;if(!(!Ot||typeof document=="undefined")){var Bt=document.head||document.getElementsByTagName("head")[0],$=document.createElement("style");$.type="text/css",dt==="top"&&Bt.firstChild?Bt.insertBefore($,Bt.firstChild):Bt.appendChild($),$.styleSheet?$.styleSheet.cssText=Ot:$.appendChild(document.createTextNode(Ot))}}var jt=".container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.visible{visibility:visible}.grid{display:grid}.\\!\\[position\\:relative\\]{position:relative!important}.\\[align-items\\:center\\]{align-items:center}.\\[background\\:transparent\\]{background:transparent}.\\[border\\:0\\]{border:0}.\\[bottom\\:20px\\]{bottom:20px}.\\[cursor\\:pointer\\]{cursor:pointer}.\\[display\\:flex\\]{display:flex}.\\[flex\\:1\\]{flex:1}.\\[font-family\\:inherit\\]{font-family:inherit}.\\[font-size\\:16px\\]{font-size:16px}.\\[font-size\\:18px\\]{font-size:18px}.\\[height\\:32px\\]{height:32px}.\\[height\\:40vh\\]{height:40vh}.\\[justify-content\\:center\\]{justify-content:center}.\\[margin-inline\\:auto\\]{margin-inline:auto}.\\[position\\:absolute\\]{position:absolute}.\\[width\\:100\\%\\]{width:100%}.\\[width\\:32px\\]{width:32px}.\\[width\\:60\\%\\]{width:60%}.disabled\\:\\[cursor\\:default\\]:disabled{cursor:default}.disabled\\:\\[opacity\\:20\\%\\]:disabled{opacity:20%}.\\[\\&\\~section\\:first-of-type\\]\\:\\[margin-top\\:16px\\]~section:first-of-type{margin-top:16px}.\\[\\&\\~section\\:last-of-type\\]\\:\\[margin-bottom\\:16px\\]~section:last-of-type{margin-bottom:16px}";ir(jt);const Qt=p(T.version,"4.23.0")===-1?"visible":"open",Et=(Ot,Kt,dt)=>Kt in Ot?(console.error(`\`${Kt}\` is deprecated, please use \`${dt}\` instead`),Ot[Kt]):Ot[dt],we=(0,w.forwardRef)((Ot,Kt)=>{const{quality:dt=.4,fillColor:Bt="white",zoomSlider:$=!0,rotationSlider:at=!1,aspectSlider:R=!1,showReset:M=!1,resetText:A,aspect:X=1,minZoom:mt=1,maxZoom:Lt=3,cropShape:Pt="rect",showGrid:Jt=!1,cropperProps:Ie,modalClassName:pe,modalTitle:je,modalWidth:br,modalOk:Je,modalCancel:zr,onModalOk:gn,onModalCancel:tr,modalProps:xr,beforeCrop:Ur,children:Nr}=Ot,fe=Et(Ot,"zoom","zoomSlider")||!0,Wt=Et(Ot,"rotate","rotationSlider")||!1,ge=Et(Ot,"shape","cropShape")||"rect",Ae=Et(Ot,"grid","showGrid")||!1;"onUploadFail"in Ot&&console.error("`onUploadFail` is removed, because the only way it is called, is when the file is rejected by beforeUpload"),Et(Ot,"modalMaskTransitionName","modalProps.maskTransitionName"),Et(Ot,"modalTransitionName","modalProps.transitionName");const Se=(0,w.useRef)({});Se.current.onModalOk=gn,Se.current.onModalCancel=tr,Se.current.beforeCrop=Ur;const Be=(0,w.useRef)(null),vr=(0,w.useCallback)(ti=>{var ei;const Mi=document.createElement("canvas"),Gi=Mi.getContext("2d"),ro=(((ei=ti==null?void 0:ti.getRootNode)===null||ei===void 0?void 0:ei.call(ti))||document).querySelector(`.${Pr}-media`),{width:ga,height:fo,x:Ao,y:ni}=Be.current.cropPixelsRef.current;if(Wt&&Be.current.rotation!==Sn){const{naturalWidth:Ri,naturalHeight:co}=ro,Po=Be.current.rotation*(Math.PI/180),no=Math.abs(Math.sin(Po)),ao=Math.abs(Math.cos(Po)),Jo=Ri*ao+co*no,lo=co*ao+Ri*no;Mi.width=Jo,Mi.height=lo,Gi.fillStyle=Bt,Gi.fillRect(0,0,Jo,lo);const _i=Jo/2,io=lo/2;Gi.translate(_i,io),Gi.rotate(Po),Gi.translate(-_i,-io);const $o=(Jo-Ri)/2,Gt=(lo-co)/2;Gi.drawImage(ro,0,0,Ri,co,$o,Gt,Ri,co);const le=Gi.getImageData(0,0,Jo,lo);Mi.width=ga,Mi.height=fo,Gi.putImageData(le,-Ao,-ni)}else Mi.width=ga,Mi.height=fo,Gi.fillStyle=Bt,Gi.fillRect(0,0,ga,fo),Gi.drawImage(ro,Ao,ni,ga,fo,0,0,ga,fo);return Mi},[Bt,Wt]),[Mr,fn]=(0,w.useState)(""),Xn=(0,w.useRef)(),Mn=(0,w.useRef)(),qn=(0,w.useMemo)(()=>{const ti=Array.isArray(Nr)?Nr[0]:Nr,ei=ti.props,{beforeUpload:Mi,accept:Gi}=ei,To=(0,x.__rest)(ei,["beforeUpload","accept"]),ro=(ga,fo)=>new Promise(Ao=>(0,x.__awaiter)(void 0,void 0,void 0,function*(){if(typeof Se.current.beforeCrop=="function")try{const Ri=yield Se.current.beforeCrop(ga,fo);if(Ri!==!0)return Ao(Ri)}catch(Ri){return Ao(Ri)}const ni=new FileReader;ni.addEventListener("load",()=>{typeof ni.result=="string"&&fn(ni.result)}),ni.readAsDataURL(ga),Xn.current=()=>{var Ri,co;fn(""),Be.current.onReset(),Ao(P.Z.LIST_IGNORE),(co=(Ri=Se.current).onModalCancel)===null||co===void 0||co.call(Ri)},Mn.current=Ri=>(0,x.__awaiter)(void 0,void 0,void 0,function*(){fn(""),Be.current.onReset();const co=vr(Ri.target),{type:Po,name:no,uid:ao}=ga;co.toBlob(Jo=>(0,x.__awaiter)(void 0,void 0,void 0,function*(){var lo,_i,io,$o,Gt,le;const Ge=new File([Jo],no,{type:Po});if(Object.assign(Ge,{uid:ao}),typeof Mi!="function"){Ao(Ge),(_i=(lo=Se.current).onModalOk)===null||_i===void 0||_i.call(lo,Ge);return}try{const pr=yield Mi(Ge,[Ge]),Fr=pr===!0?Ge:pr;Ao(Fr),($o=(io=Se.current).onModalOk)===null||$o===void 0||$o.call(io,Fr)}catch(pr){Ao(pr),(le=(Gt=Se.current).onModalOk)===null||le===void 0||le.call(Gt,pr)}}),Po,dt)})}));return Object.assign(Object.assign({},ti),{props:Object.assign(Object.assign({},To),{accept:Gi||"image/*",beforeUpload:ro})})},[Nr,vr,dt]),bn=(0,w.useMemo)(()=>{const ti={};return br!==void 0&&(ti.width=br),Je!==void 0&&(ti.okText=Je),zr!==void 0&&(ti.cancelText=zr),ti},[zr,Je,br]),Vn=`${Pr}-modal${pe?` ${pe}`:""}`,xa=(typeof window=="undefined"?"":window.navigator.language)==="zh-CN",Ea=je||(xa?"\u7F16\u8F91\u56FE\u7247":"Edit image"),Ni=A||(xa?"\u91CD\u7F6E":"Reset");return(0,k.jsxs)(k.Fragment,{children:[qn,Mr&&(0,k.jsx)(L.Z,Object.assign({},xr,bn,{[Qt]:!0},{title:Ea,onCancel:Xn.current,onOk:Mn.current,wrapClassName:Vn,maskClosable:!1,destroyOnClose:!0},{children:(0,k.jsx)(tt,{ref:Be,cropperRef:Kt,zoomSlider:fe,rotationSlider:Wt,aspectSlider:R,showReset:M,resetBtnText:Ni,modalImage:Mr,aspect:X,minZoom:mt,maxZoom:Lt,cropShape:ge,showGrid:Ae,cropperProps:Ie})}))]})})},386010:function(He,z,C){"use strict";C.r(z),C.d(z,{clsx:function(){return k}});function x(w){var T,L,P="";if(typeof w=="string"||typeof w=="number")P+=w;else if(typeof w=="object")if(Array.isArray(w))for(T=0;T<w.length;T++)w[T]&&(L=x(w[T]))&&(P&&(P+=" "),P+=L);else for(T in w)w[T]&&(P&&(P+=" "),P+=T);return P}function k(){for(var w,T,L=0,P="";L<arguments.length;)(w=arguments[L++])&&(T=x(w))&&(P&&(P+=" "),P+=T);return P}z.default=k},308273:function(He,z,C){"use strict";C.r(z),C.d(z,{CountUp:function(){return k}});var x=function(){return x=Object.assign||function(w){for(var T,L=1,P=arguments.length;L<P;L++)for(var p in T=arguments[L])Object.prototype.hasOwnProperty.call(T,p)&&(w[p]=T[p]);return w},x.apply(this,arguments)},k=function(){function w(T,L,P){var p=this;this.endVal=L,this.options=P,this.version="2.6.2",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(m){p.startTime||(p.startTime=m);var S=m-p.startTime;p.remaining=p.duration-S,p.useEasing?p.countDown?p.frameVal=p.startVal-p.easingFn(S,0,p.startVal-p.endVal,p.duration):p.frameVal=p.easingFn(S,p.startVal,p.endVal-p.startVal,p.duration):p.frameVal=p.startVal+(p.endVal-p.startVal)*(S/p.duration);var y=p.countDown?p.frameVal<p.endVal:p.frameVal>p.endVal;p.frameVal=y?p.endVal:p.frameVal,p.frameVal=Number(p.frameVal.toFixed(p.options.decimalPlaces)),p.printValue(p.frameVal),S<p.duration?p.rAF=requestAnimationFrame(p.count):p.finalEndVal!==null?p.update(p.finalEndVal):p.options.onCompleteCallback&&p.options.onCompleteCallback()},this.formatNumber=function(m){var S,y,g,O,E=m<0?"-":"";S=Math.abs(m).toFixed(p.options.decimalPlaces);var D=(S+="").split(".");if(y=D[0],g=D.length>1?p.options.decimal+D[1]:"",p.options.useGrouping){O="";for(var F=3,W=0,b=0,h=y.length;b<h;++b)p.options.useIndianSeparators&&b===4&&(F=2,W=1),b!==0&&W%F==0&&(O=p.options.separator+O),W++,O=y[h-b-1]+O;y=O}return p.options.numerals&&p.options.numerals.length&&(y=y.replace(/[0-9]/g,function(K){return p.options.numerals[+K]}),g=g.replace(/[0-9]/g,function(K){return p.options.numerals[+K]})),E+p.options.prefix+y+g+p.options.suffix},this.easeOutExpo=function(m,S,y,g){return y*(1-Math.pow(2,-10*m/g))*1024/1023+S},this.options=x(x({},this.defaults),P),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(L),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof T=="string"?document.getElementById(T):T,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window!="undefined"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,T):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return p.handleScroll(p)}),window.onscroll=function(){window.onScrollFns.forEach(function(m){return m()})},this.handleScroll(this)))}return w.prototype.handleScroll=function(T){if(T&&window&&!T.once){var L=window.innerHeight+window.scrollY,P=T.el.getBoundingClientRect(),p=P.top+window.pageYOffset,m=P.top+P.height+window.pageYOffset;m<L&&m>window.scrollY&&T.paused?(T.paused=!1,setTimeout(function(){return T.start()},T.options.scrollSpyDelay),T.options.scrollSpyOnce&&(T.once=!0)):(window.scrollY>m||p>L)&&!T.paused&&T.reset()}},w.prototype.determineDirectionAndSmartEasing=function(){var T=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>T;var L=T-this.startVal;if(Math.abs(L)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=T;var P=this.countDown?1:-1;this.endVal=T+P*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=T,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},w.prototype.start=function(T){this.error||(T&&(this.options.onCompleteCallback=T),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},w.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},w.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},w.prototype.update=function(T){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(T),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},w.prototype.printValue=function(T){var L;if(this.el){var P=this.formattingFn(T);!((L=this.options.plugin)===null||L===void 0)&&L.render?this.options.plugin.render(this.el,P):this.el.tagName==="INPUT"?this.el.value=P:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=P:this.el.innerHTML=P}},w.prototype.ensureNumber=function(T){return typeof T=="number"&&!isNaN(T)},w.prototype.validateValue=function(T){var L=Number(T);return this.ensureNumber(L)?L:(this.error="[CountUp] invalid start or end value: ".concat(T),null)},w.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},w}()},971829:function(He,z,C){"use strict";C.r(z),C.d(z,{quadtree:function(){return x.Z}});var x=C(547148)},547148:function(He,z,C){"use strict";C.d(z,{Z:function(){return K}});function x(H){const q=+this._x.call(null,H),Q=+this._y.call(null,H);return k(this.cover(q,Q),q,Q,H)}function k(H,q,Q,J){if(isNaN(q)||isNaN(Q))return H;var ft,nt=H._root,yt={data:J},gt=H._x0,zt=H._y0,Mt=H._x1,Ct=H._y1,rt,ot,Tt,Rt,st,bt,Ft,Ht;if(!nt)return H._root=yt,H;for(;nt.length;)if((st=q>=(rt=(gt+Mt)/2))?gt=rt:Mt=rt,(bt=Q>=(ot=(zt+Ct)/2))?zt=ot:Ct=ot,ft=nt,!(nt=nt[Ft=bt<<1|st]))return ft[Ft]=yt,H;if(Tt=+H._x.call(null,nt.data),Rt=+H._y.call(null,nt.data),q===Tt&&Q===Rt)return yt.next=nt,ft?ft[Ft]=yt:H._root=yt,H;do ft=ft?ft[Ft]=new Array(4):H._root=new Array(4),(st=q>=(rt=(gt+Mt)/2))?gt=rt:Mt=rt,(bt=Q>=(ot=(zt+Ct)/2))?zt=ot:Ct=ot;while((Ft=bt<<1|st)===(Ht=(Rt>=ot)<<1|Tt>=rt));return ft[Ht]=nt,ft[Ft]=yt,H}function w(H){var q,Q,J=H.length,ft,nt,yt=new Array(J),gt=new Array(J),zt=1/0,Mt=1/0,Ct=-1/0,rt=-1/0;for(Q=0;Q<J;++Q)isNaN(ft=+this._x.call(null,q=H[Q]))||isNaN(nt=+this._y.call(null,q))||(yt[Q]=ft,gt[Q]=nt,ft<zt&&(zt=ft),ft>Ct&&(Ct=ft),nt<Mt&&(Mt=nt),nt>rt&&(rt=nt));if(zt>Ct||Mt>rt)return this;for(this.cover(zt,Mt).cover(Ct,rt),Q=0;Q<J;++Q)k(this,yt[Q],gt[Q],H[Q]);return this}function T(H,q){if(isNaN(H=+H)||isNaN(q=+q))return this;var Q=this._x0,J=this._y0,ft=this._x1,nt=this._y1;if(isNaN(Q))ft=(Q=Math.floor(H))+1,nt=(J=Math.floor(q))+1;else{for(var yt=ft-Q||1,gt=this._root,zt,Mt;Q>H||H>=ft||J>q||q>=nt;)switch(Mt=(q<J)<<1|H<Q,zt=new Array(4),zt[Mt]=gt,gt=zt,yt*=2,Mt){case 0:ft=Q+yt,nt=J+yt;break;case 1:Q=ft-yt,nt=J+yt;break;case 2:ft=Q+yt,J=nt-yt;break;case 3:Q=ft-yt,J=nt-yt;break}this._root&&this._root.length&&(this._root=gt)}return this._x0=Q,this._y0=J,this._x1=ft,this._y1=nt,this}function L(){var H=[];return this.visit(function(q){if(!q.length)do H.push(q.data);while(q=q.next)}),H}function P(H){return arguments.length?this.cover(+H[0][0],+H[0][1]).cover(+H[1][0],+H[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function p(H,q,Q,J,ft){this.node=H,this.x0=q,this.y0=Q,this.x1=J,this.y1=ft}function m(H,q,Q){var J,ft=this._x0,nt=this._y0,yt,gt,zt,Mt,Ct=this._x1,rt=this._y1,ot=[],Tt=this._root,Rt,st;for(Tt&&ot.push(new p(Tt,ft,nt,Ct,rt)),Q==null?Q=1/0:(ft=H-Q,nt=q-Q,Ct=H+Q,rt=q+Q,Q*=Q);Rt=ot.pop();)if(!(!(Tt=Rt.node)||(yt=Rt.x0)>Ct||(gt=Rt.y0)>rt||(zt=Rt.x1)<ft||(Mt=Rt.y1)<nt))if(Tt.length){var bt=(yt+zt)/2,Ft=(gt+Mt)/2;ot.push(new p(Tt[3],bt,Ft,zt,Mt),new p(Tt[2],yt,Ft,bt,Mt),new p(Tt[1],bt,gt,zt,Ft),new p(Tt[0],yt,gt,bt,Ft)),(st=(q>=Ft)<<1|H>=bt)&&(Rt=ot[ot.length-1],ot[ot.length-1]=ot[ot.length-1-st],ot[ot.length-1-st]=Rt)}else{var Ht=H-+this._x.call(null,Tt.data),_t=q-+this._y.call(null,Tt.data),Xt=Ht*Ht+_t*_t;if(Xt<Q){var ee=Math.sqrt(Q=Xt);ft=H-ee,nt=q-ee,Ct=H+ee,rt=q+ee,J=Tt.data}}return J}function S(H){if(isNaN(Ct=+this._x.call(null,H))||isNaN(rt=+this._y.call(null,H)))return this;var q,Q=this._root,J,ft,nt,yt=this._x0,gt=this._y0,zt=this._x1,Mt=this._y1,Ct,rt,ot,Tt,Rt,st,bt,Ft;if(!Q)return this;if(Q.length)for(;;){if((Rt=Ct>=(ot=(yt+zt)/2))?yt=ot:zt=ot,(st=rt>=(Tt=(gt+Mt)/2))?gt=Tt:Mt=Tt,q=Q,!(Q=Q[bt=st<<1|Rt]))return this;if(!Q.length)break;(q[bt+1&3]||q[bt+2&3]||q[bt+3&3])&&(J=q,Ft=bt)}for(;Q.data!==H;)if(ft=Q,!(Q=Q.next))return this;return(nt=Q.next)&&delete Q.next,ft?(nt?ft.next=nt:delete ft.next,this):q?(nt?q[bt]=nt:delete q[bt],(Q=q[0]||q[1]||q[2]||q[3])&&Q===(q[3]||q[2]||q[1]||q[0])&&!Q.length&&(J?J[Ft]=Q:this._root=Q),this):(this._root=nt,this)}function y(H){for(var q=0,Q=H.length;q<Q;++q)this.remove(H[q]);return this}function g(){return this._root}function O(){var H=0;return this.visit(function(q){if(!q.length)do++H;while(q=q.next)}),H}function E(H){var q=[],Q,J=this._root,ft,nt,yt,gt,zt;for(J&&q.push(new p(J,this._x0,this._y0,this._x1,this._y1));Q=q.pop();)if(!H(J=Q.node,nt=Q.x0,yt=Q.y0,gt=Q.x1,zt=Q.y1)&&J.length){var Mt=(nt+gt)/2,Ct=(yt+zt)/2;(ft=J[3])&&q.push(new p(ft,Mt,Ct,gt,zt)),(ft=J[2])&&q.push(new p(ft,nt,Ct,Mt,zt)),(ft=J[1])&&q.push(new p(ft,Mt,yt,gt,Ct)),(ft=J[0])&&q.push(new p(ft,nt,yt,Mt,Ct))}return this}function D(H){var q=[],Q=[],J;for(this._root&&q.push(new p(this._root,this._x0,this._y0,this._x1,this._y1));J=q.pop();){var ft=J.node;if(ft.length){var nt,yt=J.x0,gt=J.y0,zt=J.x1,Mt=J.y1,Ct=(yt+zt)/2,rt=(gt+Mt)/2;(nt=ft[0])&&q.push(new p(nt,yt,gt,Ct,rt)),(nt=ft[1])&&q.push(new p(nt,Ct,gt,zt,rt)),(nt=ft[2])&&q.push(new p(nt,yt,rt,Ct,Mt)),(nt=ft[3])&&q.push(new p(nt,Ct,rt,zt,Mt))}Q.push(J)}for(;J=Q.pop();)H(J.node,J.x0,J.y0,J.x1,J.y1);return this}function F(H){return H[0]}function W(H){return arguments.length?(this._x=H,this):this._x}function b(H){return H[1]}function h(H){return arguments.length?(this._y=H,this):this._y}function K(H,q,Q){var J=new U(q==null?F:q,Q==null?b:Q,NaN,NaN,NaN,NaN);return H==null?J:J.addAll(H)}function U(H,q,Q,J,ft,nt){this._x=H,this._y=q,this._x0=Q,this._y0=J,this._x1=ft,this._y1=nt,this._root=void 0}function Y(H){for(var q={data:H.data},Q=q;H=H.next;)Q=Q.next={data:H.data};return q}var Z=K.prototype=U.prototype;Z.copy=function(){var H=new U(this._x,this._y,this._x0,this._y0,this._x1,this._y1),q=this._root,Q,J;if(!q)return H;if(!q.length)return H._root=Y(q),H;for(Q=[{source:q,target:H._root=new Array(4)}];q=Q.pop();)for(var ft=0;ft<4;++ft)(J=q.source[ft])&&(J.length?Q.push({source:J,target:q.target[ft]=new Array(4)}):q.target[ft]=Y(J));return H},Z.add=x,Z.addAll=w,Z.cover=T,Z.data=L,Z.extent=P,Z.find=m,Z.remove=S,Z.removeAll=y,Z.root=g,Z.size=O,Z.visit=E,Z.visitAfter=D,Z.x=W,Z.y=h},631969:function(He,z,C){"use strict";C.r(z),C.d(z,{BRIDGE_GRAPH_NAME:function(){return L},GraphType:function(){return m},HierarchyNodeType:function(){return S},InclusionType:function(){return p},LAYOUT_CONFIG:function(){return x},NodeType:function(){return P},ROOT_NAME:function(){return T},buildGraph:function(){return jr},flatGraph:function(){return An},getEdges:function(){return On},mergeConfig:function(){return k}});const x={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function k(v={},N=x){var V,it,vt,xt;const At=JSON.parse(JSON.stringify(N)),Nt=((V=v==null?void 0:v.graph)===null||V===void 0?void 0:V.meta)||{},Zt=((it=v==null?void 0:v.subScene)===null||it===void 0?void 0:it.meta)||{},ie=((vt=v==null?void 0:v.nodeSize)===null||vt===void 0?void 0:vt.meta)||{},_e=((xt=v==null?void 0:v.nodeSize)===null||xt===void 0?void 0:xt.node)||{},Ee=At.nodeSize.bridge;return{graph:{meta:Object.assign(At.graph.meta,Nt)},subScene:{meta:Object.assign(At.subScene.meta,Zt)},nodeSize:{meta:Object.assign(At.nodeSize.meta,ie),node:Object.assign(At.nodeSize.node,_e),bridge:Ee}}}function w(v){return`\u25EC${v}\u25EC`}const T=w("ROOT"),L=w("BRIDGE_GRAPH");var P,p,m,S;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(P||(P={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(p||(p={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(m||(m={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(S||(S={}));var y=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof C.g!="undefined"?C.g:typeof self!="undefined"?self:{};function g(v,N){return v(N={exports:{}},N.exports),N.exports}var O=function(){this.__data__=[],this.size=0},E=function(v,N){return v===N||v!=v&&N!=N},D=function(v,N){for(var V=v.length;V--;)if(E(v[V][0],N))return V;return-1},F=Array.prototype.splice,W=function(v){var N=this.__data__,V=D(N,v);return!(V<0)&&(V==N.length-1?N.pop():F.call(N,V,1),--this.size,!0)},b=function(v){var N=this.__data__,V=D(N,v);return V<0?void 0:N[V][1]},h=function(v){return D(this.__data__,v)>-1},K=function(v,N){var V=this.__data__,it=D(V,v);return it<0?(++this.size,V.push([v,N])):V[it][1]=N,this};function U(v){var N=-1,V=v==null?0:v.length;for(this.clear();++N<V;){var it=v[N];this.set(it[0],it[1])}}U.prototype.clear=O,U.prototype.delete=W,U.prototype.get=b,U.prototype.has=h,U.prototype.set=K;var Y=U,Z=function(){this.__data__=new Y,this.size=0},H=function(v){var N=this.__data__,V=N.delete(v);return this.size=N.size,V},q=function(v){return this.__data__.get(v)},Q=function(v){return this.__data__.has(v)},J=typeof y=="object"&&y&&y.Object===Object&&y,ft=typeof self=="object"&&self&&self.Object===Object&&self,nt=J||ft||Function("return this")(),yt=nt.Symbol,gt=Object.prototype,zt=gt.hasOwnProperty,Mt=gt.toString,Ct=yt?yt.toStringTag:void 0,rt=function(v){var N=zt.call(v,Ct),V=v[Ct];try{v[Ct]=void 0;var it=!0}catch(xt){}var vt=Mt.call(v);return it&&(N?v[Ct]=V:delete v[Ct]),vt},ot=Object.prototype.toString,Tt=function(v){return ot.call(v)},Rt=yt?yt.toStringTag:void 0,st=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":Rt&&Rt in Object(v)?rt(v):Tt(v)},bt=function(v){var N=typeof v;return v!=null&&(N=="object"||N=="function")},Ft,Ht=function(v){if(!bt(v))return!1;var N=st(v);return N=="[object Function]"||N=="[object GeneratorFunction]"||N=="[object AsyncFunction]"||N=="[object Proxy]"},_t=nt["__core-js_shared__"],Xt=(Ft=/[^.]+$/.exec(_t&&_t.keys&&_t.keys.IE_PROTO||""))?"Symbol(src)_1."+Ft:"",ee=function(v){return!!Xt&&Xt in v},se=Function.prototype.toString,ue=function(v){if(v!=null){try{return se.call(v)}catch(N){}try{return v+""}catch(N){}}return""},Ut=/^\[object .+?Constructor\]$/,oe=Function.prototype,Pe=Object.prototype,te=oe.toString,ve=Pe.hasOwnProperty,Ue=RegExp("^"+te.call(ve).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=function(v){return!(!bt(v)||ee(v))&&(Ht(v)?Ue:Ut).test(ue(v))},Re=function(v,N){return v==null?void 0:v[N]},de=function(v,N){var V=Re(v,N);return xe(V)?V:void 0},ht=de(nt,"Map"),ae=de(Object,"create"),Le=function(){this.__data__=ae?ae(null):{},this.size=0},Ze=function(v){var N=this.has(v)&&delete this.__data__[v];return this.size-=N?1:0,N},qe=Object.prototype.hasOwnProperty,fr=function(v){var N=this.__data__;if(ae){var V=N[v];return V==="__lodash_hash_undefined__"?void 0:V}return qe.call(N,v)?N[v]:void 0},ur=Object.prototype.hasOwnProperty,kr=function(v){var N=this.__data__;return ae?N[v]!==void 0:ur.call(N,v)},yn=function(v,N){var V=this.__data__;return this.size+=this.has(v)?0:1,V[v]=ae&&N===void 0?"__lodash_hash_undefined__":N,this};function un(v){var N=-1,V=v==null?0:v.length;for(this.clear();++N<V;){var it=v[N];this.set(it[0],it[1])}}un.prototype.clear=Le,un.prototype.delete=Ze,un.prototype.get=fr,un.prototype.has=kr,un.prototype.set=yn;var Vr=un,$e=function(){this.size=0,this.__data__={hash:new Vr,map:new(ht||Y),string:new Vr}},dr=function(v){var N=typeof v;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?v!=="__proto__":v===null},ar=function(v,N){var V=v.__data__;return dr(N)?V[typeof N=="string"?"string":"hash"]:V.map},Qe=function(v){var N=ar(this,v).delete(v);return this.size-=N?1:0,N},Pr=function(v){return ar(this,v).get(v)},Zr=function(v){return ar(this,v).has(v)},qr=function(v,N){var V=ar(this,v),it=V.size;return V.set(v,N),this.size+=V.size==it?0:1,this};function Sn(v){var N=-1,V=v==null?0:v.length;for(this.clear();++N<V;){var it=v[N];this.set(it[0],it[1])}}Sn.prototype.clear=$e,Sn.prototype.delete=Qe,Sn.prototype.get=Pr,Sn.prototype.has=Zr,Sn.prototype.set=qr;var Yn=Sn,Ir=function(v,N){var V=this.__data__;if(V instanceof Y){var it=V.__data__;if(!ht||it.length<199)return it.push([v,N]),this.size=++V.size,this;V=this.__data__=new Yn(it)}return V.set(v,N),this.size=V.size,this};function Br(v){var N=this.__data__=new Y(v);this.size=N.size}Br.prototype.clear=Z,Br.prototype.delete=H,Br.prototype.get=q,Br.prototype.has=Q,Br.prototype.set=Ir;var en=Br,hn=function(v,N){for(var V=-1,it=v==null?0:v.length;++V<it&&N(v[V],V,v)!==!1;);return v},xn=function(){try{var v=de(Object,"defineProperty");return v({},"",{}),v}catch(N){}}(),_n=function(v,N,V){N=="__proto__"&&xn?xn(v,N,{configurable:!0,enumerable:!0,value:V,writable:!0}):v[N]=V},tt=Object.prototype.hasOwnProperty,ir=function(v,N,V){var it=v[N];tt.call(v,N)&&E(it,V)&&(V!==void 0||N in v)||_n(v,N,V)},jt=function(v,N,V,it){var vt=!V;V||(V={});for(var xt=-1,At=N.length;++xt<At;){var Nt=N[xt],Zt=it?it(V[Nt],v[Nt],Nt,V,v):void 0;Zt===void 0&&(Zt=v[Nt]),vt?_n(V,Nt,Zt):ir(V,Nt,Zt)}return V},Qt=function(v,N){for(var V=-1,it=Array(v);++V<v;)it[V]=N(V);return it},Et=function(v){return v!=null&&typeof v=="object"},we=function(v){return Et(v)&&st(v)=="[object Arguments]"},Ot=Object.prototype,Kt=Ot.hasOwnProperty,dt=Ot.propertyIsEnumerable,Bt=we(function(){return arguments}())?we:function(v){return Et(v)&&Kt.call(v,"callee")&&!dt.call(v,"callee")},$=Array.isArray,at=function(){return!1},R=g(function(v,N){var V=N&&!N.nodeType&&N,it=V&&v&&!v.nodeType&&v,vt=it&&it.exports===V?nt.Buffer:void 0,xt=(vt?vt.isBuffer:void 0)||at;v.exports=xt}),M=/^(?:0|[1-9]\d*)$/,A=function(v,N){var V=typeof v;return!!(N=N==null?9007199254740991:N)&&(V=="number"||V!="symbol"&&M.test(v))&&v>-1&&v%1==0&&v<N},X=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},mt={};mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt["[object Arguments]"]=mt["[object Array]"]=mt["[object ArrayBuffer]"]=mt["[object Boolean]"]=mt["[object DataView]"]=mt["[object Date]"]=mt["[object Error]"]=mt["[object Function]"]=mt["[object Map]"]=mt["[object Number]"]=mt["[object Object]"]=mt["[object RegExp]"]=mt["[object Set]"]=mt["[object String]"]=mt["[object WeakMap]"]=!1;var Lt=function(v){return Et(v)&&X(v.length)&&!!mt[st(v)]},Pt=function(v){return function(N){return v(N)}},Jt=g(function(v,N){var V=N&&!N.nodeType&&N,it=V&&v&&!v.nodeType&&v,vt=it&&it.exports===V&&J.process,xt=function(){try{var At=it&&it.require&&it.require("util").types;return At||vt&&vt.binding&&vt.binding("util")}catch(Nt){}}();v.exports=xt}),Ie=Jt&&Jt.isTypedArray,pe=Ie?Pt(Ie):Lt,je=Object.prototype.hasOwnProperty,br=function(v,N){var V=$(v),it=!V&&Bt(v),vt=!V&&!it&&R(v),xt=!V&&!it&&!vt&&pe(v),At=V||it||vt||xt,Nt=At?Qt(v.length,String):[],Zt=Nt.length;for(var ie in v)!N&&!je.call(v,ie)||At&&(ie=="length"||vt&&(ie=="offset"||ie=="parent")||xt&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||A(ie,Zt))||Nt.push(ie);return Nt},Je=Object.prototype,zr=function(v){var N=v&&v.constructor;return v===(typeof N=="function"&&N.prototype||Je)},gn=function(v,N){return function(V){return v(N(V))}},tr=gn(Object.keys,Object),xr=Object.prototype.hasOwnProperty,Ur=function(v){if(!zr(v))return tr(v);var N=[];for(var V in Object(v))xr.call(v,V)&&V!="constructor"&&N.push(V);return N},Nr=function(v){return v!=null&&X(v.length)&&!Ht(v)},fe=function(v){return Nr(v)?br(v):Ur(v)},Wt=function(v,N){return v&&jt(N,fe(N),v)},ge=function(v){var N=[];if(v!=null)for(var V in Object(v))N.push(V);return N},Ae=Object.prototype.hasOwnProperty,Se=function(v){if(!bt(v))return ge(v);var N=zr(v),V=[];for(var it in v)(it!="constructor"||!N&&Ae.call(v,it))&&V.push(it);return V},Be=function(v){return Nr(v)?br(v,!0):Se(v)},vr=function(v,N){return v&&jt(N,Be(N),v)},Mr=g(function(v,N){var V=N&&!N.nodeType&&N,it=V&&v&&!v.nodeType&&v,vt=it&&it.exports===V?nt.Buffer:void 0,xt=vt?vt.allocUnsafe:void 0;v.exports=function(At,Nt){if(Nt)return At.slice();var Zt=At.length,ie=xt?xt(Zt):new At.constructor(Zt);return At.copy(ie),ie}}),fn=function(v,N){var V=-1,it=v.length;for(N||(N=Array(it));++V<it;)N[V]=v[V];return N},Xn=function(v,N){for(var V=-1,it=v==null?0:v.length,vt=0,xt=[];++V<it;){var At=v[V];N(At,V,v)&&(xt[vt++]=At)}return xt},Mn=function(){return[]},qn=Object.prototype.propertyIsEnumerable,bn=Object.getOwnPropertySymbols,Vn=bn?function(v){return v==null?[]:(v=Object(v),Xn(bn(v),function(N){return qn.call(v,N)}))}:Mn,ca=function(v,N){return jt(v,Vn(v),N)},xa=function(v,N){for(var V=-1,it=N.length,vt=v.length;++V<it;)v[vt+V]=N[V];return v},Ea=gn(Object.getPrototypeOf,Object),Ni=Object.getOwnPropertySymbols?function(v){for(var N=[];v;)xa(N,Vn(v)),v=Ea(v);return N}:Mn,ti=function(v,N){return jt(v,Ni(v),N)},ei=function(v,N,V){var it=N(v);return $(v)?it:xa(it,V(v))},Mi=function(v){return ei(v,fe,Vn)},Gi=function(v){return ei(v,Be,Ni)},To=de(nt,"DataView"),ro=de(nt,"Promise"),ga=de(nt,"Set"),fo=de(nt,"WeakMap"),Ao=ue(To),ni=ue(ht),Ri=ue(ro),co=ue(ga),Po=ue(fo),no=st;(To&&no(new To(new ArrayBuffer(1)))!="[object DataView]"||ht&&no(new ht)!="[object Map]"||ro&&no(ro.resolve())!="[object Promise]"||ga&&no(new ga)!="[object Set]"||fo&&no(new fo)!="[object WeakMap]")&&(no=function(v){var N=st(v),V=N=="[object Object]"?v.constructor:void 0,it=V?ue(V):"";if(it)switch(it){case Ao:return"[object DataView]";case ni:return"[object Map]";case Ri:return"[object Promise]";case co:return"[object Set]";case Po:return"[object WeakMap]"}return N});var ao=no,Jo=Object.prototype.hasOwnProperty,lo=function(v){var N=v.length,V=new v.constructor(N);return N&&typeof v[0]=="string"&&Jo.call(v,"index")&&(V.index=v.index,V.input=v.input),V},_i=nt.Uint8Array,io=function(v){var N=new v.constructor(v.byteLength);return new _i(N).set(new _i(v)),N},$o=function(v,N){var V=N?io(v.buffer):v.buffer;return new v.constructor(V,v.byteOffset,v.byteLength)},Gt=/\w*$/,le=function(v){var N=new v.constructor(v.source,Gt.exec(v));return N.lastIndex=v.lastIndex,N},Ge=yt?yt.prototype:void 0,pr=Ge?Ge.valueOf:void 0,Fr=function(v){return pr?Object(pr.call(v)):{}},Gr=function(v,N){var V=N?io(v.buffer):v.buffer;return new v.constructor(V,v.byteOffset,v.length)},Or=function(v,N,V){var it=v.constructor;switch(N){case"[object ArrayBuffer]":return io(v);case"[object Boolean]":case"[object Date]":return new it(+v);case"[object DataView]":return $o(v,V);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Gr(v,V);case"[object Map]":return new it;case"[object Number]":case"[object String]":return new it(v);case"[object RegExp]":return le(v);case"[object Set]":return new it;case"[object Symbol]":return Fr(v)}},cn=Object.create,mn=function(){function v(){}return function(N){if(!bt(N))return{};if(cn)return cn(N);v.prototype=N;var V=new v;return v.prototype=void 0,V}}(),Bn=function(v){return typeof v.constructor!="function"||zr(v)?{}:mn(Ea(v))},sa=function(v){return Et(v)&&ao(v)=="[object Map]"},Zn=Jt&&Jt.isMap,va=Zn?Pt(Zn):sa,ya=function(v){return Et(v)&&ao(v)=="[object Set]"},vi=Jt&&Jt.isSet,Ma=vi?Pt(vi):ya,oa={};oa["[object Arguments]"]=oa["[object Array]"]=oa["[object ArrayBuffer]"]=oa["[object DataView]"]=oa["[object Boolean]"]=oa["[object Date]"]=oa["[object Float32Array]"]=oa["[object Float64Array]"]=oa["[object Int8Array]"]=oa["[object Int16Array]"]=oa["[object Int32Array]"]=oa["[object Map]"]=oa["[object Number]"]=oa["[object Object]"]=oa["[object RegExp]"]=oa["[object Set]"]=oa["[object String]"]=oa["[object Symbol]"]=oa["[object Uint8Array]"]=oa["[object Uint8ClampedArray]"]=oa["[object Uint16Array]"]=oa["[object Uint32Array]"]=!0,oa["[object Error]"]=oa["[object Function]"]=oa["[object WeakMap]"]=!1;var oi=function v(N,V,it,vt,xt,At){var Nt,Zt=1&V,ie=2&V,_e=4&V;if(it&&(Nt=xt?it(N,vt,xt,At):it(N)),Nt!==void 0)return Nt;if(!bt(N))return N;var Ee=$(N);if(Ee){if(Nt=lo(N),!Zt)return fn(N,Nt)}else{var Xe=ao(N),yr=Xe=="[object Function]"||Xe=="[object GeneratorFunction]";if(R(N))return Mr(N,Zt);if(Xe=="[object Object]"||Xe=="[object Arguments]"||yr&&!xt){if(Nt=ie||yr?{}:Bn(N),!Zt)return ie?ti(N,vr(Nt,N)):ca(N,Wt(Nt,N))}else{if(!oa[Xe])return xt?N:{};Nt=Or(N,Xe,Zt)}}At||(At=new en);var tn=At.get(N);if(tn)return tn;At.set(N,Nt),Ma(N)?N.forEach(function(Ar){Nt.add(v(Ar,V,it,Ar,N,At))}):va(N)&&N.forEach(function(Ar,Tr){Nt.set(Tr,v(Ar,V,it,Tr,N,At))});var _r=Ee?void 0:(_e?ie?Gi:Mi:ie?Be:fe)(N);return hn(_r||N,function(Ar,Tr){_r&&(Ar=N[Tr=Ar]),ir(Nt,Tr,v(Ar,V,it,Tr,N,At))}),Nt},$a=function(v){return oi(v,4)},za=function(v){return function(){return v}},Ui=function(v){return function(N,V,it){for(var vt=-1,xt=Object(N),At=it(N),Nt=At.length;Nt--;){var Zt=At[v?Nt:++vt];if(V(xt[Zt],Zt,xt)===!1)break}return N}}(),di=function(v,N){return v&&Ui(v,N,fe)},La=function(v,N){return function(V,it){if(V==null)return V;if(!Nr(V))return v(V,it);for(var vt=V.length,xt=N?vt:-1,At=Object(V);(N?xt--:++xt<vt)&&it(At[xt],xt,At)!==!1;);return V}}(di),ja=function(v){return v},Ga=function(v){return typeof v=="function"?v:ja},bi=function(v,N){return($(v)?hn:La)(v,Ga(N))},xi=bi,ki=function(v,N){var V=[];return La(v,function(it,vt,xt){N(it,vt,xt)&&V.push(it)}),V},ho=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},Wi=function(v){return this.__data__.has(v)};function Io(v){var N=-1,V=v==null?0:v.length;for(this.__data__=new Yn;++N<V;)this.add(v[N])}Io.prototype.add=Io.prototype.push=ho,Io.prototype.has=Wi;var Xo=Io,is=function(v,N){for(var V=-1,it=v==null?0:v.length;++V<it;)if(N(v[V],V,v))return!0;return!1},$i=function(v,N){return v.has(N)},qa=function(v,N,V,it,vt,xt){var At=1&V,Nt=v.length,Zt=N.length;if(Nt!=Zt&&!(At&&Zt>Nt))return!1;var ie=xt.get(v),_e=xt.get(N);if(ie&&_e)return ie==N&&_e==v;var Ee=-1,Xe=!0,yr=2&V?new Xo:void 0;for(xt.set(v,N),xt.set(N,v);++Ee<Nt;){var tn=v[Ee],_r=N[Ee];if(it)var Ar=At?it(_r,tn,Ee,N,v,xt):it(tn,_r,Ee,v,N,xt);if(Ar!==void 0){if(Ar)continue;Xe=!1;break}if(yr){if(!is(N,function(Tr,Dn){if(!$i(yr,Dn)&&(tn===Tr||vt(tn,Tr,V,it,xt)))return yr.push(Dn)})){Xe=!1;break}}else if(tn!==_r&&!vt(tn,_r,V,it,xt)){Xe=!1;break}}return xt.delete(v),xt.delete(N),Xe},Yi=function(v){var N=-1,V=Array(v.size);return v.forEach(function(it,vt){V[++N]=[vt,it]}),V},oo=function(v){var N=-1,V=Array(v.size);return v.forEach(function(it){V[++N]=it}),V},Qa=yt?yt.prototype:void 0,Li=Qa?Qa.valueOf:void 0,zo=function(v,N,V,it,vt,xt,At){switch(V){case"[object DataView]":if(v.byteLength!=N.byteLength||v.byteOffset!=N.byteOffset)return!1;v=v.buffer,N=N.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=N.byteLength||!xt(new _i(v),new _i(N)));case"[object Boolean]":case"[object Date]":case"[object Number]":return E(+v,+N);case"[object Error]":return v.name==N.name&&v.message==N.message;case"[object RegExp]":case"[object String]":return v==N+"";case"[object Map]":var Nt=Yi;case"[object Set]":var Zt=1&it;if(Nt||(Nt=oo),v.size!=N.size&&!Zt)return!1;var ie=At.get(v);if(ie)return ie==N;it|=2,At.set(v,N);var _e=qa(Nt(v),Nt(N),it,vt,xt,At);return At.delete(v),_e;case"[object Symbol]":if(Li)return Li.call(v)==Li.call(N)}return!1},qi=Object.prototype.hasOwnProperty,ts=function(v,N,V,it,vt,xt){var At=1&V,Nt=Mi(v),Zt=Nt.length;if(Zt!=Mi(N).length&&!At)return!1;for(var ie=Zt;ie--;){var _e=Nt[ie];if(!(At?_e in N:qi.call(N,_e)))return!1}var Ee=xt.get(v),Xe=xt.get(N);if(Ee&&Xe)return Ee==N&&Xe==v;var yr=!0;xt.set(v,N),xt.set(N,v);for(var tn=At;++ie<Zt;){var _r=v[_e=Nt[ie]],Ar=N[_e];if(it)var Tr=At?it(Ar,_r,_e,N,v,xt):it(_r,Ar,_e,v,N,xt);if(!(Tr===void 0?_r===Ar||vt(_r,Ar,V,it,xt):Tr)){yr=!1;break}tn||(tn=_e=="constructor")}if(yr&&!tn){var Dn=v.constructor,jn=N.constructor;Dn==jn||!("constructor"in v)||!("constructor"in N)||typeof Dn=="function"&&Dn instanceof Dn&&typeof jn=="function"&&jn instanceof jn||(yr=!1)}return xt.delete(v),xt.delete(N),yr},Xi=Object.prototype.hasOwnProperty,xo=function(v,N,V,it,vt,xt){var At=$(v),Nt=$(N),Zt=At?"[object Array]":ao(v),ie=Nt?"[object Array]":ao(N),_e=(Zt=Zt=="[object Arguments]"?"[object Object]":Zt)=="[object Object]",Ee=(ie=ie=="[object Arguments]"?"[object Object]":ie)=="[object Object]",Xe=Zt==ie;if(Xe&&R(v)){if(!R(N))return!1;At=!0,_e=!1}if(Xe&&!_e)return xt||(xt=new en),At||pe(v)?qa(v,N,V,it,vt,xt):zo(v,N,Zt,V,it,vt,xt);if(!(1&V)){var yr=_e&&Xi.call(v,"__wrapped__"),tn=Ee&&Xi.call(N,"__wrapped__");if(yr||tn){var _r=yr?v.value():v,Ar=tn?N.value():N;return xt||(xt=new en),vt(_r,Ar,V,it,xt)}}return!!Xe&&(xt||(xt=new en),ts(v,N,V,it,vt,xt))},gs=function v(N,V,it,vt,xt){return N===V||(N==null||V==null||!Et(N)&&!Et(V)?N!=N&&V!=V:xo(N,V,it,vt,v,xt))},fs=function(v,N,V,it){var vt=V.length,xt=vt,At=!it;if(v==null)return!xt;for(v=Object(v);vt--;){var Nt=V[vt];if(At&&Nt[2]?Nt[1]!==v[Nt[0]]:!(Nt[0]in v))return!1}for(;++vt<xt;){var Zt=(Nt=V[vt])[0],ie=v[Zt],_e=Nt[1];if(At&&Nt[2]){if(ie===void 0&&!(Zt in v))return!1}else{var Ee=new en;if(it)var Xe=it(ie,_e,Zt,v,N,Ee);if(!(Xe===void 0?gs(_e,ie,3,it,Ee):Xe))return!1}}return!0},so=function(v){return v==v&&!bt(v)},ss=function(v){for(var N=fe(v),V=N.length;V--;){var it=N[V],vt=v[it];N[V]=[it,vt,so(vt)]}return N},cs=function(v,N){return function(V){return V!=null&&V[v]===N&&(N!==void 0||v in Object(V))}},_s=function(v){var N=ss(v);return N.length==1&&N[0][2]?cs(N[0][0],N[0][1]):function(V){return V===v||fs(V,v,N)}},jo=function(v){return typeof v=="symbol"||Et(v)&&st(v)=="[object Symbol]"},$t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ye=/^\w*$/,hr=function(v,N){if($(v))return!1;var V=typeof v;return!(V!="number"&&V!="symbol"&&V!="boolean"&&v!=null&&!jo(v))||ye.test(v)||!$t.test(v)||N!=null&&v in Object(N)};function Er(v,N){if(typeof v!="function"||N!=null&&typeof N!="function")throw new TypeError("Expected a function");var V=function(){var it=arguments,vt=N?N.apply(this,it):it[0],xt=V.cache;if(xt.has(vt))return xt.get(vt);var At=v.apply(this,it);return V.cache=xt.set(vt,At)||xt,At};return V.cache=new(Er.Cache||Yn),V}Er.Cache=Yn;var nn=Er,kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qn=/\\(\\)?/g,wa=function(v){var N=nn(v,function(it){return V.size===500&&V.clear(),it}),V=N.cache;return N}(function(v){var N=[];return v.charCodeAt(0)===46&&N.push(""),v.replace(kn,function(V,it,vt,xt){N.push(vt?xt.replace(Qn,"$1"):it||V)}),N}),Ai=function(v,N){for(var V=-1,it=v==null?0:v.length,vt=Array(it);++V<it;)vt[V]=N(v[V],V,v);return vt},Oo=yt?yt.prototype:void 0,Go=Oo?Oo.toString:void 0,Rs=function v(N){if(typeof N=="string")return N;if($(N))return Ai(N,v)+"";if(jo(N))return Go?Go.call(N):"";var V=N+"";return V=="0"&&1/N==-1/0?"-0":V},Cs=function(v){return v==null?"":Rs(v)},ji=function(v,N){return $(v)?v:hr(v,N)?[v]:wa(Cs(v))},bo=function(v){if(typeof v=="string"||jo(v))return v;var N=v+"";return N=="0"&&1/v==-1/0?"-0":N},ks=function(v,N){for(var V=0,it=(N=ji(N,v)).length;v!=null&&V<it;)v=v[bo(N[V++])];return V&&V==it?v:void 0},ls=function(v,N,V){var it=v==null?void 0:ks(v,N);return it===void 0?V:it},qs=function(v,N){return v!=null&&N in Object(v)},Qs=function(v,N,V){for(var it=-1,vt=(N=ji(N,v)).length,xt=!1;++it<vt;){var At=bo(N[it]);if(!(xt=v!=null&&V(v,At)))break;v=v[At]}return xt||++it!=vt?xt:!!(vt=v==null?0:v.length)&&X(vt)&&A(At,vt)&&($(v)||Bt(v))},Js=function(v,N){return v!=null&&Qs(v,N,qs)},Ws=function(v,N){return hr(v)&&so(N)?cs(bo(v),N):function(V){var it=ls(V,v);return it===void 0&&it===N?Js(V,v):gs(N,it,3)}},Ds=function(v){return function(N){return N==null?void 0:N[v]}},Bs=function(v){return function(N){return ks(N,v)}},ms=function(v){return hr(v)?Ds(bo(v)):Bs(v)},es=function(v){return typeof v=="function"?v:v==null?ja:typeof v=="object"?$(v)?Ws(v[0],v[1]):_s(v):ms(v)},Tu=function(v,N){return($(v)?Xn:ki)(v,es(N))},Au=Object.prototype.hasOwnProperty,Uo=function(v,N){return v!=null&&Au.call(v,N)},Eo=function(v,N){return v!=null&&Qs(v,N,Uo)},os=Object.prototype.hasOwnProperty,d=function(v){if(v==null)return!0;if(Nr(v)&&($(v)||typeof v=="string"||typeof v.splice=="function"||R(v)||pe(v)||Bt(v)))return!v.length;var N=ao(v);if(N=="[object Map]"||N=="[object Set]")return!v.size;if(zr(v))return!Ur(v).length;for(var V in v)if(os.call(v,V))return!1;return!0},G=function(v){return v===void 0},wt=function(v,N){var V=-1,it=Nr(v)?Array(v.length):[];return La(v,function(vt,xt,At){it[++V]=N(vt,xt,At)}),it},kt=function(v,N){return($(v)?Ai:wt)(v,es(N))},qt=function(v,N,V,it){var vt=-1,xt=v==null?0:v.length;for(it&&xt&&(V=v[++vt]);++vt<xt;)V=N(V,v[vt],vt,v);return V},he=function(v,N,V,it,vt){return vt(v,function(xt,At,Nt){V=it?(it=!1,xt):N(V,xt,At,Nt)}),V},me=function(v,N,V){var it=$(v)?qt:he,vt=arguments.length<3;return it(v,es(N),V,vt,La)},Oe=function(v){return typeof v=="string"||!$(v)&&Et(v)&&st(v)=="[object String]"},Fe=Ds("length"),Ke=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),gr=function(v){return Ke.test(v)},Kr="[\\ud800-\\udfff]",Jr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Qr="\\ud83c[\\udffb-\\udfff]",Ln="[^\\ud800-\\udfff]",Nn="(?:\\ud83c[\\udde6-\\uddff]){2}",sn="[\\ud800-\\udbff][\\udc00-\\udfff]",ra="(?:"+Jr+"|"+Qr+")?",Ha="[\\ufe0e\\ufe0f]?"+ra+("(?:\\u200d(?:"+[Ln,Nn,sn].join("|")+")[\\ufe0e\\ufe0f]?"+ra+")*"),Va="(?:"+[Ln+Jr+"?",Jr,Nn,sn,Kr].join("|")+")",ka=RegExp(Qr+"(?="+Qr+")|"+Va+Ha,"g"),_a=function(v){for(var N=ka.lastIndex=0;ka.test(v);)++N;return N},Pa=function(v){return gr(v)?_a(v):Fe(v)},Do=function(v){if(v==null)return 0;if(Nr(v))return Oe(v)?Pa(v):v.length;var N=ao(v);return N=="[object Map]"||N=="[object Set]"?v.size:Ur(v).length},wo=function(v,N,V){var it=$(v),vt=it||R(v)||pe(v);if(N=es(N),V==null){var xt=v&&v.constructor;V=vt?it?new xt:[]:bt(v)&&Ht(xt)?mn(Ea(v)):{}}return(vt?hn:di)(v,function(At,Nt,Zt){return N(V,At,Nt,Zt)}),V},vo=yt?yt.isConcatSpreadable:void 0,So=function(v){return $(v)||Bt(v)||!!(vo&&v&&v[vo])},Mo=function v(N,V,it,vt,xt){var At=-1,Nt=N.length;for(it||(it=So),xt||(xt=[]);++At<Nt;){var Zt=N[At];V>0&&it(Zt)?V>1?v(Zt,V-1,it,vt,xt):xa(xt,Zt):vt||(xt[xt.length]=Zt)}return xt},No=function(v,N,V){switch(V.length){case 0:return v.call(N);case 1:return v.call(N,V[0]);case 2:return v.call(N,V[0],V[1]);case 3:return v.call(N,V[0],V[1],V[2])}return v.apply(N,V)},Ro=Math.max,hi=function(v,N,V){return N=Ro(N===void 0?v.length-1:N,0),function(){for(var it=arguments,vt=-1,xt=Ro(it.length-N,0),At=Array(xt);++vt<xt;)At[vt]=it[N+vt];vt=-1;for(var Nt=Array(N+1);++vt<N;)Nt[vt]=it[vt];return Nt[N]=V(At),No(v,this,Nt)}},Bi=xn?function(v,N){return xn(v,"toString",{configurable:!0,enumerable:!1,value:za(N),writable:!0})}:ja,Ys=Date.now,Xs=function(v){var N=0,V=0;return function(){var it=Ys(),vt=16-(it-V);if(V=it,vt>0){if(++N>=800)return arguments[0]}else N=0;return v.apply(void 0,arguments)}}(Bi),ds=function(v,N){return Xs(hi(v,N,ja),v+"")},Iu=function(v,N,V,it){for(var vt=v.length,xt=V+(it?1:-1);it?xt--:++xt<vt;)if(N(v[xt],xt,v))return xt;return-1},kf=function(v){return v!=v},cc=function(v,N,V){for(var it=V-1,vt=v.length;++it<vt;)if(v[it]===N)return it;return-1},lc=function(v,N,V){return N==N?cc(v,N,V):Iu(v,kf,V)},dc=function(v,N){return!!(v!=null&&v.length)&&lc(v,N,0)>-1},Bf=function(v,N,V){for(var it=-1,vt=v==null?0:v.length;++it<vt;)if(V(N,v[it]))return!0;return!1},Ff=function(){},hc=ga&&1/oo(new ga([,-0]))[1]==1/0?function(v){return new ga(v)}:Ff,hu=function(v,N,V){var it=-1,vt=dc,xt=v.length,At=!0,Nt=[],Zt=Nt;if(V)At=!1,vt=Bf;else if(xt>=200){var ie=N?null:hc(v);if(ie)return oo(ie);At=!1,vt=$i,Zt=new Xo}else Zt=N?[]:Nt;t:for(;++it<xt;){var _e=v[it],Ee=N?N(_e):_e;if(_e=V||_e!==0?_e:0,At&&Ee==Ee){for(var Xe=Zt.length;Xe--;)if(Zt[Xe]===Ee)continue t;N&&Zt.push(Ee),Nt.push(_e)}else vt(Zt,Ee,V)||(Zt!==Nt&&Zt.push(Ee),Nt.push(_e))}return Nt},uf=function(v){return Et(v)&&Nr(v)},vc=ds(function(v){return hu(Mo(v,1,uf,!0))}),$c=function(v,N){return Ai(N,function(V){return v[V]})},vu,pc=function(v){return v==null?[]:$c(v,fe(v))};try{vu={clone:$a,constant:za,each:xi,filter:Tu,has:Eo,isArray:$,isEmpty:d,isFunction:Ht,isUndefined:G,keys:fe,map:kt,reduce:me,size:Do,transform:wo,union:vc,values:pc}}catch(v){}vu||(vu=window._);var ea=vu,Ou=si;function si(v){this._isDirected=!ea.has(v,"directed")||v.directed,this._isMultigraph=!!ea.has(v,"multigraph")&&v.multigraph,this._isCompound=!!ea.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=ea.constant(void 0),this._defaultEdgeLabelFn=ea.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function ff(v,N){v[N]?v[N]++:v[N]=1}function $u(v,N){--v[N]||delete v[N]}function uu(v,N,V,it){var vt=""+N,xt=""+V;if(!v&&vt>xt){var At=vt;vt=xt,xt=At}return vt+""+xt+""+(ea.isUndefined(it)?"\0":it)}function zf(v,N,V,it){var vt=""+N,xt=""+V;if(!v&&vt>xt){var At=vt;vt=xt,xt=At}var Nt={v:vt,w:xt};return it&&(Nt.name=it),Nt}function Du(v,N){return uu(v,N.v,N.w,N.name)}si.prototype._nodeCount=0,si.prototype._edgeCount=0,si.prototype.isDirected=function(){return this._isDirected},si.prototype.isMultigraph=function(){return this._isMultigraph},si.prototype.isCompound=function(){return this._isCompound},si.prototype.setGraph=function(v){return this._label=v,this},si.prototype.graph=function(){return this._label},si.prototype.setDefaultNodeLabel=function(v){return ea.isFunction(v)||(v=ea.constant(v)),this._defaultNodeLabelFn=v,this},si.prototype.nodeCount=function(){return this._nodeCount},si.prototype.nodes=function(){return ea.keys(this._nodes)},si.prototype.sources=function(){var v=this;return ea.filter(this.nodes(),function(N){return ea.isEmpty(v._in[N])})},si.prototype.sinks=function(){var v=this;return ea.filter(this.nodes(),function(N){return ea.isEmpty(v._out[N])})},si.prototype.setNodes=function(v,N){var V=arguments,it=this;return ea.each(v,function(vt){V.length>1?it.setNode(vt,N):it.setNode(vt)}),this},si.prototype.setNode=function(v,N){return ea.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=N),this):(this._nodes[v]=arguments.length>1?N:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},si.prototype.node=function(v){return this._nodes[v]},si.prototype.hasNode=function(v){return ea.has(this._nodes,v)},si.prototype.removeNode=function(v){var N=this;if(ea.has(this._nodes,v)){var V=function(it){N.removeEdge(N._edgeObjs[it])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],ea.each(this.children(v),function(it){N.setParent(it)}),delete this._children[v]),ea.each(ea.keys(this._in[v]),V),delete this._in[v],delete this._preds[v],ea.each(ea.keys(this._out[v]),V),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},si.prototype.setParent=function(v,N){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ea.isUndefined(N))N="\0";else{for(var V=N+="";!ea.isUndefined(V);V=this.parent(V))if(V===v)throw new Error("Setting "+N+" as parent of "+v+" would create a cycle");this.setNode(N)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=N,this._children[N][v]=!0,this},si.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},si.prototype.parent=function(v){if(this._isCompound){var N=this._parent[v];if(N!=="\0")return N}},si.prototype.children=function(v){if(ea.isUndefined(v)&&(v="\0"),this._isCompound){var N=this._children[v];if(N)return ea.keys(N)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},si.prototype.predecessors=function(v){var N=this._preds[v];if(N)return ea.keys(N)},si.prototype.successors=function(v){var N=this._sucs[v];if(N)return ea.keys(N)},si.prototype.neighbors=function(v){var N=this.predecessors(v);if(N)return ea.union(N,this.successors(v))},si.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},si.prototype.filterNodes=function(v){var N=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});N.setGraph(this.graph());var V=this;ea.each(this._nodes,function(xt,At){v(At)&&N.setNode(At,xt)}),ea.each(this._edgeObjs,function(xt){N.hasNode(xt.v)&&N.hasNode(xt.w)&&N.setEdge(xt,V.edge(xt))});var it={};function vt(xt){var At=V.parent(xt);return At===void 0||N.hasNode(At)?(it[xt]=At,At):At in it?it[At]:vt(At)}return this._isCompound&&ea.each(N.nodes(),function(xt){N.setParent(xt,vt(xt))}),N},si.prototype.setDefaultEdgeLabel=function(v){return ea.isFunction(v)||(v=ea.constant(v)),this._defaultEdgeLabelFn=v,this},si.prototype.edgeCount=function(){return this._edgeCount},si.prototype.edges=function(){return ea.values(this._edgeObjs)},si.prototype.setPath=function(v,N){var V=this,it=arguments;return ea.reduce(v,function(vt,xt){return it.length>1?V.setEdge(vt,xt,N):V.setEdge(vt,xt),xt}),this},si.prototype.setEdge=function(){var v,N,V,it,vt=!1,xt=arguments[0];typeof xt=="object"&&xt!==null&&"v"in xt?(v=xt.v,N=xt.w,V=xt.name,arguments.length===2&&(it=arguments[1],vt=!0)):(v=xt,N=arguments[1],V=arguments[3],arguments.length>2&&(it=arguments[2],vt=!0)),v=""+v,N=""+N,ea.isUndefined(V)||(V=""+V);var At=uu(this._isDirected,v,N,V);if(ea.has(this._edgeLabels,At))return vt&&(this._edgeLabels[At]=it),this;if(!ea.isUndefined(V)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(N),this._edgeLabels[At]=vt?it:this._defaultEdgeLabelFn(v,N,V);var Nt=zf(this._isDirected,v,N,V);return v=Nt.v,N=Nt.w,Object.freeze(Nt),this._edgeObjs[At]=Nt,ff(this._preds[N],v),ff(this._sucs[v],N),this._in[N][At]=Nt,this._out[v][At]=Nt,this._edgeCount++,this},si.prototype.edge=function(v,N,V){var it=arguments.length===1?Du(this._isDirected,arguments[0]):uu(this._isDirected,v,N,V);return this._edgeLabels[it]},si.prototype.hasEdge=function(v,N,V){var it=arguments.length===1?Du(this._isDirected,arguments[0]):uu(this._isDirected,v,N,V);return ea.has(this._edgeLabels,it)},si.prototype.removeEdge=function(v,N,V){var it=arguments.length===1?Du(this._isDirected,arguments[0]):uu(this._isDirected,v,N,V),vt=this._edgeObjs[it];return vt&&(v=vt.v,N=vt.w,delete this._edgeLabels[it],delete this._edgeObjs[it],$u(this._preds[N],v),$u(this._sucs[v],N),delete this._in[N][it],delete this._out[v][it],this._edgeCount--),this},si.prototype.inEdges=function(v,N){var V=this._in[v];if(V){var it=ea.values(V);return N?ea.filter(it,function(vt){return vt.v===N}):it}},si.prototype.outEdges=function(v,N){var V=this._out[v];if(V){var it=ea.values(V);return N?ea.filter(it,function(vt){return vt.w===N}):it}},si.prototype.nodeEdges=function(v,N){var V=this.inEdges(v,N);if(V)return V.concat(this.outEdges(v,N))};var gc={Graph:Ou,version:"2.1.8"},cf={write:function(v){var N={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:mc(v),edges:Fs(v)};return ea.isUndefined(v.graph())||(N.value=ea.clone(v.graph())),N},read:function(v){var N=new Ou(v.options).setGraph(v.value);return ea.each(v.nodes,function(V){N.setNode(V.v,V.value),V.parent&&N.setParent(V.v,V.parent)}),ea.each(v.edges,function(V){N.setEdge({v:V.v,w:V.w,name:V.name},V.value)}),N}};function mc(v){return ea.map(v.nodes(),function(N){var V=v.node(N),it=v.parent(N),vt={v:N};return ea.isUndefined(V)||(vt.value=V),ea.isUndefined(it)||(vt.parent=it),vt})}function Fs(v){return ea.map(v.edges(),function(N){var V=v.edge(N),it={v:N.v,w:N.w};return ea.isUndefined(N.name)||(it.name=N.name),ea.isUndefined(V)||(it.value=V),it})}var lt=function(v){var N,V={},it=[];function vt(xt){ea.has(V,xt)||(V[xt]=!0,N.push(xt),ea.each(v.successors(xt),vt),ea.each(v.predecessors(xt),vt))}return ea.each(v.nodes(),function(xt){N=[],vt(xt),N.length&&it.push(N)}),it},It=Yt;function Yt(){this._arr=[],this._keyIndices={}}Yt.prototype.size=function(){return this._arr.length},Yt.prototype.keys=function(){return this._arr.map(function(v){return v.key})},Yt.prototype.has=function(v){return ea.has(this._keyIndices,v)},Yt.prototype.priority=function(v){var N=this._keyIndices[v];if(N!==void 0)return this._arr[N].priority},Yt.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Yt.prototype.add=function(v,N){var V=this._keyIndices;if(v=String(v),!ea.has(V,v)){var it=this._arr,vt=it.length;return V[v]=vt,it.push({key:v,priority:N}),this._decrease(vt),!0}return!1},Yt.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},Yt.prototype.decrease=function(v,N){var V=this._keyIndices[v];if(N>this._arr[V].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[V].priority+" New: "+N);this._arr[V].priority=N,this._decrease(V)},Yt.prototype._heapify=function(v){var N=this._arr,V=2*v,it=V+1,vt=v;V<N.length&&(vt=N[V].priority<N[vt].priority?V:vt,it<N.length&&(vt=N[it].priority<N[vt].priority?it:vt),vt!==v&&(this._swap(v,vt),this._heapify(vt)))},Yt.prototype._decrease=function(v){for(var N,V=this._arr,it=V[v].priority;v!==0&&!(V[N=v>>1].priority<it);)this._swap(v,N),v=N},Yt.prototype._swap=function(v,N){var V=this._arr,it=this._keyIndices,vt=V[v],xt=V[N];V[v]=xt,V[N]=vt,it[xt.key]=v,it[vt.key]=N};var ce=function(v,N,V,it){return function(vt,xt,At,Nt){var Zt,ie,_e={},Ee=new It,Xe=function(yr){var tn=yr.v!==Zt?yr.v:yr.w,_r=_e[tn],Ar=At(yr),Tr=ie.distance+Ar;if(Ar<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+yr+" Weight: "+Ar);Tr<_r.distance&&(_r.distance=Tr,_r.predecessor=Zt,Ee.decrease(tn,Tr))};for(vt.nodes().forEach(function(yr){var tn=yr===xt?0:Number.POSITIVE_INFINITY;_e[yr]={distance:tn},Ee.add(yr,tn)});Ee.size()>0&&(Zt=Ee.removeMin(),(ie=_e[Zt]).distance!==Number.POSITIVE_INFINITY);)Nt(Zt).forEach(Xe);return _e}(v,String(N),V||Te,it||function(vt){return v.outEdges(vt)})},Te=ea.constant(1),cr=function(v,N,V){return ea.transform(v.nodes(),function(it,vt){it[vt]=ce(v,vt,N,V)},{})},mr=function(v){var N=0,V=[],it={},vt=[];function xt(At){var Nt=it[At]={onStack:!0,lowlink:N,index:N++};if(V.push(At),v.successors(At).forEach(function(_e){ea.has(it,_e)?it[_e].onStack&&(Nt.lowlink=Math.min(Nt.lowlink,it[_e].index)):(xt(_e),Nt.lowlink=Math.min(Nt.lowlink,it[_e].lowlink))}),Nt.lowlink===Nt.index){var Zt,ie=[];do Zt=V.pop(),it[Zt].onStack=!1,ie.push(Zt);while(At!==Zt);vt.push(ie)}}return v.nodes().forEach(function(At){ea.has(it,At)||xt(At)}),vt},Hr=function(v){return ea.filter(mr(v),function(N){return N.length>1||N.length===1&&v.hasEdge(N[0],N[0])})},wn=function(v,N,V){return function(it,vt,xt){var At={},Nt=it.nodes();return Nt.forEach(function(Zt){At[Zt]={},At[Zt][Zt]={distance:0},Nt.forEach(function(ie){Zt!==ie&&(At[Zt][ie]={distance:Number.POSITIVE_INFINITY})}),xt(Zt).forEach(function(ie){var _e=ie.v===Zt?ie.w:ie.v,Ee=vt(ie);At[Zt][_e]={distance:Ee,predecessor:Zt}})}),Nt.forEach(function(Zt){var ie=At[Zt];Nt.forEach(function(_e){var Ee=At[_e];Nt.forEach(function(Xe){var yr=Ee[Zt],tn=ie[Xe],_r=Ee[Xe],Ar=yr.distance+tn.distance;Ar<_r.distance&&(_r.distance=Ar,_r.predecessor=tn.predecessor)})})}),At}(v,N||Cn,V||function(it){return v.outEdges(it)})},Cn=ea.constant(1),Hn=aa;function aa(v){var N={},V={},it=[];if(ea.each(v.sinks(),function vt(xt){if(ea.has(V,xt))throw new Kn;ea.has(N,xt)||(V[xt]=!0,N[xt]=!0,ea.each(v.predecessors(xt),vt),delete V[xt],it.push(xt))}),ea.size(N)!==v.nodeCount())throw new Kn;return it}function Kn(){}aa.CycleException=Kn,Kn.prototype=new Error;var Oa=function(v,N,V){ea.isArray(N)||(N=[N]);var it=(v.isDirected()?v.successors:v.neighbors).bind(v),vt=[],xt={};return ea.each(N,function(At){if(!v.hasNode(At))throw new Error("Graph does not have node: "+At);Ja(v,At,V==="post",xt,it,vt)}),vt};function Ja(v,N,V,it,vt,xt){ea.has(it,N)||(it[N]=!0,V||xt.push(N),ea.each(vt(N),function(At){Ja(v,At,V,it,vt,xt)}),V&&xt.push(N))}var Na,Ta={Graph:gc.Graph,json:cf,alg:{components:lt,dijkstra:ce,dijkstraAll:cr,findCycles:Hr,floydWarshall:wn,isAcyclic:function(v){try{Hn(v)}catch(N){if(N instanceof Hn.CycleException)return!1;throw N}return!0},postorder:function(v,N){return Oa(v,N,"post")},preorder:function(v,N){return Oa(v,N,"pre")},prim:function(v,N){var V,it=new Ou,vt={},xt=new It;function At(Zt){var ie=Zt.v===V?Zt.w:Zt.v,_e=xt.priority(ie);if(_e!==void 0){var Ee=N(Zt);Ee<_e&&(vt[ie]=V,xt.decrease(ie,Ee))}}if(v.nodeCount()===0)return it;ea.each(v.nodes(),function(Zt){xt.add(Zt,Number.POSITIVE_INFINITY),it.setNode(Zt)}),xt.decrease(v.nodes()[0],0);for(var Nt=!1;xt.size()>0;){if(V=xt.removeMin(),ea.has(vt,V))it.setEdge(V,vt[V]);else{if(Nt)throw new Error("Input graph is not connected: "+v);Nt=!0}v.nodeEdges(V).forEach(At)}return it},tarjan:mr,topsort:Hn},version:gc.version};try{Na=Ta}catch(v){}Na||(Na=window.graphlib);var Ba=Na,ha=function(v){return oi(v,5)},Ya=function(v,N,V){if(!bt(V))return!1;var it=typeof N;return!!(it=="number"?Nr(V)&&A(N,V.length):it=="string"&&N in V)&&E(V[N],v)},Ua=Object.prototype,ma=Ua.hasOwnProperty,ri=ds(function(v,N){v=Object(v);var V=-1,it=N.length,vt=it>2?N[2]:void 0;for(vt&&Ya(N[0],N[1],vt)&&(it=1);++V<it;)for(var xt=N[V],At=Be(xt),Nt=-1,Zt=At.length;++Nt<Zt;){var ie=At[Nt],_e=v[ie];(_e===void 0||E(_e,Ua[ie])&&!ma.call(v,ie))&&(v[ie]=xt[ie])}return v}),Ei=function(v){return function(N,V,it){var vt=Object(N);if(!Nr(N)){var xt=es(V);N=fe(N),V=function(Nt){return xt(vt[Nt],Nt,vt)}}var At=v(N,V,it);return At>-1?vt[xt?N[At]:At]:void 0}},Vi=/^\s+|\s+$/g,gi=/^[-+]0x[0-9a-f]+$/i,ui=/^0b[01]+$/i,Hi=/^0o[0-7]+$/i,ko=parseInt,po=function(v){if(typeof v=="number")return v;if(jo(v))return NaN;if(bt(v)){var N=typeof v.valueOf=="function"?v.valueOf():v;v=bt(N)?N+"":N}if(typeof v!="string")return v===0?v:+v;v=v.replace(Vi,"");var V=ui.test(v);return V||Hi.test(v)?ko(v.slice(2),V?2:8):gi.test(v)?NaN:+v},Ls=function(v){return v?(v=po(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},Lu=function(v){var N=Ls(v),V=N%1;return N==N?V?N-V:N:0},ys=Math.max,pu=Ei(function(v,N,V){var it=v==null?0:v.length;if(!it)return-1;var vt=V==null?0:Lu(V);return vt<0&&(vt=ys(it+vt,0)),Iu(v,es(N),vt)}),tu=function(v){return v!=null&&v.length?Mo(v,1):[]},js=function(v,N){return v==null?v:Ui(v,Ga(N),Be)},lf=function(v){var N=v==null?0:v.length;return N?v[N-1]:void 0},qc=function(v,N){var V={};return N=es(N),di(v,function(it,vt,xt){_n(V,vt,N(it,vt,xt))}),V},gu=function(v,N,V){for(var it=-1,vt=v.length;++it<vt;){var xt=v[it],At=N(xt);if(At!=null&&(Nt===void 0?At==At&&!jo(At):V(At,Nt)))var Nt=At,Zt=xt}return Zt},qu=function(v,N){return v>N},yc=function(v){return v&&v.length?gu(v,ja,qu):void 0},Pu=function(v,N,V){(V!==void 0&&!E(v[N],V)||V===void 0&&!(N in v))&&_n(v,N,V)},Nu=Function.prototype,xc=Object.prototype,Qu=Nu.toString,df=xc.hasOwnProperty,Vs=Qu.call(Object),Ru=function(v){if(!Et(v)||st(v)!="[object Object]")return!1;var N=Ea(v);if(N===null)return!0;var V=df.call(N,"constructor")&&N.constructor;return typeof V=="function"&&V instanceof V&&Qu.call(V)==Vs},Ju=function(v,N){if((N!=="constructor"||typeof v[N]!="function")&&N!="__proto__")return v[N]},ku=function(v){return jt(v,Be(v))},bc=function(v,N,V,it,vt,xt,At){var Nt=Ju(v,V),Zt=Ju(N,V),ie=At.get(Zt);if(ie)Pu(v,V,ie);else{var _e=xt?xt(Nt,Zt,V+"",v,N,At):void 0,Ee=_e===void 0;if(Ee){var Xe=$(Zt),yr=!Xe&&R(Zt),tn=!Xe&&!yr&&pe(Zt);_e=Zt,Xe||yr||tn?$(Nt)?_e=Nt:uf(Nt)?_e=fn(Nt):yr?(Ee=!1,_e=Mr(Zt,!0)):tn?(Ee=!1,_e=Gr(Zt,!0)):_e=[]:Ru(Zt)||Bt(Zt)?(_e=Nt,Bt(Nt)?_e=ku(Nt):bt(Nt)&&!Ht(Nt)||(_e=Bn(Zt))):Ee=!1}Ee&&(At.set(Zt,_e),vt(_e,Zt,it,xt,At),At.delete(Zt)),Pu(v,V,_e)}},eu=function v(N,V,it,vt,xt){N!==V&&Ui(V,function(At,Nt){if(xt||(xt=new en),bt(At))bc(N,V,Nt,it,v,vt,xt);else{var Zt=vt?vt(Ju(N,Nt),At,Nt+"",N,V,xt):void 0;Zt===void 0&&(Zt=At),Pu(N,Nt,Zt)}},Be)},fu=function(v){return ds(function(N,V){var it=-1,vt=V.length,xt=vt>1?V[vt-1]:void 0,At=vt>2?V[2]:void 0;for(xt=v.length>3&&typeof xt=="function"?(vt--,xt):void 0,At&&Ya(V[0],V[1],At)&&(xt=vt<3?void 0:xt,vt=1),N=Object(N);++it<vt;){var Nt=V[it];Nt&&v(N,Nt,it,xt)}return N})}(function(v,N,V){eu(v,N,V)}),ru=function(v,N){return v<N},hf=function(v){return v&&v.length?gu(v,ja,ru):void 0},Rl=function(v,N){return v&&v.length?gu(v,es(N),ru):void 0},vf=function(){return nt.Date.now()},Qc=function(v,N,V,it){if(!bt(v))return v;for(var vt=-1,xt=(N=ji(N,v)).length,At=xt-1,Nt=v;Nt!=null&&++vt<xt;){var Zt=bo(N[vt]),ie=V;if(Zt==="__proto__"||Zt==="constructor"||Zt==="prototype")return v;if(vt!=At){var _e=Nt[Zt];(ie=it?it(_e,Zt,Nt):void 0)===void 0&&(ie=bt(_e)?_e:A(N[vt+1])?[]:{})}ir(Nt,Zt,ie),Nt=Nt[Zt]}return v},Jc=function(v,N,V){for(var it=-1,vt=N.length,xt={};++it<vt;){var At=N[it],Nt=ks(v,At);V(Nt,At)&&Qc(xt,ji(At,v),Nt)}return xt},tl=function(v,N){return Jc(v,N,function(V,it){return Js(v,it)})},el=function(v){return Xs(hi(v,void 0,tu),v+"")}(function(v,N){return v==null?{}:tl(v,N)}),Ec=Math.ceil,Gf=Math.max,kl=function(v,N,V,it){for(var vt=-1,xt=Gf(Ec((N-v)/(V||1)),0),At=Array(xt);xt--;)At[it?xt:++vt]=v,v+=V;return At},Bl=function(v){return function(N,V,it){return it&&typeof it!="number"&&Ya(N,V,it)&&(V=it=void 0),N=Ls(N),V===void 0?(V=N,N=0):V=Ls(V),it=it===void 0?N<V?1:-1:Ls(it),kl(N,V,it,v)}}(),rl=function(v,N){var V=v.length;for(v.sort(N);V--;)v[V]=v[V].value;return v},pf=function(v,N){if(v!==N){var V=v!==void 0,it=v===null,vt=v==v,xt=jo(v),At=N!==void 0,Nt=N===null,Zt=N==N,ie=jo(N);if(!Nt&&!ie&&!xt&&v>N||xt&&At&&Zt&&!Nt&&!ie||it&&At&&Zt||!V&&Zt||!vt)return 1;if(!it&&!xt&&!ie&&v<N||ie&&V&&vt&&!it&&!xt||Nt&&V&&vt||!At&&vt||!Zt)return-1}return 0},nl=function(v,N,V){for(var it=-1,vt=v.criteria,xt=N.criteria,At=vt.length,Nt=V.length;++it<At;){var Zt=pf(vt[it],xt[it]);if(Zt)return it>=Nt?Zt:Zt*(V[it]=="desc"?-1:1)}return v.index-N.index},gf=function(v,N,V){N=N.length?Ai(N,function(xt){return $(xt)?function(At){return ks(At,xt.length===1?xt[0]:xt)}:xt}):[ja];var it=-1;N=Ai(N,Pt(es));var vt=wt(v,function(xt,At,Nt){return{criteria:Ai(N,function(Zt){return Zt(xt)}),index:++it,value:xt}});return rl(vt,function(xt,At){return nl(xt,At,V)})},al=ds(function(v,N){if(v==null)return[];var V=N.length;return V>1&&Ya(v,N[0],N[1])?N=[]:V>2&&Ya(N[0],N[1],N[2])&&(N=[N[0]]),gf(v,Mo(N,1),[])}),Uf=0,Ts=function(v){var N=++Uf;return Cs(v)+N},il=function(v,N,V){for(var it=-1,vt=v.length,xt=N.length,At={};++it<vt;){var Nt=it<xt?N[it]:void 0;V(At,v[it],Nt)}return At},Wf,wc=function(v,N){return il(v||[],N||[],ir)};try{Wf={cloneDeep:ha,constant:za,defaults:ri,each:xi,filter:Tu,find:pu,flatten:tu,forEach:bi,forIn:js,has:Eo,isUndefined:G,last:lf,map:kt,mapValues:qc,max:yc,merge:fu,min:hf,minBy:Rl,now:vf,pick:el,range:Bl,reduce:me,sortBy:al,uniqueId:Ts,values:pc,zipObject:wc}}catch(v){}Wf||(Wf=window._);var nr=Wf,Bu=Hs;function Hs(){var v={};v._next=v._prev=v,this._sentinel=v}function Yf(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function ol(v,N){if(v!=="_next"&&v!=="_prev")return N}Hs.prototype.dequeue=function(){var v=this._sentinel,N=v._prev;if(N!==v)return Yf(N),N},Hs.prototype.enqueue=function(v){var N=this._sentinel;v._prev&&v._next&&Yf(v),v._next=N._next,N._next._prev=v,N._next=v,v._prev=N},Hs.prototype.toString=function(){for(var v=[],N=this._sentinel,V=N._prev;V!==N;)v.push(JSON.stringify(V,ol)),V=V._prev;return"["+v.join(", ")+"]"};var sl=Ba.Graph,Zs=function(v,N){if(v.nodeCount()<=1)return[];var V=function(vt,xt){var At=new sl,Nt=0,Zt=0;nr.forEach(vt.nodes(),function(Ee){At.setNode(Ee,{v:Ee,in:0,out:0})}),nr.forEach(vt.edges(),function(Ee){var Xe=At.edge(Ee.v,Ee.w)||0,yr=xt(Ee),tn=Xe+yr;At.setEdge(Ee.v,Ee.w,tn),Zt=Math.max(Zt,At.node(Ee.v).out+=yr),Nt=Math.max(Nt,At.node(Ee.w).in+=yr)});var ie=nr.range(Zt+Nt+3).map(function(){return new Bu}),_e=Nt+1;return nr.forEach(At.nodes(),function(Ee){mf(ie,_e,At.node(Ee))}),{graph:At,buckets:ie,zeroIdx:_e}}(v,N||ul),it=function(vt,xt,At){for(var Nt,Zt=[],ie=xt[xt.length-1],_e=xt[0];vt.nodeCount();){for(;Nt=_e.dequeue();)Fu(vt,xt,At,Nt);for(;Nt=ie.dequeue();)Fu(vt,xt,At,Nt);if(vt.nodeCount()){for(var Ee=xt.length-2;Ee>0;--Ee)if(Nt=xt[Ee].dequeue()){Zt=Zt.concat(Fu(vt,xt,At,Nt,!0));break}}}return Zt}(V.graph,V.buckets,V.zeroIdx);return nr.flatten(nr.map(it,function(vt){return v.outEdges(vt.v,vt.w)}),!0)},ul=nr.constant(1);function Fu(v,N,V,it,vt){var xt=vt?[]:void 0;return nr.forEach(v.inEdges(it.v),function(At){var Nt=v.edge(At),Zt=v.node(At.v);vt&&xt.push({v:At.v,w:At.w}),Zt.out-=Nt,mf(N,V,Zt)}),nr.forEach(v.outEdges(it.v),function(At){var Nt=v.edge(At),Zt=At.w,ie=v.node(Zt);ie.in-=Nt,mf(N,V,ie)}),v.removeNode(it.v),xt}function mf(v,N,V){V.out?V.in?v[V.out-V.in+N].enqueue(V):v[v.length-1].enqueue(V):v[0].enqueue(V)}var Sc={run:function(v){var N=v.graph().acyclicer==="greedy"?Zs(v,function(V){return function(it){return V.edge(it).weight}}(v)):function(V){var it=[],vt={},xt={};function At(Nt){nr.has(xt,Nt)||(xt[Nt]=!0,vt[Nt]=!0,nr.forEach(V.outEdges(Nt),function(Zt){nr.has(vt,Zt.w)?it.push(Zt):At(Zt.w)}),delete vt[Nt])}return nr.forEach(V.nodes(),At),it}(v);nr.forEach(N,function(V){var it=v.edge(V);v.removeEdge(V),it.forwardName=V.name,it.reversed=!0,v.setEdge(V.w,V.v,it,nr.uniqueId("rev"))})},undo:function(v){nr.forEach(v.edges(),function(N){var V=v.edge(N);if(V.reversed){v.removeEdge(N);var it=V.forwardName;delete V.reversed,delete V.forwardName,v.setEdge(N.w,N.v,V,it)}})}},Mc=Ba.Graph,rs={addDummyNode:zu,simplify:function(v){var N=new Mc().setGraph(v.graph());return nr.forEach(v.nodes(),function(V){N.setNode(V,v.node(V))}),nr.forEach(v.edges(),function(V){var it=N.edge(V.v,V.w)||{weight:0,minlen:1},vt=v.edge(V);N.setEdge(V.v,V.w,{weight:it.weight+vt.weight,minlen:Math.max(it.minlen,vt.minlen)})}),N},asNonCompoundGraph:function(v){var N=new Mc({multigraph:v.isMultigraph()}).setGraph(v.graph());return nr.forEach(v.nodes(),function(V){v.children(V).length||N.setNode(V,v.node(V))}),nr.forEach(v.edges(),function(V){N.setEdge(V,v.edge(V))}),N},successorWeights:function(v){var N=nr.map(v.nodes(),function(V){var it={};return nr.forEach(v.outEdges(V),function(vt){it[vt.w]=(it[vt.w]||0)+v.edge(vt).weight}),it});return nr.zipObject(v.nodes(),N)},predecessorWeights:function(v){var N=nr.map(v.nodes(),function(V){var it={};return nr.forEach(v.inEdges(V),function(vt){it[vt.v]=(it[vt.v]||0)+v.edge(vt).weight}),it});return nr.zipObject(v.nodes(),N)},intersectRect:function(v,N){var V,it,vt=v.x,xt=v.y,At=N.x-vt,Nt=N.y-xt,Zt=v.width/2,ie=v.height/2;if(!At&&!Nt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Nt)*Zt>Math.abs(At)*ie?(Nt<0&&(ie=-ie),V=ie*At/Nt,it=ie):(At<0&&(Zt=-Zt),V=Zt,it=Zt*Nt/At),{x:vt+V,y:xt+it}},buildLayerMatrix:function(v){var N=nr.map(nr.range(_c(v)+1),function(){return[]});return nr.forEach(v.nodes(),function(V){var it=v.node(V),vt=it.rank;nr.isUndefined(vt)||(N[vt][it.order]=V)}),N},normalizeRanks:function(v){var N=nr.min(nr.map(v.nodes(),function(V){return v.node(V).rank}));nr.forEach(v.nodes(),function(V){var it=v.node(V);nr.has(it,"rank")&&(it.rank-=N)})},removeEmptyRanks:function(v){var N=nr.min(nr.map(v.nodes(),function(xt){return v.node(xt).rank})),V=[];nr.forEach(v.nodes(),function(xt){var At=v.node(xt).rank-N;V[At]||(V[At]=[]),V[At].push(xt)});var it=0,vt=v.graph().nodeRankFactor;nr.forEach(V,function(xt,At){nr.isUndefined(xt)&&At%vt!=0?--it:it&&nr.forEach(xt,function(Nt){v.node(Nt).rank+=it})})},addBorderNode:function(v,N,V,it){var vt={width:0,height:0};return arguments.length>=4&&(vt.rank=V,vt.order=it),zu(v,"border",vt,N)},maxRank:_c,partition:function(v,N){var V={lhs:[],rhs:[]};return nr.forEach(v,function(it){N(it)?V.lhs.push(it):V.rhs.push(it)}),V},time:function(v,N){var V=nr.now();try{return N()}finally{console.log(v+" time: "+(nr.now()-V)+"ms")}},notime:function(v,N){return N()}};function zu(v,N,V,it){var vt;do vt=nr.uniqueId(it);while(v.hasNode(vt));return V.dummy=N,v.setNode(vt,V),vt}function _c(v){return nr.max(nr.map(v.nodes(),function(N){var V=v.node(N).rank;if(!nr.isUndefined(V))return V}))}var Xf={run:function(v){v.graph().dummyChains=[],nr.forEach(v.edges(),function(N){(function(V,it){var vt,xt,At,Nt=it.v,Zt=V.node(Nt).rank,ie=it.w,_e=V.node(ie).rank,Ee=it.name,Xe=V.edge(it),yr=Xe.labelRank;if(_e!==Zt+1){for(V.removeEdge(it),At=0,++Zt;Zt<_e;++At,++Zt)Xe.points=[],xt={width:0,height:0,edgeLabel:Xe,edgeObj:it,rank:Zt},vt=rs.addDummyNode(V,"edge",xt,"_d"),Zt===yr&&(xt.width=Xe.width,xt.height=Xe.height,xt.dummy="edge-label",xt.labelpos=Xe.labelpos),V.setEdge(Nt,vt,{weight:Xe.weight},Ee),At===0&&V.graph().dummyChains.push(vt),Nt=vt;V.setEdge(Nt,ie,{weight:Xe.weight},Ee)}})(v,N)})},undo:function(v){nr.forEach(v.graph().dummyChains,function(N){var V,it=v.node(N),vt=it.edgeLabel;for(v.setEdge(it.edgeObj,vt);it.dummy;)V=v.successors(N)[0],v.removeNode(N),vt.points.push({x:it.x,y:it.y}),it.dummy==="edge-label"&&(vt.x=it.x,vt.y=it.y,vt.width=it.width,vt.height=it.height),N=V,it=v.node(N)})}},mu=function(v){var N={};nr.forEach(v.sources(),function V(it){var vt=v.node(it);if(nr.has(N,it))return vt.rank;N[it]=!0;var xt=nr.min(nr.map(v.outEdges(it),function(At){return V(At.w)-v.edge(At).minlen}));return xt!==Number.POSITIVE_INFINITY&&xt!=null||(xt=0),vt.rank=xt})},yf=function(v,N){return v.node(N.w).rank-v.node(N.v).rank-v.edge(N).minlen},Gu=Ba.Graph,yu=yf,tf=function(v){var N,V,it=new Gu({directed:!1}),vt=v.nodes()[0],xt=v.nodeCount();for(it.setNode(vt,{});xf(it,v)<xt;)N=bf(it,v),V=it.hasNode(N.v)?yu(v,N):-yu(v,N),Uu(it,v,V);return it};function xf(v,N){return nr.forEach(v.nodes(),function V(it){nr.forEach(N.nodeEdges(it),function(vt){var xt=vt.v,At=it===xt?vt.w:xt;v.hasNode(At)||yu(N,vt)||(v.setNode(At,{}),v.setEdge(it,At,{}),V(At))})}),v.nodeCount()}function bf(v,N){return nr.minBy(N.edges(),function(V){if(v.hasNode(V.v)!==v.hasNode(V.w))return yu(N,V)})}function Uu(v,N,V){nr.forEach(v.nodes(),function(it){N.node(it).rank+=V})}var jf=yf,Cc=mu,Ef=Ba.alg.preorder,fl=Ba.alg.postorder,Vf=rs.simplify,wf=Ps;function Ps(v){v=Vf(v),Cc(v);var N,V=tf(v);for(Tc(V),Hf(V,v);N=Sf(V);)ef(V,v,N,zl(V,v,N))}function Hf(v,N){var V=fl(v,v.nodes());V=V.slice(0,V.length-1),nr.forEach(V,function(it){(function(vt,xt,At){var Nt=vt.node(At).parent;vt.edge(At,Nt).cutvalue=Fl(vt,xt,At)})(v,N,it)})}function Fl(v,N,V){var it=v.node(V).parent,vt=!0,xt=N.edge(V,it),At=0;return xt||(vt=!1,xt=N.edge(it,V)),At=xt.weight,nr.forEach(N.nodeEdges(V),function(Nt){var Zt,ie,_e=Nt.v===V,Ee=_e?Nt.w:Nt.v;if(Ee!==it){var Xe=_e===vt,yr=N.edge(Nt).weight;if(At+=Xe?yr:-yr,Zt=V,ie=Ee,v.hasEdge(Zt,ie)){var tn=v.edge(V,Ee).cutvalue;At+=Xe?-tn:tn}}}),At}function Tc(v,N){arguments.length<2&&(N=v.nodes()[0]),cl(v,{},1,N)}function cl(v,N,V,it,vt){var xt=V,At=v.node(it);return N[it]=!0,nr.forEach(v.neighbors(it),function(Nt){nr.has(N,Nt)||(V=cl(v,N,V,Nt,it))}),At.low=xt,At.lim=V++,vt?At.parent=vt:delete At.parent,V}function Sf(v){return nr.find(v.edges(),function(N){return v.edge(N).cutvalue<0})}function zl(v,N,V){var it=V.v,vt=V.w;N.hasEdge(it,vt)||(it=V.w,vt=V.v);var xt=v.node(it),At=v.node(vt),Nt=xt,Zt=!1;xt.lim>At.lim&&(Nt=At,Zt=!0);var ie=nr.filter(N.edges(),function(_e){return Zt===Gl(v,v.node(_e.v),Nt)&&Zt!==Gl(v,v.node(_e.w),Nt)});return nr.minBy(ie,function(_e){return jf(N,_e)})}function ef(v,N,V,it){var vt=V.v,xt=V.w;v.removeEdge(vt,xt),v.setEdge(it.v,it.w,{}),Tc(v),Hf(v,N),function(At,Nt){var Zt=nr.find(At.nodes(),function(_e){return!Nt.node(_e).parent}),ie=Ef(At,Zt);ie=ie.slice(1),nr.forEach(ie,function(_e){var Ee=At.node(_e).parent,Xe=Nt.edge(_e,Ee),yr=!1;Xe||(Xe=Nt.edge(Ee,_e),yr=!0),Nt.node(_e).rank=Nt.node(Ee).rank+(yr?Xe.minlen:-Xe.minlen)})}(v,N)}function Gl(v,N,V){return V.low<=N.lim&&N.lim<=V.lim}Ps.initLowLimValues=Tc,Ps.initCutValues=Hf,Ps.calcCutValue=Fl,Ps.leaveEdge=Sf,Ps.enterEdge=zl,Ps.exchangeEdges=ef;var ll=mu,dd=function(v){switch(v.graph().ranker){case"network-simplex":dl(v);break;case"tight-tree":(function(N){ll(N),tf(N)})(v);break;case"longest-path":Ul(v);break;default:dl(v)}},Ul=ll;function dl(v){wf(v)}var hl=function(v){var N=function(V){var it={},vt=0;function xt(At){var Nt=vt;nr.forEach(V.children(At),xt),it[At]={low:Nt,lim:vt++}}return nr.forEach(V.children(),xt),it}(v);nr.forEach(v.graph().dummyChains,function(V){for(var it=v.node(V),vt=it.edgeObj,xt=function(Ee,Xe,yr,tn){var _r,Ar,Tr=[],Dn=[],jn=Math.min(Xe[yr].low,Xe[tn].low),Fn=Math.max(Xe[yr].lim,Xe[tn].lim);_r=yr;do _r=Ee.parent(_r),Tr.push(_r);while(_r&&(Xe[_r].low>jn||Fn>Xe[_r].lim));for(Ar=_r,_r=tn;(_r=Ee.parent(_r))!==Ar;)Dn.push(_r);return{path:Tr.concat(Dn.reverse()),lca:Ar}}(v,N,vt.v,vt.w),At=xt.path,Nt=xt.lca,Zt=0,ie=At[Zt],_e=!0;V!==vt.w;){if(it=v.node(V),_e){for(;(ie=At[Zt])!==Nt&&v.node(ie).maxRank<it.rank;)Zt++;ie===Nt&&(_e=!1)}if(!_e){for(;Zt<At.length-1&&v.node(ie=At[Zt+1]).minRank<=it.rank;)Zt++;ie=At[Zt]}v.setParent(V,ie),V=v.successors(V)[0]}})},Wl={run:function(v){var N=rs.addDummyNode(v,"root",{},"_root"),V=function(At){var Nt={};function Zt(ie,_e){var Ee=At.children(ie);Ee&&Ee.length&&nr.forEach(Ee,function(Xe){Zt(Xe,_e+1)}),Nt[ie]=_e}return nr.forEach(At.children(),function(ie){Zt(ie,1)}),Nt}(v),it=nr.max(nr.values(V))-1,vt=2*it+1;v.graph().nestingRoot=N,nr.forEach(v.edges(),function(At){v.edge(At).minlen*=vt});var xt=function(At){return nr.reduce(At.edges(),function(Nt,Zt){return Nt+At.edge(Zt).weight},0)}(v)+1;nr.forEach(v.children(),function(At){Yl(v,N,vt,xt,it,V,At)}),v.graph().nodeRankFactor=vt},cleanup:function(v){var N=v.graph();v.removeNode(N.nestingRoot),delete N.nestingRoot,nr.forEach(v.edges(),function(V){v.edge(V).nestingEdge&&v.removeEdge(V)})}};function Yl(v,N,V,it,vt,xt,At){var Nt=v.children(At);if(Nt.length){var Zt=rs.addBorderNode(v,"_bt"),ie=rs.addBorderNode(v,"_bb"),_e=v.node(At);v.setParent(Zt,At),_e.borderTop=Zt,v.setParent(ie,At),_e.borderBottom=ie,nr.forEach(Nt,function(Ee){Yl(v,N,V,it,vt,xt,Ee);var Xe=v.node(Ee),yr=Xe.borderTop?Xe.borderTop:Ee,tn=Xe.borderBottom?Xe.borderBottom:Ee,_r=Xe.borderTop?it:2*it,Ar=yr!==tn?1:vt-xt[At]+1;v.setEdge(Zt,yr,{weight:_r,minlen:Ar,nestingEdge:!0}),v.setEdge(tn,ie,{weight:_r,minlen:Ar,nestingEdge:!0})}),v.parent(At)||v.setEdge(N,Zt,{weight:0,minlen:vt+xt[At]})}else At!==N&&v.setEdge(N,At,{weight:0,minlen:V})}var Xl=function(v){nr.forEach(v.children(),function N(V){var it=v.children(V),vt=v.node(V);if(it.length&&nr.forEach(it,N),nr.has(vt,"minRank")){vt.borderLeft=[],vt.borderRight=[];for(var xt=vt.minRank,At=vt.maxRank+1;xt<At;++xt)vl(v,"borderLeft","_bl",V,vt,xt),vl(v,"borderRight","_br",V,vt,xt)}})};function vl(v,N,V,it,vt,xt){var At={width:0,height:0,rank:xt,borderType:N},Nt=vt[N][xt-1],Zt=rs.addDummyNode(v,"border",At,V);vt[N][xt]=Zt,v.setParent(Zt,it),Nt&&v.setEdge(Nt,Zt,{weight:1})}var pl={adjust:function(v){var N=v.graph().rankdir.toLowerCase();N!=="lr"&&N!=="rl"||jl(v)},undo:function(v){var N=v.graph().rankdir.toLowerCase();N!=="bt"&&N!=="rl"||function(V){nr.forEach(V.nodes(),function(it){Ac(V.node(it))}),nr.forEach(V.edges(),function(it){var vt=V.edge(it);nr.forEach(vt.points,Ac),nr.has(vt,"y")&&Ac(vt)})}(v),N!=="lr"&&N!=="rl"||(function(V){nr.forEach(V.nodes(),function(it){Ks(V.node(it))}),nr.forEach(V.edges(),function(it){var vt=V.edge(it);nr.forEach(vt.points,Ks),nr.has(vt,"x")&&Ks(vt)})}(v),jl(v))}};function jl(v){nr.forEach(v.nodes(),function(N){Vl(v.node(N))}),nr.forEach(v.edges(),function(N){Vl(v.edge(N))})}function Vl(v){var N=v.width;v.width=v.height,v.height=N}function Ac(v){v.y=-v.y}function Ks(v){var N=v.x;v.x=v.y,v.y=N}var Ic=function(v){var N={},V=nr.filter(v.nodes(),function(Nt){return!v.children(Nt).length}),it=nr.max(nr.map(V,function(Nt){return v.node(Nt).rank})),vt=nr.map(nr.range(it+1),function(){return[]});function xt(Nt){if(!nr.has(N,Nt)){N[Nt]=!0;var Zt=v.node(Nt);vt[Zt.rank].push(Nt),nr.forEach(v.successors(Nt),xt)}}var At=nr.sortBy(V,function(Nt){return v.node(Nt).rank});return nr.forEach(At,xt),vt},Oc=function(v,N){for(var V=0,it=1;it<N.length;++it)V+=Zf(v,N[it-1],N[it]);return V};function Zf(v,N,V){for(var it=nr.zipObject(V,nr.map(V,function(ie,_e){return _e})),vt=nr.flatten(nr.map(N,function(ie){return nr.sortBy(nr.map(v.outEdges(ie),function(_e){return{pos:it[_e.w],weight:v.edge(_e).weight}}),"pos")}),!0),xt=1;xt<V.length;)xt<<=1;var At=2*xt-1;xt-=1;var Nt=nr.map(new Array(At),function(){return 0}),Zt=0;return nr.forEach(vt.forEach(function(ie){var _e=ie.pos+xt;Nt[_e]+=ie.weight;for(var Ee=0;_e>0;)_e%2&&(Ee+=Nt[_e+1]),Nt[_e=_e-1>>1]+=ie.weight;Zt+=ie.weight*Ee})),Zt}var gl=function(v,N){return nr.map(N,function(V){var it=v.inEdges(V);if(it.length){var vt=nr.reduce(it,function(xt,At){var Nt=v.edge(At),Zt=v.node(At.v);return{sum:xt.sum+Nt.weight*Zt.order,weight:xt.weight+Nt.weight}},{sum:0,weight:0});return{v:V,barycenter:vt.sum/vt.weight,weight:vt.weight}}return{v:V}})},Dc=function(v,N){var V={};return nr.forEach(v,function(it,vt){var xt=V[it.v]={indegree:0,in:[],out:[],vs:[it.v],i:vt};nr.isUndefined(it.barycenter)||(xt.barycenter=it.barycenter,xt.weight=it.weight)}),nr.forEach(N.edges(),function(it){var vt=V[it.v],xt=V[it.w];nr.isUndefined(vt)||nr.isUndefined(xt)||(xt.indegree++,vt.out.push(V[it.w]))}),function(it){var vt=[];function xt(Zt){return function(ie){ie.merged||(nr.isUndefined(ie.barycenter)||nr.isUndefined(Zt.barycenter)||ie.barycenter>=Zt.barycenter)&&function(_e,Ee){var Xe=0,yr=0;_e.weight&&(Xe+=_e.barycenter*_e.weight,yr+=_e.weight),Ee.weight&&(Xe+=Ee.barycenter*Ee.weight,yr+=Ee.weight),_e.vs=Ee.vs.concat(_e.vs),_e.barycenter=Xe/yr,_e.weight=yr,_e.i=Math.min(Ee.i,_e.i),Ee.merged=!0}(Zt,ie)}}function At(Zt){return function(ie){ie.in.push(Zt),--ie.indegree==0&&it.push(ie)}}for(;it.length;){var Nt=it.pop();vt.push(Nt),nr.forEach(Nt.in.reverse(),xt(Nt)),nr.forEach(Nt.out,At(Nt))}return nr.map(nr.filter(vt,function(Zt){return!Zt.merged}),function(Zt){return nr.pick(Zt,["vs","i","barycenter","weight"])})}(nr.filter(V,function(it){return!it.indegree}))},Kf=function(v,N){var V=rs.partition(v,function(Ee){return nr.has(Ee,"barycenter")}),it=V.lhs,vt=nr.sortBy(V.rhs,function(Ee){return-Ee.i}),xt=[],At=0,Nt=0,Zt=0;it.sort((ie=!!N,function(Ee,Xe){return Ee.barycenter<Xe.barycenter?-1:Ee.barycenter>Xe.barycenter?1:ie?Xe.i-Ee.i:Ee.i-Xe.i})),Zt=rf(xt,vt,Zt),nr.forEach(it,function(Ee){Zt+=Ee.vs.length,xt.push(Ee.vs),At+=Ee.barycenter*Ee.weight,Nt+=Ee.weight,Zt=rf(xt,vt,Zt)});var ie,_e={vs:nr.flatten(xt,!0)};return Nt&&(_e.barycenter=At/Nt,_e.weight=Nt),_e};function rf(v,N,V){for(var it;N.length&&(it=nr.last(N)).i<=V;)N.pop(),v.push(it.vs),V++;return V}var ml=function v(N,V,it,vt){var xt=N.children(V),At=N.node(V),Nt=At?At.borderLeft:void 0,Zt=At?At.borderRight:void 0,ie={};Nt&&(xt=nr.filter(xt,function(_r){return _r!==Nt&&_r!==Zt}));var _e=gl(N,xt);nr.forEach(_e,function(_r){if(N.children(_r.v).length){var Ar=v(N,_r.v,it,vt);ie[_r.v]=Ar,nr.has(Ar,"barycenter")&&(Tr=_r,Dn=Ar,nr.isUndefined(Tr.barycenter)?(Tr.barycenter=Dn.barycenter,Tr.weight=Dn.weight):(Tr.barycenter=(Tr.barycenter*Tr.weight+Dn.barycenter*Dn.weight)/(Tr.weight+Dn.weight),Tr.weight+=Dn.weight))}var Tr,Dn});var Ee=Dc(_e,it);(function(_r,Ar){nr.forEach(_r,function(Tr){Tr.vs=nr.flatten(Tr.vs.map(function(Dn){return Ar[Dn]?Ar[Dn].vs:Dn}),!0)})})(Ee,ie);var Xe=Kf(Ee,vt);if(Nt&&(Xe.vs=nr.flatten([Nt,Xe.vs,Zt],!0),N.predecessors(Nt).length)){var yr=N.node(N.predecessors(Nt)[0]),tn=N.node(N.predecessors(Zt)[0]);nr.has(Xe,"barycenter")||(Xe.barycenter=0,Xe.weight=0),Xe.barycenter=(Xe.barycenter*Xe.weight+yr.order+tn.order)/(Xe.weight+2),Xe.weight+=2}return Xe},Lc=Ba.Graph,Pc=function(v,N,V){var it=function(xt){for(var At;xt.hasNode(At=nr.uniqueId("_root")););return At}(v),vt=new Lc({compound:!0}).setGraph({root:it}).setDefaultNodeLabel(function(xt){return v.node(xt)});return nr.forEach(v.nodes(),function(xt){var At=v.node(xt),Nt=v.parent(xt);(At.rank===N||At.minRank<=N&&N<=At.maxRank)&&(vt.setNode(xt),vt.setParent(xt,Nt||it),nr.forEach(v[V](xt),function(Zt){var ie=Zt.v===xt?Zt.w:Zt.v,_e=vt.edge(ie,xt),Ee=nr.isUndefined(_e)?0:_e.weight;vt.setEdge(ie,xt,{weight:v.edge(Zt).weight+Ee})}),nr.has(At,"minRank")&&vt.setNode(xt,{borderLeft:At.borderLeft[N],borderRight:At.borderRight[N]}))}),vt},Nc=function(v,N,V){var it,vt={};nr.forEach(V,function(xt){for(var At,Nt,Zt=v.parent(xt);Zt;){if((At=v.parent(Zt))?(Nt=vt[At],vt[At]=Zt):(Nt=it,it=Zt),Nt&&Nt!==Zt)return void N.setEdge(Nt,Zt);Zt=At}})},$f=Ba.Graph,qf=function(v){var N=rs.maxRank(v),V=Mf(v,nr.range(1,N+1),"inEdges"),it=Mf(v,nr.range(N-1,-1,-1),"outEdges"),vt=Ic(v);xu(v,vt);for(var xt,At=Number.POSITIVE_INFINITY,Nt=0,Zt=0;Zt<4;++Nt,++Zt){Qf(Nt%2?V:it,Nt%4>=2),vt=rs.buildLayerMatrix(v);var ie=Oc(v,vt);ie<At&&(Zt=0,xt=nr.cloneDeep(vt),At=ie)}xu(v,xt)};function Mf(v,N,V){return nr.map(N,function(it){return Pc(v,it,V)})}function Qf(v,N){var V=new $f;nr.forEach(v,function(it){var vt=it.graph().root,xt=ml(it,vt,V,N);nr.forEach(xt.vs,function(At,Nt){it.node(At).order=Nt}),Nc(it,V,xt.vs)})}function xu(v,N){nr.forEach(N,function(V){nr.forEach(V,function(it,vt){v.node(it).order=vt})})}var Hl=Ba.Graph,bu=function(v){var N,V=rs.buildLayerMatrix(v),it=nr.merge(nf(v,V),Rc(v,V)),vt={};nr.forEach(["u","d"],function(At){N=At==="u"?V:nr.values(V).reverse(),nr.forEach(["l","r"],function(Nt){Nt==="r"&&(N=nr.map(N,function(Ee){return nr.values(Ee).reverse()}));var Zt=(At==="u"?v.predecessors:v.successors).bind(v),ie=Zl(v,N,it,Zt),_e=_f(v,N,ie.root,ie.align,Nt==="r");Nt==="r"&&(_e=nr.mapValues(_e,function(Ee){return-Ee})),vt[At+Nt]=_e})});var xt=cu(v,vt);return Bc(vt,xt),Kl(vt,v.graph().align)};function nf(v,N){var V={};return nr.reduce(N,function(it,vt){var xt=0,At=0,Nt=it.length,Zt=nr.last(vt);return nr.forEach(vt,function(ie,_e){var Ee=function(yr,tn){if(yr.node(tn).dummy)return nr.find(yr.predecessors(tn),function(_r){return yr.node(_r).dummy})}(v,ie),Xe=Ee?v.node(Ee).order:Nt;(Ee||ie===Zt)&&(nr.forEach(vt.slice(At,_e+1),function(yr){nr.forEach(v.predecessors(yr),function(tn){var _r=v.node(tn),Ar=_r.order;!(Ar<xt||Xe<Ar)||_r.dummy&&v.node(yr).dummy||kc(V,tn,yr)})}),At=_e+1,xt=Xe)}),vt}),V}function Rc(v,N){var V={};function it(vt,xt,At,Nt,Zt){var ie;nr.forEach(nr.range(xt,At),function(_e){ie=vt[_e],v.node(ie).dummy&&nr.forEach(v.predecessors(ie),function(Ee){var Xe=v.node(Ee);Xe.dummy&&(Xe.order<Nt||Xe.order>Zt)&&kc(V,Ee,ie)})})}return nr.reduce(N,function(vt,xt){var At,Nt=-1,Zt=0;return nr.forEach(xt,function(ie,_e){if(v.node(ie).dummy==="border"){var Ee=v.predecessors(ie);Ee.length&&(At=v.node(Ee[0]).order,it(xt,Zt,_e,Nt,At),Zt=_e,Nt=At)}it(xt,Zt,xt.length,At,vt.length)}),xt}),V}function kc(v,N,V){if(N>V){var it=N;N=V,V=it}var vt=v[N];vt||(v[N]=vt={}),vt[V]=!0}function hd(v,N,V){if(N>V){var it=N;N=V,V=it}return nr.has(v[N],V)}function Zl(v,N,V,it){var vt={},xt={},At={};return nr.forEach(N,function(Nt){nr.forEach(Nt,function(Zt,ie){vt[Zt]=Zt,xt[Zt]=Zt,At[Zt]=ie})}),nr.forEach(N,function(Nt){var Zt=-1;nr.forEach(Nt,function(ie){var _e=it(ie);if(_e.length)for(var Ee=((_e=nr.sortBy(_e,function(_r){return At[_r]})).length-1)/2,Xe=Math.floor(Ee),yr=Math.ceil(Ee);Xe<=yr;++Xe){var tn=_e[Xe];xt[ie]===ie&&Zt<At[tn]&&!hd(V,ie,tn)&&(xt[tn]=ie,xt[ie]=vt[ie]=vt[tn],Zt=At[tn])}})}),{root:vt,align:xt}}function _f(v,N,V,it,vt){var xt={},At=function(ie,_e,Ee,Xe){var yr=new Hl,tn=ie.graph(),_r=function(Ar,Tr,Dn){return function(jn,Fn,la){var ua,ba=jn.node(Fn),Ra=jn.node(la),Aa=0;if(Aa+=ba.width/2,nr.has(ba,"labelpos"))switch(ba.labelpos.toLowerCase()){case"l":ua=-ba.width/2;break;case"r":ua=ba.width/2}if(ua&&(Aa+=Dn?ua:-ua),ua=0,Aa+=(ba.dummy?Tr:Ar)/2,Aa+=(Ra.dummy?Tr:Ar)/2,Aa+=Ra.width/2,nr.has(Ra,"labelpos"))switch(Ra.labelpos.toLowerCase()){case"l":ua=Ra.width/2;break;case"r":ua=-Ra.width/2}return ua&&(Aa+=Dn?ua:-ua),ua=0,Aa}}(tn.nodesep,tn.edgesep,Xe);return nr.forEach(_e,function(Ar){var Tr;nr.forEach(Ar,function(Dn){var jn=Ee[Dn];if(yr.setNode(jn),Tr){var Fn=Ee[Tr],la=yr.edge(Fn,jn);yr.setEdge(Fn,jn,Math.max(_r(ie,Dn,Tr),la||0))}Tr=Dn})}),yr}(v,N,V,vt),Nt=vt?"borderLeft":"borderRight";function Zt(ie,_e){for(var Ee=At.nodes(),Xe=Ee.pop(),yr={};Xe;)yr[Xe]?ie(Xe):(yr[Xe]=!0,Ee.push(Xe),Ee=Ee.concat(_e(Xe))),Xe=Ee.pop()}return Zt(function(ie){xt[ie]=At.inEdges(ie).reduce(function(_e,Ee){return Math.max(_e,xt[Ee.v]+At.edge(Ee))},0)},At.predecessors.bind(At)),Zt(function(ie){var _e=At.outEdges(ie).reduce(function(Xe,yr){return Math.min(Xe,xt[yr.w]-At.edge(yr))},Number.POSITIVE_INFINITY),Ee=v.node(ie);_e!==Number.POSITIVE_INFINITY&&Ee.borderType!==Nt&&(xt[ie]=Math.max(xt[ie],_e))},At.successors.bind(At)),nr.forEach(it,function(ie){xt[ie]=xt[V[ie]]}),xt}function cu(v,N){return nr.minBy(nr.values(N),function(V){var it=Number.NEGATIVE_INFINITY,vt=Number.POSITIVE_INFINITY;return nr.forIn(V,function(xt,At){var Nt=function(Zt,ie){return Zt.node(ie).width}(v,At)/2;it=Math.max(xt+Nt,it),vt=Math.min(xt-Nt,vt)}),it-vt})}function Bc(v,N){var V=nr.values(N),it=nr.min(V),vt=nr.max(V);nr.forEach(["u","d"],function(xt){nr.forEach(["l","r"],function(At){var Nt,Zt=xt+At,ie=v[Zt];if(ie!==N){var _e=nr.values(ie);(Nt=At==="l"?it-nr.min(_e):vt-nr.max(_e))&&(v[Zt]=nr.mapValues(ie,function(Ee){return Ee+Nt}))}})})}function Kl(v,N){return nr.mapValues(v.ul,function(V,it){if(N)return v[N.toLowerCase()][it];var vt=nr.sortBy(nr.map(v,it));return(vt[1]+vt[2])/2})}var yl=bu,vd=function(v){(function(N){var V=rs.buildLayerMatrix(N),it=N.graph().ranksep,vt=0;nr.forEach(V,function(xt){var At=nr.max(nr.map(xt,function(Nt){return N.node(Nt).height}));nr.forEach(xt,function(Nt){N.node(Nt).y=vt+At/2}),vt+=At+it})})(v=rs.asNonCompoundGraph(v)),nr.forEach(yl(v),function(N,V){v.node(V).x=N})},xl=rs.normalizeRanks,pd=rs.removeEmptyRanks,xs=rs,$l=Ba.Graph,Cf=function(v,N){var V=N&&N.debugTiming?xs.time:xs.notime;V("layout",function(){var it=V("  buildLayoutGraph",function(){return function(vt){var xt=new $l({multigraph:!0,compound:!0}),At=El(vt.graph());return xt.setGraph(nr.merge({},ql,hs(At,Eu),nr.pick(At,bl))),nr.forEach(vt.nodes(),function(Nt){var Zt=El(vt.node(Nt));xt.setNode(Nt,nr.defaults(hs(Zt,Fc),Ql)),xt.setParent(Nt,vt.parent(Nt))}),nr.forEach(vt.edges(),function(Nt){var Zt=El(vt.edge(Nt));xt.setEdge(Nt,nr.merge({},wu,hs(Zt,As),nr.pick(Zt,Vo)))}),xt}(v)});V("  runLayout",function(){(function(vt,xt){xt("    makeSpaceForEdgeLabels",function(){(function(At){var Nt=At.graph();Nt.ranksep/=2,nr.forEach(At.edges(),function(Zt){var ie=At.edge(Zt);ie.minlen*=2,ie.labelpos.toLowerCase()!=="c"&&(Nt.rankdir==="TB"||Nt.rankdir==="BT"?ie.width+=ie.labeloffset:ie.height+=ie.labeloffset)})})(vt)}),xt("    removeSelfEdges",function(){(function(At){nr.forEach(At.edges(),function(Nt){if(Nt.v===Nt.w){var Zt=At.node(Nt.v);Zt.selfEdges||(Zt.selfEdges=[]),Zt.selfEdges.push({e:Nt,label:At.edge(Nt)}),At.removeEdge(Nt)}})})(vt)}),xt("    acyclic",function(){Sc.run(vt)}),xt("    nestingGraph.run",function(){Wl.run(vt)}),xt("    rank",function(){dd(xs.asNonCompoundGraph(vt))}),xt("    injectEdgeLabelProxies",function(){(function(At){nr.forEach(At.edges(),function(Nt){var Zt=At.edge(Nt);if(Zt.width&&Zt.height){var ie=At.node(Nt.v),_e={rank:(At.node(Nt.w).rank-ie.rank)/2+ie.rank,e:Nt};xs.addDummyNode(At,"edge-proxy",_e,"_ep")}})})(vt)}),xt("    removeEmptyRanks",function(){pd(vt)}),xt("    nestingGraph.cleanup",function(){Wl.cleanup(vt)}),xt("    normalizeRanks",function(){xl(vt)}),xt("    assignRankMinMax",function(){(function(At){var Nt=0;nr.forEach(At.nodes(),function(Zt){var ie=At.node(Zt);ie.borderTop&&(ie.minRank=At.node(ie.borderTop).rank,ie.maxRank=At.node(ie.borderBottom).rank,Nt=nr.max(Nt,ie.maxRank))}),At.graph().maxRank=Nt})(vt)}),xt("    removeEdgeLabelProxies",function(){(function(At){nr.forEach(At.nodes(),function(Nt){var Zt=At.node(Nt);Zt.dummy==="edge-proxy"&&(At.edge(Zt.e).labelRank=Zt.rank,At.removeNode(Nt))})})(vt)}),xt("    normalize.run",function(){Xf.run(vt)}),xt("    parentDummyChains",function(){hl(vt)}),xt("    addBorderSegments",function(){Xl(vt)}),xt("    order",function(){qf(vt)}),xt("    insertSelfEdges",function(){(function(At){var Nt=xs.buildLayerMatrix(At);nr.forEach(Nt,function(Zt){var ie=0;nr.forEach(Zt,function(_e,Ee){var Xe=At.node(_e);Xe.order=Ee+ie,nr.forEach(Xe.selfEdges,function(yr){xs.addDummyNode(At,"selfedge",{width:yr.label.width,height:yr.label.height,rank:Xe.rank,order:Ee+ ++ie,e:yr.e,label:yr.label},"_se")}),delete Xe.selfEdges})})})(vt)}),xt("    adjustCoordinateSystem",function(){pl.adjust(vt)}),xt("    position",function(){vd(vt)}),xt("    positionSelfEdges",function(){(function(At){nr.forEach(At.nodes(),function(Nt){var Zt=At.node(Nt);if(Zt.dummy==="selfedge"){var ie=At.node(Zt.e.v),_e=ie.x+ie.width/2,Ee=ie.y,Xe=Zt.x-_e,yr=ie.height/2;At.setEdge(Zt.e,Zt.label),At.removeNode(Nt),Zt.label.points=[{x:_e+2*Xe/3,y:Ee-yr},{x:_e+5*Xe/6,y:Ee-yr},{x:_e+Xe,y:Ee},{x:_e+5*Xe/6,y:Ee+yr},{x:_e+2*Xe/3,y:Ee+yr}],Zt.label.x=Zt.x,Zt.label.y=Zt.y}})})(vt)}),xt("    removeBorderNodes",function(){(function(At){nr.forEach(At.nodes(),function(Nt){if(At.children(Nt).length){var Zt=At.node(Nt),ie=At.node(Zt.borderTop),_e=At.node(Zt.borderBottom),Ee=At.node(nr.last(Zt.borderLeft)),Xe=At.node(nr.last(Zt.borderRight));Zt.width=Math.abs(Xe.x-Ee.x),Zt.height=Math.abs(_e.y-ie.y),Zt.x=Ee.x+Zt.width/2,Zt.y=ie.y+Zt.height/2}}),nr.forEach(At.nodes(),function(Nt){At.node(Nt).dummy==="border"&&At.removeNode(Nt)})})(vt)}),xt("    normalize.undo",function(){Xf.undo(vt)}),xt("    fixupEdgeLabelCoords",function(){(function(At){nr.forEach(At.edges(),function(Nt){var Zt=At.edge(Nt);if(nr.has(Zt,"x"))switch(Zt.labelpos!=="l"&&Zt.labelpos!=="r"||(Zt.width-=Zt.labeloffset),Zt.labelpos){case"l":Zt.x-=Zt.width/2+Zt.labeloffset;break;case"r":Zt.x+=Zt.width/2+Zt.labeloffset}})})(vt)}),xt("    undoCoordinateSystem",function(){pl.undo(vt)}),xt("    translateGraph",function(){(function(At){var Nt=Number.POSITIVE_INFINITY,Zt=0,ie=Number.POSITIVE_INFINITY,_e=0,Ee=At.graph(),Xe=Ee.marginx||0,yr=Ee.marginy||0;function tn(_r){var Ar=_r.x,Tr=_r.y,Dn=_r.width,jn=_r.height;Nt=Math.min(Nt,Ar-Dn/2),Zt=Math.max(Zt,Ar+Dn/2),ie=Math.min(ie,Tr-jn/2),_e=Math.max(_e,Tr+jn/2)}nr.forEach(At.nodes(),function(_r){tn(At.node(_r))}),nr.forEach(At.edges(),function(_r){var Ar=At.edge(_r);nr.has(Ar,"x")&&tn(Ar)}),Nt-=Xe,ie-=yr,nr.forEach(At.nodes(),function(_r){var Ar=At.node(_r);Ar.x-=Nt,Ar.y-=ie}),nr.forEach(At.edges(),function(_r){var Ar=At.edge(_r);nr.forEach(Ar.points,function(Tr){Tr.x-=Nt,Tr.y-=ie}),nr.has(Ar,"x")&&(Ar.x-=Nt),nr.has(Ar,"y")&&(Ar.y-=ie)}),Ee.width=Zt-Nt+Xe,Ee.height=_e-ie+yr})(vt)}),xt("    assignNodeIntersects",function(){(function(At){nr.forEach(At.edges(),function(Nt){var Zt,ie,_e=At.edge(Nt),Ee=At.node(Nt.v),Xe=At.node(Nt.w);_e.points?(Zt=_e.points[0],ie=_e.points[_e.points.length-1]):(_e.points=[],Zt=Xe,ie=Ee),_e.points.unshift(xs.intersectRect(Ee,Zt)),_e.points.push(xs.intersectRect(Xe,ie))})})(vt)}),xt("    reversePoints",function(){(function(At){nr.forEach(At.edges(),function(Nt){var Zt=At.edge(Nt);Zt.reversed&&Zt.points.reverse()})})(vt)}),xt("    acyclic.undo",function(){Sc.undo(vt)})})(it,V)}),V("  updateInputGraph",function(){(function(vt,xt){nr.forEach(vt.nodes(),function(At){var Nt=vt.node(At),Zt=xt.node(At);Nt&&(Nt.x=Zt.x,Nt.y=Zt.y,xt.children(At).length&&(Nt.width=Zt.width,Nt.height=Zt.height))}),nr.forEach(vt.edges(),function(At){var Nt=vt.edge(At),Zt=xt.edge(At);Nt.points=Zt.points,nr.has(Zt,"x")&&(Nt.x=Zt.x,Nt.y=Zt.y)}),vt.graph().width=xt.graph().width,vt.graph().height=xt.graph().height})(v,it)})})},Eu=["nodesep","edgesep","ranksep","marginx","marginy"],ql={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},bl=["acyclicer","ranker","rankdir","align"],Fc=["width","height"],Ql={width:0,height:0},As=["minlen","weight","width","height","labeloffset"],wu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Vo=["labelpos"];function hs(v,N){return nr.mapValues(nr.pick(v,N),Number)}function El(v){var N={};return nr.forEach(v,function(V,it){N[it.toLowerCase()]=V}),N}var Jl=Ba.Graph,td={graphlib:Ba,layout:Cf,debug:{debugOrdering:function(v){var N=rs.buildLayerMatrix(v),V=new Jl({compound:!0,multigraph:!0}).setGraph({});return nr.forEach(v.nodes(),function(it){V.setNode(it,{label:it}),V.setParent(it,"layer"+v.node(it).rank)}),nr.forEach(v.edges(),function(it){V.setEdge(it.v,it.w,{},it.name)}),nr.forEach(N,function(it,vt){var xt="layer"+vt;V.setNode(xt,{rank:"same"}),nr.reduce(it,function(At,Nt){return V.setEdge(At,Nt,{style:"invis"}),Nt})}),V}},util:{time:rs.time,notime:rs.notime},version:"0.8.5"},gd=td.graphlib,md=td.layout;class wl{constructor(N){this.cardinality=1,this.include=p.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=P.NODE,this.name=N.name,this.attr=N.attr||{},this.inputs=N.inputs,this.path=N.path||[],this.width=N.width,this.height=N.height}}class ed{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function yd(v){const N=new ed;return v.nodes.map(V=>new wl(V)).forEach(V=>{N.nodes[V.name]=V,V.inputs.forEach(it=>{(function(vt,xt,At){At.name!==xt.name&&vt.edges.push(Object.assign(Object.assign({},At.attr),{v:At.name,w:xt.name}))})(N,V,it)})}),N}class xd{constructor(N,V={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=p.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=P.META,this.path=[],this.name=N,this.metaGraph=Gc(N,m.META,V)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(N=>this.metaGraph.node(N))}leaves(){let N,V=[],it=[this];for(;it.length;){let vt=it.shift();vt.isGroupNode?(N=vt.metaGraph,N.nodes().forEach(xt=>it.push(N.node(xt)))):V.push(vt.name)}return V}}class rd{constructor(N,V){this.v=N,this.w=V,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(N,V){this.baseEdgeList.push(N)}}function nd(v,N={}){return new xd(v,N)}function zc(v,N){return new rd(v,N)}function Gc(v,N,V){const it=V||{},vt=new gd.Graph(it);return vt.setGraph({name:v,rankdir:it.rankdir,type:N,align:it.align}),vt}class Sl{constructor(N={}){this.graphOptions=N,this.index={},this.graphOptions.compound=!0,this.root=nd(T,this.graphOptions),this.index[T]=this.root}getNodeMap(){return this.index}node(N){return this.index[N]}setNode(N,V){this.index[N]=V}getBridgeGraph(N){const V=this.index[N];if(!V)throw Error("Could not find node in hierarchy: "+N);if(!("metaGraph"in V))return null;const it=V;if(it.bridgeGraph)return it.bridgeGraph;const vt=Gc(L,m.BRIDGE,this.graphOptions);if(it.bridgeGraph=vt,!V.parentNode||!("metaGraph"in V.parentNode))return vt;const xt=V.parentNode;return[xt.metaGraph,this.getBridgeGraph(xt.name)].forEach(At=>{At.edges().filter(Nt=>Nt.v===N||Nt.w===N).forEach(Nt=>{const Zt=Nt.w===N;At.edge(Nt).baseEdgeList.forEach(ie=>{const[_e,Ee]=Zt?[ie.w,Nt.v]:[ie.v,Nt.w],Xe=this.getChildName(N,_e),yr={v:Zt?Ee:Xe,w:Zt?Xe:Ee};let tn=vt.edge(yr);tn||(tn=zc(yr.v,yr.w),tn.inbound=Zt,vt.setEdge(yr.v,yr.w,tn)),tn.addBaseEdge(ie,this)})})}),vt}getChildName(N,V){let it=this.index[V];for(;it;){if(it.parentNode&&it.parentNode.name===N)return it.name;it=it.parentNode}throw Error("Could not find immediate child for descendant: "+V)}getPredecessors(N){const V=this.index[N];if(!V)throw Error("Could not find node with name: "+N);return this.getOneWayEdges(V,!0)}getSuccessors(N){const V=this.index[N];if(!V)throw Error("Could not find node with name: "+N);return this.getOneWayEdges(V,!1)}getOneWayEdges(N,V){const it=[];if(!N.parentNode||!N.parentNode.isGroupNode)return it;const vt=N.parentNode,xt=vt.metaGraph,At=this.getBridgeGraph(vt.name);return nu(xt,N,V,it),nu(At,N,V,it),it}}function ad(v,N){const{rankDirection:V,align:it}=N,vt=new Sl({rankdir:V,align:it});return function(xt,At){Object.keys(At.nodes).forEach(Nt=>{const Zt=At.nodes[Nt],ie=Zt.path;let _e=xt.root;_e.depth=Math.max(ie.length,_e.depth);for(let Ee=0;Ee<ie.length&&(_e.depth=Math.max(_e.depth,ie.length-Ee),_e.cardinality+=Zt.cardinality,Ee!==ie.length-1);Ee++){const Xe=ie[Ee];let yr=xt.node(Xe);yr||(yr=nd(Xe,xt.graphOptions),yr.path=Zt.path.slice(0,Ee+1),yr.parentNode=_e,xt.setNode(Xe,yr),_e.metaGraph.setNode(Xe,yr)),_e=yr}xt.setNode(Zt.name,Zt),Zt.parentNode=_e,_e.metaGraph.setNode(Zt.name,Zt)})}(vt,v),function(xt,At){const Nt=xt.getNodeMap();let Zt=[],ie=[];const _e=(Ee,Xe)=>{let yr=0;for(;Ee;)Xe[yr++]=Ee.name,Ee=Ee.parentNode;return yr-1};At.edges.forEach(Ee=>{Zt=[],ie=[];let Xe=_e(At.nodes[Ee.v],Zt),yr=_e(At.nodes[Ee.w],ie);for(;Zt[Xe]===ie[yr];)if(Xe--,yr--,Xe<0||yr<0)throw Error("No difference found between ancestor paths.");const tn=Nt[Zt[Xe+1]],_r=Zt[Xe],Ar=ie[yr];let Tr=tn.metaGraph.edge(_r,Ar);Tr||(Tr=zc(_r,Ar),tn.metaGraph.setEdge(_r,Ar,Tr)),Tr.addBaseEdge(Ee,xt)})}(vt,v),vt}function nu(v,N,V,it){(V?v.inEdges(N.name):v.outEdges(N.name)).forEach(vt=>{const xt=v.edge(vt);it.push(xt)})}class Ml{constructor(N){this.hierarchy=N,this.index={},this.hasSubHierarchy={},this.root=new Me(this.hierarchy.root,this.hierarchy.graphOptions),this.index[N.root.name]=this.root,this.buildSubHierarchy(N.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(N){if(N in this.hasSubHierarchy)return;this.hasSubHierarchy[N]=!0;const V=this.index[N];if(V.node.type!==P.META)return;const it=V,vt=it.node.metaGraph,xt=it.coreGraph;vt.nodes().forEach(_e=>{const Ee=this.getOrCreateRenderNodeByName(_e);xt.setNode(_e,Ee)}),vt.edges().forEach(_e=>{const Ee=vt.edge(_e),Xe=new Dt(Ee);xt.setEdge(_e.v,_e.w,Xe)});const At=it.node.parentNode;if(!At)return;const Nt=this.getRenderNodeByName(At.name),Zt=(_e,...Ee)=>Ee.concat([_e?"IN":"OUT"]).join("~~"),ie=this.hierarchy.getBridgeGraph(N);ie.edges().forEach(_e=>{const Ee=ie.edge(_e),Xe=!!vt.node(_e.w),[yr,tn]=Xe?[_e.w,_e.v]:[_e.v,_e.w],_r=la=>{const ua=Xe?{v:la,w:N}:{v:N,w:la};return Nt.coreGraph.edge(ua)};let Ar=_r(tn);Ar||(Ar=_r(Zt(Xe,tn,At.name)));const Tr=Zt(Xe,N),Dn=Zt(Xe,tn,N);let jn=xt.node(Dn);if(!jn){let la=xt.node(Tr);if(!la){const ba={name:Tr,type:P.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:p.UNSPECIFIED,inbound:Xe,attr:{}};la=new Jf(ba),this.index[Tr]=la,xt.setNode(Tr,la)}const ua={name:Dn,type:P.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:p.UNSPECIFIED,inbound:Xe,attr:{}};jn=new Jf(ua),this.index[Dn]=jn,xt.setNode(Dn,jn),xt.setParent(Dn,Tr),la.node.cardinality++}const Fn=new Dt(Ee);Fn.adjoiningMetaEdge=Ar,Xe?xt.setEdge(Dn,yr,Fn):xt.setEdge(yr,Dn,Fn)})}getOrCreateRenderNodeByName(N){if(!N)return null;if(N in this.index)return this.index[N];const V=this.getNodeByName(N);return V?(this.index[N]=V.isGroupNode?new Me(V,this.hierarchy.graphOptions):new Jf(V),this.index[N]):null}getRenderNodeByName(N){return this.index[N]}getNodeByName(N){return this.hierarchy.node(N)}}class Jf{constructor(N){this.node=N,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=N.width||0,this.height=N.height||0,this.displayName=N.name,this.attr=N.attr}}class Dt{constructor(N){this.metaEdge=N,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Me extends Jf{constructor(N,V){super(N);const it=N.metaGraph.graph();V.compound=!0,this.coreGraph=Gc(it.name,m.CORE,V)}}function Ve(v,N){v.node.isGroupNode&&function(V,it){const vt=k(it);V.coreGraph.nodes().map(xt=>V.coreGraph.node(xt)).forEach(xt=>{var At,Nt,Zt,ie,_e,Ee;const{height:Xe,width:yr}=xt;switch(xt.node.type){case P.NODE:Object.assign(xt,vt.nodeSize.node),xt.height=Xe||vt.nodeSize.node.height,xt.width=yr||vt.nodeSize.node.width;break;case P.BRIDGE:Object.assign(xt,vt.nodeSize.bridge);break;case P.META:xt.expanded?Ve(xt,it):(Object.assign(xt,vt.nodeSize.meta),xt.height=vt.nodeSize.meta.height,xt.width=vt.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+xt.node.type)}if(!xt.expanded){const tn=xt.attr;(function(_r,Ar=!1){if(_r.coreBox.width=_r.width,_r.coreBox.height=_r.height,!Ar){const Tr=`${_r.displayName}`.length,Dn=3;_r.width=Math.max(_r.coreBox.width,Tr*Dn)}})(xt,it&&(xt.node.type===0&&!!(!((Nt=(At=it==null?void 0:it.nodeSize)===null||At===void 0?void 0:At.meta)===null||Nt===void 0)&&Nt.width)||xt.node.type===1&&(!!(!((ie=(Zt=it==null?void 0:it.nodeSize)===null||Zt===void 0?void 0:Zt.node)===null||ie===void 0)&&ie.width)||!!tn.width)||xt.node.type===2&&!!(!((Ee=(_e=it==null?void 0:it.nodeSize)===null||_e===void 0?void 0:_e.bridge)===null||Ee===void 0)&&Ee.width)))}})}(v,N),v.node.type===P.META&&function(V,it){const vt=k(it),xt=vt.subScene.meta;Object.assign(V,xt);const{nodeSep:At,rankSep:Nt,edgeSep:Zt,align:ie}=vt.graph.meta,_e={nodesep:At,ranksep:Nt,edgesep:Zt,align:ie};Object.assign(V.coreBox,function(yr,tn){const{ranksep:_r,nodesep:Ar,edgesep:Tr,align:Dn}=tn;Object.assign(yr.graph(),{ranksep:_r,nodesep:Ar,edgesep:Tr,align:Dn});const jn=[];if(yr.nodes().forEach(Ra=>{yr.node(Ra).node.type!==P.BRIDGE&&jn.push(Ra)}),!jn.length)return{width:0,height:0};md(yr);let Fn=1/0,la=1/0,ua=-1/0,ba=-1/0;return jn.forEach(Ra=>{const Aa=yr.node(Ra),eo=.5*Aa.width,Fa=Aa.x-eo,go=Aa.x+eo;Fn=Fa<Fn?Fa:Fn,ua=go>ua?go:ua;const Qi=.5*Aa.height,fi=Aa.y-Qi,mo=Aa.y+Qi;la=fi<la?fi:la,ba=mo>ba?mo:ba}),yr.edges().forEach(Ra=>{const Aa=yr.edge(Ra),eo=yr.node(Aa.metaEdge.v),Fa=yr.node(Aa.metaEdge.w);if(Aa.points.length===3&&function(fi){let mo=Yr(fi[0],fi[1]);for(let Bo=1;Bo<fi.length-1;Bo++){const ns=Yr(fi[Bo],fi[Bo+1]);if(Math.abs(ns-mo)>1)return!1;mo=ns}return!0}(Aa.points)){if(eo!=null){const fi=eo.expanded?eo.x:vn(eo);Aa.points[0].x=fi}if(Fa!=null){const fi=Fa.expanded?Fa.x:vn(Fa);Aa.points[2].x=fi}Aa.points=[Aa.points[0],Aa.points[1]]}const go=Aa.points[Aa.points.length-2];Fa!=null&&(Aa.points[Aa.points.length-1]=Xr(go,Fa));const Qi=Aa.points[1];eo!=null&&(Aa.points[0]=Xr(Qi,eo)),Aa.points.forEach(fi=>{Fn=fi.x<Fn?fi.x:Fn,ua=fi.x>ua?fi.x:ua,la=fi.y<la?fi.y:la,ba=fi.y>ba?fi.y:ba})}),yr.nodes().forEach(Ra=>{const Aa=yr.node(Ra);Aa.x-=Fn,Aa.y-=la}),yr.edges().forEach(Ra=>{yr.edge(Ra).points.forEach(Aa=>{Aa.x-=Fn,Aa.y-=la})}),{width:ua-Fn,height:ba-la}}(V.coreGraph,_e));let Ee=0;V.coreGraph.nodeCount()>0&&Ee++;const Xe=Ee<=1?0:Ee;V.coreBox.width+=Xe+Xe,V.coreBox.height=xt.labelHeight+V.coreBox.height,V.width=V.coreBox.width+xt.paddingLeft+xt.paddingRight,V.height=V.paddingTop+V.coreBox.height+V.paddingBottom}(v,N)}function Yr(v,N){const V=N.x-v.x,it=N.y-v.y;return 180*Math.atan(it/V)/Math.PI}function vn(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function Xr(v,N){const V=N.expanded?N.x:vn(N),it=N.y,vt=v.x-V,xt=v.y-it;let At,Nt,Zt=N.expanded?N.width:N.coreBox.width,ie=N.expanded?N.height:N.coreBox.height;return Math.abs(xt)*Zt/2>Math.abs(vt)*ie/2?(xt<0&&(ie=-ie),At=xt===0?0:ie/2*vt/xt,Nt=ie/2):(vt<0&&(Zt=-Zt),At=Zt/2,Nt=vt===0?0:Zt/2*xt/vt),{x:V+At,y:it+Nt}}function jr(v,N,V){var it,vt,xt,At;const Nt=v.nodes.filter((Ee,Xe,yr)=>yr.findIndex(tn=>tn.id===Ee.id)!==Xe).map(Ee=>Ee.id);if(Nt.length)throw new Error(`Duplicated ids found: ${Nt.join(", ")}`);const Zt=function(Ee){const Xe={nodes:[]},yr=Ee.compound,tn=Object.keys(yr||{}),_r=new Map,Ar=(Dn,jn=[])=>{if(_r.has(Dn))return _r.get(Dn);for(let Fn=0;Fn<tn.length;Fn++){let la=tn[Fn];if(yr&&yr[la].indexOf(Dn)!==-1)return jn.unshift(la),Ar(la,jn)}return jn.length===0&&_r.set(Dn,jn),jn},Tr=Dn=>Ee.edges.filter(jn=>jn.w===Dn).map(jn=>({name:jn.v}));return Ee.nodes.forEach(Dn=>{const jn=Dn.id,Fn=[...Ar(jn),jn];let la=Tr(jn);Xe.nodes.push({name:jn,path:Fn,inputs:la,width:Dn.width,height:Dn.height,attr:Object.assign({},Dn)})}),Xe}(v),ie=function(Ee,Xe){const yr=(_r,Ar)=>{for(let Tr of Ar.values())if(Tr.includes(_r))return!0;return!1},tn=(_r,Ar=[])=>{if(Object.keys(_r).length===0)return[...new Set(Ar)];const Tr=new Map(Object.keys(_r).map(jn=>[jn,_r[jn]])),Dn={};for(let[jn,Fn]of Tr)yr(jn,Tr)?Dn[jn]=Fn:Ar=Ar.concat(jn,Fn);return tn(Dn,Ar)};return tn(Ee).filter(_r=>Xe.includes(_r))}(v.compound||{},(N==null?void 0:N.expanded)||[]),_e=function(Ee,Xe){return function(yr){return new Ml(yr)}(ad(yd(Ee),Xe))}(Zt,{rankDirection:((vt=(it=V==null?void 0:V.graph)===null||it===void 0?void 0:it.meta)===null||vt===void 0?void 0:vt.rankDir)||(N==null?void 0:N.rankDirection)||x.graph.meta.rankDir,align:((At=(xt=V==null?void 0:V.graph)===null||xt===void 0?void 0:xt.meta)===null||At===void 0?void 0:At.align)||x.graph.meta.align});return function(Ee,Xe){Xe.forEach(yr=>{const tn=Ee.getRenderInfoNodes().find(Tr=>Tr.displayName===yr);let _r=tn&&tn.node&&tn.node.name||"";const Ar=Ee.getRenderNodeByName(_r);if(!Ar)throw new Error(`No nodes found: ${_r}`);Ar.expanded=!0,Ee.buildSubHierarchy(_r)})}(_e,ie),Ve(_e.root,V),Pn(_e.root)}function An(v,N=!1){const V=JSON.parse(JSON.stringify(v)),it={nodes:[V],edges:[...V.edges]};return V.nodes.forEach(function vt(xt){(xt.type===0||xt.type===1)&&it.nodes.push(xt),xt.type===0&&(it.edges=it.edges.concat(xt.edges)),Array.isArray(xt.nodes)&&xt.nodes.forEach(vt)}),N&&it.nodes.forEach(vt=>{const xt=it.nodes.find(At=>At.id===vt.parentNodeName);if(xt){const At=xt.x-xt.width/2+xt.paddingLeft,Nt=xt.y-xt.height/2+xt.labelHeight+xt.paddingTop;xt.id!==T&&(vt.x+=At,vt.y+=Nt),vt.type===0&&vt.edges.forEach(Zt=>{Zt.points.forEach(ie=>{ie.x+=vt.x-vt.width/2+vt.paddingLeft,ie.y+=vt.y-vt.height/2+vt.labelHeight+vt.paddingTop})})}}),it}function On(v,N,V,it){var vt,xt;let At=[];const Nt=((vt=V.find(Ee=>Ee.id===v))===null||vt===void 0?void 0:vt.path)||[],Zt=((xt=V.find(Ee=>Ee.id===N))===null||xt===void 0?void 0:xt.path)||[],ie=[T,...Nt].slice(0,Nt.length).reverse(),_e=[T,...Zt].slice(0,Zt.length);return ie.forEach(Ee=>{const Xe=V.find(yr=>yr.id===Ee);At=At.concat(Xe.edges.filter(yr=>yr.baseEdgeList.some(tn=>tn.v===((it==null?void 0:it.v)||v)&&tn.w===((it==null?void 0:it.w)||N))))}),_e.filter(Ee=>!ie.includes(Ee)).forEach(Ee=>{const Xe=V.find(yr=>yr.id===Ee);At=At.concat(Xe.edges.filter(yr=>yr.baseEdgeList.some(tn=>tn.v===((it==null?void 0:it.v)||v)&&tn.w===((it==null?void 0:it.w)||N))))}),At}function Pn(v){const N=v.coreGraph.nodes().map(it=>v.coreGraph.node(it));return Object.assign(Object.assign({},En(v)),{expanded:v.expanded,nodes:v.expanded?(V=N,V.map(it=>it.node.type===P.META?Pn(it):En(it))):[],edges:v.expanded?zn(v):[]});var V}function En(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function zn(v){return v.coreGraph.edges().map(N=>({renderInfoEdge:v.coreGraph.edge(N),edge:N})).filter(({renderInfoEdge:N})=>N.metaEdge).map(({edge:N,renderInfoEdge:V})=>{const it=function(vt,xt){const At=xt.points.map(Nt=>Object.assign({},Nt));if(xt.adjoiningMetaEdge){const Nt=xt.adjoiningMetaEdge.points,Zt=xt.metaEdge.inbound,ie=Zt?Nt[Nt.length-1]:Nt[0],_e=At[Zt?0:At.length-1],Ee=vt.x-vt.width/2,Xe=vt.y-vt.height/2,yr=ie.x-Ee,tn=ie.y-Xe,_r=-vt.paddingLeft,Ar=-(vt.paddingTop+vt.labelHeight);_e.x=yr+_r,_e.y=tn+Ar}return At}(v,V);return{adjoiningEdge:V.adjoiningMetaEdge?{w:V.adjoiningMetaEdge.metaEdge.w,v:V.adjoiningMetaEdge.metaEdge.v}:null,inbound:V.metaEdge.inbound,w:N.w,v:N.v,points:it,weight:V.weight,baseEdgeList:V.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},533852:function(He,z,C){(function(x,k){He.exports=k(C(727484))})(this,function(x){"use strict";function k(L){return L&&typeof L=="object"&&"default"in L?L:{default:L}}var w=k(x),T={name:"zh-cn",weekdays:"\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"),weekdaysShort:"\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D".split("_"),weekdaysMin:"\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"),months:"\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(L,P){return P==="W"?L+"\u5468":L+"\u65E5"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206",LLLL:"YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524D",s:"\u51E0\u79D2",m:"1 \u5206\u949F",mm:"%d \u5206\u949F",h:"1 \u5C0F\u65F6",hh:"%d \u5C0F\u65F6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4E2A\u6708",MM:"%d \u4E2A\u6708",y:"1 \u5E74",yy:"%d \u5E74"},meridiem:function(L,P){var p=100*L+P;return p<600?"\u51CC\u6668":p<900?"\u65E9\u4E0A":p<1100?"\u4E0A\u5348":p<1300?"\u4E2D\u5348":p<1800?"\u4E0B\u5348":"\u665A\u4E0A"}};return w.default.locale(T,null,!0),T})},414144:function(He,z){var C,x,k;(function(w,T){if(!0)x=[z,He],C=T,k=typeof C=="function"?C.apply(z,x):C,k!==void 0&&(He.exports=k);else var L})(this,function(w,T){"use strict";var L={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function P(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function p(y){try{delete window[y]}catch(g){window[y]=void 0}}function m(y){var g=document.getElementById(y);g&&document.getElementsByTagName("head")[0].removeChild(g)}function S(y){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],O=y,E=g.timeout||L.timeout,D=g.jsonpCallback||L.jsonpCallback,F=void 0;return new Promise(function(W,b){var h=g.jsonpCallbackFunction||P(),K=D+"_"+h;window[h]=function(Y){W({ok:!0,json:function(){return Promise.resolve(Y)}}),F&&clearTimeout(F),m(K),p(h)},O+=O.indexOf("?")===-1?"?":"&";var U=document.createElement("script");U.setAttribute("src",""+O+D+"="+h),g.charset&&U.setAttribute("charset",g.charset),g.nonce&&U.setAttribute("nonce",g.nonce),g.referrerPolicy&&U.setAttribute("referrerPolicy",g.referrerPolicy),g.crossorigin&&U.setAttribute("crossorigin","true"),U.id=K,document.getElementsByTagName("head")[0].appendChild(U),F=setTimeout(function(){b(new Error("JSONP request to "+y+" timed out")),p(h),m(K),window[h]=function(){p(h)}},E),U.onerror=function(){b(new Error("JSONP request to "+y+" failed")),p(h),m(K),F&&clearTimeout(F)}})}T.exports=S})},73633:function(He,z,C){"use strict";C.r(z),C.d(z,{ARRAY_TYPE:function(){return k},EPSILON:function(){return x},RANDOM:function(){return w},equals:function(){return p},setMatrixArrayType:function(){return T},toRadian:function(){return P}});var x=1e-6,k=typeof Float32Array!="undefined"?Float32Array:Array,w=Math.random;function T(m){k=m}var L=Math.PI/180;function P(m){return m*L}function p(m,S){return Math.abs(m-S)<=x*Math.max(1,Math.abs(m),Math.abs(S))}Math.hypot||(Math.hypot=function(){for(var m=0,S=arguments.length;S--;)m+=arguments[S]*arguments[S];return Math.sqrt(m)})},858204:function(He,z,C){"use strict";C.r(z),C.d(z,{glMatrix:function(){return p},mat2:function(){return x},mat2d:function(){return k},mat3:function(){return Ze},mat4:function(){return w},quat:function(){return L},quat2:function(){return P},vec2:function(){return os},vec3:function(){return Ur},vec4:function(){return T}});var x={};C.r(x),C.d(x,{LDU:function(){return Q},add:function(){return J},adjoint:function(){return W},clone:function(){return S},copy:function(){return y},create:function(){return m},determinant:function(){return b},equals:function(){return yt},exactEquals:function(){return nt},frob:function(){return q},fromRotation:function(){return Y},fromScaling:function(){return Z},fromValues:function(){return O},identity:function(){return g},invert:function(){return F},mul:function(){return Mt},multiply:function(){return h},multiplyScalar:function(){return gt},multiplyScalarAndAdd:function(){return zt},rotate:function(){return K},scale:function(){return U},set:function(){return E},str:function(){return H},sub:function(){return Ct},subtract:function(){return ft},transpose:function(){return D}});var k={};C.r(k),C.d(k,{add:function(){return ve},clone:function(){return ot},copy:function(){return Tt},create:function(){return rt},determinant:function(){return Ht},equals:function(){return ht},exactEquals:function(){return de},frob:function(){return te},fromRotation:function(){return ue},fromScaling:function(){return Ut},fromTranslation:function(){return oe},fromValues:function(){return st},identity:function(){return Rt},invert:function(){return Ft},mul:function(){return ae},multiply:function(){return _t},multiplyScalar:function(){return xe},multiplyScalarAndAdd:function(){return Re},rotate:function(){return Xt},scale:function(){return ee},set:function(){return bt},str:function(){return Pe},sub:function(){return Le},subtract:function(){return Ue},translate:function(){return se}});var w={};C.r(w),C.d(w,{add:function(){return pe},adjoint:function(){return dr},clone:function(){return fr},copy:function(){return ur},create:function(){return qe},determinant:function(){return ar},equals:function(){return gn},exactEquals:function(){return zr},frob:function(){return Ie},fromQuat:function(){return dt},fromQuat2:function(){return jt},fromRotation:function(){return hn},fromRotationTranslation:function(){return ir},fromRotationTranslationScale:function(){return Ot},fromRotationTranslationScaleOrigin:function(){return Kt},fromScaling:function(){return en},fromTranslation:function(){return Br},fromValues:function(){return kr},fromXRotation:function(){return xn},fromYRotation:function(){return _n},fromZRotation:function(){return tt},frustum:function(){return Bt},getRotation:function(){return we},getScaling:function(){return Et},getTranslation:function(){return Qt},identity:function(){return un},invert:function(){return $e},lookAt:function(){return Lt},mul:function(){return tr},multiply:function(){return Qe},multiplyScalar:function(){return br},multiplyScalarAndAdd:function(){return Je},ortho:function(){return X},orthoNO:function(){return A},orthoZO:function(){return mt},perspective:function(){return at},perspectiveFromFieldOfView:function(){return M},perspectiveNO:function(){return $},perspectiveZO:function(){return R},rotate:function(){return qr},rotateX:function(){return Sn},rotateY:function(){return Yn},rotateZ:function(){return Ir},scale:function(){return Zr},set:function(){return yn},str:function(){return Jt},sub:function(){return xr},subtract:function(){return je},targetTo:function(){return Pt},translate:function(){return Pr},transpose:function(){return Vr}});var T={};C.r(T),C.d(T,{add:function(){return Se},ceil:function(){return fn},clone:function(){return fe},copy:function(){return ge},create:function(){return Nr},cross:function(){return ro},dist:function(){return _i},distance:function(){return xa},div:function(){return lo},divide:function(){return Mr},dot:function(){return To},equals:function(){return no},exactEquals:function(){return Po},floor:function(){return Xn},forEach:function(){return le},fromValues:function(){return Wt},inverse:function(){return Mi},len:function(){return $o},length:function(){return Ni},lerp:function(){return ga},max:function(){return qn},min:function(){return Mn},mul:function(){return Jo},multiply:function(){return vr},negate:function(){return ei},normalize:function(){return Gi},random:function(){return fo},round:function(){return bn},scale:function(){return Vn},scaleAndAdd:function(){return ca},set:function(){return Ae},sqrDist:function(){return io},sqrLen:function(){return Gt},squaredDistance:function(){return Ea},squaredLength:function(){return ti},str:function(){return co},sub:function(){return ao},subtract:function(){return Be},transformMat4:function(){return Ao},transformQuat:function(){return ni},zero:function(){return Ri}});var L={};C.r(L),C.d(L,{add:function(){return xi},calculateW:function(){return Zn},clone:function(){return La},conjugate:function(){return $a},copy:function(){return Ga},create:function(){return Ge},dot:function(){return Wi},equals:function(){return Qa},exactEquals:function(){return oo},exp:function(){return va},fromEuler:function(){return Ui},fromMat3:function(){return za},fromValues:function(){return ja},getAngle:function(){return Or},getAxisAngle:function(){return Gr},identity:function(){return pr},invert:function(){return oi},len:function(){return is},length:function(){return Xo},lerp:function(){return Io},ln:function(){return ya},mul:function(){return ki},multiply:function(){return cn},normalize:function(){return Yi},pow:function(){return vi},random:function(){return oa},rotateX:function(){return mn},rotateY:function(){return Bn},rotateZ:function(){return sa},rotationTo:function(){return Li},scale:function(){return ho},set:function(){return bi},setAxes:function(){return qi},setAxisAngle:function(){return Fr},slerp:function(){return Ma},sqlerp:function(){return zo},sqrLen:function(){return qa},squaredLength:function(){return $i},str:function(){return di}});var P={};C.r(P),C.d(P,{add:function(){return ji},clone:function(){return Xi},conjugate:function(){return Ws},copy:function(){return _s},create:function(){return ts},dot:function(){return qs},equals:function(){return Eo},exactEquals:function(){return Uo},fromMat4:function(){return cs},fromRotation:function(){return ss},fromRotationTranslation:function(){return fs},fromRotationTranslationValues:function(){return gs},fromTranslation:function(){return so},fromValues:function(){return xo},getDual:function(){return hr},getReal:function(){return ye},getTranslation:function(){return kn},identity:function(){return jo},invert:function(){return Js},len:function(){return Bs},length:function(){return Ds},lerp:function(){return Qs},mul:function(){return ks},multiply:function(){return bo},normalize:function(){return Tu},rotateAroundAxis:function(){return Cs},rotateByQuatAppend:function(){return Go},rotateByQuatPrepend:function(){return Rs},rotateX:function(){return wa},rotateY:function(){return Ai},rotateZ:function(){return Oo},scale:function(){return ls},set:function(){return $t},setDual:function(){return nn},setReal:function(){return Er},sqrLen:function(){return es},squaredLength:function(){return ms},str:function(){return Au},translate:function(){return Qn}});var p=C(73633);function m(){var d=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}function S(d){var G=new p.ARRAY_TYPE(4);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G}function y(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d}function g(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d}function O(d,G,wt,kt){var qt=new p.ARRAY_TYPE(4);return qt[0]=d,qt[1]=G,qt[2]=wt,qt[3]=kt,qt}function E(d,G,wt,kt,qt){return d[0]=G,d[1]=wt,d[2]=kt,d[3]=qt,d}function D(d,G){if(d===G){var wt=G[1];d[1]=G[2],d[2]=wt}else d[0]=G[0],d[1]=G[2],d[2]=G[1],d[3]=G[3];return d}function F(d,G){var wt=G[0],kt=G[1],qt=G[2],he=G[3],me=wt*he-qt*kt;return me?(me=1/me,d[0]=he*me,d[1]=-kt*me,d[2]=-qt*me,d[3]=wt*me,d):null}function W(d,G){var wt=G[0];return d[0]=G[3],d[1]=-G[1],d[2]=-G[2],d[3]=wt,d}function b(d){return d[0]*d[3]-d[2]*d[1]}function h(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=wt[0],Fe=wt[1],Ke=wt[2],gr=wt[3];return d[0]=kt*Oe+he*Fe,d[1]=qt*Oe+me*Fe,d[2]=kt*Ke+he*gr,d[3]=qt*Ke+me*gr,d}function K(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=Math.sin(wt),Fe=Math.cos(wt);return d[0]=kt*Fe+he*Oe,d[1]=qt*Fe+me*Oe,d[2]=kt*-Oe+he*Fe,d[3]=qt*-Oe+me*Fe,d}function U(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=wt[0],Fe=wt[1];return d[0]=kt*Oe,d[1]=qt*Oe,d[2]=he*Fe,d[3]=me*Fe,d}function Y(d,G){var wt=Math.sin(G),kt=Math.cos(G);return d[0]=kt,d[1]=wt,d[2]=-wt,d[3]=kt,d}function Z(d,G){return d[0]=G[0],d[1]=0,d[2]=0,d[3]=G[1],d}function H(d){return"mat2("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"}function q(d){return Math.hypot(d[0],d[1],d[2],d[3])}function Q(d,G,wt,kt){return d[2]=kt[2]/kt[0],wt[0]=kt[0],wt[1]=kt[1],wt[3]=kt[3]-d[2]*wt[1],[d,G,wt]}function J(d,G,wt){return d[0]=G[0]+wt[0],d[1]=G[1]+wt[1],d[2]=G[2]+wt[2],d[3]=G[3]+wt[3],d}function ft(d,G,wt){return d[0]=G[0]-wt[0],d[1]=G[1]-wt[1],d[2]=G[2]-wt[2],d[3]=G[3]-wt[3],d}function nt(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]}function yt(d,G){var wt=d[0],kt=d[1],qt=d[2],he=d[3],me=G[0],Oe=G[1],Fe=G[2],Ke=G[3];return Math.abs(wt-me)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(me))&&Math.abs(kt-Oe)<=p.EPSILON*Math.max(1,Math.abs(kt),Math.abs(Oe))&&Math.abs(qt-Fe)<=p.EPSILON*Math.max(1,Math.abs(qt),Math.abs(Fe))&&Math.abs(he-Ke)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ke))}function gt(d,G,wt){return d[0]=G[0]*wt,d[1]=G[1]*wt,d[2]=G[2]*wt,d[3]=G[3]*wt,d}function zt(d,G,wt,kt){return d[0]=G[0]+wt[0]*kt,d[1]=G[1]+wt[1]*kt,d[2]=G[2]+wt[2]*kt,d[3]=G[3]+wt[3]*kt,d}var Mt=h,Ct=ft;function rt(){var d=new p.ARRAY_TYPE(6);return p.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0,d[4]=0,d[5]=0),d[0]=1,d[3]=1,d}function ot(d){var G=new p.ARRAY_TYPE(6);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G[4]=d[4],G[5]=d[5],G}function Tt(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=G[4],d[5]=G[5],d}function Rt(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d[4]=0,d[5]=0,d}function st(d,G,wt,kt,qt,he){var me=new p.ARRAY_TYPE(6);return me[0]=d,me[1]=G,me[2]=wt,me[3]=kt,me[4]=qt,me[5]=he,me}function bt(d,G,wt,kt,qt,he,me){return d[0]=G,d[1]=wt,d[2]=kt,d[3]=qt,d[4]=he,d[5]=me,d}function Ft(d,G){var wt=G[0],kt=G[1],qt=G[2],he=G[3],me=G[4],Oe=G[5],Fe=wt*he-kt*qt;return Fe?(Fe=1/Fe,d[0]=he*Fe,d[1]=-kt*Fe,d[2]=-qt*Fe,d[3]=wt*Fe,d[4]=(qt*Oe-he*me)*Fe,d[5]=(kt*me-wt*Oe)*Fe,d):null}function Ht(d){return d[0]*d[3]-d[1]*d[2]}function _t(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=G[4],Fe=G[5],Ke=wt[0],gr=wt[1],Kr=wt[2],Jr=wt[3],Qr=wt[4],Ln=wt[5];return d[0]=kt*Ke+he*gr,d[1]=qt*Ke+me*gr,d[2]=kt*Kr+he*Jr,d[3]=qt*Kr+me*Jr,d[4]=kt*Qr+he*Ln+Oe,d[5]=qt*Qr+me*Ln+Fe,d}function Xt(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=G[4],Fe=G[5],Ke=Math.sin(wt),gr=Math.cos(wt);return d[0]=kt*gr+he*Ke,d[1]=qt*gr+me*Ke,d[2]=kt*-Ke+he*gr,d[3]=qt*-Ke+me*gr,d[4]=Oe,d[5]=Fe,d}function ee(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=G[4],Fe=G[5],Ke=wt[0],gr=wt[1];return d[0]=kt*Ke,d[1]=qt*Ke,d[2]=he*gr,d[3]=me*gr,d[4]=Oe,d[5]=Fe,d}function se(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=G[4],Fe=G[5],Ke=wt[0],gr=wt[1];return d[0]=kt,d[1]=qt,d[2]=he,d[3]=me,d[4]=kt*Ke+he*gr+Oe,d[5]=qt*Ke+me*gr+Fe,d}function ue(d,G){var wt=Math.sin(G),kt=Math.cos(G);return d[0]=kt,d[1]=wt,d[2]=-wt,d[3]=kt,d[4]=0,d[5]=0,d}function Ut(d,G){return d[0]=G[0],d[1]=0,d[2]=0,d[3]=G[1],d[4]=0,d[5]=0,d}function oe(d,G){return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d[4]=G[0],d[5]=G[1],d}function Pe(d){return"mat2d("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")"}function te(d){return Math.hypot(d[0],d[1],d[2],d[3],d[4],d[5],1)}function ve(d,G,wt){return d[0]=G[0]+wt[0],d[1]=G[1]+wt[1],d[2]=G[2]+wt[2],d[3]=G[3]+wt[3],d[4]=G[4]+wt[4],d[5]=G[5]+wt[5],d}function Ue(d,G,wt){return d[0]=G[0]-wt[0],d[1]=G[1]-wt[1],d[2]=G[2]-wt[2],d[3]=G[3]-wt[3],d[4]=G[4]-wt[4],d[5]=G[5]-wt[5],d}function xe(d,G,wt){return d[0]=G[0]*wt,d[1]=G[1]*wt,d[2]=G[2]*wt,d[3]=G[3]*wt,d[4]=G[4]*wt,d[5]=G[5]*wt,d}function Re(d,G,wt,kt){return d[0]=G[0]+wt[0]*kt,d[1]=G[1]+wt[1]*kt,d[2]=G[2]+wt[2]*kt,d[3]=G[3]+wt[3]*kt,d[4]=G[4]+wt[4]*kt,d[5]=G[5]+wt[5]*kt,d}function de(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]&&d[4]===G[4]&&d[5]===G[5]}function ht(d,G){var wt=d[0],kt=d[1],qt=d[2],he=d[3],me=d[4],Oe=d[5],Fe=G[0],Ke=G[1],gr=G[2],Kr=G[3],Jr=G[4],Qr=G[5];return Math.abs(wt-Fe)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Fe))&&Math.abs(kt-Ke)<=p.EPSILON*Math.max(1,Math.abs(kt),Math.abs(Ke))&&Math.abs(qt-gr)<=p.EPSILON*Math.max(1,Math.abs(qt),Math.abs(gr))&&Math.abs(he-Kr)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(Kr))&&Math.abs(me-Jr)<=p.EPSILON*Math.max(1,Math.abs(me),Math.abs(Jr))&&Math.abs(Oe-Qr)<=p.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Qr))}var ae=_t,Le=Ue,Ze=C(935600);function qe(){var d=new p.ARRAY_TYPE(16);return p.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d}function fr(d){var G=new p.ARRAY_TYPE(16);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G[4]=d[4],G[5]=d[5],G[6]=d[6],G[7]=d[7],G[8]=d[8],G[9]=d[9],G[10]=d[10],G[11]=d[11],G[12]=d[12],G[13]=d[13],G[14]=d[14],G[15]=d[15],G}function ur(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=G[4],d[5]=G[5],d[6]=G[6],d[7]=G[7],d[8]=G[8],d[9]=G[9],d[10]=G[10],d[11]=G[11],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15],d}function kr(d,G,wt,kt,qt,he,me,Oe,Fe,Ke,gr,Kr,Jr,Qr,Ln,Nn){var sn=new p.ARRAY_TYPE(16);return sn[0]=d,sn[1]=G,sn[2]=wt,sn[3]=kt,sn[4]=qt,sn[5]=he,sn[6]=me,sn[7]=Oe,sn[8]=Fe,sn[9]=Ke,sn[10]=gr,sn[11]=Kr,sn[12]=Jr,sn[13]=Qr,sn[14]=Ln,sn[15]=Nn,sn}function yn(d,G,wt,kt,qt,he,me,Oe,Fe,Ke,gr,Kr,Jr,Qr,Ln,Nn,sn){return d[0]=G,d[1]=wt,d[2]=kt,d[3]=qt,d[4]=he,d[5]=me,d[6]=Oe,d[7]=Fe,d[8]=Ke,d[9]=gr,d[10]=Kr,d[11]=Jr,d[12]=Qr,d[13]=Ln,d[14]=Nn,d[15]=sn,d}function un(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Vr(d,G){if(d===G){var wt=G[1],kt=G[2],qt=G[3],he=G[6],me=G[7],Oe=G[11];d[1]=G[4],d[2]=G[8],d[3]=G[12],d[4]=wt,d[6]=G[9],d[7]=G[13],d[8]=kt,d[9]=he,d[11]=G[14],d[12]=qt,d[13]=me,d[14]=Oe}else d[0]=G[0],d[1]=G[4],d[2]=G[8],d[3]=G[12],d[4]=G[1],d[5]=G[5],d[6]=G[9],d[7]=G[13],d[8]=G[2],d[9]=G[6],d[10]=G[10],d[11]=G[14],d[12]=G[3],d[13]=G[7],d[14]=G[11],d[15]=G[15];return d}function $e(d,G){var wt=G[0],kt=G[1],qt=G[2],he=G[3],me=G[4],Oe=G[5],Fe=G[6],Ke=G[7],gr=G[8],Kr=G[9],Jr=G[10],Qr=G[11],Ln=G[12],Nn=G[13],sn=G[14],ra=G[15],Ha=wt*Oe-kt*me,Va=wt*Fe-qt*me,ka=wt*Ke-he*me,_a=kt*Fe-qt*Oe,Pa=kt*Ke-he*Oe,Do=qt*Ke-he*Fe,wo=gr*Nn-Kr*Ln,vo=gr*sn-Jr*Ln,So=gr*ra-Qr*Ln,Mo=Kr*sn-Jr*Nn,No=Kr*ra-Qr*Nn,Ro=Jr*ra-Qr*sn,hi=Ha*Ro-Va*No+ka*Mo+_a*So-Pa*vo+Do*wo;return hi?(hi=1/hi,d[0]=(Oe*Ro-Fe*No+Ke*Mo)*hi,d[1]=(qt*No-kt*Ro-he*Mo)*hi,d[2]=(Nn*Do-sn*Pa+ra*_a)*hi,d[3]=(Jr*Pa-Kr*Do-Qr*_a)*hi,d[4]=(Fe*So-me*Ro-Ke*vo)*hi,d[5]=(wt*Ro-qt*So+he*vo)*hi,d[6]=(sn*ka-Ln*Do-ra*Va)*hi,d[7]=(gr*Do-Jr*ka+Qr*Va)*hi,d[8]=(me*No-Oe*So+Ke*wo)*hi,d[9]=(kt*So-wt*No-he*wo)*hi,d[10]=(Ln*Pa-Nn*ka+ra*Ha)*hi,d[11]=(Kr*ka-gr*Pa-Qr*Ha)*hi,d[12]=(Oe*vo-me*Mo-Fe*wo)*hi,d[13]=(wt*Mo-kt*vo+qt*wo)*hi,d[14]=(Nn*Va-Ln*_a-sn*Ha)*hi,d[15]=(gr*_a-Kr*Va+Jr*Ha)*hi,d):null}function dr(d,G){var wt=G[0],kt=G[1],qt=G[2],he=G[3],me=G[4],Oe=G[5],Fe=G[6],Ke=G[7],gr=G[8],Kr=G[9],Jr=G[10],Qr=G[11],Ln=G[12],Nn=G[13],sn=G[14],ra=G[15];return d[0]=Oe*(Jr*ra-Qr*sn)-Kr*(Fe*ra-Ke*sn)+Nn*(Fe*Qr-Ke*Jr),d[1]=-(kt*(Jr*ra-Qr*sn)-Kr*(qt*ra-he*sn)+Nn*(qt*Qr-he*Jr)),d[2]=kt*(Fe*ra-Ke*sn)-Oe*(qt*ra-he*sn)+Nn*(qt*Ke-he*Fe),d[3]=-(kt*(Fe*Qr-Ke*Jr)-Oe*(qt*Qr-he*Jr)+Kr*(qt*Ke-he*Fe)),d[4]=-(me*(Jr*ra-Qr*sn)-gr*(Fe*ra-Ke*sn)+Ln*(Fe*Qr-Ke*Jr)),d[5]=wt*(Jr*ra-Qr*sn)-gr*(qt*ra-he*sn)+Ln*(qt*Qr-he*Jr),d[6]=-(wt*(Fe*ra-Ke*sn)-me*(qt*ra-he*sn)+Ln*(qt*Ke-he*Fe)),d[7]=wt*(Fe*Qr-Ke*Jr)-me*(qt*Qr-he*Jr)+gr*(qt*Ke-he*Fe),d[8]=me*(Kr*ra-Qr*Nn)-gr*(Oe*ra-Ke*Nn)+Ln*(Oe*Qr-Ke*Kr),d[9]=-(wt*(Kr*ra-Qr*Nn)-gr*(kt*ra-he*Nn)+Ln*(kt*Qr-he*Kr)),d[10]=wt*(Oe*ra-Ke*Nn)-me*(kt*ra-he*Nn)+Ln*(kt*Ke-he*Oe),d[11]=-(wt*(Oe*Qr-Ke*Kr)-me*(kt*Qr-he*Kr)+gr*(kt*Ke-he*Oe)),d[12]=-(me*(Kr*sn-Jr*Nn)-gr*(Oe*sn-Fe*Nn)+Ln*(Oe*Jr-Fe*Kr)),d[13]=wt*(Kr*sn-Jr*Nn)-gr*(kt*sn-qt*Nn)+Ln*(kt*Jr-qt*Kr),d[14]=-(wt*(Oe*sn-Fe*Nn)-me*(kt*sn-qt*Nn)+Ln*(kt*Fe-qt*Oe)),d[15]=wt*(Oe*Jr-Fe*Kr)-me*(kt*Jr-qt*Kr)+gr*(kt*Fe-qt*Oe),d}function ar(d){var G=d[0],wt=d[1],kt=d[2],qt=d[3],he=d[4],me=d[5],Oe=d[6],Fe=d[7],Ke=d[8],gr=d[9],Kr=d[10],Jr=d[11],Qr=d[12],Ln=d[13],Nn=d[14],sn=d[15],ra=G*me-wt*he,Ha=G*Oe-kt*he,Va=G*Fe-qt*he,ka=wt*Oe-kt*me,_a=wt*Fe-qt*me,Pa=kt*Fe-qt*Oe,Do=Ke*Ln-gr*Qr,wo=Ke*Nn-Kr*Qr,vo=Ke*sn-Jr*Qr,So=gr*Nn-Kr*Ln,Mo=gr*sn-Jr*Ln,No=Kr*sn-Jr*Nn;return ra*No-Ha*Mo+Va*So+ka*vo-_a*wo+Pa*Do}function Qe(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=G[4],Fe=G[5],Ke=G[6],gr=G[7],Kr=G[8],Jr=G[9],Qr=G[10],Ln=G[11],Nn=G[12],sn=G[13],ra=G[14],Ha=G[15],Va=wt[0],ka=wt[1],_a=wt[2],Pa=wt[3];return d[0]=Va*kt+ka*Oe+_a*Kr+Pa*Nn,d[1]=Va*qt+ka*Fe+_a*Jr+Pa*sn,d[2]=Va*he+ka*Ke+_a*Qr+Pa*ra,d[3]=Va*me+ka*gr+_a*Ln+Pa*Ha,Va=wt[4],ka=wt[5],_a=wt[6],Pa=wt[7],d[4]=Va*kt+ka*Oe+_a*Kr+Pa*Nn,d[5]=Va*qt+ka*Fe+_a*Jr+Pa*sn,d[6]=Va*he+ka*Ke+_a*Qr+Pa*ra,d[7]=Va*me+ka*gr+_a*Ln+Pa*Ha,Va=wt[8],ka=wt[9],_a=wt[10],Pa=wt[11],d[8]=Va*kt+ka*Oe+_a*Kr+Pa*Nn,d[9]=Va*qt+ka*Fe+_a*Jr+Pa*sn,d[10]=Va*he+ka*Ke+_a*Qr+Pa*ra,d[11]=Va*me+ka*gr+_a*Ln+Pa*Ha,Va=wt[12],ka=wt[13],_a=wt[14],Pa=wt[15],d[12]=Va*kt+ka*Oe+_a*Kr+Pa*Nn,d[13]=Va*qt+ka*Fe+_a*Jr+Pa*sn,d[14]=Va*he+ka*Ke+_a*Qr+Pa*ra,d[15]=Va*me+ka*gr+_a*Ln+Pa*Ha,d}function Pr(d,G,wt){var kt=wt[0],qt=wt[1],he=wt[2],me,Oe,Fe,Ke,gr,Kr,Jr,Qr,Ln,Nn,sn,ra;return G===d?(d[12]=G[0]*kt+G[4]*qt+G[8]*he+G[12],d[13]=G[1]*kt+G[5]*qt+G[9]*he+G[13],d[14]=G[2]*kt+G[6]*qt+G[10]*he+G[14],d[15]=G[3]*kt+G[7]*qt+G[11]*he+G[15]):(me=G[0],Oe=G[1],Fe=G[2],Ke=G[3],gr=G[4],Kr=G[5],Jr=G[6],Qr=G[7],Ln=G[8],Nn=G[9],sn=G[10],ra=G[11],d[0]=me,d[1]=Oe,d[2]=Fe,d[3]=Ke,d[4]=gr,d[5]=Kr,d[6]=Jr,d[7]=Qr,d[8]=Ln,d[9]=Nn,d[10]=sn,d[11]=ra,d[12]=me*kt+gr*qt+Ln*he+G[12],d[13]=Oe*kt+Kr*qt+Nn*he+G[13],d[14]=Fe*kt+Jr*qt+sn*he+G[14],d[15]=Ke*kt+Qr*qt+ra*he+G[15]),d}function Zr(d,G,wt){var kt=wt[0],qt=wt[1],he=wt[2];return d[0]=G[0]*kt,d[1]=G[1]*kt,d[2]=G[2]*kt,d[3]=G[3]*kt,d[4]=G[4]*qt,d[5]=G[5]*qt,d[6]=G[6]*qt,d[7]=G[7]*qt,d[8]=G[8]*he,d[9]=G[9]*he,d[10]=G[10]*he,d[11]=G[11]*he,d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15],d}function qr(d,G,wt,kt){var qt=kt[0],he=kt[1],me=kt[2],Oe=Math.hypot(qt,he,me),Fe,Ke,gr,Kr,Jr,Qr,Ln,Nn,sn,ra,Ha,Va,ka,_a,Pa,Do,wo,vo,So,Mo,No,Ro,hi,Bi;return Oe<p.EPSILON?null:(Oe=1/Oe,qt*=Oe,he*=Oe,me*=Oe,Fe=Math.sin(wt),Ke=Math.cos(wt),gr=1-Ke,Kr=G[0],Jr=G[1],Qr=G[2],Ln=G[3],Nn=G[4],sn=G[5],ra=G[6],Ha=G[7],Va=G[8],ka=G[9],_a=G[10],Pa=G[11],Do=qt*qt*gr+Ke,wo=he*qt*gr+me*Fe,vo=me*qt*gr-he*Fe,So=qt*he*gr-me*Fe,Mo=he*he*gr+Ke,No=me*he*gr+qt*Fe,Ro=qt*me*gr+he*Fe,hi=he*me*gr-qt*Fe,Bi=me*me*gr+Ke,d[0]=Kr*Do+Nn*wo+Va*vo,d[1]=Jr*Do+sn*wo+ka*vo,d[2]=Qr*Do+ra*wo+_a*vo,d[3]=Ln*Do+Ha*wo+Pa*vo,d[4]=Kr*So+Nn*Mo+Va*No,d[5]=Jr*So+sn*Mo+ka*No,d[6]=Qr*So+ra*Mo+_a*No,d[7]=Ln*So+Ha*Mo+Pa*No,d[8]=Kr*Ro+Nn*hi+Va*Bi,d[9]=Jr*Ro+sn*hi+ka*Bi,d[10]=Qr*Ro+ra*hi+_a*Bi,d[11]=Ln*Ro+Ha*hi+Pa*Bi,G!==d&&(d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d)}function Sn(d,G,wt){var kt=Math.sin(wt),qt=Math.cos(wt),he=G[4],me=G[5],Oe=G[6],Fe=G[7],Ke=G[8],gr=G[9],Kr=G[10],Jr=G[11];return G!==d&&(d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d[4]=he*qt+Ke*kt,d[5]=me*qt+gr*kt,d[6]=Oe*qt+Kr*kt,d[7]=Fe*qt+Jr*kt,d[8]=Ke*qt-he*kt,d[9]=gr*qt-me*kt,d[10]=Kr*qt-Oe*kt,d[11]=Jr*qt-Fe*kt,d}function Yn(d,G,wt){var kt=Math.sin(wt),qt=Math.cos(wt),he=G[0],me=G[1],Oe=G[2],Fe=G[3],Ke=G[8],gr=G[9],Kr=G[10],Jr=G[11];return G!==d&&(d[4]=G[4],d[5]=G[5],d[6]=G[6],d[7]=G[7],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d[0]=he*qt-Ke*kt,d[1]=me*qt-gr*kt,d[2]=Oe*qt-Kr*kt,d[3]=Fe*qt-Jr*kt,d[8]=he*kt+Ke*qt,d[9]=me*kt+gr*qt,d[10]=Oe*kt+Kr*qt,d[11]=Fe*kt+Jr*qt,d}function Ir(d,G,wt){var kt=Math.sin(wt),qt=Math.cos(wt),he=G[0],me=G[1],Oe=G[2],Fe=G[3],Ke=G[4],gr=G[5],Kr=G[6],Jr=G[7];return G!==d&&(d[8]=G[8],d[9]=G[9],d[10]=G[10],d[11]=G[11],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d[0]=he*qt+Ke*kt,d[1]=me*qt+gr*kt,d[2]=Oe*qt+Kr*kt,d[3]=Fe*qt+Jr*kt,d[4]=Ke*qt-he*kt,d[5]=gr*qt-me*kt,d[6]=Kr*qt-Oe*kt,d[7]=Jr*qt-Fe*kt,d}function Br(d,G){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=G[0],d[13]=G[1],d[14]=G[2],d[15]=1,d}function en(d,G){return d[0]=G[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=G[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=G[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function hn(d,G,wt){var kt=wt[0],qt=wt[1],he=wt[2],me=Math.hypot(kt,qt,he),Oe,Fe,Ke;return me<p.EPSILON?null:(me=1/me,kt*=me,qt*=me,he*=me,Oe=Math.sin(G),Fe=Math.cos(G),Ke=1-Fe,d[0]=kt*kt*Ke+Fe,d[1]=qt*kt*Ke+he*Oe,d[2]=he*kt*Ke-qt*Oe,d[3]=0,d[4]=kt*qt*Ke-he*Oe,d[5]=qt*qt*Ke+Fe,d[6]=he*qt*Ke+kt*Oe,d[7]=0,d[8]=kt*he*Ke+qt*Oe,d[9]=qt*he*Ke-kt*Oe,d[10]=he*he*Ke+Fe,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d)}function xn(d,G){var wt=Math.sin(G),kt=Math.cos(G);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=kt,d[6]=wt,d[7]=0,d[8]=0,d[9]=-wt,d[10]=kt,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function _n(d,G){var wt=Math.sin(G),kt=Math.cos(G);return d[0]=kt,d[1]=0,d[2]=-wt,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=wt,d[9]=0,d[10]=kt,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function tt(d,G){var wt=Math.sin(G),kt=Math.cos(G);return d[0]=kt,d[1]=wt,d[2]=0,d[3]=0,d[4]=-wt,d[5]=kt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function ir(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=kt+kt,Fe=qt+qt,Ke=he+he,gr=kt*Oe,Kr=kt*Fe,Jr=kt*Ke,Qr=qt*Fe,Ln=qt*Ke,Nn=he*Ke,sn=me*Oe,ra=me*Fe,Ha=me*Ke;return d[0]=1-(Qr+Nn),d[1]=Kr+Ha,d[2]=Jr-ra,d[3]=0,d[4]=Kr-Ha,d[5]=1-(gr+Nn),d[6]=Ln+sn,d[7]=0,d[8]=Jr+ra,d[9]=Ln-sn,d[10]=1-(gr+Qr),d[11]=0,d[12]=wt[0],d[13]=wt[1],d[14]=wt[2],d[15]=1,d}function jt(d,G){var wt=new p.ARRAY_TYPE(3),kt=-G[0],qt=-G[1],he=-G[2],me=G[3],Oe=G[4],Fe=G[5],Ke=G[6],gr=G[7],Kr=kt*kt+qt*qt+he*he+me*me;return Kr>0?(wt[0]=(Oe*me+gr*kt+Fe*he-Ke*qt)*2/Kr,wt[1]=(Fe*me+gr*qt+Ke*kt-Oe*he)*2/Kr,wt[2]=(Ke*me+gr*he+Oe*qt-Fe*kt)*2/Kr):(wt[0]=(Oe*me+gr*kt+Fe*he-Ke*qt)*2,wt[1]=(Fe*me+gr*qt+Ke*kt-Oe*he)*2,wt[2]=(Ke*me+gr*he+Oe*qt-Fe*kt)*2),ir(d,G,wt),d}function Qt(d,G){return d[0]=G[12],d[1]=G[13],d[2]=G[14],d}function Et(d,G){var wt=G[0],kt=G[1],qt=G[2],he=G[4],me=G[5],Oe=G[6],Fe=G[8],Ke=G[9],gr=G[10];return d[0]=Math.hypot(wt,kt,qt),d[1]=Math.hypot(he,me,Oe),d[2]=Math.hypot(Fe,Ke,gr),d}function we(d,G){var wt=new p.ARRAY_TYPE(3);Et(wt,G);var kt=1/wt[0],qt=1/wt[1],he=1/wt[2],me=G[0]*kt,Oe=G[1]*qt,Fe=G[2]*he,Ke=G[4]*kt,gr=G[5]*qt,Kr=G[6]*he,Jr=G[8]*kt,Qr=G[9]*qt,Ln=G[10]*he,Nn=me+gr+Ln,sn=0;return Nn>0?(sn=Math.sqrt(Nn+1)*2,d[3]=.25*sn,d[0]=(Kr-Qr)/sn,d[1]=(Jr-Fe)/sn,d[2]=(Oe-Ke)/sn):me>gr&&me>Ln?(sn=Math.sqrt(1+me-gr-Ln)*2,d[3]=(Kr-Qr)/sn,d[0]=.25*sn,d[1]=(Oe+Ke)/sn,d[2]=(Jr+Fe)/sn):gr>Ln?(sn=Math.sqrt(1+gr-me-Ln)*2,d[3]=(Jr-Fe)/sn,d[0]=(Oe+Ke)/sn,d[1]=.25*sn,d[2]=(Kr+Qr)/sn):(sn=Math.sqrt(1+Ln-me-gr)*2,d[3]=(Oe-Ke)/sn,d[0]=(Jr+Fe)/sn,d[1]=(Kr+Qr)/sn,d[2]=.25*sn),d}function Ot(d,G,wt,kt){var qt=G[0],he=G[1],me=G[2],Oe=G[3],Fe=qt+qt,Ke=he+he,gr=me+me,Kr=qt*Fe,Jr=qt*Ke,Qr=qt*gr,Ln=he*Ke,Nn=he*gr,sn=me*gr,ra=Oe*Fe,Ha=Oe*Ke,Va=Oe*gr,ka=kt[0],_a=kt[1],Pa=kt[2];return d[0]=(1-(Ln+sn))*ka,d[1]=(Jr+Va)*ka,d[2]=(Qr-Ha)*ka,d[3]=0,d[4]=(Jr-Va)*_a,d[5]=(1-(Kr+sn))*_a,d[6]=(Nn+ra)*_a,d[7]=0,d[8]=(Qr+Ha)*Pa,d[9]=(Nn-ra)*Pa,d[10]=(1-(Kr+Ln))*Pa,d[11]=0,d[12]=wt[0],d[13]=wt[1],d[14]=wt[2],d[15]=1,d}function Kt(d,G,wt,kt,qt){var he=G[0],me=G[1],Oe=G[2],Fe=G[3],Ke=he+he,gr=me+me,Kr=Oe+Oe,Jr=he*Ke,Qr=he*gr,Ln=he*Kr,Nn=me*gr,sn=me*Kr,ra=Oe*Kr,Ha=Fe*Ke,Va=Fe*gr,ka=Fe*Kr,_a=kt[0],Pa=kt[1],Do=kt[2],wo=qt[0],vo=qt[1],So=qt[2],Mo=(1-(Nn+ra))*_a,No=(Qr+ka)*_a,Ro=(Ln-Va)*_a,hi=(Qr-ka)*Pa,Bi=(1-(Jr+ra))*Pa,Ys=(sn+Ha)*Pa,Xs=(Ln+Va)*Do,ds=(sn-Ha)*Do,Iu=(1-(Jr+Nn))*Do;return d[0]=Mo,d[1]=No,d[2]=Ro,d[3]=0,d[4]=hi,d[5]=Bi,d[6]=Ys,d[7]=0,d[8]=Xs,d[9]=ds,d[10]=Iu,d[11]=0,d[12]=wt[0]+wo-(Mo*wo+hi*vo+Xs*So),d[13]=wt[1]+vo-(No*wo+Bi*vo+ds*So),d[14]=wt[2]+So-(Ro*wo+Ys*vo+Iu*So),d[15]=1,d}function dt(d,G){var wt=G[0],kt=G[1],qt=G[2],he=G[3],me=wt+wt,Oe=kt+kt,Fe=qt+qt,Ke=wt*me,gr=kt*me,Kr=kt*Oe,Jr=qt*me,Qr=qt*Oe,Ln=qt*Fe,Nn=he*me,sn=he*Oe,ra=he*Fe;return d[0]=1-Kr-Ln,d[1]=gr+ra,d[2]=Jr-sn,d[3]=0,d[4]=gr-ra,d[5]=1-Ke-Ln,d[6]=Qr+Nn,d[7]=0,d[8]=Jr+sn,d[9]=Qr-Nn,d[10]=1-Ke-Kr,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Bt(d,G,wt,kt,qt,he,me){var Oe=1/(wt-G),Fe=1/(qt-kt),Ke=1/(he-me);return d[0]=he*2*Oe,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=he*2*Fe,d[6]=0,d[7]=0,d[8]=(wt+G)*Oe,d[9]=(qt+kt)*Fe,d[10]=(me+he)*Ke,d[11]=-1,d[12]=0,d[13]=0,d[14]=me*he*2*Ke,d[15]=0,d}function $(d,G,wt,kt,qt){var he=1/Math.tan(G/2),me;return d[0]=he/wt,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=he,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,qt!=null&&qt!==1/0?(me=1/(kt-qt),d[10]=(qt+kt)*me,d[14]=2*qt*kt*me):(d[10]=-1,d[14]=-2*kt),d}var at=$;function R(d,G,wt,kt,qt){var he=1/Math.tan(G/2),me;return d[0]=he/wt,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=he,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,qt!=null&&qt!==1/0?(me=1/(kt-qt),d[10]=qt*me,d[14]=qt*kt*me):(d[10]=-1,d[14]=-kt),d}function M(d,G,wt,kt){var qt=Math.tan(G.upDegrees*Math.PI/180),he=Math.tan(G.downDegrees*Math.PI/180),me=Math.tan(G.leftDegrees*Math.PI/180),Oe=Math.tan(G.rightDegrees*Math.PI/180),Fe=2/(me+Oe),Ke=2/(qt+he);return d[0]=Fe,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=Ke,d[6]=0,d[7]=0,d[8]=-((me-Oe)*Fe*.5),d[9]=(qt-he)*Ke*.5,d[10]=kt/(wt-kt),d[11]=-1,d[12]=0,d[13]=0,d[14]=kt*wt/(wt-kt),d[15]=0,d}function A(d,G,wt,kt,qt,he,me){var Oe=1/(G-wt),Fe=1/(kt-qt),Ke=1/(he-me);return d[0]=-2*Oe,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*Fe,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*Ke,d[11]=0,d[12]=(G+wt)*Oe,d[13]=(qt+kt)*Fe,d[14]=(me+he)*Ke,d[15]=1,d}var X=A;function mt(d,G,wt,kt,qt,he,me){var Oe=1/(G-wt),Fe=1/(kt-qt),Ke=1/(he-me);return d[0]=-2*Oe,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*Fe,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=Ke,d[11]=0,d[12]=(G+wt)*Oe,d[13]=(qt+kt)*Fe,d[14]=he*Ke,d[15]=1,d}function Lt(d,G,wt,kt){var qt,he,me,Oe,Fe,Ke,gr,Kr,Jr,Qr,Ln=G[0],Nn=G[1],sn=G[2],ra=kt[0],Ha=kt[1],Va=kt[2],ka=wt[0],_a=wt[1],Pa=wt[2];return Math.abs(Ln-ka)<p.EPSILON&&Math.abs(Nn-_a)<p.EPSILON&&Math.abs(sn-Pa)<p.EPSILON?un(d):(gr=Ln-ka,Kr=Nn-_a,Jr=sn-Pa,Qr=1/Math.hypot(gr,Kr,Jr),gr*=Qr,Kr*=Qr,Jr*=Qr,qt=Ha*Jr-Va*Kr,he=Va*gr-ra*Jr,me=ra*Kr-Ha*gr,Qr=Math.hypot(qt,he,me),Qr?(Qr=1/Qr,qt*=Qr,he*=Qr,me*=Qr):(qt=0,he=0,me=0),Oe=Kr*me-Jr*he,Fe=Jr*qt-gr*me,Ke=gr*he-Kr*qt,Qr=Math.hypot(Oe,Fe,Ke),Qr?(Qr=1/Qr,Oe*=Qr,Fe*=Qr,Ke*=Qr):(Oe=0,Fe=0,Ke=0),d[0]=qt,d[1]=Oe,d[2]=gr,d[3]=0,d[4]=he,d[5]=Fe,d[6]=Kr,d[7]=0,d[8]=me,d[9]=Ke,d[10]=Jr,d[11]=0,d[12]=-(qt*Ln+he*Nn+me*sn),d[13]=-(Oe*Ln+Fe*Nn+Ke*sn),d[14]=-(gr*Ln+Kr*Nn+Jr*sn),d[15]=1,d)}function Pt(d,G,wt,kt){var qt=G[0],he=G[1],me=G[2],Oe=kt[0],Fe=kt[1],Ke=kt[2],gr=qt-wt[0],Kr=he-wt[1],Jr=me-wt[2],Qr=gr*gr+Kr*Kr+Jr*Jr;Qr>0&&(Qr=1/Math.sqrt(Qr),gr*=Qr,Kr*=Qr,Jr*=Qr);var Ln=Fe*Jr-Ke*Kr,Nn=Ke*gr-Oe*Jr,sn=Oe*Kr-Fe*gr;return Qr=Ln*Ln+Nn*Nn+sn*sn,Qr>0&&(Qr=1/Math.sqrt(Qr),Ln*=Qr,Nn*=Qr,sn*=Qr),d[0]=Ln,d[1]=Nn,d[2]=sn,d[3]=0,d[4]=Kr*sn-Jr*Nn,d[5]=Jr*Ln-gr*sn,d[6]=gr*Nn-Kr*Ln,d[7]=0,d[8]=gr,d[9]=Kr,d[10]=Jr,d[11]=0,d[12]=qt,d[13]=he,d[14]=me,d[15]=1,d}function Jt(d){return"mat4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+", "+d[9]+", "+d[10]+", "+d[11]+", "+d[12]+", "+d[13]+", "+d[14]+", "+d[15]+")"}function Ie(d){return Math.hypot(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15])}function pe(d,G,wt){return d[0]=G[0]+wt[0],d[1]=G[1]+wt[1],d[2]=G[2]+wt[2],d[3]=G[3]+wt[3],d[4]=G[4]+wt[4],d[5]=G[5]+wt[5],d[6]=G[6]+wt[6],d[7]=G[7]+wt[7],d[8]=G[8]+wt[8],d[9]=G[9]+wt[9],d[10]=G[10]+wt[10],d[11]=G[11]+wt[11],d[12]=G[12]+wt[12],d[13]=G[13]+wt[13],d[14]=G[14]+wt[14],d[15]=G[15]+wt[15],d}function je(d,G,wt){return d[0]=G[0]-wt[0],d[1]=G[1]-wt[1],d[2]=G[2]-wt[2],d[3]=G[3]-wt[3],d[4]=G[4]-wt[4],d[5]=G[5]-wt[5],d[6]=G[6]-wt[6],d[7]=G[7]-wt[7],d[8]=G[8]-wt[8],d[9]=G[9]-wt[9],d[10]=G[10]-wt[10],d[11]=G[11]-wt[11],d[12]=G[12]-wt[12],d[13]=G[13]-wt[13],d[14]=G[14]-wt[14],d[15]=G[15]-wt[15],d}function br(d,G,wt){return d[0]=G[0]*wt,d[1]=G[1]*wt,d[2]=G[2]*wt,d[3]=G[3]*wt,d[4]=G[4]*wt,d[5]=G[5]*wt,d[6]=G[6]*wt,d[7]=G[7]*wt,d[8]=G[8]*wt,d[9]=G[9]*wt,d[10]=G[10]*wt,d[11]=G[11]*wt,d[12]=G[12]*wt,d[13]=G[13]*wt,d[14]=G[14]*wt,d[15]=G[15]*wt,d}function Je(d,G,wt,kt){return d[0]=G[0]+wt[0]*kt,d[1]=G[1]+wt[1]*kt,d[2]=G[2]+wt[2]*kt,d[3]=G[3]+wt[3]*kt,d[4]=G[4]+wt[4]*kt,d[5]=G[5]+wt[5]*kt,d[6]=G[6]+wt[6]*kt,d[7]=G[7]+wt[7]*kt,d[8]=G[8]+wt[8]*kt,d[9]=G[9]+wt[9]*kt,d[10]=G[10]+wt[10]*kt,d[11]=G[11]+wt[11]*kt,d[12]=G[12]+wt[12]*kt,d[13]=G[13]+wt[13]*kt,d[14]=G[14]+wt[14]*kt,d[15]=G[15]+wt[15]*kt,d}function zr(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]&&d[4]===G[4]&&d[5]===G[5]&&d[6]===G[6]&&d[7]===G[7]&&d[8]===G[8]&&d[9]===G[9]&&d[10]===G[10]&&d[11]===G[11]&&d[12]===G[12]&&d[13]===G[13]&&d[14]===G[14]&&d[15]===G[15]}function gn(d,G){var wt=d[0],kt=d[1],qt=d[2],he=d[3],me=d[4],Oe=d[5],Fe=d[6],Ke=d[7],gr=d[8],Kr=d[9],Jr=d[10],Qr=d[11],Ln=d[12],Nn=d[13],sn=d[14],ra=d[15],Ha=G[0],Va=G[1],ka=G[2],_a=G[3],Pa=G[4],Do=G[5],wo=G[6],vo=G[7],So=G[8],Mo=G[9],No=G[10],Ro=G[11],hi=G[12],Bi=G[13],Ys=G[14],Xs=G[15];return Math.abs(wt-Ha)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Ha))&&Math.abs(kt-Va)<=p.EPSILON*Math.max(1,Math.abs(kt),Math.abs(Va))&&Math.abs(qt-ka)<=p.EPSILON*Math.max(1,Math.abs(qt),Math.abs(ka))&&Math.abs(he-_a)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(_a))&&Math.abs(me-Pa)<=p.EPSILON*Math.max(1,Math.abs(me),Math.abs(Pa))&&Math.abs(Oe-Do)<=p.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Do))&&Math.abs(Fe-wo)<=p.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(wo))&&Math.abs(Ke-vo)<=p.EPSILON*Math.max(1,Math.abs(Ke),Math.abs(vo))&&Math.abs(gr-So)<=p.EPSILON*Math.max(1,Math.abs(gr),Math.abs(So))&&Math.abs(Kr-Mo)<=p.EPSILON*Math.max(1,Math.abs(Kr),Math.abs(Mo))&&Math.abs(Jr-No)<=p.EPSILON*Math.max(1,Math.abs(Jr),Math.abs(No))&&Math.abs(Qr-Ro)<=p.EPSILON*Math.max(1,Math.abs(Qr),Math.abs(Ro))&&Math.abs(Ln-hi)<=p.EPSILON*Math.max(1,Math.abs(Ln),Math.abs(hi))&&Math.abs(Nn-Bi)<=p.EPSILON*Math.max(1,Math.abs(Nn),Math.abs(Bi))&&Math.abs(sn-Ys)<=p.EPSILON*Math.max(1,Math.abs(sn),Math.abs(Ys))&&Math.abs(ra-Xs)<=p.EPSILON*Math.max(1,Math.abs(ra),Math.abs(Xs))}var tr=Qe,xr=je,Ur=C(277160);function Nr(){var d=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0),d}function fe(d){var G=new p.ARRAY_TYPE(4);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G}function Wt(d,G,wt,kt){var qt=new p.ARRAY_TYPE(4);return qt[0]=d,qt[1]=G,qt[2]=wt,qt[3]=kt,qt}function ge(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d}function Ae(d,G,wt,kt,qt){return d[0]=G,d[1]=wt,d[2]=kt,d[3]=qt,d}function Se(d,G,wt){return d[0]=G[0]+wt[0],d[1]=G[1]+wt[1],d[2]=G[2]+wt[2],d[3]=G[3]+wt[3],d}function Be(d,G,wt){return d[0]=G[0]-wt[0],d[1]=G[1]-wt[1],d[2]=G[2]-wt[2],d[3]=G[3]-wt[3],d}function vr(d,G,wt){return d[0]=G[0]*wt[0],d[1]=G[1]*wt[1],d[2]=G[2]*wt[2],d[3]=G[3]*wt[3],d}function Mr(d,G,wt){return d[0]=G[0]/wt[0],d[1]=G[1]/wt[1],d[2]=G[2]/wt[2],d[3]=G[3]/wt[3],d}function fn(d,G){return d[0]=Math.ceil(G[0]),d[1]=Math.ceil(G[1]),d[2]=Math.ceil(G[2]),d[3]=Math.ceil(G[3]),d}function Xn(d,G){return d[0]=Math.floor(G[0]),d[1]=Math.floor(G[1]),d[2]=Math.floor(G[2]),d[3]=Math.floor(G[3]),d}function Mn(d,G,wt){return d[0]=Math.min(G[0],wt[0]),d[1]=Math.min(G[1],wt[1]),d[2]=Math.min(G[2],wt[2]),d[3]=Math.min(G[3],wt[3]),d}function qn(d,G,wt){return d[0]=Math.max(G[0],wt[0]),d[1]=Math.max(G[1],wt[1]),d[2]=Math.max(G[2],wt[2]),d[3]=Math.max(G[3],wt[3]),d}function bn(d,G){return d[0]=Math.round(G[0]),d[1]=Math.round(G[1]),d[2]=Math.round(G[2]),d[3]=Math.round(G[3]),d}function Vn(d,G,wt){return d[0]=G[0]*wt,d[1]=G[1]*wt,d[2]=G[2]*wt,d[3]=G[3]*wt,d}function ca(d,G,wt,kt){return d[0]=G[0]+wt[0]*kt,d[1]=G[1]+wt[1]*kt,d[2]=G[2]+wt[2]*kt,d[3]=G[3]+wt[3]*kt,d}function xa(d,G){var wt=G[0]-d[0],kt=G[1]-d[1],qt=G[2]-d[2],he=G[3]-d[3];return Math.hypot(wt,kt,qt,he)}function Ea(d,G){var wt=G[0]-d[0],kt=G[1]-d[1],qt=G[2]-d[2],he=G[3]-d[3];return wt*wt+kt*kt+qt*qt+he*he}function Ni(d){var G=d[0],wt=d[1],kt=d[2],qt=d[3];return Math.hypot(G,wt,kt,qt)}function ti(d){var G=d[0],wt=d[1],kt=d[2],qt=d[3];return G*G+wt*wt+kt*kt+qt*qt}function ei(d,G){return d[0]=-G[0],d[1]=-G[1],d[2]=-G[2],d[3]=-G[3],d}function Mi(d,G){return d[0]=1/G[0],d[1]=1/G[1],d[2]=1/G[2],d[3]=1/G[3],d}function Gi(d,G){var wt=G[0],kt=G[1],qt=G[2],he=G[3],me=wt*wt+kt*kt+qt*qt+he*he;return me>0&&(me=1/Math.sqrt(me)),d[0]=wt*me,d[1]=kt*me,d[2]=qt*me,d[3]=he*me,d}function To(d,G){return d[0]*G[0]+d[1]*G[1]+d[2]*G[2]+d[3]*G[3]}function ro(d,G,wt,kt){var qt=wt[0]*kt[1]-wt[1]*kt[0],he=wt[0]*kt[2]-wt[2]*kt[0],me=wt[0]*kt[3]-wt[3]*kt[0],Oe=wt[1]*kt[2]-wt[2]*kt[1],Fe=wt[1]*kt[3]-wt[3]*kt[1],Ke=wt[2]*kt[3]-wt[3]*kt[2],gr=G[0],Kr=G[1],Jr=G[2],Qr=G[3];return d[0]=Kr*Ke-Jr*Fe+Qr*Oe,d[1]=-(gr*Ke)+Jr*me-Qr*he,d[2]=gr*Fe-Kr*me+Qr*qt,d[3]=-(gr*Oe)+Kr*he-Jr*qt,d}function ga(d,G,wt,kt){var qt=G[0],he=G[1],me=G[2],Oe=G[3];return d[0]=qt+kt*(wt[0]-qt),d[1]=he+kt*(wt[1]-he),d[2]=me+kt*(wt[2]-me),d[3]=Oe+kt*(wt[3]-Oe),d}function fo(d,G){G=G||1;var wt,kt,qt,he,me,Oe;do wt=p.RANDOM()*2-1,kt=p.RANDOM()*2-1,me=wt*wt+kt*kt;while(me>=1);do qt=p.RANDOM()*2-1,he=p.RANDOM()*2-1,Oe=qt*qt+he*he;while(Oe>=1);var Fe=Math.sqrt((1-me)/Oe);return d[0]=G*wt,d[1]=G*kt,d[2]=G*qt*Fe,d[3]=G*he*Fe,d}function Ao(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3];return d[0]=wt[0]*kt+wt[4]*qt+wt[8]*he+wt[12]*me,d[1]=wt[1]*kt+wt[5]*qt+wt[9]*he+wt[13]*me,d[2]=wt[2]*kt+wt[6]*qt+wt[10]*he+wt[14]*me,d[3]=wt[3]*kt+wt[7]*qt+wt[11]*he+wt[15]*me,d}function ni(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=wt[0],Oe=wt[1],Fe=wt[2],Ke=wt[3],gr=Ke*kt+Oe*he-Fe*qt,Kr=Ke*qt+Fe*kt-me*he,Jr=Ke*he+me*qt-Oe*kt,Qr=-me*kt-Oe*qt-Fe*he;return d[0]=gr*Ke+Qr*-me+Kr*-Fe-Jr*-Oe,d[1]=Kr*Ke+Qr*-Oe+Jr*-me-gr*-Fe,d[2]=Jr*Ke+Qr*-Fe+gr*-Oe-Kr*-me,d[3]=G[3],d}function Ri(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=0,d}function co(d){return"vec4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"}function Po(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]}function no(d,G){var wt=d[0],kt=d[1],qt=d[2],he=d[3],me=G[0],Oe=G[1],Fe=G[2],Ke=G[3];return Math.abs(wt-me)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(me))&&Math.abs(kt-Oe)<=p.EPSILON*Math.max(1,Math.abs(kt),Math.abs(Oe))&&Math.abs(qt-Fe)<=p.EPSILON*Math.max(1,Math.abs(qt),Math.abs(Fe))&&Math.abs(he-Ke)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ke))}var ao=Be,Jo=vr,lo=Mr,_i=xa,io=Ea,$o=Ni,Gt=ti,le=function(){var d=Nr();return function(G,wt,kt,qt,he,me){var Oe,Fe;for(wt||(wt=4),kt||(kt=0),qt?Fe=Math.min(qt*wt+kt,G.length):Fe=G.length,Oe=kt;Oe<Fe;Oe+=wt)d[0]=G[Oe],d[1]=G[Oe+1],d[2]=G[Oe+2],d[3]=G[Oe+3],he(d,d,me),G[Oe]=d[0],G[Oe+1]=d[1],G[Oe+2]=d[2],G[Oe+3]=d[3];return G}}();function Ge(){var d=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function pr(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d}function Fr(d,G,wt){wt=wt*.5;var kt=Math.sin(wt);return d[0]=kt*G[0],d[1]=kt*G[1],d[2]=kt*G[2],d[3]=Math.cos(wt),d}function Gr(d,G){var wt=Math.acos(G[3])*2,kt=Math.sin(wt/2);return kt>p.EPSILON?(d[0]=G[0]/kt,d[1]=G[1]/kt,d[2]=G[2]/kt):(d[0]=1,d[1]=0,d[2]=0),wt}function Or(d,G){var wt=Wi(d,G);return Math.acos(2*wt*wt-1)}function cn(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=wt[0],Fe=wt[1],Ke=wt[2],gr=wt[3];return d[0]=kt*gr+me*Oe+qt*Ke-he*Fe,d[1]=qt*gr+me*Fe+he*Oe-kt*Ke,d[2]=he*gr+me*Ke+kt*Fe-qt*Oe,d[3]=me*gr-kt*Oe-qt*Fe-he*Ke,d}function mn(d,G,wt){wt*=.5;var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=Math.sin(wt),Fe=Math.cos(wt);return d[0]=kt*Fe+me*Oe,d[1]=qt*Fe+he*Oe,d[2]=he*Fe-qt*Oe,d[3]=me*Fe-kt*Oe,d}function Bn(d,G,wt){wt*=.5;var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=Math.sin(wt),Fe=Math.cos(wt);return d[0]=kt*Fe-he*Oe,d[1]=qt*Fe+me*Oe,d[2]=he*Fe+kt*Oe,d[3]=me*Fe-qt*Oe,d}function sa(d,G,wt){wt*=.5;var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=Math.sin(wt),Fe=Math.cos(wt);return d[0]=kt*Fe+qt*Oe,d[1]=qt*Fe-kt*Oe,d[2]=he*Fe+me*Oe,d[3]=me*Fe-he*Oe,d}function Zn(d,G){var wt=G[0],kt=G[1],qt=G[2];return d[0]=wt,d[1]=kt,d[2]=qt,d[3]=Math.sqrt(Math.abs(1-wt*wt-kt*kt-qt*qt)),d}function va(d,G){var wt=G[0],kt=G[1],qt=G[2],he=G[3],me=Math.sqrt(wt*wt+kt*kt+qt*qt),Oe=Math.exp(he),Fe=me>0?Oe*Math.sin(me)/me:0;return d[0]=wt*Fe,d[1]=kt*Fe,d[2]=qt*Fe,d[3]=Oe*Math.cos(me),d}function ya(d,G){var wt=G[0],kt=G[1],qt=G[2],he=G[3],me=Math.sqrt(wt*wt+kt*kt+qt*qt),Oe=me>0?Math.atan2(me,he)/me:0;return d[0]=wt*Oe,d[1]=kt*Oe,d[2]=qt*Oe,d[3]=.5*Math.log(wt*wt+kt*kt+qt*qt+he*he),d}function vi(d,G,wt){return ya(d,G),ho(d,d,wt),va(d,d),d}function Ma(d,G,wt,kt){var qt=G[0],he=G[1],me=G[2],Oe=G[3],Fe=wt[0],Ke=wt[1],gr=wt[2],Kr=wt[3],Jr,Qr,Ln,Nn,sn;return Qr=qt*Fe+he*Ke+me*gr+Oe*Kr,Qr<0&&(Qr=-Qr,Fe=-Fe,Ke=-Ke,gr=-gr,Kr=-Kr),1-Qr>p.EPSILON?(Jr=Math.acos(Qr),Ln=Math.sin(Jr),Nn=Math.sin((1-kt)*Jr)/Ln,sn=Math.sin(kt*Jr)/Ln):(Nn=1-kt,sn=kt),d[0]=Nn*qt+sn*Fe,d[1]=Nn*he+sn*Ke,d[2]=Nn*me+sn*gr,d[3]=Nn*Oe+sn*Kr,d}function oa(d){var G=p.RANDOM(),wt=p.RANDOM(),kt=p.RANDOM(),qt=Math.sqrt(1-G),he=Math.sqrt(G);return d[0]=qt*Math.sin(2*Math.PI*wt),d[1]=qt*Math.cos(2*Math.PI*wt),d[2]=he*Math.sin(2*Math.PI*kt),d[3]=he*Math.cos(2*Math.PI*kt),d}function oi(d,G){var wt=G[0],kt=G[1],qt=G[2],he=G[3],me=wt*wt+kt*kt+qt*qt+he*he,Oe=me?1/me:0;return d[0]=-wt*Oe,d[1]=-kt*Oe,d[2]=-qt*Oe,d[3]=he*Oe,d}function $a(d,G){return d[0]=-G[0],d[1]=-G[1],d[2]=-G[2],d[3]=G[3],d}function za(d,G){var wt=G[0]+G[4]+G[8],kt;if(wt>0)kt=Math.sqrt(wt+1),d[3]=.5*kt,kt=.5/kt,d[0]=(G[5]-G[7])*kt,d[1]=(G[6]-G[2])*kt,d[2]=(G[1]-G[3])*kt;else{var qt=0;G[4]>G[0]&&(qt=1),G[8]>G[qt*3+qt]&&(qt=2);var he=(qt+1)%3,me=(qt+2)%3;kt=Math.sqrt(G[qt*3+qt]-G[he*3+he]-G[me*3+me]+1),d[qt]=.5*kt,kt=.5/kt,d[3]=(G[he*3+me]-G[me*3+he])*kt,d[he]=(G[he*3+qt]+G[qt*3+he])*kt,d[me]=(G[me*3+qt]+G[qt*3+me])*kt}return d}function Ui(d,G,wt,kt){var qt=.5*Math.PI/180;G*=qt,wt*=qt,kt*=qt;var he=Math.sin(G),me=Math.cos(G),Oe=Math.sin(wt),Fe=Math.cos(wt),Ke=Math.sin(kt),gr=Math.cos(kt);return d[0]=he*Fe*gr-me*Oe*Ke,d[1]=me*Oe*gr+he*Fe*Ke,d[2]=me*Fe*Ke-he*Oe*gr,d[3]=me*Fe*gr+he*Oe*Ke,d}function di(d){return"quat("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"}var La=fe,ja=Wt,Ga=ge,bi=Ae,xi=Se,ki=cn,ho=Vn,Wi=To,Io=ga,Xo=Ni,is=Xo,$i=ti,qa=$i,Yi=Gi,oo=Po,Qa=no,Li=function(){var d=Ur.create(),G=Ur.fromValues(1,0,0),wt=Ur.fromValues(0,1,0);return function(kt,qt,he){var me=Ur.dot(qt,he);return me<-.999999?(Ur.cross(d,G,qt),Ur.len(d)<1e-6&&Ur.cross(d,wt,qt),Ur.normalize(d,d),Fr(kt,d,Math.PI),kt):me>.999999?(kt[0]=0,kt[1]=0,kt[2]=0,kt[3]=1,kt):(Ur.cross(d,qt,he),kt[0]=d[0],kt[1]=d[1],kt[2]=d[2],kt[3]=1+me,Yi(kt,kt))}}(),zo=function(){var d=Ge(),G=Ge();return function(wt,kt,qt,he,me,Oe){return Ma(d,kt,me,Oe),Ma(G,qt,he,Oe),Ma(wt,d,G,2*Oe*(1-Oe)),wt}}(),qi=function(){var d=Ze.create();return function(G,wt,kt,qt){return d[0]=kt[0],d[3]=kt[1],d[6]=kt[2],d[1]=qt[0],d[4]=qt[1],d[7]=qt[2],d[2]=-wt[0],d[5]=-wt[1],d[8]=-wt[2],Yi(G,za(G,d))}}();function ts(){var d=new p.ARRAY_TYPE(8);return p.ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[4]=0,d[5]=0,d[6]=0,d[7]=0),d[3]=1,d}function Xi(d){var G=new p.ARRAY_TYPE(8);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G[4]=d[4],G[5]=d[5],G[6]=d[6],G[7]=d[7],G}function xo(d,G,wt,kt,qt,he,me,Oe){var Fe=new p.ARRAY_TYPE(8);return Fe[0]=d,Fe[1]=G,Fe[2]=wt,Fe[3]=kt,Fe[4]=qt,Fe[5]=he,Fe[6]=me,Fe[7]=Oe,Fe}function gs(d,G,wt,kt,qt,he,me){var Oe=new p.ARRAY_TYPE(8);Oe[0]=d,Oe[1]=G,Oe[2]=wt,Oe[3]=kt;var Fe=qt*.5,Ke=he*.5,gr=me*.5;return Oe[4]=Fe*kt+Ke*wt-gr*G,Oe[5]=Ke*kt+gr*d-Fe*wt,Oe[6]=gr*kt+Fe*G-Ke*d,Oe[7]=-Fe*d-Ke*G-gr*wt,Oe}function fs(d,G,wt){var kt=wt[0]*.5,qt=wt[1]*.5,he=wt[2]*.5,me=G[0],Oe=G[1],Fe=G[2],Ke=G[3];return d[0]=me,d[1]=Oe,d[2]=Fe,d[3]=Ke,d[4]=kt*Ke+qt*Fe-he*Oe,d[5]=qt*Ke+he*me-kt*Fe,d[6]=he*Ke+kt*Oe-qt*me,d[7]=-kt*me-qt*Oe-he*Fe,d}function so(d,G){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d[4]=G[0]*.5,d[5]=G[1]*.5,d[6]=G[2]*.5,d[7]=0,d}function ss(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=0,d[5]=0,d[6]=0,d[7]=0,d}function cs(d,G){var wt=Ge();we(wt,G);var kt=new p.ARRAY_TYPE(3);return Qt(kt,G),fs(d,wt,kt),d}function _s(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=G[4],d[5]=G[5],d[6]=G[6],d[7]=G[7],d}function jo(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d[4]=0,d[5]=0,d[6]=0,d[7]=0,d}function $t(d,G,wt,kt,qt,he,me,Oe,Fe){return d[0]=G,d[1]=wt,d[2]=kt,d[3]=qt,d[4]=he,d[5]=me,d[6]=Oe,d[7]=Fe,d}var ye=Ga;function hr(d,G){return d[0]=G[4],d[1]=G[5],d[2]=G[6],d[3]=G[7],d}var Er=Ga;function nn(d,G){return d[4]=G[0],d[5]=G[1],d[6]=G[2],d[7]=G[3],d}function kn(d,G){var wt=G[4],kt=G[5],qt=G[6],he=G[7],me=-G[0],Oe=-G[1],Fe=-G[2],Ke=G[3];return d[0]=(wt*Ke+he*me+kt*Fe-qt*Oe)*2,d[1]=(kt*Ke+he*Oe+qt*me-wt*Fe)*2,d[2]=(qt*Ke+he*Fe+wt*Oe-kt*me)*2,d}function Qn(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=wt[0]*.5,Fe=wt[1]*.5,Ke=wt[2]*.5,gr=G[4],Kr=G[5],Jr=G[6],Qr=G[7];return d[0]=kt,d[1]=qt,d[2]=he,d[3]=me,d[4]=me*Oe+qt*Ke-he*Fe+gr,d[5]=me*Fe+he*Oe-kt*Ke+Kr,d[6]=me*Ke+kt*Fe-qt*Oe+Jr,d[7]=-kt*Oe-qt*Fe-he*Ke+Qr,d}function wa(d,G,wt){var kt=-G[0],qt=-G[1],he=-G[2],me=G[3],Oe=G[4],Fe=G[5],Ke=G[6],gr=G[7],Kr=Oe*me+gr*kt+Fe*he-Ke*qt,Jr=Fe*me+gr*qt+Ke*kt-Oe*he,Qr=Ke*me+gr*he+Oe*qt-Fe*kt,Ln=gr*me-Oe*kt-Fe*qt-Ke*he;return mn(d,G,wt),kt=d[0],qt=d[1],he=d[2],me=d[3],d[4]=Kr*me+Ln*kt+Jr*he-Qr*qt,d[5]=Jr*me+Ln*qt+Qr*kt-Kr*he,d[6]=Qr*me+Ln*he+Kr*qt-Jr*kt,d[7]=Ln*me-Kr*kt-Jr*qt-Qr*he,d}function Ai(d,G,wt){var kt=-G[0],qt=-G[1],he=-G[2],me=G[3],Oe=G[4],Fe=G[5],Ke=G[6],gr=G[7],Kr=Oe*me+gr*kt+Fe*he-Ke*qt,Jr=Fe*me+gr*qt+Ke*kt-Oe*he,Qr=Ke*me+gr*he+Oe*qt-Fe*kt,Ln=gr*me-Oe*kt-Fe*qt-Ke*he;return Bn(d,G,wt),kt=d[0],qt=d[1],he=d[2],me=d[3],d[4]=Kr*me+Ln*kt+Jr*he-Qr*qt,d[5]=Jr*me+Ln*qt+Qr*kt-Kr*he,d[6]=Qr*me+Ln*he+Kr*qt-Jr*kt,d[7]=Ln*me-Kr*kt-Jr*qt-Qr*he,d}function Oo(d,G,wt){var kt=-G[0],qt=-G[1],he=-G[2],me=G[3],Oe=G[4],Fe=G[5],Ke=G[6],gr=G[7],Kr=Oe*me+gr*kt+Fe*he-Ke*qt,Jr=Fe*me+gr*qt+Ke*kt-Oe*he,Qr=Ke*me+gr*he+Oe*qt-Fe*kt,Ln=gr*me-Oe*kt-Fe*qt-Ke*he;return sa(d,G,wt),kt=d[0],qt=d[1],he=d[2],me=d[3],d[4]=Kr*me+Ln*kt+Jr*he-Qr*qt,d[5]=Jr*me+Ln*qt+Qr*kt-Kr*he,d[6]=Qr*me+Ln*he+Kr*qt-Jr*kt,d[7]=Ln*me-Kr*kt-Jr*qt-Qr*he,d}function Go(d,G,wt){var kt=wt[0],qt=wt[1],he=wt[2],me=wt[3],Oe=G[0],Fe=G[1],Ke=G[2],gr=G[3];return d[0]=Oe*me+gr*kt+Fe*he-Ke*qt,d[1]=Fe*me+gr*qt+Ke*kt-Oe*he,d[2]=Ke*me+gr*he+Oe*qt-Fe*kt,d[3]=gr*me-Oe*kt-Fe*qt-Ke*he,Oe=G[4],Fe=G[5],Ke=G[6],gr=G[7],d[4]=Oe*me+gr*kt+Fe*he-Ke*qt,d[5]=Fe*me+gr*qt+Ke*kt-Oe*he,d[6]=Ke*me+gr*he+Oe*qt-Fe*kt,d[7]=gr*me-Oe*kt-Fe*qt-Ke*he,d}function Rs(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=wt[0],Fe=wt[1],Ke=wt[2],gr=wt[3];return d[0]=kt*gr+me*Oe+qt*Ke-he*Fe,d[1]=qt*gr+me*Fe+he*Oe-kt*Ke,d[2]=he*gr+me*Ke+kt*Fe-qt*Oe,d[3]=me*gr-kt*Oe-qt*Fe-he*Ke,Oe=wt[4],Fe=wt[5],Ke=wt[6],gr=wt[7],d[4]=kt*gr+me*Oe+qt*Ke-he*Fe,d[5]=qt*gr+me*Fe+he*Oe-kt*Ke,d[6]=he*gr+me*Ke+kt*Fe-qt*Oe,d[7]=me*gr-kt*Oe-qt*Fe-he*Ke,d}function Cs(d,G,wt,kt){if(Math.abs(kt)<p.EPSILON)return _s(d,G);var qt=Math.hypot(wt[0],wt[1],wt[2]);kt=kt*.5;var he=Math.sin(kt),me=he*wt[0]/qt,Oe=he*wt[1]/qt,Fe=he*wt[2]/qt,Ke=Math.cos(kt),gr=G[0],Kr=G[1],Jr=G[2],Qr=G[3];d[0]=gr*Ke+Qr*me+Kr*Fe-Jr*Oe,d[1]=Kr*Ke+Qr*Oe+Jr*me-gr*Fe,d[2]=Jr*Ke+Qr*Fe+gr*Oe-Kr*me,d[3]=Qr*Ke-gr*me-Kr*Oe-Jr*Fe;var Ln=G[4],Nn=G[5],sn=G[6],ra=G[7];return d[4]=Ln*Ke+ra*me+Nn*Fe-sn*Oe,d[5]=Nn*Ke+ra*Oe+sn*me-Ln*Fe,d[6]=sn*Ke+ra*Fe+Ln*Oe-Nn*me,d[7]=ra*Ke-Ln*me-Nn*Oe-sn*Fe,d}function ji(d,G,wt){return d[0]=G[0]+wt[0],d[1]=G[1]+wt[1],d[2]=G[2]+wt[2],d[3]=G[3]+wt[3],d[4]=G[4]+wt[4],d[5]=G[5]+wt[5],d[6]=G[6]+wt[6],d[7]=G[7]+wt[7],d}function bo(d,G,wt){var kt=G[0],qt=G[1],he=G[2],me=G[3],Oe=wt[4],Fe=wt[5],Ke=wt[6],gr=wt[7],Kr=G[4],Jr=G[5],Qr=G[6],Ln=G[7],Nn=wt[0],sn=wt[1],ra=wt[2],Ha=wt[3];return d[0]=kt*Ha+me*Nn+qt*ra-he*sn,d[1]=qt*Ha+me*sn+he*Nn-kt*ra,d[2]=he*Ha+me*ra+kt*sn-qt*Nn,d[3]=me*Ha-kt*Nn-qt*sn-he*ra,d[4]=kt*gr+me*Oe+qt*Ke-he*Fe+Kr*Ha+Ln*Nn+Jr*ra-Qr*sn,d[5]=qt*gr+me*Fe+he*Oe-kt*Ke+Jr*Ha+Ln*sn+Qr*Nn-Kr*ra,d[6]=he*gr+me*Ke+kt*Fe-qt*Oe+Qr*Ha+Ln*ra+Kr*sn-Jr*Nn,d[7]=me*gr-kt*Oe-qt*Fe-he*Ke+Ln*Ha-Kr*Nn-Jr*sn-Qr*ra,d}var ks=bo;function ls(d,G,wt){return d[0]=G[0]*wt,d[1]=G[1]*wt,d[2]=G[2]*wt,d[3]=G[3]*wt,d[4]=G[4]*wt,d[5]=G[5]*wt,d[6]=G[6]*wt,d[7]=G[7]*wt,d}var qs=Wi;function Qs(d,G,wt,kt){var qt=1-kt;return qs(G,wt)<0&&(kt=-kt),d[0]=G[0]*qt+wt[0]*kt,d[1]=G[1]*qt+wt[1]*kt,d[2]=G[2]*qt+wt[2]*kt,d[3]=G[3]*qt+wt[3]*kt,d[4]=G[4]*qt+wt[4]*kt,d[5]=G[5]*qt+wt[5]*kt,d[6]=G[6]*qt+wt[6]*kt,d[7]=G[7]*qt+wt[7]*kt,d}function Js(d,G){var wt=ms(G);return d[0]=-G[0]/wt,d[1]=-G[1]/wt,d[2]=-G[2]/wt,d[3]=G[3]/wt,d[4]=-G[4]/wt,d[5]=-G[5]/wt,d[6]=-G[6]/wt,d[7]=G[7]/wt,d}function Ws(d,G){return d[0]=-G[0],d[1]=-G[1],d[2]=-G[2],d[3]=G[3],d[4]=-G[4],d[5]=-G[5],d[6]=-G[6],d[7]=G[7],d}var Ds=Xo,Bs=Ds,ms=$i,es=ms;function Tu(d,G){var wt=ms(G);if(wt>0){wt=Math.sqrt(wt);var kt=G[0]/wt,qt=G[1]/wt,he=G[2]/wt,me=G[3]/wt,Oe=G[4],Fe=G[5],Ke=G[6],gr=G[7],Kr=kt*Oe+qt*Fe+he*Ke+me*gr;d[0]=kt,d[1]=qt,d[2]=he,d[3]=me,d[4]=(Oe-kt*Kr)/wt,d[5]=(Fe-qt*Kr)/wt,d[6]=(Ke-he*Kr)/wt,d[7]=(gr-me*Kr)/wt}return d}function Au(d){return"quat2("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+")"}function Uo(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]&&d[4]===G[4]&&d[5]===G[5]&&d[6]===G[6]&&d[7]===G[7]}function Eo(d,G){var wt=d[0],kt=d[1],qt=d[2],he=d[3],me=d[4],Oe=d[5],Fe=d[6],Ke=d[7],gr=G[0],Kr=G[1],Jr=G[2],Qr=G[3],Ln=G[4],Nn=G[5],sn=G[6],ra=G[7];return Math.abs(wt-gr)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(gr))&&Math.abs(kt-Kr)<=p.EPSILON*Math.max(1,Math.abs(kt),Math.abs(Kr))&&Math.abs(qt-Jr)<=p.EPSILON*Math.max(1,Math.abs(qt),Math.abs(Jr))&&Math.abs(he-Qr)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(Qr))&&Math.abs(me-Ln)<=p.EPSILON*Math.max(1,Math.abs(me),Math.abs(Ln))&&Math.abs(Oe-Nn)<=p.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Nn))&&Math.abs(Fe-sn)<=p.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(sn))&&Math.abs(Ke-ra)<=p.EPSILON*Math.max(1,Math.abs(Ke),Math.abs(ra))}var os=C(631437)},935600:function(He,z,C){"use strict";C.r(z),C.d(z,{add:function(){return J},adjoint:function(){return g},clone:function(){return T},copy:function(){return L},create:function(){return k},determinant:function(){return O},equals:function(){return zt},exactEquals:function(){return gt},frob:function(){return Q},fromMat2d:function(){return U},fromMat4:function(){return w},fromQuat:function(){return Y},fromRotation:function(){return h},fromScaling:function(){return K},fromTranslation:function(){return b},fromValues:function(){return P},identity:function(){return m},invert:function(){return y},mul:function(){return Mt},multiply:function(){return E},multiplyScalar:function(){return nt},multiplyScalarAndAdd:function(){return yt},normalFromMat4:function(){return Z},projection:function(){return H},rotate:function(){return F},scale:function(){return W},set:function(){return p},str:function(){return q},sub:function(){return Ct},subtract:function(){return ft},translate:function(){return D},transpose:function(){return S}});var x=C(73633);function k(){var rt=new x.ARRAY_TYPE(9);return x.ARRAY_TYPE!=Float32Array&&(rt[1]=0,rt[2]=0,rt[3]=0,rt[5]=0,rt[6]=0,rt[7]=0),rt[0]=1,rt[4]=1,rt[8]=1,rt}function w(rt,ot){return rt[0]=ot[0],rt[1]=ot[1],rt[2]=ot[2],rt[3]=ot[4],rt[4]=ot[5],rt[5]=ot[6],rt[6]=ot[8],rt[7]=ot[9],rt[8]=ot[10],rt}function T(rt){var ot=new x.ARRAY_TYPE(9);return ot[0]=rt[0],ot[1]=rt[1],ot[2]=rt[2],ot[3]=rt[3],ot[4]=rt[4],ot[5]=rt[5],ot[6]=rt[6],ot[7]=rt[7],ot[8]=rt[8],ot}function L(rt,ot){return rt[0]=ot[0],rt[1]=ot[1],rt[2]=ot[2],rt[3]=ot[3],rt[4]=ot[4],rt[5]=ot[5],rt[6]=ot[6],rt[7]=ot[7],rt[8]=ot[8],rt}function P(rt,ot,Tt,Rt,st,bt,Ft,Ht,_t){var Xt=new x.ARRAY_TYPE(9);return Xt[0]=rt,Xt[1]=ot,Xt[2]=Tt,Xt[3]=Rt,Xt[4]=st,Xt[5]=bt,Xt[6]=Ft,Xt[7]=Ht,Xt[8]=_t,Xt}function p(rt,ot,Tt,Rt,st,bt,Ft,Ht,_t,Xt){return rt[0]=ot,rt[1]=Tt,rt[2]=Rt,rt[3]=st,rt[4]=bt,rt[5]=Ft,rt[6]=Ht,rt[7]=_t,rt[8]=Xt,rt}function m(rt){return rt[0]=1,rt[1]=0,rt[2]=0,rt[3]=0,rt[4]=1,rt[5]=0,rt[6]=0,rt[7]=0,rt[8]=1,rt}function S(rt,ot){if(rt===ot){var Tt=ot[1],Rt=ot[2],st=ot[5];rt[1]=ot[3],rt[2]=ot[6],rt[3]=Tt,rt[5]=ot[7],rt[6]=Rt,rt[7]=st}else rt[0]=ot[0],rt[1]=ot[3],rt[2]=ot[6],rt[3]=ot[1],rt[4]=ot[4],rt[5]=ot[7],rt[6]=ot[2],rt[7]=ot[5],rt[8]=ot[8];return rt}function y(rt,ot){var Tt=ot[0],Rt=ot[1],st=ot[2],bt=ot[3],Ft=ot[4],Ht=ot[5],_t=ot[6],Xt=ot[7],ee=ot[8],se=ee*Ft-Ht*Xt,ue=-ee*bt+Ht*_t,Ut=Xt*bt-Ft*_t,oe=Tt*se+Rt*ue+st*Ut;return oe?(oe=1/oe,rt[0]=se*oe,rt[1]=(-ee*Rt+st*Xt)*oe,rt[2]=(Ht*Rt-st*Ft)*oe,rt[3]=ue*oe,rt[4]=(ee*Tt-st*_t)*oe,rt[5]=(-Ht*Tt+st*bt)*oe,rt[6]=Ut*oe,rt[7]=(-Xt*Tt+Rt*_t)*oe,rt[8]=(Ft*Tt-Rt*bt)*oe,rt):null}function g(rt,ot){var Tt=ot[0],Rt=ot[1],st=ot[2],bt=ot[3],Ft=ot[4],Ht=ot[5],_t=ot[6],Xt=ot[7],ee=ot[8];return rt[0]=Ft*ee-Ht*Xt,rt[1]=st*Xt-Rt*ee,rt[2]=Rt*Ht-st*Ft,rt[3]=Ht*_t-bt*ee,rt[4]=Tt*ee-st*_t,rt[5]=st*bt-Tt*Ht,rt[6]=bt*Xt-Ft*_t,rt[7]=Rt*_t-Tt*Xt,rt[8]=Tt*Ft-Rt*bt,rt}function O(rt){var ot=rt[0],Tt=rt[1],Rt=rt[2],st=rt[3],bt=rt[4],Ft=rt[5],Ht=rt[6],_t=rt[7],Xt=rt[8];return ot*(Xt*bt-Ft*_t)+Tt*(-Xt*st+Ft*Ht)+Rt*(_t*st-bt*Ht)}function E(rt,ot,Tt){var Rt=ot[0],st=ot[1],bt=ot[2],Ft=ot[3],Ht=ot[4],_t=ot[5],Xt=ot[6],ee=ot[7],se=ot[8],ue=Tt[0],Ut=Tt[1],oe=Tt[2],Pe=Tt[3],te=Tt[4],ve=Tt[5],Ue=Tt[6],xe=Tt[7],Re=Tt[8];return rt[0]=ue*Rt+Ut*Ft+oe*Xt,rt[1]=ue*st+Ut*Ht+oe*ee,rt[2]=ue*bt+Ut*_t+oe*se,rt[3]=Pe*Rt+te*Ft+ve*Xt,rt[4]=Pe*st+te*Ht+ve*ee,rt[5]=Pe*bt+te*_t+ve*se,rt[6]=Ue*Rt+xe*Ft+Re*Xt,rt[7]=Ue*st+xe*Ht+Re*ee,rt[8]=Ue*bt+xe*_t+Re*se,rt}function D(rt,ot,Tt){var Rt=ot[0],st=ot[1],bt=ot[2],Ft=ot[3],Ht=ot[4],_t=ot[5],Xt=ot[6],ee=ot[7],se=ot[8],ue=Tt[0],Ut=Tt[1];return rt[0]=Rt,rt[1]=st,rt[2]=bt,rt[3]=Ft,rt[4]=Ht,rt[5]=_t,rt[6]=ue*Rt+Ut*Ft+Xt,rt[7]=ue*st+Ut*Ht+ee,rt[8]=ue*bt+Ut*_t+se,rt}function F(rt,ot,Tt){var Rt=ot[0],st=ot[1],bt=ot[2],Ft=ot[3],Ht=ot[4],_t=ot[5],Xt=ot[6],ee=ot[7],se=ot[8],ue=Math.sin(Tt),Ut=Math.cos(Tt);return rt[0]=Ut*Rt+ue*Ft,rt[1]=Ut*st+ue*Ht,rt[2]=Ut*bt+ue*_t,rt[3]=Ut*Ft-ue*Rt,rt[4]=Ut*Ht-ue*st,rt[5]=Ut*_t-ue*bt,rt[6]=Xt,rt[7]=ee,rt[8]=se,rt}function W(rt,ot,Tt){var Rt=Tt[0],st=Tt[1];return rt[0]=Rt*ot[0],rt[1]=Rt*ot[1],rt[2]=Rt*ot[2],rt[3]=st*ot[3],rt[4]=st*ot[4],rt[5]=st*ot[5],rt[6]=ot[6],rt[7]=ot[7],rt[8]=ot[8],rt}function b(rt,ot){return rt[0]=1,rt[1]=0,rt[2]=0,rt[3]=0,rt[4]=1,rt[5]=0,rt[6]=ot[0],rt[7]=ot[1],rt[8]=1,rt}function h(rt,ot){var Tt=Math.sin(ot),Rt=Math.cos(ot);return rt[0]=Rt,rt[1]=Tt,rt[2]=0,rt[3]=-Tt,rt[4]=Rt,rt[5]=0,rt[6]=0,rt[7]=0,rt[8]=1,rt}function K(rt,ot){return rt[0]=ot[0],rt[1]=0,rt[2]=0,rt[3]=0,rt[4]=ot[1],rt[5]=0,rt[6]=0,rt[7]=0,rt[8]=1,rt}function U(rt,ot){return rt[0]=ot[0],rt[1]=ot[1],rt[2]=0,rt[3]=ot[2],rt[4]=ot[3],rt[5]=0,rt[6]=ot[4],rt[7]=ot[5],rt[8]=1,rt}function Y(rt,ot){var Tt=ot[0],Rt=ot[1],st=ot[2],bt=ot[3],Ft=Tt+Tt,Ht=Rt+Rt,_t=st+st,Xt=Tt*Ft,ee=Rt*Ft,se=Rt*Ht,ue=st*Ft,Ut=st*Ht,oe=st*_t,Pe=bt*Ft,te=bt*Ht,ve=bt*_t;return rt[0]=1-se-oe,rt[3]=ee-ve,rt[6]=ue+te,rt[1]=ee+ve,rt[4]=1-Xt-oe,rt[7]=Ut-Pe,rt[2]=ue-te,rt[5]=Ut+Pe,rt[8]=1-Xt-se,rt}function Z(rt,ot){var Tt=ot[0],Rt=ot[1],st=ot[2],bt=ot[3],Ft=ot[4],Ht=ot[5],_t=ot[6],Xt=ot[7],ee=ot[8],se=ot[9],ue=ot[10],Ut=ot[11],oe=ot[12],Pe=ot[13],te=ot[14],ve=ot[15],Ue=Tt*Ht-Rt*Ft,xe=Tt*_t-st*Ft,Re=Tt*Xt-bt*Ft,de=Rt*_t-st*Ht,ht=Rt*Xt-bt*Ht,ae=st*Xt-bt*_t,Le=ee*Pe-se*oe,Ze=ee*te-ue*oe,qe=ee*ve-Ut*oe,fr=se*te-ue*Pe,ur=se*ve-Ut*Pe,kr=ue*ve-Ut*te,yn=Ue*kr-xe*ur+Re*fr+de*qe-ht*Ze+ae*Le;return yn?(yn=1/yn,rt[0]=(Ht*kr-_t*ur+Xt*fr)*yn,rt[1]=(_t*qe-Ft*kr-Xt*Ze)*yn,rt[2]=(Ft*ur-Ht*qe+Xt*Le)*yn,rt[3]=(st*ur-Rt*kr-bt*fr)*yn,rt[4]=(Tt*kr-st*qe+bt*Ze)*yn,rt[5]=(Rt*qe-Tt*ur-bt*Le)*yn,rt[6]=(Pe*ae-te*ht+ve*de)*yn,rt[7]=(te*Re-oe*ae-ve*xe)*yn,rt[8]=(oe*ht-Pe*Re+ve*Ue)*yn,rt):null}function H(rt,ot,Tt){return rt[0]=2/ot,rt[1]=0,rt[2]=0,rt[3]=0,rt[4]=-2/Tt,rt[5]=0,rt[6]=-1,rt[7]=1,rt[8]=1,rt}function q(rt){return"mat3("+rt[0]+", "+rt[1]+", "+rt[2]+", "+rt[3]+", "+rt[4]+", "+rt[5]+", "+rt[6]+", "+rt[7]+", "+rt[8]+")"}function Q(rt){return Math.hypot(rt[0],rt[1],rt[2],rt[3],rt[4],rt[5],rt[6],rt[7],rt[8])}function J(rt,ot,Tt){return rt[0]=ot[0]+Tt[0],rt[1]=ot[1]+Tt[1],rt[2]=ot[2]+Tt[2],rt[3]=ot[3]+Tt[3],rt[4]=ot[4]+Tt[4],rt[5]=ot[5]+Tt[5],rt[6]=ot[6]+Tt[6],rt[7]=ot[7]+Tt[7],rt[8]=ot[8]+Tt[8],rt}function ft(rt,ot,Tt){return rt[0]=ot[0]-Tt[0],rt[1]=ot[1]-Tt[1],rt[2]=ot[2]-Tt[2],rt[3]=ot[3]-Tt[3],rt[4]=ot[4]-Tt[4],rt[5]=ot[5]-Tt[5],rt[6]=ot[6]-Tt[6],rt[7]=ot[7]-Tt[7],rt[8]=ot[8]-Tt[8],rt}function nt(rt,ot,Tt){return rt[0]=ot[0]*Tt,rt[1]=ot[1]*Tt,rt[2]=ot[2]*Tt,rt[3]=ot[3]*Tt,rt[4]=ot[4]*Tt,rt[5]=ot[5]*Tt,rt[6]=ot[6]*Tt,rt[7]=ot[7]*Tt,rt[8]=ot[8]*Tt,rt}function yt(rt,ot,Tt,Rt){return rt[0]=ot[0]+Tt[0]*Rt,rt[1]=ot[1]+Tt[1]*Rt,rt[2]=ot[2]+Tt[2]*Rt,rt[3]=ot[3]+Tt[3]*Rt,rt[4]=ot[4]+Tt[4]*Rt,rt[5]=ot[5]+Tt[5]*Rt,rt[6]=ot[6]+Tt[6]*Rt,rt[7]=ot[7]+Tt[7]*Rt,rt[8]=ot[8]+Tt[8]*Rt,rt}function gt(rt,ot){return rt[0]===ot[0]&&rt[1]===ot[1]&&rt[2]===ot[2]&&rt[3]===ot[3]&&rt[4]===ot[4]&&rt[5]===ot[5]&&rt[6]===ot[6]&&rt[7]===ot[7]&&rt[8]===ot[8]}function zt(rt,ot){var Tt=rt[0],Rt=rt[1],st=rt[2],bt=rt[3],Ft=rt[4],Ht=rt[5],_t=rt[6],Xt=rt[7],ee=rt[8],se=ot[0],ue=ot[1],Ut=ot[2],oe=ot[3],Pe=ot[4],te=ot[5],ve=ot[6],Ue=ot[7],xe=ot[8];return Math.abs(Tt-se)<=x.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(se))&&Math.abs(Rt-ue)<=x.EPSILON*Math.max(1,Math.abs(Rt),Math.abs(ue))&&Math.abs(st-Ut)<=x.EPSILON*Math.max(1,Math.abs(st),Math.abs(Ut))&&Math.abs(bt-oe)<=x.EPSILON*Math.max(1,Math.abs(bt),Math.abs(oe))&&Math.abs(Ft-Pe)<=x.EPSILON*Math.max(1,Math.abs(Ft),Math.abs(Pe))&&Math.abs(Ht-te)<=x.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(te))&&Math.abs(_t-ve)<=x.EPSILON*Math.max(1,Math.abs(_t),Math.abs(ve))&&Math.abs(Xt-Ue)<=x.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Ue))&&Math.abs(ee-xe)<=x.EPSILON*Math.max(1,Math.abs(ee),Math.abs(xe))}var Mt=E,Ct=ft},631437:function(He,z,C){"use strict";C.r(z),C.d(z,{add:function(){return p},angle:function(){return rt},ceil:function(){return g},clone:function(){return w},copy:function(){return L},create:function(){return k},cross:function(){return J},dist:function(){return Xt},distance:function(){return h},div:function(){return _t},divide:function(){return y},dot:function(){return Q},equals:function(){return st},exactEquals:function(){return Rt},floor:function(){return O},forEach:function(){return ue},fromValues:function(){return T},inverse:function(){return H},len:function(){return bt},length:function(){return U},lerp:function(){return ft},max:function(){return D},min:function(){return E},mul:function(){return Ht},multiply:function(){return S},negate:function(){return Z},normalize:function(){return q},random:function(){return nt},rotate:function(){return Ct},round:function(){return F},scale:function(){return W},scaleAndAdd:function(){return b},set:function(){return P},sqrDist:function(){return ee},sqrLen:function(){return se},squaredDistance:function(){return K},squaredLength:function(){return Y},str:function(){return Tt},sub:function(){return Ft},subtract:function(){return m},transformMat2:function(){return yt},transformMat2d:function(){return gt},transformMat3:function(){return zt},transformMat4:function(){return Mt},zero:function(){return ot}});var x=C(73633);function k(){var Ut=new x.ARRAY_TYPE(2);return x.ARRAY_TYPE!=Float32Array&&(Ut[0]=0,Ut[1]=0),Ut}function w(Ut){var oe=new x.ARRAY_TYPE(2);return oe[0]=Ut[0],oe[1]=Ut[1],oe}function T(Ut,oe){var Pe=new x.ARRAY_TYPE(2);return Pe[0]=Ut,Pe[1]=oe,Pe}function L(Ut,oe){return Ut[0]=oe[0],Ut[1]=oe[1],Ut}function P(Ut,oe,Pe){return Ut[0]=oe,Ut[1]=Pe,Ut}function p(Ut,oe,Pe){return Ut[0]=oe[0]+Pe[0],Ut[1]=oe[1]+Pe[1],Ut}function m(Ut,oe,Pe){return Ut[0]=oe[0]-Pe[0],Ut[1]=oe[1]-Pe[1],Ut}function S(Ut,oe,Pe){return Ut[0]=oe[0]*Pe[0],Ut[1]=oe[1]*Pe[1],Ut}function y(Ut,oe,Pe){return Ut[0]=oe[0]/Pe[0],Ut[1]=oe[1]/Pe[1],Ut}function g(Ut,oe){return Ut[0]=Math.ceil(oe[0]),Ut[1]=Math.ceil(oe[1]),Ut}function O(Ut,oe){return Ut[0]=Math.floor(oe[0]),Ut[1]=Math.floor(oe[1]),Ut}function E(Ut,oe,Pe){return Ut[0]=Math.min(oe[0],Pe[0]),Ut[1]=Math.min(oe[1],Pe[1]),Ut}function D(Ut,oe,Pe){return Ut[0]=Math.max(oe[0],Pe[0]),Ut[1]=Math.max(oe[1],Pe[1]),Ut}function F(Ut,oe){return Ut[0]=Math.round(oe[0]),Ut[1]=Math.round(oe[1]),Ut}function W(Ut,oe,Pe){return Ut[0]=oe[0]*Pe,Ut[1]=oe[1]*Pe,Ut}function b(Ut,oe,Pe,te){return Ut[0]=oe[0]+Pe[0]*te,Ut[1]=oe[1]+Pe[1]*te,Ut}function h(Ut,oe){var Pe=oe[0]-Ut[0],te=oe[1]-Ut[1];return Math.hypot(Pe,te)}function K(Ut,oe){var Pe=oe[0]-Ut[0],te=oe[1]-Ut[1];return Pe*Pe+te*te}function U(Ut){var oe=Ut[0],Pe=Ut[1];return Math.hypot(oe,Pe)}function Y(Ut){var oe=Ut[0],Pe=Ut[1];return oe*oe+Pe*Pe}function Z(Ut,oe){return Ut[0]=-oe[0],Ut[1]=-oe[1],Ut}function H(Ut,oe){return Ut[0]=1/oe[0],Ut[1]=1/oe[1],Ut}function q(Ut,oe){var Pe=oe[0],te=oe[1],ve=Pe*Pe+te*te;return ve>0&&(ve=1/Math.sqrt(ve)),Ut[0]=oe[0]*ve,Ut[1]=oe[1]*ve,Ut}function Q(Ut,oe){return Ut[0]*oe[0]+Ut[1]*oe[1]}function J(Ut,oe,Pe){var te=oe[0]*Pe[1]-oe[1]*Pe[0];return Ut[0]=Ut[1]=0,Ut[2]=te,Ut}function ft(Ut,oe,Pe,te){var ve=oe[0],Ue=oe[1];return Ut[0]=ve+te*(Pe[0]-ve),Ut[1]=Ue+te*(Pe[1]-Ue),Ut}function nt(Ut,oe){oe=oe||1;var Pe=x.RANDOM()*2*Math.PI;return Ut[0]=Math.cos(Pe)*oe,Ut[1]=Math.sin(Pe)*oe,Ut}function yt(Ut,oe,Pe){var te=oe[0],ve=oe[1];return Ut[0]=Pe[0]*te+Pe[2]*ve,Ut[1]=Pe[1]*te+Pe[3]*ve,Ut}function gt(Ut,oe,Pe){var te=oe[0],ve=oe[1];return Ut[0]=Pe[0]*te+Pe[2]*ve+Pe[4],Ut[1]=Pe[1]*te+Pe[3]*ve+Pe[5],Ut}function zt(Ut,oe,Pe){var te=oe[0],ve=oe[1];return Ut[0]=Pe[0]*te+Pe[3]*ve+Pe[6],Ut[1]=Pe[1]*te+Pe[4]*ve+Pe[7],Ut}function Mt(Ut,oe,Pe){var te=oe[0],ve=oe[1];return Ut[0]=Pe[0]*te+Pe[4]*ve+Pe[12],Ut[1]=Pe[1]*te+Pe[5]*ve+Pe[13],Ut}function Ct(Ut,oe,Pe,te){var ve=oe[0]-Pe[0],Ue=oe[1]-Pe[1],xe=Math.sin(te),Re=Math.cos(te);return Ut[0]=ve*Re-Ue*xe+Pe[0],Ut[1]=ve*xe+Ue*Re+Pe[1],Ut}function rt(Ut,oe){var Pe=Ut[0],te=Ut[1],ve=oe[0],Ue=oe[1],xe=Math.sqrt(Pe*Pe+te*te)*Math.sqrt(ve*ve+Ue*Ue),Re=xe&&(Pe*ve+te*Ue)/xe;return Math.acos(Math.min(Math.max(Re,-1),1))}function ot(Ut){return Ut[0]=0,Ut[1]=0,Ut}function Tt(Ut){return"vec2("+Ut[0]+", "+Ut[1]+")"}function Rt(Ut,oe){return Ut[0]===oe[0]&&Ut[1]===oe[1]}function st(Ut,oe){var Pe=Ut[0],te=Ut[1],ve=oe[0],Ue=oe[1];return Math.abs(Pe-ve)<=x.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(ve))&&Math.abs(te-Ue)<=x.EPSILON*Math.max(1,Math.abs(te),Math.abs(Ue))}var bt=U,Ft=m,Ht=S,_t=y,Xt=h,ee=K,se=Y,ue=function(){var Ut=k();return function(oe,Pe,te,ve,Ue,xe){var Re,de;for(Pe||(Pe=2),te||(te=0),ve?de=Math.min(ve*Pe+te,oe.length):de=oe.length,Re=te;Re<de;Re+=Pe)Ut[0]=oe[Re],Ut[1]=oe[Re+1],Ue(Ut,Ut,xe),oe[Re]=Ut[0],oe[Re+1]=Ut[1];return oe}}()},277160:function(He,z,C){"use strict";C.r(z),C.d(z,{add:function(){return m},angle:function(){return Rt},bezier:function(){return yt},ceil:function(){return O},clone:function(){return w},copy:function(){return P},create:function(){return k},cross:function(){return J},dist:function(){return se},distance:function(){return K},div:function(){return ee},divide:function(){return g},dot:function(){return Q},equals:function(){return Ht},exactEquals:function(){return Ft},floor:function(){return E},forEach:function(){return Pe},fromValues:function(){return L},hermite:function(){return nt},inverse:function(){return H},len:function(){return Ut},length:function(){return T},lerp:function(){return ft},max:function(){return F},min:function(){return D},mul:function(){return Xt},multiply:function(){return y},negate:function(){return Z},normalize:function(){return q},random:function(){return gt},rotateX:function(){return rt},rotateY:function(){return ot},rotateZ:function(){return Tt},round:function(){return W},scale:function(){return b},scaleAndAdd:function(){return h},set:function(){return p},sqrDist:function(){return ue},sqrLen:function(){return oe},squaredDistance:function(){return U},squaredLength:function(){return Y},str:function(){return bt},sub:function(){return _t},subtract:function(){return S},transformMat3:function(){return Mt},transformMat4:function(){return zt},transformQuat:function(){return Ct},zero:function(){return st}});var x=C(73633);function k(){var te=new x.ARRAY_TYPE(3);return x.ARRAY_TYPE!=Float32Array&&(te[0]=0,te[1]=0,te[2]=0),te}function w(te){var ve=new x.ARRAY_TYPE(3);return ve[0]=te[0],ve[1]=te[1],ve[2]=te[2],ve}function T(te){var ve=te[0],Ue=te[1],xe=te[2];return Math.hypot(ve,Ue,xe)}function L(te,ve,Ue){var xe=new x.ARRAY_TYPE(3);return xe[0]=te,xe[1]=ve,xe[2]=Ue,xe}function P(te,ve){return te[0]=ve[0],te[1]=ve[1],te[2]=ve[2],te}function p(te,ve,Ue,xe){return te[0]=ve,te[1]=Ue,te[2]=xe,te}function m(te,ve,Ue){return te[0]=ve[0]+Ue[0],te[1]=ve[1]+Ue[1],te[2]=ve[2]+Ue[2],te}function S(te,ve,Ue){return te[0]=ve[0]-Ue[0],te[1]=ve[1]-Ue[1],te[2]=ve[2]-Ue[2],te}function y(te,ve,Ue){return te[0]=ve[0]*Ue[0],te[1]=ve[1]*Ue[1],te[2]=ve[2]*Ue[2],te}function g(te,ve,Ue){return te[0]=ve[0]/Ue[0],te[1]=ve[1]/Ue[1],te[2]=ve[2]/Ue[2],te}function O(te,ve){return te[0]=Math.ceil(ve[0]),te[1]=Math.ceil(ve[1]),te[2]=Math.ceil(ve[2]),te}function E(te,ve){return te[0]=Math.floor(ve[0]),te[1]=Math.floor(ve[1]),te[2]=Math.floor(ve[2]),te}function D(te,ve,Ue){return te[0]=Math.min(ve[0],Ue[0]),te[1]=Math.min(ve[1],Ue[1]),te[2]=Math.min(ve[2],Ue[2]),te}function F(te,ve,Ue){return te[0]=Math.max(ve[0],Ue[0]),te[1]=Math.max(ve[1],Ue[1]),te[2]=Math.max(ve[2],Ue[2]),te}function W(te,ve){return te[0]=Math.round(ve[0]),te[1]=Math.round(ve[1]),te[2]=Math.round(ve[2]),te}function b(te,ve,Ue){return te[0]=ve[0]*Ue,te[1]=ve[1]*Ue,te[2]=ve[2]*Ue,te}function h(te,ve,Ue,xe){return te[0]=ve[0]+Ue[0]*xe,te[1]=ve[1]+Ue[1]*xe,te[2]=ve[2]+Ue[2]*xe,te}function K(te,ve){var Ue=ve[0]-te[0],xe=ve[1]-te[1],Re=ve[2]-te[2];return Math.hypot(Ue,xe,Re)}function U(te,ve){var Ue=ve[0]-te[0],xe=ve[1]-te[1],Re=ve[2]-te[2];return Ue*Ue+xe*xe+Re*Re}function Y(te){var ve=te[0],Ue=te[1],xe=te[2];return ve*ve+Ue*Ue+xe*xe}function Z(te,ve){return te[0]=-ve[0],te[1]=-ve[1],te[2]=-ve[2],te}function H(te,ve){return te[0]=1/ve[0],te[1]=1/ve[1],te[2]=1/ve[2],te}function q(te,ve){var Ue=ve[0],xe=ve[1],Re=ve[2],de=Ue*Ue+xe*xe+Re*Re;return de>0&&(de=1/Math.sqrt(de)),te[0]=ve[0]*de,te[1]=ve[1]*de,te[2]=ve[2]*de,te}function Q(te,ve){return te[0]*ve[0]+te[1]*ve[1]+te[2]*ve[2]}function J(te,ve,Ue){var xe=ve[0],Re=ve[1],de=ve[2],ht=Ue[0],ae=Ue[1],Le=Ue[2];return te[0]=Re*Le-de*ae,te[1]=de*ht-xe*Le,te[2]=xe*ae-Re*ht,te}function ft(te,ve,Ue,xe){var Re=ve[0],de=ve[1],ht=ve[2];return te[0]=Re+xe*(Ue[0]-Re),te[1]=de+xe*(Ue[1]-de),te[2]=ht+xe*(Ue[2]-ht),te}function nt(te,ve,Ue,xe,Re,de){var ht=de*de,ae=ht*(2*de-3)+1,Le=ht*(de-2)+de,Ze=ht*(de-1),qe=ht*(3-2*de);return te[0]=ve[0]*ae+Ue[0]*Le+xe[0]*Ze+Re[0]*qe,te[1]=ve[1]*ae+Ue[1]*Le+xe[1]*Ze+Re[1]*qe,te[2]=ve[2]*ae+Ue[2]*Le+xe[2]*Ze+Re[2]*qe,te}function yt(te,ve,Ue,xe,Re,de){var ht=1-de,ae=ht*ht,Le=de*de,Ze=ae*ht,qe=3*de*ae,fr=3*Le*ht,ur=Le*de;return te[0]=ve[0]*Ze+Ue[0]*qe+xe[0]*fr+Re[0]*ur,te[1]=ve[1]*Ze+Ue[1]*qe+xe[1]*fr+Re[1]*ur,te[2]=ve[2]*Ze+Ue[2]*qe+xe[2]*fr+Re[2]*ur,te}function gt(te,ve){ve=ve||1;var Ue=x.RANDOM()*2*Math.PI,xe=x.RANDOM()*2-1,Re=Math.sqrt(1-xe*xe)*ve;return te[0]=Math.cos(Ue)*Re,te[1]=Math.sin(Ue)*Re,te[2]=xe*ve,te}function zt(te,ve,Ue){var xe=ve[0],Re=ve[1],de=ve[2],ht=Ue[3]*xe+Ue[7]*Re+Ue[11]*de+Ue[15];return ht=ht||1,te[0]=(Ue[0]*xe+Ue[4]*Re+Ue[8]*de+Ue[12])/ht,te[1]=(Ue[1]*xe+Ue[5]*Re+Ue[9]*de+Ue[13])/ht,te[2]=(Ue[2]*xe+Ue[6]*Re+Ue[10]*de+Ue[14])/ht,te}function Mt(te,ve,Ue){var xe=ve[0],Re=ve[1],de=ve[2];return te[0]=xe*Ue[0]+Re*Ue[3]+de*Ue[6],te[1]=xe*Ue[1]+Re*Ue[4]+de*Ue[7],te[2]=xe*Ue[2]+Re*Ue[5]+de*Ue[8],te}function Ct(te,ve,Ue){var xe=Ue[0],Re=Ue[1],de=Ue[2],ht=Ue[3],ae=ve[0],Le=ve[1],Ze=ve[2],qe=Re*Ze-de*Le,fr=de*ae-xe*Ze,ur=xe*Le-Re*ae,kr=Re*ur-de*fr,yn=de*qe-xe*ur,un=xe*fr-Re*qe,Vr=ht*2;return qe*=Vr,fr*=Vr,ur*=Vr,kr*=2,yn*=2,un*=2,te[0]=ae+qe+kr,te[1]=Le+fr+yn,te[2]=Ze+ur+un,te}function rt(te,ve,Ue,xe){var Re=[],de=[];return Re[0]=ve[0]-Ue[0],Re[1]=ve[1]-Ue[1],Re[2]=ve[2]-Ue[2],de[0]=Re[0],de[1]=Re[1]*Math.cos(xe)-Re[2]*Math.sin(xe),de[2]=Re[1]*Math.sin(xe)+Re[2]*Math.cos(xe),te[0]=de[0]+Ue[0],te[1]=de[1]+Ue[1],te[2]=de[2]+Ue[2],te}function ot(te,ve,Ue,xe){var Re=[],de=[];return Re[0]=ve[0]-Ue[0],Re[1]=ve[1]-Ue[1],Re[2]=ve[2]-Ue[2],de[0]=Re[2]*Math.sin(xe)+Re[0]*Math.cos(xe),de[1]=Re[1],de[2]=Re[2]*Math.cos(xe)-Re[0]*Math.sin(xe),te[0]=de[0]+Ue[0],te[1]=de[1]+Ue[1],te[2]=de[2]+Ue[2],te}function Tt(te,ve,Ue,xe){var Re=[],de=[];return Re[0]=ve[0]-Ue[0],Re[1]=ve[1]-Ue[1],Re[2]=ve[2]-Ue[2],de[0]=Re[0]*Math.cos(xe)-Re[1]*Math.sin(xe),de[1]=Re[0]*Math.sin(xe)+Re[1]*Math.cos(xe),de[2]=Re[2],te[0]=de[0]+Ue[0],te[1]=de[1]+Ue[1],te[2]=de[2]+Ue[2],te}function Rt(te,ve){var Ue=te[0],xe=te[1],Re=te[2],de=ve[0],ht=ve[1],ae=ve[2],Le=Math.sqrt(Ue*Ue+xe*xe+Re*Re),Ze=Math.sqrt(de*de+ht*ht+ae*ae),qe=Le*Ze,fr=qe&&Q(te,ve)/qe;return Math.acos(Math.min(Math.max(fr,-1),1))}function st(te){return te[0]=0,te[1]=0,te[2]=0,te}function bt(te){return"vec3("+te[0]+", "+te[1]+", "+te[2]+")"}function Ft(te,ve){return te[0]===ve[0]&&te[1]===ve[1]&&te[2]===ve[2]}function Ht(te,ve){var Ue=te[0],xe=te[1],Re=te[2],de=ve[0],ht=ve[1],ae=ve[2];return Math.abs(Ue-de)<=x.EPSILON*Math.max(1,Math.abs(Ue),Math.abs(de))&&Math.abs(xe-ht)<=x.EPSILON*Math.max(1,Math.abs(xe),Math.abs(ht))&&Math.abs(Re-ae)<=x.EPSILON*Math.max(1,Math.abs(Re),Math.abs(ae))}var _t=S,Xt=y,ee=g,se=K,ue=U,Ut=T,oe=Y,Pe=function(){var te=k();return function(ve,Ue,xe,Re,de,ht){var ae,Le;for(Ue||(Ue=3),xe||(xe=0),Re?Le=Math.min(Re*Ue+xe,ve.length):Le=ve.length,ae=xe;ae<Le;ae+=Ue)te[0]=ve[ae],te[1]=ve[ae+1],te[2]=ve[ae+2],de(te,te,ht),ve[ae]=te[0],ve[ae+1]=te[1],ve[ae+2]=te[2];return ve}}()},738186:function(He){var z=[],C=[],x="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function k(T,L){if(L=L||{},T===void 0)throw new Error(x);var P=L.prepend===!0?"prepend":"append",p=L.container!==void 0?L.container:document.querySelector("head"),m=z.indexOf(p);m===-1&&(m=z.push(p)-1,C[m]={});var S;return C[m]!==void 0&&C[m][P]!==void 0?S=C[m][P]:(S=C[m][P]=w(),P==="prepend"?p.insertBefore(S,p.childNodes[0]):p.appendChild(S)),T.charCodeAt(0)===65279&&(T=T.substr(1,T.length)),S.styleSheet?S.styleSheet.cssText+=T:S.textContent+=T,S}function w(){var T=document.createElement("style");return T.setAttribute("type","text/css"),T}He.exports=k,He.exports.insertCss=k},896874:function(He){function z(C,x,k){switch(k.length){case 0:return C.call(x);case 1:return C.call(x,k[0]);case 2:return C.call(x,k[0],k[1]);case 3:return C.call(x,k[0],k[1],k[2])}return C.apply(x,k)}He.exports=z},829932:function(He){function z(C,x){for(var k=-1,w=C==null?0:C.length,T=Array(w);++k<w;)T[k]=x(C[k],k,C);return T}He.exports=z},920731:function(He,z,C){var x=C(288668),k=C(447443),w=C(301196),T=C(829932),L=C(307518),P=C(274757),p=200;function m(S,y,g,O){var E=-1,D=k,F=!0,W=S.length,b=[],h=y.length;if(!W)return b;g&&(y=T(y,L(g))),O?(D=w,F=!1):y.length>=p&&(D=P,F=!1,y=new x(y));t:for(;++E<W;){var K=S[E],U=g==null?K:g(K);if(K=O||K!==0?K:0,F&&U===U){for(var Y=h;Y--;)if(y[Y]===U)continue t;b.push(K)}else D(y,U,O)||b.push(K)}return b}He.exports=m},238749:function(He,z,C){var x=C(644239),k=C(541780),w=C(637005),T="[object Arguments]",L="[object Array]",P="[object Boolean]",p="[object Date]",m="[object Error]",S="[object Function]",y="[object Map]",g="[object Number]",O="[object Object]",E="[object RegExp]",D="[object Set]",F="[object String]",W="[object WeakMap]",b="[object ArrayBuffer]",h="[object DataView]",K="[object Float32Array]",U="[object Float64Array]",Y="[object Int8Array]",Z="[object Int16Array]",H="[object Int32Array]",q="[object Uint8Array]",Q="[object Uint8ClampedArray]",J="[object Uint16Array]",ft="[object Uint32Array]",nt={};nt[K]=nt[U]=nt[Y]=nt[Z]=nt[H]=nt[q]=nt[Q]=nt[J]=nt[ft]=!0,nt[T]=nt[L]=nt[b]=nt[P]=nt[h]=nt[p]=nt[m]=nt[S]=nt[y]=nt[g]=nt[O]=nt[E]=nt[D]=nt[F]=nt[W]=!1;function yt(gt){return w(gt)&&k(gt.length)&&!!nt[x(gt)]}He.exports=yt},105976:function(He,z,C){var x=C(406557),k=C(545357),w=C(430061);function T(L,P){return w(k(L,P,x),L+"")}He.exports=T},356560:function(He,z,C){var x=C(575703),k=C(538777),w=C(406557),T=k?function(L,P){return k(L,"toString",{configurable:!0,enumerable:!1,value:x(P),writable:!0})}:w;He.exports=T},307518:function(He){function z(C){return function(x){return C(x)}}He.exports=z},538777:function(He,z,C){var x=C(610852),k=function(){try{var w=x(Object,"defineProperty");return w({},"",{}),w}catch(T){}}();He.exports=k},385924:function(He,z,C){var x=C(205569),k=x(Object.getPrototypeOf,Object);He.exports=k},531167:function(He,z,C){He=C.nmd(He);var x=C(431957),k=z&&!z.nodeType&&z,w=k&&!0&&He&&!He.nodeType&&He,T=w&&w.exports===k,L=T&&x.process,P=function(){try{var p=w&&w.require&&w.require("util").types;return p||L&&L.binding&&L.binding("util")}catch(m){}}();He.exports=P},205569:function(He){function z(C,x){return function(k){return C(x(k))}}He.exports=z},545357:function(He,z,C){var x=C(896874),k=Math.max;function w(T,L,P){return L=k(L===void 0?T.length-1:L,0),function(){for(var p=arguments,m=-1,S=k(p.length-L,0),y=Array(S);++m<S;)y[m]=p[L+m];m=-1;for(var g=Array(L+1);++m<L;)g[m]=p[m];return g[L]=P(y),x(T,this,g)}}He.exports=w},430061:function(He,z,C){var x=C(356560),k=C(521275),w=k(x);He.exports=w},521275:function(He){var z=800,C=16,x=Date.now;function k(w){var T=0,L=0;return function(){var P=x(),p=C-(P-L);if(L=P,p>0){if(++T>=z)return arguments[0]}else T=0;return w.apply(void 0,arguments)}}He.exports=k},575703:function(He){function z(C){return function(){return C}}He.exports=z},291966:function(He,z,C){var x=C(920731),k=C(121078),w=C(105976),T=C(229246),L=w(function(P,p){return T(P)?x(P,k(p,1,T,!0)):[]});He.exports=L},406557:function(He){function z(C){return C}He.exports=z},498612:function(He,z,C){var x=C(623560),k=C(541780);function w(T){return T!=null&&k(T.length)&&!x(T)}He.exports=w},229246:function(He,z,C){var x=C(498612),k=C(637005);function w(T){return k(T)&&x(T)}He.exports=w},541780:function(He){var z=9007199254740991;function C(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=z}He.exports=C},281763:function(He,z,C){var x=C(644239),k=C(637005),w="[object Number]";function T(L){return typeof L=="number"||k(L)&&x(L)==w}He.exports=T},968630:function(He,z,C){var x=C(644239),k=C(385924),w=C(637005),T="[object Object]",L=Function.prototype,P=Object.prototype,p=L.toString,m=P.hasOwnProperty,S=p.call(Object);function y(g){if(!w(g)||x(g)!=T)return!1;var O=k(g);if(O===null)return!0;var E=m.call(O,"constructor")&&O.constructor;return typeof E=="function"&&E instanceof E&&p.call(E)==S}He.exports=y},936719:function(He,z,C){var x=C(238749),k=C(307518),w=C(531167),T=w&&w.isTypedArray,L=T?k(T):x;He.exports=L},252796:function(He,z,C){He.exports=C(410643)},913264:function(He){"use strict";var z=!!(typeof window!="undefined"&&window.document&&window.document.createElement),C={canUseDOM:z,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:z&&!!(window.addEventListener||window.attachEvent),canUseViewport:z&&!!window.screen,isInWorker:!z};He.exports=C},784518:function(He){var z=!1,C,x,k,w,T,L,P,p,m,S,y,g,O,E,D;function F(){if(!z){z=!0;var b=navigator.userAgent,h=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(b),K=/(Mac OS X)|(Windows)|(Linux)/.exec(b);if(g=/\b(iPhone|iP[ao]d)/.exec(b),O=/\b(iP[ao]d)/.exec(b),S=/Android/i.exec(b),E=/FBAN\/\w+;/i.exec(b),D=/Mobile/i.exec(b),y=!!/Win64/.exec(b),h){C=h[1]?parseFloat(h[1]):h[5]?parseFloat(h[5]):NaN,C&&document&&document.documentMode&&(C=document.documentMode);var U=/(?:Trident\/(\d+.\d+))/.exec(b);L=U?parseFloat(U[1])+4:C,x=h[2]?parseFloat(h[2]):NaN,k=h[3]?parseFloat(h[3]):NaN,w=h[4]?parseFloat(h[4]):NaN,w?(h=/(?:Chrome\/(\d+\.\d+))/.exec(b),T=h&&h[1]?parseFloat(h[1]):NaN):T=NaN}else C=x=k=T=w=NaN;if(K){if(K[1]){var Y=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(b);P=Y?parseFloat(Y[1].replace("_",".")):!0}else P=!1;p=!!K[2],m=!!K[3]}else P=p=m=!1}}var W={ie:function(){return F()||C},ieCompatibilityMode:function(){return F()||L>C},ie64:function(){return W.ie()&&y},firefox:function(){return F()||x},opera:function(){return F()||k},webkit:function(){return F()||w},safari:function(){return W.webkit()},chrome:function(){return F()||T},windows:function(){return F()||p},osx:function(){return F()||P},linux:function(){return F()||m},iphone:function(){return F()||g},mobile:function(){return F()||g||O||S||D},nativeApp:function(){return F()||E},android:function(){return F()||S},ipad:function(){return F()||O}};He.exports=W},396534:function(He,z,C){"use strict";var x=C(913264),k;x.canUseDOM&&(k=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function w(T,L){if(!x.canUseDOM||L&&!("addEventListener"in document))return!1;var P="on"+T,p=P in document;if(!p){var m=document.createElement("div");m.setAttribute(P,"return;"),p=typeof m[P]=="function"}return!p&&k&&T==="wheel"&&(p=document.implementation.hasFeature("Events.wheel","3.0")),p}He.exports=w},410643:function(He,z,C){"use strict";var x=C(784518),k=C(396534),w=10,T=40,L=800;function P(p){var m=0,S=0,y=0,g=0;return"detail"in p&&(S=p.detail),"wheelDelta"in p&&(S=-p.wheelDelta/120),"wheelDeltaY"in p&&(S=-p.wheelDeltaY/120),"wheelDeltaX"in p&&(m=-p.wheelDeltaX/120),"axis"in p&&p.axis===p.HORIZONTAL_AXIS&&(m=S,S=0),y=m*w,g=S*w,"deltaY"in p&&(g=p.deltaY),"deltaX"in p&&(y=p.deltaX),(y||g)&&p.deltaMode&&(p.deltaMode==1?(y*=T,g*=T):(y*=L,g*=L)),y&&!m&&(m=y<1?-1:1),g&&!S&&(S=g<1?-1:1),{spinX:m,spinY:S,pixelX:y,pixelY:g}}P.getEventType=function(){return x.firefox()?"DOMMouseScroll":k("wheel")?"wheel":"mousewheel"},He.exports=P},75:function(He,z,C){var x=C(734155);(function(){var k,w,T,L,P,p;typeof performance!="undefined"&&performance!==null&&performance.now?He.exports=function(){return performance.now()}:typeof x!="undefined"&&x!==null&&x.hrtime?(He.exports=function(){return(k()-P)/1e6},w=x.hrtime,k=function(){var m;return m=w(),m[0]*1e9+m[1]},L=k(),p=x.uptime()*1e9,P=L-p):Date.now?(He.exports=function(){return Date.now()-T},T=Date.now()):(He.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},654087:function(He,z,C){for(var x=C(75),k=typeof window=="undefined"?C.g:window,w=["moz","webkit"],T="AnimationFrame",L=k["request"+T],P=k["cancel"+T]||k["cancelRequest"+T],p=0;!L&&p<w.length;p++)L=k[w[p]+"Request"+T],P=k[w[p]+"Cancel"+T]||k[w[p]+"CancelRequest"+T];if(!L||!P){var m=0,S=0,y=[],g=1e3/60;L=function(O){if(y.length===0){var E=x(),D=Math.max(0,g-(E-m));m=D+E,setTimeout(function(){var F=y.slice(0);y.length=0;for(var W=0;W<F.length;W++)if(!F[W].cancelled)try{F[W].callback(m)}catch(b){setTimeout(function(){throw b},0)}},Math.round(D))}return y.push({handle:++S,callback:O,cancelled:!1}),S},P=function(O){for(var E=0;E<y.length;E++)y[E].handle===O&&(y[E].cancelled=!0)}}He.exports=function(O){return L.call(k,O)},He.exports.cancel=function(){P.apply(k,arguments)},He.exports.polyfill=function(O){O||(O=k),O.requestAnimationFrame=L,O.cancelAnimationFrame=P}},174219:function(He,z){"use strict";var C;C={value:!0},z.Z=void 0;var x={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};z.Z=x},585369:function(He,z){"use strict";var C;C={value:!0},z.Z=void 0;var x={locale:"zh_CN",today:"\u4ECA\u5929",now:"\u6B64\u523B",backToToday:"\u8FD4\u56DE\u4ECA\u5929",ok:"\u786E\u5B9A",timeSelect:"\u9009\u62E9\u65F6\u95F4",dateSelect:"\u9009\u62E9\u65E5\u671F",weekSelect:"\u9009\u62E9\u5468",clear:"\u6E05\u9664",month:"\u6708",year:"\u5E74",previousMonth:"\u4E0A\u4E2A\u6708 (\u7FFB\u9875\u4E0A\u952E)",nextMonth:"\u4E0B\u4E2A\u6708 (\u7FFB\u9875\u4E0B\u952E)",monthSelect:"\u9009\u62E9\u6708\u4EFD",yearSelect:"\u9009\u62E9\u5E74\u4EFD",decadeSelect:"\u9009\u62E9\u5E74\u4EE3",yearFormat:"YYYY\u5E74",dayFormat:"D\u65E5",dateFormat:"YYYY\u5E74M\u6708D\u65E5",dateTimeFormat:"YYYY\u5E74M\u6708D\u65E5 HH\u65F6mm\u5206ss\u79D2",previousYear:"\u4E0A\u4E00\u5E74 (Control\u952E\u52A0\u5DE6\u65B9\u5411\u952E)",nextYear:"\u4E0B\u4E00\u5E74 (Control\u952E\u52A0\u53F3\u65B9\u5411\u952E)",previousDecade:"\u4E0A\u4E00\u5E74\u4EE3",nextDecade:"\u4E0B\u4E00\u5E74\u4EE3",previousCentury:"\u4E0A\u4E00\u4E16\u7EAA",nextCentury:"\u4E0B\u4E00\u4E16\u7EAA"},k=x;z.Z=k},752376:function(He,z,C){"use strict";C.d(z,{Z:function(){return ir}});var x=C(671002),k=C(601413),w=C(297685),T=C(700091),L=C(667294);function P(jt){var Qt=[];return L.Children.forEach(jt,function(Et){Qt.push(Et)}),Qt}function p(jt,Qt){var Et=null;return jt&&jt.forEach(function(we){Et||!we||we.key===Qt&&(Et=we)}),Et}function m(jt,Qt){var Et=[],we={},Ot=[],Kt=null;return jt.forEach(function(dt){dt&&(dt.key&&p(Qt,dt.key)?(Ot.length&&(we[dt.key]=Ot,Ot=[]),Kt=dt.key):dt.key&&Ot.push(dt))}),Kt||(Et=Et.concat(Ot)),Qt.forEach(function(dt){dt&&(dt.key&&we.hasOwnProperty(dt.key)&&(Et=Et.concat(we[dt.key])),Et.push(dt),dt.key===Kt&&(Et=Et.concat(Ot)))}),Et}function S(jt,Qt,Et){var we;return typeof jt=="function"?we=jt({key:Qt,index:Et}):we=jt,we}function y(jt){return jt&&jt.children}var g=!(typeof window!="undefined"&&window.document&&window.document.createElement),O=g?L.useEffect:L.useLayoutEffect,E=C(974902),D=C(973935),F=C(364687),W=C.n(F),b=C(115861),h=C(215671),K=C(143144),U=C(952191);function Y(){}var Z=U.rV,H=/.*shadow$/gi,q=!(typeof window!="undefined"&&window.document&&window.document.createElement),Q=Date.now;function J(jt){if(typeof jt=="string"){if(jt.charAt(0).match(/m/i)){var Qt=document.createElementNS("http://www.w3.org/2000/svg","path");return Qt.setAttributeNS(null,"d",jt),Qt}return document.querySelector(jt)}else if(jt.style)return jt;throw new Error("Error while parsing the path")}var ft={type:"to",duration:450,delay:0,repeat:0,repeatDelay:0,appearTo:0,yoyo:!1,ease:"easeInOutQuad",onStart:Y,onUpdate:Y,onComplete:Y,onRepeat:Y,startAt:{}},nt={animation:{},paused:!1,reverse:!1,delay:0,repeat:0,repeatDelay:0,yoyo:!1,moment:null,resetStyle:!1,regionStartTime:0,regionEndTime:void 0,onChange:Y,onChangeTimeline:Y},yt=function(Qt){var Et={};return Object.keys(nt).forEach(function(we){Et[we]=typeof Qt[we]=="undefined"?nt[we]:Qt[we]}),Et.delay&&(Et.delay=Math.round(Et.delay)),Qt.repeatDelay&&(Et.repeatDelay=Math.round(Et.repeatDelay)),Et},gt=function(Qt){if(Array.isArray(Qt)||!Qt)return Qt;if(Qt.length){var Et=Array.prototype.slice.call(Qt);return Et.length?[Qt]:Et}return[Qt]},zt=function(Qt){return Qt.length===1?Qt[0]:Qt},Mt=function(Qt,Et){var we=Et.appearTo,Ot=we===void 0?0:we,Kt=Et.delay,dt=Kt===void 0?0:Kt,Bt=Et.duration,$=Bt===void 0?450:Bt,at=Et.repeat,R=Et.repeatDelay;if(typeof Ot=="string")return 0;var M,A=0;return typeof Qt.appearTo=="number"?Qt.appearTo:(typeof Qt.appearTo=="string"&&Qt.appearTo.charAt(1)==="="&&(A=parseFloat(Qt.appearTo.replace("=",""))),M=Ot+dt+$+A,at===-1?M=Number.MAX_VALUE:at&&(M=Ot+dt+$*(at+1)+(R||0)*at+A),M)},Ct=function(Qt){switch(Qt){case"opacity":case"scaleX":case"scaleY":case"scale":return 1;default:return 0}},rt=function(Qt,Et){var we=typeof Qt=="string"?parseFloat(Qt):Qt;return ot(we,Et.vars,1,Et.count,Et.unit)},ot=function(Qt,Et,we){var Ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",Kt=arguments.length>4?arguments[4]:void 0;return Ot==="+="||Ot==="-="?Qt+Et*we+(Kt||0):(Et-Qt)*we+Qt+(Kt||0)},Tt=function(Qt){if(!Qt)return{};var Et=typeof window!="undefined"&&document.defaultView?document.defaultView.getComputedStyle(Qt):{};return Et},Rt={margin:1,padding:1,borderWidth:1,borderRadius:1};function st(jt){var Qt=jt.target,Et=jt.computedStyle,we=jt.style,Ot=jt.value,Kt=jt.startUnit,dt=jt.endUnit,Bt=jt.fixed,$=jt.isOriginWidth,at=jt.useCurrentTarget;if(q)return Ot;var R=/(?:Left|Right|Width|X)/i.test(we)||$;R=we==="padding"||we==="marign"?!0:R;var M=we.indexOf("border")!==-1||we.indexOf("translate")!==-1||we==="transformOrigin"||at?Qt:Qt.parentNode||document.body;M=Bt?document.body:M;var A,X,mt;switch(Kt){case"%":A=parseFloat(Ot)/100*(R?M.clientWidth:M.clientHeight);break;case"vw":A=parseFloat(Ot)*document.body.clientWidth/100;break;case"vh":A=parseFloat(Ot)*document.body.clientHeight/100;break;case"em":Et?A=parseFloat(Ot)*parseFloat(Et.fontSize):(mt="em",A=parseFloat(Ot));break;case"rem":{Et?(X=window.getComputedStyle(document.getElementsByTagName("html")[0]),A=parseFloat(Ot)*parseFloat(X.fontSize)):(mt="rem",A=parseFloat(Ot));break}default:A=parseFloat(Ot);break}switch(dt){case"%":A=A?A*100/(R?M.clientWidth:M.clientHeight):0;break;case"vw":A=parseFloat(Ot)/document.body.clientWidth*100;break;case"vh":A=parseFloat(Ot)/document.body.clientHeight*100;break;case"em":Et?A=parseFloat(Ot)/parseFloat(Et.fontSize):(mt="em",A=parseFloat(Ot));break;case"rem":{Et?(X=X||window.getComputedStyle(document.getElementsByTagName("html")[0]),A=parseFloat(Ot)/parseFloat(X.fontSize)):(mt="rem",A=parseFloat(Ot));break}default:break}return mt&&console.warn("Warning: Element is not 'DOM, can not use '".concat(mt,"', automatically convert to animation units.")),A}function bt(jt){if(typeof jt=="string")return jt;var Qt=jt.perspective,Et=jt.rotate,we=jt.rotateX,Ot=jt.rotateY,Kt=jt.scaleX,dt=jt.scaleY,Bt=jt.scaleZ,$=jt.skewX,at=jt.skewY,R=typeof jt.translateX=="string"?jt.translateX:"".concat(jt.translateX,"px"),M=typeof jt.translateY=="string"?jt.translateY:"".concat(jt.translateY,"px"),A=typeof jt.translateZ=="string"?jt.translateZ:"".concat(jt.translateZ,"px"),X=$||at?"skew(".concat($,"deg,").concat(at,"deg)"):"",mt=Et?"rotate(".concat(Et,"deg)"):"",Lt=Kt!==1||dt!==1||Bt!==1?"scale3d(".concat(Kt,",").concat(dt,",").concat(Bt,")"):"",Pt=we?"rotateX(".concat(we,"deg)"):"",Jt=Ot?"rotateY(".concat(Ot,"deg)"):"",Ie=Qt?"perspective(".concat(Qt,"px)"):"",pe=Lt||mt||Pt||Jt||X?"":"translate(0px, 0px)",je=jt.translateZ?"translate3d(".concat(R,",").concat(M,",").concat(A,")"):(jt.translateX||jt.translateY)&&"translate(".concat(R,",").concat(M,")")||pe;return"".concat(Ie," ").concat(je," ").concat(Lt," ").concat(mt," ").concat(Pt," ").concat(Jt," ").concat(X).trim()}var Ft={brightness:1,saturate:1,contrast:1,grayScale:0,hueRotate:"0deg",sepia:0,invert:0},Ht=(0,K.Z)(function jt(){var Qt=this;(0,h.Z)(this,jt),this.push=function(Et){gt(Et).forEach(function(we){Qt[we.className]=we})},this.register=this.push}),_t=new Ht,Xt=/%|vw|vh|em|rem/i,ee=(0,K.Z)(function jt(Qt){var Et=this;(0,h.Z)(this,jt),this.props=void 0,this.computedStyle=void 0,this.root=void 0,this.index=void 0,this.targetIndex=void 0,this.tweenVars={},this.transformName=void 0,this.filterName=void 0,this.target=void 0,this.start={},this.startAt={},this.propsData={data:{},type:{},unit:{},count:{},splitStr:{},isTransform:{}},this.setDefaultData=function(){var we=Et.props;for(var Ot in we){var Kt=we[Ot],dt=Kt.split&&Kt.split(/\s+|,/).length>1||Ot.match(/color|fill|stroke/i)||Ot.match(/shadow/i),Bt=(Ot==="background"||Ot==="backgroundImage")&&Kt.match(/[a-z|-]+\(([\s\S]*?)\)/gi);if(Bt){Et.propsData.data[Ot]={value:Kt,plugin:_t.GradientsPlugin};continue}if(dt){Et.propsData.data[Ot]={value:Kt,plugin:_t.ArrayPlugin};continue}var $=(0,U.Lo)(Ot),at=Et.getTweenData($,we[Ot]);Et.propsData.data[$]=at.data[$],Et.propsData.type[$]=at.type[$],Et.propsData.unit[$]=at.unit[$],Et.propsData.count[$]=at.count[$],Et.propsData.isTransform[$]=(0,U.dt)($)==="transform",at.splitStr[$]&&(Et.propsData.splitStr[$]=at.splitStr[$])}},this.getTweenData=function(we,Ot){var Kt={data:{},isTransform:{},type:{},unit:{},count:{},splitStr:{}},dt=Ot;Kt.data[we]=dt;var Bt=typeof Kt.data[we]=="string";Kt.unit[we]=Bt?Kt.data[we].replace(/[^a-z|%]/g,""):"",Kt.count[we]=Bt?Kt.data[we].replace(/[^+|=|-]/g,""):"";var $=Bt?parseFloat(Kt.data[we].replace(/[a-z|%|=]/g,"")):Kt.data[we];return Kt.data[we]=!$&&$!==0?Kt.data[we]:$,Kt},this.setStartAtValue=function(we,Ot){return(0,x.Z)(Ot)==="object"?rt(we,Ot):we},this.getAnimStart=function(){var we=Et.target,Ot=Et.root,Kt=Et.targetIndex,dt=Et.propsData,Bt=Et.startAt,$=Et.start,at=Et.tweenVars,R={};for(var M in Bt)R[(0,U.Lo)(M)]=Bt[M];Et.computedStyle=Et.computedStyle||Tt(we),at.style=at.style||{};var A,X;for(var mt in dt.data){var Lt,Pt=dt.data[mt];if(Pt.plugin){var Jt=new Pt.plugin(Pt.value,mt);Jt.target=we,Jt.root=Ot,Jt.parent=parent,Jt.index=Et.index,Jt.targetIndex=Kt,Jt.tweenVars=at,Jt.startAt=Et.startAt,Jt.computedStyle=Et.computedStyle,Pt.plugin=Jt,$[mt]=Jt.getAnimStart();continue}var Ie=(0,U.dt)(mt),pe=Ie==="transform"?Et.transformName:Ie;pe=Ie==="filter"?Et.filterName:pe;var je=at.style[pe],br=je!=null?je:Et.computedStyle[Ie],Je=(Lt=R[mt])!==null&&Lt!==void 0?Lt:br,zr=dt.unit[mt],gn="";if(Ie==="transform"){A=A||(Je===je?(0,k.Z)({},je):(0,U.Ck)(Et.computedStyle[Et.transformName]));var tr=A[mt];if(R&&mt in R){var xr,Ur;tr=Et.setStartAtValue((xr=(Ur=R[mt].vars)!==null&&Ur!==void 0?Ur:je==null?void 0:je[mt])!==null&&xr!==void 0?xr:tr,R[mt]),gn=R[mt].unit,mt==="scale"?(A.scaleX=tr,A.scaleY=tr):A[mt]=tr}gn!==zr&&(tr=st({target:we,computedStyle:Et.computedStyle,style:Ie,value:tr,startUnit:gn,endUnit:zr}),mt==="scale"?(A.scaleX=tr,A.scaleY=tr):A[mt]=tr),$[Et.transformName]=A}else if(Ie==="filter"){var Nr=U._T.filterConvert[mt]||mt;X=X||(Je===je?(0,k.Z)({},je):(0,U.GX)(br)||{}),X[Nr]=X[Nr]||Ft[Nr];var fe=X[Nr];if(R&&mt in R){var Wt;fe=Et.setStartAtValue((Wt=R[mt].vars)!==null&&Wt!==void 0?Wt:fe,R[mt]),gn=R[mt].unit,X[Nr]=fe}if(zr!==gn){var ge;X[Nr]=st({target:we,computedStyle:Et.computedStyle,style:Ie,value:fe,startUnit:gn,endUnit:zr,fixed:((ge=Et.computedStyle)===null||ge===void 0?void 0:ge.position)==="fixed"})}$[Et.filterName]=X}else{var Ae;if(Je=(Ae=R[mt])!==null&&Ae!==void 0?Ae:br,(!Je||Je==="none"||Je==="auto")&&(Je=""),zr=dt.unit[Ie],gn=(0,x.Z)(Je)==="object"?Je.unit:"".concat(Je).replace(/[^a-z|%]/g,""),Je=Et.setStartAtValue(br,R[mt]),zr!==gn){var Se;Je=st({target:we,computedStyle:Et.computedStyle,style:Ie,value:parseFloat(Je),startUnit:gn,endUnit:zr,fixed:((Se=Et.computedStyle)===null||Se===void 0?void 0:Se.position)==="fixed"})}var Be=parseFloat(Je);$[Ie]=isNaN(Be)?Ct(Ie):Be}}return $},this.render=function(we){var Ot=Et.propsData,Kt=Et.start,dt=Et.tweenVars,Bt=dt.style||{};Kt[Et.transformName]&&!Bt[Et.transformName]&&(Bt[Et.transformName]=(0,k.Z)({},Kt[Et.transformName])),Kt[Et.filterName]&&!Bt[Et.filterName]&&(Bt[Et.filterName]=(0,k.Z)({},Kt[Et.filterName]));var $=Bt[Et.transformName],at=Bt[Et.filterName],R=Ot.data,M=Ot.unit,A=Ot.count,X=Ot.isTransform;for(var mt in R){var Lt=R[mt];if(Lt.plugin){Bt[mt]=Lt.plugin.render(we);continue}var Pt=X[mt],Jt=Pt?Kt[Et.transformName][mt]:Kt[mt],Ie=M[mt],pe=A[mt];if(Pt){if(mt==="scale"){var je=Kt[Et.transformName].scaleX,br=Kt[Et.transformName].scaleY;pe.charAt(1)==="="?($.scaleX=je+Lt*we,$.scaleY=br+Lt*we):($.scaleX=(Lt-je)*we+je,$.scaleY=(Lt-br)*we+br)}else $[mt]=ot(parseFloat(Jt),Lt,we,pe,Ie);$.text=bt(Bt[Et.transformName])}else if(U._T.filter.indexOf(mt)>=0){var Je=U._T.filterConvert[mt]||mt;Jt=parseFloat(Kt[Et.filterName][Je])||0,at[Je]=ot(Jt,Lt,we,pe,Ie),at.text="";for(var zr in at)zr!=="text"&&(at.text="".concat(at.text," ").concat(zr,"(").concat(at[zr],")").trim())}else{var gn=(0,U.YJ)(mt,0);gn=typeof gn=="number"?0:gn.replace(/[^a-z|%]/g,""),Ie=Ie||gn,typeof Lt=="string"?Bt[mt]=Lt:Bt[mt]=ot(Jt,Lt,we,pe,Ie)}}return Bt},this.props=Qt,this.transformName=(0,U.Yf)("transform"),this.filterName=(0,U.Yf)("filter")||"filter",this.setDefaultData()});ee.key="style",ee.className="style";var se=ee,ue=C(497326),Ut=C(360136),oe=C(973568),Pe=(0,K.Z)(function jt(Qt,Et){(0,h.Z)(this,jt),this.value=void 0,this.key=void 0,this.root=void 0,this.index=void 0,this.style={},this.start={},this.startAt={},this.target=void 0,this.value=Qt,this.key=Et});Pe.className=void 0,Pe.key=void 0;var te=function(jt){(0,Ut.Z)(Et,jt);var Qt=(0,oe.Z)(Et);function Et(we,Ot){var Kt;(0,h.Z)(this,Et),Kt=Qt.call(this,we,Ot),Kt.value=void 0,Kt.key=void 0,Kt.start=[],Kt.tweenVars={},Kt.vars={},Kt.computedStyle=void 0,Kt.propsData={data:[],unit:[],count:[]},Kt.setDefaultData=function($,at){var R=(0,ue.Z)(Kt),M=R.propsData,A=R.value,X=(0,E.Z)(A);if($==="color"){var mt;X[3]=(mt=X[3])!==null&&mt!==void 0?mt:1}M.type=$,M.data=X.map(function(Lt){return!parseFloat(Lt)&&parseFloat(Lt)!==0?Lt:parseFloat(Lt)}),M.unit=X.map(function(Lt){return Lt.toString().replace(/[^a-z|%]/g,"")}),M.count=X.map(function(Lt){return Lt.toString().replace(/[^+|=|-]/g,"")}),at&&(M.splitStr=at)},Kt.convertToMarksArray=function($,at,R,M){var A=(R||"").toString().replace(/[^a-z|%]/g,""),X=typeof M=="number"?$[M]:void 0;return A===X?parseFloat(R):!parseFloat(R)&&parseFloat(R)!==0?R:st({target:Kt.target,computedStyle:Kt.computedStyle,style:at,value:R,startUnit:A,endUnit:X,isOriginWidth:at==="transformOrigin"&&!M})},Kt.getAnimStart=function(){var $,at,R,M,A=(0,ue.Z)(Kt),X=A.startAt,mt=A.target,Lt=A.key,Pt=A.propsData,Jt=A.computedStyle,Ie=A.tweenVars,pe=($=(at=(R=X==null?void 0:X[Lt])!==null&&R!==void 0?R:Jt?(M=Ie.style)===null||M===void 0?void 0:M[Lt]:Ie[Lt])!==null&&at!==void 0?at:(Jt||mt)[Lt])!==null&&$!==void 0?$:"",je=Pt.data.indexOf("inset"),br;if(je!==-1&&!pe.match("inset")&&Pt.type==="shadow"&&(br=pe,pe=""),(!pe||pe==="none"||pe==="auto")&&(pe=""),pe=Pt.type==="shadow"?(0,U.hy)(pe,Lt):pe,pe=Pt.type==="color"?(0,U.lu)(pe):pe,pe=Pt.type==="string"?pe.split(/[\s|,]/):pe,Rt[Lt]){var Je,zr,gn,tr;pe[1]=(Je=pe[1])!==null&&Je!==void 0?Je:pe[0],pe[2]=(zr=pe[2])!==null&&zr!==void 0?zr:pe[0],pe[3]=(gn=(tr=pe[3])!==null&&tr!==void 0?tr:pe[1])!==null&&gn!==void 0?gn:pe[0]}var xr=Pt.unit,Ur=pe.map(function(Nr,fe){return parseFloat(Nr).toString()==="NaN"?Nr:Kt.convertToMarksArray(xr,Lt,Nr,fe)});return Kt.start=Ur.concat(je>=0?"inset":[]),Kt.start.oldShadow=br,Kt.start},Kt.render=function($){var at=(0,ue.Z)(Kt),R=at.start,M=at.propsData,A=M.type,X=M.splitStr,mt=M.data,Lt=M.count,Pt=M.unit,Jt=mt.map(function(Je,zr){return typeof Je=="string"?Je:ot(R[zr],Je,$,Lt[zr],Pt[zr])});switch(A){case"string":Jt=Jt.join(X);break;case"color":Jt=(0,U.Lq)(Jt);break;case"shadow":{var Ie=Jt.indexOf("inset")>=0,pe=Ie?Jt.filter(function(Je){return Je!=="inset"}):Jt,je=pe.slice(0,pe.length-4).map(function(Je){return typeof Je=="number"?"".concat(Je,"px"):Je}),br=(0,U.Lq)(pe.slice(pe.length-4,pe.length));Jt="".concat(R.oldShadow?"".concat(R.oldShadow,","):"").concat(je.join(" ")," ").concat(br," ").concat(Ie?"inset":"").trim();break}default:break}return Jt},Kt.value=we,Kt.key=Ot;var dt="",Bt="";return typeof we=="string"&&(Ot.match(H)?(Kt.value=(0,U.hy)(we,Ot),dt="shadow"):Ot.match(/color|fill|stroke/i)||we.match(Z)?(Kt.value=(0,U.lu)(we),dt="color"):(Bt=we.replace(/[^\s|,]/g,"").replace(/\s+/g," "),Kt.value=we.split(/[\s|,]/),dt="string")),Kt.setDefaultData(dt,Bt),Kt}return(0,K.Z)(Et)}(Pe);te.className="ArrayPlugin";var ve=te,Ue={linear:{"to top":"0deg","to top right":"45deg","to right top":"45deg","to right":"90deg","to right bottom":"135deg","to bottom right":"135deg","to bottom":"180deg","to bottom left":"225deg","to left bottom":"225deg","to left":"270deg","to left top":"315deg","to top left":"315deg"},radial:{center:"50% 50%",top:"50% 0%","top right":"100% 0%","right top":"100% 0%",right:"100% 50%","right bottom":"100% 100%","bottom right":"100% 100%",bottom:"50% 100%","bottom left":"0% 100%","left bottom":"0% 100%",left:"0% 50%","left top":"0% 0%","top left":"0% 0%"}},xe=["closest-side","closest-corner","farthest-side","farthest-corner"],Re=function(Qt,Et,we){console.warn("Warning: The gradient ".concat(Qt,"(").concat(Et," => ").concat(we,") is different, which has been automatically converted to animation gradient ").concat(Qt,"(").concat(we,")."))},de=function(Qt){return Qt==="url"||Qt.indexOf("image")>=0||Qt==="paint"||Qt==="cross-fade"||Qt==="element"},ht=function(jt){(0,Ut.Z)(Et,jt);var Qt=(0,oe.Z)(Et);function Et(we){var Ot;return(0,h.Z)(this,Et),Ot=Qt.call(this,we,"backgroundImage"),Ot.value=void 0,Ot.tweenVars={},Ot.vars=[],Ot.computedStyle=void 0,Ot.defaultStartVars=[],Ot.getPosition=function(Kt){return Kt.map(function(dt){return{data:parseFloat(dt),unit:dt.replace(/[^a-z|%]/g,"")}})},Ot.getAngle=function(Kt,dt){var Bt=Kt.replace(/-|gradient|repeating]/g,""),$,at,R,M;switch(Bt){case"linear":{R=Ot.getPosition((Ue.linear[dt]||dt||Ue.linear["to bottom"]).split(" "));break}case"radial":{var A=dt.split(" ");$=A.find(function(Jt){return xe.indexOf(Jt)>=0})||xe[3],at=A.find(function(Jt){return Jt==="circle"||Jt==="ellipse"})||"ellipse";var X=new RegExp("".concat($,"|").concat(at,"|at"),"g"),mt=dt.replace(X,"").trim();M=Ot.getPosition((Ue.radial[mt]||mt||Ue.radial.center).split(" "));break}case"conic":{var Lt=dt.split("at").map(function(Jt){return Jt.trim()}),Pt=(Lt[0]||"").split(" ");at=Pt[0]||"from",R=Ot.getPosition([Pt[1]||"0deg"]),M=Ot.getPosition((Ue.radial[Lt[1]]||Lt[1]||Ue.radial.center).split(" "));break}default:break}return{extent:$,shape:at,angle:R,position:M}},Ot.valueToIValue=function(Kt){if(!Kt)return[];var dt=Kt.replace(/\),\s+?(url|radial|conic|linear|repeating|image|element|cross|paint)/,")#,#$1").split("#,#");return dt.map(function(Bt){var $=Bt.replace(/([a-z|-]+)\((.*)\)/,"$1").trim();if($==="url")return{type:$,values:Bt};var at=Bt.replace(/([a-z|-]+)\((.*)\)/,"$2").replace(/#([0-9a-f]{6}|[0-9a-f]{3})|(rgb[a]?|hsl)+\(\d+\,[\s+]?\d+[\%]?\,[\s+]?\d+[\%]?(\,\d+)?\)/gi,function(X){return X.replace(/\s+/g,"")}).replace(/\,([a-z|#|\s+])/g,"#,#$1").split("#,#").map(function(X){return X.trim()}),R=at[0].match(Z)?"":at[0];R&&at.splice(0,1);var M=Ot.getAngle($,R),A=at.map(function(X){var mt=X.trim().split(/\s+/),Lt,Pt=(mt[0].match(Z),mt[0]);return Pt&&(mt.splice(0,1),Lt=(0,U.lu)(Pt)),{color:Lt,positions:mt.map(function(Jt){return{data:parseFloat(Jt),unit:Jt.toString().replace(/[^a-z|%]/g,"")}})}});return{type:$,angle:M,values:A}})},Ot.getAnimStart=function(){var Kt,dt=(0,ue.Z)(Ot),Bt=dt.startAt,$=dt.key,at=dt.computedStyle,R=dt.target,M=dt.vars,A=dt.tweenVars,X=(0,k.Z)({},Bt),mt=(Kt=A[$])!==null&&Kt!==void 0?Kt:(at||R)[$];(!mt||mt==="none"||mt==="auto")&&(mt=""),X[$]=X[$]||mt,X[$]=X[$]?Ot.valueToIValue(X[$]):Ot.defaultStartVars;var Lt=Math.max(M.length,X[$].length),Pt=(Lt===X[$].length?X[$]:M).map(function(Jt,Ie){var pe,je,br=X[$][Ie]||Ot.defaultStartVars[Ie],Je=M[Ie]||br;if((!br||br.type!==Je.type)&&(br.type!==Je.type&&Re("type",br.type,Je.type),br=Ot.defaultStartVars[Ie]),de(Je.type)||typeof Je.values=="string"||typeof br.values=="string")return(0,k.Z)({},Je);if(((pe=Je.angle)===null||pe===void 0?void 0:pe.extent)!==((je=br.angle)===null||je===void 0?void 0:je.extent)){var zr,gn;Re("extent keyword",(zr=br.angle)===null||zr===void 0?void 0:zr.extent,(gn=Je.angle)===null||gn===void 0?void 0:gn.extent)}var tr=Math.max(br.values.length,Je.values.length),xr=tr===br.values.length?br.values:Je.values;return br.values=xr.map(function(Ur,Nr){var fe=br.values[Nr],Wt=Je.values[Nr]||fe;return(0,k.Z)((0,k.Z)({},fe),{},{positions:(Wt||fe).positions.map(function(ge,Ae){var Se=fe?fe.positions[Ae]||fe.positions[fe.positions.length-1]:Wt.positions[Wt.positions.length-1],Be=ge||Se;return!Se&&fe&&br.values.length&&(Se={data:100/(br.values.length-1)*Nr,unit:"%"}),Be.unit!==Se.unit&&Re("units",Se.unit,Be.unit),{data:Se.data,unit:Be.unit}})})}),br});return Ot.start=Pt,Ot.start},Ot.render=function(Kt){var dt="",Bt=Math.max(Ot.vars.length,Ot.start.length);return(Bt===Ot.vars.length?Ot.vars:Ot.start).forEach(function($,at){var R=Ot.start[at],M=Ot.vars[at]||R;if(de(M.type)||typeof M.values=="string"||!M.angle){dt+="".concat(dt?",":""," ").concat(M.values).trim();return}var A=Math.max(R.values.length,M.values.length),X=(A===R.values.length?R.values:M.values).map(function(Ie,pe){var je=R.values[pe],br=M.values[pe];br||(br=je);var Je=je.color,zr=je.positions;!Je&&br.color&&(Je=(0,E.Z)(br.color)),zr||(zr=br.positions.map(function(xr){return(0,k.Z)({},xr)}));var gn=br.color?br.color.map(function(xr,Ur){return ot(Je[Ur],xr,Kt)}):br.color,tr=br.positions.map(function(xr,Ur){return"".concat(ot(zr[Ur].data,xr.data,Kt)).concat(xr.unit)}).join(" ");return"".concat(gn?(0,U.Lq)(gn):gn||""," ").concat(tr).trim()}),mt=M.angle,Lt=mt.angle&&mt.angle.map(function(Ie,pe){return"".concat(ot(R.angle.angle[pe].data,Ie.data,Kt)).concat(Ie.unit)}).join(" "),Pt=mt.position&&mt.position.map(function(Ie,pe){return"".concat(ot(R.angle.position[pe].data,Ie.data,Kt)).concat(Ie.unit)}).join(" "),Jt="".concat(mt.extent||""," ").concat(mt.shape||""," ").concat(Lt||""," ").concat(Pt?"at ".concat(Pt):"").trim();dt+="".concat(dt?",":""," ").concat(M.type,"(").concat(Jt?"".concat(Jt,","):"").concat(X.join(","),")").trim()}),dt},Ot.value=we,Ot.vars=Ot.valueToIValue(we),Ot.defaultStartVars=Ot.vars.map(function(Kt){return de(Kt.type)||typeof Kt.values=="string"?(0,k.Z)({},Kt):(0,k.Z)((0,k.Z)({},Kt),{},{values:Kt.values.map(function(dt){var Bt;return dt.color&&typeof dt.color!="string"?(Bt=(0,E.Z)(dt.color),Bt[3]=0):Bt=dt.color,{color:Bt,positions:(0,E.Z)(dt.positions)}})})}),Ot}return(0,K.Z)(Et)}(Pe);ht.className="GradientsPlugin";var ae=C(654087),Le=C.n(ae),Ze=function(){function jt(){var Qt=this;(0,h.Z)(this,jt),this.lagThreshold=150,this.adjustedLag=33,this.emptyTime=0,this.elapsed=0,this.frameFPS=1e3/240,this.startTime=0,this.prevTime=0,this.useTimeout=!1,this.lastUpdate=this.startTime,this.nextTime=this.frameFPS,this.req=void 0,this.id=-1,this.tweenId=0,this.tickFn=[],this.state="sleep",this.time=0,this.frame=0,this.removeReq=function(Et){return Qt.useTimeout?clearTimeout(Et):(0,ae.cancel)(Et)},this.tick=function(){var Et=Qt.tickFn;Qt.startTime||(Qt.startTime=Q()-Qt.frameFPS,Qt.lastUpdate=Qt.startTime),Qt.elapsed=Q()-Qt.lastUpdate,Qt.elapsed>Qt.lagThreshold&&(Qt.startTime+=Qt.elapsed-Qt.adjustedLag),Qt.lastUpdate+=Qt.elapsed,Qt.time=Qt.lastUpdate-Qt.startTime;var we=Qt.time-Qt.nextTime;if(we>0){Qt.frame++,Qt.nextTime+=we+(we>=Qt.frameFPS?4:Qt.frameFPS-we);for(var Ot=Qt.time-Qt.prevTime,Kt=0;Kt<Et.length;Kt++)Et[Kt].fn({time:Qt.time,elapsed:Ot<Qt.frameFPS?Qt.frameFPS:Ot});Qt.prevTime=Qt.time}if(!Qt.tickFn.length&&(Qt.emptyTime||(Qt.emptyTime=Qt.time+500),Qt.time>=Qt.emptyTime)){Qt.emptyTime=0,Qt.sleep();return}Qt.req&&(Qt.id=Qt.req(Qt.tick))},this.wake=function(){Qt.id&&Qt.sleep(),Qt.req=Qt.useTimeout?function(Et){return setTimeout(Et,Qt.frameFPS)}:Le(),Qt.tick(),Qt.state="wake"},this.sleep=function(){Qt.removeReq(Qt.id),Qt.id=-1,Qt.req=void 0,Qt.state="sleep"},this.add=function(Et){var we="TweenOneTicker_".concat(Qt.tweenId);return Qt.tweenId+=1,Qt.tickFn.findIndex(function(Ot){return Ot.key===we})===-1&&Qt.tickFn.push({key:we,fn:Et}),Qt.emptyTime=0,Qt.req||Qt.wake(),we},this.clear=function(Et){Qt.tickFn=Qt.tickFn.filter(function(we){return we.key!==Et&&we.fn!==Et})},this.timeout=function(Et,we){if(typeof Et!="function")return console.warn("not function");var Ot=Qt.time,Kt=Qt.add(function(){var dt=Qt.time-Ot;dt>=(we||0)&&(Qt.clear(Kt),Et())});return Kt},this.interval=function(Et,we){if(typeof Et!="function")return console.warn("not function"),null;var Ot=Qt.time;return Qt.add(function(){var Kt=Qt.time-Ot;Kt>=(we||0)&&(Ot=Qt.time,Et())})}}return(0,K.Z)(jt,[{key:"fps",value:function(Et,we){this.frameFPS=1e3/(Et||240),this.nextTime=this.time+this.frameFPS,this.useTimeout=typeof we=="undefined"?this.useTimeout:we,this.useTimeout&&(this.req=function(Ot){return setTimeout(Ot,Et)})}}]),jt}(),qe=new Ze,fr=qe,ur=function(){function jt(){var Qt=this;(0,h.Z)(this,jt),this.children=[],this.autoSleep=200,this.tickerKey=void 0,this.startTime=void 0,this.addChild=function(Et){Qt.children.indexOf(Et)===-1?(Qt.children.push(Et),Qt.updateTickerState()):Qt.start()},this.removeChild=function(Et){Qt.children=Qt.children.filter(function(we){return we!==Et}),Qt.updateTickerState()},this.kill=function(Et){Qt.children=Qt.children.filter(function(we){var Ot=we.root.targets,Kt=Ot.map(function(Bt,$){if(Et.indexOf(Bt)===-1)return Bt;delete Bt._tweenOneVars});we.root.targets=Kt;var dt=!!Kt.filter(function(Bt){return Bt}).length;return dt||we.kill(),dt}),Qt.updateTickerState()},this.killAll=function(Et){Et&&(Qt.children.forEach(function(we){we==null||we.root.targets.forEach(function(Ot){Ot&&delete Ot._tweenOneVars})}),Qt.children=[]),fr.clear(Qt.tickerKey),Qt.tickerKey=void 0},this.getTotalTime=function(){for(var Et=0,we=0;we<Qt.children.length;we++){var Ot=Qt.children[we],Kt=Ot.pausedState?0:Ot.startTime+Ot.totalTime;Et?Et=Math.max(Kt,Et):Et=Kt}return Et},this.updateTickerState=function(){!Qt.children.length||!Qt.children.some(function(Et){return!(Et!=null&&Et.pausedState)&&(!(Et!=null&&Et.reverseState)&&Et.progressTime<Et.totalTime||(Et==null?void 0:Et.reverseState)&&Et.progressTime>0)})?Qt.killAll(!Qt.children.length):Qt.start()},this.start=function(){Qt.tickerKey||(Qt.tickerKey=fr.add(Qt.render))},this.render=function(Et){for(var we=Et.time,Ot=Et.elapsed,Kt=Ot===void 0?0:Ot,dt=Qt.children,Bt=dt.length,$=0;$<Bt;$++){var at=dt[$];if(at){var R=at.startTime-Kt,M=at.startTime+at.totalTime+Kt;we>R&&we<M&&!at.pausedState&&at.render({time:we,elapsed:Kt})}}}}return(0,K.Z)(jt,[{key:"totalTime",get:function(){return this.getTotalTime()}}]),jt}(),kr=ur,yn=C(141e3),un=C.n(yn);un().path=function(jt,Qt){var Et=Qt||{};if(q)return"linear";for(var we=J(jt),Ot=we.getTotalLength(),Kt=Et.rect||100,dt=Et.lengthPixel||200,Bt=[],$=0;$<dt-1;$++)Bt.push(we.getPointAtLength(Ot/(dt-1)*$));return Bt.push(we.getPointAtLength(dt)),function(R,M,A,X){var mt=un().linear(R,M,A,X),Lt=Kt*mt,Pt=Bt.filter(function(Jt){return Jt.x>=Lt})[0]||we.getPointAtLength(mt*Ot);return 1-Pt.y/Kt}};var Vr=un(),$e=function(){function jt(Qt){var Et=this;(0,h.Z)(this,jt),this.item=void 0,this.vars={},this.start=void 0,this.parent=void 0,this.root=void 0,this.startAt={},this.mode=void 0,this.appearTo=0,this.props={},this.index=void 0,this.register=void 0,this.reverseStart=void 0,this.repeatNum=0,this.prevMoment=void 0,this.easing=void 0,this.changeValueToVars=function(dt,Bt,$){var at=(Array.isArray(Bt)||dt.match(/color|fill|stroke|.*shadow/i)&&typeof Bt=="string"||typeof Bt=="string"&&Bt.split(/[\s|,]/).length>1)&&!(dt in _t);if(dt in _t||at)return $?Bt:{value:Bt,plugins:[],array:at};var R=parseFloat(Bt.toString().replace(/=/g,"")),M=Bt.toString().replace(/[^a-z|%]/g,""),A=Bt.toString().charAt(1)==="="?Bt.toString().replace(/[^\+\=|\-\=]/gi,""):"";return{vars:R,unit:M,count:A}},this.setEase=function(dt){if(typeof dt=="function"){Et.easing=dt;return}else if(dt.match(/,/g)){Et.easing=Vr.path(dt);return}Et.easing=Vr[dt]},this.getTotalTime=function(){var dt=Et.props,Bt=dt.duration,$=Bt===void 0?450:Bt,at=dt.delay,R=at===void 0?0:at,M=dt.repeat,A=M===void 0?0:M,X=dt.repeatDelay,mt=X===void 0?0:X;return A===-1?Number.MAX_VALUE:R+$*(A+1)+mt*A},this.getEaseToRatio=function(dt,Bt){var $=Et.props.ease,at=$===void 0?"":$;return(dt===0||dt===1)&&!(typeof at=="function"||at.match(/,/g))?dt:Et.easing(Bt?1-dt:dt,Bt?1:0,Bt?0:1,1)},this.setRatioToVars=function(dt){for(var Bt=Et.vars,$=Et.root,at=0;at<$.targets.length;at++)if($.targets[at])for(var R in Bt){var M=Bt[R];if(M.plugins){R==="PathMotion"?$.vars[at].style=M.plugins[at].render(dt):$.vars[at][R]=M.plugins[at].render(dt);continue}var A=M.vars,X=M.count,mt=M.unit,Lt=Et.start[at][R];$.vars[at][R]=ot(Lt,A,dt,X,mt)}},this.onRegisterAnimate=function(){Et.register=!0;for(var dt=Et.root,Bt=Et.parent,$=Et.startAt,at=[],R=0;R<dt.targets.length;R++){var M=dt.targets[R],A=dt.vars[R],X={};for(var mt in Et.vars){var Lt=Et.vars[mt];if(Lt.plugins){var Pt=new _t[Lt.array?"ArrayPlugin":mt](Lt.value,mt);Pt.target=M,Pt.root=dt,Pt.parent=Bt,Pt.targetIndex=R,Pt.tweenVars=A,Pt.index=Et.index,Pt.startAt=$,X[mt]=Pt.getAnimStart(),Lt.plugins.push(Pt)}else{var Jt,Ie,pe=(Jt=dt.attr?M.getAttribute(mt):A[mt]||M[mt])!==null&&Jt!==void 0?Jt:Ct(mt),je=(Ie=$[mt])!==null&&Ie!==void 0?Ie:pe,br=(0,x.Z)(je)==="object"&&"vars"in je&&"count"in je,Je=br?je.unit:"".concat(je).replace(/[^a-z|%]/g,""),zr=Lt.unit;Je&&Je!==zr&&console.warn("Different units, start unit ".concat(Je,", to value unit ").concat(zr,", remove start unit.")),X[mt]=br?rt(pe,je):parseFloat(je)}}at.push(X)}Et.start=at},this.overflowRatio=function(dt){var Bt=dt<0?0:dt,$=Et.props.duration;return Bt=Bt>$?$:Bt,Bt},this.render=function(dt){var Bt=dt.moment,$=dt.fps,at=$===void 0?0:$,R=dt.silence,M=dt.render,A=Et.parent,X=Et.root,mt=Et.props,Lt=zt(X.targets),Pt=A.onChange,Jt=mt.repeat,Ie=Jt===void 0?0:Jt,pe=mt.type,je=pe===void 0?"to":pe,br=mt.duration,Je=br===void 0?450:br,zr=mt.delay,gn=zr===void 0?0:zr,tr=mt.repeatDelay,xr=tr===void 0?0:tr,Ur=mt.yoyo;Ie=Ie===-1?Number.MAX_VALUE:Ie;var Nr=Bt-gn,fe=Math.floor(Nr/(Je+xr))||0;fe=fe>Ie?Ie:fe,fe=fe<0?0:fe,Nr=Nr-(Je+xr)*fe;var Wt=!!(Ur&&fe%2),ge=je==="from",Ae=Wt&&ge?!1:Wt||ge;Nr=Ae?Je-Nr:Nr;var Se=ge?0:gn,Be=Ae?1:0;if(!Et.register&&Bt>=Se&&(Et.onRegisterAnimate(),(Ae&&Nr<=0||!Ae&&Nr>=Je&&Je)&&(Et.prevMoment=Bt,Be=Ae?0:1),Et.setRatioToVars(Be),Pt({index:Et.index,vars:X.vars})),Et.register&&Bt>gn-at&&Bt<Et.totalTime+at){Nr=Et.overflowRatio(Nr),Be=Ae?1:0,Bt>=Et.totalTime&&Et.mode!=="onComplete"&&Et.prevMoment!==void 0||Et.prevMoment===void 0&&Bt>=Et.totalTime&&Je?(Be=Ae?0:1,Et.mode="onComplete",Et.props.onComplete&&Et.props.onComplete({mode:Et.mode,index:Et.index,moment:Nr,ratio:Be,targets:Lt,vars:zt(X.vars)})):Et.prevMoment===void 0||Bt<=0&&Bt>-at&&Et.mode!=="onStart"&&Et.prevMoment>Bt?(Et.mode="onStart",Et.props.onStart&&Et.props.onStart({mode:Et.mode,index:Et.index,moment:Nr,ratio:Be,targets:Lt,vars:zt(X.vars)})):(Be=Nr&&Je?Nr/Je:0,Et.mode="onUpdate",Et.props.onUpdate&&Et.props.onUpdate({mode:Et.mode,index:Et.index,moment:Nr,ratio:Be,targets:Lt,vars:zt(X.vars)})),Ie&&fe!==Et.repeatNum&&Bt&&Et.mode==="onUpdate"&&(Et.mode="onRepeat",Et.props.onRepeat&&Et.props.onRepeat({mode:Et.mode,index:Et.index,moment:Nr,ratio:Be,targets:Lt,vars:zt(Et.root.vars)})),Et.setRatioToVars(Et.getEaseToRatio(Be,ge)),Ie&&(Et.repeatNum=fe);var vr={mode:Et.mode,moment:Nr,repeat:fe,ratio:Be,targets:X.targets,vars:X.vars,index:Et.index};R&&(vr.silence=R),M&&(vr.render=M),Pt(vr),Et.prevMoment=Bt}},this.item=Qt,this.startAt=(0,k.Z)({},Qt.startAt),Object.keys(this.startAt).forEach(function(dt){Et.startAt[dt]=Et.changeValueToVars(dt,Et.startAt[dt],!0)});var we={};for(var Ot in Qt){var Kt=Qt[Ot];Ot in ft?we[Ot]=Kt:this.vars[Ot]=this.changeValueToVars(Ot,Kt)}this.props=(0,k.Z)((0,k.Z)({},ft),we),this.setEase(this.props.ease)}return(0,K.Z)(jt,[{key:"totalTime",get:function(){return this.getTotalTime()}}]),jt}(),dr=(0,K.Z)(function jt(Qt){var Et=this;(0,h.Z)(this,jt),this.props=void 0,this.id=void 0,this.children=[],this.totalTime=0,this.totalTimeRegion=0,this.childTotalTime=0,this.childRegionTotalTime=0,this.prevMoment=void 0,this.progressTime=0,this.progressMoment=-1,this.startMoment=0,this.startTime=0,this.repeatNum=0,this.mode="onTimelineStart",this.pausedState=void 0,this.reverseState=void 0,this.root=void 0,this.parent=void 0,this.regionStartTime=0,this.regionEndTime=void 0,this.onChangeChild=void 0,this.onChangeTimeline=void 0,this.init=function(){for(var dt=Et.props,Bt=dt.reverse,$=dt.animation,at=dt.moment,R=gt($),M=0;M<R.length;M++){var A=R[M];A.type==="set"&&(A.duration=0);var X=new $e(A);X.index=M;var mt=M?Mt(A,R[M-1]):0;A.appearTo=mt,X.appearTo=mt,Et.addChild(X)}Et.render({time:(Bt?Et.totalTime:0)+Et.startTime,elapsed:16.67}),Et.totalTime||Et.render({time:(Bt?Et.totalTime:0)+Et.startTime,elapsed:16.67}),at?Et.goto(at):Et.play()},this.addChild=function(dt){dt.parent=Et,dt.root=Et.root,Et.children.indexOf(dt)===-1&&(Et.children.push(dt),Et.setTotalTime())},this.setTotalTime=function(){Et.childTotalTime=0,Et.childRegionTotalTime=0;for(var dt=0;dt<Et.children.length;dt++){var Bt=Et.children[dt];if(Bt.appearTo!==Et.childTotalTime){var $=Bt.appearTo+Bt.totalTime;$>Et.childTotalTime&&(Et.childTotalTime=$,Et.childRegionTotalTime=$)}else Et.childTotalTime+=Bt.totalTime,Et.childRegionTotalTime+=Bt.totalTime}Et.regionStartTime&&(Et.childRegionTotalTime-=Et.regionStartTime),Et.regionEndTime&&(Et.childRegionTotalTime=Et.regionEndTime-Et.regionStartTime);var at=Et.props,R=at.repeat,M=R===void 0?0:R,A=at.repeatDelay,X=A===void 0?0:A,mt=at.delay;Et.totalTime=M===-1?Number.MAX_VALUE:mt+Et.childTotalTime*(M+1)+X*M,Et.totalTimeRegion=M===-1?Number.MAX_VALUE:mt+Et.childRegionTotalTime*(M+1)+X*M},this.setStartTimeOrMoment=function(dt){Et.startTime=fr.time,Et.startMoment=dt||Et.progressMoment},this.reRenderCall=function(){Et.render({time:Et.startTime,elapsed:fr.elapsed||fr.frameFPS})},this.play=function(dt){if(dt){var $;($=Et.parent)===null||$===void 0||$.updateTickerState()}else{var Bt;(Bt=Et.parent)===null||Bt===void 0||Bt.addChild(Et)}},this.paused=function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Et.pausedState=dt,Et.setStartTimeOrMoment(),Et.play(dt)},this.reverse=function(dt){Et.reverseState=dt,Et.setStartTimeOrMoment(),Et.play(Et.pausedState)},this.goto=function(dt,Bt){var $=dt-Et.regionStartTime;Et.startTime=fr.time,Et.startMoment=$>Et.totalTime?Et.totalTime:$,Et.progressMoment=Et.startMoment,Et.progressTime=$,Et.play(Et.pausedState),Et.reRenderCall(),!!Bt!==Et.pausedState&&Et.paused(Bt)},this.kill=function(dt){if(typeof dt=="number")Et.paused(),delete Et.children[dt],Et.setTotalTime(),Et.paused(!1);else{var Bt;Et.children=[],(Bt=Et.parent)===null||Bt===void 0||Bt.removeChild(Et)}},this.onChange=function(dt){dt.timelineMoment=Et.progressMoment,Et.onChangeChild(dt)},this.render=function(dt){var Bt=dt.time,$=dt.elapsed,at=$||fr.frameFPS||0,R=Et.totalTime,M=Et.totalTimeRegion,A=Et.childTotalTime,X=Et.childRegionTotalTime,mt=Et.children,Lt=Et.props,Pt=Et.startTime,Jt=Et.reverseState,Ie=Et.pausedState,pe=Et.startMoment,je=Et.onChangeTimeline,br=Et.parent,Je=Et.root,zr=Et.prevMoment,gn=Et.regionStartTime,tr=Lt.repeatDelay,xr=tr===void 0?0:tr,Ur=Lt.yoyo,Nr=Lt.delay,fe=Lt.repeat,Wt=fe===void 0?0:fe;Wt=Wt===-1?Number.MAX_VALUE:Wt;var ge=Bt-Pt-Nr,Ae=Jt?pe-ge:ge+pe;if(!(Ae<-at)){var Se=Ae<0?0:Ae;Se=Se>R?R:Se,Se=pe<gn?Ae:Se,Se=pe>M?pe:Se;var Be=Wt?Math.floor(Se/(X+xr)):0;Be=Wt&&Be>Wt?Wt:Be;var vr=Se-(X+xr)*Be,Mr=!!(Ur&&Be%2);vr=Mr?X-vr:vr,vr=gn+vr;var fn=Jt?!Mr:Mr;if(Et.mode="onTimelineUpdate",typeof zr!="number"&&(Et.mode="onTimelineStart"),Se>=M-Nr&&typeof zr=="number"&&(Et.mode="onTimelineComplete"),Be!==Et.repeatNum&&(Et.mode="onTimelineRepeat",Se>A*Be&&Se<A*Be+at)){for(var Xn=fn?0:mt.length-1;fn?Xn<=mt.length-1:Xn>=0;fn?Xn++:Xn--){var Mn=mt[Xn];fn||(Mn.prevMoment=void 0),Mn.render({moment:fn?Mn.totalTime:0,fps:at})}je({moment:Se,totalTime:R,repeat:Be,mode:Et.mode,targets:Je.targets}),Et.mode="onTimelineUpdate"}Wt&&(Et.repeatNum=Be),Et.progressMoment=Se,Et.prevMoment=Se,Et.progressTime=ge;for(var qn=0;qn<mt.length;qn++){var bn=mt[qn],Vn=bn.totalTime+bn.appearTo,ca=vr>=bn.appearTo-at&&vr<Vn+at;if((bn.mode!=="onComplete"&&vr>Vn+at&&!Mr&&bn.totalTime||typeof bn.mode=="undefined"&&!bn.totalTime)&&(bn.render({moment:bn.totalTime,fps:at}),bn.prevMoment=void 0),vr<bn.appearTo-at&&bn.mode&&bn.mode!=="onStart"&&(bn.render({moment:bn.appearTo,fps:at,silence:!0}),bn.prevMoment=void 0,bn.mode=void 0),ca){var xa=vr<0?0:vr;if(vr>Vn&&bn.mode==="onComplete"&&!Mr)return;xa=vr>Vn?Vn:vr,bn.render({moment:xa-bn.appearTo,fps:at}),Vn||(bn.render({moment:bn.totalTime,fps:at,render:!0}),bn.prevMoment=void 0)}}je({moment:Se,totalTime:R,repeat:Be,mode:Et.mode,targets:Je.targets}),(Ie||M&&Ae+Nr>=M&&!Jt||Jt&&Ae+Nr<=0||!mt.length)&&(br==null||br.removeChild(Et))}},this.props=Qt;var we=this.props,Ot=we.paused,Kt=we.reverse;this.reverseState=Kt,this.pausedState=Ot,this.regionStartTime=Qt.regionStartTime||0,this.regionEndTime=Qt.regionEndTime});_t.push(ve),_t.push(ht),_t.push(se);var ar=0,Qe=new kr,Pr=function(){function jt(Qt,Et){var we=this;(0,h.Z)(this,jt),this.targets=void 0,this.props=void 0,this.timeline=void 0,this.animate=void 0,this.$reverse=!1,this.vars=[],this.initTime=void 0,this.attr=void 0,this.init=function(){var Ot=(0,b.Z)(W().mark(function Kt(dt){var Bt;return W().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:Bt=yt(dt),we.targets[0].tagName&&!we.attr&&(Bt.animation=gt(Bt.animation).map(function(R){var M={style:{}};for(var A in R)A in _t||A in ft?M[A]=R[A]:M.style[A]=R[A];return Object.keys(M.style).length||delete M.style,R.duration&&(R.duration=Math.round(R.duration)),R.delay&&(R.delay=Math.round(R.delay)),R.appearTo&&(R.appearTo=Math.round(R.appearTo)),R.repeatDelay&&(R.repeatDelay=Math.round(R.repeatDelay)),M})),we.animate=new dr(Bt),we.animate.id="TweenOne_".concat(ar),ar++,we.animate.startTime=we.initTime,we.animate.onChangeChild=we.onChange,we.animate.onChangeTimeline=we.onChangeTimeline,we.animate.root=we,we.animate.parent=we.timeline,we.animate.init();case 11:case"end":return at.stop()}},Kt)}));return function(Kt){return Ot.apply(this,arguments)}}(),this.renderToDom=function(){for(var Ot=0;Ot<we.vars.length;Ot++){var Kt=we.vars[Ot];for(var dt in Kt){var Bt=Kt[dt],$=we.targets[Ot];if($)if(we.props.attr&&$.tagName&&$.setAttribute){if(dt==="style")for(var at in Bt)$.style[at]=Bt[dt];$.setAttribute(dt,Bt)}else if(dt in _t){var R=_t[dt].key;if(typeof $[R]=="function")$[R](Bt.attr,Bt.path);else if((0,x.Z)(Bt)==="object"&&(0,x.Z)($[R])==="object"&&R)for(var M in Bt){var A=Bt[M];R==="__self"?$[M]=A:$[R][M]=(0,x.Z)(A)==="object"&&A.text||A}else $[R||dt]=Bt}else $[dt]=Bt}}},this.onChange=function(Ot){Ot.mode==="onComplete"&&Ot.render&&we.renderToDom(),Ot.mode&&we.props.onChange&&!Ot.silence&&(Ot.targets=zt(Ot.targets),Ot.vars=zt(Ot.vars),we.props.onChange(Ot))},this.onChangeTimeline=function(Ot){if(we.renderToDom(),Ot.mode==="onTimelineComplete"){var Kt;(Kt=Ot.targets)===null||Kt===void 0||Kt.forEach(function(dt){delete dt._tweenOneVars})}Ot.mode&&we.props.onChangeTimeline&&(Ot.targets=zt(Ot.targets),Ot.vars=zt(we.vars),we.props.onChangeTimeline(Ot))},this.goto=function(Ot,Kt){we.targets.forEach(function(dt){dt&&Object.keys(dt._tweenOneVars||{}).forEach(function(Bt){delete dt._tweenOneVars[Bt]})}),we.animate.goto(Ot,Kt)},this.kill=function(Ot){we.animate.kill(Ot)},this.targets=Qt,this.props=Et,this.timeline=Qe,this.initTime=fr.time,this.attr=Et.attr,Qt.forEach(function(Ot){we.vars.push(Ot._tweenOneVars)}),this.init(Et)}return(0,K.Z)(jt,[{key:"paused",get:function(){return this.animate.pausedState},set:function(Et){this.animate.paused(Et)}},{key:"reverse",get:function(){return this.$reverse},set:function(Et){this.$reverse=Et,this.animate.reverse(Et)}},{key:"regionStartTime",get:function(){return this.animate.regionStartTime},set:function(Et){this.animate.regionStartTime=Et,this.animate.setTotalTime()}},{key:"regionEndTime",get:function(){return this.animate.regionEndTime||this.animate.totalTime},set:function(Et){this.animate.regionEndTime=Et,this.animate.setTotalTime()}}]),jt}(),Zr=function(Qt,Et){if(!Qt){console.error("Error: targets is undefined.");return}fr.state!=="wake"&&fr.wake();var we=gt(Qt).map(function(Bt){return Bt._tweenOneVars=Bt._tweenOneVars||{},Bt}),Ot=we.filter(function(Bt){return Bt.tagName}),Kt=we.filter(function(Bt){return!Bt.tagName}),dt=[];return Ot.length&&dt.push(new Pr(Ot,Et)),Kt.length&&dt.push(new Pr(Kt,Et)),zt(dt)};Zr.kill=function(jt){typeof jt=="undefined"?Qe.killAll(!0):Qe.kill(gt(jt))},Zr.plugins=_t;var qr=Zr,Sn=qr;function Yn(jt){return!jt&&jt!==0?[]:Array.isArray(jt)?jt:[jt]}function Ir(jt,Qt){if(!jt||!Qt)return!1;var Et=Object.keys(jt),we=Object.keys(Qt);return Et.length&&we.length&&Et.length===we.length?!Et.some(function(Ot){var Kt=jt[Ot],dt=Qt[Ot];if(Array.isArray(Kt)&&Array.isArray(dt)){var Bt=Kt.join(),$=dt.join();Bt===$&&!Bt.match(/\[object object\]/gi)&&(Kt=Bt,dt=$)}return Kt!==dt}):!1}function Br(jt,Qt){if(jt===Qt||Ir(jt,Qt))return!0;if(!jt||!Qt||Object.keys(jt).length!==Object.keys(Qt).length)return!1;var Et=!0,we=function(Kt,dt){var Bt=Object.keys(Kt).length>Object.keys(dt).length?Kt:dt,$=Object.keys(Kt).length>Object.keys(dt).length?dt:Kt;Object.keys(Bt).forEach(function(at){Et&&(at in $||(Et=!1),(0,x.Z)(Bt[at])==="object"&&(0,x.Z)($[at])==="object"?Et=Br(Bt[at],$[at]):typeof Bt[at]=="function"&&typeof $[at]=="function"?Bt[at].toString().replace(/\s+/g,"")!==$[at].toString().replace(/\s+/g,"")&&(Et=!1):Bt[at]!==$[at]&&(Et=!1))})};return Array.isArray(jt)&&Array.isArray(Qt)?jt.forEach(function(Ot,Kt){we(Ot,Qt[Kt])}):we(jt,Qt),Et}var en=["component","componentProps","animation","attr","paused","reverse","repeat","repeatDelay","yoyo","moment","onChange","onChangeTimeline","resetStyle","killPrevAnim"],hn=L.forwardRef(function(jt,Qt){var Et=jt.component,we=Et===void 0?"div":Et,Ot=jt.componentProps,Kt=jt.animation,dt=jt.attr,Bt=jt.paused,$=jt.reverse,at=jt.repeat,R=jt.repeatDelay,M=jt.yoyo,A=jt.moment,X=jt.onChange,mt=jt.onChangeTimeline,Lt=jt.resetStyle,Pt=jt.killPrevAnim,Jt=Pt===void 0?!0:Pt,Ie=(0,T.Z)(jt,en),pe=Ie||{},je=pe.children,br=pe.className,Je=pe.style,zr=Je===void 0?{}:Je,gn=(0,L.useRef)(),tr=(0,L.useRef)(),xr=(0,L.useRef)(),Ur=function(fn,Xn){var Mn=xr.current;if(Mn){if(fn==="moment"){typeof Xn=="number"&&Mn.goto(Xn,Bt);return}Mn[fn]=!!Xn}};O(function(){Ur("paused",Bt)},[Bt]),O(function(){Ur("moment",A)},[A]),O(function(){Ur("reverse",$)},[$]),O(function(){if(!gn.current)return console.warn("Warning: TweenOne domRef is error.");if(!Br(Kt,tr.current)){var Mr=Yn(gn.current).map(function(Mn){return Mn instanceof Element||!(Mn instanceof L.Component)?Mn:(0,D.findDOMNode)(Mn)}).filter(function(Mn,qn){return Mn instanceof Element?Mn:(console.warn("Warning: TweenOne tag[".concat(qn,"] is not dom.")),!1)});if(xr.current&&Jt&&xr.current.kill(),Lt&&xr.current){var fn=we?zr:(0,k.Z)((0,k.Z)({},zr),je.props.style),Xn=Object.keys(fn).map(function(Mn){return"".concat((0,U.Rs)(Mn),":").concat((0,U.YJ)(Mn,fn[Mn]))}).join(";");Mr.forEach(function(Mn){Mn.setAttribute("style",Xn),delete Mn._tweenOneVars})}xr.current=Kt&&Sn(Mr,{animation:Kt,attr:dt,yoyo:M,moment:A,repeat:at,reverse:$,paused:Bt,repeatDelay:R,onChange:X,onChangeTimeline:mt}),tr.current=Kt}},[Kt]),(0,L.useEffect)(function(){return function(){xr.current&&xr.current.kill&&xr.current.kill()}},[]);var Nr=function(fn){gn.current=fn,Qt&&"current"in Qt?Qt.current=fn:typeof Qt=="function"&&Qt(fn)};if(!we&&je&&typeof je!="string"&&typeof je!="boolean"&&typeof je!="number"){var fe=je.props,Wt=fe||{},ge=Wt.style,Ae=Wt.className,Se=Ae===void 0?"":Ae,Be=(0,k.Z)((0,k.Z)({},ge),zr),vr=br?"".concat(br," ").concat(Se).trim():Se;return L.cloneElement(je,{style:Be,ref:Nr,className:(0,E.Z)(new Set(vr.split(/\s+/))).join(" ").trim()||void 0})}return we?(0,L.createElement)(we,(0,k.Z)((0,k.Z)({ref:Nr},Ie),Ot)):(console.warn("Warning: component is null, children must be ReactElement."),je)});hn.isTweenOne=!0,hn.displayName="TweenOne";var xn=hn,_n=["component","componentProps","leave","enter","appear","resetStyle","animatingClassName","onEnd","exclusive"],tt=L.forwardRef(function(jt,Qt){var Et=jt.component,we=Et===void 0?"div":Et,Ot=jt.componentProps,Kt=Ot===void 0?{}:Ot,dt=jt.leave,Bt=dt===void 0?{x:-50,opacity:0}:dt,$=jt.enter,at=$===void 0?{x:50,opacity:0,type:"from"}:$,R=jt.appear,M=R===void 0?!0:R,A=jt.resetStyle,X=A===void 0?!0:A,mt=jt.animatingClassName,Lt=mt===void 0?["tween-one-entering","tween-one-leaving"]:mt,Pt=jt.onEnd,Jt=Pt===void 0?function(){}:Pt,Ie=jt.exclusive,pe=Ie===void 0?!1:Ie,je=(0,T.Z)(jt,_n),br=(0,L.useRef)([]),Je=(0,L.useRef)([]),zr=(0,L.useRef)({}),gn=(0,L.useRef)(!1),tr=(0,L.useRef)([]),xr=(0,L.useRef)({}),Ur=P(y(jt)),Nr=(0,L.useRef)(Ur),fe=(0,L.useState)(Ur),Wt=(0,w.Z)(fe,2),ge=Wt[0],Ae=Wt[1],Se=function(bn){var Vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ca=bn.key;return zr.current[ca]=L.createElement(xn,(0,k.Z)((0,k.Z)({},Vn),{},{key:ca,component:null}),bn),zr.current[ca]},Be=function(bn,Vn){var ca=bn.replace(Lt[Vn?1:0],"").trim();return ca.indexOf(Lt[Vn?0:1])===-1&&(ca="".concat(ca," ").concat(Lt[Vn?0:1]).trim()),ca},vr=function(bn,Vn){var ca=m(Vn,bn);return br.current=[],Je.current=[],bn.forEach(function(xa){if(xa){var Ea=xa.key,Ni=p(Vn,Ea);Ea&&zr.current[Ea]&&(zr.current[Ea]=L.cloneElement(zr.current[Ea],{},xa)),!Ni&&Ea&&br.current.push(Ea)}}),Vn.forEach(function(xa){if(xa){var Ea=xa.key,Ni=p(bn,Ea);!Ni&&Ea&&(Je.current.push(Ea),delete zr.current[Ea])}}),ca},Mr=function(){if(!Object.keys(xr.current).length&&tr.current.length){var bn=vr(tr.current[tr.current.length-1],Nr.current);Ae(bn),tr.current=[]}},fn=function(bn,Vn,ca){var xa=ca.targets,Ea=(0,x.Z)(xa.className)==="object"&&"baseVal"in xa.className,Ni=Vn==="enter"||Vn==="appear";if(bn&&ca.mode==="onTimelineComplete"){if(delete xr.current[bn],Ea?xa.className.baseVal=xa.className.baseVal.replace(Lt[Ni?0:1],"").trim():xa.className=xa.className.replace(Lt[Ni?0:1],"").trim(),Ni)br.current.splice(br.current.indexOf(bn),1),br.current.length||Mr();else if(Vn==="leave"&&(Je.current.splice(Je.current.indexOf(bn),1),Nr.current=Nr.current.filter(function(ei){return bn!==ei.key}),!Je.current.length)){var ti=Nr.current.map(function(ei){return ei.key});Object.keys(zr.current).forEach(function(ei){ti.indexOf(ei)===-1&&delete zr.current[ei]}),Ae(Nr.current)}Jt({key:bn,type:Vn,target:ca.targets})}},Xn=function(bn,Vn,ca){var xa=ca==="leave"?Bt:at;if(ca==="appear"){var Ea=S(M,bn.key,Vn);xa=Ea&&at||null}var Ni=S(xa,bn.key,Vn),ti=function(To){fn(bn.key,ca,To)},ei=ca==="appear"&&!M?bn.props.className:Be(bn.props.className||"",ca==="enter"||ca==="appear")||void 0,Mi={key:bn.key,animation:Ni,onChangeTimeline:ti,resetStyle:X,className:ei};return(bn.key&&br.current.concat(Je.current).indexOf(bn.key)>=0||!gn.current&&xa)&&bn.key&&!zr.current[bn.key]&&(xr.current[bn.key]=ca),Se(bn,Mi)};O(function(){if(gn.current){var qn=P(jt.children).filter(function(Vn){return Vn}),bn=P(Nr.current);Object.keys(xr.current).length&&!pe?tr.current.push(qn):Ae(vr(qn,bn))}},[jt.children]),O(function(){Mr()}),(0,L.useEffect)(function(){gn.current=!0},[]),Nr.current=ge;var Mn=ge.map(function(qn,bn){if(!qn||!qn.key)return qn;var Vn=qn.key;return Je.current.indexOf(Vn)>=0?Xn(qn,Je.current.indexOf(Vn),"leave"):(br.current.indexOf(Vn)>=0||xr.current[Vn]&&Je.current.indexOf(Vn)===-1)&&!(xr.current[Vn]==="enter"&&zr.current[Vn])?Xn(qn,br.current.indexOf(Vn),"enter"):gn.current?zr.current[Vn]:Xn(qn,bn,"appear")});return g?we?(0,L.createElement)(we,(0,k.Z)((0,k.Z)((0,k.Z)({},je),Kt),{},{ref:Qt}),jt.children):L.createElement(L.Fragment,null,jt.children):we?(0,L.createElement)(we,(0,k.Z)((0,k.Z)((0,k.Z)({},je),Kt),{},{ref:Qt}),Mn):Mn[0]?(0,L.cloneElement)(Mn[0],{ref:Qt}):null});tt.displayName="TweenOneGroup",tt.isTweenOneGroup=!0;var ir=tt},217857:function(He,z,C){"use strict";var x;x={value:!0};var k=C(667294),w=C(308273);function T(J,ft){var nt=J==null?null:typeof Symbol!="undefined"&&J[Symbol.iterator]||J["@@iterator"];if(nt!=null){var yt,gt,zt,Mt,Ct=[],rt=!0,ot=!1;try{if(zt=(nt=nt.call(J)).next,ft===0){if(Object(nt)!==nt)return;rt=!1}else for(;!(rt=(yt=zt.call(nt)).done)&&(Ct.push(yt.value),Ct.length!==ft);rt=!0);}catch(Tt){ot=!0,gt=Tt}finally{try{if(!rt&&nt.return!=null&&(Mt=nt.return(),Object(Mt)!==Mt))return}finally{if(ot)throw gt}}return Ct}}function L(J,ft){var nt=Object.keys(J);if(Object.getOwnPropertySymbols){var yt=Object.getOwnPropertySymbols(J);ft&&(yt=yt.filter(function(gt){return Object.getOwnPropertyDescriptor(J,gt).enumerable})),nt.push.apply(nt,yt)}return nt}function P(J){for(var ft=1;ft<arguments.length;ft++){var nt=arguments[ft]!=null?arguments[ft]:{};ft%2?L(Object(nt),!0).forEach(function(yt){p(J,yt,nt[yt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(nt)):L(Object(nt)).forEach(function(yt){Object.defineProperty(J,yt,Object.getOwnPropertyDescriptor(nt,yt))})}return J}function p(J,ft,nt){return ft=b(ft),ft in J?Object.defineProperty(J,ft,{value:nt,enumerable:!0,configurable:!0,writable:!0}):J[ft]=nt,J}function m(){return m=Object.assign?Object.assign.bind():function(J){for(var ft=1;ft<arguments.length;ft++){var nt=arguments[ft];for(var yt in nt)Object.prototype.hasOwnProperty.call(nt,yt)&&(J[yt]=nt[yt])}return J},m.apply(this,arguments)}function S(J,ft){if(J==null)return{};var nt={},yt=Object.keys(J),gt,zt;for(zt=0;zt<yt.length;zt++)gt=yt[zt],!(ft.indexOf(gt)>=0)&&(nt[gt]=J[gt]);return nt}function y(J,ft){if(J==null)return{};var nt=S(J,ft),yt,gt;if(Object.getOwnPropertySymbols){var zt=Object.getOwnPropertySymbols(J);for(gt=0;gt<zt.length;gt++)yt=zt[gt],!(ft.indexOf(yt)>=0)&&Object.prototype.propertyIsEnumerable.call(J,yt)&&(nt[yt]=J[yt])}return nt}function g(J,ft){return O(J)||T(J,ft)||E(J,ft)||F()}function O(J){if(Array.isArray(J))return J}function E(J,ft){if(J){if(typeof J=="string")return D(J,ft);var nt=Object.prototype.toString.call(J).slice(8,-1);if(nt==="Object"&&J.constructor&&(nt=J.constructor.name),nt==="Map"||nt==="Set")return Array.from(J);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return D(J,ft)}}function D(J,ft){(ft==null||ft>J.length)&&(ft=J.length);for(var nt=0,yt=new Array(ft);nt<ft;nt++)yt[nt]=J[nt];return yt}function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W(J,ft){if(typeof J!="object"||J===null)return J;var nt=J[Symbol.toPrimitive];if(nt!==void 0){var yt=nt.call(J,ft||"default");if(typeof yt!="object")return yt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ft==="string"?String:Number)(J)}function b(J){var ft=W(J,"string");return typeof ft=="symbol"?ft:String(ft)}var h=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?k.useLayoutEffect:k.useEffect;function K(J){var ft=k.useRef(J);return h(function(){ft.current=J}),k.useCallback(function(){for(var nt=arguments.length,yt=new Array(nt),gt=0;gt<nt;gt++)yt[gt]=arguments[gt];return ft.current.apply(void 0,yt)},[])}var U=function(ft,nt){var yt=nt.decimal,gt=nt.decimals,zt=nt.duration,Mt=nt.easingFn,Ct=nt.end,rt=nt.formattingFn,ot=nt.numerals,Tt=nt.prefix,Rt=nt.separator,st=nt.start,bt=nt.suffix,Ft=nt.useEasing,Ht=nt.useGrouping,_t=nt.useIndianSeparators,Xt=nt.enableScrollSpy,ee=nt.scrollSpyDelay,se=nt.scrollSpyOnce;return new w.CountUp(ft,Ct,{startVal:st,duration:zt,decimal:yt,decimalPlaces:gt,easingFn:Mt,formattingFn:rt,numerals:ot,separator:Rt,prefix:Tt,suffix:bt,useEasing:Ft,useIndianSeparators:_t,useGrouping:Ht,enableScrollSpy:Xt,scrollSpyDelay:ee,scrollSpyOnce:se})},Y=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],Z={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},H=function(ft){var nt=Object.fromEntries(Object.entries(ft).filter(function(ve){var Ue=g(ve,2),xe=Ue[1];return xe!==void 0})),yt=k.useMemo(function(){return P(P({},Z),nt)},[ft]),gt=yt.ref,zt=yt.startOnMount,Mt=yt.enableReinitialize,Ct=yt.delay,rt=yt.onEnd,ot=yt.onStart,Tt=yt.onPauseResume,Rt=yt.onReset,st=yt.onUpdate,bt=y(yt,Y),Ft=k.useRef(),Ht=k.useRef(),_t=k.useRef(!1),Xt=K(function(){return U(typeof gt=="string"?gt:gt.current,bt)}),ee=K(function(ve){var Ue=Ft.current;if(Ue&&!ve)return Ue;var xe=Xt();return Ft.current=xe,xe}),se=K(function(){var ve=function(){return ee(!0).start(function(){rt==null||rt({pauseResume:ue,reset:Ut,start:Pe,update:oe})})};Ct&&Ct>0?Ht.current=setTimeout(ve,Ct*1e3):ve(),ot==null||ot({pauseResume:ue,reset:Ut,update:oe})}),ue=K(function(){ee().pauseResume(),Tt==null||Tt({reset:Ut,start:Pe,update:oe})}),Ut=K(function(){ee().el&&(Ht.current&&clearTimeout(Ht.current),ee().reset(),Rt==null||Rt({pauseResume:ue,start:Pe,update:oe}))}),oe=K(function(ve){ee().update(ve),st==null||st({pauseResume:ue,reset:Ut,start:Pe})}),Pe=K(function(){Ut(),se()}),te=K(function(ve){zt&&(ve&&Ut(),se())});return k.useEffect(function(){_t.current?Mt&&te(!0):(_t.current=!0,te())},[Mt,_t,te,Ct,ft.start,ft.suffix,ft.prefix,ft.duration,ft.separator,ft.decimals,ft.decimal,ft.formattingFn]),k.useEffect(function(){return function(){Ut()}},[Ut]),{start:Pe,pauseResume:ue,reset:Ut,update:oe,getCountUp:ee}},q=["className","redraw","containerProps","children","style"],Q=function(ft){var nt=ft.className,yt=ft.redraw,gt=ft.containerProps,zt=ft.children,Mt=ft.style,Ct=y(ft,q),rt=k.useRef(null),ot=k.useRef(!1),Tt=H(P(P({},Ct),{},{ref:rt,startOnMount:typeof zt!="function"||ft.delay===0,enableReinitialize:!1})),Rt=Tt.start,st=Tt.reset,bt=Tt.update,Ft=Tt.pauseResume,Ht=Tt.getCountUp,_t=K(function(){Rt()}),Xt=K(function(ue){ft.preserveValue||st(),bt(ue)}),ee=K(function(){if(typeof ft.children=="function"&&!(rt.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}Ht()});k.useEffect(function(){ee()},[ee]),k.useEffect(function(){ot.current&&Xt(ft.end)},[ft.end,Xt]);var se=yt&&ft;return k.useEffect(function(){yt&&ot.current&&_t()},[_t,yt,se]),k.useEffect(function(){!yt&&ot.current&&_t()},[_t,yt,ft.start,ft.suffix,ft.prefix,ft.duration,ft.separator,ft.decimals,ft.decimal,ft.className,ft.formattingFn]),k.useEffect(function(){ot.current=!0},[]),typeof zt=="function"?zt({countUpRef:rt,start:Rt,reset:st,update:bt,pauseResume:Ft,getCountUp:Ht}):k.createElement("span",m({className:nt,ref:rt,style:Mt},gt),typeof ft.start!="undefined"?Ht().formattingFn(ft.start):"")};z.ZP=Q,x=H},175668:function(He,z,C){"use strict";function x(st){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(bt){return typeof bt}:function(bt){return bt&&typeof Symbol=="function"&&bt.constructor===Symbol&&bt!==Symbol.prototype?"symbol":typeof bt},x(st)}Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"DraggableCore",{enumerable:!0,get:function(){return S.default}}),z.default=void 0;var k=D(C(667294)),w=O(C(45697)),T=O(C(973935)),L=O(C(386010)),P=C(381825),p=C(102849),m=C(909280),S=O(C(180783)),y=O(C(955904)),g=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function O(st){return st&&st.__esModule?st:{default:st}}function E(st){if(typeof WeakMap!="function")return null;var bt=new WeakMap,Ft=new WeakMap;return(E=function(_t){return _t?Ft:bt})(st)}function D(st,bt){if(!bt&&st&&st.__esModule)return st;if(st===null||x(st)!=="object"&&typeof st!="function")return{default:st};var Ft=E(bt);if(Ft&&Ft.has(st))return Ft.get(st);var Ht={},_t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Xt in st)if(Xt!=="default"&&Object.prototype.hasOwnProperty.call(st,Xt)){var ee=_t?Object.getOwnPropertyDescriptor(st,Xt):null;ee&&(ee.get||ee.set)?Object.defineProperty(Ht,Xt,ee):Ht[Xt]=st[Xt]}return Ht.default=st,Ft&&Ft.set(st,Ht),Ht}function F(){return F=Object.assign||function(st){for(var bt=1;bt<arguments.length;bt++){var Ft=arguments[bt];for(var Ht in Ft)Object.prototype.hasOwnProperty.call(Ft,Ht)&&(st[Ht]=Ft[Ht])}return st},F.apply(this,arguments)}function W(st,bt){if(st==null)return{};var Ft=b(st,bt),Ht,_t;if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(st);for(_t=0;_t<Xt.length;_t++)Ht=Xt[_t],!(bt.indexOf(Ht)>=0)&&Object.prototype.propertyIsEnumerable.call(st,Ht)&&(Ft[Ht]=st[Ht])}return Ft}function b(st,bt){if(st==null)return{};var Ft={},Ht=Object.keys(st),_t,Xt;for(Xt=0;Xt<Ht.length;Xt++)_t=Ht[Xt],!(bt.indexOf(_t)>=0)&&(Ft[_t]=st[_t]);return Ft}function h(st,bt){var Ft=Object.keys(st);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(st);bt&&(Ht=Ht.filter(function(_t){return Object.getOwnPropertyDescriptor(st,_t).enumerable})),Ft.push.apply(Ft,Ht)}return Ft}function K(st){for(var bt=1;bt<arguments.length;bt++){var Ft=arguments[bt]!=null?arguments[bt]:{};bt%2?h(Object(Ft),!0).forEach(function(Ht){Tt(st,Ht,Ft[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(st,Object.getOwnPropertyDescriptors(Ft)):h(Object(Ft)).forEach(function(Ht){Object.defineProperty(st,Ht,Object.getOwnPropertyDescriptor(Ft,Ht))})}return st}function U(st,bt){return Q(st)||q(st,bt)||Z(st,bt)||Y()}function Y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z(st,bt){if(st){if(typeof st=="string")return H(st,bt);var Ft=Object.prototype.toString.call(st).slice(8,-1);if(Ft==="Object"&&st.constructor&&(Ft=st.constructor.name),Ft==="Map"||Ft==="Set")return Array.from(st);if(Ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ft))return H(st,bt)}}function H(st,bt){(bt==null||bt>st.length)&&(bt=st.length);for(var Ft=0,Ht=new Array(bt);Ft<bt;Ft++)Ht[Ft]=st[Ft];return Ht}function q(st,bt){var Ft=st==null?null:typeof Symbol!="undefined"&&st[Symbol.iterator]||st["@@iterator"];if(Ft!=null){var Ht=[],_t=!0,Xt=!1,ee,se;try{for(Ft=Ft.call(st);!(_t=(ee=Ft.next()).done)&&(Ht.push(ee.value),!(bt&&Ht.length===bt));_t=!0);}catch(ue){Xt=!0,se=ue}finally{try{!_t&&Ft.return!=null&&Ft.return()}finally{if(Xt)throw se}}return Ht}}function Q(st){if(Array.isArray(st))return st}function J(st,bt){if(!(st instanceof bt))throw new TypeError("Cannot call a class as a function")}function ft(st,bt){for(var Ft=0;Ft<bt.length;Ft++){var Ht=bt[Ft];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(st,Ht.key,Ht)}}function nt(st,bt,Ft){return bt&&ft(st.prototype,bt),Ft&&ft(st,Ft),Object.defineProperty(st,"prototype",{writable:!1}),st}function yt(st,bt){if(typeof bt!="function"&&bt!==null)throw new TypeError("Super expression must either be null or a function");st.prototype=Object.create(bt&&bt.prototype,{constructor:{value:st,writable:!0,configurable:!0}}),Object.defineProperty(st,"prototype",{writable:!1}),bt&&gt(st,bt)}function gt(st,bt){return gt=Object.setPrototypeOf||function(Ht,_t){return Ht.__proto__=_t,Ht},gt(st,bt)}function zt(st){var bt=rt();return function(){var Ht=ot(st),_t;if(bt){var Xt=ot(this).constructor;_t=Reflect.construct(Ht,arguments,Xt)}else _t=Ht.apply(this,arguments);return Mt(this,_t)}}function Mt(st,bt){if(bt&&(x(bt)==="object"||typeof bt=="function"))return bt;if(bt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ct(st)}function Ct(st){if(st===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return st}function rt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(st){return!1}}function ot(st){return ot=Object.setPrototypeOf?Object.getPrototypeOf:function(Ft){return Ft.__proto__||Object.getPrototypeOf(Ft)},ot(st)}function Tt(st,bt,Ft){return bt in st?Object.defineProperty(st,bt,{value:Ft,enumerable:!0,configurable:!0,writable:!0}):st[bt]=Ft,st}var Rt=function(st){yt(Ft,st);var bt=zt(Ft);function Ft(Ht){var _t;return J(this,Ft),_t=bt.call(this,Ht),Tt(Ct(_t),"onDragStart",function(Xt,ee){(0,y.default)("Draggable: onDragStart: %j",ee);var se=_t.props.onStart(Xt,(0,p.createDraggableData)(Ct(_t),ee));if(se===!1)return!1;_t.setState({dragging:!0,dragged:!0})}),Tt(Ct(_t),"onDrag",function(Xt,ee){if(!_t.state.dragging)return!1;(0,y.default)("Draggable: onDrag: %j",ee);var se=(0,p.createDraggableData)(Ct(_t),ee),ue={x:se.x,y:se.y};if(_t.props.bounds){var Ut=ue.x,oe=ue.y;ue.x+=_t.state.slackX,ue.y+=_t.state.slackY;var Pe=(0,p.getBoundPosition)(Ct(_t),ue.x,ue.y),te=U(Pe,2),ve=te[0],Ue=te[1];ue.x=ve,ue.y=Ue,ue.slackX=_t.state.slackX+(Ut-ue.x),ue.slackY=_t.state.slackY+(oe-ue.y),se.x=ue.x,se.y=ue.y,se.deltaX=ue.x-_t.state.x,se.deltaY=ue.y-_t.state.y}var xe=_t.props.onDrag(Xt,se);if(xe===!1)return!1;_t.setState(ue)}),Tt(Ct(_t),"onDragStop",function(Xt,ee){if(!_t.state.dragging)return!1;var se=_t.props.onStop(Xt,(0,p.createDraggableData)(Ct(_t),ee));if(se===!1)return!1;(0,y.default)("Draggable: onDragStop: %j",ee);var ue={dragging:!1,slackX:0,slackY:0},Ut=!!_t.props.position;if(Ut){var oe=_t.props.position,Pe=oe.x,te=oe.y;ue.x=Pe,ue.y=te}_t.setState(ue)}),_t.state={dragging:!1,dragged:!1,x:Ht.position?Ht.position.x:Ht.defaultPosition.x,y:Ht.position?Ht.position.y:Ht.defaultPosition.y,prevPropsPosition:K({},Ht.position),slackX:0,slackY:0,isElementSVG:!1},Ht.position&&!(Ht.onDrag||Ht.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),_t}return nt(Ft,[{key:"componentDidMount",value:function(){typeof window.SVGElement!="undefined"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var _t,Xt,ee;return(_t=(Xt=this.props)===null||Xt===void 0||(ee=Xt.nodeRef)===null||ee===void 0?void 0:ee.current)!==null&&_t!==void 0?_t:T.default.findDOMNode(this)}},{key:"render",value:function(){var _t,Xt=this.props,ee=Xt.axis,se=Xt.bounds,ue=Xt.children,Ut=Xt.defaultPosition,oe=Xt.defaultClassName,Pe=Xt.defaultClassNameDragging,te=Xt.defaultClassNameDragged,ve=Xt.position,Ue=Xt.positionOffset,xe=Xt.scale,Re=W(Xt,g),de={},ht=null,ae=!!ve,Le=!ae||this.state.dragging,Ze=ve||Ut,qe={x:(0,p.canDragX)(this)&&Le?this.state.x:Ze.x,y:(0,p.canDragY)(this)&&Le?this.state.y:Ze.y};this.state.isElementSVG?ht=(0,P.createSVGTransform)(qe,Ue):de=(0,P.createCSSTransform)(qe,Ue);var fr=(0,L.default)(ue.props.className||"",oe,(_t={},Tt(_t,Pe,this.state.dragging),Tt(_t,te,this.state.dragged),_t));return k.createElement(S.default,F({},Re,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),k.cloneElement(k.Children.only(ue),{className:fr,style:K(K({},ue.props.style),de),transform:ht}))}}],[{key:"getDerivedStateFromProps",value:function(_t,Xt){var ee=_t.position,se=Xt.prevPropsPosition;return ee&&(!se||ee.x!==se.x||ee.y!==se.y)?((0,y.default)("Draggable: getDerivedStateFromProps %j",{position:ee,prevPropsPosition:se}),{x:ee.x,y:ee.y,prevPropsPosition:K({},ee)}):null}}]),Ft}(k.Component);z.default=Rt,Tt(Rt,"displayName","Draggable"),Tt(Rt,"propTypes",K(K({},S.default.propTypes),{},{axis:w.default.oneOf(["both","x","y","none"]),bounds:w.default.oneOfType([w.default.shape({left:w.default.number,right:w.default.number,top:w.default.number,bottom:w.default.number}),w.default.string,w.default.oneOf([!1])]),defaultClassName:w.default.string,defaultClassNameDragging:w.default.string,defaultClassNameDragged:w.default.string,defaultPosition:w.default.shape({x:w.default.number,y:w.default.number}),positionOffset:w.default.shape({x:w.default.oneOfType([w.default.number,w.default.string]),y:w.default.oneOfType([w.default.number,w.default.string])}),position:w.default.shape({x:w.default.number,y:w.default.number}),className:m.dontSetMe,style:m.dontSetMe,transform:m.dontSetMe})),Tt(Rt,"defaultProps",K(K({},S.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},180783:function(He,z,C){"use strict";function x(Mt){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},x(Mt)}Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var k=g(C(667294)),w=S(C(45697)),T=S(C(973935)),L=C(381825),P=C(102849),p=C(909280),m=S(C(955904));function S(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}}function y(Mt){if(typeof WeakMap!="function")return null;var Ct=new WeakMap,rt=new WeakMap;return(y=function(Tt){return Tt?rt:Ct})(Mt)}function g(Mt,Ct){if(!Ct&&Mt&&Mt.__esModule)return Mt;if(Mt===null||x(Mt)!=="object"&&typeof Mt!="function")return{default:Mt};var rt=y(Ct);if(rt&&rt.has(Mt))return rt.get(Mt);var ot={},Tt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Rt in Mt)if(Rt!=="default"&&Object.prototype.hasOwnProperty.call(Mt,Rt)){var st=Tt?Object.getOwnPropertyDescriptor(Mt,Rt):null;st&&(st.get||st.set)?Object.defineProperty(ot,Rt,st):ot[Rt]=Mt[Rt]}return ot.default=Mt,rt&&rt.set(Mt,ot),ot}function O(Mt,Ct){return b(Mt)||W(Mt,Ct)||D(Mt,Ct)||E()}function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Mt,Ct){if(Mt){if(typeof Mt=="string")return F(Mt,Ct);var rt=Object.prototype.toString.call(Mt).slice(8,-1);if(rt==="Object"&&Mt.constructor&&(rt=Mt.constructor.name),rt==="Map"||rt==="Set")return Array.from(Mt);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return F(Mt,Ct)}}function F(Mt,Ct){(Ct==null||Ct>Mt.length)&&(Ct=Mt.length);for(var rt=0,ot=new Array(Ct);rt<Ct;rt++)ot[rt]=Mt[rt];return ot}function W(Mt,Ct){var rt=Mt==null?null:typeof Symbol!="undefined"&&Mt[Symbol.iterator]||Mt["@@iterator"];if(rt!=null){var ot=[],Tt=!0,Rt=!1,st,bt;try{for(rt=rt.call(Mt);!(Tt=(st=rt.next()).done)&&(ot.push(st.value),!(Ct&&ot.length===Ct));Tt=!0);}catch(Ft){Rt=!0,bt=Ft}finally{try{!Tt&&rt.return!=null&&rt.return()}finally{if(Rt)throw bt}}return ot}}function b(Mt){if(Array.isArray(Mt))return Mt}function h(Mt,Ct){if(!(Mt instanceof Ct))throw new TypeError("Cannot call a class as a function")}function K(Mt,Ct){for(var rt=0;rt<Ct.length;rt++){var ot=Ct[rt];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Mt,ot.key,ot)}}function U(Mt,Ct,rt){return Ct&&K(Mt.prototype,Ct),rt&&K(Mt,rt),Object.defineProperty(Mt,"prototype",{writable:!1}),Mt}function Y(Mt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),Ct&&Z(Mt,Ct)}function Z(Mt,Ct){return Z=Object.setPrototypeOf||function(ot,Tt){return ot.__proto__=Tt,ot},Z(Mt,Ct)}function H(Mt){var Ct=J();return function(){var ot=ft(Mt),Tt;if(Ct){var Rt=ft(this).constructor;Tt=Reflect.construct(ot,arguments,Rt)}else Tt=ot.apply(this,arguments);return q(this,Tt)}}function q(Mt,Ct){if(Ct&&(x(Ct)==="object"||typeof Ct=="function"))return Ct;if(Ct!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q(Mt)}function Q(Mt){if(Mt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt}function J(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}function ft(Mt){return ft=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},ft(Mt)}function nt(Mt,Ct,rt){return Ct in Mt?Object.defineProperty(Mt,Ct,{value:rt,enumerable:!0,configurable:!0,writable:!0}):Mt[Ct]=rt,Mt}var yt={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},gt=yt.mouse,zt=function(Mt){Y(rt,Mt);var Ct=H(rt);function rt(){var ot;h(this,rt);for(var Tt=arguments.length,Rt=new Array(Tt),st=0;st<Tt;st++)Rt[st]=arguments[st];return ot=Ct.call.apply(Ct,[this].concat(Rt)),nt(Q(ot),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),nt(Q(ot),"mounted",!1),nt(Q(ot),"handleDragStart",function(bt){if(ot.props.onMouseDown(bt),!ot.props.allowAnyClick&&typeof bt.button=="number"&&bt.button!==0)return!1;var Ft=ot.findDOMNode();if(!Ft||!Ft.ownerDocument||!Ft.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Ht=Ft.ownerDocument;if(!(ot.props.disabled||!(bt.target instanceof Ht.defaultView.Node)||ot.props.handle&&!(0,L.matchesSelectorAndParentsTo)(bt.target,ot.props.handle,Ft)||ot.props.cancel&&(0,L.matchesSelectorAndParentsTo)(bt.target,ot.props.cancel,Ft))){bt.type==="touchstart"&&bt.preventDefault();var _t=(0,L.getTouchIdentifier)(bt);ot.setState({touchIdentifier:_t});var Xt=(0,P.getControlPosition)(bt,_t,Q(ot));if(Xt!=null){var ee=Xt.x,se=Xt.y,ue=(0,P.createCoreData)(Q(ot),ee,se);(0,m.default)("DraggableCore: handleDragStart: %j",ue),(0,m.default)("calling",ot.props.onStart);var Ut=ot.props.onStart(bt,ue);Ut===!1||ot.mounted===!1||(ot.props.enableUserSelectHack&&(0,L.addUserSelectStyles)(Ht),ot.setState({dragging:!0,lastX:ee,lastY:se}),(0,L.addEvent)(Ht,gt.move,ot.handleDrag),(0,L.addEvent)(Ht,gt.stop,ot.handleDragStop))}}}),nt(Q(ot),"handleDrag",function(bt){var Ft=(0,P.getControlPosition)(bt,ot.state.touchIdentifier,Q(ot));if(Ft!=null){var Ht=Ft.x,_t=Ft.y;if(Array.isArray(ot.props.grid)){var Xt=Ht-ot.state.lastX,ee=_t-ot.state.lastY,se=(0,P.snapToGrid)(ot.props.grid,Xt,ee),ue=O(se,2);if(Xt=ue[0],ee=ue[1],!Xt&&!ee)return;Ht=ot.state.lastX+Xt,_t=ot.state.lastY+ee}var Ut=(0,P.createCoreData)(Q(ot),Ht,_t);(0,m.default)("DraggableCore: handleDrag: %j",Ut);var oe=ot.props.onDrag(bt,Ut);if(oe===!1||ot.mounted===!1){try{ot.handleDragStop(new MouseEvent("mouseup"))}catch(te){var Pe=document.createEvent("MouseEvents");Pe.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),ot.handleDragStop(Pe)}return}ot.setState({lastX:Ht,lastY:_t})}}),nt(Q(ot),"handleDragStop",function(bt){if(ot.state.dragging){var Ft=(0,P.getControlPosition)(bt,ot.state.touchIdentifier,Q(ot));if(Ft!=null){var Ht=Ft.x,_t=Ft.y;if(Array.isArray(ot.props.grid)){var Xt=Ht-ot.state.lastX||0,ee=_t-ot.state.lastY||0,se=(0,P.snapToGrid)(ot.props.grid,Xt,ee),ue=O(se,2);Xt=ue[0],ee=ue[1],Ht=ot.state.lastX+Xt,_t=ot.state.lastY+ee}var Ut=(0,P.createCoreData)(Q(ot),Ht,_t),oe=ot.props.onStop(bt,Ut);if(oe===!1||ot.mounted===!1)return!1;var Pe=ot.findDOMNode();Pe&&ot.props.enableUserSelectHack&&(0,L.removeUserSelectStyles)(Pe.ownerDocument),(0,m.default)("DraggableCore: handleDragStop: %j",Ut),ot.setState({dragging:!1,lastX:NaN,lastY:NaN}),Pe&&((0,m.default)("DraggableCore: Removing handlers"),(0,L.removeEvent)(Pe.ownerDocument,gt.move,ot.handleDrag),(0,L.removeEvent)(Pe.ownerDocument,gt.stop,ot.handleDragStop))}}}),nt(Q(ot),"onMouseDown",function(bt){return gt=yt.mouse,ot.handleDragStart(bt)}),nt(Q(ot),"onMouseUp",function(bt){return gt=yt.mouse,ot.handleDragStop(bt)}),nt(Q(ot),"onTouchStart",function(bt){return gt=yt.touch,ot.handleDragStart(bt)}),nt(Q(ot),"onTouchEnd",function(bt){return gt=yt.touch,ot.handleDragStop(bt)}),ot}return U(rt,[{key:"componentDidMount",value:function(){this.mounted=!0;var Tt=this.findDOMNode();Tt&&(0,L.addEvent)(Tt,yt.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var Tt=this.findDOMNode();if(Tt){var Rt=Tt.ownerDocument;(0,L.removeEvent)(Rt,yt.mouse.move,this.handleDrag),(0,L.removeEvent)(Rt,yt.touch.move,this.handleDrag),(0,L.removeEvent)(Rt,yt.mouse.stop,this.handleDragStop),(0,L.removeEvent)(Rt,yt.touch.stop,this.handleDragStop),(0,L.removeEvent)(Tt,yt.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,L.removeUserSelectStyles)(Rt)}}},{key:"findDOMNode",value:function(){var Tt,Rt,st;return(Tt=this.props)!==null&&Tt!==void 0&&Tt.nodeRef?(Rt=this.props)===null||Rt===void 0||(st=Rt.nodeRef)===null||st===void 0?void 0:st.current:T.default.findDOMNode(this)}},{key:"render",value:function(){return k.cloneElement(k.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),rt}(k.Component);z.default=zt,nt(zt,"displayName","DraggableCore"),nt(zt,"propTypes",{allowAnyClick:w.default.bool,disabled:w.default.bool,enableUserSelectHack:w.default.bool,offsetParent:function(Ct,rt){if(Ct[rt]&&Ct[rt].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:w.default.arrayOf(w.default.number),handle:w.default.string,cancel:w.default.string,nodeRef:w.default.object,onStart:w.default.func,onDrag:w.default.func,onStop:w.default.func,onMouseDown:w.default.func,scale:w.default.number,className:p.dontSetMe,style:p.dontSetMe,transform:p.dontSetMe}),nt(zt,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},861193:function(He,z,C){"use strict";var x=C(175668),k=x.default,w=x.DraggableCore;He.exports=k,He.exports.default=k,He.exports.DraggableCore=w},381825:function(He,z,C){"use strict";function x(nt){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(yt){return typeof yt}:function(yt){return yt&&typeof Symbol=="function"&&yt.constructor===Symbol&&yt!==Symbol.prototype?"symbol":typeof yt},x(nt)}Object.defineProperty(z,"__esModule",{value:!0}),z.addClassName=J,z.addEvent=O,z.addUserSelectStyles=q,z.createCSSTransform=K,z.createSVGTransform=U,z.getTouch=Z,z.getTouchIdentifier=H,z.getTranslation=Y,z.innerHeight=W,z.innerWidth=b,z.matchesSelector=y,z.matchesSelectorAndParentsTo=g,z.offsetXYFromParent=h,z.outerHeight=D,z.outerWidth=F,z.removeClassName=ft,z.removeEvent=E,z.removeUserSelectStyles=Q;var k=C(909280),w=L(C(138650));function T(nt){if(typeof WeakMap!="function")return null;var yt=new WeakMap,gt=new WeakMap;return(T=function(Mt){return Mt?gt:yt})(nt)}function L(nt,yt){if(!yt&&nt&&nt.__esModule)return nt;if(nt===null||x(nt)!=="object"&&typeof nt!="function")return{default:nt};var gt=T(yt);if(gt&&gt.has(nt))return gt.get(nt);var zt={},Mt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ct in nt)if(Ct!=="default"&&Object.prototype.hasOwnProperty.call(nt,Ct)){var rt=Mt?Object.getOwnPropertyDescriptor(nt,Ct):null;rt&&(rt.get||rt.set)?Object.defineProperty(zt,Ct,rt):zt[Ct]=nt[Ct]}return zt.default=nt,gt&&gt.set(nt,zt),zt}function P(nt,yt){var gt=Object.keys(nt);if(Object.getOwnPropertySymbols){var zt=Object.getOwnPropertySymbols(nt);yt&&(zt=zt.filter(function(Mt){return Object.getOwnPropertyDescriptor(nt,Mt).enumerable})),gt.push.apply(gt,zt)}return gt}function p(nt){for(var yt=1;yt<arguments.length;yt++){var gt=arguments[yt]!=null?arguments[yt]:{};yt%2?P(Object(gt),!0).forEach(function(zt){m(nt,zt,gt[zt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(gt)):P(Object(gt)).forEach(function(zt){Object.defineProperty(nt,zt,Object.getOwnPropertyDescriptor(gt,zt))})}return nt}function m(nt,yt,gt){return yt in nt?Object.defineProperty(nt,yt,{value:gt,enumerable:!0,configurable:!0,writable:!0}):nt[yt]=gt,nt}var S="";function y(nt,yt){return S||(S=(0,k.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(gt){return(0,k.isFunction)(nt[gt])})),(0,k.isFunction)(nt[S])?nt[S](yt):!1}function g(nt,yt,gt){var zt=nt;do{if(y(zt,yt))return!0;if(zt===gt)return!1;zt=zt.parentNode}while(zt);return!1}function O(nt,yt,gt,zt){if(nt){var Mt=p({capture:!0},zt);nt.addEventListener?nt.addEventListener(yt,gt,Mt):nt.attachEvent?nt.attachEvent("on"+yt,gt):nt["on"+yt]=gt}}function E(nt,yt,gt,zt){if(nt){var Mt=p({capture:!0},zt);nt.removeEventListener?nt.removeEventListener(yt,gt,Mt):nt.detachEvent?nt.detachEvent("on"+yt,gt):nt["on"+yt]=null}}function D(nt){var yt=nt.clientHeight,gt=nt.ownerDocument.defaultView.getComputedStyle(nt);return yt+=(0,k.int)(gt.borderTopWidth),yt+=(0,k.int)(gt.borderBottomWidth),yt}function F(nt){var yt=nt.clientWidth,gt=nt.ownerDocument.defaultView.getComputedStyle(nt);return yt+=(0,k.int)(gt.borderLeftWidth),yt+=(0,k.int)(gt.borderRightWidth),yt}function W(nt){var yt=nt.clientHeight,gt=nt.ownerDocument.defaultView.getComputedStyle(nt);return yt-=(0,k.int)(gt.paddingTop),yt-=(0,k.int)(gt.paddingBottom),yt}function b(nt){var yt=nt.clientWidth,gt=nt.ownerDocument.defaultView.getComputedStyle(nt);return yt-=(0,k.int)(gt.paddingLeft),yt-=(0,k.int)(gt.paddingRight),yt}function h(nt,yt,gt){var zt=yt===yt.ownerDocument.body,Mt=zt?{left:0,top:0}:yt.getBoundingClientRect(),Ct=(nt.clientX+yt.scrollLeft-Mt.left)/gt,rt=(nt.clientY+yt.scrollTop-Mt.top)/gt;return{x:Ct,y:rt}}function K(nt,yt){var gt=Y(nt,yt,"px");return m({},(0,w.browserPrefixToKey)("transform",w.default),gt)}function U(nt,yt){var gt=Y(nt,yt,"");return gt}function Y(nt,yt,gt){var zt=nt.x,Mt=nt.y,Ct="translate(".concat(zt).concat(gt,",").concat(Mt).concat(gt,")");if(yt){var rt="".concat(typeof yt.x=="string"?yt.x:yt.x+gt),ot="".concat(typeof yt.y=="string"?yt.y:yt.y+gt);Ct="translate(".concat(rt,", ").concat(ot,")")+Ct}return Ct}function Z(nt,yt){return nt.targetTouches&&(0,k.findInArray)(nt.targetTouches,function(gt){return yt===gt.identifier})||nt.changedTouches&&(0,k.findInArray)(nt.changedTouches,function(gt){return yt===gt.identifier})}function H(nt){if(nt.targetTouches&&nt.targetTouches[0])return nt.targetTouches[0].identifier;if(nt.changedTouches&&nt.changedTouches[0])return nt.changedTouches[0].identifier}function q(nt){if(nt){var yt=nt.getElementById("react-draggable-style-el");yt||(yt=nt.createElement("style"),yt.type="text/css",yt.id="react-draggable-style-el",yt.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,yt.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,nt.getElementsByTagName("head")[0].appendChild(yt)),nt.body&&J(nt.body,"react-draggable-transparent-selection")}}function Q(nt){if(nt)try{if(nt.body&&ft(nt.body,"react-draggable-transparent-selection"),nt.selection)nt.selection.empty();else{var yt=(nt.defaultView||window).getSelection();yt&&yt.type!=="Caret"&&yt.removeAllRanges()}}catch(gt){}}function J(nt,yt){nt.classList?nt.classList.add(yt):nt.className.match(new RegExp("(?:^|\\s)".concat(yt,"(?!\\S)")))||(nt.className+=" ".concat(yt))}function ft(nt,yt){nt.classList?nt.classList.remove(yt):nt.className=nt.className.replace(new RegExp("(?:^|\\s)".concat(yt,"(?!\\S)"),"g"),"")}},138650:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.browserPrefixToKey=k,z.browserPrefixToStyle=w,z.default=void 0,z.getPrefix=x;var C=["Moz","Webkit","O","ms"];function x(){var P,p,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window=="undefined")return"";var S=(P=window.document)===null||P===void 0||(p=P.documentElement)===null||p===void 0?void 0:p.style;if(!S||m in S)return"";for(var y=0;y<C.length;y++)if(k(m,C[y])in S)return C[y];return""}function k(P,p){return p?"".concat(p).concat(T(P)):P}function w(P,p){return p?"-".concat(p.toLowerCase(),"-").concat(P):P}function T(P){for(var p="",m=!0,S=0;S<P.length;S++)m?(p+=P[S].toUpperCase(),m=!1):P[S]==="-"?m=!0:p+=P[S];return p}var L=x();z.default=L},955904:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=C;function C(){var x}},102849:function(He,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.canDragX=L,z.canDragY=P,z.createCoreData=m,z.createDraggableData=S,z.getBoundPosition=w,z.getControlPosition=p,z.snapToGrid=T;var x=C(909280),k=C(381825);function w(O,E,D){if(!O.props.bounds)return[E,D];var F=O.props.bounds;F=typeof F=="string"?F:y(F);var W=g(O);if(typeof F=="string"){var b=W.ownerDocument,h=b.defaultView,K;if(F==="parent"?K=W.parentNode:K=b.querySelector(F),!(K instanceof h.HTMLElement))throw new Error('Bounds selector "'+F+'" could not find an element.');var U=K,Y=h.getComputedStyle(W),Z=h.getComputedStyle(U);F={left:-W.offsetLeft+(0,x.int)(Z.paddingLeft)+(0,x.int)(Y.marginLeft),top:-W.offsetTop+(0,x.int)(Z.paddingTop)+(0,x.int)(Y.marginTop),right:(0,k.innerWidth)(U)-(0,k.outerWidth)(W)-W.offsetLeft+(0,x.int)(Z.paddingRight)-(0,x.int)(Y.marginRight),bottom:(0,k.innerHeight)(U)-(0,k.outerHeight)(W)-W.offsetTop+(0,x.int)(Z.paddingBottom)-(0,x.int)(Y.marginBottom)}}return(0,x.isNum)(F.right)&&(E=Math.min(E,F.right)),(0,x.isNum)(F.bottom)&&(D=Math.min(D,F.bottom)),(0,x.isNum)(F.left)&&(E=Math.max(E,F.left)),(0,x.isNum)(F.top)&&(D=Math.max(D,F.top)),[E,D]}function T(O,E,D){var F=Math.round(E/O[0])*O[0],W=Math.round(D/O[1])*O[1];return[F,W]}function L(O){return O.props.axis==="both"||O.props.axis==="x"}function P(O){return O.props.axis==="both"||O.props.axis==="y"}function p(O,E,D){var F=typeof E=="number"?(0,k.getTouch)(O,E):null;if(typeof E=="number"&&!F)return null;var W=g(D),b=D.props.offsetParent||W.offsetParent||W.ownerDocument.body;return(0,k.offsetXYFromParent)(F||O,b,D.props.scale)}function m(O,E,D){var F=O.state,W=!(0,x.isNum)(F.lastX),b=g(O);return W?{node:b,deltaX:0,deltaY:0,lastX:E,lastY:D,x:E,y:D}:{node:b,deltaX:E-F.lastX,deltaY:D-F.lastY,lastX:F.lastX,lastY:F.lastY,x:E,y:D}}function S(O,E){var D=O.props.scale;return{node:E.node,x:O.state.x+E.deltaX/D,y:O.state.y+E.deltaY/D,deltaX:E.deltaX/D,deltaY:E.deltaY/D,lastX:O.state.x,lastY:O.state.y}}function y(O){return{left:O.left,top:O.top,right:O.right,bottom:O.bottom}}function g(O){var E=O.findDOMNode();if(!E)throw new Error("<DraggableCore>: Unmounted during event!");return E}},909280:function(He,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.dontSetMe=T,z.findInArray=C,z.int=w,z.isFunction=x,z.isNum=k;function C(L,P){for(var p=0,m=L.length;p<m;p++)if(P.apply(P,[L[p],p,L]))return L[p]}function x(L){return typeof L=="function"||Object.prototype.toString.call(L)==="[object Function]"}function k(L){return typeof L=="number"&&!isNaN(L)}function w(L){return parseInt(L,10)}function T(L,P,p){if(L[P])return new Error("Invalid prop ".concat(P," passed to ").concat(p," - do not set this, set it on the child."))}},797005:function(He,z,C){var x;function k(p){if(!p||typeof window=="undefined")return;const m=document.createElement("style");return m.setAttribute("type","text/css"),m.innerHTML=p,document.head.appendChild(m),p}x={value:!0};var w=C(667294);function T(p){return p&&typeof p=="object"&&"default"in p?p:{default:p}}var L=T(w);k(`.marquee-container {
  overflow-x: hidden !important;
  display: flex !important;
  flex-direction: row !important;
  position: relative;
  width: var(--width);
  transform: var(--transform);
}
.marquee-container:hover div {
  animation-play-state: var(--pause-on-hover);
}
.marquee-container:active div {
  animation-play-state: var(--pause-on-click);
}

.overlay {
  position: absolute;
  width: 100%;
  height: 100%;
}
.overlay::before, .overlay::after {
  background: linear-gradient(to right, var(--gradient-color));
  content: "";
  height: 100%;
  position: absolute;
  width: var(--gradient-width);
  z-index: 2;
}
.overlay::after {
  right: 0;
  top: 0;
  transform: rotateZ(180deg);
}
.overlay::before {
  left: 0;
  top: 0;
}

.marquee {
  flex: 0 0 auto;
  min-width: var(--min-width);
  z-index: 1;
  display: flex;
  flex-direction: row;
  align-items: center;
  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);
  animation-play-state: var(--play);
  animation-delay: var(--delay);
  animation-direction: var(--direction);
}
@keyframes scroll {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-100%);
  }
}

.initial-child-container {
  flex: 0 0 auto;
  display: flex;
  min-width: auto;
  flex-direction: row;
}

.child {
  transform: var(--transform);
}`);const P=w.forwardRef(function({style:m={},className:S="",autoFill:y=!1,play:g=!0,pauseOnHover:O=!1,pauseOnClick:E=!1,direction:D="left",speed:F=50,delay:W=0,loop:b=0,gradient:h=!1,gradientColor:K=[255,255,255],gradientWidth:U=200,onFinish:Y,onCycleComplete:Z,onMount:H,children:q},Q){const[J,ft]=w.useState(0),[nt,yt]=w.useState(0),[gt,zt]=w.useState(1),[Mt,Ct]=w.useState(!1),rt=w.useRef(null),ot=Q||rt,Tt=w.useRef(null),Rt=w.useCallback(()=>{if(Tt.current&&ot.current){const se=ot.current.getBoundingClientRect(),ue=Tt.current.getBoundingClientRect();let Ut=se.width,oe=ue.width;(D==="up"||D==="down")&&(Ut=se.height,oe=ue.height),zt(y&&Ut&&oe&&oe<Ut?Math.ceil(Ut/oe):1),ft(Ut),yt(oe)}},[y,ot,D]);w.useEffect(()=>{if(Mt&&(Rt(),Tt.current&&ot.current)){const se=new ResizeObserver(()=>Rt());return se.observe(ot.current),se.observe(Tt.current),()=>{se&&se.disconnect()}}},[Rt,ot,Mt]),w.useEffect(()=>{Rt()},[Rt,q]),w.useEffect(()=>{Ct(!0)},[]),w.useEffect(()=>{typeof H=="function"&&H()},[]);const st=w.useMemo(()=>y?nt*gt/F:nt<J?J/F:nt/F,[y,J,nt,gt,F]),bt=`rgba(${K[0]}, ${K[1]}, ${K[2]}`,Ft=w.useMemo(()=>Object.assign(Object.assign({},m),{["--pause-on-hover"]:!g||O?"paused":"running",["--pause-on-click"]:!g||O&&!E||E?"paused":"running",["--width"]:D==="up"||D==="down"?"100vh":"100%",["--transform"]:D==="up"?"rotate(-90deg)":D==="down"?"rotate(90deg)":"none"}),[m,g,O,E,D]),Ht=w.useMemo(()=>({["--gradient-color"]:`${bt}, 1), ${bt}, 0)`,["--gradient-width"]:typeof U=="number"?`${U}px`:U}),[bt,U]),_t=w.useMemo(()=>({["--play"]:g?"running":"paused",["--direction"]:D==="left"?"normal":"reverse",["--duration"]:`${st}s`,["--delay"]:`${W}s`,["--iteration-count"]:b?`${b}`:"infinite",["--min-width"]:y?"auto":"100%"}),[g,D,st,W,b,y]),Xt=w.useMemo(()=>({["--transform"]:D==="up"?"rotate(90deg)":D==="down"?"rotate(-90deg)":"none"}),[D]),ee=w.useCallback(se=>[...Array(Number.isFinite(se)&&se>=0?se:0)].map((ue,Ut)=>L.default.createElement(w.Fragment,{key:Ut},w.Children.map(q,oe=>L.default.createElement("div",{style:Xt,className:"child"},oe)))),[Xt,q]);return Mt?L.default.createElement("div",{ref:ot,style:Ft,className:"marquee-container "+S},h&&L.default.createElement("div",{style:Ht,className:"overlay"}),L.default.createElement("div",{className:"marquee",style:_t,onAnimationIteration:Z,onAnimationEnd:Y},L.default.createElement("div",{className:"initial-child-container",ref:Tt},w.Children.map(q,se=>L.default.createElement("div",{style:Xt,className:"child"},se))),ee(gt-1)),L.default.createElement("div",{className:"marquee",style:_t},ee(gt))):null});z.Z=P},537763:function(He,z,C){He.exports=function(x){var k={};function w(T){if(k[T])return k[T].exports;var L=k[T]={exports:{},id:T,loaded:!1};return x[T].call(L.exports,L,L.exports,w),L.loaded=!0,L.exports}return w.m=x,w.c=k,w.p="",w(0)}([function(x,k,w){x.exports=w(1)},function(x,k,w){"use strict";Object.defineProperty(k,"__esModule",{value:!0});function T(p){return p&&p.__esModule?p:{default:p}}var L=w(2),P=T(L);k.default=P.default,x.exports=k.default},function(x,k,w){"use strict";Object.defineProperty(k,"__esModule",{value:!0});var T=Object.assign||function(D){for(var F=1;F<arguments.length;F++){var W=arguments[F];for(var b in W)Object.prototype.hasOwnProperty.call(W,b)&&(D[b]=W[b])}return D};k.default=E;function L(D){return D&&D.__esModule?D:{default:D}}function P(D,F){var W={};for(var b in D)F.indexOf(b)>=0||Object.prototype.hasOwnProperty.call(D,b)&&(W[b]=D[b]);return W}var p=w(3),m=w(4),S=L(m),y=w(14),g=w(15),O=L(g);E.propTypes={activeClassName:S.default.string,activeIndex:S.default.number,activeStyle:S.default.object,autoEscape:S.default.bool,className:S.default.string,findChunks:S.default.func,highlightClassName:S.default.oneOfType([S.default.object,S.default.string]),highlightStyle:S.default.object,highlightTag:S.default.oneOfType([S.default.node,S.default.func,S.default.string]),sanitize:S.default.func,searchWords:S.default.arrayOf(S.default.oneOfType([S.default.string,S.default.instanceOf(RegExp)])).isRequired,textToHighlight:S.default.string.isRequired,unhighlightTag:S.default.oneOfType([S.default.node,S.default.func,S.default.string]),unhighlightClassName:S.default.string,unhighlightStyle:S.default.object};function E(D){var F=D.activeClassName,W=F===void 0?"":F,b=D.activeIndex,h=b===void 0?-1:b,K=D.activeStyle,U=D.autoEscape,Y=D.caseSensitive,Z=Y===void 0?!1:Y,H=D.className,q=D.findChunks,Q=D.highlightClassName,J=Q===void 0?"":Q,ft=D.highlightStyle,nt=ft===void 0?{}:ft,yt=D.highlightTag,gt=yt===void 0?"mark":yt,zt=D.sanitize,Mt=D.searchWords,Ct=D.textToHighlight,rt=D.unhighlightTag,ot=rt===void 0?"span":rt,Tt=D.unhighlightClassName,Rt=Tt===void 0?"":Tt,st=D.unhighlightStyle,bt=P(D,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),Ft=(0,p.findAll)({autoEscape:U,caseSensitive:Z,findChunks:q,sanitize:zt,searchWords:Mt,textToHighlight:Ct}),Ht=gt,_t=-1,Xt="",ee=void 0,se=function(oe){var Pe={};for(var te in oe)Pe[te.toLowerCase()]=oe[te];return Pe},ue=(0,O.default)(se);return(0,y.createElement)("span",T({className:H},bt,{children:Ft.map(function(Ut,oe){var Pe=Ct.substr(Ut.start,Ut.end-Ut.start);if(Ut.highlight){_t++;var te=void 0;typeof J=="object"?Z?te=J[Pe]:(J=ue(J),te=J[Pe.toLowerCase()]):te=J;var ve=_t===+h;Xt=te+" "+(ve?W:""),ee=ve===!0&&K!=null?Object.assign({},nt,K):nt;var Ue={children:Pe,className:Xt,key:oe,style:ee};return typeof Ht!="string"&&(Ue.highlightIndex=_t),(0,y.createElement)(Ht,Ue)}else return(0,y.createElement)(ot,{children:Pe,className:Rt,key:oe,style:st})})}))}x.exports=k.default},function(x,k){x.exports=function(w){var T={};function L(P){if(T[P])return T[P].exports;var p=T[P]={exports:{},id:P,loaded:!1};return w[P].call(p.exports,p,p.exports,L),p.loaded=!0,p.exports}return L.m=w,L.c=T,L.p="",L(0)}([function(w,T,L){w.exports=L(1)},function(w,T,L){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var P=L(2);Object.defineProperty(T,"combineChunks",{enumerable:!0,get:function(){return P.combineChunks}}),Object.defineProperty(T,"fillInChunks",{enumerable:!0,get:function(){return P.fillInChunks}}),Object.defineProperty(T,"findAll",{enumerable:!0,get:function(){return P.findAll}}),Object.defineProperty(T,"findChunks",{enumerable:!0,get:function(){return P.findChunks}})},function(w,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.findAll=function(O){var E=O.autoEscape,D=O.caseSensitive,F=D===void 0?!1:D,W=O.findChunks,b=W===void 0?p:W,h=O.sanitize,K=O.searchWords,U=O.textToHighlight;return m({chunksToHighlight:P({chunks:b({autoEscape:E,caseSensitive:F,sanitize:h,searchWords:K,textToHighlight:U})}),totalLength:U?U.length:0})},P=T.combineChunks=function(O){var E=O.chunks;return E=E.sort(function(D,F){return D.start-F.start}).reduce(function(D,F){if(D.length===0)return[F];var W=D.pop();if(F.start<=W.end){var b=Math.max(W.end,F.end);D.push({start:W.start,end:b})}else D.push(W,F);return D},[]),E},p=function(O){var E=O.autoEscape,D=O.caseSensitive,F=O.sanitize,W=F===void 0?S:F,b=O.searchWords,h=O.textToHighlight;return h=W(h),b.filter(function(K){return K}).reduce(function(K,U){U=W(U),E&&(U=y(U));for(var Y=new RegExp(U,D?"g":"gi"),Z=void 0;Z=Y.exec(h);){var H=Z.index,q=Y.lastIndex;q>H&&K.push({start:H,end:q}),Z.index==Y.lastIndex&&Y.lastIndex++}return K},[])};T.findChunks=p;var m=T.fillInChunks=function(O){var E=O.chunksToHighlight,D=O.totalLength,F=[],W=function(K,U,Y){U-K>0&&F.push({start:K,end:U,highlight:Y})};if(E.length===0)W(0,D,!1);else{var b=0;E.forEach(function(h){W(b,h.start,!1),W(h.start,h.end,!0),b=h.end}),W(b,D,!1)}return F};function S(g){return g}function y(g){return g.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}])},function(x,k,w){(function(T){if(T.env.NODE_ENV!=="production"){var L=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,P=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===L},p=!0;x.exports=w(6)(P,p)}else x.exports=w(13)()}).call(k,w(5))},function(x,k){var w=x.exports={},T,L;function P(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?T=setTimeout:T=P}catch(h){T=P}try{typeof clearTimeout=="function"?L=clearTimeout:L=p}catch(h){L=p}})();function m(h){if(T===setTimeout)return setTimeout(h,0);if((T===P||!T)&&setTimeout)return T=setTimeout,setTimeout(h,0);try{return T(h,0)}catch(K){try{return T.call(null,h,0)}catch(U){return T.call(this,h,0)}}}function S(h){if(L===clearTimeout)return clearTimeout(h);if((L===p||!L)&&clearTimeout)return L=clearTimeout,clearTimeout(h);try{return L(h)}catch(K){try{return L.call(null,h)}catch(U){return L.call(this,h)}}}var y=[],g=!1,O,E=-1;function D(){!g||!O||(g=!1,O.length?y=O.concat(y):E=-1,y.length&&F())}function F(){if(!g){var h=m(D);g=!0;for(var K=y.length;K;){for(O=y,y=[];++E<K;)O&&O[E].run();E=-1,K=y.length}O=null,g=!1,S(h)}}w.nextTick=function(h){var K=new Array(arguments.length-1);if(arguments.length>1)for(var U=1;U<arguments.length;U++)K[U-1]=arguments[U];y.push(new W(h,K)),y.length===1&&!g&&m(F)};function W(h,K){this.fun=h,this.array=K}W.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function b(){}w.on=b,w.addListener=b,w.once=b,w.off=b,w.removeListener=b,w.removeAllListeners=b,w.emit=b,w.prependListener=b,w.prependOnceListener=b,w.listeners=function(h){return[]},w.binding=function(h){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(h){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},function(x,k,w){(function(T){"use strict";var L=w(7),P=w(8),p=w(9),m=w(10),S=w(11),y=w(12);x.exports=function(g,O){var E=typeof Symbol=="function"&&Symbol.iterator,D="@@iterator";function F(st){var bt=st&&(E&&st[E]||st[D]);if(typeof bt=="function")return bt}var W="<<anonymous>>",b={array:Y("array"),bool:Y("boolean"),func:Y("function"),number:Y("number"),object:Y("object"),string:Y("string"),symbol:Y("symbol"),any:Z(),arrayOf:H,element:q(),instanceOf:Q,node:yt(),objectOf:ft,oneOf:J,oneOfType:nt,shape:gt,exact:zt};function h(st,bt){return st===bt?st!==0||1/st===1/bt:st!==st&&bt!==bt}function K(st){this.message=st,this.stack=""}K.prototype=Error.prototype;function U(st){if(T.env.NODE_ENV!=="production")var bt={},Ft=0;function Ht(Xt,ee,se,ue,Ut,oe,Pe){if(ue=ue||W,oe=oe||se,Pe!==S){if(O)P(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(T.env.NODE_ENV!=="production"&&typeof console!="undefined"){var te=ue+":"+se;!bt[te]&&Ft<3&&(p(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",oe,ue),bt[te]=!0,Ft++)}}return ee[se]==null?Xt?ee[se]===null?new K("The "+Ut+" `"+oe+"` is marked as required "+("in `"+ue+"`, but its value is `null`.")):new K("The "+Ut+" `"+oe+"` is marked as required in "+("`"+ue+"`, but its value is `undefined`.")):null:st(ee,se,ue,Ut,oe)}var _t=Ht.bind(null,!1);return _t.isRequired=Ht.bind(null,!0),_t}function Y(st){function bt(Ft,Ht,_t,Xt,ee,se){var ue=Ft[Ht],Ut=rt(ue);if(Ut!==st){var oe=ot(ue);return new K("Invalid "+Xt+" `"+ee+"` of type "+("`"+oe+"` supplied to `"+_t+"`, expected ")+("`"+st+"`."))}return null}return U(bt)}function Z(){return U(L.thatReturnsNull)}function H(st){function bt(Ft,Ht,_t,Xt,ee){if(typeof st!="function")return new K("Property `"+ee+"` of component `"+_t+"` has invalid PropType notation inside arrayOf.");var se=Ft[Ht];if(!Array.isArray(se)){var ue=rt(se);return new K("Invalid "+Xt+" `"+ee+"` of type "+("`"+ue+"` supplied to `"+_t+"`, expected an array."))}for(var Ut=0;Ut<se.length;Ut++){var oe=st(se,Ut,_t,Xt,ee+"["+Ut+"]",S);if(oe instanceof Error)return oe}return null}return U(bt)}function q(){function st(bt,Ft,Ht,_t,Xt){var ee=bt[Ft];if(!g(ee)){var se=rt(ee);return new K("Invalid "+_t+" `"+Xt+"` of type "+("`"+se+"` supplied to `"+Ht+"`, expected a single ReactElement."))}return null}return U(st)}function Q(st){function bt(Ft,Ht,_t,Xt,ee){if(!(Ft[Ht]instanceof st)){var se=st.name||W,ue=Rt(Ft[Ht]);return new K("Invalid "+Xt+" `"+ee+"` of type "+("`"+ue+"` supplied to `"+_t+"`, expected ")+("instance of `"+se+"`."))}return null}return U(bt)}function J(st){if(!Array.isArray(st))return T.env.NODE_ENV!=="production"&&p(!1,"Invalid argument supplied to oneOf, expected an instance of array."),L.thatReturnsNull;function bt(Ft,Ht,_t,Xt,ee){for(var se=Ft[Ht],ue=0;ue<st.length;ue++)if(h(se,st[ue]))return null;var Ut=JSON.stringify(st);return new K("Invalid "+Xt+" `"+ee+"` of value `"+se+"` "+("supplied to `"+_t+"`, expected one of "+Ut+"."))}return U(bt)}function ft(st){function bt(Ft,Ht,_t,Xt,ee){if(typeof st!="function")return new K("Property `"+ee+"` of component `"+_t+"` has invalid PropType notation inside objectOf.");var se=Ft[Ht],ue=rt(se);if(ue!=="object")return new K("Invalid "+Xt+" `"+ee+"` of type "+("`"+ue+"` supplied to `"+_t+"`, expected an object."));for(var Ut in se)if(se.hasOwnProperty(Ut)){var oe=st(se,Ut,_t,Xt,ee+"."+Ut,S);if(oe instanceof Error)return oe}return null}return U(bt)}function nt(st){if(!Array.isArray(st))return T.env.NODE_ENV!=="production"&&p(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),L.thatReturnsNull;for(var bt=0;bt<st.length;bt++){var Ft=st[bt];if(typeof Ft!="function")return p(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",Tt(Ft),bt),L.thatReturnsNull}function Ht(_t,Xt,ee,se,ue){for(var Ut=0;Ut<st.length;Ut++){var oe=st[Ut];if(oe(_t,Xt,ee,se,ue,S)==null)return null}return new K("Invalid "+se+" `"+ue+"` supplied to "+("`"+ee+"`."))}return U(Ht)}function yt(){function st(bt,Ft,Ht,_t,Xt){return Mt(bt[Ft])?null:new K("Invalid "+_t+" `"+Xt+"` supplied to "+("`"+Ht+"`, expected a ReactNode."))}return U(st)}function gt(st){function bt(Ft,Ht,_t,Xt,ee){var se=Ft[Ht],ue=rt(se);if(ue!=="object")return new K("Invalid "+Xt+" `"+ee+"` of type `"+ue+"` "+("supplied to `"+_t+"`, expected `object`."));for(var Ut in st){var oe=st[Ut];if(oe){var Pe=oe(se,Ut,_t,Xt,ee+"."+Ut,S);if(Pe)return Pe}}return null}return U(bt)}function zt(st){function bt(Ft,Ht,_t,Xt,ee){var se=Ft[Ht],ue=rt(se);if(ue!=="object")return new K("Invalid "+Xt+" `"+ee+"` of type `"+ue+"` "+("supplied to `"+_t+"`, expected `object`."));var Ut=m({},Ft[Ht],st);for(var oe in Ut){var Pe=st[oe];if(!Pe)return new K("Invalid "+Xt+" `"+ee+"` key `"+oe+"` supplied to `"+_t+"`.\nBad object: "+JSON.stringify(Ft[Ht],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(st),null,"  "));var te=Pe(se,oe,_t,Xt,ee+"."+oe,S);if(te)return te}return null}return U(bt)}function Mt(st){switch(typeof st){case"number":case"string":case"undefined":return!0;case"boolean":return!st;case"object":if(Array.isArray(st))return st.every(Mt);if(st===null||g(st))return!0;var bt=F(st);if(bt){var Ft=bt.call(st),Ht;if(bt!==st.entries){for(;!(Ht=Ft.next()).done;)if(!Mt(Ht.value))return!1}else for(;!(Ht=Ft.next()).done;){var _t=Ht.value;if(_t&&!Mt(_t[1]))return!1}}else return!1;return!0;default:return!1}}function Ct(st,bt){return st==="symbol"||bt["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&bt instanceof Symbol}function rt(st){var bt=typeof st;return Array.isArray(st)?"array":st instanceof RegExp?"object":Ct(bt,st)?"symbol":bt}function ot(st){if(typeof st=="undefined"||st===null)return""+st;var bt=rt(st);if(bt==="object"){if(st instanceof Date)return"date";if(st instanceof RegExp)return"regexp"}return bt}function Tt(st){var bt=ot(st);switch(bt){case"array":case"object":return"an "+bt;case"boolean":case"date":case"regexp":return"a "+bt;default:return bt}}function Rt(st){return!st.constructor||!st.constructor.name?W:st.constructor.name}return b.checkPropTypes=y,b.PropTypes=b,b}}).call(k,w(5))},function(x,k){"use strict";function w(L){return function(){return L}}var T=function(){};T.thatReturns=w,T.thatReturnsFalse=w(!1),T.thatReturnsTrue=w(!0),T.thatReturnsNull=w(null),T.thatReturnsThis=function(){return this},T.thatReturnsArgument=function(L){return L},x.exports=T},function(x,k,w){(function(T){"use strict";var L=function(m){};T.env.NODE_ENV!=="production"&&(L=function(m){if(m===void 0)throw new Error("invariant requires an error message argument")});function P(p,m,S,y,g,O,E,D){if(L(m),!p){var F;if(m===void 0)F=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var W=[S,y,g,O,E,D],b=0;F=new Error(m.replace(/%s/g,function(){return W[b++]})),F.name="Invariant Violation"}throw F.framesToPop=1,F}}x.exports=P}).call(k,w(5))},function(x,k,w){(function(T){"use strict";var L=w(7),P=L;if(T.env.NODE_ENV!=="production"){var p=function(S){for(var y=arguments.length,g=Array(y>1?y-1:0),O=1;O<y;O++)g[O-1]=arguments[O];var E=0,D="Warning: "+S.replace(/%s/g,function(){return g[E++]});typeof console!="undefined"&&console.error(D);try{throw new Error(D)}catch(F){}};P=function(S,y){if(y===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(y.indexOf("Failed Composite propType: ")!==0&&!S){for(var g=arguments.length,O=Array(g>2?g-2:0),E=2;E<g;E++)O[E-2]=arguments[E];p.apply(void 0,[y].concat(O))}}}x.exports=P}).call(k,w(5))},function(x,k){"use strict";var w=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;function P(m){if(m==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(m)}function p(){try{if(!Object.assign)return!1;var m=new String("abc");if(m[5]="de",Object.getOwnPropertyNames(m)[0]==="5")return!1;for(var S={},y=0;y<10;y++)S["_"+String.fromCharCode(y)]=y;var g=Object.getOwnPropertyNames(S).map(function(E){return S[E]});if(g.join("")!=="0123456789")return!1;var O={};return"abcdefghijklmnopqrst".split("").forEach(function(E){O[E]=E}),Object.keys(Object.assign({},O)).join("")==="abcdefghijklmnopqrst"}catch(E){return!1}}x.exports=p()?Object.assign:function(m,S){for(var y,g=P(m),O,E=1;E<arguments.length;E++){y=Object(arguments[E]);for(var D in y)T.call(y,D)&&(g[D]=y[D]);if(w){O=w(y);for(var F=0;F<O.length;F++)L.call(y,O[F])&&(g[O[F]]=y[O[F]])}}return g}},function(x,k){"use strict";var w="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";x.exports=w},function(x,k,w){(function(T){"use strict";if(T.env.NODE_ENV!=="production")var L=w(8),P=w(9),p=w(11),m={};function S(y,g,O,E,D){if(T.env.NODE_ENV!=="production"){for(var F in y)if(y.hasOwnProperty(F)){var W;try{L(typeof y[F]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",E||"React class",O,F,typeof y[F]),W=y[F](g,F,E,O,null,p)}catch(h){W=h}if(P(!W||W instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",E||"React class",O,F,typeof W),W instanceof Error&&!(W.message in m)){m[W.message]=!0;var b=D?D():"";P(!1,"Failed %s type: %s%s",O,W.message,b!=null?b:"")}}}}x.exports=S}).call(k,w(5))},function(x,k,w){"use strict";var T=w(7),L=w(8),P=w(11);x.exports=function(){function p(y,g,O,E,D,F){F!==P&&L(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}p.isRequired=p;function m(){return p}var S={array:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:m,element:p,instanceOf:m,node:p,objectOf:m,oneOf:m,oneOfType:m,shape:m,exact:m};return S.checkPropTypes=T,S.PropTypes=S,S}},function(x,k){x.exports=C(667294)},function(x,k){"use strict";var w=function(P,p){return P===p};function T(L){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,p=void 0,m=[],S=void 0,y=!1,g=function(D,F){return P(D,m[F])},O=function(){for(var D=arguments.length,F=Array(D),W=0;W<D;W++)F[W]=arguments[W];return y&&p===this&&F.length===m.length&&F.every(g)||(y=!0,p=this,m=F,S=L.apply(this,F)),S};return O}x.exports=T}])},58533:function(He,z,C){"use strict";var x=C(667294);var k=function(y,g){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,E){O.__proto__=E}||function(O,E){for(var D in E)E.hasOwnProperty(D)&&(O[D]=E[D])},k(y,g)};function w(y,g){k(y,g);function O(){this.constructor=y}y.prototype=g===null?Object.create(g):(O.prototype=g.prototype,new O)}var T=function(){return T=Object.assign||function(g){for(var O,E=1,D=arguments.length;E<D;E++){O=arguments[E];for(var F in O)Object.prototype.hasOwnProperty.call(O,F)&&(g[F]=O[F])}return g},T.apply(this,arguments)};function L(y,g,O,E){var D,F=!1,W=0;function b(){D&&clearTimeout(D)}function h(){b(),F=!0}typeof g!="boolean"&&(E=O,O=g,g=void 0);function K(){var U=this,Y=Date.now()-W,Z=arguments;if(F)return;function H(){W=Date.now(),O.apply(U,Z)}function q(){D=void 0}E&&!D&&H(),b(),E===void 0&&Y>y?H():g!==!0&&(D=setTimeout(E?q:H,E===void 0?y-Y:y))}return K.cancel=h,K}var P={Pixel:"Pixel",Percent:"Percent"},p={unit:P.Percent,value:.8};function m(y){return typeof y=="number"?{unit:P.Percent,value:y*100}:typeof y=="string"?y.match(/^(\d*(\.\d+)?)px$/)?{unit:P.Pixel,value:parseFloat(y)}:y.match(/^(\d*(\.\d+)?)%$/)?{unit:P.Percent,value:parseFloat(y)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),p):(console.warn("scrollThreshold should be string or number"),p)}var S=function(y){w(g,y);function g(O){var E=y.call(this,O)||this;return E.lastScrollTop=0,E.actionTriggered=!1,E.startY=0,E.currentY=0,E.dragging=!1,E.maxPullDownDistance=0,E.getScrollableTarget=function(){return E.props.scrollableTarget instanceof HTMLElement?E.props.scrollableTarget:typeof E.props.scrollableTarget=="string"?document.getElementById(E.props.scrollableTarget):(E.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},E.onStart=function(D){E.lastScrollTop||(E.dragging=!0,D instanceof MouseEvent?E.startY=D.pageY:D instanceof TouchEvent&&(E.startY=D.touches[0].pageY),E.currentY=E.startY,E._infScroll&&(E._infScroll.style.willChange="transform",E._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},E.onMove=function(D){E.dragging&&(D instanceof MouseEvent?E.currentY=D.pageY:D instanceof TouchEvent&&(E.currentY=D.touches[0].pageY),!(E.currentY<E.startY)&&(E.currentY-E.startY>=Number(E.props.pullDownToRefreshThreshold)&&E.setState({pullToRefreshThresholdBreached:!0}),!(E.currentY-E.startY>E.maxPullDownDistance*1.5)&&E._infScroll&&(E._infScroll.style.overflow="visible",E._infScroll.style.transform="translate3d(0px, "+(E.currentY-E.startY)+"px, 0px)")))},E.onEnd=function(){E.startY=0,E.currentY=0,E.dragging=!1,E.state.pullToRefreshThresholdBreached&&(E.props.refreshFunction&&E.props.refreshFunction(),E.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){E._infScroll&&(E._infScroll.style.overflow="auto",E._infScroll.style.transform="none",E._infScroll.style.willChange="unset")})},E.onScrollListener=function(D){typeof E.props.onScroll=="function"&&setTimeout(function(){return E.props.onScroll&&E.props.onScroll(D)},0);var F=E.props.height||E._scrollableNode?D.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!E.actionTriggered){var W=E.props.inverse?E.isElementAtTop(F,E.props.scrollThreshold):E.isElementAtBottom(F,E.props.scrollThreshold);W&&E.props.hasMore&&(E.actionTriggered=!0,E.setState({showLoader:!0}),E.props.next&&E.props.next()),E.lastScrollTop=F.scrollTop}},E.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:O.dataLength},E.throttledOnScrollListener=L(150,E.onScrollListener).bind(E),E.onStart=E.onStart.bind(E),E.onMove=E.onMove.bind(E),E.onEnd=E.onEnd.bind(E),E}return g.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},g.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},g.prototype.componentDidUpdate=function(O){this.props.dataLength!==O.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},g.getDerivedStateFromProps=function(O,E){var D=O.dataLength!==E.prevDataLength;return D?T(T({},E),{prevDataLength:O.dataLength}):null},g.prototype.isElementAtTop=function(O,E){E===void 0&&(E=.8);var D=O===document.body||O===document.documentElement?window.screen.availHeight:O.clientHeight,F=m(E);return F.unit===P.Pixel?O.scrollTop<=F.value+D-O.scrollHeight+1:O.scrollTop<=F.value/100+D-O.scrollHeight+1},g.prototype.isElementAtBottom=function(O,E){E===void 0&&(E=.8);var D=O===document.body||O===document.documentElement?window.screen.availHeight:O.clientHeight,F=m(E);return F.unit===P.Pixel?O.scrollTop+D>=O.scrollHeight-F.value:O.scrollTop+D>=F.value/100*O.scrollHeight},g.prototype.render=function(){var O=this,E=T({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),D=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),F=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return x.createElement("div",{style:F,className:"infinite-scroll-component__outerdiv"},x.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(W){return O._infScroll=W},style:E},this.props.pullDownToRefresh&&x.createElement("div",{style:{position:"relative"},ref:function(W){return O._pullDown=W}},x.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!D&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},g}(x.Component);z.Z=S},122827:function(He,z,C){"use strict";z.__esModule=!0,z.default=void 0;var x=p(C(667294)),k=C(861193),w=C(459069),T=C(100448),L=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function P(h){if(typeof WeakMap!="function")return null;var K=new WeakMap,U=new WeakMap;return(P=function(Z){return Z?U:K})(h)}function p(h,K){if(!K&&h&&h.__esModule)return h;if(h===null||typeof h!="object"&&typeof h!="function")return{default:h};var U=P(K);if(U&&U.has(h))return U.get(h);var Y={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in h)if(H!=="default"&&Object.prototype.hasOwnProperty.call(h,H)){var q=Z?Object.getOwnPropertyDescriptor(h,H):null;q&&(q.get||q.set)?Object.defineProperty(Y,H,q):Y[H]=h[H]}return Y.default=h,U&&U.set(h,Y),Y}function m(){return m=Object.assign?Object.assign.bind():function(h){for(var K=1;K<arguments.length;K++){var U=arguments[K];for(var Y in U)Object.prototype.hasOwnProperty.call(U,Y)&&(h[Y]=U[Y])}return h},m.apply(this,arguments)}function S(h,K){if(h==null)return{};var U={},Y=Object.keys(h),Z,H;for(H=0;H<Y.length;H++)Z=Y[H],!(K.indexOf(Z)>=0)&&(U[Z]=h[Z]);return U}function y(h,K){var U=Object.keys(h);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(h);K&&(Y=Y.filter(function(Z){return Object.getOwnPropertyDescriptor(h,Z).enumerable})),U.push.apply(U,Y)}return U}function g(h){for(var K=1;K<arguments.length;K++){var U=arguments[K]!=null?arguments[K]:{};K%2?y(Object(U),!0).forEach(function(Y){O(h,Y,U[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(U)):y(Object(U)).forEach(function(Y){Object.defineProperty(h,Y,Object.getOwnPropertyDescriptor(U,Y))})}return h}function O(h,K,U){return K=E(K),K in h?Object.defineProperty(h,K,{value:U,enumerable:!0,configurable:!0,writable:!0}):h[K]=U,h}function E(h){var K=D(h,"string");return typeof K=="symbol"?K:String(K)}function D(h,K){if(typeof h!="object"||h===null)return h;var U=h[Symbol.toPrimitive];if(U!==void 0){var Y=U.call(h,K||"default");if(typeof Y!="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(K==="string"?String:Number)(h)}function F(h,K){h.prototype=Object.create(K.prototype),h.prototype.constructor=h,W(h,K)}function W(h,K){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Y,Z){return Y.__proto__=Z,Y},W(h,K)}var b=function(h){F(K,h);function K(){for(var Y,Z=arguments.length,H=new Array(Z),q=0;q<Z;q++)H[q]=arguments[q];return Y=h.call.apply(h,[this].concat(H))||this,Y.handleRefs={},Y.lastHandleRect=null,Y.slack=null,Y}var U=K.prototype;return U.componentWillUnmount=function(){this.resetData()},U.resetData=function(){this.lastHandleRect=this.slack=null},U.runConstraints=function(Z,H){var q=this.props,Q=q.minConstraints,J=q.maxConstraints,ft=q.lockAspectRatio;if(!Q&&!J&&!ft)return[Z,H];if(ft){var nt=this.props.width/this.props.height,yt=Z-this.props.width,gt=H-this.props.height;Math.abs(yt)>Math.abs(gt*nt)?H=Z/nt:Z=H*nt}var zt=Z,Mt=H,Ct=this.slack||[0,0],rt=Ct[0],ot=Ct[1];return Z+=rt,H+=ot,Q&&(Z=Math.max(Q[0],Z),H=Math.max(Q[1],H)),J&&(Z=Math.min(J[0],Z),H=Math.min(J[1],H)),this.slack=[rt+(zt-Z),ot+(Mt-H)],[Z,H]},U.resizeHandler=function(Z,H){var q=this;return function(Q,J){var ft=J.node,nt=J.deltaX,yt=J.deltaY;Z==="onResizeStart"&&q.resetData();var gt=(q.props.axis==="both"||q.props.axis==="x")&&H!=="n"&&H!=="s",zt=(q.props.axis==="both"||q.props.axis==="y")&&H!=="e"&&H!=="w";if(!(!gt&&!zt)){var Mt=H[0],Ct=H[H.length-1],rt=ft.getBoundingClientRect();if(q.lastHandleRect!=null){if(Ct==="w"){var ot=rt.left-q.lastHandleRect.left;nt+=ot}if(Mt==="n"){var Tt=rt.top-q.lastHandleRect.top;yt+=Tt}}q.lastHandleRect=rt,Ct==="w"&&(nt=-nt),Mt==="n"&&(yt=-yt);var Rt=q.props.width+(gt?nt/q.props.transformScale:0),st=q.props.height+(zt?yt/q.props.transformScale:0),bt=q.runConstraints(Rt,st);Rt=bt[0],st=bt[1];var Ft=Rt!==q.props.width||st!==q.props.height,Ht=typeof q.props[Z]=="function"?q.props[Z]:null,_t=Z==="onResize"&&!Ft;Ht&&!_t&&(Q.persist==null||Q.persist(),Ht(Q,{node:ft,size:{width:Rt,height:st},handle:H})),Z==="onResizeStop"&&q.resetData()}}},U.renderResizeHandle=function(Z,H){var q=this.props.handle;if(!q)return x.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+Z,ref:H});if(typeof q=="function")return q(Z,H);var Q=typeof q.type=="string",J=g({ref:H},Q?{}:{handleAxis:Z});return x.cloneElement(q,J)},U.render=function(){var Z=this,H=this.props,q=H.children,Q=H.className,J=H.draggableOpts,ft=H.width,nt=H.height,yt=H.handle,gt=H.handleSize,zt=H.lockAspectRatio,Mt=H.axis,Ct=H.minConstraints,rt=H.maxConstraints,ot=H.onResize,Tt=H.onResizeStop,Rt=H.onResizeStart,st=H.resizeHandles,bt=H.transformScale,Ft=S(H,L);return(0,w.cloneElement)(q,g(g({},Ft),{},{className:(Q?Q+" ":"")+"react-resizable",children:[].concat(q.props.children,st.map(function(Ht){var _t,Xt=(_t=Z.handleRefs[Ht])!=null?_t:Z.handleRefs[Ht]=x.createRef();return x.createElement(k.DraggableCore,m({},J,{nodeRef:Xt,key:"resizableHandle-"+Ht,onStop:Z.resizeHandler("onResizeStop",Ht),onStart:Z.resizeHandler("onResizeStart",Ht),onDrag:Z.resizeHandler("onResize",Ht)}),Z.renderResizeHandle(Ht,Xt))}))}))},K}(x.Component);z.default=b,b.propTypes=T.resizableProps,b.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},808735:function(He,z,C){"use strict";var x;x=!0,z.default=void 0;var k=S(C(667294)),w=p(C(45697)),T=p(C(122827)),L=C(100448),P=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function p(U){return U&&U.__esModule?U:{default:U}}function m(U){if(typeof WeakMap!="function")return null;var Y=new WeakMap,Z=new WeakMap;return(m=function(q){return q?Z:Y})(U)}function S(U,Y){if(!Y&&U&&U.__esModule)return U;if(U===null||typeof U!="object"&&typeof U!="function")return{default:U};var Z=m(Y);if(Z&&Z.has(U))return Z.get(U);var H={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in U)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(U,Q)){var J=q?Object.getOwnPropertyDescriptor(U,Q):null;J&&(J.get||J.set)?Object.defineProperty(H,Q,J):H[Q]=U[Q]}return H.default=U,Z&&Z.set(U,H),H}function y(){return y=Object.assign?Object.assign.bind():function(U){for(var Y=1;Y<arguments.length;Y++){var Z=arguments[Y];for(var H in Z)Object.prototype.hasOwnProperty.call(Z,H)&&(U[H]=Z[H])}return U},y.apply(this,arguments)}function g(U,Y){var Z=Object.keys(U);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(U);Y&&(H=H.filter(function(q){return Object.getOwnPropertyDescriptor(U,q).enumerable})),Z.push.apply(Z,H)}return Z}function O(U){for(var Y=1;Y<arguments.length;Y++){var Z=arguments[Y]!=null?arguments[Y]:{};Y%2?g(Object(Z),!0).forEach(function(H){E(U,H,Z[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(Z)):g(Object(Z)).forEach(function(H){Object.defineProperty(U,H,Object.getOwnPropertyDescriptor(Z,H))})}return U}function E(U,Y,Z){return Y=D(Y),Y in U?Object.defineProperty(U,Y,{value:Z,enumerable:!0,configurable:!0,writable:!0}):U[Y]=Z,U}function D(U){var Y=F(U,"string");return typeof Y=="symbol"?Y:String(Y)}function F(U,Y){if(typeof U!="object"||U===null)return U;var Z=U[Symbol.toPrimitive];if(Z!==void 0){var H=Z.call(U,Y||"default");if(typeof H!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Y==="string"?String:Number)(U)}function W(U,Y){if(U==null)return{};var Z={},H=Object.keys(U),q,Q;for(Q=0;Q<H.length;Q++)q=H[Q],!(Y.indexOf(q)>=0)&&(Z[q]=U[q]);return Z}function b(U,Y){U.prototype=Object.create(Y.prototype),U.prototype.constructor=U,h(U,Y)}function h(U,Y){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,q){return H.__proto__=q,H},h(U,Y)}var K=function(U){b(Y,U);function Y(){for(var H,q=arguments.length,Q=new Array(q),J=0;J<q;J++)Q[J]=arguments[J];return H=U.call.apply(U,[this].concat(Q))||this,H.state={width:H.props.width,height:H.props.height,propsWidth:H.props.width,propsHeight:H.props.height},H.onResize=function(ft,nt){var yt=nt.size;H.props.onResize?(ft.persist==null||ft.persist(),H.setState(yt,function(){return H.props.onResize&&H.props.onResize(ft,nt)})):H.setState(yt)},H}Y.getDerivedStateFromProps=function(q,Q){return Q.propsWidth!==q.width||Q.propsHeight!==q.height?{width:q.width,height:q.height,propsWidth:q.width,propsHeight:q.height}:null};var Z=Y.prototype;return Z.render=function(){var q=this.props,Q=q.handle,J=q.handleSize,ft=q.onResize,nt=q.onResizeStart,yt=q.onResizeStop,gt=q.draggableOpts,zt=q.minConstraints,Mt=q.maxConstraints,Ct=q.lockAspectRatio,rt=q.axis,ot=q.width,Tt=q.height,Rt=q.resizeHandles,st=q.style,bt=q.transformScale,Ft=W(q,P);return k.createElement(T.default,{axis:rt,draggableOpts:gt,handle:Q,handleSize:J,height:this.state.height,lockAspectRatio:Ct,maxConstraints:Mt,minConstraints:zt,onResizeStart:nt,onResize:this.onResize,onResizeStop:yt,resizeHandles:Rt,transformScale:bt,width:this.state.width},k.createElement("div",y({},Ft,{style:O(O({},st),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},Y}(k.Component);z.default=K,K.propTypes=O(O({},L.resizableProps),{},{children:w.default.element})},100448:function(He,z,C){"use strict";z.__esModule=!0,z.resizableProps=void 0;var x=w(C(45697)),k=C(861193);function w(L){return L&&L.__esModule?L:{default:L}}var T={axis:x.default.oneOf(["both","x","y","none"]),className:x.default.string,children:x.default.element.isRequired,draggableOpts:x.default.shape({allowAnyClick:x.default.bool,cancel:x.default.string,children:x.default.node,disabled:x.default.bool,enableUserSelectHack:x.default.bool,offsetParent:x.default.node,grid:x.default.arrayOf(x.default.number),handle:x.default.string,nodeRef:x.default.object,onStart:x.default.func,onDrag:x.default.func,onStop:x.default.func,onMouseDown:x.default.func,scale:x.default.number}),height:function(){for(var P=arguments.length,p=new Array(P),m=0;m<P;m++)p[m]=arguments[m];var S=p[0];if(S.axis==="both"||S.axis==="y"){var y;return(y=x.default.number).isRequired.apply(y,p)}return x.default.number.apply(x.default,p)},handle:x.default.oneOfType([x.default.node,x.default.func]),handleSize:x.default.arrayOf(x.default.number),lockAspectRatio:x.default.bool,maxConstraints:x.default.arrayOf(x.default.number),minConstraints:x.default.arrayOf(x.default.number),onResizeStop:x.default.func,onResizeStart:x.default.func,onResize:x.default.func,resizeHandles:x.default.arrayOf(x.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:x.default.number,width:function(){for(var P=arguments.length,p=new Array(P),m=0;m<P;m++)p[m]=arguments[m];var S=p[0];if(S.axis==="both"||S.axis==="x"){var y;return(y=x.default.number).isRequired.apply(y,p)}return x.default.number.apply(x.default,p)}};z.resizableProps=T},459069:function(He,z,C){"use strict";z.__esModule=!0,z.cloneElement=m;var x=k(C(667294));function k(S){return S&&S.__esModule?S:{default:S}}function w(S,y){var g=Object.keys(S);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(S);y&&(O=O.filter(function(E){return Object.getOwnPropertyDescriptor(S,E).enumerable})),g.push.apply(g,O)}return g}function T(S){for(var y=1;y<arguments.length;y++){var g=arguments[y]!=null?arguments[y]:{};y%2?w(Object(g),!0).forEach(function(O){L(S,O,g[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(g)):w(Object(g)).forEach(function(O){Object.defineProperty(S,O,Object.getOwnPropertyDescriptor(g,O))})}return S}function L(S,y,g){return y=P(y),y in S?Object.defineProperty(S,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):S[y]=g,S}function P(S){var y=p(S,"string");return typeof y=="symbol"?y:String(y)}function p(S,y){if(typeof S!="object"||S===null)return S;var g=S[Symbol.toPrimitive];if(g!==void 0){var O=g.call(S,y||"default");if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(S)}function m(S,y){return y.style&&S.props.style&&(y.style=T(T({},S.props.style),y.style)),y.className&&S.props.className&&(y.className=S.props.className+" "+y.className),x.default.cloneElement(S,y)}},101706:function(He,z,C){"use strict";He.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},He.exports.Resizable=C(122827).default,He.exports.ResizableBox=C(808735).default},491907:function(He,z,C){"use strict";C.d(z,{cd:function(){return rt}});var x=C(487462),k=C(497326),w=C(589611);function T(de,ht){de.prototype=Object.create(ht.prototype),de.prototype.constructor=de,(0,w.Z)(de,ht)}var L=Number.isNaN||function(ht){return typeof ht=="number"&&ht!==ht};function P(de,ht){return!!(de===ht||L(de)&&L(ht))}function p(de,ht){if(de.length!==ht.length)return!1;for(var ae=0;ae<de.length;ae++)if(!P(de[ae],ht[ae]))return!1;return!0}function m(de,ht){ht===void 0&&(ht=p);var ae,Le=[],Ze,qe=!1;function fr(){for(var ur=[],kr=0;kr<arguments.length;kr++)ur[kr]=arguments[kr];return qe&&ae===this&&ht(ur,Le)||(Ze=de.apply(this,ur),qe=!0,ae=this,Le=ur),Ze}return fr}var S=m,y=C(667294),g=typeof performance=="object"&&typeof performance.now=="function",O=g?function(){return performance.now()}:function(){return Date.now()};function E(de){cancelAnimationFrame(de.id)}function D(de,ht){var ae=O();function Le(){O()-ae>=ht?de.call(null):Ze.id=requestAnimationFrame(Le)}var Ze={id:requestAnimationFrame(Le)};return Ze}var F=-1;function W(de){if(de===void 0&&(de=!1),F===-1||de){var ht=document.createElement("div"),ae=ht.style;ae.width="50px",ae.height="50px",ae.overflow="scroll",document.body.appendChild(ht),F=ht.offsetWidth-ht.clientWidth,document.body.removeChild(ht)}return F}var b=null;function h(de){if(de===void 0&&(de=!1),b===null||de){var ht=document.createElement("div"),ae=ht.style;ae.width="50px",ae.height="50px",ae.overflow="scroll",ae.direction="rtl";var Le=document.createElement("div"),Ze=Le.style;return Ze.width="100px",Ze.height="100px",ht.appendChild(Le),document.body.appendChild(ht),ht.scrollLeft>0?b="positive-descending":(ht.scrollLeft=1,ht.scrollLeft===0?b="negative":b="positive-ascending"),document.body.removeChild(ht),b}return b}var K=150,U=function(ht){var ae=ht.columnIndex,Le=ht.data,Ze=ht.rowIndex;return Ze+":"+ae},Y=null,Z=null,H=null;function q(de){var ht,ae=de.getColumnOffset,Le=de.getColumnStartIndexForOffset,Ze=de.getColumnStopIndexForStartIndex,qe=de.getColumnWidth,fr=de.getEstimatedTotalHeight,ur=de.getEstimatedTotalWidth,kr=de.getOffsetForColumnAndAlignment,yn=de.getOffsetForRowAndAlignment,un=de.getRowHeight,Vr=de.getRowOffset,$e=de.getRowStartIndexForOffset,dr=de.getRowStopIndexForStartIndex,ar=de.initInstanceProps,Qe=de.shouldResetStyleCacheOnItemSizeChange,Pr=de.validateProps;return ht=function(Zr){T(qr,Zr);function qr(Yn){var Ir;return Ir=Zr.call(this,Yn)||this,Ir._instanceProps=ar(Ir.props,(0,k.Z)(Ir)),Ir._resetIsScrollingTimeoutId=null,Ir._outerRef=void 0,Ir.state={instance:(0,k.Z)(Ir),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof Ir.props.initialScrollLeft=="number"?Ir.props.initialScrollLeft:0,scrollTop:typeof Ir.props.initialScrollTop=="number"?Ir.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},Ir._callOnItemsRendered=void 0,Ir._callOnItemsRendered=S(function(Br,en,hn,xn,_n,tt,ir,jt){return Ir.props.onItemsRendered({overscanColumnStartIndex:Br,overscanColumnStopIndex:en,overscanRowStartIndex:hn,overscanRowStopIndex:xn,visibleColumnStartIndex:_n,visibleColumnStopIndex:tt,visibleRowStartIndex:ir,visibleRowStopIndex:jt})}),Ir._callOnScroll=void 0,Ir._callOnScroll=S(function(Br,en,hn,xn,_n){return Ir.props.onScroll({horizontalScrollDirection:hn,scrollLeft:Br,scrollTop:en,verticalScrollDirection:xn,scrollUpdateWasRequested:_n})}),Ir._getItemStyle=void 0,Ir._getItemStyle=function(Br,en){var hn=Ir.props,xn=hn.columnWidth,_n=hn.direction,tt=hn.rowHeight,ir=Ir._getItemStyleCache(Qe&&xn,Qe&&_n,Qe&&tt),jt=Br+":"+en,Qt;if(ir.hasOwnProperty(jt))Qt=ir[jt];else{var Et=ae(Ir.props,en,Ir._instanceProps),we=_n==="rtl";ir[jt]=Qt={position:"absolute",left:we?void 0:Et,right:we?Et:void 0,top:Vr(Ir.props,Br,Ir._instanceProps),height:un(Ir.props,Br,Ir._instanceProps),width:qe(Ir.props,en,Ir._instanceProps)}}return Qt},Ir._getItemStyleCache=void 0,Ir._getItemStyleCache=S(function(Br,en,hn){return{}}),Ir._onScroll=function(Br){var en=Br.currentTarget,hn=en.clientHeight,xn=en.clientWidth,_n=en.scrollLeft,tt=en.scrollTop,ir=en.scrollHeight,jt=en.scrollWidth;Ir.setState(function(Qt){if(Qt.scrollLeft===_n&&Qt.scrollTop===tt)return null;var Et=Ir.props.direction,we=_n;if(Et==="rtl")switch(h()){case"negative":we=-_n;break;case"positive-descending":we=jt-xn-_n;break}we=Math.max(0,Math.min(we,jt-xn));var Ot=Math.max(0,Math.min(tt,ir-hn));return{isScrolling:!0,horizontalScrollDirection:Qt.scrollLeft<_n?"forward":"backward",scrollLeft:we,scrollTop:Ot,verticalScrollDirection:Qt.scrollTop<tt?"forward":"backward",scrollUpdateWasRequested:!1}},Ir._resetIsScrollingDebounced)},Ir._outerRefSetter=function(Br){var en=Ir.props.outerRef;Ir._outerRef=Br,typeof en=="function"?en(Br):en!=null&&typeof en=="object"&&en.hasOwnProperty("current")&&(en.current=Br)},Ir._resetIsScrollingDebounced=function(){Ir._resetIsScrollingTimeoutId!==null&&E(Ir._resetIsScrollingTimeoutId),Ir._resetIsScrollingTimeoutId=D(Ir._resetIsScrolling,K)},Ir._resetIsScrolling=function(){Ir._resetIsScrollingTimeoutId=null,Ir.setState({isScrolling:!1},function(){Ir._getItemStyleCache(-1)})},Ir}qr.getDerivedStateFromProps=function(Ir,Br){return Q(Ir,Br),Pr(Ir),null};var Sn=qr.prototype;return Sn.scrollTo=function(Ir){var Br=Ir.scrollLeft,en=Ir.scrollTop;Br!==void 0&&(Br=Math.max(0,Br)),en!==void 0&&(en=Math.max(0,en)),this.setState(function(hn){return Br===void 0&&(Br=hn.scrollLeft),en===void 0&&(en=hn.scrollTop),hn.scrollLeft===Br&&hn.scrollTop===en?null:{horizontalScrollDirection:hn.scrollLeft<Br?"forward":"backward",scrollLeft:Br,scrollTop:en,scrollUpdateWasRequested:!0,verticalScrollDirection:hn.scrollTop<en?"forward":"backward"}},this._resetIsScrollingDebounced)},Sn.scrollToItem=function(Ir){var Br=Ir.align,en=Br===void 0?"auto":Br,hn=Ir.columnIndex,xn=Ir.rowIndex,_n=this.props,tt=_n.columnCount,ir=_n.height,jt=_n.rowCount,Qt=_n.width,Et=this.state,we=Et.scrollLeft,Ot=Et.scrollTop,Kt=W();hn!==void 0&&(hn=Math.max(0,Math.min(hn,tt-1))),xn!==void 0&&(xn=Math.max(0,Math.min(xn,jt-1)));var dt=fr(this.props,this._instanceProps),Bt=ur(this.props,this._instanceProps),$=Bt>Qt?Kt:0,at=dt>ir?Kt:0;this.scrollTo({scrollLeft:hn!==void 0?kr(this.props,hn,en,we,this._instanceProps,at):we,scrollTop:xn!==void 0?yn(this.props,xn,en,Ot,this._instanceProps,$):Ot})},Sn.componentDidMount=function(){var Ir=this.props,Br=Ir.initialScrollLeft,en=Ir.initialScrollTop;if(this._outerRef!=null){var hn=this._outerRef;typeof Br=="number"&&(hn.scrollLeft=Br),typeof en=="number"&&(hn.scrollTop=en)}this._callPropsCallbacks()},Sn.componentDidUpdate=function(){var Ir=this.props.direction,Br=this.state,en=Br.scrollLeft,hn=Br.scrollTop,xn=Br.scrollUpdateWasRequested;if(xn&&this._outerRef!=null){var _n=this._outerRef;if(Ir==="rtl")switch(h()){case"negative":_n.scrollLeft=-en;break;case"positive-ascending":_n.scrollLeft=en;break;default:var tt=_n.clientWidth,ir=_n.scrollWidth;_n.scrollLeft=ir-tt-en;break}else _n.scrollLeft=Math.max(0,en);_n.scrollTop=Math.max(0,hn)}this._callPropsCallbacks()},Sn.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&E(this._resetIsScrollingTimeoutId)},Sn.render=function(){var Ir=this.props,Br=Ir.children,en=Ir.className,hn=Ir.columnCount,xn=Ir.direction,_n=Ir.height,tt=Ir.innerRef,ir=Ir.innerElementType,jt=Ir.innerTagName,Qt=Ir.itemData,Et=Ir.itemKey,we=Et===void 0?U:Et,Ot=Ir.outerElementType,Kt=Ir.outerTagName,dt=Ir.rowCount,Bt=Ir.style,$=Ir.useIsScrolling,at=Ir.width,R=this.state.isScrolling,M=this._getHorizontalRangeToRender(),A=M[0],X=M[1],mt=this._getVerticalRangeToRender(),Lt=mt[0],Pt=mt[1],Jt=[];if(hn>0&&dt)for(var Ie=Lt;Ie<=Pt;Ie++)for(var pe=A;pe<=X;pe++)Jt.push((0,y.createElement)(Br,{columnIndex:pe,data:Qt,isScrolling:$?R:void 0,key:we({columnIndex:pe,data:Qt,rowIndex:Ie}),rowIndex:Ie,style:this._getItemStyle(Ie,pe)}));var je=fr(this.props,this._instanceProps),br=ur(this.props,this._instanceProps);return(0,y.createElement)(Ot||Kt||"div",{className:en,onScroll:this._onScroll,ref:this._outerRefSetter,style:(0,x.Z)({position:"relative",height:_n,width:at,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:xn},Bt)},(0,y.createElement)(ir||jt||"div",{children:Jt,ref:tt,style:{height:je,pointerEvents:R?"none":void 0,width:br}}))},Sn._callPropsCallbacks=function(){var Ir=this.props,Br=Ir.columnCount,en=Ir.onItemsRendered,hn=Ir.onScroll,xn=Ir.rowCount;if(typeof en=="function"&&Br>0&&xn>0){var _n=this._getHorizontalRangeToRender(),tt=_n[0],ir=_n[1],jt=_n[2],Qt=_n[3],Et=this._getVerticalRangeToRender(),we=Et[0],Ot=Et[1],Kt=Et[2],dt=Et[3];this._callOnItemsRendered(tt,ir,we,Ot,jt,Qt,Kt,dt)}if(typeof hn=="function"){var Bt=this.state,$=Bt.horizontalScrollDirection,at=Bt.scrollLeft,R=Bt.scrollTop,M=Bt.scrollUpdateWasRequested,A=Bt.verticalScrollDirection;this._callOnScroll(at,R,$,A,M)}},Sn._getHorizontalRangeToRender=function(){var Ir=this.props,Br=Ir.columnCount,en=Ir.overscanColumnCount,hn=Ir.overscanColumnsCount,xn=Ir.overscanCount,_n=Ir.rowCount,tt=this.state,ir=tt.horizontalScrollDirection,jt=tt.isScrolling,Qt=tt.scrollLeft,Et=en||hn||xn||1;if(Br===0||_n===0)return[0,0,0,0];var we=Le(this.props,Qt,this._instanceProps),Ot=Ze(this.props,we,Qt,this._instanceProps),Kt=!jt||ir==="backward"?Math.max(1,Et):1,dt=!jt||ir==="forward"?Math.max(1,Et):1;return[Math.max(0,we-Kt),Math.max(0,Math.min(Br-1,Ot+dt)),we,Ot]},Sn._getVerticalRangeToRender=function(){var Ir=this.props,Br=Ir.columnCount,en=Ir.overscanCount,hn=Ir.overscanRowCount,xn=Ir.overscanRowsCount,_n=Ir.rowCount,tt=this.state,ir=tt.isScrolling,jt=tt.verticalScrollDirection,Qt=tt.scrollTop,Et=hn||xn||en||1;if(Br===0||_n===0)return[0,0,0,0];var we=$e(this.props,Qt,this._instanceProps),Ot=dr(this.props,we,Qt,this._instanceProps),Kt=!ir||jt==="backward"?Math.max(1,Et):1,dt=!ir||jt==="forward"?Math.max(1,Et):1;return[Math.max(0,we-Kt),Math.max(0,Math.min(_n-1,Ot+dt)),we,Ot]},qr}(y.PureComponent),ht.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},ht}var Q=function(ht,ae){var Le=ht.children,Ze=ht.direction,qe=ht.height,fr=ht.innerTagName,ur=ht.outerTagName,kr=ht.overscanColumnsCount,yn=ht.overscanCount,un=ht.overscanRowsCount,Vr=ht.width,$e=ae.instance},J=50,ft=function(ht,ae){var Le=ht.rowCount,Ze=ae.rowMetadataMap,qe=ae.estimatedRowHeight,fr=ae.lastMeasuredRowIndex,ur=0;if(fr>=Le&&(fr=Le-1),fr>=0){var kr=Ze[fr];ur=kr.offset+kr.size}var yn=Le-fr-1,un=yn*qe;return ur+un},nt=function(ht,ae){var Le=ht.columnCount,Ze=ae.columnMetadataMap,qe=ae.estimatedColumnWidth,fr=ae.lastMeasuredColumnIndex,ur=0;if(fr>=Le&&(fr=Le-1),fr>=0){var kr=Ze[fr];ur=kr.offset+kr.size}var yn=Le-fr-1,un=yn*qe;return ur+un},yt=function(ht,ae,Le,Ze){var qe,fr,ur;if(ht==="column"?(qe=Ze.columnMetadataMap,fr=ae.columnWidth,ur=Ze.lastMeasuredColumnIndex):(qe=Ze.rowMetadataMap,fr=ae.rowHeight,ur=Ze.lastMeasuredRowIndex),Le>ur){var kr=0;if(ur>=0){var yn=qe[ur];kr=yn.offset+yn.size}for(var un=ur+1;un<=Le;un++){var Vr=fr(un);qe[un]={offset:kr,size:Vr},kr+=Vr}ht==="column"?Ze.lastMeasuredColumnIndex=Le:Ze.lastMeasuredRowIndex=Le}return qe[Le]},gt=function(ht,ae,Le,Ze){var qe,fr;ht==="column"?(qe=Le.columnMetadataMap,fr=Le.lastMeasuredColumnIndex):(qe=Le.rowMetadataMap,fr=Le.lastMeasuredRowIndex);var ur=fr>0?qe[fr].offset:0;return ur>=Ze?zt(ht,ae,Le,fr,0,Ze):Mt(ht,ae,Le,Math.max(0,fr),Ze)},zt=function(ht,ae,Le,Ze,qe,fr){for(;qe<=Ze;){var ur=qe+Math.floor((Ze-qe)/2),kr=yt(ht,ae,ur,Le).offset;if(kr===fr)return ur;kr<fr?qe=ur+1:kr>fr&&(Ze=ur-1)}return qe>0?qe-1:0},Mt=function(ht,ae,Le,Ze,qe){for(var fr=ht==="column"?ae.columnCount:ae.rowCount,ur=1;Ze<fr&&yt(ht,ae,Ze,Le).offset<qe;)Ze+=ur,ur*=2;return zt(ht,ae,Le,Math.min(Ze,fr-1),Math.floor(Ze/2),qe)},Ct=function(ht,ae,Le,Ze,qe,fr,ur){var kr=ht==="column"?ae.width:ae.height,yn=yt(ht,ae,Le,fr),un=ht==="column"?nt(ae,fr):ft(ae,fr),Vr=Math.max(0,Math.min(un-kr,yn.offset)),$e=Math.max(0,yn.offset-kr+ur+yn.size);switch(Ze==="smart"&&(qe>=$e-kr&&qe<=Vr+kr?Ze="auto":Ze="center"),Ze){case"start":return Vr;case"end":return $e;case"center":return Math.round($e+(Vr-$e)/2);case"auto":default:return qe>=$e&&qe<=Vr?qe:$e>Vr||qe<$e?$e:Vr}},rt=q({getColumnOffset:function(ht,ae,Le){return yt("column",ht,ae,Le).offset},getColumnStartIndexForOffset:function(ht,ae,Le){return gt("column",ht,Le,ae)},getColumnStopIndexForStartIndex:function(ht,ae,Le,Ze){for(var qe=ht.columnCount,fr=ht.width,ur=yt("column",ht,ae,Ze),kr=Le+fr,yn=ur.offset+ur.size,un=ae;un<qe-1&&yn<kr;)un++,yn+=yt("column",ht,un,Ze).size;return un},getColumnWidth:function(ht,ae,Le){return Le.columnMetadataMap[ae].size},getEstimatedTotalHeight:ft,getEstimatedTotalWidth:nt,getOffsetForColumnAndAlignment:function(ht,ae,Le,Ze,qe,fr){return Ct("column",ht,ae,Le,Ze,qe,fr)},getOffsetForRowAndAlignment:function(ht,ae,Le,Ze,qe,fr){return Ct("row",ht,ae,Le,Ze,qe,fr)},getRowOffset:function(ht,ae,Le){return yt("row",ht,ae,Le).offset},getRowHeight:function(ht,ae,Le){return Le.rowMetadataMap[ae].size},getRowStartIndexForOffset:function(ht,ae,Le){return gt("row",ht,Le,ae)},getRowStopIndexForStartIndex:function(ht,ae,Le,Ze){for(var qe=ht.rowCount,fr=ht.height,ur=yt("row",ht,ae,Ze),kr=Le+fr,yn=ur.offset+ur.size,un=ae;un<qe-1&&yn<kr;)un++,yn+=yt("row",ht,un,Ze).size;return un},initInstanceProps:function(ht,ae){var Le=ht,Ze=Le.estimatedColumnWidth,qe=Le.estimatedRowHeight,fr={columnMetadataMap:{},estimatedColumnWidth:Ze||J,estimatedRowHeight:qe||J,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return ae.resetAfterColumnIndex=function(ur,kr){kr===void 0&&(kr=!0),ae.resetAfterIndices({columnIndex:ur,shouldForceUpdate:kr})},ae.resetAfterRowIndex=function(ur,kr){kr===void 0&&(kr=!0),ae.resetAfterIndices({rowIndex:ur,shouldForceUpdate:kr})},ae.resetAfterIndices=function(ur){var kr=ur.columnIndex,yn=ur.rowIndex,un=ur.shouldForceUpdate,Vr=un===void 0?!0:un;typeof kr=="number"&&(fr.lastMeasuredColumnIndex=Math.min(fr.lastMeasuredColumnIndex,kr-1)),typeof yn=="number"&&(fr.lastMeasuredRowIndex=Math.min(fr.lastMeasuredRowIndex,yn-1)),ae._getItemStyleCache(-1),Vr&&ae.forceUpdate()},fr},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(ht){var ae=ht.columnWidth,Le=ht.rowHeight}}),ot=150,Tt=function(ht,ae){return ht},Rt=null,st=null;function bt(de){var ht,ae=de.getItemOffset,Le=de.getEstimatedTotalSize,Ze=de.getItemSize,qe=de.getOffsetForIndexAndAlignment,fr=de.getStartIndexForOffset,ur=de.getStopIndexForStartIndex,kr=de.initInstanceProps,yn=de.shouldResetStyleCacheOnItemSizeChange,un=de.validateProps;return ht=function(Vr){T($e,Vr);function $e(ar){var Qe;return Qe=Vr.call(this,ar)||this,Qe._instanceProps=kr(Qe.props,(0,k.Z)(Qe)),Qe._outerRef=void 0,Qe._resetIsScrollingTimeoutId=null,Qe.state={instance:(0,k.Z)(Qe),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof Qe.props.initialScrollOffset=="number"?Qe.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},Qe._callOnItemsRendered=void 0,Qe._callOnItemsRendered=S(function(Pr,Zr,qr,Sn){return Qe.props.onItemsRendered({overscanStartIndex:Pr,overscanStopIndex:Zr,visibleStartIndex:qr,visibleStopIndex:Sn})}),Qe._callOnScroll=void 0,Qe._callOnScroll=S(function(Pr,Zr,qr){return Qe.props.onScroll({scrollDirection:Pr,scrollOffset:Zr,scrollUpdateWasRequested:qr})}),Qe._getItemStyle=void 0,Qe._getItemStyle=function(Pr){var Zr=Qe.props,qr=Zr.direction,Sn=Zr.itemSize,Yn=Zr.layout,Ir=Qe._getItemStyleCache(yn&&Sn,yn&&Yn,yn&&qr),Br;if(Ir.hasOwnProperty(Pr))Br=Ir[Pr];else{var en=ae(Qe.props,Pr,Qe._instanceProps),hn=Ze(Qe.props,Pr,Qe._instanceProps),xn=qr==="horizontal"||Yn==="horizontal",_n=qr==="rtl",tt=xn?en:0;Ir[Pr]=Br={position:"absolute",left:_n?void 0:tt,right:_n?tt:void 0,top:xn?0:en,height:xn?"100%":hn,width:xn?hn:"100%"}}return Br},Qe._getItemStyleCache=void 0,Qe._getItemStyleCache=S(function(Pr,Zr,qr){return{}}),Qe._onScrollHorizontal=function(Pr){var Zr=Pr.currentTarget,qr=Zr.clientWidth,Sn=Zr.scrollLeft,Yn=Zr.scrollWidth;Qe.setState(function(Ir){if(Ir.scrollOffset===Sn)return null;var Br=Qe.props.direction,en=Sn;if(Br==="rtl")switch(h()){case"negative":en=-Sn;break;case"positive-descending":en=Yn-qr-Sn;break}return en=Math.max(0,Math.min(en,Yn-qr)),{isScrolling:!0,scrollDirection:Ir.scrollOffset<Sn?"forward":"backward",scrollOffset:en,scrollUpdateWasRequested:!1}},Qe._resetIsScrollingDebounced)},Qe._onScrollVertical=function(Pr){var Zr=Pr.currentTarget,qr=Zr.clientHeight,Sn=Zr.scrollHeight,Yn=Zr.scrollTop;Qe.setState(function(Ir){if(Ir.scrollOffset===Yn)return null;var Br=Math.max(0,Math.min(Yn,Sn-qr));return{isScrolling:!0,scrollDirection:Ir.scrollOffset<Br?"forward":"backward",scrollOffset:Br,scrollUpdateWasRequested:!1}},Qe._resetIsScrollingDebounced)},Qe._outerRefSetter=function(Pr){var Zr=Qe.props.outerRef;Qe._outerRef=Pr,typeof Zr=="function"?Zr(Pr):Zr!=null&&typeof Zr=="object"&&Zr.hasOwnProperty("current")&&(Zr.current=Pr)},Qe._resetIsScrollingDebounced=function(){Qe._resetIsScrollingTimeoutId!==null&&E(Qe._resetIsScrollingTimeoutId),Qe._resetIsScrollingTimeoutId=D(Qe._resetIsScrolling,ot)},Qe._resetIsScrolling=function(){Qe._resetIsScrollingTimeoutId=null,Qe.setState({isScrolling:!1},function(){Qe._getItemStyleCache(-1,null)})},Qe}$e.getDerivedStateFromProps=function(Qe,Pr){return Ft(Qe,Pr),un(Qe),null};var dr=$e.prototype;return dr.scrollTo=function(Qe){Qe=Math.max(0,Qe),this.setState(function(Pr){return Pr.scrollOffset===Qe?null:{scrollDirection:Pr.scrollOffset<Qe?"forward":"backward",scrollOffset:Qe,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},dr.scrollToItem=function(Qe,Pr){Pr===void 0&&(Pr="auto");var Zr=this.props,qr=Zr.itemCount,Sn=Zr.layout,Yn=this.state.scrollOffset;Qe=Math.max(0,Math.min(Qe,qr-1));var Ir=0;if(this._outerRef){var Br=this._outerRef;Sn==="vertical"?Ir=Br.scrollWidth>Br.clientWidth?W():0:Ir=Br.scrollHeight>Br.clientHeight?W():0}this.scrollTo(qe(this.props,Qe,Pr,Yn,this._instanceProps,Ir))},dr.componentDidMount=function(){var Qe=this.props,Pr=Qe.direction,Zr=Qe.initialScrollOffset,qr=Qe.layout;if(typeof Zr=="number"&&this._outerRef!=null){var Sn=this._outerRef;Pr==="horizontal"||qr==="horizontal"?Sn.scrollLeft=Zr:Sn.scrollTop=Zr}this._callPropsCallbacks()},dr.componentDidUpdate=function(){var Qe=this.props,Pr=Qe.direction,Zr=Qe.layout,qr=this.state,Sn=qr.scrollOffset,Yn=qr.scrollUpdateWasRequested;if(Yn&&this._outerRef!=null){var Ir=this._outerRef;if(Pr==="horizontal"||Zr==="horizontal")if(Pr==="rtl")switch(h()){case"negative":Ir.scrollLeft=-Sn;break;case"positive-ascending":Ir.scrollLeft=Sn;break;default:var Br=Ir.clientWidth,en=Ir.scrollWidth;Ir.scrollLeft=en-Br-Sn;break}else Ir.scrollLeft=Sn;else Ir.scrollTop=Sn}this._callPropsCallbacks()},dr.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&E(this._resetIsScrollingTimeoutId)},dr.render=function(){var Qe=this.props,Pr=Qe.children,Zr=Qe.className,qr=Qe.direction,Sn=Qe.height,Yn=Qe.innerRef,Ir=Qe.innerElementType,Br=Qe.innerTagName,en=Qe.itemCount,hn=Qe.itemData,xn=Qe.itemKey,_n=xn===void 0?Tt:xn,tt=Qe.layout,ir=Qe.outerElementType,jt=Qe.outerTagName,Qt=Qe.style,Et=Qe.useIsScrolling,we=Qe.width,Ot=this.state.isScrolling,Kt=qr==="horizontal"||tt==="horizontal",dt=Kt?this._onScrollHorizontal:this._onScrollVertical,Bt=this._getRangeToRender(),$=Bt[0],at=Bt[1],R=[];if(en>0)for(var M=$;M<=at;M++)R.push((0,y.createElement)(Pr,{data:hn,key:_n(M,hn),index:M,isScrolling:Et?Ot:void 0,style:this._getItemStyle(M)}));var A=Le(this.props,this._instanceProps);return(0,y.createElement)(ir||jt||"div",{className:Zr,onScroll:dt,ref:this._outerRefSetter,style:(0,x.Z)({position:"relative",height:Sn,width:we,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:qr},Qt)},(0,y.createElement)(Ir||Br||"div",{children:R,ref:Yn,style:{height:Kt?"100%":A,pointerEvents:Ot?"none":void 0,width:Kt?A:"100%"}}))},dr._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var Qe=this.props.itemCount;if(Qe>0){var Pr=this._getRangeToRender(),Zr=Pr[0],qr=Pr[1],Sn=Pr[2],Yn=Pr[3];this._callOnItemsRendered(Zr,qr,Sn,Yn)}}if(typeof this.props.onScroll=="function"){var Ir=this.state,Br=Ir.scrollDirection,en=Ir.scrollOffset,hn=Ir.scrollUpdateWasRequested;this._callOnScroll(Br,en,hn)}},dr._getRangeToRender=function(){var Qe=this.props,Pr=Qe.itemCount,Zr=Qe.overscanCount,qr=this.state,Sn=qr.isScrolling,Yn=qr.scrollDirection,Ir=qr.scrollOffset;if(Pr===0)return[0,0,0,0];var Br=fr(this.props,Ir,this._instanceProps),en=ur(this.props,Br,Ir,this._instanceProps),hn=!Sn||Yn==="backward"?Math.max(1,Zr):1,xn=!Sn||Yn==="forward"?Math.max(1,Zr):1;return[Math.max(0,Br-hn),Math.max(0,Math.min(Pr-1,en+xn)),Br,en]},$e}(y.PureComponent),ht.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},ht}var Ft=function(ht,ae){var Le=ht.children,Ze=ht.direction,qe=ht.height,fr=ht.layout,ur=ht.innerTagName,kr=ht.outerTagName,yn=ht.width,un=ae.instance;if(!1)var Vr},Ht=50,_t=function(ht,ae,Le){var Ze=ht,qe=Ze.itemSize,fr=Le.itemMetadataMap,ur=Le.lastMeasuredIndex;if(ae>ur){var kr=0;if(ur>=0){var yn=fr[ur];kr=yn.offset+yn.size}for(var un=ur+1;un<=ae;un++){var Vr=qe(un);fr[un]={offset:kr,size:Vr},kr+=Vr}Le.lastMeasuredIndex=ae}return fr[ae]},Xt=function(ht,ae,Le){var Ze=ae.itemMetadataMap,qe=ae.lastMeasuredIndex,fr=qe>0?Ze[qe].offset:0;return fr>=Le?ee(ht,ae,qe,0,Le):se(ht,ae,Math.max(0,qe),Le)},ee=function(ht,ae,Le,Ze,qe){for(;Ze<=Le;){var fr=Ze+Math.floor((Le-Ze)/2),ur=_t(ht,fr,ae).offset;if(ur===qe)return fr;ur<qe?Ze=fr+1:ur>qe&&(Le=fr-1)}return Ze>0?Ze-1:0},se=function(ht,ae,Le,Ze){for(var qe=ht.itemCount,fr=1;Le<qe&&_t(ht,Le,ae).offset<Ze;)Le+=fr,fr*=2;return ee(ht,ae,Math.min(Le,qe-1),Math.floor(Le/2),Ze)},ue=function(ht,ae){var Le=ht.itemCount,Ze=ae.itemMetadataMap,qe=ae.estimatedItemSize,fr=ae.lastMeasuredIndex,ur=0;if(fr>=Le&&(fr=Le-1),fr>=0){var kr=Ze[fr];ur=kr.offset+kr.size}var yn=Le-fr-1,un=yn*qe;return ur+un},Ut=bt({getItemOffset:function(ht,ae,Le){return _t(ht,ae,Le).offset},getItemSize:function(ht,ae,Le){return Le.itemMetadataMap[ae].size},getEstimatedTotalSize:ue,getOffsetForIndexAndAlignment:function(ht,ae,Le,Ze,qe,fr){var ur=ht.direction,kr=ht.height,yn=ht.layout,un=ht.width,Vr=ur==="horizontal"||yn==="horizontal",$e=Vr?un:kr,dr=_t(ht,ae,qe),ar=ue(ht,qe),Qe=Math.max(0,Math.min(ar-$e,dr.offset)),Pr=Math.max(0,dr.offset-$e+dr.size+fr);switch(Le==="smart"&&(Ze>=Pr-$e&&Ze<=Qe+$e?Le="auto":Le="center"),Le){case"start":return Qe;case"end":return Pr;case"center":return Math.round(Pr+(Qe-Pr)/2);case"auto":default:return Ze>=Pr&&Ze<=Qe?Ze:Ze<Pr?Pr:Qe}},getStartIndexForOffset:function(ht,ae,Le){return Xt(ht,Le,ae)},getStopIndexForStartIndex:function(ht,ae,Le,Ze){for(var qe=ht.direction,fr=ht.height,ur=ht.itemCount,kr=ht.layout,yn=ht.width,un=qe==="horizontal"||kr==="horizontal",Vr=un?yn:fr,$e=_t(ht,ae,Ze),dr=Le+Vr,ar=$e.offset+$e.size,Qe=ae;Qe<ur-1&&ar<dr;)Qe++,ar+=_t(ht,Qe,Ze).size;return Qe},initInstanceProps:function(ht,ae){var Le=ht,Ze=Le.estimatedItemSize,qe={itemMetadataMap:{},estimatedItemSize:Ze||Ht,lastMeasuredIndex:-1};return ae.resetAfterIndex=function(fr,ur){ur===void 0&&(ur=!0),qe.lastMeasuredIndex=Math.min(qe.lastMeasuredIndex,fr-1),ae._getItemStyleCache(-1),ur&&ae.forceUpdate()},qe},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(ht){var ae=ht.itemSize}}),oe=q({getColumnOffset:function(ht,ae){var Le=ht.columnWidth;return ae*Le},getColumnWidth:function(ht,ae){var Le=ht.columnWidth;return Le},getRowOffset:function(ht,ae){var Le=ht.rowHeight;return ae*Le},getRowHeight:function(ht,ae){var Le=ht.rowHeight;return Le},getEstimatedTotalHeight:function(ht){var ae=ht.rowCount,Le=ht.rowHeight;return Le*ae},getEstimatedTotalWidth:function(ht){var ae=ht.columnCount,Le=ht.columnWidth;return Le*ae},getOffsetForColumnAndAlignment:function(ht,ae,Le,Ze,qe,fr){var ur=ht.columnCount,kr=ht.columnWidth,yn=ht.width,un=Math.max(0,ur*kr-yn),Vr=Math.min(un,ae*kr),$e=Math.max(0,ae*kr-yn+fr+kr);switch(Le==="smart"&&(Ze>=$e-yn&&Ze<=Vr+yn?Le="auto":Le="center"),Le){case"start":return Vr;case"end":return $e;case"center":var dr=Math.round($e+(Vr-$e)/2);return dr<Math.ceil(yn/2)?0:dr>un+Math.floor(yn/2)?un:dr;case"auto":default:return Ze>=$e&&Ze<=Vr?Ze:$e>Vr||Ze<$e?$e:Vr}},getOffsetForRowAndAlignment:function(ht,ae,Le,Ze,qe,fr){var ur=ht.rowHeight,kr=ht.height,yn=ht.rowCount,un=Math.max(0,yn*ur-kr),Vr=Math.min(un,ae*ur),$e=Math.max(0,ae*ur-kr+fr+ur);switch(Le==="smart"&&(Ze>=$e-kr&&Ze<=Vr+kr?Le="auto":Le="center"),Le){case"start":return Vr;case"end":return $e;case"center":var dr=Math.round($e+(Vr-$e)/2);return dr<Math.ceil(kr/2)?0:dr>un+Math.floor(kr/2)?un:dr;case"auto":default:return Ze>=$e&&Ze<=Vr?Ze:$e>Vr||Ze<$e?$e:Vr}},getColumnStartIndexForOffset:function(ht,ae){var Le=ht.columnWidth,Ze=ht.columnCount;return Math.max(0,Math.min(Ze-1,Math.floor(ae/Le)))},getColumnStopIndexForStartIndex:function(ht,ae,Le){var Ze=ht.columnWidth,qe=ht.columnCount,fr=ht.width,ur=ae*Ze,kr=Math.ceil((fr+Le-ur)/Ze);return Math.max(0,Math.min(qe-1,ae+kr-1))},getRowStartIndexForOffset:function(ht,ae){var Le=ht.rowHeight,Ze=ht.rowCount;return Math.max(0,Math.min(Ze-1,Math.floor(ae/Le)))},getRowStopIndexForStartIndex:function(ht,ae,Le){var Ze=ht.rowHeight,qe=ht.rowCount,fr=ht.height,ur=ae*Ze,kr=Math.ceil((fr+Le-ur)/Ze);return Math.max(0,Math.min(qe-1,ae+kr-1))},initInstanceProps:function(ht){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(ht){var ae=ht.columnWidth,Le=ht.rowHeight}}),Pe=bt({getItemOffset:function(ht,ae){var Le=ht.itemSize;return ae*Le},getItemSize:function(ht,ae){var Le=ht.itemSize;return Le},getEstimatedTotalSize:function(ht){var ae=ht.itemCount,Le=ht.itemSize;return Le*ae},getOffsetForIndexAndAlignment:function(ht,ae,Le,Ze,qe,fr){var ur=ht.direction,kr=ht.height,yn=ht.itemCount,un=ht.itemSize,Vr=ht.layout,$e=ht.width,dr=ur==="horizontal"||Vr==="horizontal",ar=dr?$e:kr,Qe=Math.max(0,yn*un-ar),Pr=Math.min(Qe,ae*un),Zr=Math.max(0,ae*un-ar+un+fr);switch(Le==="smart"&&(Ze>=Zr-ar&&Ze<=Pr+ar?Le="auto":Le="center"),Le){case"start":return Pr;case"end":return Zr;case"center":{var qr=Math.round(Zr+(Pr-Zr)/2);return qr<Math.ceil(ar/2)?0:qr>Qe+Math.floor(ar/2)?Qe:qr}case"auto":default:return Ze>=Zr&&Ze<=Pr?Ze:Ze<Zr?Zr:Pr}},getStartIndexForOffset:function(ht,ae){var Le=ht.itemCount,Ze=ht.itemSize;return Math.max(0,Math.min(Le-1,Math.floor(ae/Ze)))},getStopIndexForStartIndex:function(ht,ae,Le){var Ze=ht.direction,qe=ht.height,fr=ht.itemCount,ur=ht.itemSize,kr=ht.layout,yn=ht.width,un=Ze==="horizontal"||kr==="horizontal",Vr=ae*ur,$e=un?yn:qe,dr=Math.ceil(($e+Le-Vr)/ur);return Math.max(0,Math.min(fr-1,ae+dr-1))},initInstanceProps:function(ht){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(ht){var ae=ht.itemSize}});function te(de,ht){for(var ae in de)if(!(ae in ht))return!0;for(var Le in ht)if(de[Le]!==ht[Le])return!0;return!1}var ve=null,Ue=null;function xe(de,ht){var ae=de.style,Le=_objectWithoutPropertiesLoose(de,ve),Ze=ht.style,qe=_objectWithoutPropertiesLoose(ht,Ue);return!te(ae,Ze)&&!te(Le,qe)}function Re(de,ht){return!xe(this.props,de)||te(this.state,ht)}},481550:function(He){(function(z,C){He.exports=C()})(this,function(){"use strict";var z=function(Dt){return Dt instanceof Uint8Array||Dt instanceof Uint16Array||Dt instanceof Uint32Array||Dt instanceof Int8Array||Dt instanceof Int16Array||Dt instanceof Int32Array||Dt instanceof Float32Array||Dt instanceof Float64Array||Dt instanceof Uint8ClampedArray},C=function(Dt,Me){for(var Ve=Object.keys(Me),Yr=0;Yr<Ve.length;++Yr)Dt[Ve[Yr]]=Me[Ve[Yr]];return Dt},x=`
`;function k(Dt){return typeof atob!="undefined"?atob(Dt):"base64:"+Dt}function w(Dt){var Me=new Error("(regl) "+Dt);throw console.error(Me),Me}function T(Dt,Me){Dt||w(Me)}function L(Dt){return Dt?": "+Dt:""}function P(Dt,Me,Ve){Dt in Me||w("unknown parameter ("+Dt+")"+L(Ve)+". possible values: "+Object.keys(Me).join())}function p(Dt,Me){z(Dt)||w("invalid parameter type"+L(Me)+". must be a typed array")}function m(Dt,Me){switch(Me){case"number":return typeof Dt=="number";case"object":return typeof Dt=="object";case"string":return typeof Dt=="string";case"boolean":return typeof Dt=="boolean";case"function":return typeof Dt=="function";case"undefined":return typeof Dt=="undefined";case"symbol":return typeof Dt=="symbol"}}function S(Dt,Me,Ve){m(Dt,Me)||w("invalid parameter type"+L(Ve)+". expected "+Me+", got "+typeof Dt)}function y(Dt,Me){Dt>=0&&(Dt|0)===Dt||w("invalid parameter type, ("+Dt+")"+L(Me)+". must be a nonnegative integer")}function g(Dt,Me,Ve){Me.indexOf(Dt)<0&&w("invalid value"+L(Ve)+". must be one of: "+Me)}var O=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function E(Dt){Object.keys(Dt).forEach(function(Me){O.indexOf(Me)<0&&w('invalid regl constructor argument "'+Me+'". must be one of '+O)})}function D(Dt,Me){for(Dt=Dt+"";Dt.length<Me;)Dt=" "+Dt;return Dt}function F(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function W(Dt,Me){this.number=Dt,this.line=Me,this.errors=[]}function b(Dt,Me,Ve){this.file=Dt,this.line=Me,this.message=Ve}function h(){var Dt=new Error,Me=(Dt.stack||Dt).toString(),Ve=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Me);if(Ve)return Ve[1];var Yr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Me);return Yr?Yr[1]:"unknown"}function K(){var Dt=new Error,Me=(Dt.stack||Dt).toString(),Ve=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Me);if(Ve)return Ve[1];var Yr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Me);return Yr?Yr[1]:"unknown"}function U(Dt,Me){var Ve=Dt.split(`
`),Yr=1,vn=0,Xr={unknown:new F,0:new F};Xr.unknown.name=Xr[0].name=Me||h(),Xr.unknown.lines.push(new W(0,""));for(var jr=0;jr<Ve.length;++jr){var An=Ve[jr],On=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(An);if(On)switch(On[1]){case"line":var Pn=/(\d+)(\s+\d+)?/.exec(On[2]);Pn&&(Yr=Pn[1]|0,Pn[2]&&(vn=Pn[2]|0,vn in Xr||(Xr[vn]=new F)));break;case"define":var En=/SHADER_NAME(_B64)?\s+(.*)$/.exec(On[2]);En&&(Xr[vn].name=En[1]?k(En[2]):En[2]);break}Xr[vn].lines.push(new W(Yr++,An))}return Object.keys(Xr).forEach(function(zn){var v=Xr[zn];v.lines.forEach(function(N){v.index[N.number]=N})}),Xr}function Y(Dt){var Me=[];return Dt.split(`
`).forEach(function(Ve){if(!(Ve.length<5)){var Yr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ve);Yr?Me.push(new b(Yr[1]|0,Yr[2]|0,Yr[3].trim())):Ve.length>0&&Me.push(new b("unknown",0,Ve))}}),Me}function Z(Dt,Me){Me.forEach(function(Ve){var Yr=Dt[Ve.file];if(Yr){var vn=Yr.index[Ve.line];if(vn){vn.errors.push(Ve),Yr.hasErrors=!0;return}}Dt.unknown.hasErrors=!0,Dt.unknown.lines[0].errors.push(Ve)})}function H(Dt,Me,Ve,Yr,vn){if(!Dt.getShaderParameter(Me,Dt.COMPILE_STATUS)){var Xr=Dt.getShaderInfoLog(Me),jr=Yr===Dt.FRAGMENT_SHADER?"fragment":"vertex";gt(Ve,"string",jr+" shader source must be a string",vn);var An=U(Ve,vn),On=Y(Xr);Z(An,On),Object.keys(An).forEach(function(Pn){var En=An[Pn];if(!En.hasErrors)return;var zn=[""],v=[""];function N(V,it){zn.push(V),v.push(it||"")}N("file number "+Pn+": "+En.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),En.lines.forEach(function(V){if(V.errors.length>0){N(D(V.number,4)+"|  ","background-color:yellow; font-weight:bold"),N(V.line+x,"color:red; background-color:yellow; font-weight:bold");var it=0;V.errors.forEach(function(vt){var xt=vt.message,At=/^\s*'(.*)'\s*:\s*(.*)$/.exec(xt);if(At){var Nt=At[1];switch(xt=At[2],Nt){case"assign":Nt="=";break}it=Math.max(V.line.indexOf(Nt,it),0)}else it=0;N(D("| ",6)),N(D("^^^",it+3)+x,"font-weight:bold"),N(D("| ",6)),N(xt+x,"font-weight:bold")}),N(D("| ",6)+x)}else N(D(V.number,4)+"|  "),N(V.line+x,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=zn.join("%c"),console.log.apply(console,v)):console.log(zn.join(""))}),T.raise("Error compiling "+jr+" shader, "+An[0].name)}}function q(Dt,Me,Ve,Yr,vn){if(!Dt.getProgramParameter(Me,Dt.LINK_STATUS)){var Xr=Dt.getProgramInfoLog(Me),jr=U(Ve,vn),An=U(Yr,vn),On='Error linking program with vertex shader, "'+An[0].name+'", and fragment shader "'+jr[0].name+'"';typeof document!="undefined"?console.log("%c"+On+x+"%c"+Xr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(On+x+Xr),T.raise(On)}}function Q(Dt){Dt._commandRef=h()}function J(Dt,Me,Ve,Yr){Q(Dt);function vn(On){return On?Yr.id(On):0}Dt._fragId=vn(Dt.static.frag),Dt._vertId=vn(Dt.static.vert);function Xr(On,Pn){Object.keys(Pn).forEach(function(En){On[Yr.id(En)]=!0})}var jr=Dt._uniformSet={};Xr(jr,Me.static),Xr(jr,Me.dynamic);var An=Dt._attributeSet={};Xr(An,Ve.static),Xr(An,Ve.dynamic),Dt._hasCount="count"in Dt.static||"count"in Dt.dynamic||"elements"in Dt.static||"elements"in Dt.dynamic}function ft(Dt,Me){var Ve=K();w(Dt+" in command "+(Me||h())+(Ve==="unknown"?"":" called from "+Ve))}function nt(Dt,Me,Ve){Dt||ft(Me,Ve||h())}function yt(Dt,Me,Ve,Yr){Dt in Me||ft("unknown parameter ("+Dt+")"+L(Ve)+". possible values: "+Object.keys(Me).join(),Yr||h())}function gt(Dt,Me,Ve,Yr){m(Dt,Me)||ft("invalid parameter type"+L(Ve)+". expected "+Me+", got "+typeof Dt,Yr||h())}function zt(Dt){Dt()}function Mt(Dt,Me,Ve){Dt.texture?g(Dt.texture._texture.internalformat,Me,"unsupported texture format for attachment"):g(Dt.renderbuffer._renderbuffer.format,Ve,"unsupported renderbuffer format for attachment")}var Ct=33071,rt=9728,ot=9984,Tt=9985,Rt=9986,st=9987,bt=5120,Ft=5121,Ht=5122,_t=5123,Xt=5124,ee=5125,se=5126,ue=32819,Ut=32820,oe=33635,Pe=34042,te=36193,ve={};ve[bt]=ve[Ft]=1,ve[Ht]=ve[_t]=ve[te]=ve[oe]=ve[ue]=ve[Ut]=2,ve[Xt]=ve[ee]=ve[se]=ve[Pe]=4;function Ue(Dt,Me){return Dt===Ut||Dt===ue||Dt===oe?2:Dt===Pe?4:ve[Dt]*Me}function xe(Dt){return!(Dt&Dt-1)&&!!Dt}function Re(Dt,Me,Ve){var Yr,vn=Me.width,Xr=Me.height,jr=Me.channels;T(vn>0&&vn<=Ve.maxTextureSize&&Xr>0&&Xr<=Ve.maxTextureSize,"invalid texture shape"),(Dt.wrapS!==Ct||Dt.wrapT!==Ct)&&T(xe(vn)&&xe(Xr),"incompatible wrap mode for texture, both width and height must be power of 2"),Me.mipmask===1?vn!==1&&Xr!==1&&T(Dt.minFilter!==ot&&Dt.minFilter!==Rt&&Dt.minFilter!==Tt&&Dt.minFilter!==st,"min filter requires mipmap"):(T(xe(vn)&&xe(Xr),"texture must be a square power of 2 to support mipmapping"),T(Me.mipmask===(vn<<1)-1,"missing or incomplete mipmap data")),Me.type===se&&(Ve.extensions.indexOf("oes_texture_float_linear")<0&&T(Dt.minFilter===rt&&Dt.magFilter===rt,"filter not supported, must enable oes_texture_float_linear"),T(!Dt.genMipmaps,"mipmap generation not supported with float textures"));var An=Me.images;for(Yr=0;Yr<16;++Yr)if(An[Yr]){var On=vn>>Yr,Pn=Xr>>Yr;T(Me.mipmask&1<<Yr,"missing mipmap data");var En=An[Yr];if(T(En.width===On&&En.height===Pn,"invalid shape for mip images"),T(En.format===Me.format&&En.internalformat===Me.internalformat&&En.type===Me.type,"incompatible type for mip image"),!En.compressed)if(En.data){var zn=Math.ceil(Ue(En.type,jr)*On/En.unpackAlignment)*En.unpackAlignment;T(En.data.byteLength===zn*Pn,"invalid data for image, buffer size is inconsistent with image format")}else En.element||En.copy}else Dt.genMipmaps||T((Me.mipmask&1<<Yr)===0,"extra mipmap data");Me.compressed&&T(!Dt.genMipmaps,"mipmap generation for compressed images not supported")}function de(Dt,Me,Ve,Yr){var vn=Dt.width,Xr=Dt.height,jr=Dt.channels;T(vn>0&&vn<=Yr.maxTextureSize&&Xr>0&&Xr<=Yr.maxTextureSize,"invalid texture shape"),T(vn===Xr,"cube map must be square"),T(Me.wrapS===Ct&&Me.wrapT===Ct,"wrap mode not supported by cube map");for(var An=0;An<Ve.length;++An){var On=Ve[An];T(On.width===vn&&On.height===Xr,"inconsistent cube map face shape"),Me.genMipmaps&&(T(!On.compressed,"can not generate mipmap for compressed textures"),T(On.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Pn=On.images,En=0;En<16;++En){var zn=Pn[En];if(zn){var v=vn>>En,N=Xr>>En;T(On.mipmask&1<<En,"missing mipmap data"),T(zn.width===v&&zn.height===N,"invalid shape for mip images"),T(zn.format===Dt.format&&zn.internalformat===Dt.internalformat&&zn.type===Dt.type,"incompatible type for mip image"),zn.compressed||(zn.data?T(zn.data.byteLength===v*N*Math.max(Ue(zn.type,jr),zn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):zn.element||zn.copy)}}}}var ht=C(T,{optional:zt,raise:w,commandRaise:ft,command:nt,parameter:P,commandParameter:yt,constructor:E,type:S,commandType:gt,isTypedArray:p,nni:y,oneOf:g,shaderError:H,linkError:q,callSite:K,saveCommandRef:Q,saveDrawInfo:J,framebufferFormat:Mt,guessCommand:h,texture2D:Re,textureCube:de}),ae=0,Le=0,Ze=5,qe=6;function fr(Dt,Me){this.id=ae++,this.type=Dt,this.data=Me}function ur(Dt){return Dt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function kr(Dt){if(Dt.length===0)return[];var Me=Dt.charAt(0),Ve=Dt.charAt(Dt.length-1);if(Dt.length>1&&Me===Ve&&(Me==='"'||Me==="'"))return['"'+ur(Dt.substr(1,Dt.length-2))+'"'];var Yr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Dt);if(Yr)return kr(Dt.substr(0,Yr.index)).concat(kr(Yr[1])).concat(kr(Dt.substr(Yr.index+Yr[0].length)));var vn=Dt.split(".");if(vn.length===1)return['"'+ur(Dt)+'"'];for(var Xr=[],jr=0;jr<vn.length;++jr)Xr=Xr.concat(kr(vn[jr]));return Xr}function yn(Dt){return"["+kr(Dt).join("][")+"]"}function un(Dt,Me){return new fr(Dt,yn(Me+""))}function Vr(Dt){return typeof Dt=="function"&&!Dt._reglType||Dt instanceof fr}function $e(Dt,Me){if(typeof Dt=="function")return new fr(Le,Dt);if(typeof Dt=="number"||typeof Dt=="boolean")return new fr(Ze,Dt);if(Array.isArray(Dt))return new fr(qe,Dt.map((Ve,Yr)=>$e(Ve,Me+"["+Yr+"]")));if(Dt instanceof fr)return Dt;ht(!1,"invalid option type in uniform "+Me)}var dr={DynamicVariable:fr,define:un,isDynamic:Vr,unbox:$e,accessor:yn},ar={next:typeof requestAnimationFrame=="function"?function(Dt){return requestAnimationFrame(Dt)}:function(Dt){return setTimeout(Dt,16)},cancel:typeof cancelAnimationFrame=="function"?function(Dt){return cancelAnimationFrame(Dt)}:clearTimeout},Qe=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Pr(){var Dt={"":0},Me=[""];return{id:function(Ve){var Yr=Dt[Ve];return Yr||(Yr=Dt[Ve]=Me.length,Me.push(Ve),Yr)},str:function(Ve){return Me[Ve]}}}function Zr(Dt,Me,Ve){var Yr=document.createElement("canvas");C(Yr.style,{border:0,margin:0,padding:0,top:0,left:0}),Dt.appendChild(Yr),Dt===document.body&&(Yr.style.position="absolute",C(Dt.style,{margin:0,padding:0}));function vn(){var An=window.innerWidth,On=window.innerHeight;if(Dt!==document.body){var Pn=Dt.getBoundingClientRect();An=Pn.right-Pn.left,On=Pn.bottom-Pn.top}Yr.width=Ve*An,Yr.height=Ve*On,C(Yr.style,{width:An+"px",height:On+"px"})}var Xr;Dt!==document.body&&typeof ResizeObserver=="function"?(Xr=new ResizeObserver(function(){setTimeout(vn)}),Xr.observe(Dt)):window.addEventListener("resize",vn,!1);function jr(){Xr?Xr.disconnect():window.removeEventListener("resize",vn),Dt.removeChild(Yr)}return vn(),{canvas:Yr,onDestroy:jr}}function qr(Dt,Me){function Ve(Yr){try{return Dt.getContext(Yr,Me)}catch(vn){return null}}return Ve("webgl")||Ve("experimental-webgl")||Ve("webgl-experimental")}function Sn(Dt){return typeof Dt.nodeName=="string"&&typeof Dt.appendChild=="function"&&typeof Dt.getBoundingClientRect=="function"}function Yn(Dt){return typeof Dt.drawArrays=="function"||typeof Dt.drawElements=="function"}function Ir(Dt){return typeof Dt=="string"?Dt.split():(ht(Array.isArray(Dt),"invalid extension array"),Dt)}function Br(Dt){return typeof Dt=="string"?(ht(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Dt)):Dt}function en(Dt){var Me=Dt||{},Ve,Yr,vn,Xr,jr={},An=[],On=[],Pn=typeof window=="undefined"?1:window.devicePixelRatio,En=!1,zn=function(V){V&&ht.raise(V)},v=function(){};if(typeof Me=="string"?(ht(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ve=document.querySelector(Me),ht(Ve,"invalid query string for element")):typeof Me=="object"?Sn(Me)?Ve=Me:Yn(Me)?(Xr=Me,vn=Xr.canvas):(ht.constructor(Me),"gl"in Me?Xr=Me.gl:"canvas"in Me?vn=Br(Me.canvas):"container"in Me&&(Yr=Br(Me.container)),"attributes"in Me&&(jr=Me.attributes,ht.type(jr,"object","invalid context attributes")),"extensions"in Me&&(An=Ir(Me.extensions)),"optionalExtensions"in Me&&(On=Ir(Me.optionalExtensions)),"onDone"in Me&&(ht.type(Me.onDone,"function","invalid or missing onDone callback"),zn=Me.onDone),"profile"in Me&&(En=!!Me.profile),"pixelRatio"in Me&&(Pn=+Me.pixelRatio,ht(Pn>0,"invalid pixel ratio"))):ht.raise("invalid arguments to regl"),Ve&&(Ve.nodeName.toLowerCase()==="canvas"?vn=Ve:Yr=Ve),!Xr){if(!vn){ht(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var N=Zr(Yr||document.body,zn,Pn);if(!N)return null;vn=N.canvas,v=N.onDestroy}jr.premultipliedAlpha===void 0&&(jr.premultipliedAlpha=!0),Xr=qr(vn,jr)}return Xr?{gl:Xr,canvas:vn,container:Yr,extensions:An,optionalExtensions:On,pixelRatio:Pn,profile:En,onDone:zn,onDestroy:v}:(v(),zn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function hn(Dt,Me){var Ve={};function Yr(jr){ht.type(jr,"string","extension name must be string");var An=jr.toLowerCase(),On;try{On=Ve[An]=Dt.getExtension(An)}catch(Pn){}return!!On}for(var vn=0;vn<Me.extensions.length;++vn){var Xr=Me.extensions[vn];if(!Yr(Xr))return Me.onDestroy(),Me.onDone('"'+Xr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Me.optionalExtensions.forEach(Yr),{extensions:Ve,restore:function(){Object.keys(Ve).forEach(function(jr){if(Ve[jr]&&!Yr(jr))throw new Error("(regl): error restoring extension "+jr)})}}}function xn(Dt,Me){for(var Ve=Array(Dt),Yr=0;Yr<Dt;++Yr)Ve[Yr]=Me(Yr);return Ve}var _n=5120,tt=5121,ir=5122,jt=5123,Qt=5124,Et=5125,we=5126;function Ot(Dt){for(var Me=16;Me<=1<<28;Me*=16)if(Dt<=Me)return Me;return 0}function Kt(Dt){var Me,Ve;return Me=(Dt>65535)<<4,Dt>>>=Me,Ve=(Dt>255)<<3,Dt>>>=Ve,Me|=Ve,Ve=(Dt>15)<<2,Dt>>>=Ve,Me|=Ve,Ve=(Dt>3)<<1,Dt>>>=Ve,Me|=Ve,Me|Dt>>1}function dt(){var Dt=xn(8,function(){return[]});function Me(Xr){var jr=Ot(Xr),An=Dt[Kt(jr)>>2];return An.length>0?An.pop():new ArrayBuffer(jr)}function Ve(Xr){Dt[Kt(Xr.byteLength)>>2].push(Xr)}function Yr(Xr,jr){var An=null;switch(Xr){case _n:An=new Int8Array(Me(jr),0,jr);break;case tt:An=new Uint8Array(Me(jr),0,jr);break;case ir:An=new Int16Array(Me(2*jr),0,jr);break;case jt:An=new Uint16Array(Me(2*jr),0,jr);break;case Qt:An=new Int32Array(Me(4*jr),0,jr);break;case Et:An=new Uint32Array(Me(4*jr),0,jr);break;case we:An=new Float32Array(Me(4*jr),0,jr);break;default:return null}return An.length!==jr?An.subarray(0,jr):An}function vn(Xr){Ve(Xr.buffer)}return{alloc:Me,free:Ve,allocType:Yr,freeType:vn}}var Bt=dt();Bt.zero=dt();var $=3408,at=3410,R=3411,M=3412,A=3413,X=3414,mt=3415,Lt=33901,Pt=33902,Jt=3379,Ie=3386,pe=34921,je=36347,br=36348,Je=35661,zr=35660,gn=34930,tr=36349,xr=34076,Ur=34024,Nr=7936,fe=7937,Wt=7938,ge=35724,Ae=34047,Se=36063,Be=34852,vr=3553,Mr=34067,fn=34069,Xn=33984,Mn=6408,qn=5126,bn=5121,Vn=36160,ca=36053,xa=36064,Ea=16384,Ni=function(Dt,Me){var Ve=1;Me.ext_texture_filter_anisotropic&&(Ve=Dt.getParameter(Ae));var Yr=1,vn=1;Me.webgl_draw_buffers&&(Yr=Dt.getParameter(Be),vn=Dt.getParameter(Se));var Xr=!!Me.oes_texture_float;if(Xr){var jr=Dt.createTexture();Dt.bindTexture(vr,jr),Dt.texImage2D(vr,0,Mn,1,1,0,Mn,qn,null);var An=Dt.createFramebuffer();if(Dt.bindFramebuffer(Vn,An),Dt.framebufferTexture2D(Vn,xa,vr,jr,0),Dt.bindTexture(vr,null),Dt.checkFramebufferStatus(Vn)!==ca)Xr=!1;else{Dt.viewport(0,0,1,1),Dt.clearColor(1,0,0,1),Dt.clear(Ea);var On=Bt.allocType(qn,4);Dt.readPixels(0,0,1,1,Mn,qn,On),Dt.getError()?Xr=!1:(Dt.deleteFramebuffer(An),Dt.deleteTexture(jr),Xr=On[0]===1),Bt.freeType(On)}}var Pn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),En=!0;if(!Pn){var zn=Dt.createTexture(),v=Bt.allocType(bn,36);Dt.activeTexture(Xn),Dt.bindTexture(Mr,zn),Dt.texImage2D(fn,0,Mn,3,3,0,Mn,bn,v),Bt.freeType(v),Dt.bindTexture(Mr,null),Dt.deleteTexture(zn),En=!Dt.getError()}return{colorBits:[Dt.getParameter(at),Dt.getParameter(R),Dt.getParameter(M),Dt.getParameter(A)],depthBits:Dt.getParameter(X),stencilBits:Dt.getParameter(mt),subpixelBits:Dt.getParameter($),extensions:Object.keys(Me).filter(function(N){return!!Me[N]}),maxAnisotropic:Ve,maxDrawbuffers:Yr,maxColorAttachments:vn,pointSizeDims:Dt.getParameter(Lt),lineWidthDims:Dt.getParameter(Pt),maxViewportDims:Dt.getParameter(Ie),maxCombinedTextureUnits:Dt.getParameter(Je),maxCubeMapSize:Dt.getParameter(xr),maxRenderbufferSize:Dt.getParameter(Ur),maxTextureUnits:Dt.getParameter(gn),maxTextureSize:Dt.getParameter(Jt),maxAttributes:Dt.getParameter(pe),maxVertexUniforms:Dt.getParameter(je),maxVertexTextureUnits:Dt.getParameter(zr),maxVaryingVectors:Dt.getParameter(br),maxFragmentUniforms:Dt.getParameter(tr),glsl:Dt.getParameter(ge),renderer:Dt.getParameter(fe),vendor:Dt.getParameter(Nr),version:Dt.getParameter(Wt),readFloat:Xr,npotTextureCube:En}};function ti(Dt){return!!Dt&&typeof Dt=="object"&&Array.isArray(Dt.shape)&&Array.isArray(Dt.stride)&&typeof Dt.offset=="number"&&Dt.shape.length===Dt.stride.length&&(Array.isArray(Dt.data)||z(Dt.data))}var ei=function(Dt){return Object.keys(Dt).map(function(Me){return Dt[Me]})},Mi={shape:Ao,flatten:fo};function Gi(Dt,Me,Ve){for(var Yr=0;Yr<Me;++Yr)Ve[Yr]=Dt[Yr]}function To(Dt,Me,Ve,Yr){for(var vn=0,Xr=0;Xr<Me;++Xr)for(var jr=Dt[Xr],An=0;An<Ve;++An)Yr[vn++]=jr[An]}function ro(Dt,Me,Ve,Yr,vn,Xr){for(var jr=Xr,An=0;An<Me;++An)for(var On=Dt[An],Pn=0;Pn<Ve;++Pn)for(var En=On[Pn],zn=0;zn<Yr;++zn)vn[jr++]=En[zn]}function ga(Dt,Me,Ve,Yr,vn){for(var Xr=1,jr=Ve+1;jr<Me.length;++jr)Xr*=Me[jr];var An=Me[Ve];if(Me.length-Ve===4){var On=Me[Ve+1],Pn=Me[Ve+2],En=Me[Ve+3];for(jr=0;jr<An;++jr)ro(Dt[jr],On,Pn,En,Yr,vn),vn+=Xr}else for(jr=0;jr<An;++jr)ga(Dt[jr],Me,Ve+1,Yr,vn),vn+=Xr}function fo(Dt,Me,Ve,Yr){var vn=1;if(Me.length)for(var Xr=0;Xr<Me.length;++Xr)vn*=Me[Xr];else vn=0;var jr=Yr||Bt.allocType(Ve,vn);switch(Me.length){case 0:break;case 1:Gi(Dt,Me[0],jr);break;case 2:To(Dt,Me[0],Me[1],jr);break;case 3:ro(Dt,Me[0],Me[1],Me[2],jr,0);break;default:ga(Dt,Me,0,jr,0)}return jr}function Ao(Dt){for(var Me=[],Ve=Dt;Ve.length;Ve=Ve[0])Me.push(Ve.length);return Me}var ni={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ri=5120,co=5122,Po=5124,no=5121,ao=5123,Jo=5125,lo=5126,_i=5126,io={int8:Ri,int16:co,int32:Po,uint8:no,uint16:ao,uint32:Jo,float:lo,float32:_i},$o=35048,Gt=35040,le={dynamic:$o,stream:Gt,static:35044},Ge=Mi.flatten,pr=Mi.shape,Fr=35044,Gr=35040,Or=5121,cn=5126,mn=[];mn[5120]=1,mn[5122]=2,mn[5124]=4,mn[5121]=1,mn[5123]=2,mn[5125]=4,mn[5126]=4;function Bn(Dt){return ni[Object.prototype.toString.call(Dt)]|0}function sa(Dt,Me){for(var Ve=0;Ve<Me.length;++Ve)Dt[Ve]=Me[Ve]}function Zn(Dt,Me,Ve,Yr,vn,Xr,jr){for(var An=0,On=0;On<Ve;++On)for(var Pn=0;Pn<Yr;++Pn)Dt[An++]=Me[vn*On+Xr*Pn+jr]}function va(Dt,Me,Ve,Yr){var vn=0,Xr={};function jr(it){this.id=vn++,this.buffer=Dt.createBuffer(),this.type=it,this.usage=Fr,this.byteLength=0,this.dimension=1,this.dtype=Or,this.persistentData=null,Ve.profile&&(this.stats={size:0})}jr.prototype.bind=function(){Dt.bindBuffer(this.type,this.buffer)},jr.prototype.destroy=function(){v(this)};var An=[];function On(it,vt){var xt=An.pop();return xt||(xt=new jr(it)),xt.bind(),zn(xt,vt,Gr,0,1,!1),xt}function Pn(it){An.push(it)}function En(it,vt,xt){it.byteLength=vt.byteLength,Dt.bufferData(it.type,vt,xt)}function zn(it,vt,xt,At,Nt,Zt){var ie;if(it.usage=xt,Array.isArray(vt)){if(it.dtype=At||cn,vt.length>0){var _e;if(Array.isArray(vt[0])){ie=pr(vt);for(var Ee=1,Xe=1;Xe<ie.length;++Xe)Ee*=ie[Xe];it.dimension=Ee,_e=Ge(vt,ie,it.dtype),En(it,_e,xt),Zt?it.persistentData=_e:Bt.freeType(_e)}else if(typeof vt[0]=="number"){it.dimension=Nt;var yr=Bt.allocType(it.dtype,vt.length);sa(yr,vt),En(it,yr,xt),Zt?it.persistentData=yr:Bt.freeType(yr)}else z(vt[0])?(it.dimension=vt[0].length,it.dtype=At||Bn(vt[0])||cn,_e=Ge(vt,[vt.length,vt[0].length],it.dtype),En(it,_e,xt),Zt?it.persistentData=_e:Bt.freeType(_e)):ht.raise("invalid buffer data")}}else if(z(vt))it.dtype=At||Bn(vt),it.dimension=Nt,En(it,vt,xt),Zt&&(it.persistentData=new Uint8Array(new Uint8Array(vt.buffer)));else if(ti(vt)){ie=vt.shape;var tn=vt.stride,_r=vt.offset,Ar=0,Tr=0,Dn=0,jn=0;ie.length===1?(Ar=ie[0],Tr=1,Dn=tn[0],jn=0):ie.length===2?(Ar=ie[0],Tr=ie[1],Dn=tn[0],jn=tn[1]):ht.raise("invalid shape"),it.dtype=At||Bn(vt.data)||cn,it.dimension=Tr;var Fn=Bt.allocType(it.dtype,Ar*Tr);Zn(Fn,vt.data,Ar,Tr,Dn,jn,_r),En(it,Fn,xt),Zt?it.persistentData=Fn:Bt.freeType(Fn)}else vt instanceof ArrayBuffer?(it.dtype=Or,it.dimension=Nt,En(it,vt,xt),Zt&&(it.persistentData=new Uint8Array(new Uint8Array(vt)))):ht.raise("invalid buffer data")}function v(it){Me.bufferCount--,Yr(it);var vt=it.buffer;ht(vt,"buffer must not be deleted already"),Dt.deleteBuffer(vt),it.buffer=null,delete Xr[it.id]}function N(it,vt,xt,At){Me.bufferCount++;var Nt=new jr(vt);Xr[Nt.id]=Nt;function Zt(Ee){var Xe=Fr,yr=null,tn=0,_r=0,Ar=1;return Array.isArray(Ee)||z(Ee)||ti(Ee)||Ee instanceof ArrayBuffer?yr=Ee:typeof Ee=="number"?tn=Ee|0:Ee&&(ht.type(Ee,"object","buffer arguments must be an object, a number or an array"),"data"in Ee&&(ht(yr===null||Array.isArray(yr)||z(yr)||ti(yr),"invalid data for buffer"),yr=Ee.data),"usage"in Ee&&(ht.parameter(Ee.usage,le,"invalid buffer usage"),Xe=le[Ee.usage]),"type"in Ee&&(ht.parameter(Ee.type,io,"invalid buffer type"),_r=io[Ee.type]),"dimension"in Ee&&(ht.type(Ee.dimension,"number","invalid dimension"),Ar=Ee.dimension|0),"length"in Ee&&(ht.nni(tn,"buffer length must be a nonnegative integer"),tn=Ee.length|0)),Nt.bind(),yr?zn(Nt,yr,Xe,_r,Ar,At):(tn&&Dt.bufferData(Nt.type,tn,Xe),Nt.dtype=_r||Or,Nt.usage=Xe,Nt.dimension=Ar,Nt.byteLength=tn),Ve.profile&&(Nt.stats.size=Nt.byteLength*mn[Nt.dtype]),Zt}function ie(Ee,Xe){ht(Xe+Ee.byteLength<=Nt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ee.byteLength+" starting from offset "+Xe+" to a buffer of size "+Nt.byteLength),Dt.bufferSubData(Nt.type,Xe,Ee)}function _e(Ee,Xe){var yr=(Xe||0)|0,tn;if(Nt.bind(),z(Ee)||Ee instanceof ArrayBuffer)ie(Ee,yr);else if(Array.isArray(Ee)){if(Ee.length>0)if(typeof Ee[0]=="number"){var _r=Bt.allocType(Nt.dtype,Ee.length);sa(_r,Ee),ie(_r,yr),Bt.freeType(_r)}else if(Array.isArray(Ee[0])||z(Ee[0])){tn=pr(Ee);var Ar=Ge(Ee,tn,Nt.dtype);ie(Ar,yr),Bt.freeType(Ar)}else ht.raise("invalid buffer data")}else if(ti(Ee)){tn=Ee.shape;var Tr=Ee.stride,Dn=0,jn=0,Fn=0,la=0;tn.length===1?(Dn=tn[0],jn=1,Fn=Tr[0],la=0):tn.length===2?(Dn=tn[0],jn=tn[1],Fn=Tr[0],la=Tr[1]):ht.raise("invalid shape");var ua=Array.isArray(Ee.data)?Nt.dtype:Bn(Ee.data),ba=Bt.allocType(ua,Dn*jn);Zn(ba,Ee.data,Dn,jn,Fn,la,Ee.offset),ie(ba,yr),Bt.freeType(ba)}else ht.raise("invalid data for buffer subdata");return Zt}return xt||Zt(it),Zt._reglType="buffer",Zt._buffer=Nt,Zt.subdata=_e,Ve.profile&&(Zt.stats=Nt.stats),Zt.destroy=function(){v(Nt)},Zt}function V(){ei(Xr).forEach(function(it){it.buffer=Dt.createBuffer(),Dt.bindBuffer(it.type,it.buffer),Dt.bufferData(it.type,it.persistentData||it.byteLength,it.usage)})}return Ve.profile&&(Me.getTotalBufferSize=function(){var it=0;return Object.keys(Xr).forEach(function(vt){it+=Xr[vt].stats.size}),it}),{create:N,createStream:On,destroyStream:Pn,clear:function(){ei(Xr).forEach(v),An.forEach(v)},getBuffer:function(it){return it&&it._buffer instanceof jr?it._buffer:null},restore:V,_initBuffer:zn}}var ya=0,vi=0,Ma=1,oa=1,oi=4,$a=4,za={points:ya,point:vi,lines:Ma,line:oa,triangles:oi,triangle:$a,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ui=0,di=1,La=4,ja=5120,Ga=5121,bi=5122,xi=5123,ki=5124,ho=5125,Wi=34963,Io=35040,Xo=35044;function is(Dt,Me,Ve,Yr){var vn={},Xr=0,jr={uint8:Ga,uint16:xi};Me.oes_element_index_uint&&(jr.uint32=ho);function An(V){this.id=Xr++,vn[this.id]=this,this.buffer=V,this.primType=La,this.vertCount=0,this.type=0}An.prototype.bind=function(){this.buffer.bind()};var On=[];function Pn(V){var it=On.pop();return it||(it=new An(Ve.create(null,Wi,!0,!1)._buffer)),zn(it,V,Io,-1,-1,0,0),it}function En(V){On.push(V)}function zn(V,it,vt,xt,At,Nt,Zt){V.buffer.bind();var ie;if(it){var _e=Zt;!Zt&&(!z(it)||ti(it)&&!z(it.data))&&(_e=Me.oes_element_index_uint?ho:xi),Ve._initBuffer(V.buffer,it,vt,_e,3)}else Dt.bufferData(Wi,Nt,vt),V.buffer.dtype=ie||Ga,V.buffer.usage=vt,V.buffer.dimension=3,V.buffer.byteLength=Nt;if(ie=Zt,!Zt){switch(V.buffer.dtype){case Ga:case ja:ie=Ga;break;case xi:case bi:ie=xi;break;case ho:case ki:ie=ho;break;default:ht.raise("unsupported type for element array")}V.buffer.dtype=ie}V.type=ie,ht(ie!==ho||!!Me.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ee=At;Ee<0&&(Ee=V.buffer.byteLength,ie===xi?Ee>>=1:ie===ho&&(Ee>>=2)),V.vertCount=Ee;var Xe=xt;if(xt<0){Xe=La;var yr=V.buffer.dimension;yr===1&&(Xe=Ui),yr===2&&(Xe=di),yr===3&&(Xe=La)}V.primType=Xe}function v(V){Yr.elementsCount--,ht(V.buffer!==null,"must not double destroy elements"),delete vn[V.id],V.buffer.destroy(),V.buffer=null}function N(V,it){var vt=Ve.create(null,Wi,!0),xt=new An(vt._buffer);Yr.elementsCount++;function At(Nt){if(!Nt)vt(),xt.primType=La,xt.vertCount=0,xt.type=Ga;else if(typeof Nt=="number")vt(Nt),xt.primType=La,xt.vertCount=Nt|0,xt.type=Ga;else{var Zt=null,ie=Xo,_e=-1,Ee=-1,Xe=0,yr=0;Array.isArray(Nt)||z(Nt)||ti(Nt)?Zt=Nt:(ht.type(Nt,"object","invalid arguments for elements"),"data"in Nt&&(Zt=Nt.data,ht(Array.isArray(Zt)||z(Zt)||ti(Zt),"invalid data for element buffer")),"usage"in Nt&&(ht.parameter(Nt.usage,le,"invalid element buffer usage"),ie=le[Nt.usage]),"primitive"in Nt&&(ht.parameter(Nt.primitive,za,"invalid element buffer primitive"),_e=za[Nt.primitive]),"count"in Nt&&(ht(typeof Nt.count=="number"&&Nt.count>=0,"invalid vertex count for elements"),Ee=Nt.count|0),"type"in Nt&&(ht.parameter(Nt.type,jr,"invalid buffer type"),yr=jr[Nt.type]),"length"in Nt?Xe=Nt.length|0:(Xe=Ee,yr===xi||yr===bi?Xe*=2:(yr===ho||yr===ki)&&(Xe*=4))),zn(xt,Zt,ie,_e,Ee,Xe,yr)}return At}return At(V),At._reglType="elements",At._elements=xt,At.subdata=function(Nt,Zt){return vt.subdata(Nt,Zt),At},At.destroy=function(){v(xt)},At}return{create:N,createStream:Pn,destroyStream:En,getElements:function(V){return typeof V=="function"&&V._elements instanceof An?V._elements:null},clear:function(){ei(vn).forEach(v)}}}var $i=new Float32Array(1),qa=new Uint32Array($i.buffer),Yi=5123;function oo(Dt){for(var Me=Bt.allocType(Yi,Dt.length),Ve=0;Ve<Dt.length;++Ve)if(isNaN(Dt[Ve]))Me[Ve]=65535;else if(Dt[Ve]===1/0)Me[Ve]=31744;else if(Dt[Ve]===-1/0)Me[Ve]=64512;else{$i[0]=Dt[Ve];var Yr=qa[0],vn=Yr>>>31<<15,Xr=(Yr<<1>>>24)-127,jr=Yr>>13&1024-1;if(Xr<-24)Me[Ve]=vn;else if(Xr<-14){var An=-14-Xr;Me[Ve]=vn+(jr+1024>>An)}else Xr>15?Me[Ve]=vn+31744:Me[Ve]=vn+(Xr+15<<10)+jr}return Me}function Qa(Dt){return Array.isArray(Dt)||z(Dt)}var Li=function(Dt){return!(Dt&Dt-1)&&!!Dt},zo=34467,qi=3553,ts=34067,Xi=34069,xo=6408,gs=6406,fs=6407,so=6409,ss=6410,cs=32854,_s=32855,jo=36194,$t=32819,ye=32820,hr=33635,Er=34042,nn=6402,kn=34041,Qn=35904,wa=35906,Ai=36193,Oo=33776,Go=33777,Rs=33778,Cs=33779,ji=35986,bo=35987,ks=34798,ls=35840,qs=35841,Qs=35842,Js=35843,Ws=36196,Ds=5121,Bs=5123,ms=5125,es=5126,Tu=10242,Au=10243,Uo=10497,Eo=33071,os=33648,d=10240,G=10241,wt=9728,kt=9729,qt=9984,he=9985,me=9986,Oe=9987,Fe=33170,Ke=4352,gr=4353,Kr=4354,Jr=34046,Qr=3317,Ln=37440,Nn=37441,sn=37443,ra=37444,Ha=33984,Va=[qt,me,he,Oe],ka=[0,so,ss,fs,xo],_a={};_a[so]=_a[gs]=_a[nn]=1,_a[kn]=_a[ss]=2,_a[fs]=_a[Qn]=3,_a[xo]=_a[wa]=4;function Pa(Dt){return"[object "+Dt+"]"}var Do=Pa("HTMLCanvasElement"),wo=Pa("OffscreenCanvas"),vo=Pa("CanvasRenderingContext2D"),So=Pa("ImageBitmap"),Mo=Pa("HTMLImageElement"),No=Pa("HTMLVideoElement"),Ro=Object.keys(ni).concat([Do,wo,vo,So,Mo,No]),hi=[];hi[Ds]=1,hi[es]=4,hi[Ai]=2,hi[Bs]=2,hi[ms]=4;var Bi=[];Bi[cs]=2,Bi[_s]=2,Bi[jo]=2,Bi[kn]=4,Bi[Oo]=.5,Bi[Go]=.5,Bi[Rs]=1,Bi[Cs]=1,Bi[ji]=.5,Bi[bo]=1,Bi[ks]=1,Bi[ls]=.5,Bi[qs]=.25,Bi[Qs]=.5,Bi[Js]=.25,Bi[Ws]=.5;function Ys(Dt){return Array.isArray(Dt)&&(Dt.length===0||typeof Dt[0]=="number")}function Xs(Dt){if(!Array.isArray(Dt))return!1;var Me=Dt.length;return!(Me===0||!Qa(Dt[0]))}function ds(Dt){return Object.prototype.toString.call(Dt)}function Iu(Dt){return ds(Dt)===Do}function kf(Dt){return ds(Dt)===wo}function cc(Dt){return ds(Dt)===vo}function lc(Dt){return ds(Dt)===So}function dc(Dt){return ds(Dt)===Mo}function Bf(Dt){return ds(Dt)===No}function Ff(Dt){if(!Dt)return!1;var Me=ds(Dt);return Ro.indexOf(Me)>=0?!0:Ys(Dt)||Xs(Dt)||ti(Dt)}function hc(Dt){return ni[Object.prototype.toString.call(Dt)]|0}function hu(Dt,Me){var Ve=Me.length;switch(Dt.type){case Ds:case Bs:case ms:case es:var Yr=Bt.allocType(Dt.type,Ve);Yr.set(Me),Dt.data=Yr;break;case Ai:Dt.data=oo(Me);break;default:ht.raise("unsupported texture type, must specify a typed array")}}function uf(Dt,Me){return Bt.allocType(Dt.type===Ai?es:Dt.type,Me)}function vc(Dt,Me){Dt.type===Ai?(Dt.data=oo(Me),Bt.freeType(Me)):Dt.data=Me}function $c(Dt,Me,Ve,Yr,vn,Xr){for(var jr=Dt.width,An=Dt.height,On=Dt.channels,Pn=jr*An*On,En=uf(Dt,Pn),zn=0,v=0;v<An;++v)for(var N=0;N<jr;++N)for(var V=0;V<On;++V)En[zn++]=Me[Ve*N+Yr*v+vn*V+Xr];vc(Dt,En)}function vu(Dt,Me,Ve,Yr,vn,Xr){var jr;if(typeof Bi[Dt]!="undefined"?jr=Bi[Dt]:jr=_a[Dt]*hi[Me],Xr&&(jr*=6),vn){for(var An=0,On=Ve;On>=1;)An+=jr*On*On,On/=2;return An}else return jr*Ve*Yr}function pc(Dt,Me,Ve,Yr,vn,Xr,jr){var An={"don't care":Ke,"dont care":Ke,nice:Kr,fast:gr},On={repeat:Uo,clamp:Eo,mirror:os},Pn={nearest:wt,linear:kt},En=C({mipmap:Oe,"nearest mipmap nearest":qt,"linear mipmap nearest":he,"nearest mipmap linear":me,"linear mipmap linear":Oe},Pn),zn={none:0,browser:ra},v={uint8:Ds,rgba4:$t,rgb565:hr,"rgb5 a1":ye},N={alpha:gs,luminance:so,"luminance alpha":ss,rgb:fs,rgba:xo,rgba4:cs,"rgb5 a1":_s,rgb565:jo},V={};Me.ext_srgb&&(N.srgb=Qn,N.srgba=wa),Me.oes_texture_float&&(v.float32=v.float=es),Me.oes_texture_half_float&&(v.float16=v["half float"]=Ai),Me.webgl_depth_texture&&(C(N,{depth:nn,"depth stencil":kn}),C(v,{uint16:Bs,uint32:ms,"depth stencil":Er})),Me.webgl_compressed_texture_s3tc&&C(V,{"rgb s3tc dxt1":Oo,"rgba s3tc dxt1":Go,"rgba s3tc dxt3":Rs,"rgba s3tc dxt5":Cs}),Me.webgl_compressed_texture_atc&&C(V,{"rgb atc":ji,"rgba atc explicit alpha":bo,"rgba atc interpolated alpha":ks}),Me.webgl_compressed_texture_pvrtc&&C(V,{"rgb pvrtc 4bppv1":ls,"rgb pvrtc 2bppv1":qs,"rgba pvrtc 4bppv1":Qs,"rgba pvrtc 2bppv1":Js}),Me.webgl_compressed_texture_etc1&&(V["rgb etc1"]=Ws);var it=Array.prototype.slice.call(Dt.getParameter(zo));Object.keys(V).forEach(function(Ye){var $r=V[Ye];it.indexOf($r)>=0&&(N[Ye]=$r)});var vt=Object.keys(N);Ve.textureFormats=vt;var xt=[];Object.keys(N).forEach(function(Ye){var $r=N[Ye];xt[$r]=Ye});var At=[];Object.keys(v).forEach(function(Ye){var $r=v[Ye];At[$r]=Ye});var Nt=[];Object.keys(Pn).forEach(function(Ye){var $r=Pn[Ye];Nt[$r]=Ye});var Zt=[];Object.keys(En).forEach(function(Ye){var $r=En[Ye];Zt[$r]=Ye});var ie=[];Object.keys(On).forEach(function(Ye){var $r=On[Ye];ie[$r]=Ye});var _e=vt.reduce(function(Ye,$r){var Wr=N[$r];return Wr===so||Wr===gs||Wr===so||Wr===ss||Wr===nn||Wr===kn||Me.ext_srgb&&(Wr===Qn||Wr===wa)?Ye[Wr]=Wr:Wr===_s||$r.indexOf("rgba")>=0?Ye[Wr]=xo:Ye[Wr]=fs,Ye},{});function Ee(){this.internalformat=xo,this.format=xo,this.type=Ds,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ra,this.width=0,this.height=0,this.channels=0}function Xe(Ye,$r){Ye.internalformat=$r.internalformat,Ye.format=$r.format,Ye.type=$r.type,Ye.compressed=$r.compressed,Ye.premultiplyAlpha=$r.premultiplyAlpha,Ye.flipY=$r.flipY,Ye.unpackAlignment=$r.unpackAlignment,Ye.colorSpace=$r.colorSpace,Ye.width=$r.width,Ye.height=$r.height,Ye.channels=$r.channels}function yr(Ye,$r){if(!(typeof $r!="object"||!$r)){if("premultiplyAlpha"in $r&&(ht.type($r.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Ye.premultiplyAlpha=$r.premultiplyAlpha),"flipY"in $r&&(ht.type($r.flipY,"boolean","invalid texture flip"),Ye.flipY=$r.flipY),"alignment"in $r&&(ht.oneOf($r.alignment,[1,2,4,8],"invalid texture unpack alignment"),Ye.unpackAlignment=$r.alignment),"colorSpace"in $r&&(ht.parameter($r.colorSpace,zn,"invalid colorSpace"),Ye.colorSpace=zn[$r.colorSpace]),"type"in $r){var Wr=$r.type;ht(Me.oes_texture_float||!(Wr==="float"||Wr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ht(Me.oes_texture_half_float||!(Wr==="half float"||Wr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ht(Me.webgl_depth_texture||!(Wr==="uint16"||Wr==="uint32"||Wr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ht.parameter(Wr,v,"invalid texture type"),Ye.type=v[Wr]}var na=Ye.width,ii=Ye.height,ze=Ye.channels,be=!1;"shape"in $r?(ht(Array.isArray($r.shape)&&$r.shape.length>=2,"shape must be an array"),na=$r.shape[0],ii=$r.shape[1],$r.shape.length===3&&(ze=$r.shape[2],ht(ze>0&&ze<=4,"invalid number of channels"),be=!0),ht(na>=0&&na<=Ve.maxTextureSize,"invalid width"),ht(ii>=0&&ii<=Ve.maxTextureSize,"invalid height")):("radius"in $r&&(na=ii=$r.radius,ht(na>=0&&na<=Ve.maxTextureSize,"invalid radius")),"width"in $r&&(na=$r.width,ht(na>=0&&na<=Ve.maxTextureSize,"invalid width")),"height"in $r&&(ii=$r.height,ht(ii>=0&&ii<=Ve.maxTextureSize,"invalid height")),"channels"in $r&&(ze=$r.channels,ht(ze>0&&ze<=4,"invalid number of channels"),be=!0)),Ye.width=na|0,Ye.height=ii|0,Ye.channels=ze|0;var or=!1;if("format"in $r){var Dr=$r.format;ht(Me.webgl_depth_texture||!(Dr==="depth"||Dr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ht.parameter(Dr,N,"invalid texture format");var Lr=Ye.internalformat=N[Dr];Ye.format=_e[Lr],Dr in v&&("type"in $r||(Ye.type=v[Dr])),Dr in V&&(Ye.compressed=!0),or=!0}!be&&or?Ye.channels=_a[Ye.format]:be&&!or?Ye.channels!==ka[Ye.format]&&(Ye.format=Ye.internalformat=ka[Ye.channels]):or&&be&&ht(Ye.channels===_a[Ye.format],"number of channels inconsistent with specified format")}}function tn(Ye){Dt.pixelStorei(Ln,Ye.flipY),Dt.pixelStorei(Nn,Ye.premultiplyAlpha),Dt.pixelStorei(sn,Ye.colorSpace),Dt.pixelStorei(Qr,Ye.unpackAlignment)}function _r(){Ee.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ar(Ye,$r){var Wr=null;if(Ff($r)?Wr=$r:$r&&(ht.type($r,"object","invalid pixel data type"),yr(Ye,$r),"x"in $r&&(Ye.xOffset=$r.x|0),"y"in $r&&(Ye.yOffset=$r.y|0),Ff($r.data)&&(Wr=$r.data)),ht(!Ye.compressed||Wr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),$r.copy){ht(!Wr,"can not specify copy and data field for the same texture");var na=vn.viewportWidth,ii=vn.viewportHeight;Ye.width=Ye.width||na-Ye.xOffset,Ye.height=Ye.height||ii-Ye.yOffset,Ye.needsCopy=!0,ht(Ye.xOffset>=0&&Ye.xOffset<na&&Ye.yOffset>=0&&Ye.yOffset<ii&&Ye.width>0&&Ye.width<=na&&Ye.height>0&&Ye.height<=ii,"copy texture read out of bounds")}else if(!Wr)Ye.width=Ye.width||1,Ye.height=Ye.height||1,Ye.channels=Ye.channels||4;else if(z(Wr))Ye.channels=Ye.channels||4,Ye.data=Wr,!("type"in $r)&&Ye.type===Ds&&(Ye.type=hc(Wr));else if(Ys(Wr))Ye.channels=Ye.channels||4,hu(Ye,Wr),Ye.alignment=1,Ye.needsFree=!0;else if(ti(Wr)){var ze=Wr.data;!Array.isArray(ze)&&Ye.type===Ds&&(Ye.type=hc(ze));var be=Wr.shape,or=Wr.stride,Dr,Lr,lr,sr,Sr,ke;be.length===3?(lr=be[2],ke=or[2]):(ht(be.length===2,"invalid ndarray pixel data, must be 2 or 3D"),lr=1,ke=1),Dr=be[0],Lr=be[1],sr=or[0],Sr=or[1],Ye.alignment=1,Ye.width=Dr,Ye.height=Lr,Ye.channels=lr,Ye.format=Ye.internalformat=ka[lr],Ye.needsFree=!0,$c(Ye,ze,sr,Sr,ke,Wr.offset)}else if(Iu(Wr)||kf(Wr)||cc(Wr))Iu(Wr)||kf(Wr)?Ye.element=Wr:Ye.element=Wr.canvas,Ye.width=Ye.element.width,Ye.height=Ye.element.height,Ye.channels=4;else if(lc(Wr))Ye.element=Wr,Ye.width=Wr.width,Ye.height=Wr.height,Ye.channels=4;else if(dc(Wr))Ye.element=Wr,Ye.width=Wr.naturalWidth,Ye.height=Wr.naturalHeight,Ye.channels=4;else if(Bf(Wr))Ye.element=Wr,Ye.width=Wr.videoWidth,Ye.height=Wr.videoHeight,Ye.channels=4;else if(Xs(Wr)){var er=Ye.width||Wr[0].length,De=Ye.height||Wr.length,Cr=Ye.channels;Qa(Wr[0][0])?Cr=Cr||Wr[0][0].length:Cr=Cr||1;for(var Rr=Mi.shape(Wr),ln=1,pn=0;pn<Rr.length;++pn)ln*=Rr[pn];var rn=uf(Ye,ln);Mi.flatten(Wr,Rr,"",rn),vc(Ye,rn),Ye.alignment=1,Ye.width=er,Ye.height=De,Ye.channels=Cr,Ye.format=Ye.internalformat=ka[Cr],Ye.needsFree=!0}Ye.type===es?ht(Ve.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Ye.type===Ai&&ht(Ve.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Tr(Ye,$r,Wr){var na=Ye.element,ii=Ye.data,ze=Ye.internalformat,be=Ye.format,or=Ye.type,Dr=Ye.width,Lr=Ye.height;tn(Ye),na?Dt.texImage2D($r,Wr,be,be,or,na):Ye.compressed?Dt.compressedTexImage2D($r,Wr,ze,Dr,Lr,0,ii):Ye.needsCopy?(Yr(),Dt.copyTexImage2D($r,Wr,be,Ye.xOffset,Ye.yOffset,Dr,Lr,0)):Dt.texImage2D($r,Wr,be,Dr,Lr,0,be,or,ii||null)}function Dn(Ye,$r,Wr,na,ii){var ze=Ye.element,be=Ye.data,or=Ye.internalformat,Dr=Ye.format,Lr=Ye.type,lr=Ye.width,sr=Ye.height;tn(Ye),ze?Dt.texSubImage2D($r,ii,Wr,na,Dr,Lr,ze):Ye.compressed?Dt.compressedTexSubImage2D($r,ii,Wr,na,or,lr,sr,be):Ye.needsCopy?(Yr(),Dt.copyTexSubImage2D($r,ii,Wr,na,Ye.xOffset,Ye.yOffset,lr,sr)):Dt.texSubImage2D($r,ii,Wr,na,lr,sr,Dr,Lr,be)}var jn=[];function Fn(){return jn.pop()||new _r}function la(Ye){Ye.needsFree&&Bt.freeType(Ye.data),_r.call(Ye),jn.push(Ye)}function ua(){Ee.call(this),this.genMipmaps=!1,this.mipmapHint=Ke,this.mipmask=0,this.images=Array(16)}function ba(Ye,$r,Wr){var na=Ye.images[0]=Fn();Ye.mipmask=1,na.width=Ye.width=$r,na.height=Ye.height=Wr,na.channels=Ye.channels=4}function Ra(Ye,$r){var Wr=null;if(Ff($r))Wr=Ye.images[0]=Fn(),Xe(Wr,Ye),Ar(Wr,$r),Ye.mipmask=1;else if(yr(Ye,$r),Array.isArray($r.mipmap))for(var na=$r.mipmap,ii=0;ii<na.length;++ii)Wr=Ye.images[ii]=Fn(),Xe(Wr,Ye),Wr.width>>=ii,Wr.height>>=ii,Ar(Wr,na[ii]),Ye.mipmask|=1<<ii;else Wr=Ye.images[0]=Fn(),Xe(Wr,Ye),Ar(Wr,$r),Ye.mipmask=1;Xe(Ye,Ye.images[0]),Ye.compressed&&(Ye.internalformat===Oo||Ye.internalformat===Go||Ye.internalformat===Rs||Ye.internalformat===Cs)&&ht(Ye.width%4===0&&Ye.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Aa(Ye,$r){for(var Wr=Ye.images,na=0;na<Wr.length;++na){if(!Wr[na])return;Tr(Wr[na],$r,na)}}var eo=[];function Fa(){var Ye=eo.pop()||new ua;Ee.call(Ye),Ye.mipmask=0;for(var $r=0;$r<16;++$r)Ye.images[$r]=null;return Ye}function go(Ye){for(var $r=Ye.images,Wr=0;Wr<$r.length;++Wr)$r[Wr]&&la($r[Wr]),$r[Wr]=null;eo.push(Ye)}function Qi(){this.minFilter=wt,this.magFilter=wt,this.wrapS=Eo,this.wrapT=Eo,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ke}function fi(Ye,$r){if("min"in $r){var Wr=$r.min;ht.parameter(Wr,En),Ye.minFilter=En[Wr],Va.indexOf(Ye.minFilter)>=0&&!("faces"in $r)&&(Ye.genMipmaps=!0)}if("mag"in $r){var na=$r.mag;ht.parameter(na,Pn),Ye.magFilter=Pn[na]}var ii=Ye.wrapS,ze=Ye.wrapT;if("wrap"in $r){var be=$r.wrap;typeof be=="string"?(ht.parameter(be,On),ii=ze=On[be]):Array.isArray(be)&&(ht.parameter(be[0],On),ht.parameter(be[1],On),ii=On[be[0]],ze=On[be[1]])}else{if("wrapS"in $r){var or=$r.wrapS;ht.parameter(or,On),ii=On[or]}if("wrapT"in $r){var Dr=$r.wrapT;ht.parameter(Dr,On),ze=On[Dr]}}if(Ye.wrapS=ii,Ye.wrapT=ze,"anisotropic"in $r){var Lr=$r.anisotropic;ht(typeof Lr=="number"&&Lr>=1&&Lr<=Ve.maxAnisotropic,"aniso samples must be between 1 and "),Ye.anisotropic=$r.anisotropic}if("mipmap"in $r){var lr=!1;switch(typeof $r.mipmap){case"string":ht.parameter($r.mipmap,An,"invalid mipmap hint"),Ye.mipmapHint=An[$r.mipmap],Ye.genMipmaps=!0,lr=!0;break;case"boolean":lr=Ye.genMipmaps=$r.mipmap;break;case"object":ht(Array.isArray($r.mipmap),"invalid mipmap type"),Ye.genMipmaps=!1,lr=!0;break;default:ht.raise("invalid mipmap type")}lr&&!("min"in $r)&&(Ye.minFilter=qt)}}function mo(Ye,$r){Dt.texParameteri($r,G,Ye.minFilter),Dt.texParameteri($r,d,Ye.magFilter),Dt.texParameteri($r,Tu,Ye.wrapS),Dt.texParameteri($r,Au,Ye.wrapT),Me.ext_texture_filter_anisotropic&&Dt.texParameteri($r,Jr,Ye.anisotropic),Ye.genMipmaps&&(Dt.hint(Fe,Ye.mipmapHint),Dt.generateMipmap($r))}var Bo=0,ns={},us=Ve.maxTextureUnits,Ho=Array(us).map(function(){return null});function Za(Ye){Ee.call(this),this.mipmask=0,this.internalformat=xo,this.id=Bo++,this.refCount=1,this.target=Ye,this.texture=Dt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Qi,jr.profile&&(this.stats={size:0})}function bs(Ye){Dt.activeTexture(Ha),Dt.bindTexture(Ye.target,Ye.texture)}function Pi(){var Ye=Ho[0];Ye?Dt.bindTexture(Ye.target,Ye.texture):Dt.bindTexture(qi,null)}function Sa(Ye){var $r=Ye.texture;ht($r,"must not double destroy texture");var Wr=Ye.unit,na=Ye.target;Wr>=0&&(Dt.activeTexture(Ha+Wr),Dt.bindTexture(na,null),Ho[Wr]=null),Dt.deleteTexture($r),Ye.texture=null,Ye.params=null,Ye.pixels=null,Ye.refCount=0,delete ns[Ye.id],Xr.textureCount--}C(Za.prototype,{bind:function(){var Ye=this;Ye.bindCount+=1;var $r=Ye.unit;if($r<0){for(var Wr=0;Wr<us;++Wr){var na=Ho[Wr];if(na){if(na.bindCount>0)continue;na.unit=-1}Ho[Wr]=Ye,$r=Wr;break}$r>=us&&ht.raise("insufficient number of texture units"),jr.profile&&Xr.maxTextureUnits<$r+1&&(Xr.maxTextureUnits=$r+1),Ye.unit=$r,Dt.activeTexture(Ha+$r),Dt.bindTexture(Ye.target,Ye.texture)}return $r},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Sa(this)}});function ci(Ye,$r){var Wr=new Za(qi);ns[Wr.id]=Wr,Xr.textureCount++;function na(be,or){var Dr=Wr.texInfo;Qi.call(Dr);var Lr=Fa();return typeof be=="number"?typeof or=="number"?ba(Lr,be|0,or|0):ba(Lr,be|0,be|0):be?(ht.type(be,"object","invalid arguments to regl.texture"),fi(Dr,be),Ra(Lr,be)):ba(Lr,1,1),Dr.genMipmaps&&(Lr.mipmask=(Lr.width<<1)-1),Wr.mipmask=Lr.mipmask,Xe(Wr,Lr),ht.texture2D(Dr,Lr,Ve),Wr.internalformat=Lr.internalformat,na.width=Lr.width,na.height=Lr.height,bs(Wr),Aa(Lr,qi),mo(Dr,qi),Pi(),go(Lr),jr.profile&&(Wr.stats.size=vu(Wr.internalformat,Wr.type,Lr.width,Lr.height,Dr.genMipmaps,!1)),na.format=xt[Wr.internalformat],na.type=At[Wr.type],na.mag=Nt[Dr.magFilter],na.min=Zt[Dr.minFilter],na.wrapS=ie[Dr.wrapS],na.wrapT=ie[Dr.wrapT],na}function ii(be,or,Dr,Lr){ht(!!be,"must specify image data");var lr=or|0,sr=Dr|0,Sr=Lr|0,ke=Fn();return Xe(ke,Wr),ke.width=0,ke.height=0,Ar(ke,be),ke.width=ke.width||(Wr.width>>Sr)-lr,ke.height=ke.height||(Wr.height>>Sr)-sr,ht(Wr.type===ke.type&&Wr.format===ke.format&&Wr.internalformat===ke.internalformat,"incompatible format for texture.subimage"),ht(lr>=0&&sr>=0&&lr+ke.width<=Wr.width&&sr+ke.height<=Wr.height,"texture.subimage write out of bounds"),ht(Wr.mipmask&1<<Sr,"missing mipmap data"),ht(ke.data||ke.element||ke.needsCopy,"missing image data"),bs(Wr),Dn(ke,qi,lr,sr,Sr),Pi(),la(ke),na}function ze(be,or){var Dr=be|0,Lr=or|0||Dr;if(Dr===Wr.width&&Lr===Wr.height)return na;na.width=Wr.width=Dr,na.height=Wr.height=Lr,bs(Wr);for(var lr=0;Wr.mipmask>>lr;++lr){var sr=Dr>>lr,Sr=Lr>>lr;if(!sr||!Sr)break;Dt.texImage2D(qi,lr,Wr.format,sr,Sr,0,Wr.format,Wr.type,null)}return Pi(),jr.profile&&(Wr.stats.size=vu(Wr.internalformat,Wr.type,Dr,Lr,!1,!1)),na}return na(Ye,$r),na.subimage=ii,na.resize=ze,na._reglType="texture2d",na._texture=Wr,jr.profile&&(na.stats=Wr.stats),na.destroy=function(){Wr.decRef()},na}function wi(Ye,$r,Wr,na,ii,ze){var be=new Za(ts);ns[be.id]=be,Xr.cubeCount++;var or=new Array(6);function Dr(sr,Sr,ke,er,De,Cr){var Rr,ln=be.texInfo;for(Qi.call(ln),Rr=0;Rr<6;++Rr)or[Rr]=Fa();if(typeof sr=="number"||!sr){var pn=sr|0||1;for(Rr=0;Rr<6;++Rr)ba(or[Rr],pn,pn)}else if(typeof sr=="object")if(Sr)Ra(or[0],sr),Ra(or[1],Sr),Ra(or[2],ke),Ra(or[3],er),Ra(or[4],De),Ra(or[5],Cr);else if(fi(ln,sr),yr(be,sr),"faces"in sr){var rn=sr.faces;for(ht(Array.isArray(rn)&&rn.length===6,"cube faces must be a length 6 array"),Rr=0;Rr<6;++Rr)ht(typeof rn[Rr]=="object"&&!!rn[Rr],"invalid input for cube map face"),Xe(or[Rr],be),Ra(or[Rr],rn[Rr])}else for(Rr=0;Rr<6;++Rr)Ra(or[Rr],sr);else ht.raise("invalid arguments to cube map");for(Xe(be,or[0]),Ve.npotTextureCube||ht(Li(be.width)&&Li(be.height),"your browser does not support non power or two texture dimensions"),ln.genMipmaps?be.mipmask=(or[0].width<<1)-1:be.mipmask=or[0].mipmask,ht.textureCube(be,ln,or,Ve),be.internalformat=or[0].internalformat,Dr.width=or[0].width,Dr.height=or[0].height,bs(be),Rr=0;Rr<6;++Rr)Aa(or[Rr],Xi+Rr);for(mo(ln,ts),Pi(),jr.profile&&(be.stats.size=vu(be.internalformat,be.type,Dr.width,Dr.height,ln.genMipmaps,!0)),Dr.format=xt[be.internalformat],Dr.type=At[be.type],Dr.mag=Nt[ln.magFilter],Dr.min=Zt[ln.minFilter],Dr.wrapS=ie[ln.wrapS],Dr.wrapT=ie[ln.wrapT],Rr=0;Rr<6;++Rr)go(or[Rr]);return Dr}function Lr(sr,Sr,ke,er,De){ht(!!Sr,"must specify image data"),ht(typeof sr=="number"&&sr===(sr|0)&&sr>=0&&sr<6,"invalid face");var Cr=ke|0,Rr=er|0,ln=De|0,pn=Fn();return Xe(pn,be),pn.width=0,pn.height=0,Ar(pn,Sr),pn.width=pn.width||(be.width>>ln)-Cr,pn.height=pn.height||(be.height>>ln)-Rr,ht(be.type===pn.type&&be.format===pn.format&&be.internalformat===pn.internalformat,"incompatible format for texture.subimage"),ht(Cr>=0&&Rr>=0&&Cr+pn.width<=be.width&&Rr+pn.height<=be.height,"texture.subimage write out of bounds"),ht(be.mipmask&1<<ln,"missing mipmap data"),ht(pn.data||pn.element||pn.needsCopy,"missing image data"),bs(be),Dn(pn,Xi+sr,Cr,Rr,ln),Pi(),la(pn),Dr}function lr(sr){var Sr=sr|0;if(Sr!==be.width){Dr.width=be.width=Sr,Dr.height=be.height=Sr,bs(be);for(var ke=0;ke<6;++ke)for(var er=0;be.mipmask>>er;++er)Dt.texImage2D(Xi+ke,er,be.format,Sr>>er,Sr>>er,0,be.format,be.type,null);return Pi(),jr.profile&&(be.stats.size=vu(be.internalformat,be.type,Dr.width,Dr.height,!1,!0)),Dr}}return Dr(Ye,$r,Wr,na,ii,ze),Dr.subimage=Lr,Dr.resize=lr,Dr._reglType="textureCube",Dr._texture=be,jr.profile&&(Dr.stats=be.stats),Dr.destroy=function(){be.decRef()},Dr}function qo(){for(var Ye=0;Ye<us;++Ye)Dt.activeTexture(Ha+Ye),Dt.bindTexture(qi,null),Ho[Ye]=null;ei(ns).forEach(Sa),Xr.cubeCount=0,Xr.textureCount=0}jr.profile&&(Xr.getTotalTextureSize=function(){var Ye=0;return Object.keys(ns).forEach(function($r){Ye+=ns[$r].stats.size}),Ye});function Wu(){for(var Ye=0;Ye<us;++Ye){var $r=Ho[Ye];$r&&($r.bindCount=0,$r.unit=-1,Ho[Ye]=null)}ei(ns).forEach(function(Wr){Wr.texture=Dt.createTexture(),Dt.bindTexture(Wr.target,Wr.texture);for(var na=0;na<32;++na)if(Wr.mipmask&1<<na)if(Wr.target===qi)Dt.texImage2D(qi,na,Wr.internalformat,Wr.width>>na,Wr.height>>na,0,Wr.internalformat,Wr.type,null);else for(var ii=0;ii<6;++ii)Dt.texImage2D(Xi+ii,na,Wr.internalformat,Wr.width>>na,Wr.height>>na,0,Wr.internalformat,Wr.type,null);mo(Wr.texInfo,Wr.target)})}function tc(){for(var Ye=0;Ye<us;++Ye){var $r=Ho[Ye];$r&&($r.bindCount=0,$r.unit=-1,Ho[Ye]=null),Dt.activeTexture(Ha+Ye),Dt.bindTexture(qi,null),Dt.bindTexture(ts,null)}}return{create2D:ci,createCube:wi,clear:qo,getTexture:function(Ye){return null},restore:Wu,refresh:tc}}var ea=36161,Ou=32854,si=32855,ff=36194,$u=33189,uu=36168,zf=34041,Du=35907,gc=34836,cf=34842,mc=34843,Fs=[];Fs[Ou]=2,Fs[si]=2,Fs[ff]=2,Fs[$u]=2,Fs[uu]=1,Fs[zf]=4,Fs[Du]=4,Fs[gc]=16,Fs[cf]=8,Fs[mc]=6;function lt(Dt,Me,Ve){return Fs[Dt]*Me*Ve}var It=function(Dt,Me,Ve,Yr,vn){var Xr={rgba4:Ou,rgb565:ff,"rgb5 a1":si,depth:$u,stencil:uu,"depth stencil":zf};Me.ext_srgb&&(Xr.srgba=Du),Me.ext_color_buffer_half_float&&(Xr.rgba16f=cf,Xr.rgb16f=mc),Me.webgl_color_buffer_float&&(Xr.rgba32f=gc);var jr=[];Object.keys(Xr).forEach(function(N){var V=Xr[N];jr[V]=N});var An=0,On={};function Pn(N){this.id=An++,this.refCount=1,this.renderbuffer=N,this.format=Ou,this.width=0,this.height=0,vn.profile&&(this.stats={size:0})}Pn.prototype.decRef=function(){--this.refCount<=0&&En(this)};function En(N){var V=N.renderbuffer;ht(V,"must not double destroy renderbuffer"),Dt.bindRenderbuffer(ea,null),Dt.deleteRenderbuffer(V),N.renderbuffer=null,N.refCount=0,delete On[N.id],Yr.renderbufferCount--}function zn(N,V){var it=new Pn(Dt.createRenderbuffer());On[it.id]=it,Yr.renderbufferCount++;function vt(At,Nt){var Zt=0,ie=0,_e=Ou;if(typeof At=="object"&&At){var Ee=At;if("shape"in Ee){var Xe=Ee.shape;ht(Array.isArray(Xe)&&Xe.length>=2,"invalid renderbuffer shape"),Zt=Xe[0]|0,ie=Xe[1]|0}else"radius"in Ee&&(Zt=ie=Ee.radius|0),"width"in Ee&&(Zt=Ee.width|0),"height"in Ee&&(ie=Ee.height|0);"format"in Ee&&(ht.parameter(Ee.format,Xr,"invalid renderbuffer format"),_e=Xr[Ee.format])}else typeof At=="number"?(Zt=At|0,typeof Nt=="number"?ie=Nt|0:ie=Zt):At?ht.raise("invalid arguments to renderbuffer constructor"):Zt=ie=1;if(ht(Zt>0&&ie>0&&Zt<=Ve.maxRenderbufferSize&&ie<=Ve.maxRenderbufferSize,"invalid renderbuffer size"),!(Zt===it.width&&ie===it.height&&_e===it.format))return vt.width=it.width=Zt,vt.height=it.height=ie,it.format=_e,Dt.bindRenderbuffer(ea,it.renderbuffer),Dt.renderbufferStorage(ea,_e,Zt,ie),ht(Dt.getError()===0,"invalid render buffer format"),vn.profile&&(it.stats.size=lt(it.format,it.width,it.height)),vt.format=jr[it.format],vt}function xt(At,Nt){var Zt=At|0,ie=Nt|0||Zt;return Zt===it.width&&ie===it.height||(ht(Zt>0&&ie>0&&Zt<=Ve.maxRenderbufferSize&&ie<=Ve.maxRenderbufferSize,"invalid renderbuffer size"),vt.width=it.width=Zt,vt.height=it.height=ie,Dt.bindRenderbuffer(ea,it.renderbuffer),Dt.renderbufferStorage(ea,it.format,Zt,ie),ht(Dt.getError()===0,"invalid render buffer format"),vn.profile&&(it.stats.size=lt(it.format,it.width,it.height))),vt}return vt(N,V),vt.resize=xt,vt._reglType="renderbuffer",vt._renderbuffer=it,vn.profile&&(vt.stats=it.stats),vt.destroy=function(){it.decRef()},vt}vn.profile&&(Yr.getTotalRenderbufferSize=function(){var N=0;return Object.keys(On).forEach(function(V){N+=On[V].stats.size}),N});function v(){ei(On).forEach(function(N){N.renderbuffer=Dt.createRenderbuffer(),Dt.bindRenderbuffer(ea,N.renderbuffer),Dt.renderbufferStorage(ea,N.format,N.width,N.height)}),Dt.bindRenderbuffer(ea,null)}return{create:zn,clear:function(){ei(On).forEach(En)},restore:v}},Yt=36160,ce=36161,Te=3553,cr=34069,mr=36064,Hr=36096,wn=36128,Cn=33306,Hn=36053,aa=36054,Kn=36055,Oa=36057,Ja=36061,Na=36193,Ta=5121,Ba=5126,ha=6407,Ya=6408,Ua=6402,ma=[ha,Ya],ri=[];ri[Ya]=4,ri[ha]=3;var Ei=[];Ei[Ta]=1,Ei[Ba]=4,Ei[Na]=2;var Vi=32854,gi=32855,ui=36194,Hi=33189,ko=36168,po=34041,Ls=35907,Lu=34836,ys=34842,pu=34843,tu=[Vi,gi,ui,Ls,ys,pu,Lu],js={};js[Hn]="complete",js[aa]="incomplete attachment",js[Oa]="incomplete dimensions",js[Kn]="incomplete, missing attachment",js[Ja]="unsupported";function lf(Dt,Me,Ve,Yr,vn,Xr){var jr={cur:null,next:null,dirty:!1,setFBO:null},An=["rgba"],On=["rgba4","rgb565","rgb5 a1"];Me.ext_srgb&&On.push("srgba"),Me.ext_color_buffer_half_float&&On.push("rgba16f","rgb16f"),Me.webgl_color_buffer_float&&On.push("rgba32f");var Pn=["uint8"];Me.oes_texture_half_float&&Pn.push("half float","float16"),Me.oes_texture_float&&Pn.push("float","float32");function En(_r,Ar,Tr){this.target=_r,this.texture=Ar,this.renderbuffer=Tr;var Dn=0,jn=0;Ar?(Dn=Ar.width,jn=Ar.height):Tr&&(Dn=Tr.width,jn=Tr.height),this.width=Dn,this.height=jn}function zn(_r){_r&&(_r.texture&&_r.texture._texture.decRef(),_r.renderbuffer&&_r.renderbuffer._renderbuffer.decRef())}function v(_r,Ar,Tr){if(_r)if(_r.texture){var Dn=_r.texture._texture,jn=Math.max(1,Dn.width),Fn=Math.max(1,Dn.height);ht(jn===Ar&&Fn===Tr,"inconsistent width/height for supplied texture"),Dn.refCount+=1}else{var la=_r.renderbuffer._renderbuffer;ht(la.width===Ar&&la.height===Tr,"inconsistent width/height for renderbuffer"),la.refCount+=1}}function N(_r,Ar){Ar&&(Ar.texture?Dt.framebufferTexture2D(Yt,_r,Ar.target,Ar.texture._texture.texture,0):Dt.framebufferRenderbuffer(Yt,_r,ce,Ar.renderbuffer._renderbuffer.renderbuffer))}function V(_r){var Ar=Te,Tr=null,Dn=null,jn=_r;typeof _r=="object"&&(jn=_r.data,"target"in _r&&(Ar=_r.target|0)),ht.type(jn,"function","invalid attachment data");var Fn=jn._reglType;return Fn==="texture2d"?(Tr=jn,ht(Ar===Te)):Fn==="textureCube"?(Tr=jn,ht(Ar>=cr&&Ar<cr+6,"invalid cube map target")):Fn==="renderbuffer"?(Dn=jn,Ar=ce):ht.raise("invalid regl object for attachment"),new En(Ar,Tr,Dn)}function it(_r,Ar,Tr,Dn,jn){if(Tr){var Fn=Yr.create2D({width:_r,height:Ar,format:Dn,type:jn});return Fn._texture.refCount=0,new En(Te,Fn,null)}else{var la=vn.create({width:_r,height:Ar,format:Dn});return la._renderbuffer.refCount=0,new En(ce,null,la)}}function vt(_r){return _r&&(_r.texture||_r.renderbuffer)}function xt(_r,Ar,Tr){_r&&(_r.texture?_r.texture.resize(Ar,Tr):_r.renderbuffer&&_r.renderbuffer.resize(Ar,Tr),_r.width=Ar,_r.height=Tr)}var At=0,Nt={};function Zt(){this.id=At++,Nt[this.id]=this,this.framebuffer=Dt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ie(_r){_r.colorAttachments.forEach(zn),zn(_r.depthAttachment),zn(_r.stencilAttachment),zn(_r.depthStencilAttachment)}function _e(_r){var Ar=_r.framebuffer;ht(Ar,"must not double destroy framebuffer"),Dt.deleteFramebuffer(Ar),_r.framebuffer=null,Xr.framebufferCount--,delete Nt[_r.id]}function Ee(_r){var Ar;Dt.bindFramebuffer(Yt,_r.framebuffer);var Tr=_r.colorAttachments;for(Ar=0;Ar<Tr.length;++Ar)N(mr+Ar,Tr[Ar]);for(Ar=Tr.length;Ar<Ve.maxColorAttachments;++Ar)Dt.framebufferTexture2D(Yt,mr+Ar,Te,null,0);Dt.framebufferTexture2D(Yt,Cn,Te,null,0),Dt.framebufferTexture2D(Yt,Hr,Te,null,0),Dt.framebufferTexture2D(Yt,wn,Te,null,0),N(Hr,_r.depthAttachment),N(wn,_r.stencilAttachment),N(Cn,_r.depthStencilAttachment);var Dn=Dt.checkFramebufferStatus(Yt);!Dt.isContextLost()&&Dn!==Hn&&ht.raise("framebuffer configuration not supported, status = "+js[Dn]),Dt.bindFramebuffer(Yt,jr.next?jr.next.framebuffer:null),jr.cur=jr.next,Dt.getError()}function Xe(_r,Ar){var Tr=new Zt;Xr.framebufferCount++;function Dn(Fn,la){var ua;ht(jr.next!==Tr,"can not update framebuffer which is currently in use");var ba=0,Ra=0,Aa=!0,eo=!0,Fa=null,go=!0,Qi="rgba",fi="uint8",mo=1,Bo=null,ns=null,us=null,Ho=!1;if(typeof Fn=="number")ba=Fn|0,Ra=la|0||ba;else if(!Fn)ba=Ra=1;else{ht.type(Fn,"object","invalid arguments for framebuffer");var Za=Fn;if("shape"in Za){var bs=Za.shape;ht(Array.isArray(bs)&&bs.length>=2,"invalid shape for framebuffer"),ba=bs[0],Ra=bs[1]}else"radius"in Za&&(ba=Ra=Za.radius),"width"in Za&&(ba=Za.width),"height"in Za&&(Ra=Za.height);("color"in Za||"colors"in Za)&&(Fa=Za.color||Za.colors,Array.isArray(Fa)&&ht(Fa.length===1||Me.webgl_draw_buffers,"multiple render targets not supported")),Fa||("colorCount"in Za&&(mo=Za.colorCount|0,ht(mo>0,"invalid color buffer count")),"colorTexture"in Za&&(go=!!Za.colorTexture,Qi="rgba4"),"colorType"in Za&&(fi=Za.colorType,go?(ht(Me.oes_texture_float||!(fi==="float"||fi==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ht(Me.oes_texture_half_float||!(fi==="half float"||fi==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):fi==="half float"||fi==="float16"?(ht(Me.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Qi="rgba16f"):(fi==="float"||fi==="float32")&&(ht(Me.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Qi="rgba32f"),ht.oneOf(fi,Pn,"invalid color type")),"colorFormat"in Za&&(Qi=Za.colorFormat,An.indexOf(Qi)>=0?go=!0:On.indexOf(Qi)>=0?go=!1:go?ht.oneOf(Za.colorFormat,An,"invalid color format for texture"):ht.oneOf(Za.colorFormat,On,"invalid color format for renderbuffer"))),("depthTexture"in Za||"depthStencilTexture"in Za)&&(Ho=!!(Za.depthTexture||Za.depthStencilTexture),ht(!Ho||Me.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Za&&(typeof Za.depth=="boolean"?Aa=Za.depth:(Bo=Za.depth,eo=!1)),"stencil"in Za&&(typeof Za.stencil=="boolean"?eo=Za.stencil:(ns=Za.stencil,Aa=!1)),"depthStencil"in Za&&(typeof Za.depthStencil=="boolean"?Aa=eo=Za.depthStencil:(us=Za.depthStencil,Aa=!1,eo=!1))}var Pi=null,Sa=null,ci=null,wi=null;if(Array.isArray(Fa))Pi=Fa.map(V);else if(Fa)Pi=[V(Fa)];else for(Pi=new Array(mo),ua=0;ua<mo;++ua)Pi[ua]=it(ba,Ra,go,Qi,fi);ht(Me.webgl_draw_buffers||Pi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ht(Pi.length<=Ve.maxColorAttachments,"too many color attachments, not supported"),ba=ba||Pi[0].width,Ra=Ra||Pi[0].height,Bo?Sa=V(Bo):Aa&&!eo&&(Sa=it(ba,Ra,Ho,"depth","uint32")),ns?ci=V(ns):eo&&!Aa&&(ci=it(ba,Ra,!1,"stencil","uint8")),us?wi=V(us):!Bo&&!ns&&eo&&Aa&&(wi=it(ba,Ra,Ho,"depth stencil","depth stencil")),ht(!!Bo+!!ns+!!us<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var qo=null;for(ua=0;ua<Pi.length;++ua)if(v(Pi[ua],ba,Ra),ht(!Pi[ua]||Pi[ua].texture&&ma.indexOf(Pi[ua].texture._texture.format)>=0||Pi[ua].renderbuffer&&tu.indexOf(Pi[ua].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ua+" is invalid"),Pi[ua]&&Pi[ua].texture){var Wu=ri[Pi[ua].texture._texture.format]*Ei[Pi[ua].texture._texture.type];qo===null?qo=Wu:ht(qo===Wu,"all color attachments much have the same number of bits per pixel.")}return v(Sa,ba,Ra),ht(!Sa||Sa.texture&&Sa.texture._texture.format===Ua||Sa.renderbuffer&&Sa.renderbuffer._renderbuffer.format===Hi,"invalid depth attachment for framebuffer object"),v(ci,ba,Ra),ht(!ci||ci.renderbuffer&&ci.renderbuffer._renderbuffer.format===ko,"invalid stencil attachment for framebuffer object"),v(wi,ba,Ra),ht(!wi||wi.texture&&wi.texture._texture.format===po||wi.renderbuffer&&wi.renderbuffer._renderbuffer.format===po,"invalid depth-stencil attachment for framebuffer object"),ie(Tr),Tr.width=ba,Tr.height=Ra,Tr.colorAttachments=Pi,Tr.depthAttachment=Sa,Tr.stencilAttachment=ci,Tr.depthStencilAttachment=wi,Dn.color=Pi.map(vt),Dn.depth=vt(Sa),Dn.stencil=vt(ci),Dn.depthStencil=vt(wi),Dn.width=Tr.width,Dn.height=Tr.height,Ee(Tr),Dn}function jn(Fn,la){ht(jr.next!==Tr,"can not resize a framebuffer which is currently in use");var ua=Math.max(Fn|0,1),ba=Math.max(la|0||ua,1);if(ua===Tr.width&&ba===Tr.height)return Dn;for(var Ra=Tr.colorAttachments,Aa=0;Aa<Ra.length;++Aa)xt(Ra[Aa],ua,ba);return xt(Tr.depthAttachment,ua,ba),xt(Tr.stencilAttachment,ua,ba),xt(Tr.depthStencilAttachment,ua,ba),Tr.width=Dn.width=ua,Tr.height=Dn.height=ba,Ee(Tr),Dn}return Dn(_r,Ar),C(Dn,{resize:jn,_reglType:"framebuffer",_framebuffer:Tr,destroy:function(){_e(Tr),ie(Tr)},use:function(Fn){jr.setFBO({framebuffer:Dn},Fn)}})}function yr(_r){var Ar=Array(6);function Tr(jn){var Fn;ht(Ar.indexOf(jr.next)<0,"can not update framebuffer which is currently in use");var la={color:null},ua=0,ba=null,Ra="rgba",Aa="uint8",eo=1;if(typeof jn=="number")ua=jn|0;else if(!jn)ua=1;else{ht.type(jn,"object","invalid arguments for framebuffer");var Fa=jn;if("shape"in Fa){var go=Fa.shape;ht(Array.isArray(go)&&go.length>=2,"invalid shape for framebuffer"),ht(go[0]===go[1],"cube framebuffer must be square"),ua=go[0]}else"radius"in Fa&&(ua=Fa.radius|0),"width"in Fa?(ua=Fa.width|0,"height"in Fa&&ht(Fa.height===ua,"must be square")):"height"in Fa&&(ua=Fa.height|0);("color"in Fa||"colors"in Fa)&&(ba=Fa.color||Fa.colors,Array.isArray(ba)&&ht(ba.length===1||Me.webgl_draw_buffers,"multiple render targets not supported")),ba||("colorCount"in Fa&&(eo=Fa.colorCount|0,ht(eo>0,"invalid color buffer count")),"colorType"in Fa&&(ht.oneOf(Fa.colorType,Pn,"invalid color type"),Aa=Fa.colorType),"colorFormat"in Fa&&(Ra=Fa.colorFormat,ht.oneOf(Fa.colorFormat,An,"invalid color format for texture"))),"depth"in Fa&&(la.depth=Fa.depth),"stencil"in Fa&&(la.stencil=Fa.stencil),"depthStencil"in Fa&&(la.depthStencil=Fa.depthStencil)}var Qi;if(ba)if(Array.isArray(ba))for(Qi=[],Fn=0;Fn<ba.length;++Fn)Qi[Fn]=ba[Fn];else Qi=[ba];else{Qi=Array(eo);var fi={radius:ua,format:Ra,type:Aa};for(Fn=0;Fn<eo;++Fn)Qi[Fn]=Yr.createCube(fi)}for(la.color=Array(Qi.length),Fn=0;Fn<Qi.length;++Fn){var mo=Qi[Fn];ht(typeof mo=="function"&&mo._reglType==="textureCube","invalid cube map"),ua=ua||mo.width,ht(mo.width===ua&&mo.height===ua,"invalid cube map shape"),la.color[Fn]={target:cr,data:Qi[Fn]}}for(Fn=0;Fn<6;++Fn){for(var Bo=0;Bo<Qi.length;++Bo)la.color[Bo].target=cr+Fn;Fn>0&&(la.depth=Ar[0].depth,la.stencil=Ar[0].stencil,la.depthStencil=Ar[0].depthStencil),Ar[Fn]?Ar[Fn](la):Ar[Fn]=Xe(la)}return C(Tr,{width:ua,height:ua,color:Qi})}function Dn(jn){var Fn,la=jn|0;if(ht(la>0&&la<=Ve.maxCubeMapSize,"invalid radius for cube fbo"),la===Tr.width)return Tr;var ua=Tr.color;for(Fn=0;Fn<ua.length;++Fn)ua[Fn].resize(la);for(Fn=0;Fn<6;++Fn)Ar[Fn].resize(la);return Tr.width=Tr.height=la,Tr}return Tr(_r),C(Tr,{faces:Ar,resize:Dn,_reglType:"framebufferCube",destroy:function(){Ar.forEach(function(jn){jn.destroy()})}})}function tn(){jr.cur=null,jr.next=null,jr.dirty=!0,ei(Nt).forEach(function(_r){_r.framebuffer=Dt.createFramebuffer(),Ee(_r)})}return C(jr,{getFramebuffer:function(_r){if(typeof _r=="function"&&_r._reglType==="framebuffer"){var Ar=_r._framebuffer;if(Ar instanceof Zt)return Ar}return null},create:Xe,createCube:yr,clear:function(){ei(Nt).forEach(_e)},restore:tn})}var qc=5126,gu=34962;function qu(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=qc,this.offset=0,this.stride=0,this.divisor=0}function yc(Dt,Me,Ve,Yr,vn){for(var Xr=Ve.maxAttributes,jr=new Array(Xr),An=0;An<Xr;++An)jr[An]=new qu;var On=0,Pn={},En={Record:qu,scope:{},state:jr,currentVAO:null,targetVAO:null,restore:v()?Nt:function(){},createVAO:Zt,getVAO:V,destroyBuffer:zn,setVAO:v()?it:vt,clear:v()?xt:function(){}};function zn(ie){for(var _e=0;_e<jr.length;++_e){var Ee=jr[_e];Ee.buffer===ie&&(Dt.disableVertexAttribArray(_e),Ee.buffer=null)}}function v(){return Me.oes_vertex_array_object}function N(){return Me.angle_instanced_arrays}function V(ie){return typeof ie=="function"&&ie._vao?ie._vao:null}function it(ie){if(ie!==En.currentVAO){var _e=v();ie?_e.bindVertexArrayOES(ie.vao):_e.bindVertexArrayOES(null),En.currentVAO=ie}}function vt(ie){if(ie!==En.currentVAO){if(ie)ie.bindAttrs();else for(var _e=N(),Ee=0;Ee<jr.length;++Ee){var Xe=jr[Ee];Xe.buffer?(Dt.enableVertexAttribArray(Ee),Dt.vertexAttribPointer(Ee,Xe.size,Xe.type,Xe.normalized,Xe.stride,Xe.offfset),_e&&Xe.divisor&&_e.vertexAttribDivisorANGLE(Ee,Xe.divisor)):(Dt.disableVertexAttribArray(Ee),Dt.vertexAttrib4f(Ee,Xe.x,Xe.y,Xe.z,Xe.w))}En.currentVAO=ie}}function xt(){ei(Pn).forEach(function(ie){ie.destroy()})}function At(){this.id=++On,this.attributes=[];var ie=v();ie?this.vao=ie.createVertexArrayOES():this.vao=null,Pn[this.id]=this,this.buffers=[]}At.prototype.bindAttrs=function(){for(var ie=N(),_e=this.attributes,Ee=0;Ee<_e.length;++Ee){var Xe=_e[Ee];Xe.buffer?(Dt.enableVertexAttribArray(Ee),Dt.bindBuffer(gu,Xe.buffer.buffer),Dt.vertexAttribPointer(Ee,Xe.size,Xe.type,Xe.normalized,Xe.stride,Xe.offset),ie&&Xe.divisor&&ie.vertexAttribDivisorANGLE(Ee,Xe.divisor)):(Dt.disableVertexAttribArray(Ee),Dt.vertexAttrib4f(Ee,Xe.x,Xe.y,Xe.z,Xe.w))}for(var yr=_e.length;yr<Xr;++yr)Dt.disableVertexAttribArray(yr)},At.prototype.refresh=function(){var ie=v();ie&&(ie.bindVertexArrayOES(this.vao),this.bindAttrs(),En.currentVAO=this)},At.prototype.destroy=function(){if(this.vao){var ie=v();this===En.currentVAO&&(En.currentVAO=null,ie.bindVertexArrayOES(null)),ie.deleteVertexArrayOES(this.vao),this.vao=null}Pn[this.id]&&(delete Pn[this.id],Yr.vaoCount-=1)};function Nt(){var ie=v();ie&&ei(Pn).forEach(function(_e){_e.refresh()})}function Zt(ie){var _e=new At;Yr.vaoCount+=1;function Ee(Xe){ht(Array.isArray(Xe),"arguments to vertex array constructor must be an array"),ht(Xe.length<Xr,"too many attributes"),ht(Xe.length>0,"must specify at least one attribute");var yr={},tn=_e.attributes;tn.length=Xe.length;for(var _r=0;_r<Xe.length;++_r){var Ar=Xe[_r],Tr=tn[_r]=new qu,Dn=Ar.data||Ar;if(Array.isArray(Dn)||z(Dn)||ti(Dn)){var jn;_e.buffers[_r]&&(jn=_e.buffers[_r],z(Dn)&&jn._buffer.byteLength>=Dn.byteLength?jn.subdata(Dn):(jn.destroy(),_e.buffers[_r]=null)),_e.buffers[_r]||(jn=_e.buffers[_r]=vn.create(Ar,gu,!1,!0)),Tr.buffer=vn.getBuffer(jn),Tr.size=Tr.buffer.dimension|0,Tr.normalized=!1,Tr.type=Tr.buffer.dtype,Tr.offset=0,Tr.stride=0,Tr.divisor=0,Tr.state=1,yr[_r]=1}else vn.getBuffer(Ar)?(Tr.buffer=vn.getBuffer(Ar),Tr.size=Tr.buffer.dimension|0,Tr.normalized=!1,Tr.type=Tr.buffer.dtype,Tr.offset=0,Tr.stride=0,Tr.divisor=0,Tr.state=1):vn.getBuffer(Ar.buffer)?(Tr.buffer=vn.getBuffer(Ar.buffer),Tr.size=(+Ar.size||Tr.buffer.dimension)|0,Tr.normalized=!!Ar.normalized||!1,"type"in Ar?(ht.parameter(Ar.type,io,"invalid buffer type"),Tr.type=io[Ar.type]):Tr.type=Tr.buffer.dtype,Tr.offset=(Ar.offset||0)|0,Tr.stride=(Ar.stride||0)|0,Tr.divisor=(Ar.divisor||0)|0,Tr.state=1,ht(Tr.size>=1&&Tr.size<=4,"size must be between 1 and 4"),ht(Tr.offset>=0,"invalid offset"),ht(Tr.stride>=0&&Tr.stride<=255,"stride must be between 0 and 255"),ht(Tr.divisor>=0,"divisor must be positive"),ht(!Tr.divisor||!!Me.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ar?(ht(_r>0,"first attribute must not be a constant"),Tr.x=+Ar.x||0,Tr.y=+Ar.y||0,Tr.z=+Ar.z||0,Tr.w=+Ar.w||0,Tr.state=2):ht(!1,"invalid attribute spec for location "+_r)}for(var Fn=0;Fn<_e.buffers.length;++Fn)!yr[Fn]&&_e.buffers[Fn]&&(_e.buffers[Fn].destroy(),_e.buffers[Fn]=null);return _e.refresh(),Ee}return Ee.destroy=function(){for(var Xe=0;Xe<_e.buffers.length;++Xe)_e.buffers[Xe]&&_e.buffers[Xe].destroy();_e.buffers.length=0,_e.destroy()},Ee._vao=_e,Ee._reglType="vao",Ee(ie)}return En}var Pu=35632,Nu=35633,xc=35718,Qu=35721;function df(Dt,Me,Ve,Yr){var vn={},Xr={};function jr(it,vt,xt,At){this.name=it,this.id=vt,this.location=xt,this.info=At}function An(it,vt){for(var xt=0;xt<it.length;++xt)if(it[xt].id===vt.id){it[xt].location=vt.location;return}it.push(vt)}function On(it,vt,xt){var At=it===Pu?vn:Xr,Nt=At[vt];if(!Nt){var Zt=Me.str(vt);Nt=Dt.createShader(it),Dt.shaderSource(Nt,Zt),Dt.compileShader(Nt),ht.shaderError(Dt,Nt,Zt,it,xt),At[vt]=Nt}return Nt}var Pn={},En=[],zn=0;function v(it,vt){this.id=zn++,this.fragId=it,this.vertId=vt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Yr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function N(it,vt,xt){var At,Nt,Zt=On(Pu,it.fragId),ie=On(Nu,it.vertId),_e=it.program=Dt.createProgram();if(Dt.attachShader(_e,Zt),Dt.attachShader(_e,ie),xt)for(At=0;At<xt.length;++At){var Ee=xt[At];Dt.bindAttribLocation(_e,Ee[0],Ee[1])}Dt.linkProgram(_e),ht.linkError(Dt,_e,Me.str(it.fragId),Me.str(it.vertId),vt);var Xe=Dt.getProgramParameter(_e,xc);Yr.profile&&(it.stats.uniformsCount=Xe);var yr=it.uniforms;for(At=0;At<Xe;++At)if(Nt=Dt.getActiveUniform(_e,At),Nt)if(Nt.size>1)for(var tn=0;tn<Nt.size;++tn){var _r=Nt.name.replace("[0]","["+tn+"]");An(yr,new jr(_r,Me.id(_r),Dt.getUniformLocation(_e,_r),Nt))}else An(yr,new jr(Nt.name,Me.id(Nt.name),Dt.getUniformLocation(_e,Nt.name),Nt));var Ar=Dt.getProgramParameter(_e,Qu);Yr.profile&&(it.stats.attributesCount=Ar);var Tr=it.attributes;for(At=0;At<Ar;++At)Nt=Dt.getActiveAttrib(_e,At),Nt&&An(Tr,new jr(Nt.name,Me.id(Nt.name),Dt.getAttribLocation(_e,Nt.name),Nt))}Yr.profile&&(Ve.getMaxUniformsCount=function(){var it=0;return En.forEach(function(vt){vt.stats.uniformsCount>it&&(it=vt.stats.uniformsCount)}),it},Ve.getMaxAttributesCount=function(){var it=0;return En.forEach(function(vt){vt.stats.attributesCount>it&&(it=vt.stats.attributesCount)}),it});function V(){vn={},Xr={};for(var it=0;it<En.length;++it)N(En[it],null,En[it].attributes.map(function(vt){return[vt.location,vt.name]}))}return{clear:function(){var it=Dt.deleteShader.bind(Dt);ei(vn).forEach(it),vn={},ei(Xr).forEach(it),Xr={},En.forEach(function(vt){Dt.deleteProgram(vt.program)}),En.length=0,Pn={},Ve.shaderCount=0},program:function(it,vt,xt,At){ht.command(it>=0,"missing vertex shader",xt),ht.command(vt>=0,"missing fragment shader",xt);var Nt=Pn[vt];Nt||(Nt=Pn[vt]={});var Zt=Nt[it];if(Zt&&(Zt.refCount++,!At))return Zt;var ie=new v(vt,it);return Ve.shaderCount++,N(ie,xt,At),Zt||(Nt[it]=ie),En.push(ie),C(ie,{destroy:function(){if(ie.refCount--,ie.refCount<=0){Dt.deleteProgram(ie.program);var _e=En.indexOf(ie);En.splice(_e,1),Ve.shaderCount--}Nt[ie.vertId].refCount<=0&&(Dt.deleteShader(Xr[ie.vertId]),delete Xr[ie.vertId],delete Pn[ie.fragId][ie.vertId]),Object.keys(Pn[ie.fragId]).length||(Dt.deleteShader(vn[ie.fragId]),delete vn[ie.fragId],delete Pn[ie.fragId])}})},restore:V,shader:On,frag:-1,vert:-1}}var Vs=6408,Ru=5121,Ju=3333,ku=5126;function bc(Dt,Me,Ve,Yr,vn,Xr,jr){function An(En){var zn;Me.next===null?(ht(vn.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),zn=Ru):(ht(Me.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),zn=Me.next.colorAttachments[0].texture._texture.type,Xr.oes_texture_float?(ht(zn===Ru||zn===ku,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),zn===ku&&ht(jr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ht(zn===Ru,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,N=0,V=Yr.framebufferWidth,it=Yr.framebufferHeight,vt=null;z(En)?vt=En:En&&(ht.type(En,"object","invalid arguments to regl.read()"),v=En.x|0,N=En.y|0,ht(v>=0&&v<Yr.framebufferWidth,"invalid x offset for regl.read"),ht(N>=0&&N<Yr.framebufferHeight,"invalid y offset for regl.read"),V=(En.width||Yr.framebufferWidth-v)|0,it=(En.height||Yr.framebufferHeight-N)|0,vt=En.data||null),vt&&(zn===Ru?ht(vt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):zn===ku&&ht(vt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ht(V>0&&V+v<=Yr.framebufferWidth,"invalid width for read pixels"),ht(it>0&&it+N<=Yr.framebufferHeight,"invalid height for read pixels"),Ve();var xt=V*it*4;return vt||(zn===Ru?vt=new Uint8Array(xt):zn===ku&&(vt=vt||new Float32Array(xt))),ht.isTypedArray(vt,"data buffer for regl.read() must be a typedarray"),ht(vt.byteLength>=xt,"data buffer for regl.read() too small"),Dt.pixelStorei(Ju,4),Dt.readPixels(v,N,V,it,Vs,zn,vt),vt}function On(En){var zn;return Me.setFBO({framebuffer:En.framebuffer},function(){zn=An(En)}),zn}function Pn(En){return!En||!("framebuffer"in En)?An(En):On(En)}return Pn}function eu(Dt){return Array.prototype.slice.call(Dt)}function fu(Dt){return eu(Dt).join("")}function ru(){var Dt=0,Me=[],Ve=[];function Yr(zn){for(var v=0;v<Ve.length;++v)if(Ve[v]===zn)return Me[v];var N="g"+Dt++;return Me.push(N),Ve.push(zn),N}function vn(){var zn=[];function v(){zn.push.apply(zn,eu(arguments))}var N=[];function V(){var it="v"+Dt++;return N.push(it),arguments.length>0&&(zn.push(it,"="),zn.push.apply(zn,eu(arguments)),zn.push(";")),it}return C(v,{def:V,toString:function(){return fu([N.length>0?"var "+N.join(",")+";":"",fu(zn)])}})}function Xr(){var zn=vn(),v=vn(),N=zn.toString,V=v.toString;function it(vt,xt){v(vt,xt,"=",zn.def(vt,xt),";")}return C(function(){zn.apply(zn,eu(arguments))},{def:zn.def,entry:zn,exit:v,save:it,set:function(vt,xt,At){it(vt,xt),zn(vt,xt,"=",At,";")},toString:function(){return N()+V()}})}function jr(){var zn=fu(arguments),v=Xr(),N=Xr(),V=v.toString,it=N.toString;return C(v,{then:function(){return v.apply(v,eu(arguments)),this},else:function(){return N.apply(N,eu(arguments)),this},toString:function(){var vt=it();return vt&&(vt="else{"+vt+"}"),fu(["if(",zn,"){",V(),"}",vt])}})}var An=vn(),On={};function Pn(zn,v){var N=[];function V(){var Nt="a"+N.length;return N.push(Nt),Nt}v=v||0;for(var it=0;it<v;++it)V();var vt=Xr(),xt=vt.toString,At=On[zn]=C(vt,{arg:V,toString:function(){return fu(["function(",N.join(),"){",xt(),"}"])}});return At}function En(){var zn=['"use strict";',An,"return {"];Object.keys(On).forEach(function(V){zn.push('"',V,'":',On[V].toString(),",")}),zn.push("}");var v=fu(zn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),N=Function.apply(null,Me.concat(v));return N.apply(null,Ve)}return{global:An,link:Yr,block:vn,proc:Pn,scope:Xr,cond:jr,compile:En}}var hf="xyzw".split(""),Rl=5121,vf=1,Qc=2,Jc=0,tl=1,el=2,Ec=3,Gf=4,kl=5,Bl=6,rl="dither",pf="blend.enable",nl="blend.color",gf="blend.equation",al="blend.func",Uf="depth.enable",Ts="depth.func",il="depth.range",Wf="depth.mask",wc="colorMask",nr="cull.enable",Bu="cull.face",Hs="frontFace",Yf="lineWidth",ol="polygonOffset.enable",sl="polygonOffset.offset",Zs="sample.alpha",ul="sample.enable",Fu="sample.coverage",mf="stencil.enable",Sc="stencil.mask",Mc="stencil.func",rs="stencil.opFront",zu="stencil.opBack",_c="scissor.enable",Xf="scissor.box",mu="viewport",yf="profile",Gu="framebuffer",yu="vert",tf="frag",xf="elements",bf="primitive",Uu="count",jf="offset",Cc="instances",Ef="vao",fl="Width",Vf="Height",wf=Gu+fl,Ps=Gu+Vf,Hf=mu+fl,Fl=mu+Vf,Tc="drawingBuffer",cl=Tc+fl,Sf=Tc+Vf,zl=[al,gf,Mc,rs,zu,Fu,mu,Xf,sl],ef=34962,Gl=34963,ll=35632,dd=35633,Ul=3553,dl=34067,hl=2884,Wl=3042,Yl=3024,Xl=2960,vl=2929,pl=3089,jl=32823,Vl=32926,Ac=32928,Ks=5126,Ic=35664,Oc=35665,Zf=35666,gl=5124,Dc=35667,Kf=35668,rf=35669,ml=35670,Lc=35671,Pc=35672,Nc=35673,$f=35674,qf=35675,Mf=35676,Qf=35678,xu=35680,Hl=4,bu=1028,nf=1029,Rc=2304,kc=2305,hd=32775,Zl=32776,_f=519,cu=7680,Bc=0,Kl=1,yl=32774,vd=513,xl=36160,pd=36064,xs={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},$l=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Cf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Eu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ql={frag:ll,vert:dd},bl={cw:Rc,ccw:kc};function Fc(Dt){return Array.isArray(Dt)||z(Dt)||ti(Dt)}function Ql(Dt){return Dt.sort(function(Me,Ve){return Me===mu?-1:Ve===mu?1:Me<Ve?-1:1})}function As(Dt,Me,Ve,Yr){this.thisDep=Dt,this.contextDep=Me,this.propDep=Ve,this.append=Yr}function wu(Dt){return Dt&&!(Dt.thisDep||Dt.contextDep||Dt.propDep)}function Vo(Dt){return new As(!1,!1,!1,Dt)}function hs(Dt,Me){var Ve=Dt.type;if(Ve===Jc){var Yr=Dt.data.length;return new As(!0,Yr>=1,Yr>=2,Me)}else if(Ve===Gf){var vn=Dt.data;return new As(vn.thisDep,vn.contextDep,vn.propDep,Me)}else{if(Ve===kl)return new As(!1,!1,!1,Me);if(Ve===Bl){for(var Xr=!1,jr=!1,An=!1,On=0;On<Dt.data.length;++On){var Pn=Dt.data[On];if(Pn.type===tl)An=!0;else if(Pn.type===el)jr=!0;else if(Pn.type===Ec)Xr=!0;else if(Pn.type===Jc){Xr=!0;var En=Pn.data;En>=1&&(jr=!0),En>=2&&(An=!0)}else Pn.type===Gf&&(Xr=Xr||Pn.data.thisDep,jr=jr||Pn.data.contextDep,An=An||Pn.data.propDep)}return new As(Xr,jr,An,Me)}else return new As(Ve===Ec,Ve===el,Ve===tl,Me)}}var El=new As(!1,!1,!1,function(){});function Jl(Dt,Me,Ve,Yr,vn,Xr,jr,An,On,Pn,En,zn,v,N,V){var it=Pn.Record,vt={add:32774,subtract:32778,"reverse subtract":32779};Ve.ext_blend_minmax&&(vt.min=hd,vt.max=Zl);var xt=Ve.angle_instanced_arrays,At=Ve.webgl_draw_buffers,Nt={dirty:!0,profile:V.profile},Zt={},ie=[],_e={},Ee={};function Xe(ze){return ze.replace(".","_")}function yr(ze,be,or){var Dr=Xe(ze);ie.push(ze),Zt[Dr]=Nt[Dr]=!!or,_e[Dr]=be}function tn(ze,be,or){var Dr=Xe(ze);ie.push(ze),Array.isArray(or)?(Nt[Dr]=or.slice(),Zt[Dr]=or.slice()):Nt[Dr]=Zt[Dr]=or,Ee[Dr]=be}yr(rl,Yl),yr(pf,Wl),tn(nl,"blendColor",[0,0,0,0]),tn(gf,"blendEquationSeparate",[yl,yl]),tn(al,"blendFuncSeparate",[Kl,Bc,Kl,Bc]),yr(Uf,vl,!0),tn(Ts,"depthFunc",vd),tn(il,"depthRange",[0,1]),tn(Wf,"depthMask",!0),tn(wc,wc,[!0,!0,!0,!0]),yr(nr,hl),tn(Bu,"cullFace",nf),tn(Hs,Hs,kc),tn(Yf,Yf,1),yr(ol,jl),tn(sl,"polygonOffset",[0,0]),yr(Zs,Vl),yr(ul,Ac),tn(Fu,"sampleCoverage",[1,!1]),yr(mf,Xl),tn(Sc,"stencilMask",-1),tn(Mc,"stencilFunc",[_f,0,-1]),tn(rs,"stencilOpSeparate",[bu,cu,cu,cu]),tn(zu,"stencilOpSeparate",[nf,cu,cu,cu]),yr(_c,pl),tn(Xf,"scissor",[0,0,Dt.drawingBufferWidth,Dt.drawingBufferHeight]),tn(mu,mu,[0,0,Dt.drawingBufferWidth,Dt.drawingBufferHeight]);var _r={gl:Dt,context:v,strings:Me,next:Zt,current:Nt,draw:zn,elements:Xr,buffer:vn,shader:En,attributes:Pn.state,vao:Pn,uniforms:On,framebuffer:An,extensions:Ve,timer:N,isBufferArgs:Fc},Ar={primTypes:za,compareFuncs:Cf,blendFuncs:xs,blendEquations:vt,stencilOps:Eu,glTypes:io,orientationType:bl};ht.optional(function(){_r.isArrayLike=Qa}),At&&(Ar.backBuffer=[nf],Ar.drawBuffer=xn(Yr.maxDrawbuffers,function(ze){return ze===0?[0]:xn(ze,function(be){return pd+be})}));var Tr=0;function Dn(){var ze=ru(),be=ze.link,or=ze.global;ze.id=Tr++,ze.batchId="0";var Dr=be(_r),Lr=ze.shared={props:"a0"};Object.keys(_r).forEach(function(er){Lr[er]=or.def(Dr,".",er)}),ht.optional(function(){ze.CHECK=be(ht),ze.commandStr=ht.guessCommand(),ze.command=be(ze.commandStr),ze.assert=function(er,De,Cr){er("if(!(",De,"))",this.CHECK,".commandRaise(",be(Cr),",",this.command,");")},Ar.invalidBlendCombinations=$l});var lr=ze.next={},sr=ze.current={};Object.keys(Ee).forEach(function(er){Array.isArray(Nt[er])&&(lr[er]=or.def(Lr.next,".",er),sr[er]=or.def(Lr.current,".",er))});var Sr=ze.constants={};Object.keys(Ar).forEach(function(er){Sr[er]=or.def(JSON.stringify(Ar[er]))}),ze.invoke=function(er,De){switch(De.type){case Jc:var Cr=["this",Lr.context,Lr.props,ze.batchId];return er.def(be(De.data),".call(",Cr.slice(0,Math.max(De.data.length+1,4)),")");case tl:return er.def(Lr.props,De.data);case el:return er.def(Lr.context,De.data);case Ec:return er.def("this",De.data);case Gf:return De.data.append(ze,er),De.data.ref;case kl:return De.data.toString();case Bl:return De.data.map(function(Rr){return ze.invoke(er,Rr)})}},ze.attribCache={};var ke={};return ze.scopeAttrib=function(er){var De=Me.id(er);if(De in ke)return ke[De];var Cr=Pn.scope[De];Cr||(Cr=Pn.scope[De]=new it);var Rr=ke[De]=be(Cr);return Rr},ze}function jn(ze){var be=ze.static,or=ze.dynamic,Dr;if(yf in be){var Lr=!!be[yf];Dr=Vo(function(sr,Sr){return Lr}),Dr.enable=Lr}else if(yf in or){var lr=or[yf];Dr=hs(lr,function(sr,Sr){return sr.invoke(Sr,lr)})}return Dr}function Fn(ze,be){var or=ze.static,Dr=ze.dynamic;if(Gu in or){var Lr=or[Gu];return Lr?(Lr=An.getFramebuffer(Lr),ht.command(Lr,"invalid framebuffer object"),Vo(function(sr,Sr){var ke=sr.link(Lr),er=sr.shared;Sr.set(er.framebuffer,".next",ke);var De=er.context;return Sr.set(De,"."+wf,ke+".width"),Sr.set(De,"."+Ps,ke+".height"),ke})):Vo(function(sr,Sr){var ke=sr.shared;Sr.set(ke.framebuffer,".next","null");var er=ke.context;return Sr.set(er,"."+wf,er+"."+cl),Sr.set(er,"."+Ps,er+"."+Sf),"null"})}else if(Gu in Dr){var lr=Dr[Gu];return hs(lr,function(sr,Sr){var ke=sr.invoke(Sr,lr),er=sr.shared,De=er.framebuffer,Cr=Sr.def(De,".getFramebuffer(",ke,")");ht.optional(function(){sr.assert(Sr,"!"+ke+"||"+Cr,"invalid framebuffer object")}),Sr.set(De,".next",Cr);var Rr=er.context;return Sr.set(Rr,"."+wf,Cr+"?"+Cr+".width:"+Rr+"."+cl),Sr.set(Rr,"."+Ps,Cr+"?"+Cr+".height:"+Rr+"."+Sf),Cr})}else return null}function la(ze,be,or){var Dr=ze.static,Lr=ze.dynamic;function lr(ke){if(ke in Dr){var er=Dr[ke];ht.commandType(er,"object","invalid "+ke,or.commandStr);var De=!0,Cr=er.x|0,Rr=er.y|0,ln,pn;return"width"in er?(ln=er.width|0,ht.command(ln>=0,"invalid "+ke,or.commandStr)):De=!1,"height"in er?(pn=er.height|0,ht.command(pn>=0,"invalid "+ke,or.commandStr)):De=!1,new As(!De&&be&&be.thisDep,!De&&be&&be.contextDep,!De&&be&&be.propDep,function(pa,Ka){var fa=pa.shared.context,Ca=ln;"width"in er||(Ca=Ka.def(fa,".",wf,"-",Cr));var Xa=pn;return"height"in er||(Xa=Ka.def(fa,".",Ps,"-",Rr)),[Cr,Rr,Ca,Xa]})}else if(ke in Lr){var rn=Lr[ke],Rn=hs(rn,function(pa,Ka){var fa=pa.invoke(Ka,rn);ht.optional(function(){pa.assert(Ka,fa+"&&typeof "+fa+'==="object"',"invalid "+ke)});var Ca=pa.shared.context,Xa=Ka.def(fa,".x|0"),li=Ka.def(fa,".y|0"),Fo=Ka.def('"width" in ',fa,"?",fa,".width|0:","(",Ca,".",wf,"-",Xa,")"),zs=Ka.def('"height" in ',fa,"?",fa,".height|0:","(",Ca,".",Ps,"-",li,")");return ht.optional(function(){pa.assert(Ka,Fo+">=0&&"+zs+">=0","invalid "+ke)}),[Xa,li,Fo,zs]});return be&&(Rn.thisDep=Rn.thisDep||be.thisDep,Rn.contextDep=Rn.contextDep||be.contextDep,Rn.propDep=Rn.propDep||be.propDep),Rn}else return be?new As(be.thisDep,be.contextDep,be.propDep,function(pa,Ka){var fa=pa.shared.context;return[0,0,Ka.def(fa,".",wf),Ka.def(fa,".",Ps)]}):null}var sr=lr(mu);if(sr){var Sr=sr;sr=new As(sr.thisDep,sr.contextDep,sr.propDep,function(ke,er){var De=Sr.append(ke,er),Cr=ke.shared.context;return er.set(Cr,"."+Hf,De[2]),er.set(Cr,"."+Fl,De[3]),De})}return{viewport:sr,scissor_box:lr(Xf)}}function ua(ze,be){var or=ze.static,Dr=typeof or[tf]=="string"&&typeof or[yu]=="string";if(Dr){if(Object.keys(be.dynamic).length>0)return null;var Lr=be.static,lr=Object.keys(Lr);if(lr.length>0&&typeof Lr[lr[0]]=="number"){for(var sr=[],Sr=0;Sr<lr.length;++Sr)ht(typeof Lr[lr[Sr]]=="number","must specify all vertex attribute locations when using vaos"),sr.push([Lr[lr[Sr]]|0,lr[Sr]]);return sr}}return null}function ba(ze,be,or){var Dr=ze.static,Lr=ze.dynamic;function lr(De){if(De in Dr){var Cr=Me.id(Dr[De]);ht.optional(function(){En.shader(ql[De],Cr,ht.guessCommand())});var Rr=Vo(function(){return Cr});return Rr.id=Cr,Rr}else if(De in Lr){var ln=Lr[De];return hs(ln,function(pn,rn){var Rn=pn.invoke(rn,ln),pa=rn.def(pn.shared.strings,".id(",Rn,")");return ht.optional(function(){rn(pn.shared.shader,".shader(",ql[De],",",pa,",",pn.command,");")}),pa})}return null}var sr=lr(tf),Sr=lr(yu),ke=null,er;return wu(sr)&&wu(Sr)?(ke=En.program(Sr.id,sr.id,null,or),er=Vo(function(De,Cr){return De.link(ke)})):er=new As(sr&&sr.thisDep||Sr&&Sr.thisDep,sr&&sr.contextDep||Sr&&Sr.contextDep,sr&&sr.propDep||Sr&&Sr.propDep,function(De,Cr){var Rr=De.shared.shader,ln;sr?ln=sr.append(De,Cr):ln=Cr.def(Rr,".",tf);var pn;Sr?pn=Sr.append(De,Cr):pn=Cr.def(Rr,".",yu);var rn=Rr+".program("+pn+","+ln;return ht.optional(function(){rn+=","+De.command}),Cr.def(rn+")")}),{frag:sr,vert:Sr,progVar:er,program:ke}}function Ra(ze,be){var or=ze.static,Dr=ze.dynamic;function Lr(){if(xf in or){var De=or[xf];Fc(De)?De=Xr.getElements(Xr.create(De,!0)):De&&(De=Xr.getElements(De),ht.command(De,"invalid elements",be.commandStr));var Cr=Vo(function(ln,pn){if(De){var rn=ln.link(De);return ln.ELEMENTS=rn,rn}return ln.ELEMENTS=null,null});return Cr.value=De,Cr}else if(xf in Dr){var Rr=Dr[xf];return hs(Rr,function(ln,pn){var rn=ln.shared,Rn=rn.isBufferArgs,pa=rn.elements,Ka=ln.invoke(pn,Rr),fa=pn.def("null"),Ca=pn.def(Rn,"(",Ka,")"),Xa=ln.cond(Ca).then(fa,"=",pa,".createStream(",Ka,");").else(fa,"=",pa,".getElements(",Ka,");");return ht.optional(function(){ln.assert(Xa.else,"!"+Ka+"||"+fa,"invalid elements")}),pn.entry(Xa),pn.exit(ln.cond(Ca).then(pa,".destroyStream(",fa,");")),ln.ELEMENTS=fa,fa})}return null}var lr=Lr();function sr(){if(bf in or){var De=or[bf];return ht.commandParameter(De,za,"invalid primitve",be.commandStr),Vo(function(Rr,ln){return za[De]})}else if(bf in Dr){var Cr=Dr[bf];return hs(Cr,function(Rr,ln){var pn=Rr.constants.primTypes,rn=Rr.invoke(ln,Cr);return ht.optional(function(){Rr.assert(ln,rn+" in "+pn,"invalid primitive, must be one of "+Object.keys(za))}),ln.def(pn,"[",rn,"]")})}else if(lr)return wu(lr)?lr.value?Vo(function(Rr,ln){return ln.def(Rr.ELEMENTS,".primType")}):Vo(function(){return Hl}):new As(lr.thisDep,lr.contextDep,lr.propDep,function(Rr,ln){var pn=Rr.ELEMENTS;return ln.def(pn,"?",pn,".primType:",Hl)});return null}function Sr(De,Cr){if(De in or){var Rr=or[De]|0;return ht.command(!Cr||Rr>=0,"invalid "+De,be.commandStr),Vo(function(pn,rn){return Cr&&(pn.OFFSET=Rr),Rr})}else if(De in Dr){var ln=Dr[De];return hs(ln,function(pn,rn){var Rn=pn.invoke(rn,ln);return Cr&&(pn.OFFSET=Rn,ht.optional(function(){pn.assert(rn,Rn+">=0","invalid "+De)})),Rn})}else if(Cr&&lr)return Vo(function(pn,rn){return pn.OFFSET="0",0});return null}var ke=Sr(jf,!0);function er(){if(Uu in or){var De=or[Uu]|0;return ht.command(typeof De=="number"&&De>=0,"invalid vertex count",be.commandStr),Vo(function(){return De})}else if(Uu in Dr){var Cr=Dr[Uu];return hs(Cr,function(pn,rn){var Rn=pn.invoke(rn,Cr);return ht.optional(function(){pn.assert(rn,"typeof "+Rn+'==="number"&&'+Rn+">=0&&"+Rn+"===("+Rn+"|0)","invalid vertex count")}),Rn})}else if(lr)if(wu(lr)){if(lr)return ke?new As(ke.thisDep,ke.contextDep,ke.propDep,function(pn,rn){var Rn=rn.def(pn.ELEMENTS,".vertCount-",pn.OFFSET);return ht.optional(function(){pn.assert(rn,Rn+">=0","invalid vertex offset/element buffer too small")}),Rn}):Vo(function(pn,rn){return rn.def(pn.ELEMENTS,".vertCount")});var Rr=Vo(function(){return-1});return ht.optional(function(){Rr.MISSING=!0}),Rr}else{var ln=new As(lr.thisDep||ke.thisDep,lr.contextDep||ke.contextDep,lr.propDep||ke.propDep,function(pn,rn){var Rn=pn.ELEMENTS;return pn.OFFSET?rn.def(Rn,"?",Rn,".vertCount-",pn.OFFSET,":-1"):rn.def(Rn,"?",Rn,".vertCount:-1")});return ht.optional(function(){ln.DYNAMIC=!0}),ln}return null}return{elements:lr,primitive:sr(),count:er(),instances:Sr(Cc,!1),offset:ke}}function Aa(ze,be){var or=ze.static,Dr=ze.dynamic,Lr={};return ie.forEach(function(lr){var sr=Xe(lr);function Sr(ke,er){if(lr in or){var De=ke(or[lr]);Lr[sr]=Vo(function(){return De})}else if(lr in Dr){var Cr=Dr[lr];Lr[sr]=hs(Cr,function(Rr,ln){return er(Rr,ln,Rr.invoke(ln,Cr))})}}switch(lr){case nr:case pf:case rl:case mf:case Uf:case _c:case ol:case Zs:case ul:case Wf:return Sr(function(ke){return ht.commandType(ke,"boolean",lr,be.commandStr),ke},function(ke,er,De){return ht.optional(function(){ke.assert(er,"typeof "+De+'==="boolean"',"invalid flag "+lr,ke.commandStr)}),De});case Ts:return Sr(function(ke){return ht.commandParameter(ke,Cf,"invalid "+lr,be.commandStr),Cf[ke]},function(ke,er,De){var Cr=ke.constants.compareFuncs;return ht.optional(function(){ke.assert(er,De+" in "+Cr,"invalid "+lr+", must be one of "+Object.keys(Cf))}),er.def(Cr,"[",De,"]")});case il:return Sr(function(ke){return ht.command(Qa(ke)&&ke.length===2&&typeof ke[0]=="number"&&typeof ke[1]=="number"&&ke[0]<=ke[1],"depth range is 2d array",be.commandStr),ke},function(ke,er,De){ht.optional(function(){ke.assert(er,ke.shared.isArrayLike+"("+De+")&&"+De+".length===2&&typeof "+De+'[0]==="number"&&typeof '+De+'[1]==="number"&&'+De+"[0]<="+De+"[1]","depth range must be a 2d array")});var Cr=er.def("+",De,"[0]"),Rr=er.def("+",De,"[1]");return[Cr,Rr]});case al:return Sr(function(ke){ht.commandType(ke,"object","blend.func",be.commandStr);var er="srcRGB"in ke?ke.srcRGB:ke.src,De="srcAlpha"in ke?ke.srcAlpha:ke.src,Cr="dstRGB"in ke?ke.dstRGB:ke.dst,Rr="dstAlpha"in ke?ke.dstAlpha:ke.dst;return ht.commandParameter(er,xs,sr+".srcRGB",be.commandStr),ht.commandParameter(De,xs,sr+".srcAlpha",be.commandStr),ht.commandParameter(Cr,xs,sr+".dstRGB",be.commandStr),ht.commandParameter(Rr,xs,sr+".dstAlpha",be.commandStr),ht.command($l.indexOf(er+", "+Cr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+er+", "+Cr+")",be.commandStr),[xs[er],xs[Cr],xs[De],xs[Rr]]},function(ke,er,De){var Cr=ke.constants.blendFuncs;ht.optional(function(){ke.assert(er,De+"&&typeof "+De+'==="object"',"invalid blend func, must be an object")});function Rr(fa,Ca){var Xa=er.def('"',fa,Ca,'" in ',De,"?",De,".",fa,Ca,":",De,".",fa);return ht.optional(function(){ke.assert(er,Xa+" in "+Cr,"invalid "+lr+"."+fa+Ca+", must be one of "+Object.keys(xs))}),Xa}var ln=Rr("src","RGB"),pn=Rr("dst","RGB");ht.optional(function(){var fa=ke.constants.invalidBlendCombinations;ke.assert(er,fa+".indexOf("+ln+'+", "+'+pn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var rn=er.def(Cr,"[",ln,"]"),Rn=er.def(Cr,"[",Rr("src","Alpha"),"]"),pa=er.def(Cr,"[",pn,"]"),Ka=er.def(Cr,"[",Rr("dst","Alpha"),"]");return[rn,pa,Rn,Ka]});case gf:return Sr(function(ke){if(typeof ke=="string")return ht.commandParameter(ke,vt,"invalid "+lr,be.commandStr),[vt[ke],vt[ke]];if(typeof ke=="object")return ht.commandParameter(ke.rgb,vt,lr+".rgb",be.commandStr),ht.commandParameter(ke.alpha,vt,lr+".alpha",be.commandStr),[vt[ke.rgb],vt[ke.alpha]];ht.commandRaise("invalid blend.equation",be.commandStr)},function(ke,er,De){var Cr=ke.constants.blendEquations,Rr=er.def(),ln=er.def(),pn=ke.cond("typeof ",De,'==="string"');return ht.optional(function(){function rn(Rn,pa,Ka){ke.assert(Rn,Ka+" in "+Cr,"invalid "+pa+", must be one of "+Object.keys(vt))}rn(pn.then,lr,De),ke.assert(pn.else,De+"&&typeof "+De+'==="object"',"invalid "+lr),rn(pn.else,lr+".rgb",De+".rgb"),rn(pn.else,lr+".alpha",De+".alpha")}),pn.then(Rr,"=",ln,"=",Cr,"[",De,"];"),pn.else(Rr,"=",Cr,"[",De,".rgb];",ln,"=",Cr,"[",De,".alpha];"),er(pn),[Rr,ln]});case nl:return Sr(function(ke){return ht.command(Qa(ke)&&ke.length===4,"blend.color must be a 4d array",be.commandStr),xn(4,function(er){return+ke[er]})},function(ke,er,De){return ht.optional(function(){ke.assert(er,ke.shared.isArrayLike+"("+De+")&&"+De+".length===4","blend.color must be a 4d array")}),xn(4,function(Cr){return er.def("+",De,"[",Cr,"]")})});case Sc:return Sr(function(ke){return ht.commandType(ke,"number",sr,be.commandStr),ke|0},function(ke,er,De){return ht.optional(function(){ke.assert(er,"typeof "+De+'==="number"',"invalid stencil.mask")}),er.def(De,"|0")});case Mc:return Sr(function(ke){ht.commandType(ke,"object",sr,be.commandStr);var er=ke.cmp||"keep",De=ke.ref||0,Cr="mask"in ke?ke.mask:-1;return ht.commandParameter(er,Cf,lr+".cmp",be.commandStr),ht.commandType(De,"number",lr+".ref",be.commandStr),ht.commandType(Cr,"number",lr+".mask",be.commandStr),[Cf[er],De,Cr]},function(ke,er,De){var Cr=ke.constants.compareFuncs;ht.optional(function(){function rn(){ke.assert(er,Array.prototype.join.call(arguments,""),"invalid stencil.func")}rn(De+"&&typeof ",De,'==="object"'),rn('!("cmp" in ',De,")||(",De,".cmp in ",Cr,")")});var Rr=er.def('"cmp" in ',De,"?",Cr,"[",De,".cmp]",":",cu),ln=er.def(De,".ref|0"),pn=er.def('"mask" in ',De,"?",De,".mask|0:-1");return[Rr,ln,pn]});case rs:case zu:return Sr(function(ke){ht.commandType(ke,"object",sr,be.commandStr);var er=ke.fail||"keep",De=ke.zfail||"keep",Cr=ke.zpass||"keep";return ht.commandParameter(er,Eu,lr+".fail",be.commandStr),ht.commandParameter(De,Eu,lr+".zfail",be.commandStr),ht.commandParameter(Cr,Eu,lr+".zpass",be.commandStr),[lr===zu?nf:bu,Eu[er],Eu[De],Eu[Cr]]},function(ke,er,De){var Cr=ke.constants.stencilOps;ht.optional(function(){ke.assert(er,De+"&&typeof "+De+'==="object"',"invalid "+lr)});function Rr(ln){return ht.optional(function(){ke.assert(er,'!("'+ln+'" in '+De+")||("+De+"."+ln+" in "+Cr+")","invalid "+lr+"."+ln+", must be one of "+Object.keys(Eu))}),er.def('"',ln,'" in ',De,"?",Cr,"[",De,".",ln,"]:",cu)}return[lr===zu?nf:bu,Rr("fail"),Rr("zfail"),Rr("zpass")]});case sl:return Sr(function(ke){ht.commandType(ke,"object",sr,be.commandStr);var er=ke.factor|0,De=ke.units|0;return ht.commandType(er,"number",sr+".factor",be.commandStr),ht.commandType(De,"number",sr+".units",be.commandStr),[er,De]},function(ke,er,De){ht.optional(function(){ke.assert(er,De+"&&typeof "+De+'==="object"',"invalid "+lr)});var Cr=er.def(De,".factor|0"),Rr=er.def(De,".units|0");return[Cr,Rr]});case Bu:return Sr(function(ke){var er=0;return ke==="front"?er=bu:ke==="back"&&(er=nf),ht.command(!!er,sr,be.commandStr),er},function(ke,er,De){return ht.optional(function(){ke.assert(er,De+'==="front"||'+De+'==="back"',"invalid cull.face")}),er.def(De,'==="front"?',bu,":",nf)});case Yf:return Sr(function(ke){return ht.command(typeof ke=="number"&&ke>=Yr.lineWidthDims[0]&&ke<=Yr.lineWidthDims[1],"invalid line width, must be a positive number between "+Yr.lineWidthDims[0]+" and "+Yr.lineWidthDims[1],be.commandStr),ke},function(ke,er,De){return ht.optional(function(){ke.assert(er,"typeof "+De+'==="number"&&'+De+">="+Yr.lineWidthDims[0]+"&&"+De+"<="+Yr.lineWidthDims[1],"invalid line width")}),De});case Hs:return Sr(function(ke){return ht.commandParameter(ke,bl,sr,be.commandStr),bl[ke]},function(ke,er,De){return ht.optional(function(){ke.assert(er,De+'==="cw"||'+De+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),er.def(De+'==="cw"?'+Rc+":"+kc)});case wc:return Sr(function(ke){return ht.command(Qa(ke)&&ke.length===4,"color.mask must be length 4 array",be.commandStr),ke.map(function(er){return!!er})},function(ke,er,De){return ht.optional(function(){ke.assert(er,ke.shared.isArrayLike+"("+De+")&&"+De+".length===4","invalid color.mask")}),xn(4,function(Cr){return"!!"+De+"["+Cr+"]"})});case Fu:return Sr(function(ke){ht.command(typeof ke=="object"&&ke,sr,be.commandStr);var er="value"in ke?ke.value:1,De=!!ke.invert;return ht.command(typeof er=="number"&&er>=0&&er<=1,"sample.coverage.value must be a number between 0 and 1",be.commandStr),[er,De]},function(ke,er,De){ht.optional(function(){ke.assert(er,De+"&&typeof "+De+'==="object"',"invalid sample.coverage")});var Cr=er.def('"value" in ',De,"?+",De,".value:1"),Rr=er.def("!!",De,".invert");return[Cr,Rr]})}}),Lr}function eo(ze,be){var or=ze.static,Dr=ze.dynamic,Lr={};return Object.keys(or).forEach(function(lr){var sr=or[lr],Sr;if(typeof sr=="number"||typeof sr=="boolean")Sr=Vo(function(){return sr});else if(typeof sr=="function"){var ke=sr._reglType;ke==="texture2d"||ke==="textureCube"?Sr=Vo(function(er){return er.link(sr)}):ke==="framebuffer"||ke==="framebufferCube"?(ht.command(sr.color.length>0,'missing color attachment for framebuffer sent to uniform "'+lr+'"',be.commandStr),Sr=Vo(function(er){return er.link(sr.color[0])})):ht.commandRaise('invalid data for uniform "'+lr+'"',be.commandStr)}else Qa(sr)?Sr=Vo(function(er){var De=er.global.def("[",xn(sr.length,function(Cr){return ht.command(typeof sr[Cr]=="number"||typeof sr[Cr]=="boolean","invalid uniform "+lr,er.commandStr),sr[Cr]}),"]");return De}):ht.commandRaise('invalid or missing data for uniform "'+lr+'"',be.commandStr);Sr.value=sr,Lr[lr]=Sr}),Object.keys(Dr).forEach(function(lr){var sr=Dr[lr];Lr[lr]=hs(sr,function(Sr,ke){return Sr.invoke(ke,sr)})}),Lr}function Fa(ze,be){var or=ze.static,Dr=ze.dynamic,Lr={};return Object.keys(or).forEach(function(lr){var sr=or[lr],Sr=Me.id(lr),ke=new it;if(Fc(sr))ke.state=vf,ke.buffer=vn.getBuffer(vn.create(sr,ef,!1,!0)),ke.type=0;else{var er=vn.getBuffer(sr);if(er)ke.state=vf,ke.buffer=er,ke.type=0;else if(ht.command(typeof sr=="object"&&sr,"invalid data for attribute "+lr,be.commandStr),"constant"in sr){var De=sr.constant;ke.buffer="null",ke.state=Qc,typeof De=="number"?ke.x=De:(ht.command(Qa(De)&&De.length>0&&De.length<=4,"invalid constant for attribute "+lr,be.commandStr),hf.forEach(function(pa,Ka){Ka<De.length&&(ke[pa]=De[Ka])}))}else{Fc(sr.buffer)?er=vn.getBuffer(vn.create(sr.buffer,ef,!1,!0)):er=vn.getBuffer(sr.buffer),ht.command(!!er,'missing buffer for attribute "'+lr+'"',be.commandStr);var Cr=sr.offset|0;ht.command(Cr>=0,'invalid offset for attribute "'+lr+'"',be.commandStr);var Rr=sr.stride|0;ht.command(Rr>=0&&Rr<256,'invalid stride for attribute "'+lr+'", must be integer betweeen [0, 255]',be.commandStr);var ln=sr.size|0;ht.command(!("size"in sr)||ln>0&&ln<=4,'invalid size for attribute "'+lr+'", must be 1,2,3,4',be.commandStr);var pn=!!sr.normalized,rn=0;"type"in sr&&(ht.commandParameter(sr.type,io,"invalid type for attribute "+lr,be.commandStr),rn=io[sr.type]);var Rn=sr.divisor|0;"divisor"in sr&&(ht.command(Rn===0||xt,'cannot specify divisor for attribute "'+lr+'", instancing not supported',be.commandStr),ht.command(Rn>=0,'invalid divisor for attribute "'+lr+'"',be.commandStr)),ht.optional(function(){var pa=be.commandStr,Ka=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(sr).forEach(function(fa){ht.command(Ka.indexOf(fa)>=0,'unknown parameter "'+fa+'" for attribute pointer "'+lr+'" (valid parameters are '+Ka+")",pa)})}),ke.buffer=er,ke.state=vf,ke.size=ln,ke.normalized=pn,ke.type=rn||er.dtype,ke.offset=Cr,ke.stride=Rr,ke.divisor=Rn}}Lr[lr]=Vo(function(pa,Ka){var fa=pa.attribCache;if(Sr in fa)return fa[Sr];var Ca={isStream:!1};return Object.keys(ke).forEach(function(Xa){Ca[Xa]=ke[Xa]}),ke.buffer&&(Ca.buffer=pa.link(ke.buffer),Ca.type=Ca.type||Ca.buffer+".dtype"),fa[Sr]=Ca,Ca})}),Object.keys(Dr).forEach(function(lr){var sr=Dr[lr];function Sr(ke,er){var De=ke.invoke(er,sr),Cr=ke.shared,Rr=ke.constants,ln=Cr.isBufferArgs,pn=Cr.buffer;ht.optional(function(){ke.assert(er,De+"&&(typeof "+De+'==="object"||typeof '+De+'==="function")&&('+ln+"("+De+")||"+pn+".getBuffer("+De+")||"+pn+".getBuffer("+De+".buffer)||"+ln+"("+De+'.buffer)||("constant" in '+De+"&&(typeof "+De+'.constant==="number"||'+Cr.isArrayLike+"("+De+".constant))))",'invalid dynamic attribute "'+lr+'"')});var rn={isStream:er.def(!1)},Rn=new it;Rn.state=vf,Object.keys(Rn).forEach(function(Ca){rn[Ca]=er.def(""+Rn[Ca])});var pa=rn.buffer,Ka=rn.type;er("if(",ln,"(",De,")){",rn.isStream,"=true;",pa,"=",pn,".createStream(",ef,",",De,");",Ka,"=",pa,".dtype;","}else{",pa,"=",pn,".getBuffer(",De,");","if(",pa,"){",Ka,"=",pa,".dtype;",'}else if("constant" in ',De,"){",rn.state,"=",Qc,";","if(typeof "+De+'.constant === "number"){',rn[hf[0]],"=",De,".constant;",hf.slice(1).map(function(Ca){return rn[Ca]}).join("="),"=0;","}else{",hf.map(function(Ca,Xa){return rn[Ca]+"="+De+".constant.length>"+Xa+"?"+De+".constant["+Xa+"]:0;"}).join(""),"}}else{","if(",ln,"(",De,".buffer)){",pa,"=",pn,".createStream(",ef,",",De,".buffer);","}else{",pa,"=",pn,".getBuffer(",De,".buffer);","}",Ka,'="type" in ',De,"?",Rr.glTypes,"[",De,".type]:",pa,".dtype;",rn.normalized,"=!!",De,".normalized;");function fa(Ca){er(rn[Ca],"=",De,".",Ca,"|0;")}return fa("size"),fa("offset"),fa("stride"),fa("divisor"),er("}}"),er.exit("if(",rn.isStream,"){",pn,".destroyStream(",pa,");","}"),rn}Lr[lr]=hs(sr,Sr)}),Lr}function go(ze,be){var or=ze.static,Dr=ze.dynamic;if(Ef in or){var Lr=or[Ef];return Lr!==null&&Pn.getVAO(Lr)===null&&(Lr=Pn.createVAO(Lr)),Vo(function(sr){return sr.link(Pn.getVAO(Lr))})}else if(Ef in Dr){var lr=Dr[Ef];return hs(lr,function(sr,Sr){var ke=sr.invoke(Sr,lr);return Sr.def(sr.shared.vao+".getVAO("+ke+")")})}return null}function Qi(ze){var be=ze.static,or=ze.dynamic,Dr={};return Object.keys(be).forEach(function(Lr){var lr=be[Lr];Dr[Lr]=Vo(function(sr,Sr){return typeof lr=="number"||typeof lr=="boolean"?""+lr:sr.link(lr)})}),Object.keys(or).forEach(function(Lr){var lr=or[Lr];Dr[Lr]=hs(lr,function(sr,Sr){return sr.invoke(Sr,lr)})}),Dr}function fi(ze,be,or,Dr,Lr){var lr=ze.static,sr=ze.dynamic;ht.optional(function(){var fa=[Gu,yu,tf,xf,bf,jf,Uu,Cc,yf,Ef].concat(ie);function Ca(Xa){Object.keys(Xa).forEach(function(li){ht.command(fa.indexOf(li)>=0,'unknown parameter "'+li+'"',Lr.commandStr)})}Ca(lr),Ca(sr)});var Sr=ua(ze,be),ke=Fn(ze,Lr),er=la(ze,ke,Lr),De=Ra(ze,Lr),Cr=Aa(ze,Lr),Rr=ba(ze,Lr,Sr);function ln(fa){var Ca=er[fa];Ca&&(Cr[fa]=Ca)}ln(mu),ln(Xe(Xf));var pn=Object.keys(Cr).length>0,rn={framebuffer:ke,draw:De,shader:Rr,state:Cr,dirty:pn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(rn.profile=jn(ze,Lr),rn.uniforms=eo(or,Lr),rn.drawVAO=rn.scopeVAO=go(ze,Lr),!rn.drawVAO&&Rr.program&&!Sr&&Ve.angle_instanced_arrays){var Rn=!0,pa=Rr.program.attributes.map(function(fa){var Ca=be.static[fa];return Rn=Rn&&!!Ca,Ca});if(Rn&&pa.length>0){var Ka=Pn.getVAO(Pn.createVAO(pa));rn.drawVAO=new As(null,null,null,function(fa,Ca){return fa.link(Ka)}),rn.useVAO=!0}}return Sr?rn.useVAO=!0:rn.attributes=Fa(be,Lr),rn.context=Qi(Dr,Lr),rn}function mo(ze,be,or){var Dr=ze.shared,Lr=Dr.context,lr=ze.scope();Object.keys(or).forEach(function(sr){be.save(Lr,"."+sr);var Sr=or[sr],ke=Sr.append(ze,be);Array.isArray(ke)?lr(Lr,".",sr,"=[",ke.join(),"];"):lr(Lr,".",sr,"=",ke,";")}),be(lr)}function Bo(ze,be,or,Dr){var Lr=ze.shared,lr=Lr.gl,sr=Lr.framebuffer,Sr;At&&(Sr=be.def(Lr.extensions,".webgl_draw_buffers"));var ke=ze.constants,er=ke.drawBuffer,De=ke.backBuffer,Cr;or?Cr=or.append(ze,be):Cr=be.def(sr,".next"),Dr||be("if(",Cr,"!==",sr,".cur){"),be("if(",Cr,"){",lr,".bindFramebuffer(",xl,",",Cr,".framebuffer);"),At&&be(Sr,".drawBuffersWEBGL(",er,"[",Cr,".colorAttachments.length]);"),be("}else{",lr,".bindFramebuffer(",xl,",null);"),At&&be(Sr,".drawBuffersWEBGL(",De,");"),be("}",sr,".cur=",Cr,";"),Dr||be("}")}function ns(ze,be,or){var Dr=ze.shared,Lr=Dr.gl,lr=ze.current,sr=ze.next,Sr=Dr.current,ke=Dr.next,er=ze.cond(Sr,".dirty");ie.forEach(function(De){var Cr=Xe(De);if(!(Cr in or.state)){var Rr,ln;if(Cr in sr){Rr=sr[Cr],ln=lr[Cr];var pn=xn(Nt[Cr].length,function(Rn){return er.def(Rr,"[",Rn,"]")});er(ze.cond(pn.map(function(Rn,pa){return Rn+"!=="+ln+"["+pa+"]"}).join("||")).then(Lr,".",Ee[Cr],"(",pn,");",pn.map(function(Rn,pa){return ln+"["+pa+"]="+Rn}).join(";"),";"))}else{Rr=er.def(ke,".",Cr);var rn=ze.cond(Rr,"!==",Sr,".",Cr);er(rn),Cr in _e?rn(ze.cond(Rr).then(Lr,".enable(",_e[Cr],");").else(Lr,".disable(",_e[Cr],");"),Sr,".",Cr,"=",Rr,";"):rn(Lr,".",Ee[Cr],"(",Rr,");",Sr,".",Cr,"=",Rr,";")}}}),Object.keys(or.state).length===0&&er(Sr,".dirty=false;"),be(er)}function us(ze,be,or,Dr){var Lr=ze.shared,lr=ze.current,sr=Lr.current,Sr=Lr.gl;Ql(Object.keys(or)).forEach(function(ke){var er=or[ke];if(!(Dr&&!Dr(er))){var De=er.append(ze,be);if(_e[ke]){var Cr=_e[ke];wu(er)?De?be(Sr,".enable(",Cr,");"):be(Sr,".disable(",Cr,");"):be(ze.cond(De).then(Sr,".enable(",Cr,");").else(Sr,".disable(",Cr,");")),be(sr,".",ke,"=",De,";")}else if(Qa(De)){var Rr=lr[ke];be(Sr,".",Ee[ke],"(",De,");",De.map(function(ln,pn){return Rr+"["+pn+"]="+ln}).join(";"),";")}else be(Sr,".",Ee[ke],"(",De,");",sr,".",ke,"=",De,";")}})}function Ho(ze,be){xt&&(ze.instancing=be.def(ze.shared.extensions,".angle_instanced_arrays"))}function Za(ze,be,or,Dr,Lr){var lr=ze.shared,sr=ze.stats,Sr=lr.current,ke=lr.timer,er=or.profile;function De(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Cr,Rr;function ln(fa){Cr=be.def(),fa(Cr,"=",De(),";"),typeof Lr=="string"?fa(sr,".count+=",Lr,";"):fa(sr,".count++;"),N&&(Dr?(Rr=be.def(),fa(Rr,"=",ke,".getNumPendingQueries();")):fa(ke,".beginQuery(",sr,");"))}function pn(fa){fa(sr,".cpuTime+=",De(),"-",Cr,";"),N&&(Dr?fa(ke,".pushScopeStats(",Rr,",",ke,".getNumPendingQueries(),",sr,");"):fa(ke,".endQuery();"))}function rn(fa){var Ca=be.def(Sr,".profile");be(Sr,".profile=",fa,";"),be.exit(Sr,".profile=",Ca,";")}var Rn;if(er){if(wu(er)){er.enable?(ln(be),pn(be.exit),rn("true")):rn("false");return}Rn=er.append(ze,be),rn(Rn)}else Rn=be.def(Sr,".profile");var pa=ze.block();ln(pa),be("if(",Rn,"){",pa,"}");var Ka=ze.block();pn(Ka),be.exit("if(",Rn,"){",Ka,"}")}function bs(ze,be,or,Dr,Lr){var lr=ze.shared;function sr(ke){switch(ke){case Ic:case Dc:case Lc:return 2;case Oc:case Kf:case Pc:return 3;case Zf:case rf:case Nc:return 4;default:return 1}}function Sr(ke,er,De){var Cr=lr.gl,Rr=be.def(ke,".location"),ln=be.def(lr.attributes,"[",Rr,"]"),pn=De.state,rn=De.buffer,Rn=[De.x,De.y,De.z,De.w],pa=["buffer","normalized","offset","stride"];function Ka(){be("if(!",ln,".buffer){",Cr,".enableVertexAttribArray(",Rr,");}");var Ca=De.type,Xa;if(De.size?Xa=be.def(De.size,"||",er):Xa=er,be("if(",ln,".type!==",Ca,"||",ln,".size!==",Xa,"||",pa.map(function(Fo){return ln+"."+Fo+"!=="+De[Fo]}).join("||"),"){",Cr,".bindBuffer(",ef,",",rn,".buffer);",Cr,".vertexAttribPointer(",[Rr,Xa,Ca,De.normalized,De.stride,De.offset],");",ln,".type=",Ca,";",ln,".size=",Xa,";",pa.map(function(Fo){return ln+"."+Fo+"="+De[Fo]+";"}).join(""),"}"),xt){var li=De.divisor;be("if(",ln,".divisor!==",li,"){",ze.instancing,".vertexAttribDivisorANGLE(",[Rr,li],");",ln,".divisor=",li,";}")}}function fa(){be("if(",ln,".buffer){",Cr,".disableVertexAttribArray(",Rr,");",ln,".buffer=null;","}if(",hf.map(function(Ca,Xa){return ln+"."+Ca+"!=="+Rn[Xa]}).join("||"),"){",Cr,".vertexAttrib4f(",Rr,",",Rn,");",hf.map(function(Ca,Xa){return ln+"."+Ca+"="+Rn[Xa]+";"}).join(""),"}")}pn===vf?Ka():pn===Qc?fa():(be("if(",pn,"===",vf,"){"),Ka(),be("}else{"),fa(),be("}"))}Dr.forEach(function(ke){var er=ke.name,De=or.attributes[er],Cr;if(De){if(!Lr(De))return;Cr=De.append(ze,be)}else{if(!Lr(El))return;var Rr=ze.scopeAttrib(er);ht.optional(function(){ze.assert(be,Rr+".state","missing attribute "+er)}),Cr={},Object.keys(new it).forEach(function(ln){Cr[ln]=be.def(Rr,".",ln)})}Sr(ze.link(ke),sr(ke.info.type),Cr)})}function Pi(ze,be,or,Dr,Lr){for(var lr=ze.shared,sr=lr.gl,Sr,ke=0;ke<Dr.length;++ke){var er=Dr[ke],De=er.name,Cr=er.info.type,Rr=or.uniforms[De],ln=ze.link(er),pn=ln+".location",rn;if(Rr){if(!Lr(Rr))continue;if(wu(Rr)){var Rn=Rr.value;if(ht.command(Rn!==null&&typeof Rn!="undefined",'missing uniform "'+De+'"',ze.commandStr),Cr===Qf||Cr===xu){ht.command(typeof Rn=="function"&&(Cr===Qf&&(Rn._reglType==="texture2d"||Rn._reglType==="framebuffer")||Cr===xu&&(Rn._reglType==="textureCube"||Rn._reglType==="framebufferCube")),"invalid texture for uniform "+De,ze.commandStr);var pa=ze.link(Rn._texture||Rn.color[0]._texture);be(sr,".uniform1i(",pn,",",pa+".bind());"),be.exit(pa,".unbind();")}else if(Cr===$f||Cr===qf||Cr===Mf){ht.optional(function(){ht.command(Qa(Rn),"invalid matrix for uniform "+De,ze.commandStr),ht.command(Cr===$f&&Rn.length===4||Cr===qf&&Rn.length===9||Cr===Mf&&Rn.length===16,"invalid length for matrix uniform "+De,ze.commandStr)});var Ka=ze.global.def("new Float32Array(["+Array.prototype.slice.call(Rn)+"])"),fa=2;Cr===qf?fa=3:Cr===Mf&&(fa=4),be(sr,".uniformMatrix",fa,"fv(",pn,",false,",Ka,");")}else{switch(Cr){case Ks:ht.commandType(Rn,"number","uniform "+De,ze.commandStr),Sr="1f";break;case Ic:ht.command(Qa(Rn)&&Rn.length===2,"uniform "+De,ze.commandStr),Sr="2f";break;case Oc:ht.command(Qa(Rn)&&Rn.length===3,"uniform "+De,ze.commandStr),Sr="3f";break;case Zf:ht.command(Qa(Rn)&&Rn.length===4,"uniform "+De,ze.commandStr),Sr="4f";break;case ml:ht.commandType(Rn,"boolean","uniform "+De,ze.commandStr),Sr="1i";break;case gl:ht.commandType(Rn,"number","uniform "+De,ze.commandStr),Sr="1i";break;case Lc:ht.command(Qa(Rn)&&Rn.length===2,"uniform "+De,ze.commandStr),Sr="2i";break;case Dc:ht.command(Qa(Rn)&&Rn.length===2,"uniform "+De,ze.commandStr),Sr="2i";break;case Pc:ht.command(Qa(Rn)&&Rn.length===3,"uniform "+De,ze.commandStr),Sr="3i";break;case Kf:ht.command(Qa(Rn)&&Rn.length===3,"uniform "+De,ze.commandStr),Sr="3i";break;case Nc:ht.command(Qa(Rn)&&Rn.length===4,"uniform "+De,ze.commandStr),Sr="4i";break;case rf:ht.command(Qa(Rn)&&Rn.length===4,"uniform "+De,ze.commandStr),Sr="4i";break}be(sr,".uniform",Sr,"(",pn,",",Qa(Rn)?Array.prototype.slice.call(Rn):Rn,");")}continue}else rn=Rr.append(ze,be)}else{if(!Lr(El))continue;rn=be.def(lr.uniforms,"[",Me.id(De),"]")}Cr===Qf?(ht(!Array.isArray(rn),"must specify a scalar prop for textures"),be("if(",rn,"&&",rn,'._reglType==="framebuffer"){',rn,"=",rn,".color[0];","}")):Cr===xu&&(ht(!Array.isArray(rn),"must specify a scalar prop for cube maps"),be("if(",rn,"&&",rn,'._reglType==="framebufferCube"){',rn,"=",rn,".color[0];","}")),ht.optional(function(){function zs(Su,Oh){ze.assert(be,Su,'bad data or missing for uniform "'+De+'".  '+Oh)}function id(Su){ht(!Array.isArray(rn),"must not specify an array type for uniform"),zs("typeof "+rn+'==="'+Su+'"',"invalid type, expected "+Su)}function au(Su,Oh){Array.isArray(rn)?ht(rn.length===Su,"must have length "+Su):zs(lr.isArrayLike+"("+rn+")&&"+rn+".length==="+Su,"invalid vector, should have length "+Su,ze.commandStr)}function Ud(Su){ht(!Array.isArray(rn),"must not specify a value type"),zs("typeof "+rn+'==="function"&&'+rn+'._reglType==="texture'+(Su===Ul?"2d":"Cube")+'"',"invalid texture type",ze.commandStr)}switch(Cr){case gl:id("number");break;case Dc:au(2,"number");break;case Kf:au(3,"number");break;case rf:au(4,"number");break;case Ks:id("number");break;case Ic:au(2,"number");break;case Oc:au(3,"number");break;case Zf:au(4,"number");break;case ml:id("boolean");break;case Lc:au(2,"boolean");break;case Pc:au(3,"boolean");break;case Nc:au(4,"boolean");break;case $f:au(4,"number");break;case qf:au(9,"number");break;case Mf:au(16,"number");break;case Qf:Ud(Ul);break;case xu:Ud(dl);break}});var Ca=1;switch(Cr){case Qf:case xu:var Xa=be.def(rn,"._texture");be(sr,".uniform1i(",pn,",",Xa,".bind());"),be.exit(Xa,".unbind();");continue;case gl:case ml:Sr="1i";break;case Dc:case Lc:Sr="2i",Ca=2;break;case Kf:case Pc:Sr="3i",Ca=3;break;case rf:case Nc:Sr="4i",Ca=4;break;case Ks:Sr="1f";break;case Ic:Sr="2f",Ca=2;break;case Oc:Sr="3f",Ca=3;break;case Zf:Sr="4f",Ca=4;break;case $f:Sr="Matrix2fv";break;case qf:Sr="Matrix3fv";break;case Mf:Sr="Matrix4fv";break}if(be(sr,".uniform",Sr,"(",pn,","),Sr.charAt(0)==="M"){var li=Math.pow(Cr-$f+2,2),Fo=ze.global.def("new Float32Array(",li,")");Array.isArray(rn)?be("false,(",xn(li,function(zs){return Fo+"["+zs+"]="+rn[zs]}),",",Fo,")"):be("false,(Array.isArray(",rn,")||",rn," instanceof Float32Array)?",rn,":(",xn(li,function(zs){return Fo+"["+zs+"]="+rn+"["+zs+"]"}),",",Fo,")")}else Ca>1?be(xn(Ca,function(zs){return Array.isArray(rn)?rn[zs]:rn+"["+zs+"]"})):(ht(!Array.isArray(rn),"uniform value must not be an array"),be(rn));be(");")}}function Sa(ze,be,or,Dr){var Lr=ze.shared,lr=Lr.gl,sr=Lr.draw,Sr=Dr.draw;function ke(){var Xa=Sr.elements,li,Fo=be;return Xa?((Xa.contextDep&&Dr.contextDynamic||Xa.propDep)&&(Fo=or),li=Xa.append(ze,Fo)):li=Fo.def(sr,".",xf),li&&Fo("if("+li+")"+lr+".bindBuffer("+Gl+","+li+".buffer.buffer);"),li}function er(){var Xa=Sr.count,li,Fo=be;return Xa?((Xa.contextDep&&Dr.contextDynamic||Xa.propDep)&&(Fo=or),li=Xa.append(ze,Fo),ht.optional(function(){Xa.MISSING&&ze.assert(be,"false","missing vertex count"),Xa.DYNAMIC&&ze.assert(Fo,li+">=0","missing vertex count")})):(li=Fo.def(sr,".",Uu),ht.optional(function(){ze.assert(Fo,li+">=0","missing vertex count")})),li}var De=ke();function Cr(Xa){var li=Sr[Xa];return li?li.contextDep&&Dr.contextDynamic||li.propDep?li.append(ze,or):li.append(ze,be):be.def(sr,".",Xa)}var Rr=Cr(bf),ln=Cr(jf),pn=er();if(typeof pn=="number"){if(pn===0)return}else or("if(",pn,"){"),or.exit("}");var rn,Rn;xt&&(rn=Cr(Cc),Rn=ze.instancing);var pa=De+".type",Ka=Sr.elements&&wu(Sr.elements);function fa(){function Xa(){or(Rn,".drawElementsInstancedANGLE(",[Rr,pn,pa,ln+"<<(("+pa+"-"+Rl+")>>1)",rn],");")}function li(){or(Rn,".drawArraysInstancedANGLE(",[Rr,ln,pn,rn],");")}De?Ka?Xa():(or("if(",De,"){"),Xa(),or("}else{"),li(),or("}")):li()}function Ca(){function Xa(){or(lr+".drawElements("+[Rr,pn,pa,ln+"<<(("+pa+"-"+Rl+")>>1)"]+");")}function li(){or(lr+".drawArrays("+[Rr,ln,pn]+");")}De?Ka?Xa():(or("if(",De,"){"),Xa(),or("}else{"),li(),or("}")):li()}xt&&(typeof rn!="number"||rn>=0)?typeof rn=="string"?(or("if(",rn,">0){"),fa(),or("}else if(",rn,"<0){"),Ca(),or("}")):fa():Ca()}function ci(ze,be,or,Dr,Lr){var lr=Dn(),sr=lr.proc("body",Lr);return ht.optional(function(){lr.commandStr=be.commandStr,lr.command=lr.link(be.commandStr)}),xt&&(lr.instancing=sr.def(lr.shared.extensions,".angle_instanced_arrays")),ze(lr,sr,or,Dr),lr.compile().body}function wi(ze,be,or,Dr){Ho(ze,be),or.useVAO?or.drawVAO?be(ze.shared.vao,".setVAO(",or.drawVAO.append(ze,be),");"):be(ze.shared.vao,".setVAO(",ze.shared.vao,".targetVAO);"):(be(ze.shared.vao,".setVAO(null);"),bs(ze,be,or,Dr.attributes,function(){return!0})),Pi(ze,be,or,Dr.uniforms,function(){return!0}),Sa(ze,be,be,or)}function qo(ze,be){var or=ze.proc("draw",1);Ho(ze,or),mo(ze,or,be.context),Bo(ze,or,be.framebuffer),ns(ze,or,be),us(ze,or,be.state),Za(ze,or,be,!1,!0);var Dr=be.shader.progVar.append(ze,or);if(or(ze.shared.gl,".useProgram(",Dr,".program);"),be.shader.program)wi(ze,or,be,be.shader.program);else{or(ze.shared.vao,".setVAO(null);");var Lr=ze.global.def("{}"),lr=or.def(Dr,".id"),sr=or.def(Lr,"[",lr,"]");or(ze.cond(sr).then(sr,".call(this,a0);").else(sr,"=",Lr,"[",lr,"]=",ze.link(function(Sr){return ci(wi,ze,be,Sr,1)}),"(",Dr,");",sr,".call(this,a0);"))}Object.keys(be.state).length>0&&or(ze.shared.current,".dirty=true;")}function Wu(ze,be,or,Dr){ze.batchId="a1",Ho(ze,be);function Lr(){return!0}bs(ze,be,or,Dr.attributes,Lr),Pi(ze,be,or,Dr.uniforms,Lr),Sa(ze,be,be,or)}function tc(ze,be,or,Dr){Ho(ze,be);var Lr=or.contextDep,lr=be.def(),sr="a0",Sr="a1",ke=be.def();ze.shared.props=ke,ze.batchId=lr;var er=ze.scope(),De=ze.scope();be(er.entry,"for(",lr,"=0;",lr,"<",Sr,";++",lr,"){",ke,"=",sr,"[",lr,"];",De,"}",er.exit);function Cr(pa){return pa.contextDep&&Lr||pa.propDep}function Rr(pa){return!Cr(pa)}if(or.needsContext&&mo(ze,De,or.context),or.needsFramebuffer&&Bo(ze,De,or.framebuffer),us(ze,De,or.state,Cr),or.profile&&Cr(or.profile)&&Za(ze,De,or,!1,!0),Dr)or.useVAO?or.drawVAO?Cr(or.drawVAO)?De(ze.shared.vao,".setVAO(",or.drawVAO.append(ze,De),");"):er(ze.shared.vao,".setVAO(",or.drawVAO.append(ze,er),");"):er(ze.shared.vao,".setVAO(",ze.shared.vao,".targetVAO);"):(er(ze.shared.vao,".setVAO(null);"),bs(ze,er,or,Dr.attributes,Rr),bs(ze,De,or,Dr.attributes,Cr)),Pi(ze,er,or,Dr.uniforms,Rr),Pi(ze,De,or,Dr.uniforms,Cr),Sa(ze,er,De,or);else{var ln=ze.global.def("{}"),pn=or.shader.progVar.append(ze,De),rn=De.def(pn,".id"),Rn=De.def(ln,"[",rn,"]");De(ze.shared.gl,".useProgram(",pn,".program);","if(!",Rn,"){",Rn,"=",ln,"[",rn,"]=",ze.link(function(pa){return ci(Wu,ze,or,pa,2)}),"(",pn,");}",Rn,".call(this,a0[",lr,"],",lr,");")}}function Ye(ze,be){var or=ze.proc("batch",2);ze.batchId="0",Ho(ze,or);var Dr=!1,Lr=!0;Object.keys(be.context).forEach(function(ln){Dr=Dr||be.context[ln].propDep}),Dr||(mo(ze,or,be.context),Lr=!1);var lr=be.framebuffer,sr=!1;lr?(lr.propDep?Dr=sr=!0:lr.contextDep&&Dr&&(sr=!0),sr||Bo(ze,or,lr)):Bo(ze,or,null),be.state.viewport&&be.state.viewport.propDep&&(Dr=!0);function Sr(ln){return ln.contextDep&&Dr||ln.propDep}ns(ze,or,be),us(ze,or,be.state,function(ln){return!Sr(ln)}),(!be.profile||!Sr(be.profile))&&Za(ze,or,be,!1,"a1"),be.contextDep=Dr,be.needsContext=Lr,be.needsFramebuffer=sr;var ke=be.shader.progVar;if(ke.contextDep&&Dr||ke.propDep)tc(ze,or,be,null);else{var er=ke.append(ze,or);if(or(ze.shared.gl,".useProgram(",er,".program);"),be.shader.program)tc(ze,or,be,be.shader.program);else{or(ze.shared.vao,".setVAO(null);");var De=ze.global.def("{}"),Cr=or.def(er,".id"),Rr=or.def(De,"[",Cr,"]");or(ze.cond(Rr).then(Rr,".call(this,a0,a1);").else(Rr,"=",De,"[",Cr,"]=",ze.link(function(ln){return ci(tc,ze,be,ln,2)}),"(",er,");",Rr,".call(this,a0,a1);"))}}Object.keys(be.state).length>0&&or(ze.shared.current,".dirty=true;")}function $r(ze,be){var or=ze.proc("scope",3);ze.batchId="a2";var Dr=ze.shared,Lr=Dr.current;mo(ze,or,be.context),be.framebuffer&&be.framebuffer.append(ze,or),Ql(Object.keys(be.state)).forEach(function(sr){var Sr=be.state[sr],ke=Sr.append(ze,or);Qa(ke)?ke.forEach(function(er,De){or.set(ze.next[sr],"["+De+"]",er)}):or.set(Dr.next,"."+sr,ke)}),Za(ze,or,be,!0,!0),[xf,jf,Uu,Cc,bf].forEach(function(sr){var Sr=be.draw[sr];Sr&&or.set(Dr.draw,"."+sr,""+Sr.append(ze,or))}),Object.keys(be.uniforms).forEach(function(sr){var Sr=be.uniforms[sr].append(ze,or);Array.isArray(Sr)&&(Sr="["+Sr.join()+"]"),or.set(Dr.uniforms,"["+Me.id(sr)+"]",Sr)}),Object.keys(be.attributes).forEach(function(sr){var Sr=be.attributes[sr].append(ze,or),ke=ze.scopeAttrib(sr);Object.keys(new it).forEach(function(er){or.set(ke,"."+er,Sr[er])})}),be.scopeVAO&&or.set(Dr.vao,".targetVAO",be.scopeVAO.append(ze,or));function lr(sr){var Sr=be.shader[sr];Sr&&or.set(Dr.shader,"."+sr,Sr.append(ze,or))}lr(yu),lr(tf),Object.keys(be.state).length>0&&(or(Lr,".dirty=true;"),or.exit(Lr,".dirty=true;")),or("a1(",ze.shared.context,",a0,",ze.batchId,");")}function Wr(ze){if(!(typeof ze!="object"||Qa(ze))){for(var be=Object.keys(ze),or=0;or<be.length;++or)if(dr.isDynamic(ze[be[or]]))return!0;return!1}}function na(ze,be,or){var Dr=be.static[or];if(!Dr||!Wr(Dr))return;var Lr=ze.global,lr=Object.keys(Dr),sr=!1,Sr=!1,ke=!1,er=ze.global.def("{}");lr.forEach(function(Cr){var Rr=Dr[Cr];if(dr.isDynamic(Rr)){typeof Rr=="function"&&(Rr=Dr[Cr]=dr.unbox(Rr));var ln=hs(Rr,null);sr=sr||ln.thisDep,ke=ke||ln.propDep,Sr=Sr||ln.contextDep}else{switch(Lr(er,".",Cr,"="),typeof Rr){case"number":Lr(Rr);break;case"string":Lr('"',Rr,'"');break;case"object":Array.isArray(Rr)&&Lr("[",Rr.join(),"]");break;default:Lr(ze.link(Rr));break}Lr(";")}});function De(Cr,Rr){lr.forEach(function(ln){var pn=Dr[ln];if(dr.isDynamic(pn)){var rn=Cr.invoke(Rr,pn);Rr(er,".",ln,"=",rn,";")}})}be.dynamic[or]=new dr.DynamicVariable(Gf,{thisDep:sr,contextDep:Sr,propDep:ke,ref:er,append:De}),delete be.static[or]}function ii(ze,be,or,Dr,Lr){var lr=Dn();lr.stats=lr.link(Lr),Object.keys(be.static).forEach(function(Sr){na(lr,be,Sr)}),zl.forEach(function(Sr){na(lr,ze,Sr)});var sr=fi(ze,be,or,Dr,lr);return qo(lr,sr),$r(lr,sr),Ye(lr,sr),C(lr.compile(),{destroy:function(){sr.shader.program.destroy()}})}return{next:Zt,current:Nt,procs:function(){var ze=Dn(),be=ze.proc("poll"),or=ze.proc("refresh"),Dr=ze.block();be(Dr),or(Dr);var Lr=ze.shared,lr=Lr.gl,sr=Lr.next,Sr=Lr.current;Dr(Sr,".dirty=false;"),Bo(ze,be),Bo(ze,or,null,!0);var ke;xt&&(ke=ze.link(xt)),Ve.oes_vertex_array_object&&or(ze.link(Ve.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var er=0;er<Yr.maxAttributes;++er){var De=or.def(Lr.attributes,"[",er,"]"),Cr=ze.cond(De,".buffer");Cr.then(lr,".enableVertexAttribArray(",er,");",lr,".bindBuffer(",ef,",",De,".buffer.buffer);",lr,".vertexAttribPointer(",er,",",De,".size,",De,".type,",De,".normalized,",De,".stride,",De,".offset);").else(lr,".disableVertexAttribArray(",er,");",lr,".vertexAttrib4f(",er,",",De,".x,",De,".y,",De,".z,",De,".w);",De,".buffer=null;"),or(Cr),xt&&or(ke,".vertexAttribDivisorANGLE(",er,",",De,".divisor);")}return or(ze.shared.vao,".currentVAO=null;",ze.shared.vao,".setVAO(",ze.shared.vao,".targetVAO);"),Object.keys(_e).forEach(function(Rr){var ln=_e[Rr],pn=Dr.def(sr,".",Rr),rn=ze.block();rn("if(",pn,"){",lr,".enable(",ln,")}else{",lr,".disable(",ln,")}",Sr,".",Rr,"=",pn,";"),or(rn),be("if(",pn,"!==",Sr,".",Rr,"){",rn,"}")}),Object.keys(Ee).forEach(function(Rr){var ln=Ee[Rr],pn=Nt[Rr],rn,Rn,pa=ze.block();if(pa(lr,".",ln,"("),Qa(pn)){var Ka=pn.length;rn=ze.global.def(sr,".",Rr),Rn=ze.global.def(Sr,".",Rr),pa(xn(Ka,function(fa){return rn+"["+fa+"]"}),");",xn(Ka,function(fa){return Rn+"["+fa+"]="+rn+"["+fa+"];"}).join("")),be("if(",xn(Ka,function(fa){return rn+"["+fa+"]!=="+Rn+"["+fa+"]"}).join("||"),"){",pa,"}")}else rn=Dr.def(sr,".",Rr),Rn=Dr.def(Sr,".",Rr),pa(rn,");",Sr,".",Rr,"=",rn,";"),be("if(",rn,"!==",Rn,"){",pa,"}");or(pa)}),ze.compile()}(),compile:ii}}function td(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var gd=34918,md=34919,wl=35007,ed=function(Dt,Me){if(!Me.ext_disjoint_timer_query)return null;var Ve=[];function Yr(){return Ve.pop()||Me.ext_disjoint_timer_query.createQueryEXT()}function vn(xt){Ve.push(xt)}var Xr=[];function jr(xt){var At=Yr();Me.ext_disjoint_timer_query.beginQueryEXT(wl,At),Xr.push(At),N(Xr.length-1,Xr.length,xt)}function An(){Me.ext_disjoint_timer_query.endQueryEXT(wl)}function On(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Pn=[];function En(){return Pn.pop()||new On}function zn(xt){Pn.push(xt)}var v=[];function N(xt,At,Nt){var Zt=En();Zt.startQueryIndex=xt,Zt.endQueryIndex=At,Zt.sum=0,Zt.stats=Nt,v.push(Zt)}var V=[],it=[];function vt(){var xt,At,Nt=Xr.length;if(Nt!==0){it.length=Math.max(it.length,Nt+1),V.length=Math.max(V.length,Nt+1),V[0]=0,it[0]=0;var Zt=0;for(xt=0,At=0;At<Xr.length;++At){var ie=Xr[At];Me.ext_disjoint_timer_query.getQueryObjectEXT(ie,md)?(Zt+=Me.ext_disjoint_timer_query.getQueryObjectEXT(ie,gd),vn(ie)):Xr[xt++]=ie,V[At+1]=Zt,it[At+1]=xt}for(Xr.length=xt,xt=0,At=0;At<v.length;++At){var _e=v[At],Ee=_e.startQueryIndex,Xe=_e.endQueryIndex;_e.sum+=V[Xe]-V[Ee];var yr=it[Ee],tn=it[Xe];tn===yr?(_e.stats.gpuTime+=_e.sum/1e6,zn(_e)):(_e.startQueryIndex=yr,_e.endQueryIndex=tn,v[xt++]=_e)}v.length=xt}}return{beginQuery:jr,endQuery:An,pushScopeStats:N,update:vt,getNumPendingQueries:function(){return Xr.length},clear:function(){Ve.push.apply(Ve,Xr);for(var xt=0;xt<Ve.length;xt++)Me.ext_disjoint_timer_query.deleteQueryEXT(Ve[xt]);Xr.length=0,Ve.length=0},restore:function(){Xr.length=0,Ve.length=0}}},yd=16384,xd=256,rd=1024,nd=34962,zc="webglcontextlost",Gc="webglcontextrestored",Sl=1,ad=2,nu=3;function Ml(Dt,Me){for(var Ve=0;Ve<Dt.length;++Ve)if(Dt[Ve]===Me)return Ve;return-1}function Jf(Dt){var Me=en(Dt);if(!Me)return null;var Ve=Me.gl,Yr=Ve.getContextAttributes(),vn=Ve.isContextLost(),Xr=hn(Ve,Me);if(!Xr)return null;var jr=Pr(),An=td(),On=Xr.extensions,Pn=ed(Ve,On),En=Qe(),zn=Ve.drawingBufferWidth,v=Ve.drawingBufferHeight,N={tick:0,time:0,viewportWidth:zn,viewportHeight:v,framebufferWidth:zn,framebufferHeight:v,drawingBufferWidth:zn,drawingBufferHeight:v,pixelRatio:Me.pixelRatio},V={},it={elements:null,primitive:4,count:-1,offset:0,instances:-1},vt=Ni(Ve,On),xt=va(Ve,An,Me,Nt),At=yc(Ve,On,vt,An,xt);function Nt(Sa){return At.destroyBuffer(Sa)}var Zt=is(Ve,On,xt,An),ie=df(Ve,jr,An,Me),_e=pc(Ve,On,vt,function(){yr.procs.poll()},N,An,Me),Ee=It(Ve,On,vt,An,Me),Xe=lf(Ve,On,vt,_e,Ee,An),yr=Jl(Ve,jr,On,vt,xt,Zt,_e,Xe,V,At,ie,it,N,Pn,Me),tn=bc(Ve,Xe,yr.procs.poll,N,Yr,On,vt),_r=yr.next,Ar=Ve.canvas,Tr=[],Dn=[],jn=[],Fn=[Me.onDestroy],la=null;function ua(){if(Tr.length===0){Pn&&Pn.update(),la=null;return}la=ar.next(ua),us();for(var Sa=Tr.length-1;Sa>=0;--Sa){var ci=Tr[Sa];ci&&ci(N,null,0)}Ve.flush(),Pn&&Pn.update()}function ba(){!la&&Tr.length>0&&(la=ar.next(ua))}function Ra(){la&&(ar.cancel(ua),la=null)}function Aa(Sa){Sa.preventDefault(),vn=!0,Ra(),Dn.forEach(function(ci){ci()})}function eo(Sa){Ve.getError(),vn=!1,Xr.restore(),ie.restore(),xt.restore(),_e.restore(),Ee.restore(),Xe.restore(),At.restore(),Pn&&Pn.restore(),yr.procs.refresh(),ba(),jn.forEach(function(ci){ci()})}Ar&&(Ar.addEventListener(zc,Aa,!1),Ar.addEventListener(Gc,eo,!1));function Fa(){Tr.length=0,Ra(),Ar&&(Ar.removeEventListener(zc,Aa),Ar.removeEventListener(Gc,eo)),ie.clear(),Xe.clear(),Ee.clear(),_e.clear(),Zt.clear(),xt.clear(),At.clear(),Pn&&Pn.clear(),Fn.forEach(function(Sa){Sa()})}function go(Sa){ht(!!Sa,"invalid args to regl({...})"),ht.type(Sa,"object","invalid args to regl({...})");function ci(Lr){var lr=C({},Lr);delete lr.uniforms,delete lr.attributes,delete lr.context,delete lr.vao,"stencil"in lr&&lr.stencil.op&&(lr.stencil.opBack=lr.stencil.opFront=lr.stencil.op,delete lr.stencil.op);function sr(Sr){if(Sr in lr){var ke=lr[Sr];delete lr[Sr],Object.keys(ke).forEach(function(er){lr[Sr+"."+er]=ke[er]})}}return sr("blend"),sr("depth"),sr("cull"),sr("stencil"),sr("polygonOffset"),sr("scissor"),sr("sample"),"vao"in Lr&&(lr.vao=Lr.vao),lr}function wi(Lr,lr){var sr={},Sr={};return Object.keys(Lr).forEach(function(ke){var er=Lr[ke];if(dr.isDynamic(er)){Sr[ke]=dr.unbox(er,ke);return}else if(lr&&Array.isArray(er)){for(var De=0;De<er.length;++De)if(dr.isDynamic(er[De])){Sr[ke]=dr.unbox(er,ke);return}}sr[ke]=er}),{dynamic:Sr,static:sr}}var qo=wi(Sa.context||{},!0),Wu=wi(Sa.uniforms||{},!0),tc=wi(Sa.attributes||{},!1),Ye=wi(ci(Sa),!1),$r={gpuTime:0,cpuTime:0,count:0},Wr=yr.compile(Ye,tc,Wu,qo,$r),na=Wr.draw,ii=Wr.batch,ze=Wr.scope,be=[];function or(Lr){for(;be.length<Lr;)be.push(null);return be}function Dr(Lr,lr){var sr;if(vn&&ht.raise("context lost"),typeof Lr=="function")return ze.call(this,null,Lr,0);if(typeof lr=="function")if(typeof Lr=="number")for(sr=0;sr<Lr;++sr)ze.call(this,null,lr,sr);else if(Array.isArray(Lr))for(sr=0;sr<Lr.length;++sr)ze.call(this,Lr[sr],lr,sr);else return ze.call(this,Lr,lr,0);else if(typeof Lr=="number"){if(Lr>0)return ii.call(this,or(Lr|0),Lr|0)}else if(Array.isArray(Lr)){if(Lr.length)return ii.call(this,Lr,Lr.length)}else return na.call(this,Lr)}return C(Dr,{stats:$r,destroy:function(){Wr.destroy()}})}var Qi=Xe.setFBO=go({framebuffer:dr.define.call(null,Sl,"framebuffer")});function fi(Sa,ci){var wi=0;yr.procs.poll();var qo=ci.color;qo&&(Ve.clearColor(+qo[0]||0,+qo[1]||0,+qo[2]||0,+qo[3]||0),wi|=yd),"depth"in ci&&(Ve.clearDepth(+ci.depth),wi|=xd),"stencil"in ci&&(Ve.clearStencil(ci.stencil|0),wi|=rd),ht(!!wi,"called regl.clear with no buffer specified"),Ve.clear(wi)}function mo(Sa){if(ht(typeof Sa=="object"&&Sa,"regl.clear() takes an object as input"),"framebuffer"in Sa)if(Sa.framebuffer&&Sa.framebuffer_reglType==="framebufferCube")for(var ci=0;ci<6;++ci)Qi(C({framebuffer:Sa.framebuffer.faces[ci]},Sa),fi);else Qi(Sa,fi);else fi(null,Sa)}function Bo(Sa){ht.type(Sa,"function","regl.frame() callback must be a function"),Tr.push(Sa);function ci(){var wi=Ml(Tr,Sa);ht(wi>=0,"cannot cancel a frame twice");function qo(){var Wu=Ml(Tr,qo);Tr[Wu]=Tr[Tr.length-1],Tr.length-=1,Tr.length<=0&&Ra()}Tr[wi]=qo}return ba(),{cancel:ci}}function ns(){var Sa=_r.viewport,ci=_r.scissor_box;Sa[0]=Sa[1]=ci[0]=ci[1]=0,N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=Sa[2]=ci[2]=Ve.drawingBufferWidth,N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=Sa[3]=ci[3]=Ve.drawingBufferHeight}function us(){N.tick+=1,N.time=Za(),ns(),yr.procs.poll()}function Ho(){_e.refresh(),ns(),yr.procs.refresh(),Pn&&Pn.update()}function Za(){return(Qe()-En)/1e3}Ho();function bs(Sa,ci){ht.type(ci,"function","listener callback must be a function");var wi;switch(Sa){case"frame":return Bo(ci);case"lost":wi=Dn;break;case"restore":wi=jn;break;case"destroy":wi=Fn;break;default:ht.raise("invalid event, must be one of frame,lost,restore,destroy")}return wi.push(ci),{cancel:function(){for(var qo=0;qo<wi.length;++qo)if(wi[qo]===ci){wi[qo]=wi[wi.length-1],wi.pop();return}}}}var Pi=C(go,{clear:mo,prop:dr.define.bind(null,Sl),context:dr.define.bind(null,ad),this:dr.define.bind(null,nu),draw:go({}),buffer:function(Sa){return xt.create(Sa,nd,!1,!1)},elements:function(Sa){return Zt.create(Sa,!1)},texture:_e.create2D,cube:_e.createCube,renderbuffer:Ee.create,framebuffer:Xe.create,framebufferCube:Xe.createCube,vao:At.createVAO,attributes:Yr,frame:Bo,on:bs,limits:vt,hasExtension:function(Sa){return vt.extensions.indexOf(Sa.toLowerCase())>=0},read:tn,destroy:Fa,_gl:Ve,_refresh:Ho,poll:function(){us(),Pn&&Pn.update()},now:Za,stats:An});return Me.onDone(null,Pi),Pi}return Jf})},952191:function(He,z){"use strict";var C;C={value:!0},C=W,z.Rs=b,C=h,C=K,z.Yf=U,z.Lo=Y,z.lu=H,z.hy=q,z.Lq=Q,C=J,z.dt=ft,z.GX=nt,C=yt,z.Ck=zt,z.YJ=Mt,C=Ct,C=rt,C=ot,C=Tt;var x={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k=["Webkit","ms","Moz","O"];function w(Rt,st){return Rt+st.charAt(0).toUpperCase()+st.substring(1)}Object.keys(x).forEach(function(Rt){k.forEach(function(st){x[w(st,Rt)]=x[Rt]})});var T=/^(normal|none|(\b(url\([^)]*\)|chapter_counter|attr\([^)]*\)|(no-)?(open|close)-quote|inherit)((\b\s*)|$|\s+))+)$/,L=function(){return typeof document=="undefined"?!1:!!(navigator&&(navigator.userAgent.indexOf("MSIE 8.0")>0||navigator.userAgent.indexOf("MSIE 9.0")>0))}(),P=1e5,p={aqua:[0,255,255,1],lime:[0,255,0,1],silver:[192,192,192,1],black:[0,0,0,1],maroon:[128,0,0,1],teal:[0,128,128,1],blue:[0,0,255,1],navy:[0,0,128,1],white:[255,255,255,1],fuchsia:[255,0,255,1],olive:[128,128,0,1],yellow:[255,255,0,1],orange:[255,165,0,1],gray:[128,128,128,1],purple:[128,0,128,1],green:[0,128,0,1],red:[255,0,0,1],pink:[255,192,203,1],cyan:[0,255,255,1],transparent:[255,255,255,0]},m=Math.PI/180,S=180/Math.PI,y={_lists:{transformsBase:["translate","translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ","rotate"],transforms3D:["translate3d","translateZ","scaleZ","rotateX","rotateY","perspective"]},transformGroup:{translate:1,translate3d:1,scale:1,scale3d:1,rotate:1,rotate3d:1,skew:1},filter:["grayScale","sepia","hueRotate","invert","brightness","contrast","blur"],filterConvert:{grayScale:"grayscale",hueRotate:"hue-rotate"}};y._lists.transformsBase=L?y._lists.transformsBase:y._lists.transformsBase.concat(y._lists.transforms3D);var g=C=/#([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{3})/,O=C=/((rgb|hsl)[a]?)+\((?:\d|\.\d)+(?:(deg|\%|)),[\s+]?(?:\d|\.\d)+(?:(deg|\%|)),[\s+]?(?:\d|\.\d)+(?:(deg|%|))(,[\s+]?(?:\d|\.\d)+(?:(deg|\%|)))?\)/,E=z.rV=/#([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{3})|((rgb|hsl)[a]?)+\((?:\d|\.\d)+(?:(deg|\%)?),[\s+]?(?:\d|\.\d)+(?:(deg|\%)?),[\s+]?(?:\d|\.\d)+(?:(deg|%)?)(,[\s+]?(?:\d|\.\d)+(?:(deg|\%)?))?\)/,D=C=/(?:\d|\.\d)+(%?)/g,F=z._T=y;function W(Rt){return Rt.replace(/[A-Z]/,function(st){return"-"+st.toLocaleLowerCase()})}function b(Rt){return Rt.replace(/-(.?)/g,function(st){return st.replace("-","").toLocaleUpperCase()})}function h(Rt,st){var bt=st?Math.pow(10,st):P,Ft=Rt|0,Ht=Rt-Ft,_t=Rt;if(Ht){var Xt=(Ht*bt+(Rt<0?-.5:.5)|0)/bt,ee=Xt|0,se=Xt.toString(),ue=se.split(".")[1]||"";_t=(Rt<0&&!(Ft+ee)?"-":"")+(Ft+ee)+"."+ue}return parseFloat(_t)}function K(Rt){if(typeof document=="undefined")return null;var st=["WebKitCSS","MozCSS","DOM","MsCSS","MSCSS","OCSS","CSS"].filter(function(bt){return bt+"Matrix"in window});return st.length?new window[st[0]+"Matrix"](Rt):(console.warn("Browsers do not support matrix."),"")}function U(Rt){if(typeof document=="undefined")return null;var st=["O","Moz","ms","Ms","Webkit"];if(Rt!=="filter"&&Rt in document.body.style)return Rt;var bt=Rt.charAt(0).toUpperCase()+Rt.substr(1),Ft=st.filter(function(Ht){return""+Ht+bt in document.body.style});return Ft[0]?""+Ft[0]+bt:null}function Y(Rt){var st=Rt;return st=st==="x"?"translateX":st,st=st==="y"?"translateY":st,st=st==="z"?"translateZ":st,st}var Z=function(st,bt,Ft){return Ft<0&&(Ft+=6),Ft>=6&&(Ft-=6),Ft<1?(bt-st)*Ft+st:Ft<3?bt:Ft<4?(bt-st)*(4-Ft)+st:st};function H(Rt){var st=p.transparent,bt=Rt,Ft=void 0,Ht=void 0,_t=void 0;if(!bt)st=p.transparent;else if(p[bt])st=p[bt];else if(typeof bt=="number")st=[bt>>16,bt>>8&255,bt&255];else if(bt.charAt(bt.length-1)===","&&(bt=bt.substr(0,bt.length-1)),bt.match(g))bt=bt.substr(1),bt.length===3&&(Ft=bt.charAt(0),Ht=bt.charAt(1),_t=bt.charAt(2),bt=""+Ft+Ft+Ht+Ht+_t+_t+"ff"),bt.length===6&&(bt+="ff"),bt=parseInt(bt,16),st=[bt>>24&255,bt>>16&255,bt>>8&255,parseFloat(((bt&255)/255).toFixed(2))];else if(bt.match(/^hsl/)){st=bt.match(D);var Xt=st[3];Xt=typeof Xt=="string"&&Xt.match("%")?parseFloat(Xt)/100:parseFloat(""+(Xt||"1"));var ee=parseFloat(st[0])/60,se=parseFloat(st[1])/100,ue=parseFloat(st[2])/100,Ut=ue<=.5?ue*(se+1):ue+se-ue*se,oe=ue*2-Ut;Ft=Math.round(Z(oe,Ut,ee+2)*255),Ht=Math.round(Z(oe,Ut,ee)*255),_t=Math.round(Z(oe,Ut,ee-2)*255),st=[Ft,Ht,_t,Xt]}else st=bt.match(D)||p.transparent,st=st.map(function(Pe){return parseFloat(Pe)}),st.length===3&&st.push(1);return st}function q(Rt,st){var bt=st&&b(st);if(!Rt)return bt==="boxShadow"?[0,0,0,0,0,0,0,0]:[0,0,0,0,0,0,0];var Ft=Rt.replace(/,\s+/gi,",").split(/\s+/).filter(function(se){return se}),Ht=Ft.indexOf("inset");Ht>=0&&Ft.splice(Ht,1);var _t=Ft.find(function(se){return p[se]||se.match(/#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})|(rgb|hsl)+(?:a)?\((.*)\)/i)})||"black",Xt=Ft.indexOf(_t);Ft.splice(Xt,1);var ee=H(_t);return ee[3]=typeof ee[3]=="number"?ee[3]:1,bt==="boxShadow"&&Ft.length<4&&Ft.push(0),Ft.concat(ee,Ht>=0?["inset"]:[])}function Q(Rt){var st=Rt.length===4?"rgba":"rgb",bt=Rt.map(function(Ft,Ht){return Ht<3?Math.round(Ft):Ft});return st+"("+bt.join(",")+")"}function J(Rt){return F._lists.transformsBase.indexOf(Rt)>=0?"transform":Rt}function ft(Rt){var st=J(Rt);return F.filter.indexOf(st)>=0?"filter":st}function nt(Rt){if(Rt==="none"||!Rt||Rt==="")return null;var st=Rt.replace(/\s+/g,"").split(")").filter(function(Ft){return Ft}),bt={};return st.forEach(function(Ft){var Ht=Ft.split("(");bt[Ht[0]]=Ht[1]}),bt}function yt(Rt){var st=Rt.match(/(?:\-|\b)[\d\-\.e]+\b/gi),bt={};return st.length===6?(bt.m11=parseFloat(st[0]),bt.m12=parseFloat(st[1]),bt.m13=0,bt.m14=0,bt.m21=parseFloat(st[2]),bt.m22=parseFloat(st[3]),bt.m23=0,bt.m24=0,bt.m31=0,bt.m32=0,bt.m33=1,bt.m34=0,bt.m41=parseFloat(st[4]),bt.m42=parseFloat(st[5]),bt.m43=0,bt.m44=0):st.forEach(function(Ft,Ht){var _t=Ht%4+1,Xt=Math.floor(Ht/4)+1;bt["m"+Xt+_t]=parseFloat(Ft)}),bt}function gt(Rt){var st={};return st.translateX=0,st.translateY=0,st.translateZ=0,st.rotate=0,st.rotateX=0,st.rotateY=0,st.scaleX=1,st.scaleY=1,st.scaleZ=1,st.skewX=0,st.skewY=0,st.perspective=0,(Rt.trim().match(/(\w+)\([^\)]+\)/ig)||[]).forEach(function(bt){var Ft=bt.split("("),Ht=Ft[0].trim(),_t=Ft[1].replace(")","").trim();_t.match(/%|em|rem/ig)&&console.warn("value("+_t+") must be absolute, not relative, has been converted to absolute."),_t=_t.replace(/px|deg|\)/ig,""),F.transformGroup[Ht]&&Ht!=="rotate"?(_t=_t.split(",").map(function(Xt){return parseFloat(Xt)}),Ht==="scale3d"||Ht==="translate3d"?["X","Y","Z"].forEach(function(Xt,ee){var se=Ht.substring(0,Ht.length-2);st[""+se+Xt]=_t[ee]||st[""+se+Xt]}):Ht==="rotate3d"?(st.rotateX=_t[0]&&_t[3]||st.rotateX,st.rotateY=_t[1]&&_t[3]||st.rotateY,st.rotate=_t[2]&&_t[3]||st.rotate):["X","Y"].forEach(function(Xt,ee){st[""+Ht+Xt]=_t[ee]||st[""+Ht+Xt]})):Ht==="rotateZ"?st.rotate=parseFloat(_t)||st.rotate:st[Ht]=parseFloat(_t)||st[Ht]}),st}function zt(Rt){var st=!Rt||Rt==="none"||Rt===""?"matrix(1, 0, 0, 1, 0, 0)":Rt;if(!st.match("matrix"))return gt(Rt);var bt=yt(st),Ft=bt.m11,Ht=bt.m12,_t=bt.m13,Xt=bt.m14,ee=bt.m21,se=bt.m22,ue=bt.m23,Ut=bt.m24,oe=bt.m31,Pe=bt.m32,te=bt.m33,ve=bt.m34,Ue=bt.m43,xe=void 0,Re=void 0,de=void 0,ht={},ae=Math.atan2(ue,te),Le=Math.tan(ee),Ze=Math.tan(Ht),qe=void 0,fr=void 0;return ht.rotateX=h(ae*S)||0,ae&&(qe=Math.cos(-ae),fr=Math.sin(-ae),xe=ee*qe+oe*fr,Re=se*qe+Pe*fr,de=ue*qe+te*fr,oe=ee*-fr+oe*qe,Pe=se*-fr+Pe*qe,te=ue*-fr+te*qe,ve=Ut*-fr+ve*qe,ee=xe,se=Re,ue=de),ae=Math.atan2(-_t,te),ht.rotateY=h(ae*S)||0,ae&&(qe=Math.cos(-ae),fr=Math.sin(-ae),xe=Ft*qe-oe*fr,Re=Ht*qe-Pe*fr,de=_t*qe-te*fr,Pe=Ht*fr+Pe*qe,te=_t*fr+te*qe,ve=Xt*fr+ve*qe,Ft=xe,Ht=Re,_t=de),ae=Math.atan2(Ht,Ft),ht.rotate=h(ae*S)||0,ae&&(qe=Math.cos(ae),fr=Math.sin(ae),xe=Ft*qe+Ht*fr,Re=ee*qe+se*fr,de=oe*qe+Pe*fr,Ht=Ht*qe-Ft*fr,se=se*qe-ee*fr,Pe=Pe*qe-oe*fr,Ft=xe,ee=Re,oe=de),ht.rotateX&&Math.abs(ht.rotateX)+Math.abs(ht.rotate)>359.9&&(ht.rotateX=ht.rotate=0,ht.rotateY=180-ht.rotateY||0),ht.scaleX=h(Math.sqrt(Ft*Ft+Ht*Ht+_t*_t)),ht.scaleY=h(Math.sqrt(se*se+ue*ue)),ht.scaleZ=h(Math.sqrt(oe*oe+Pe*Pe+te*te)),ht.skewX=Le===-Ze?0:Le,ht.skewY=Ze===-Le?0:Ze,ht.perspective=ve?1/(ve<0?-ve:ve):0,ht.translateX=bt.m41,ht.translateY=bt.m42,ht.translateZ=Ue,ht}function Mt(Rt,st){var bt=void 0;return!x[Rt]&&typeof st=="number"?bt=" "+st+"px":Rt==="content"&&!T.test(st)&&(bt="'"+st.replace(/'/g,"\\'")+"'"),bt||st}function Ct(Rt,st){var bt=st&&st.toString().replace(/[^a-z|%]/ig,""),Ft="";return Rt.indexOf("translate")>=0||Rt.indexOf("perspective")>=0||Rt.indexOf("blur")>=0?Ft="px":(Rt.indexOf("skew")>=0||Rt.indexOf("rotate")>=0)&&(Ft="deg"),bt||Ft}function rt(Rt,st,bt){return Rt+"("+st+(bt||"")+")"}function ot(Rt,st){var bt=null;return Rt&&Rt.forEach(function(Ft){if(!bt){var Ht=Ft.split("(")[0],_t=Ht in F.transformGroup&&st.substring(0,st.length-1).indexOf(Ht)>=0,Xt=st in F.transformGroup&&Ht.substring(0,Ht.length-1).indexOf(st)>=0,ee=Ht in F.transformGroup&&st in F.transformGroup&&(Ht.substring(0,Ht.length-2)===st||st.substring(0,st.length-2)===Ht);(Ht===st||_t||Xt||ee)&&(bt=Ft)}}),bt}function Tt(Rt,st){if(!Rt||Rt==="")return st;if(!st||st==="")return Rt;var bt=Rt.replace(/\s/g,"").split(")").filter(function(Ht){return Ht!==""&&Ht}).map(function(Ht){return Ht+")"}),Ft=st.replace(/\s/g,"").split(")").filter(function(Ht){return Ht!==""&&Ht});return Ft.forEach(function(Ht){var _t=Ht.split("("),Xt=_t[0],ee=ot(bt,Xt);if(!ee)bt.push(Ht+")");else{var se=bt.indexOf(ee);bt[se]=Ht+")"}}),bt.forEach(function(Ht,_t){Ht.indexOf("perspective")>=0&&_t&&(bt.splice(_t,1),bt.unshift(Ht))}),bt.join(" ").trim()}},141e3:function(He){"use strict";var z={linear:function(C,x,k,w){var T=k-x;return T*C/w+x},easeInQuad:function(C,x,k,w){var T=k-x;return T*(C/=w)*C+x},easeOutQuad:function(C,x,k,w){var T=k-x;return-T*(C/=w)*(C-2)+x},easeInOutQuad:function(C,x,k,w){var T=k-x;return(C/=w/2)<1?T/2*C*C+x:-T/2*(--C*(C-2)-1)+x},easeInCubic:function(C,x,k,w){var T=k-x;return T*(C/=w)*C*C+x},easeOutCubic:function(C,x,k,w){var T=k-x;return T*((C=C/w-1)*C*C+1)+x},easeInOutCubic:function(C,x,k,w){var T=k-x;return(C/=w/2)<1?T/2*C*C*C+x:T/2*((C-=2)*C*C+2)+x},easeInQuart:function(C,x,k,w){var T=k-x;return T*(C/=w)*C*C*C+x},easeOutQuart:function(C,x,k,w){var T=k-x;return-T*((C=C/w-1)*C*C*C-1)+x},easeInOutQuart:function(C,x,k,w){var T=k-x;return(C/=w/2)<1?T/2*C*C*C*C+x:-T/2*((C-=2)*C*C*C-2)+x},easeInQuint:function(C,x,k,w){var T=k-x;return T*(C/=w)*C*C*C*C+x},easeOutQuint:function(C,x,k,w){var T=k-x;return T*((C=C/w-1)*C*C*C*C+1)+x},easeInOutQuint:function(C,x,k,w){var T=k-x;return(C/=w/2)<1?T/2*C*C*C*C*C+x:T/2*((C-=2)*C*C*C*C+2)+x},easeInSine:function(C,x,k,w){var T=k-x;return-T*Math.cos(C/w*(Math.PI/2))+T+x},easeOutSine:function(C,x,k,w){var T=k-x;return T*Math.sin(C/w*(Math.PI/2))+x},easeInOutSine:function(C,x,k,w){var T=k-x;return-T/2*(Math.cos(Math.PI*C/w)-1)+x},easeInExpo:function(C,x,k,w){var T=k-x;return C==0?x:T*Math.pow(2,10*(C/w-1))+x},easeOutExpo:function(C,x,k,w){var T=k-x;return C==w?x+T:T*(-Math.pow(2,-10*C/w)+1)+x},easeInOutExpo:function(C,x,k,w){var T=k-x;return C===0?x:C===w?x+T:(C/=w/2)<1?T/2*Math.pow(2,10*(C-1))+x:T/2*(-Math.pow(2,-10*--C)+2)+x},easeInCirc:function(C,x,k,w){var T=k-x;return-T*(Math.sqrt(1-(C/=w)*C)-1)+x},easeOutCirc:function(C,x,k,w){var T=k-x;return T*Math.sqrt(1-(C=C/w-1)*C)+x},easeInOutCirc:function(C,x,k,w){var T=k-x;return(C/=w/2)<1?-T/2*(Math.sqrt(1-C*C)-1)+x:T/2*(Math.sqrt(1-(C-=2)*C)+1)+x},easeInElastic:function(C,x,k,w){var T=k-x,L,P,p;return p=1.70158,P=0,L=T,C===0?x:(C/=w)===1?x+T:(P||(P=w*.3),L<Math.abs(T)?(L=T,p=P/4):p=P/(2*Math.PI)*Math.asin(T/L),-(L*Math.pow(2,10*(C-=1))*Math.sin((C*w-p)*(2*Math.PI)/P))+x)},easeOutElastic:function(C,x,k,w){var T=k-x,L,P,p;return p=1.70158,P=0,L=T,C===0?x:(C/=w)===1?x+T:(P||(P=w*.3),L<Math.abs(T)?(L=T,p=P/4):p=P/(2*Math.PI)*Math.asin(T/L),L*Math.pow(2,-10*C)*Math.sin((C*w-p)*(2*Math.PI)/P)+T+x)},easeInOutElastic:function(C,x,k,w){var T=k-x,L,P,p;return p=1.70158,P=0,L=T,C===0?x:(C/=w/2)===2?x+T:(P||(P=w*.44999999999999996),L<Math.abs(T)?(L=T,p=P/4):p=P/(2*Math.PI)*Math.asin(T/L),C<1?-.5*(L*Math.pow(2,10*(C-=1))*Math.sin((C*w-p)*(2*Math.PI)/P))+x:L*Math.pow(2,-10*(C-=1))*Math.sin((C*w-p)*(2*Math.PI)/P)*.5+T+x)},easeInBack:function(C,x,k,w,T){var L=k-x;return T===void 0&&(T=1.70158),L*(C/=w)*C*((T+1)*C-T)+x},easeOutBack:function(C,x,k,w,T){var L=k-x;return T===void 0&&(T=1.70158),L*((C=C/w-1)*C*((T+1)*C+T)+1)+x},easeInOutBack:function(C,x,k,w,T){var L=k-x;return T===void 0&&(T=1.70158),(C/=w/2)<1?L/2*(C*C*(((T*=1.525)+1)*C-T))+x:L/2*((C-=2)*C*(((T*=1.525)+1)*C+T)+2)+x},easeInBounce:function(C,x,k,w){var T=k-x,L;return L=z.easeOutBounce(w-C,0,T,w),T-L+x},easeOutBounce:function(C,x,k,w){var T=k-x;return(C/=w)<.36363636363636365?T*(7.5625*C*C)+x:C<.7272727272727273?T*(7.5625*(C-=.5454545454545454)*C+.75)+x:C<.9090909090909091?T*(7.5625*(C-=.8181818181818182)*C+.9375)+x:T*(7.5625*(C-=.9545454545454546)*C+.984375)+x},easeInOutBounce:function(C,x,k,w){var T=k-x,L;return C<w/2?(L=z.easeInBounce(C*2,0,T,w),L*.5+x):(L=z.easeOutBounce(C*2-w,0,T,w),L*.5+T*.5+x)}};He.exports=z},364687:function(He,z,C){var x=C(817061)();He.exports=x;try{regeneratorRuntime=x}catch(k){typeof globalThis=="object"?globalThis.regeneratorRuntime=x:Function("r","regeneratorRuntime = r")(x)}},577134:function(He,z,C){"use strict";C.d(z,{Z:function(){return D}});var x=C(667294),k=C(785893),w=F=>{let W=F;for(;W=W.parentElement;){const b=getComputedStyle(W,null).getPropertyValue("overflow-y");if(W===document.body)return window;if(b==="auto"||b==="scroll"||b==="overlay")return W}return window},T=F=>F.firstChild?F.firstChild.offsetParent===F:!0,L=(F,W)=>{let b=F,h=0;T(W)||(h+=F.offsetTop-W.offsetTop,W=F.offsetParent,h+=-F.offsetTop);do h+=b.offsetTop,b=b.offsetParent;while(b&&b!==W);return h},P=F=>{let W=F.parentElement;for(;W&&getComputedStyle(W,null).getPropertyValue("display")==="contents";)W=W.parentElement;return W||window},p=null;typeof CSS!="undefined"&&CSS.supports&&(CSS.supports("position","sticky")?p="sticky":CSS.supports("position","-webkit-sticky")&&(p="-webkit-sticky"));var m=!1;try{const F=Object.defineProperty({},"passive",{get(){m={passive:!0}}}),W=()=>{};window.addEventListener("testPassive",W,F),window.removeEventListener("testPassive",W,F)}catch(F){}var S=F=>{const{el:W,onChange:b,unsubs:h,measure:K}=F;if(W===window){const U=()=>({top:0,left:0,height:window.innerHeight,width:window.innerWidth}),Y=K(U()),Z=()=>{Object.assign(Y,K(U())),b()};return window.addEventListener("resize",Z,m),h.push(()=>window.removeEventListener("resize",Z)),Y}else{const U=K(W.getBoundingClientRect()),Y=()=>{Object.assign(U,K(W.getBoundingClientRect())),b()},Z=new ResizeObserver(Y);return Z.observe(W),h.push(()=>Z.disconnect()),U}},y=F=>{const W=getComputedStyle(F,null),b=parseInt(W.getPropertyValue("padding-top"),10),h=parseInt(W.getPropertyValue("padding-bottom"),10);return{top:b,bottom:h}},g=(F,W,b)=>{const{bottom:h,offsetBottom:K,offsetTop:U}=b,Y=w(F);let Z=!1;const H=()=>{Z||requestAnimationFrame(()=>{const st=J();st!==rt&&ot(st),Z=!1}),Z=!0};let q=Y===window?window.scrollY:Y.scrollTop;const Q=st=>{const{offsetTop:bt,height:Ft}=nt,{naturalTop:Ht}=zt,{height:_t}=Mt;return st+bt+Ft>=Ht+_t+Ct+K},J=()=>{const{height:st}=nt,{height:bt}=Mt;return bt+U+K<=st?3:Q(q)?1:2},ft=Y!==window&&T(Y),nt=S({el:Y,onChange:H,unsubs:W,measure:({height:st,top:bt})=>({height:st,offsetTop:ft?bt:0})}),yt=P(F),gt=yt===window?{top:0,bottom:0}:y(yt),zt=S({el:yt,onChange:H,unsubs:W,measure:({height:st})=>({height:st-gt.top-gt.bottom,naturalTop:yt===window?0:L(yt,Y)+gt.top+nt.offsetTop})}),Mt=S({el:F,onChange:H,unsubs:W,measure:({height:st})=>({height:st})});let Ct=0,rt=J();const ot=st=>{const bt=rt;if(rt=st,bt===2&&(Ct=-1),st===3){F.style.position=p,h?F.style.bottom=`${K}px`:F.style.top=`${U}px`;return}const{height:Ft,offsetTop:Ht}=nt,{height:_t,naturalTop:Xt}=zt,{height:ee}=Mt;if(st===2)if(F.style.position="relative",Ct=bt===0?Math.max(0,Ht+q-Xt+U):Math.max(0,Ht+q+Ft-(Xt+ee+K)),h){const se=Math.max(0,_t-ee-Ct);F.style.bottom=`${se}px`}else F.style.top=`${Ct}px`;else F.style.position=p,st===1?h?F.style.bottom=`${K}px`:F.style.top=`${Ft-ee-K}px`:h?F.style.bottom=`${Ft-ee-K}px`:F.style.top=`${U}px`};ot(rt);const Tt=st=>{if(st===q)return;const bt=st-q;if(q=st,rt===3)return;const{offsetTop:Ft,height:Ht}=nt,{naturalTop:_t,height:Xt}=zt,{height:ee}=Mt;if(bt>0)if(rt===0){if(st+Ft+U>_t){const se=Math.max(0,Ft+q-_t+U);st+Ft+Ht<=_t+ee+se+K?ot(2):ot(1)}}else rt===2&&Q(st)&&ot(1);else if(rt===1){if(Ft+st+Ht<_t+Xt+K){const se=Math.max(0,Ft+q+Ht-(_t+ee+K));Ft+st+U>=_t+se?ot(2):ot(0)}}else rt===2&&Ft+st+U<_t+Ct&&ot(0)},Rt=Y===window?()=>Tt(window.scrollY):()=>Tt(Y.scrollTop);Y.addEventListener("scroll",Rt,m),Y.addEventListener("mousewheel",Rt,m),W.push(()=>Y.removeEventListener("scroll",Rt),()=>Y.removeEventListener("mousewheel",Rt))},O=({offsetTop:F=0,offsetBottom:W=0,bottom:b=!1}={})=>{const[h,K]=(0,x.useState)(null);return(0,x.useEffect)(()=>{if(!h||!p)return;const U=[];return g(h,U,{offsetBottom:W,offsetTop:F,bottom:b}),()=>{U.forEach(Y=>Y())}},[h,W,F,b]),K},E=F=>{const{offsetTop:W,offsetBottom:b,bottom:h,children:K,className:U,style:Y}=F,Z=O({offsetTop:W,offsetBottom:b,bottom:h});return(0,k.jsx)("div",{className:U,style:Y,ref:Z,children:K})},D=E}}]);
}());